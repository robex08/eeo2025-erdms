# ERDMS Log Rotation Configuration
# Copy this file to /etc/logrotate.d/erdms
#
# sudo cp /var/www/erdms-dev/docs/deployment/logrotate-erdms.conf /etc/logrotate.d/erdms
# sudo chmod 644 /etc/logrotate.d/erdms

# PHP Error Logs
/var/www/erdms-dev/logs/php-error.log
/var/www/erdms-dev/logs/php/prod-error.log
/var/www/erdms-dev/logs/php/spisovka-error.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    sharedscripts
    copytruncate
    su www-data www-data
}

# PHP Debug Logs  
/var/www/erdms-dev/logs/php-debug.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    copytruncate
    su www-data www-data
    # Keep only 1 week of debug logs
}

# Application Debug Logs
/var/www/erdms-dev/logs/dual-notification-debug.log
/var/www/erdms-dev/logs/hierarchy_debug.log
/var/www/erdms-dev/logs/debug_order_update.log {
    weekly
    missingok
    rotate 4
    compress
    delaycompress
    notifempty
    copytruncate
    su www-data www-data
}

# Temporary PHP log in /tmp/ (cleanup)
/tmp/php_errors.log {
    daily
    missingok
    rotate 1
    compress
    notifempty
    copytruncate
    # Clean up any remaining logs in /tmp/
}