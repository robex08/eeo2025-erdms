"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[3160],{83160:(e,n,t)=>{t.r(n),t.d(n,{NotificationsPage:()=>bn,default:()=>kn});var a=t(53986),r=t(89379),o=t(57528),i=t(65043),s=t(45903),d=t(83290),l=t(83910),c=t(97929),f=t(53683),p=t(37087),u=t(43548),h=t(91357),g=t(51833),x=t(89468),m=t(90087),v=t(27837),b=t(98951),k=t(44649),j=t(25328),_=t(70579);const y=["sortDate"];var z,A,S,w,C,$,O,N,U,D,I,P,L,R,T,E,F,B,Z,J,W,M,K,V,Y,H,G,X,Q,q,ee,ne,te,ae,re,oe,ie,se,de,le,ce,fe,pe,ue,he,ge,xe,me,ve,be,ke,je,_e;(0,d.i7)(z||(z=(0,o.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"])));const ye=(0,d.i7)(A||(A=(0,o.A)(["\n  from {\n    opacity: 0;\n    transform: translateX(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n"]))),ze=s.A.div(S||(S=(0,o.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),Ae=s.A.div(w||(w=(0,o.A)(["\n  width: 100%;\n  max-width: none;\n  margin: 0 auto;\n"]))),Se=s.A.div(C||(C=(0,o.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n"]))),we=s.A.div($||($=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),Ce=(s.A.div(O||(O=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n"]))),s.A.button(N||(N=(0,o.A)(["\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  width: 42px;\n  height: 42px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.4);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])))),$e=s.A.div(U||(U=(0,o.A)(["\n  border-bottom: 3px solid #e5e7eb;\n  margin-bottom: 2rem;\n"]))),Oe=s.A.h1(D||(D=(0,o.A)(["\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n"]))),Ne=(s.A.div(I||(I=(0,o.A)(["\n  margin-bottom: 32px;\n"]))),s.A.p(P||(P=(0,o.A)(["\n  font-size: 15px;\n  color: #6b7280;\n  margin: 0;\n"]))),s.A.div(L||(L=(0,o.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"])))),Ue=s.A.div(R||(R=(0,o.A)(["\n  width: 100%;\n  position: relative;\n"]))),De=s.A.input(T||(T=(0,o.A)(["\n  width: 100%;\n  padding: 10px 40px 10px 40px;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.15s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Ie=s.A.div(E||(E=(0,o.A)(["\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n"]))),Pe=s.A.button(F||(F=(0,o.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 14px !important;\n    height: 14px !important;\n  }\n"]))),Le=s.A.div(B||(B=(0,o.A)(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  align-items: center;\n  width: 100%;\n"]))),Re=(s.A.div(Z||(Z=(0,o.A)(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  width: 100%;\n"]))),s.A.button(J||(J=(0,o.A)(["\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  white-space: nowrap;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n"])))),Te=s.A.button(W||(W=(0,o.A)(["\n  padding: 0.5rem 1rem;\n  border: 2px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    border-color: #3b82f6;\n    color: #1d4ed8;\n  }\n"])),e=>e.$active?"#3b82f6":"#e2e8f0",e=>e.$active?"#eff6ff":"white",e=>e.$active?"#1d4ed8":"#64748b"),Ee=s.A.button(M||(M=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid ",";\n  background: white;\n  color: ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n"])),e=>"danger"===e.$variant?"#ef4444":"success"===e.$variant?"#10b981":"warning"===e.$variant?"#f59e0b":"#6b7280",e=>"danger"===e.$variant?"#991b1b":"success"===e.$variant?"#065f46":"warning"===e.$variant?"#92400e":"#6b7280",e=>"danger"===e.$variant?"#fee2e2":"success"===e.$variant?"#d1fae5":"warning"===e.$variant?"#fef3c7":"#f8fafc",e=>"danger"===e.$variant?"#ef4444":"success"===e.$variant?"#10b981":"warning"===e.$variant?"#f59e0b":"#cbd5e1"),Fe=s.A.div(K||(K=(0,o.A)(["\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n"]))),Be=s.A.div(V||(V=(0,o.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 1.5rem 0 1rem 0;\n  color: #94a3b8;\n  font-weight: 500;\n  position: relative;\n"]))),Ze=s.A.span(Y||(Y=(0,o.A)(["\n  font-size: 14px;\n  color: #94a3b8;\n  font-weight: 500;\n  padding-right: 1rem;\n  background: white;\n  position: relative;\n  z-index: 1;\n"]))),Je=s.A.hr(H||(H=(0,o.A)(["\n  flex: 1;\n  border: none;\n  border-top: 1px solid #e5e7eb;\n  margin: 0;\n"]))),We=s.A.button(G||(G=(0,o.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  color: #94a3b8;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s ease;\n  position: relative;\n  z-index: 2;\n  padding: 0.25rem 0.5rem;\n  margin-left: 0.5rem;\n\n  &:hover {\n    color: #3b82f6;\n  }\n"]))),Me=s.A.div(X||(X=(0,o.A)(["\n  background: ",";\n  border-radius: 12px;\n  padding: 16px;\n  border-left: "," solid ",";\n  box-shadow: ",";\n  flex: 1;\n  min-width: 140px;\n  max-width: 200px;\n  cursor: ",";\n  transition: all 0.25s ease;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n\n  &:hover {\n    transform: ",";\n    box-shadow: ",";\n    ","\n  }\n"])),e=>e.$isActive?"linear-gradient(145deg, ".concat(e.$color||"#3b82f6","20, ").concat(e.$color||"#3b82f6","10)"):"linear-gradient(145deg, #ffffff, #f9fafb)",e=>e.$isActive?"6px":"4px",e=>e.$color||"#3b82f6",e=>e.$isActive?"0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ".concat(e.$color||"#3b82f6","40"):"0 1px 3px rgba(0, 0, 0, 0.05)",e=>e.$clickable?"pointer":"default",e=>e.$clickable?"translateY(-2px)":"translateY(-1px)",e=>e.$clickable?"0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.06)":"0 2px 4px rgba(0, 0, 0, 0.08)",e=>e.$clickable&&"\n      background: linear-gradient(145deg, ".concat(e.$color||"#3b82f6","25, ").concat(e.$color||"#3b82f6","15);\n    ")),Ke=s.A.div(Q||(Q=(0,o.A)(["\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1;\n"]))),Ve=s.A.div(q||(q=(0,o.A)(["\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  font-size: 1.75rem;\n  opacity: 0.7;\n"]))),Ye=s.A.div(ee||(ee=(0,o.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n  font-weight: 500;\n  line-height: 1.3;\n  margin-top: auto;\n"]))),He=s.A.div(ne||(ne=(0,o.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n"]))),Ge=s.A.div(te||(te=(0,o.A)(["\n  padding: 14px 18px;\n  border-bottom: 1px solid #f3f4f6;\n  display: flex;\n  gap: 14px;\n  align-items: center;\n  transition: all 0.15s ease;\n  cursor: pointer;\n  animation: "," 0.3s ease-out;\n  animation-delay: ","s;\n  animation-fill-mode: backwards;\n\n  /* Unread styling */\n  background: ",";\n  border-left: ",";\n\n  /* Priority coloring */\n  ","\n\n  ","\n\n  &:hover {\n    background: ",";\n    ","\n    ","\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n"])),ye,e=>.03*e.$index,e=>e.$isUnread?"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)":"transparent",e=>e.$isUnread?"4px solid #3b82f6":"4px solid transparent",e=>"high"===e.$priority&&"\n    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n    border-left-color: #ef4444;\n  ",e=>"urgent"===e.$priority&&"\n    background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);\n    border-left-color: #dc2626;\n  ",e=>e.$isUnread?"#dbeafe":"#f9fafb",e=>"high"===e.$priority&&"background: #fee2e2;",e=>"urgent"===e.$priority&&"background: #fecaca;"),Xe=s.A.div(ae||(ae=(0,o.A)(["\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  font-size: 28px;\n  flex-shrink: 0;\n  color: ",";\n  padding-top: 4px;\n"])),e=>"urgent"===e.$priority?"#dc2626":"high"===e.$priority?"#f59e0b":"#3b82f6"),Qe=s.A.div(re||(re=(0,o.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),qe=s.A.div(oe||(oe=(0,o.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: start;\n  margin-bottom: 10px;\n"]))),en=s.A.div(ie||(ie=(0,o.A)(["\n  font-weight: ",";\n  color: ",";\n  font-size: 15px;\n  line-height: 1.5;\n"])),e=>e.$isUnread?700:600,e=>e.$isUnread?"#111827":"#374151"),nn=s.A.div(se||(se=(0,o.A)(["\n  font-size: 14px;\n  color: #6b7280;\n  line-height: 1.6;\n  margin-bottom: 12px;\n"]))),tn=s.A.div(de||(de=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  font-size: 13px;\n  color: #9ca3af;\n  flex-wrap: wrap;\n  margin-top: 8px;\n"]))),an=s.A.span(le||(le=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n"]))),rn=s.A.span(ce||(ce=(0,o.A)(["\n  background: ",";\n  color: ",";\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n"])),e=>"order"===e.$type?"#dbeafe":"TODO_ALARM"===e.$type?"#fef3c7":"system"===e.$type?"#e5e7eb":"#f3f4f6",e=>"order"===e.$type?"#1e40af":"TODO_ALARM"===e.$type?"#92400e":"system"===e.$type?"#374151":"#6b7280"),on=s.A.div(fe||(fe=(0,o.A)(["\n  display: flex;\n  gap: 8px;\n  flex-shrink: 0;\n"]))),sn=s.A.button(pe||(pe=(0,o.A)(["\n  background: transparent;\n  border: 1px solid transparent;\n  color: #6b7280;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  font-size: 14px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n    color: #111827;\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n"]))),dn=s.A.div(ue||(ue=(0,o.A)(["\n  padding: 80px 20px;\n  text-align: center;\n  color: #9ca3af;\n"]))),ln=s.A.div(he||(he=(0,o.A)(["\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.5;\n"]))),cn=s.A.div(ge||(ge=(0,o.A)(["\n  font-size: 18px;\n  font-weight: 600;\n  color: #6b7280;\n  margin-bottom: 8px;\n"]))),fn=s.A.div(xe||(xe=(0,o.A)(["\n  font-size: 14px;\n  color: #9ca3af;\n"]))),pn=s.A.div(me||(me=(0,o.A)(["\n  padding: 60px 20px;\n  text-align: center;\n  color: #9ca3af;\n  font-size: 15px;\n"]))),un=s.A.div(ve||(ve=(0,o.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n  margin-top: auto;\n"]))),hn=s.A.div(be||(be=(0,o.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),gn=s.A.div(ke||(ke=(0,o.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),xn=s.A.button(je||(je=(0,o.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),mn=s.A.select(_e||(_e=(0,o.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n"]))),vn=(e,n)=>{if(n){const e=n.toLowerCase();if(e.includes("schv\xe1lil")||e.includes("approved"))return{background:"#d1fae5",color:"#065f46"};if(e.includes("zam\xedtl")||e.includes("rejected")||e.includes("odm\xedtl"))return{background:"#fee2e2",color:"#991b1b"};if(e.includes("vytvo\u0159il")||e.includes("created"))return{background:"#dbeafe",color:"#1e40af"};if(e.includes("odeslal")||e.includes("sent"))return{background:"#e0e7ff",color:"#4338ca"};if(e.includes("upravil")||e.includes("edited"))return{background:"#fef3c7",color:"#92400e"};if(e.includes("zru\u0161il")||e.includes("cancelled"))return{background:"#f3f4f6",color:"#374151"}}if(e){if(e.includes("schvalena")||e.includes("approved"))return{background:"#d1fae5",color:"#065f46"};if(e.includes("zamitnuta")||e.includes("rejected"))return{background:"#fee2e2",color:"#991b1b"};if(e.includes("nova")||e.includes("created"))return{background:"#dbeafe",color:"#1e40af"};if(e.includes("ke_schvaleni"))return{background:"#fef3c7",color:"#92400e"};if(e.includes("odeslana")||e.includes("sent"))return{background:"#e0e7ff",color:"#4338ca"}}return{background:"#f3e8ff",color:"#6b21a8"}},bn=()=>{const e=(0,f.M4)(),n=(0,h.Zp)(),{userDetail:t}=i.useContext(v.cy),[o,s]=(0,i.useState)([]),[d,z]=(0,i.useState)(!0),[A,S]=(0,i.useState)(!1),[w,C]=(0,i.useState)(()=>localStorage.getItem("notifications_searchQuery")||""),[$,O]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showUnread");return null!==e&&JSON.parse(e)}),[N,U]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showRead");return null!==e&&JSON.parse(e)}),[D,I]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showUrgent");return null!==e&&JSON.parse(e)}),[P,L]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showHigh");return null!==e&&JSON.parse(e)}),[R,T]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showNormal");return null!==e&&JSON.parse(e)}),[E,F]=(0,i.useState)(()=>localStorage.getItem("notifications_activeStatFilter")||null),[B,Z]=(0,i.useState)(null),[J,W]=(0,i.useState)({isOpen:!1}),[M,K]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_threadMode");return null===e||JSON.parse(e)}),[V,Y]=(0,i.useState)(new Set),[H,G]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_detailMode");return null===e||JSON.parse(e)}),[X,Q]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_dashboardCollapsed");return null!==e&&JSON.parse(e)}),[q,ee]=(0,i.useState)(!1),[ne,te]=(0,i.useState)(null),[ae,re]=(0,i.useState)(null),[oe,ie]=(0,i.useState)(!1),[se,de]=(0,i.useState)(null),[le,ce]=(0,i.useState)(null),[fe,pe]=(0,i.useState)(0),[ue,he]=(0,i.useState)(25);(0,i.useEffect)(()=>{xe()},[]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_searchQuery",w)},[w]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showUnread",JSON.stringify($))},[$]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showRead",JSON.stringify(N))},[N]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showUrgent",JSON.stringify(D))},[D]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showHigh",JSON.stringify(P))},[P]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showNormal",JSON.stringify(R))},[R]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_activeStatFilter",E||"")},[E]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_threadMode",JSON.stringify(M))},[M]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_detailMode",JSON.stringify(H))},[H]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_dashboardCollapsed",JSON.stringify(X))},[X]),(0,i.useEffect)(()=>{if(null!==e&&void 0!==e&&e.registerNewNotificationsCallback){const n=(e,n)=>{xe()};return e.registerNewNotificationsCallback(n),()=>{e.registerNewNotificationsCallback(null)}}},[e]);const ge=e=>({orders:"Objedn\xe1vky",todo:"TODO \xfakoly",system:"Syst\xe9m",mentions:"Zm\xednky",reminders:"P\u0159ipom\xednky"}[e]||e),xe=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?S(!0):z(!0),Z(null);try{const e=await(0,u.D$)({limit:100,offset:0,unread_only:!1,include_dismissed:!0}),n=(e.data||[]).map(e=>{const n=u.nv[e.type]||{};return(0,r.A)((0,r.A)({},e),{},{icon:n.icon||"\ud83d\udd14",color:n.color||"#3b82f6",category:n.category||"system",priority:e.priority||n.priority||"normal"})});s(n)}catch(B){Z("Nepoda\u0159ilo se na\u010d\xedst notifikace. Zkontroluj konzoli pro detaily."),s([])}finally{z(!1),S(!1)}},me=e=>{if("total"===e)return F(null),O(!1),U(!1),I(!1),L(!1),T(!1),void C("");E===e?(F(null),O(!1),U(!1),I(!1),L(!1),T(!1)):(F(e),O(!1),U(!1),I(!1),L(!1),T(!1),"unread"===e?O(!0):"urgent"===e?I(!0):"high"===e&&L(!0))},ve=o.filter(e=>{if(w){var n,t;const a=w.toLowerCase();if(!((null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(t=e.message)||void 0===t?void 0:t.toLowerCase().includes(a))))return!1}if(E&&!["total","unread","urgent","high"].includes(E)){const n={nova:"order_status_nova",keSchvaleni:"order_status_ke_schvaleni",schvalena:"order_status_schvalena",zamitnuta:"order_status_zamitnuta",cekaSe:"order_status_ceka_se",odeslana:"order_status_odeslana",potvrzena:"order_status_potvrzena",cekaKontrola:"order_status_kontrola_ceka",vecnaSpravnost:"order_status_kontrola_potvrzena",registrZverejnena:"order_status_registr_zverejnena",dokoncena:"order_status_dokoncena",zrusena:"order_status_zrusena"}[E];if(n&&e.type!==n)return!1}if($||N){const n=!e.is_read||0===e.is_read;if(!($&&n||N&&!n))return!1}if(D||P||R){const n=e.priority||"normal";if(!(D&&"urgent"===n||P&&"high"===n||R&&"normal"===n))return!1}return!0}),be=(e=>{if(!M)return e.map(e=>({isThread:!1,notification:e}));const n=new Map,t=[];e.forEach((e,a)=>{var r,o;let i=null;try{const n=e.data_json?"string"===typeof e.data_json?JSON.parse(e.data_json):e.data_json:e.data;i=null===n||void 0===n?void 0:n.order_id,null!==i&&void 0!==i&&(i=String(i))}catch(l){}const s=null===(r=e.type)||void 0===r?void 0:r.includes("order"),d=null===(o=e.type)||void 0===o?void 0:o.includes("todo_alarm");(s||d)&&i?(n.has(i)||n.set(i,[]),n.get(i).push(e)):t.push(e)});return[...Array.from(n.entries()).map(e=>{var n,t;let[a,r]=e;const o=[...r].sort((e,n)=>{const t=new Date(e.dt_created||e.created_at||0);return new Date(n.dt_created||n.created_at||0)-t});return{orderId:a,notifications:o,newestDate:(null===(n=o[0])||void 0===n?void 0:n.dt_created)||(null===(t=o[0])||void 0===t?void 0:t.created_at)}}).sort((e,n)=>{const t=new Date(e.newestDate||0);return new Date(n.newestDate||0)-t}).map(e=>{var n,t;let{orderId:a,notifications:r}=e;return{isThread:!0,orderId:a,notifications:r,mainNotification:r[0],olderNotifications:r.slice(1),sortDate:new Date((null===(n=r[0])||void 0===n?void 0:n.dt_created)||(null===(t=r[0])||void 0===t?void 0:t.created_at)||0)}}),...t.map(e=>({isThread:!1,notification:e,sortDate:new Date(e.dt_created||e.created_at||0)}))].sort((e,n)=>n.sortDate-e.sortDate).map(e=>{const{sortDate:n}=e;return(0,a.A)(e,y)})})(ve),ke={total:o.length,nova:o.filter(e=>"order_status_nova"===e.type).length,keSchvaleni:o.filter(e=>"order_status_ke_schvaleni"===e.type).length,schvalena:o.filter(e=>"order_status_schvalena"===e.type).length,zamitnuta:o.filter(e=>"order_status_zamitnuta"===e.type).length,cekaSe:o.filter(e=>"order_status_ceka_se"===e.type).length,odeslana:o.filter(e=>"order_status_odeslana"===e.type).length,potvrzena:o.filter(e=>"order_status_potvrzena"===e.type).length,cekaKontrola:o.filter(e=>"order_status_kontrola_ceka"===e.type).length,vecnaSpravnost:o.filter(e=>"order_status_kontrola_potvrzena"===e.type).length,registrZverejnena:o.filter(e=>"order_status_registr_zverejnena"===e.type).length,dokoncena:o.filter(e=>"order_status_dokoncena"===e.type).length,zrusena:o.filter(e=>"order_status_zrusena"===e.type).length},je=Math.ceil(be.length/ue),_e=fe*ue,ye=_e+ue,bn=be.slice(_e,ye),kn=fe>0,jn=fe<je-1;(0,i.useEffect)(()=>{pe(0)},[w,$,N,D,P,R,M]);const _n=()=>{ee(!1),te(null),re(null)},yn=async e=>{(!e.is_read||0===e.is_read)&&await zn(e.id);try{const c=e.data_json?JSON.parse(e.data_json):{},f="edit",p=c.order_id||e.related_object_id;if(e.type&&e.type.includes("order")&&p){const e=parseInt(p);if("edit"===f){const n=null===t||void 0===t?void 0:t.token,s=null===t||void 0===t?void 0:t.username;if(n&&s)try{var a;const d=await(0,k.Hj)(e,n,s,!0);if(!d)return void(0,j.Xo)("error","Nepoda\u0159ilo se na\u010d\xedst objedn\xe1vku z datab\xe1ze");if(!0===(null===(a=d.lock_info)||void 0===a?void 0:a.locked)){var r,o,i;const n=d.lock_info,a=n.locked_by_user_fullname||"u\u017eivatel #".concat(n.locked_by_user_id),s=null===t||void 0===t||null===(r=t.roles)||void 0===r?void 0:r.some(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role);return te({lockedByUserName:a,lockedByUserEmail:n.locked_by_user_email||null,lockedByUserTelefon:n.locked_by_user_telefon||null,lockedAt:n.locked_at||null,lockAgeMinutes:n.lock_age_minutes||null,canForceUnlock:s,orderId:e,userRoleName:(null===t||void 0===t||null===(o=t.roles)||void 0===o||null===(i=o.find(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role))||void 0===i?void 0:i.nazev_role)||"administr\xe1tor"}),re({objednavka_id:e}),void ee(!0)}}catch(B){return console.error("Chyba p\u0159i kontrole zam\u010den\xed:",B),void(0,j.Xo)("error","Chyba p\u0159i kontrole dostupnosti objedn\xe1vky")}}const l=(null===t||void 0===t?void 0:t.uzivatel_id)||(null===t||void 0===t?void 0:t.user_id);if(l){m.default.setCurrentUser(l);const t=await m.default.hasDraft();let a=!1,r=null,o=!1;if(t)try{var s,d;const n=await m.default.loadDraft(),t=n.savedOrderId||(null===(s=n.formData)||void 0===s?void 0:s.id),i=e;if(console.log("\ud83d\udd0d NotificationsPage - DEBUG POROVN\xc1N\xcd ID:",{draftOrderId:t,currentOrderId:i,"draftData.savedOrderId":n.savedOrderId,"draftData.formData?.id":null===(d=n.formData)||void 0===d?void 0:d.id,targetOrderId:e,"String(draftOrderId)":String(t),"String(currentOrderId)":String(i),"jsou stejn\xe9?":String(t)===String(i),"cel\xfd draftData":n}),t&&i&&String(t)===String(i))console.log("\u2705 Draft pat\u0159\xed k T\xc9TO objedn\xe1vce - naviguju bez ptan\xed"),a=!1,o=!0;else{console.log("\u274c Draft pat\u0159\xed k JIN\xc9 objedn\xe1vce - kontroluji zm\u011bny");const e=(0,x.V5)(n),t=(0,x.NN)(n);console.log("\ud83d\udcca Zm\u011bny v draftu:",{hasNewConcept:e,hasDbChanges:t}),a=e||t,a?(console.log("\u26a0\ufe0f ZOBRAZUJI CONFIRM DIALOG"),r=n):console.log("\u2705 \u017d\xe1dn\xe9 zm\u011bny - naviguju bez ptan\xed")}}catch(B){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed draftu:",B),a=!1}if(o)return void n("/order-form-25?edit=".concat(e));if(a&&r)return de(r),ce(e),void ie(!0)}n("/order-form-25?edit=".concat(c.order_id))}else if(e.type&&e.type.includes("alarm_todo")&&c.order_id){const e=parseInt(c.order_id),a=null===t||void 0===t?void 0:t.user_id;if(a){m.default.setCurrentUser(a);const t=await m.default.hasDraft();let r=!1,o=null,i=!1;if(t)try{var l;const n=await m.default.loadDraft(),t=n.savedOrderId||(null===(l=n.formData)||void 0===l?void 0:l.id),a=e;if(t&&a&&String(t)===String(a))r=!1,i=!0;else{const e=(0,x.V5)(n),t=(0,x.NN)(n);r=e||t,r&&(o=n)}}catch(B){r=!1}if(i)return void n("/order-form-25?edit=".concat(e));if(r&&o)return de(o),ce(e),void ie(!0)}n("/order-form-25?edit=".concat(c.order_id))}}catch(B){}},zn=async(n,t)=>{null===t||void 0===t||t.stopPropagation();try{if(await(0,u.bA)(n),s(e=>e.map(e=>e.id===n?(0,r.A)((0,r.A)({},e),{},{is_read:1}):e)),null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(B){alert("Nepoda\u0159ilo se ozna\u010dit notifikaci jako p\u0159e\u010dtenou.")}},An=async(n,t)=>{null===t||void 0===t||t.stopPropagation();try{await(0,u.yk)(n),s(e=>e.map(e=>e.id===n?(0,r.A)((0,r.A)({},e),{},{is_dismissed:1}):e));const t=o.find(e=>e.id===n);if(t&&(!t.is_read||0===t.is_read)&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(B){alert("Nepoda\u0159ilo se smazat notifikaci.")}},Sn=async(e,n)=>{null===n||void 0===n||n.stopPropagation();try{await(0,u.WL)(e),s(n=>n.map(n=>n.id===e?(0,r.A)((0,r.A)({},n),{},{is_dismissed:0}):n))}catch(B){alert("Nepoda\u0159ilo se obnovit notifikaci.")}},wn=n=>{W({isOpen:!0,title:"Smazat notifikaci",message:"Opravdu chcete trvale smazat tuto notifikaci z datab\xe1ze?\n\nTato akce je NEVRATN\xc1!",icon:c.yLS,variant:"danger",onConfirm:async()=>{W({isOpen:!1});try{await(0,u.fP)(n),s(e=>e.filter(e=>e.id!==n));const t=o.find(e=>e.id===n);if(t&&(!t.is_read||0===t.is_read)&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(B){W({isOpen:!0,title:"Chyba",message:"Nepoda\u0159ilo se smazat notifikaci.\n\nZkuste to pros\xedm znovu.",icon:c.tUE,variant:"danger",onConfirm:()=>W({isOpen:!1}),onCancel:()=>W({isOpen:!1})})}},onCancel:()=>W({isOpen:!1})})},Cn=()=>{const n=w||$||N||D||P||R,t=n?ve:o,a=t.length;W({isOpen:!0,title:n?"Smazat zobrazen\xe9 notifikace":"Smazat v\u0161echny notifikace",message:"Opravdu chcete trvale smazat ".concat(n?"zobrazen\xe9":"V\u0160ECHNY"," notifikace (").concat(a," ks) z datab\xe1ze?\n\nTato akce je NEVRATN\xc1 a nelze ji vr\xe1tit zp\u011bt!"),icon:c.zpE,variant:"danger",onConfirm:async()=>{W({isOpen:!1});try{let a;if(n){const n=t.map(e=>(0,u.fP)(e.id));await Promise.all(n),a={deleted_count:t.length};const r=new Set(t.map(e=>e.id));s(e=>e.filter(e=>!r.has(e.id)));const o=t.filter(e=>!e.is_read||0===e.is_read).length;if(o>0&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;e.handleUnreadCountChange(Math.max(0,n-o))}}else a=await(0,u.L6)(),s([]),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(B){W({isOpen:!0,title:"Chyba",message:"Nepoda\u0159ilo se smazat notifikace.\n\nZkuste to pros\xedm znovu.",icon:c.tUE,variant:"danger",onConfirm:()=>W({isOpen:!1}),onCancel:()=>W({isOpen:!1})})}},onCancel:()=>W({isOpen:!1})})},$n=e=>{if(!e)return"";const n=new Date(e),t=new Date-n,a=Math.floor(t/6e4);if(a<1)return"Pr\xe1v\u011b te\u010f";if(a<60)return"P\u0159ed ".concat(a," min");const r=Math.floor(a/60);if(r<24)return"P\u0159ed ".concat(r," h");const o=Math.floor(r/24);return o<7?"P\u0159ed ".concat(o," d"):n.toLocaleDateString("cs-CZ",{day:"numeric",month:"long",year:"numeric"})};return(0,_.jsxs)(ze,{children:[(0,_.jsxs)(Ae,{children:[(0,_.jsxs)(Se,{children:[(0,_.jsxs)(we,{children:[(0,_.jsx)(p.z,{text:"Obnovit data z datab\xe1ze (force reload)",icon:"warning",preferredPosition:"bottom",children:(0,_.jsx)(Ce,{onClick:()=>{xe(!0)},children:(0,_.jsx)(l.g,{icon:c.OtC})})}),(0,_.jsx)(p.z,{text:M?"Zobrazit v\u0161echny notifikace samostatn\u011b":"Seskupit notifikace objedn\xe1vek do vl\xe1ken",icon:"info",preferredPosition:"bottom",children:(0,_.jsx)(Ce,{onClick:()=>K(!M),style:{background:M?"rgba(34, 197, 94, 0.25)":"rgba(255, 255, 255, 0.15)",borderColor:M?"rgba(34, 197, 94, 0.5)":"rgba(255, 255, 255, 0.3)"},children:(0,_.jsx)(l.g,{icon:M?c.qIE:c.ITF})})}),ke.unread>0&&(0,_.jsxs)(Re,{onClick:async()=>{try{await(0,u.he)(),s(e=>e.map(e=>(0,r.A)((0,r.A)({},e),{},{is_read:1}))),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(B){alert("Nepoda\u0159ilo se ozna\u010dit v\u0161echny notifikace jako p\u0159e\u010dten\xe9.")}},title:"Ozna\u010dit v\u0161echny notifikace jako p\u0159e\u010dten\xe9",children:[(0,_.jsx)(l.g,{icon:c.FK2}),"Ozna\u010dit v\u0161e jako p\u0159e\u010dten\xe9"]}),o.length>0&&(0,_.jsxs)(Re,{onClick:async()=>{try{const n=o.map(e=>(0,u.yk)(e.id));await Promise.all(n),s(e=>e.map(e=>(0,r.A)((0,r.A)({},e),{},{is_dismissed:1}))),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(B){alert("Nepoda\u0159ilo se smazat v\u0161echny notifikace. N\u011bkter\xe9 mohly b\xfdt smaz\xe1ny."),xe()}},title:"Skr\xfdt v\u0161echny notifikace ze zvone\u010dku",children:[(0,_.jsx)(l.g,{icon:c.k6j}),"Skr\xfdt v\u0161e ze zvone\u010dku"]}),o.length>0&&(()=>{const e=w||$||N||D||P||R,n=e?ve.length:o.length,t=e?"Smazat zobrazen\xe9 (".concat(n,")"):"Smazat v\u0161e trvale";return(0,_.jsxs)(Re,{onClick:Cn,title:e?"Sma\u017ee ".concat(n," zobrazen\xfdch notifikac\xed"):"Sma\u017ee v\u0161echny notifikace (".concat(n," ks)"),children:[(0,_.jsx)(l.g,{icon:c.yLS}),t]})})(),(0,_.jsxs)(Re,{onClick:()=>G(!H),title:H?"Skr\xfdt detaily (p\u0159edm\u011bt, cena, tagy)":"Zobrazit detaily (p\u0159edm\u011bt, cena, tagy)",style:{marginRight:"auto"},children:[(0,_.jsx)(l.g,{icon:H?c.pS3:c.k6j}),"Detailn\xed re\u017eim"]})]}),(0,_.jsxs)(Oe,{children:["Spr\xe1va a p\u0159ehled notifikac\xed",(0,_.jsx)(l.g,{icon:c.z$e})]})]}),(0,_.jsx)($e,{}),(0,_.jsxs)(Be,{children:[(0,_.jsx)(Ze,{children:"Dashboard - p\u0159ehled notifikac\xed"}),(0,_.jsx)(Je,{}),(0,_.jsx)(We,{onClick:()=>Q(!X),children:(0,_.jsx)(l.g,{icon:X?c.Jt$:c.w2A})})]}),!X&&(0,_.jsxs)(Fe,{children:[(0,_.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:!w&&!E,onClick:()=>me("total"),title:"Kliknut\xedm zru\u0161\xedte v\u0161echny filtry",children:[(0,_.jsx)(Ke,{children:ke.total}),(0,_.jsx)(Ve,{children:"\ud83d\udcca"}),(0,_.jsx)(Ye,{children:"Celkem notifikac\xed"})]}),(0,_.jsxs)(Me,{$color:"#64748b",$clickable:!0,$isActive:"nova"===E,onClick:()=>me("nova"),title:"Filtrovat: Objedn\xe1vka vytvo\u0159ena",children:[(0,_.jsx)(Ke,{children:ke.nova}),(0,_.jsx)(Ve,{children:"\ud83d\udcdd"}),(0,_.jsx)(Ye,{children:"Nov\xe1"})]}),(0,_.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:"keSchvaleni"===E,onClick:()=>me("keSchvaleni"),title:"Filtrovat: Objedn\xe1vka ke schv\xe1len\xed",children:[(0,_.jsx)(Ke,{children:ke.keSchvaleni}),(0,_.jsx)(Ve,{children:"\ud83d\udccb"}),(0,_.jsx)(Ye,{children:"Ke schv\xe1len\xed"})]}),(0,_.jsxs)(Me,{$color:"#16a34a",$clickable:!0,$isActive:"schvalena"===E,onClick:()=>me("schvalena"),title:"Filtrovat: Objedn\xe1vka schv\xe1lena",children:[(0,_.jsx)(Ke,{children:ke.schvalena}),(0,_.jsx)(Ve,{children:"\ud83d\udc4d"}),(0,_.jsx)(Ye,{children:"Schv\xe1len\xe1"})]}),(0,_.jsxs)(Me,{$color:"#dc2626",$clickable:!0,$isActive:"zamitnuta"===E,onClick:()=>me("zamitnuta"),title:"Filtrovat: Objedn\xe1vka zam\xedtnuta",children:[(0,_.jsx)(Ke,{children:ke.zamitnuta}),(0,_.jsx)(Ve,{children:"\u274c"}),(0,_.jsx)(Ye,{children:"Zam\xedtnut\xe1"})]}),(0,_.jsxs)(Me,{$color:"#f59e0b",$clickable:!0,$isActive:"cekaSe"===E,onClick:()=>me("cekaSe"),title:"Filtrovat: Objedn\xe1vka \u010dek\xe1",children:[(0,_.jsx)(Ke,{children:ke.cekaSe}),(0,_.jsx)(Ve,{children:"\u23f8\ufe0f"}),(0,_.jsx)(Ye,{children:"\u010cek\xe1 se"})]}),(0,_.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:"odeslana"===E,onClick:()=>me("odeslana"),title:"Filtrovat: Objedn\xe1vka odesl\xe1na dodavateli",children:[(0,_.jsx)(Ke,{children:ke.odeslana}),(0,_.jsx)(Ve,{children:"\ud83d\udce4"}),(0,_.jsx)(Ye,{children:"Odesl\xe1na dodavateli"})]}),(0,_.jsxs)(Me,{$color:"#8b5cf6",$clickable:!0,$isActive:"potvrzena"===E,onClick:()=>me("potvrzena"),title:"Filtrovat: Objedn\xe1vka potvrzena dodavatelem",children:[(0,_.jsx)(Ke,{children:ke.potvrzena}),(0,_.jsx)(Ve,{children:"\u2714\ufe0f"}),(0,_.jsx)(Ye,{children:"Potvrzena dodavatelem"})]}),(0,_.jsxs)(Me,{$color:"#f59e0b",$clickable:!0,$isActive:"cekaKontrola"===E,onClick:()=>me("cekaKontrola"),title:"Filtrovat: \u010cek\xe1 na kontrolu",children:[(0,_.jsx)(Ke,{children:ke.cekaKontrola}),(0,_.jsx)(Ve,{children:"\ud83d\udd0d"}),(0,_.jsx)(Ye,{children:"\u010cek\xe1 na kontrolu"})]}),(0,_.jsxs)(Me,{$color:"#10b981",$clickable:!0,$isActive:"vecnaSpravnost"===E,onClick:()=>me("vecnaSpravnost"),title:"Filtrovat: V\u011bcn\xe1 spr\xe1vnost potvrzena",children:[(0,_.jsx)(Ke,{children:ke.vecnaSpravnost}),(0,_.jsx)(Ve,{children:"\u2705"}),(0,_.jsx)(Ye,{children:"V\u011bcn\xe1 spr\xe1vnost"})]}),(0,_.jsxs)(Me,{$color:"#10b981",$clickable:!0,$isActive:"registrZverejnena"===E,onClick:()=>me("registrZverejnena"),title:"Filtrovat: Zve\u0159ejn\u011bna v registru smluv",children:[(0,_.jsx)(Ke,{children:ke.registrZverejnena}),(0,_.jsx)(Ve,{children:"\ud83d\udce2"}),(0,_.jsx)(Ye,{children:"Zve\u0159ejn\u011bna v registru"})]}),(0,_.jsxs)(Me,{$color:"#059669",$clickable:!0,$isActive:"dokoncena"===E,onClick:()=>me("dokoncena"),title:"Filtrovat: Objedn\xe1vka dokon\u010dena",children:[(0,_.jsx)(Ke,{children:ke.dokoncena}),(0,_.jsx)(Ve,{children:"\ud83c\udfaf"}),(0,_.jsx)(Ye,{children:"Dokon\u010den\xe1"})]}),(0,_.jsxs)(Me,{$color:"#6b7280",$clickable:!0,$isActive:"zrusena"===E,onClick:()=>me("zrusena"),title:"Filtrovat: Objedn\xe1vka zru\u0161ena",children:[(0,_.jsx)(Ke,{children:ke.zrusena}),(0,_.jsx)(Ve,{children:"\ud83d\udeab"}),(0,_.jsx)(Ye,{children:"Zru\u0161en\xe1"})]})]}),(0,_.jsxs)(Ne,{children:[(0,_.jsxs)(Ue,{children:[(0,_.jsx)(Ie,{children:(0,_.jsx)(l.g,{icon:c.MjD})}),(0,_.jsx)(De,{type:"text",placeholder:"Hledat v notifikac\xedch...",value:w,onChange:e=>C(e.target.value)}),w&&(0,_.jsx)(Pe,{onClick:()=>C(""),title:"Vymazat",children:(0,_.jsx)(l.g,{icon:c.GRI})})]}),(0,_.jsxs)(Le,{children:[(0,_.jsx)(Te,{$active:!$&&!N,onClick:()=>{O(!1),U(!1)},children:"V\u0161echny"}),(0,_.jsxs)(Te,{$active:$,onClick:()=>{O(!$),$||U(!1)},children:[(0,_.jsx)(l.g,{icon:c.z$e}),"Nep\u0159e\u010dten\xe9"]}),(0,_.jsxs)(Te,{$active:N,onClick:()=>{U(!N),N||O(!1)},children:[(0,_.jsx)(l.g,{icon:c.FK2}),"P\u0159e\u010dten\xe9"]}),(0,_.jsxs)(Te,{$active:D,onClick:()=>I(!D),children:[(0,_.jsx)(l.g,{icon:c.tUE}),"Urgentn\xed"]}),(0,_.jsxs)(Te,{$active:P,onClick:()=>L(!P),children:[(0,_.jsx)(l.g,{icon:c.a$}),"Vysok\xe1"]}),(0,_.jsxs)(Te,{$active:R,onClick:()=>T(!R),children:[(0,_.jsx)(l.g,{icon:c.iW_}),"Norm\xe1ln\xed"]}),M&&be.some(e=>e.isThread&&e.olderNotifications.length>0)&&(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[(0,_.jsxs)(Te,{onClick:()=>{const e=be.filter(e=>e.isThread&&e.olderNotifications.length>0).map(e=>e.orderId);Y(new Set(e))},title:"Rozbalit v\u0161echna vl\xe1kna",style:{borderColor:"#10b981",color:"#10b981"},children:[(0,_.jsx)(l.g,{icon:c.vQu}),"Rozbalit v\u0161e"]}),(0,_.jsxs)(Te,{onClick:()=>{Y(new Set)},title:"Sbalit v\u0161echna vl\xe1kna",style:{borderColor:"#6366f1",color:"#6366f1"},children:[(0,_.jsx)(l.g,{icon:c.rMD}),"Sbalit v\u0161e"]})]})})]})]}),(0,_.jsx)(He,{children:B?(0,_.jsxs)(dn,{children:[(0,_.jsx)(ln,{children:"\u274c"}),(0,_.jsx)(cn,{children:"Chyba p\u0159i na\u010d\xedt\xe1n\xed"}),(0,_.jsx)(fn,{children:B}),(0,_.jsx)(Ee,{style:{marginTop:"16px"},onClick:xe,children:"Zkusit znovu"})]}):d?(0,_.jsxs)(pn,{children:[(0,_.jsx)("div",{style:{fontSize:"32px",marginBottom:"16px"},children:"\u23f3"}),"Na\u010d\xedt\xe1n\xed notifikac\xed..."]}):0===ve.length?(0,_.jsxs)(dn,{children:[(0,_.jsx)(ln,{children:"\ud83d\udd14"}),(0,_.jsx)(cn,{children:w||$||N||D||P||R?"\u017d\xe1dn\xe9 notifikace neodpov\xeddaj\xed filtr\u016fm":"\u017d\xe1dn\xe9 notifikace"}),(0,_.jsx)(fn,{children:w||$||N||D||P||R?"Zkuste zm\u011bnit filtry nebo vyhled\xe1v\xe1n\xed":"Budete informov\xe1ni o nov\xfdch ud\xe1lostech"})]}):bn.map((e,n)=>{var t,a,r,o;if(e.isThread){var s,d,f,p;const{orderId:t,mainNotification:a,olderNotifications:r}=e,o=V.has(t),u=r.length,h="thread-".concat(t,"-").concat(a.id),g=!a.is_read||0===a.is_read||!1===a.is_read,x=1===a.is_dismissed||!0===a.is_dismissed,m=a.priority||"normal";let v={};try{a.data_json?v="string"===typeof a.data_json?JSON.parse(a.data_json):a.data_json:a.data&&(v=a.data)}catch(B){v=a.data||{}}return a.data=v,(0,_.jsxs)(i.Fragment,{children:[(0,_.jsxs)(Ge,{$index:n,$isUnread:g,$priority:m,onClick:()=>yn(a),style:{borderLeft:u>0?"4px solid #3b82f6":void 0},children:[(0,_.jsx)(Xe,{$priority:m,children:(0,b.eL)(a.type,m)}),(0,_.jsxs)(Qe,{children:[(0,_.jsx)(qe,{children:(0,_.jsxs)(en,{$isUnread:g,children:[((e,n,t)=>{if(null!==(e=a.type)&&void 0!==e&&e.includes("order")&&null!==(n=a.data)&&void 0!==n&&n.order_id&&a.title){const e=a.title.match(/(O-[^\s:]+)/);if(e){var r;const n=e[1],t=a.title.substring(0,e.index),o=a.title.substring(e.index+n.length);return(0,_.jsxs)(_.Fragment,{children:[t,(0,_.jsxs)("a",{href:"/order-form-25?edit=".concat(a.data.order_id,"&archivovano=1"),onClick:async e=>{e.preventDefault(),e.stopPropagation(),await yn(a)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[n,(0,_.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",a.data.order_id]})]}),o,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),$n(a.dt_created||a.created_at),(null===(r=a.data)||void 0===r?void 0:r.action_performed_by)&&" | ".concat(a.data.action_performed_by_label||"Akce",": ").concat(a.data.action_performed_by),a.from_user_name&&" | Od: ".concat(a.from_user_name)]})]})}}return(0,_.jsxs)(_.Fragment,{children:[a.title,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),$n(a.dt_created||a.created_at),(null===(t=a.data)||void 0===t?void 0:t.action_performed_by)&&" | ".concat(a.data.action_performed_by_label||"Akce",": ").concat(a.data.action_performed_by),a.from_user_name&&" | Od: ".concat(a.from_user_name)]})]})})(),u>0&&(0,_.jsxs)("span",{style:{background:"#dbeafe",color:"#1e40af",fontSize:"0.85em",marginLeft:"0.75em",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap",padding:"3px 8px",borderRadius:"6px"},onClick:e=>{e.stopPropagation(),Y(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},title:o?"Skr\xfdt star\u0161\xed notifikace":"Zobrazit star\u0161\xed notifikace",children:[(0,_.jsx)(l.g,{icon:o?c.Jt$:c.qIE,style:{marginRight:"4px"}}),u," ",1===u||u<5?"star\u0161\xed":"star\u0161\xedch"]})]})}),H&&null!==(s=a.type)&&void 0!==s&&s.includes("order")&&a.data?(0,_.jsxs)(nn,{children:[(0,_.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",a.data.order_subject||"N/A"," | ",(0,_.jsx)("strong",{children:"Cena:"})," ",a.data.max_price?"".concat(a.data.max_price," K\u010d"):"N/A"," | ",(0,_.jsx)("strong",{children:"Objednatel:"})," ",a.data.creator_name||"N/A"," | ",(0,_.jsx)("strong",{children:"Garant:"})," ",a.data.garant_name||"N/A"," | ",(0,_.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",a.data.prikazce_name||"N/A",a.data.action_performed_by?" | ".concat(a.data.action_performed_by_label||"Akce",": ").concat(a.data.action_performed_by):""]}):H&&a.message?(0,_.jsx)(nn,{children:a.message}):null,H&&(null===(d=a.data)||void 0===d?void 0:d.note)&&(0,_.jsxs)("div",{style:{fontSize:"0.85rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.625rem 0.75rem",background:"#f8fafc",borderLeft:"3px solid #cbd5e1",borderRadius:"4px"},children:[(0,_.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",a.data.note]}),(0,_.jsxs)(tn,{children:[H&&(0,_.jsxs)(an,{children:[(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"12px"}}),$n(a.dt_created||a.created_at)]}),H&&a.category&&(0,_.jsx)(rn,{$type:a.category,children:ge(a.category)}),H&&(null===(f=a.data)||void 0===f?void 0:f.action_date)&&(0,_.jsxs)(rn,{style:{background:"#dbeafe",color:"#1e40af"},children:["\ud83d\udcc5 ",a.data.action_date]}),H&&(null===(p=a.data)||void 0===p?void 0:p.action_performed_by)&&(()=>{const e=vn(a.type,a.data.action_performed_by_label);return(0,_.jsxs)(rn,{style:{background:e.background,color:e.color,fontWeight:600},children:["\ud83d\udc64 ",a.data.action_performed_by_label||"Akce",": ",a.data.action_performed_by]})})()]})]}),(0,_.jsxs)(on,{children:[r.length>0&&(0,_.jsx)(sn,{onClick:e=>{e.stopPropagation();const n=new Set(V);o?n.delete(t):n.add(t),Y(n)},title:o?"Sbalit vl\xe1kno":"Rozbalit vl\xe1kno",style:{color:o?"#6366f1":"#10b981"},children:(0,_.jsx)(l.g,{icon:o?c.Jt$:c.XkK})}),g&&(0,_.jsx)(sn,{onClick:e=>zn(a.id,e),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",children:(0,_.jsx)(l.g,{icon:c.e68})}),x?(0,_.jsx)(sn,{onClick:e=>Sn(a.id,e),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a"},children:(0,_.jsx)(l.g,{icon:c.U23})}):(0,_.jsx)(sn,{onClick:e=>An(a.id,e),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",children:(0,_.jsx)(l.g,{icon:c.k6j})}),(0,_.jsx)(sn,{onClick:e=>{e.stopPropagation(),wn(a.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626"},children:(0,_.jsx)(l.g,{icon:c.yLS})})]})]}),o&&r.map((e,t)=>{var a,r,o,i;const s=!e.is_read||0===e.is_read,d=1===e.is_dismissed,f=e.priority||"normal";let p={};try{e.data_json?p="string"===typeof e.data_json?JSON.parse(e.data_json):e.data_json:e.data&&(p=e.data)}catch(B){p=e.data||{}}return e.data=p,(0,_.jsxs)(Ge,{$index:n+t+1,$isUnread:s,$priority:f,onClick:()=>yn(e),style:{marginLeft:"3rem",borderLeft:"3px solid #cbd5e1",background:"#f9fafb",opacity:.85,padding:"10px 14px"},children:[(0,_.jsxs)(Qe,{style:{marginLeft:"0"},children:[(0,_.jsx)(qe,{style:{marginBottom:"6px"},children:(0,_.jsx)(en,{$isUnread:s,style:{fontSize:"13.5px",lineHeight:"1.4"},children:((n,t,a)=>{if(null!==(n=e.type)&&void 0!==n&&n.includes("order")&&null!==(t=e.data)&&void 0!==t&&t.order_id&&e.title){const n=e.title.match(/(O-[^\s:]+)/);if(n){var r;const t=n[1],a=e.title.substring(0,n.index),o=e.title.substring(n.index+t.length);return(0,_.jsxs)(_.Fragment,{children:[a,(0,_.jsxs)("a",{href:"/order-form-25?edit=".concat(e.data.order_id,"&archivovano=1"),onClick:async n=>{n.preventDefault(),n.stopPropagation(),await yn(e)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[t,(0,_.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",e.data.order_id]})]}),o,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.85em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"10px",marginRight:"4px"}}),$n(e.dt_created||e.created_at),(null===(r=e.data)||void 0===r?void 0:r.action_performed_by)&&" | ".concat(e.data.action_performed_by_label||"Akce",": ").concat(e.data.action_performed_by),e.from_user_name&&" | Od: ".concat(e.from_user_name)]})]})}}return(0,_.jsxs)(_.Fragment,{children:[e.title,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.85em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"10px",marginRight:"4px"}}),$n(e.dt_created||e.created_at),(null===(a=e.data)||void 0===a?void 0:a.action_performed_by)&&" | ".concat(e.data.action_performed_by_label||"Akce",": ").concat(e.data.action_performed_by),e.from_user_name&&" | Od: ".concat(e.from_user_name)]})]})})()})}),H&&null!==(a=e.type)&&void 0!==a&&a.includes("order")&&e.data?(0,_.jsxs)(nn,{style:{fontSize:"13px",lineHeight:"1.5",marginBottom:"6px"},children:[(0,_.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",e.data.order_subject||"N/A"," | ",(0,_.jsx)("strong",{children:"Cena:"})," ",e.data.max_price?"".concat(e.data.max_price," K\u010d"):"N/A"," | ",(0,_.jsx)("strong",{children:"Objednatel:"})," ",e.data.creator_name||"N/A"," | ",(0,_.jsx)("strong",{children:"Garant:"})," ",e.data.garant_name||"N/A"," | ",(0,_.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",e.data.prikazce_name||"N/A",e.data.action_performed_by?" | ".concat(e.data.action_performed_by_label||"Akce",": ").concat(e.data.action_performed_by):""]}):H&&e.message?(0,_.jsx)(nn,{style:{fontSize:"13px",lineHeight:"1.5",marginBottom:"6px"},children:e.message}):null,H&&(null===(r=e.data)||void 0===r?void 0:r.note)&&(0,_.jsxs)("div",{style:{fontSize:"0.8rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.5rem 0.625rem",background:"#f8fafc",borderLeft:"2px solid #cbd5e1",borderRadius:"3px",lineHeight:"1.4"},children:[(0,_.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",e.data.note]}),(0,_.jsxs)(tn,{style:{gap:"10px",marginTop:"6px"},children:[H&&(0,_.jsxs)(an,{style:{fontSize:"11px"},children:[(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"11px"}}),$n(e.dt_created||e.created_at)]}),H&&e.category&&(0,_.jsx)(rn,{$type:e.category,style:{fontSize:"10px",padding:"2px 6px"},children:ge(e.category)}),H&&(null===(o=e.data)||void 0===o?void 0:o.action_date)&&(0,_.jsxs)(rn,{style:{background:"#dbeafe",color:"#1e40af",fontSize:"10px",padding:"2px 6px"},children:["\ud83d\udcc5 ",e.data.action_date]}),H&&(null===(i=e.data)||void 0===i?void 0:i.action_performed_by)&&(()=>{const n=vn(e.type,e.data.action_performed_by_label);return(0,_.jsxs)(rn,{style:{background:n.background,color:n.color,fontSize:"10px",padding:"2px 6px",fontWeight:600},children:["\ud83d\udc64 ",e.data.action_performed_by_label||"Akce",": ",e.data.action_performed_by]})})(),d&&(0,_.jsx)(rn,{style:{background:"#fee2e2",color:"#991b1b",fontWeight:700,fontSize:"10px",padding:"2px 6px"},children:"\ufffd Nezobrazuje se ve zvone\u010dku"})]})]}),(0,_.jsxs)(on,{children:[s&&(0,_.jsx)(sn,{onClick:n=>zn(e.id,n),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",style:{width:"28px",height:"28px"},children:(0,_.jsx)(l.g,{icon:c.e68})}),d?(0,_.jsx)(sn,{onClick:n=>Sn(e.id,n),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a",width:"28px",height:"28px"},children:(0,_.jsx)(l.g,{icon:c.U23})}):(0,_.jsx)(sn,{onClick:n=>An(e.id,n),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",style:{width:"28px",height:"28px"},children:(0,_.jsx)(l.g,{icon:c.k6j})}),(0,_.jsx)(sn,{onClick:n=>{n.stopPropagation(),wn(e.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626",width:"28px",height:"28px"},children:(0,_.jsx)(l.g,{icon:c.yLS})})]})]},"".concat(h,"-older-").concat(e.id))})]},h)}const u=e.notification||e,h=!u.is_read||0===u.is_read||!1===u.is_read,g=1===u.is_dismissed||!0===u.is_dismissed,x=u.priority||"normal";let m={};try{u.data_json?m="string"===typeof u.data_json?JSON.parse(u.data_json):u.data_json:u.data&&(m=u.data)}catch(B){m=u.data||{}}u.data=m;const v="notification-".concat(u.id);return(0,_.jsxs)(Ge,{$index:n,$isUnread:h,$priority:x,onClick:()=>yn(u),children:[H&&(0,_.jsx)(Xe,{$priority:x,children:(0,b.eL)(u.type,x)}),(0,_.jsxs)(Qe,{style:H?void 0:{marginLeft:"0"},children:[(0,_.jsx)(qe,{children:(0,_.jsx)(en,{$isUnread:h,children:((e,n,t)=>{if(null!==(e=u.type)&&void 0!==e&&e.includes("order")&&null!==(n=u.data)&&void 0!==n&&n.order_id&&u.title){const e=u.title.match(/(O-[^\s:]+)/);if(e){var a;const n=e[1],t=u.title.substring(0,e.index),r=u.title.substring(e.index+n.length);return(0,_.jsxs)(_.Fragment,{children:[t,(0,_.jsxs)("a",{href:"/order-form-25?edit=".concat(u.data.order_id,"&archivovano=1"),onClick:async e=>{e.preventDefault(),e.stopPropagation(),await yn(u)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[n,(0,_.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",u.data.order_id]})]}),r,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),$n(u.dt_created||u.created_at),(null===(a=u.data)||void 0===a?void 0:a.action_performed_by)&&" | ".concat(u.data.action_performed_by_label||"Akce",": ").concat(u.data.action_performed_by),u.from_user_name&&" | Od: ".concat(u.from_user_name)]})]})}}return(0,_.jsxs)(_.Fragment,{children:[u.title,!H&&(0,_.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),$n(u.dt_created||u.created_at),(null===(t=u.data)||void 0===t?void 0:t.action_performed_by)&&" | ".concat(u.data.action_performed_by_label||"Akce",": ").concat(u.data.action_performed_by),u.from_user_name&&" | Od: ".concat(u.from_user_name)]})]})})()})}),H&&null!==(t=u.type)&&void 0!==t&&t.includes("order")&&u.data?(0,_.jsxs)(nn,{children:[(0,_.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",u.data.order_subject||"N/A"," | ",(0,_.jsx)("strong",{children:"Cena:"})," ",u.data.max_price?"".concat(u.data.max_price," K\u010d"):"N/A"," | ",(0,_.jsx)("strong",{children:"Objednatel:"})," ",u.data.creator_name||"N/A"," | ",(0,_.jsx)("strong",{children:"Garant:"})," ",u.data.garant_name||"N/A"," | ",(0,_.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",u.data.prikazce_name||"N/A",u.data.action_performed_by?" | ".concat(u.data.action_performed_by_label||"Akce",": ").concat(u.data.action_performed_by):""]}):H&&u.message?(0,_.jsx)(nn,{children:u.message}):null,H&&(null===(a=u.data)||void 0===a?void 0:a.note)&&(0,_.jsxs)("div",{style:{fontSize:"0.85rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.625rem 0.75rem",background:"#f8fafc",borderLeft:"3px solid #cbd5e1",borderRadius:"4px"},children:[(0,_.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",u.data.note]}),(0,_.jsxs)(tn,{children:[H&&(0,_.jsxs)(an,{children:[(0,_.jsx)(l.g,{icon:c.a$,style:{fontSize:"12px"}}),$n(u.dt_created||u.created_at)]}),H&&u.category&&(0,_.jsx)(rn,{$type:u.category,children:ge(u.category)}),H&&(null===(r=u.data)||void 0===r?void 0:r.action_date)&&(0,_.jsxs)(rn,{style:{background:"#dbeafe",color:"#1e40af"},children:["\ud83d\udcc5 ",u.data.action_date]}),H&&(null===(o=u.data)||void 0===o?void 0:o.action_performed_by)&&(()=>{const e=vn(u.type,u.data.action_performed_by_label);return(0,_.jsxs)(rn,{style:{background:e.background,color:e.color,fontWeight:600},children:["\ud83d\udc64 ",u.data.action_performed_by_label||"Akce",": ",u.data.action_performed_by]})})()]})]}),(0,_.jsxs)(on,{children:[h&&(0,_.jsx)(sn,{onClick:e=>zn(u.id,e),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",children:(0,_.jsx)(l.g,{icon:c.e68})}),g?(0,_.jsx)(sn,{onClick:e=>Sn(u.id,e),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a"},children:(0,_.jsx)(l.g,{icon:c.U23})}):(0,_.jsx)(sn,{onClick:e=>An(u.id,e),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",children:(0,_.jsx)(l.g,{icon:c.k6j})}),(0,_.jsx)(sn,{onClick:e=>{e.stopPropagation(),wn(u.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626"},children:(0,_.jsx)(l.g,{icon:c.yLS})})]})]},v)})}),!d&&!B&&ve.length>0&&(0,_.jsxs)(un,{children:[(0,_.jsxs)(hn,{children:["Zobrazeno ",bn.length," z ",be.length," notifikac\xed",be.length!==o.length&&(0,_.jsxs)("span",{children:[" (filtrov\xe1no z ",o.length,")"]})]}),(0,_.jsxs)(gn,{children:[(0,_.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,_.jsxs)(mn,{value:ue,onChange:e=>{const n=parseInt(e.target.value);he(n),pe(0)},children:[(0,_.jsx)("option",{value:10,children:"10"}),(0,_.jsx)("option",{value:25,children:"25"}),(0,_.jsx)("option",{value:50,children:"50"}),(0,_.jsx)("option",{value:100,children:"100"}),(0,_.jsx)("option",{value:250,children:"250"})]}),(0,_.jsx)(xn,{onClick:()=>{pe(0)},disabled:!kn,children:"\xab\xab"}),(0,_.jsx)(xn,{onClick:()=>{pe(e=>Math.max(0,e-1))},disabled:!kn,children:"\u2039"}),(0,_.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",fe+1," z ",je||1]}),(0,_.jsx)(xn,{onClick:()=>{pe(e=>Math.min(je-1,e+1))},disabled:!jn,children:"\u203a"}),(0,_.jsx)(xn,{onClick:()=>{pe(je-1)},disabled:!jn,children:"\xbb\xbb"})]})]})]}),ne&&(0,_.jsx)(g.A,{isOpen:q,onClose:_n,onConfirm:ne.canForceUnlock?()=>{null!==ae&&void 0!==ae&&ae.objednavka_id&&(ee(!1),n("/order-form-25?edit=".concat(ae.objednavka_id,"&force=1")))}:_n,title:ne.canForceUnlock?"Objedn\xe1vka je zam\u010den\xe1":"Objedn\xe1vka nen\xed dostupn\xe1",icon:"\ud83d\udd12",variant:"warning",confirmText:ne.canForceUnlock?"Odemknout a p\u0159evz\xedt":"Zav\u0159\xedt",cancelText:"Zru\u0161it",showCancel:ne.canForceUnlock,children:ne.canForceUnlock?(0,_.jsxs)("div",{style:{padding:"1rem 0"},children:[(0,_.jsx)("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"\u26a0\ufe0f Objedn\xe1vka je aktu\xe1ln\u011b editov\xe1na u\u017eivatelem:"}),(0,_.jsx)("div",{style:{padding:"1rem",background:"#f8fafc",borderLeft:"4px solid #3b82f6",borderRadius:"4px",marginBottom:"1rem"},children:(0,_.jsx)("strong",{style:{fontSize:"1.1rem"},children:ne.lockedByUserName})}),(ne.lockedByUserEmail||ne.lockedByUserTelefon)&&(0,_.jsxs)("div",{style:{padding:"1rem",background:"#f0f9ff",border:"1px solid #bfdbfe",borderRadius:"8px",marginBottom:"1rem"},children:[(0,_.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#1e40af"},children:"Kontaktn\xed \xfadaje:"}),ne.lockedByUserEmail&&(0,_.jsxs)("div",{style:{padding:"0.5rem 0",color:"#1e40af"},children:["\ud83d\udce7 ",ne.lockedByUserEmail]}),ne.lockedByUserTelefon&&(0,_.jsxs)("div",{style:{padding:"0.5rem 0",color:"#1e40af"},children:["\ud83d\udcde ",ne.lockedByUserTelefon]})]}),(0,_.jsxs)("p",{style:{color:"#64748b",lineHeight:"1.6",marginBottom:"1rem"},children:["Jako ",(0,_.jsx)("strong",{children:ne.userRoleName})," m\xe1te pr\xe1vo objedn\xe1vku odemknout a p\u0159evz\xedt ji na sebe. Tato akce upozorn\xed p\u016fvodn\xedho u\u017eivatele, \u017ee mu byla objedn\xe1vka odebr\xe1na."]}),(0,_.jsx)("p",{style:{color:"#dc2626",fontWeight:"600"},children:"Opravdu chcete p\u0159evz\xedt editaci t\xe9to objedn\xe1vky?"})]}):(0,_.jsxs)("div",{style:{padding:"1rem 0"},children:[(0,_.jsx)("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"\u274c Objedn\xe1vka je aktu\xe1ln\u011b editov\xe1na jin\xfdm u\u017eivatelem:"}),(0,_.jsx)("div",{style:{padding:"1rem",background:"#f8fafc",borderLeft:"4px solid #dc2626",borderRadius:"4px",marginBottom:"1rem"},children:(0,_.jsx)("strong",{style:{fontSize:"1.1rem"},children:ne.lockedByUserName})}),(ne.lockedByUserEmail||ne.lockedByUserTelefon)&&(0,_.jsxs)("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",marginBottom:"1rem"},children:[(0,_.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#991b1b"},children:"Kontaktujte u\u017eivatele:"}),ne.lockedByUserEmail&&(0,_.jsxs)("div",{style:{padding:"0.5rem 0",color:"#991b1b"},children:["\ud83d\udce7 ",ne.lockedByUserEmail]}),ne.lockedByUserTelefon&&(0,_.jsxs)("div",{style:{padding:"0.5rem 0",color:"#991b1b"},children:["\ud83d\udcde ",ne.lockedByUserTelefon]})]}),(0,_.jsx)("p",{style:{color:"#64748b",lineHeight:"1.6"},children:"Pokud je to nezbytn\xe9, kontaktujte administr\xe1tora, kter\xfd m\xe1 pr\xe1vo objedn\xe1vku odemknout."})]})}),(0,_.jsx)(g.A,{isOpen:J.isOpen,title:J.title,icon:J.icon,variant:J.variant,onConfirm:J.onConfirm,onClose:J.onCancel,children:J.message}),(0,_.jsxs)(g.A,{isOpen:oe,onClose:()=>{ie(!1),de(null),ce(null)},onConfirm:async()=>{ie(!1);const e=(null===t||void 0===t?void 0:t.uzivatel_id)||(null===t||void 0===t?void 0:t.user_id);e&&(m.default.setCurrentUser(e),await m.default.deleteAllDraftKeys()),le&&n("/order-form-25?edit=".concat(le)),de(null),ce(null)},title:"Potvrzen\xed editace objedn\xe1vky",icon:c.zpE,variant:"warning",confirmText:"Ano, pokra\u010dovat",cancelText:"Ne, zru\u0161it",children:[(0,_.jsx)("p",{children:"Chyst\xe1te se editovat objedn\xe1vku z notifikace."}),(()=>{if(!se)return null;try{const e=se.formData||se,n=e.ev_cislo||e.cislo_objednavky||e.predmet||"\u2605 KONCEPT \u2605",t=(0,x.V5)(se);return(0,_.jsxs)("p",{style:{background:"#fef3c7",padding:"0.75rem",borderRadius:"6px",border:"1px solid #f59e0b",margin:"0.5rem 0"},children:[(0,_.jsx)("strong",{children:"Pozor:"})," M\xe1te rozepracovanou ",t?"novou objedn\xe1vku":"editaci objedn\xe1vky"," ",(0,_.jsx)("strong",{children:n}),". P\u0159epnut\xedm na jinou objedn\xe1vku p\u0159ijdete o neulo\u017een\xe9 zm\u011bny!"]})}catch(B){return null}})(),(0,_.jsxs)("p",{children:[(0,_.jsx)("strong",{children:"Varov\xe1n\xed:"})," T\xedmto budou zru\u0161eny v\u0161echny p\u0159\xedpadn\xe9 neulo\u017een\xe9 zm\u011bny v jin\xfdch objedn\xe1vk\xe1ch a m\u016f\u017ee doj\xedt ke ztr\xe1t\u011b dat."]}),(0,_.jsx)("p",{children:"Chcete pokra\u010dovat v editaci?"})]})]})},kn=bn},98951:(e,n,t)=>{t.d(n,{cR:()=>r,eL:()=>o,zJ:()=>s});var a=t(97929);const r=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")){case"nova":return a.ijD;case"ke_schvaleni":case"keSchvaleni":return a.TuH;case"schvalena":case"kontrola_potvrzena":case"vecnaSpravnost":case"vecna_spravnost":return a.SGM;case"zamitnuta":case"zrusena":return a.s0Q;case"rozpracovana":case"kontrola_ceka":case"cekaKontrola":return a.a$;case"odeslana":return a.raf;case"potvrzena":return a.V2x;case"uverejnena":case"registr_zverejnena":case"registrzverejnena":return a.IJd;case"dokoncena":return a.pvD;case"ceka_potvrzeni":case"cekaPotvrzeni":case"ceka_se":case"cekaSe":return a.G1Y;case"archivovano":case"archivovana":return a.Oh6;default:return a.iW_}},o=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";if(null!==e&&void 0!==e&&e.startsWith("order_status_")){const n=e.replace("order_status_","");return s(n)}switch(e){case"todo_alarm":return"\ud83d\udd14";case"todo_alarm_high":return"\u26a0\ufe0f";case"todo_alarm_expired":return"\ud83d\udea8";case"order_unlock_forced":return"\u26a1";case"order_approved":return"\u2705";case"order_rejected":return"\u274c";case"order_created":return"\ud83d\udcdd";default:return i(n)}},i=e=>{switch(e){case"urgent":return"\ud83d\udea8";case"high":return"\u26a0\ufe0f";case"normal":return"\ud83d\udd14";default:return"\u2139\ufe0f"}},s=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")){case"nova":case"koncept":return"\ud83d\udcdd";case"ke_schvaleni":case"keschvaleni":return"\ud83d\udccb";case"schvalena":return"\ud83d\udc4d";case"zamitnuta":return"\u274c";case"rozpracovana":return"\ud83d\udd50";case"odeslana":return"\ud83d\udce4";case"potvrzena":return"\u2714\ufe0f";case"uverejnena":case"registr_zverejnena":case"registrzverejnena":return"\ud83d\udce2";case"dokoncena":return"\ud83c\udfaf";case"ceka_potvrzeni":case"cekapotvrzeni":case"ceka_se":case"cekase":return"\u23f8\ufe0f";case"zrusena":return"\ud83d\udeab";case"smazana":return"\ud83d\uddd1\ufe0f";case"archivovano":case"archivovana":return"\ud83d\udce6";case"ceka_kontrola":case"cekakontrola":return"\ud83d\udd0d";case"vecna_spravnost":case"vecnaspravnost":return"\u2705";default:return"\ud83d\udcca"}}}}]);
//# sourceMappingURL=3160.685139ce.chunk.js.map