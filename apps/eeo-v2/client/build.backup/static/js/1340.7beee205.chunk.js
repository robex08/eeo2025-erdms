/*! For license information please see 1340.7beee205.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[1340],{21340:(e,n,o)=>{o.r(n),o.d(n,{default:()=>la});var r,t,a,i,s,l,d,c,m,p,u,f,h,x,v,g,b,_,y,j,k=o(89379),w=o(57528),A=o(65043),z=o(97950),C=o(91357),S=o(45903),E=o(83910),O=o(97929),I=o(27837),N=o(88720),D=o(32730),T=o(30264),R=o(44649),$=o(77220),P=o(84856),L=o(75949),B=o(33637),M=o(19439),V=o(70579);const F=S.A.div(r||(r=(0,w.A)(["\n  background: #fafbfc;\n  border-radius: 8px;\n  overflow: hidden;\n"]))),W=S.A.div(t||(t=(0,w.A)(["\n  background: white;\n  border-radius: 12px;\n  margin-bottom: 0.75rem;\n  border: 2px solid #e5e7eb;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  }\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),U=S.A.div(a||(a=(0,w.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border-left: 5px solid transparent;\n  position: relative;\n  \n  /* 3D efekt na lev\xe9 lince */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 5px;\n    box-shadow: \n      inset 2px 0 3px rgba(0, 0, 0, 0.15),\n      inset -1px 0 2px rgba(255, 255, 255, 0.5);\n  }\n  \n  /* Barevn\xe1 sch\xe9mata podle OF25 */\n  ","\n"])),e=>{switch(e.$theme){case"grey":return"\n          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n          border-left-color: #64748b;\n          &:hover { background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%); }\n        ";case"orange":return"\n          background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);\n          border-left-color: #f97316;\n          &:hover { background: linear-gradient(135deg, #ffedd5 0%, #fed7aa 100%); }\n        ";case"blue":return"\n          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n          border-left-color: #3b82f6;\n          &:hover { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }\n        ";case"purple":return"\n          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);\n          border-left-color: #a855f7;\n          &:hover { background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); }\n        ";case"green":return"\n          background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n          border-left-color: #22c55e;\n          &:hover { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); }\n        ";case"red":return"\n          background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n          border-left-color: #ef4444;\n          &:hover { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); }\n        ";default:return"\n          background: ".concat(e.$isActive?"#f8fafc":"#fff",";\n          &:hover { background: #f1f5f9; }\n        ")}}),Z=S.A.h3(i||(i=(0,w.A)(["\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1e293b;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  \n  svg {\n    ","\n  }\n"])),e=>{switch(e.$theme){case"grey":return"color: #64748b;";case"orange":return"color: #f97316;";case"blue":default:return"color: #3b82f6;";case"purple":return"color: #a855f7;";case"green":return"color: #22c55e;";case"red":return"color: #ef4444;"}}),K=S.A.div(s||(s=(0,w.A)(["\n  transition: transform 0.3s ease;\n  transform: ",";\n  color: #64748b;\n  font-size: 1.2rem;\n"])),e=>e.$collapsed?"rotate(180deg)":"rotate(0deg)"),J=S.A.div(l||(l=(0,w.A)(["\n  max-height: ",";\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  padding: ",";\n  border-left: 5px solid transparent;\n  position: relative;\n  background: #fafbfc;\n  \n  /* 3D efekt na lev\xe9 lince - pokra\u010dov\xe1n\xed z headeru */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 5px;\n    box-shadow: \n      inset 2px 0 3px rgba(0, 0, 0, 0.15),\n      inset -1px 0 2px rgba(255, 255, 255, 0.5);\n  }\n  \n  /* Barevn\xe1 linka podle t\xe9matu */\n  ","\n"])),e=>e.$collapsed?"0":"5000px",e=>e.$collapsed?"0 1.5rem":"1.5rem",e=>{switch(e.$theme){case"grey":return"border-left-color: #64748b;";case"orange":return"border-left-color: #f97316;";case"blue":return"border-left-color: #3b82f6;";case"purple":return"border-left-color: #a855f7;";case"green":return"border-left-color: #22c55e;";case"red":return"border-left-color: #ef4444;";default:return""}}),H=S.A.div(d||(d=(0,w.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1rem;\n  margin-bottom: 1rem;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),e=>e.$columns||"1fr"),Y=S.A.div(c||(c=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n"]))),G=S.A.div(m||(m=(0,w.A)(["\n  font-weight: 600;\n  color: #64748b;\n  font-size: 0.85rem;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n"]))),X=S.A.div(p||(p=(0,w.A)(["\n  font-size: 0.95rem;\n  color: #1e293b;\n  padding: 0.5rem 0;\n  \n  &.empty {\n    color: #94a3b8;\n    font-style: italic;\n  }\n  \n  &.highlight {\n    font-weight: 600;\n    color: #1e40af;\n  }\n"]))),q=S.A.span(u||(u=(0,w.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ",";\n  color: ",";\n"])),e=>e.$bg||"#f1f5f9",e=>e.$color||"#475569"),Q=S.A.div(f||(f=(0,w.A)(["\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),ee=S.A.div(h||(h=(0,w.A)(["\n  font-weight: 600;\n  color: #475569;\n  font-size: 0.875rem;\n  margin-bottom: 0.75rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  \n  svg {\n    color: #64748b;\n    font-size: 1rem;\n  }\n"]))),ne=S.A.div(x||(x=(0,w.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1.25rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"])),e=>e.$columns||"repeat(auto-fit, minmax(200px, 1fr))"),oe=S.A.div(v||(v=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n  min-width: 0;\n"]))),re=S.A.div(g||(g=(0,w.A)(["\n  font-weight: 600;\n  color: #64748b;\n  font-size: 0.8rem;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n"]))),te=S.A.div(b||(b=(0,w.A)(["\n  font-size: 0.95rem;\n  color: #1e293b;\n  word-wrap: break-word;\n  \n  &.empty {\n    color: #94a3b8;\n    font-style: italic;\n  }\n  \n  &.highlight {\n    font-weight: 600;\n    color: #1e40af;\n    font-size: 1.05rem;\n    white-space: nowrap;\n  }\n  \n  &.currency {\n    font-weight: 600;\n    color: #059669;\n    font-size: 1.05rem;\n  }\n"]))),ae=(S.A.div(_||(_=(0,w.A)(["\n  height: 1px;\n  background: linear-gradient(to right, #e2e8f0, #f1f5f9, #e2e8f0);\n  margin: 1.5rem 0;\n"]))),S.A.button(y||(y=(0,w.A)(["\n  position: sticky;\n  top: 1rem;\n  right: 1rem;\n  float: right;\n  margin-bottom: 1rem;\n  padding: 0.5rem 1rem;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s;\n  z-index: 10;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n  \n  &:hover {\n    background: #2563eb;\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n  }\n"]))),S.A.button(j||(j=(0,w.A)(["\n  padding: 0.5rem 1rem;\n  background: #f97316;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s;\n  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);\n  \n  &:hover {\n    background: #ea580c;\n    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])))),ie=(0,A.forwardRef)((e,n)=>{var o,r,t,a,i,s,l,d,c,m,p,u,f,h,x,v,g;let{orderData:b,onCollapseChange:_,onEditInvoice:y,canEditInvoice:j=!0,token:w,username:z}=e;const[C,S]=(0,A.useState)({objednatel:!1,schvaleni:!1,dodavatel:!1,detaily:!1,dodani:!1,fakturace:!1,poznamky:!1,registr:!1,vecna_spravnost:!1,dokonceni:!1,prilohy:!1}),I=e=>{S(n=>{const o=(0,k.A)((0,k.A)({},n),{},{[e]:!n[e]});if(_){const e=Object.values(o).some(e=>!0===e);_(e)}return o})},N=()=>{const e={};Object.keys(C).forEach(n=>{e[n]=!0}),S(e),_&&_(!0)},D=()=>{const e={};Object.keys(C).forEach(n=>{e[n]=!1}),S(e),_&&_(!1)},T=Object.values(C).every(e=>!0===e),$=Object.values(C).every(e=>!1===e);if((0,A.useImperativeHandle)(n,()=>({collapseAll:N,expandAll:D,areAllCollapsed:T,areAllExpanded:$})),!b)return(0,V.jsxs)("div",{style:{padding:"3rem",textAlign:"center",color:"#94a3b8"},children:[(0,V.jsx)(E.g,{icon:O.h8M,size:"3x",style:{marginBottom:"1rem",opacity:.3}}),(0,V.jsx)("div",{children:"\u017d\xe1dn\xe1 data k zobrazen\xed"})]});const P=e=>e?"".concat(parseFloat(e).toLocaleString("cs-CZ")," K\u010d"):"\u2014";return(0,V.jsxs)(F,{children:[(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"grey",$isActive:!C.objednatel,onClick:()=>I("objednatel"),children:[(0,V.jsxs)(Z,{$theme:"grey",children:[(0,V.jsx)(E.g,{icon:O.X46}),"Informace o objednateli"]}),(0,V.jsx)(K,{$collapsed:C.objednatel,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsxs)(J,{$collapsed:C.objednatel,$theme:"grey",children:[(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.X46}),"Objednatel"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Jm\xe9no"}),(0,V.jsx)(te,{className:"highlight",children:((e,n,o)=>{const r=(null===(e=b._enriched)||void 0===e?void 0:e.uzivatel)||(null===(n=b._enriched)||void 0===n?void 0:n.objednatel);if(r){const e=r.titul_pred?"".concat(r.titul_pred," "):"",n=r.titul_za?", ".concat(r.titul_za):"";return"".concat(e).concat(r.jmeno," ").concat(r.prijmeni).concat(n)}return(null===(o=b.uzivatel)||void 0===o?void 0:o.cele_jmeno)||b.jmeno||"\u2014"})()})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Telefon"}),(0,V.jsx)(te,{children:((e,n,o)=>{const r=(null===(e=b._enriched)||void 0===e?void 0:e.uzivatel)||(null===(n=b._enriched)||void 0===n?void 0:n.objednatel);return(null===r||void 0===r?void 0:r.telefon)||b.objednatel_telefon||(null===(o=b.uzivatel)||void 0===o?void 0:o.telefon)||b.telefon||"\u2014"})()})]})]}),(0,V.jsx)(ne,{$columns:"1fr",style:{marginTop:"1rem"},children:(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"E-mail"}),(0,V.jsx)(te,{children:((e,n,o)=>{const r=(null===(e=b._enriched)||void 0===e?void 0:e.uzivatel)||(null===(n=b._enriched)||void 0===n?void 0:n.objednatel);return(null===r||void 0===r?void 0:r.email)||(null===(o=b.uzivatel)||void 0===o?void 0:o.email)||b.email||"\u2014"})()})]})})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.SGM}),"Garant objedn\xe1vky"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Jm\xe9no"}),(0,V.jsx)(te,{className:"highlight",children:((e,n)=>{const o=null===(e=b._enriched)||void 0===e?void 0:e.garant_uzivatel;if(o){const e=o.titul_pred?"".concat(o.titul_pred," "):"",n=o.titul_za?", ".concat(o.titul_za):"";return"".concat(e).concat(o.jmeno," ").concat(o.prijmeni).concat(n)}return(null===(n=b.garant_uzivatel)||void 0===n?void 0:n.cele_jmeno)||"\u2014"})()})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Telefon"}),(0,V.jsx)(te,{children:(null===(o=b._enriched)||void 0===o||null===(r=o.garant_uzivatel)||void 0===r?void 0:r.telefon)||"\u2014"})]})]}),(0,V.jsx)(ne,{$columns:"1fr",style:{marginTop:"1rem"},children:(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"E-mail"}),(0,V.jsx)(te,{children:(null===(t=b._enriched)||void 0===t||null===(a=t.garant_uzivatel)||void 0===a?void 0:a.email)||"\u2014"})]})})]})]})]}),(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"grey",$isActive:!C.schvaleni,onClick:()=>I("schvaleni"),children:[(0,V.jsxs)(Z,{$theme:"grey",children:[(0,V.jsx)(E.g,{icon:O.Iae}),"Schv\xe1len\xed n\xe1kupu PO"]}),(0,V.jsx)(K,{$collapsed:C.schvaleni,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsxs)(J,{$collapsed:C.schvaleni,$theme:"grey",children:[(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.h8M}),"Z\xe1kladn\xed \xfadaje"]}),(0,V.jsxs)(oe,{style:{marginBottom:"1rem"},children:[(0,V.jsx)(re,{children:"P\u0159edm\u011bt objedn\xe1vky"}),(0,V.jsx)(te,{className:"highlight",children:b.predmet||"\u2014"})]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xedslo objedn\xe1vky"}),(0,V.jsx)(te,{className:"highlight",children:b.cislo_objednavky||"#".concat(b.id)})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum objedn\xe1vky"}),(0,V.jsx)(te,{children:b.dt_objednavky?(0,M.iS)(b.dt_objednavky):"\u2014"})]})]}),(0,V.jsx)(ne,{$columns:"1fr",children:(0,V.jsxs)(oe,{style:{textAlign:"right"},children:[(0,V.jsx)(re,{style:{textAlign:"right"},children:"Max. cena s DPH"}),(0,V.jsx)(te,{className:"currency",style:{textAlign:"right"},children:P(b.max_cena_s_dph)})]})})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.X46}),"P\u0159\xedkazce rozpo\u010dtu"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Jm\xe9no"}),(0,V.jsx)(te,{className:"highlight",children:((e,n)=>{const o=null===(e=b._enriched)||void 0===e?void 0:e.prikazce;if(o){const e=o.titul_pred?"".concat(o.titul_pred," "):"",n=o.titul_za?", ".concat(o.titul_za):"";return"".concat(e).concat(o.jmeno," ").concat(o.prijmeni).concat(n)}return(null===(n=b.prikazce)||void 0===n?void 0:n.cele_jmeno)||"\u2014"})()})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Telefon"}),(0,V.jsx)(te,{children:(null===(i=b._enriched)||void 0===i||null===(s=i.prikazce)||void 0===s?void 0:s.telefon)||"\u2014"})]})]}),(0,V.jsx)(ne,{$columns:"1fr",style:{marginTop:"1rem"},children:(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"E-mail"}),(0,V.jsx)(te,{children:(null===(l=b._enriched)||void 0===l||null===(d=l.prikazce)||void 0===d?void 0:d.email)||"\u2014"})]})})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.SGM}),"Schvalovatel"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Jm\xe9no"}),(0,V.jsx)(te,{className:"highlight",children:((e,n)=>{const o=null===(e=b._enriched)||void 0===e?void 0:e.schvalovatel;if(o){const e=o.titul_pred?"".concat(o.titul_pred," "):"",n=o.titul_za?", ".concat(o.titul_za):"";return"".concat(e).concat(o.jmeno," ").concat(o.prijmeni).concat(n)}return(null===(n=b.schvalovatel)||void 0===n?void 0:n.cele_jmeno)||"\u2014"})()})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Telefon"}),(0,V.jsx)(te,{children:(null===(c=b._enriched)||void 0===c||null===(m=c.schvalovatel)||void 0===m?void 0:m.telefon)||"\u2014"})]})]}),(0,V.jsx)(ne,{$columns:"1fr",style:{marginTop:"1rem"},children:(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"E-mail"}),(0,V.jsx)(te,{children:(null===(p=b._enriched)||void 0===p||null===(u=p.schvalovatel)||void 0===u?void 0:u.email)||"\u2014"})]})})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.URI}),"St\u0159ediska"]}),(0,V.jsx)(oe,{children:(0,V.jsx)(te,{children:null!==(L=b._enriched)&&void 0!==L&&L.strediska&&Array.isArray(b._enriched.strediska)?b._enriched.strediska.map(e=>e.nazev||e.kod).join(", ")||"\u2014":b.strediska_kod&&Array.isArray(b.strediska_kod)?b.strediska_kod.join(", "):"\u2014"})})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.wq_}),"Zp\u016fsob financov\xe1n\xed a workflow"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Typ financov\xe1n\xed"}),(0,V.jsx)(te,{className:"highlight",children:(null===(f=b.financovani)||void 0===f?void 0:f.typ_nazev)||(null===(h=b.financovani)||void 0===h?void 0:h.typ)||"\u2014"})]}),(null===(x=b.financovani)||void 0===x?void 0:x.lp_nazvy)&&b.financovani.lp_nazvy.length>0&&(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Limitovan\xe9 p\u0159\xedsliby"}),(0,V.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:b.financovani.lp_nazvy.map((e,n)=>{let o="";if("object"===typeof e){const n=e.cislo_lp||e.kod||e.id,r=e.nazev||e.nazev_uctu||e.label;o=n&&r?"".concat(n," - ").concat(r):r||n||"LP"}else o=String(e);return(0,V.jsx)(q,{$bg:"#dbeafe",$color:"#1e40af",children:o},n)})})]}),((e,n,o)=>{const r=(null===(e=b.financovani)||void 0===e?void 0:e.typ_kod)||(null===(n=b.financovani)||void 0===n?void 0:n.typ)||b.zpusob_financovani;var t,a;return"SMLOUVA"===r||"SMLOUVA"===(null===r||void 0===r||null===(o=r.toUpperCase)||void 0===o?void 0:o.call(r))?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xedslo smlouvy"}),(0,V.jsx)(te,{children:(null===(t=b.financovani)||void 0===t?void 0:t.cislo_smlouvy)||b.cislo_smlouvy||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Pozn\xe1mka ke smlouv\u011b"}),(0,V.jsx)(te,{children:(null===(a=b.financovani)||void 0===a?void 0:a.smlouva_poznamka)||b.smlouva_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]})]}):null})(),((e,n,o,r)=>{const t=(null===(e=b.financovani)||void 0===e?void 0:e.typ_kod)||(null===(n=b.financovani)||void 0===n?void 0:n.typ)||b.zpusob_financovani;var a,i;return"INDIVIDUALNI_SCHVALENI"===t||"INDIVIDUALNI_SCHVALENI"===(null===t||void 0===t||null===(o=t.toUpperCase)||void 0===o?void 0:o.call(t))||"INDIVIDUALNI SCHVALENI"===t||(null===t||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,"INDIVIDUALNI"))?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xedslo v\xfdzvy"}),(0,V.jsx)(te,{children:(null===(a=b.financovani)||void 0===a?void 0:a.individualni_schvaleni)||b.individualni_schvaleni||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Pozn\xe1mka"}),(0,V.jsx)(te,{children:(null===(i=b.financovani)||void 0===i?void 0:i.individualni_poznamka)||b.individualni_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]})]}):null})(),((e,n,o,r)=>{const t=(null===(e=b.financovani)||void 0===e?void 0:e.typ_kod)||(null===(n=b.financovani)||void 0===n?void 0:n.typ)||b.zpusob_financovani;var a,i;return"POJISTNA_UDALOST"===t||"POJISTNA_UDALOST"===(null===t||void 0===t||null===(o=t.toUpperCase)||void 0===o?void 0:o.call(t))||"POJISTNA UDALOST"===t||(null===t||void 0===t||null===(r=t.includes)||void 0===r?void 0:r.call(t,"POJISTNA"))?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xedslo pojistn\xe9 ud\xe1losti"}),(0,V.jsx)(te,{children:(null===(a=b.financovani)||void 0===a?void 0:a.pojistna_udalost_cislo)||b.pojistna_udalost_cislo||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Pozn\xe1mka k pojistn\xe9 ud\xe1losti"}),(0,V.jsx)(te,{children:(null===(i=b.financovani)||void 0===i?void 0:i.pojistna_udalost_poznamka)||b.pojistna_udalost_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nen\xed vypln\u011bno"})})]})]}):null})(),(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Stavy workflow"}),(0,V.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",alignItems:"center",marginTop:"0.5rem"},children:(()=>{if(!b.stav_workflow_kod||!Array.isArray(b.stav_workflow_kod))return null;const e={SCHVALENA:{bg:"#dcfce7",color:"#166534"},ODESLANA:{bg:"#dbeafe",color:"#1e40af"},POTVRZENA:{bg:"#e0e7ff",color:"#4338ca"},NEUVEREJNIT:{bg:"#fef3c7",color:"#92400e"},FAKTURACE:{bg:"#fce7f3",color:"#9f1239"},VECNA_SPRAVNOST:{bg:"#f3e8ff",color:"#6b21a8"},ZKONTROLOVANA:{bg:"#d1fae5",color:"#065f46"},DOKONCENA:{bg:"#ccfbf1",color:"#115e59"}};return b.stav_workflow_kod.map((n,o)=>{const r=e[n]||{bg:"#f1f5f9",color:"#475569"};return(0,V.jsxs)(A.Fragment,{children:[(0,V.jsx)(q,{$bg:r.bg,$color:r.color,style:{marginBottom:"0.5rem"},children:n.replace("_"," ")}),o<b.stav_workflow_kod.length-1&&(0,V.jsx)("span",{style:{margin:"0 0.5rem",color:"#64748b",fontWeight:"600"},children:"\u2192"})]},n)})})()})]})]})]})]})]}),(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"orange",$isActive:!C.dodavatel,onClick:()=>I("dodavatel"),children:[(0,V.jsxs)(Z,{$theme:"orange",children:[(0,V.jsx)(E.g,{icon:O.URI}),"Dodavatel"]}),(0,V.jsx)(K,{$collapsed:C.dodavatel,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsxs)(J,{$collapsed:C.dodavatel,$theme:"orange",children:[(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.URI}),"Z\xe1kladn\xed \xfadaje"]}),(0,V.jsxs)(oe,{style:{marginBottom:"1rem"},children:[(0,V.jsx)(re,{children:"N\xe1zev dodavatele"}),(0,V.jsx)(te,{className:"highlight",children:b.dodavatel_nazev||"\u2014"})]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"I\u010cO"}),(0,V.jsx)(te,{children:b.dodavatel_ico||"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"DI\u010c"}),(0,V.jsx)(te,{children:b.dodavatel_dic||"\u2014"})]})]}),(0,V.jsxs)(oe,{style:{marginTop:"1rem"},children:[(0,V.jsx)(re,{children:"Adresa"}),(0,V.jsx)(te,{children:b.dodavatel_adresa||"\u2014"})]})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(ee,{children:[(0,V.jsx)(E.g,{icon:O.X46}),"Kontaktn\xed osoba"]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Jm\xe9no"}),(0,V.jsx)(te,{children:b.dodavatel_kontakt_jmeno||"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"E-mail"}),(0,V.jsx)(te,{children:b.dodavatel_kontakt_email||"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Telefon"}),(0,V.jsx)(te,{children:b.dodavatel_kontakt_telefon||"\u2014"})]})]})]})]})]}),b.polozky&&b.polozky.length>0&&(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"orange",$isActive:!C.detaily,onClick:()=>I("detaily"),children:[(0,V.jsxs)(Z,{$theme:"orange",children:[(0,V.jsx)(E.g,{icon:O.THi}),"Detaily objedn\xe1vky (",b.polozky_count||b.polozky.length," ",1===b.polozky.length?"polo\u017eka":"polo\u017eek",")"]}),(0,V.jsx)(K,{$collapsed:C.detaily,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsxs)(J,{$collapsed:C.detaily,$theme:"orange",children:[(0,V.jsx)(H,{children:(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Druh objedn\xe1vky"}),(0,V.jsx)(X,{children:(null===(v=b._enriched)||void 0===v||null===(g=v.druh_objednavky)||void 0===g?void 0:g.nazev)||b.druh_objednavky_nazev||b.druh_objednavky||"\u2014"})]})}),(0,V.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,V.jsx)("div",{style:{fontWeight:"600",marginBottom:"1rem",color:"#374151"},children:"Polo\u017eky objedn\xe1vky"}),b.polozky.map((e,n)=>(0,V.jsxs)("div",{style:{padding:"1rem",background:"#fafafa",border:"1px solid #e5e7eb",borderRadius:"8px",marginBottom:"1rem"},children:[(0,V.jsxs)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,V.jsxs)("span",{children:["POLO\u017dKA ",n+1]}),e.lp_id&&((n,o)=>{const r=null===(n=b.financovani)||void 0===n||null===(o=n.lp_nazvy)||void 0===o?void 0:o.find(n=>n.id===e.lp_id);return r?(0,V.jsxs)(q,{$bg:!1!==e.lp_je_platne?"#dcfce7":"#fee2e2",$color:!1!==e.lp_je_platne?"#166534":"#991b1b",children:["\ud83c\udfaf LP: ",r.cislo_lp," - ",r.nazev]}):null})()]}),(0,V.jsx)(H,{children:(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"N\xe1zev / popis"}),(0,V.jsx)(X,{children:e.popis||"\u2014"})]})}),(0,V.jsxs)(H,{$columns:"1fr auto 1fr",children:[(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Cena bez DPH"}),(0,V.jsx)(X,{children:P(e.cena_bez_dph)})]}),(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"DPH"}),(0,V.jsxs)(X,{children:[e.sazba_dph||"21","%"]})]}),(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Cena s DPH"}),(0,V.jsx)(X,{className:"highlight",children:P(e.cena_s_dph)})]})]}),(e.usek_kod||e.budova_kod||e.mistnost_kod||e.poznamka)&&(0,V.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #d1d5db"},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#6b7280",marginBottom:"0.75rem",fontSize:"0.85rem"},children:"UM\xcdST\u011aN\xcd MAJETKU"}),(0,V.jsxs)(H,{$columns:"1fr 1fr 1fr",children:[e.usek_kod&&(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"\xdasek"}),(0,V.jsx)(X,{children:e.usek_kod})]}),e.budova_kod&&(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Budova"}),(0,V.jsx)(X,{children:e.budova_kod})]}),e.mistnost_kod&&(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"M\xedstnost"}),(0,V.jsx)(X,{children:e.mistnost_kod})]})]}),(e.usek_kod||e.budova_kod||e.mistnost_kod)&&(0,V.jsx)(H,{style:{marginTop:"0.5rem"},children:(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Pozn\xe1mka k m\xedstu"}),(0,V.jsx)(X,{children:e.poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]})})]})]},n)),(0,V.jsxs)("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"2px solid #e5e7eb",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"1rem"},children:[(0,V.jsx)("div",{style:{fontWeight:"600",fontSize:"1.1rem",color:"#374151"},children:"Celkem s DPH:"}),(0,V.jsx)("div",{style:{fontWeight:"700",fontSize:"1.3rem",color:"#1e40af"},children:P(b.polozky_celkova_cena_s_dph)})]})]}),(0,V.jsx)(H,{style:{marginTop:"1.5rem"},children:(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Pozn\xe1mka k objedn\xe1vce"}),(0,V.jsx)(X,{children:b.poznamka_objednavky||b.poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]})})]})]}),(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"orange",$isActive:!C.dodani,onClick:()=>I("dodani"),children:[(0,V.jsxs)(Z,{$theme:"orange",children:[(0,V.jsx)(E.g,{icon:O.raf}),"Dod\xe1n\xed"]}),(0,V.jsx)(K,{$collapsed:C.dodani,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsx)(J,{$collapsed:C.dodani,$theme:"orange",children:(0,V.jsx)(Q,{children:(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"M\xedsto dod\xe1n\xed"}),(0,V.jsx)(te,{children:b.misto_dodani||"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"P\u0159edpokl\xe1dan\xfd term\xedn dod\xe1n\xed"}),(0,V.jsx)(te,{children:b.dt_predpokladany_termin_dodani?(0,M.iS)(b.dt_predpokladany_termin_dodani):"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Z\xe1ruka"}),(0,V.jsx)(te,{children:b.zaruka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]}),b.dt_akceptace&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum akceptace dodavatelem"}),(0,V.jsx)(te,{children:(0,M.iS)(b.dt_akceptace)})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Potvrdil dodavatel"}),(0,V.jsx)(te,{children:(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.dodavatel_potvrdil;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return"".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return b.dodavatel_potvrdil_jmeno||"\u2014"})()})]})]})]})})})]}),"zverejnit"in b&&(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"blue",$isActive:!C.registr,onClick:()=>I("registr"),children:[(0,V.jsxs)(Z,{$theme:"blue",children:[(0,V.jsx)(E.g,{icon:O.h8M}),"Rozhodnut\xed o zve\u0159ejn\u011bn\xed v registru smluv"]}),(0,V.jsx)(K,{$collapsed:C.registr,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsx)(J,{$collapsed:C.registr,$theme:"blue",children:(()=>{const e="1"===String(b.zverejnit);return(0,V.jsx)(Q,{children:(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"M\xe1 b\xfdt zve\u0159ejn\u011bna v registru smluv"}),(0,V.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:e?"#dcfce7":"#fee2e2",border:"2px solid ".concat(e?"#16a34a":"#ef4444"),borderRadius:"8px",color:e?"#166534":"#991b1b",fontWeight:"600",marginTop:"0.5rem"},children:[(0,V.jsx)(E.g,{icon:e?O.SGM:O.s0Q}),e?"ANO":"NE"]})]}),!e&&(0,V.jsx)(oe,{style:{gridColumn:"1 / -1"},children:(0,V.jsx)(te,{style:{color:"#6b7280",fontStyle:"italic"},children:"Objedn\xe1vka nebyla zve\u0159ejn\u011bna v registru smluv."})}),e&&b.dt_zverejneni&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum zve\u0159ejn\u011bn\xed"}),(0,V.jsx)(te,{children:(0,M.iS)(b.dt_zverejneni)})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Zve\u0159ejnil"}),(0,V.jsx)(te,{children:(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.zverejnil;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return"".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return b.zverejnil_jmeno||"\u2014"})()})]})]}),e&&b.registr_iddt&&(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"ID smlouvy v registru"}),(0,V.jsx)(te,{children:b.registr_iddt})]})]})})})()})]}),b.faktury&&b.faktury.length>0&&(0,V.jsxs)(W,{"data-section":"faktury",children:[(0,V.jsxs)(U,{$theme:"blue",$isActive:!C.fakturace,onClick:()=>I("fakturace"),children:[(0,V.jsxs)(Z,{$theme:"blue",children:[(0,V.jsx)(E.g,{icon:O.ymQ}),"Fakturace k objedn\xe1vce (",b.faktury.length,")"]}),(0,V.jsx)(K,{$collapsed:C.fakturace,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsx)(J,{$collapsed:C.fakturace,$theme:"blue",children:b.faktury.map((e,n)=>{const o=1===e.vecna_spravnost_potvrzeno;return(0,V.jsxs)("div",{style:{border:"2px solid #3b82f6",borderRadius:"12px",padding:"0",marginBottom:n<b.faktury.length-1?"1.5rem":0,background:o?"#f0fdf4":"#ffffff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",overflow:"hidden"},children:[(0,V.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"1rem 1.25rem",fontWeight:"700",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",borderBottom:"3px solid #1e40af",letterSpacing:"0.5px",textTransform:"uppercase"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,V.jsx)(E.g,{icon:O.ymQ,style:{fontSize:"1.2rem"}}),"Faktura #",n+1,e.fa_cislo_vema&&(0,V.jsx)("span",{style:{fontWeight:"600",fontSize:"0.9rem",background:"rgba(255, 255, 255, 0.2)",padding:"0.25rem 0.75rem",borderRadius:"6px",letterSpacing:"normal",textTransform:"none"},children:e.fa_cislo_vema})]}),y&&j&&(0,V.jsxs)(ae,{onClick:n=>{n.stopPropagation(),y(e)},style:{background:"rgba(255, 255, 255, 0.25)",color:"white",border:"1px solid rgba(255, 255, 255, 0.4)",padding:"0.5rem 1rem",fontWeight:"600"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.35)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.25)"},children:[(0,V.jsx)(E.g,{icon:O.MT7}),"Upravit"]})]}),(0,V.jsxs)("div",{style:{padding:"1.25rem"},children:[(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xedslo faktury"}),(0,V.jsx)(te,{children:e.fa_cislo_vema||"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"\u010c\xe1stka"}),(0,V.jsx)(te,{className:"highlight",children:P(e.fa_castka)})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum vystaven\xed"}),(0,V.jsx)(te,{children:e.fa_datum_vystaveni?(0,M.iS)(e.fa_datum_vystaveni):"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum splatnosti"}),(0,V.jsx)(te,{children:e.fa_datum_splatnosti||e.fa_splatnost?(0,M.iS)(e.fa_datum_splatnosti||e.fa_splatnost):"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum doru\u010den\xed"}),(0,V.jsx)(te,{children:e.fa_datum_doruceni?(0,M.iS)(e.fa_datum_doruceni):"\u2014"})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Typ faktury"}),(0,V.jsx)(te,{children:(()=>{const n=e.fa_typ||"BEZNA",o={BEZNA:{bg:"#f1f5f9",color:"#475569"},ZALOHOVA:{bg:"#dbeafe",color:"#1e40af"},OPRAVNA:{bg:"#fef3c7",color:"#92400e"},PROFORMA:{bg:"#f3e8ff",color:"#6b21a8"},DOBROPIS:{bg:"#d1fae5",color:"#065f46"}},r=o[n]||o.BEZNA;return(0,V.jsx)(q,{$bg:r.bg,$color:r.color,children:n})})()})]}),e.fa_strediska_kod&&(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"St\u0159ediska"}),(0,V.jsx)(te,{children:(()=>{const n=e.fa_strediska_kod;if(Array.isArray(n)){return n.map(e=>{if("object"===typeof e){const n=e.kod||e.value,o=e.nazev||e.label;return n&&o?"".concat(n," - ").concat(o):o||n||e}return e}).filter(Boolean).join(", ")||"\u2014"}return"string"===typeof n&&n||"\u2014"})()})]}),(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Pozn\xe1mka"}),(0,V.jsx)(te,{children:e.fa_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]}),e._isdoc_dodavatel&&(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"ISDOC Dodavatel"}),(0,V.jsxs)(te,{children:[e._isdoc_dodavatel.nazev,e._isdoc_dodavatel.ico&&" (I\u010cO: ".concat(e._isdoc_dodavatel.ico,")")]})]})]}),e.prilohy&&e.prilohy.length>0&&(0,V.jsxs)("div",{style:{margin:"1.5rem 0 1rem 0",borderTop:"2px solid #e5e7eb",paddingTop:"1rem"},children:[(0,V.jsxs)("div",{style:{fontWeight:"600",color:"#1e40af",fontSize:"0.9rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsx)(E.g,{icon:O.WMI,style:{color:"#3b82f6"}}),"P\u0158\xcdLOHY FAKTURY \u010c. ",n+1," (",e.prilohy.length,")"]}),(0,V.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.prilohy.map((n,o)=>(0,V.jsxs)("div",{onClick:async()=>{try{const o=await(0,R.TD)(e.id,n.id,z,w),r=window.URL.createObjectURL(o),t=document.createElement("a");t.href=r,t.download=n.originalni_nazev_souboru||"attachment",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(r),document.body.removeChild(t)}catch(o){console.error("Error downloading invoice attachment:",o),alert(o.message||"Nepoda\u0159ilo se st\xe1hnout p\u0159\xedlohu faktury")}},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",background:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:e=>{e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#e5e7eb"},title:"Klikn\u011bte pro sta\u017een\xed",children:[(0,V.jsx)(E.g,{icon:O.A4h,style:{color:"#6b7280",fontSize:"1rem"}}),(0,V.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,V.jsx)("div",{style:{fontSize:"0.875rem",color:"#374151",fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.originalni_nazev_souboru||"Nepojmenovan\xfd soubor"}),(0,V.jsx)("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:(e=>{if(!e||0===e)return"0 B";const n=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,n)*100)/100+" "+["B","KB","MB","GB"][n]})(n.velikost_souboru_b)})]}),(e=>{const n={FAKTURA:{bg:"#dbeafe",color:"#1e40af",label:"Faktura"},ISDOC:{bg:"#e0e7ff",color:"#4338ca",label:"ISDOC"},PRILOHA:{bg:"#f3e8ff",color:"#6b21a8",label:"P\u0159\xedloha"},SMLOUVA:{bg:"#fef3c7",color:"#92400e",label:"Smlouva"},IMPORT:{bg:"#fce7f3",color:"#9f1239",label:"Import"},JINE:{bg:"#f1f5f9",color:"#475569",label:"Jin\xe9"},JINA:{bg:"#f1f5f9",color:"#475569",label:"Jin\xe1"}},o=n[e]||n.JINA;return(0,V.jsx)(q,{$bg:o.bg,$color:o.color,children:o.label})})(n.typ_prilohy),(0,V.jsx)(E.g,{icon:O.cbP,style:{color:"#3b82f6",fontSize:"0.875rem",marginLeft:"0.5rem"}})]},n.id||o))})]}),(0,V.jsxs)("div",{style:{margin:"1.5rem 0 1rem 0",borderTop:"2px solid #e5e7eb",paddingTop:"1rem"},children:[(0,V.jsxs)("div",{style:{fontWeight:"600",color:"#6b21a8",fontSize:"0.9rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsx)(E.g,{icon:O.Iae,style:{color:"#a855f7"}}),"V\u011aCN\xc1 KONTROLA FAKTURY ",n+1]}),(0,V.jsxs)(ne,{$columns:"1fr 1fr",children:[(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Stav v\u011bcn\xe9 kontroly"}),(0,V.jsx)(te,{children:1===e.vecna_spravnost_potvrzeno||"1"===e.vecna_spravnost_potvrzeno?(0,V.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#dcfce7",border:"2px solid #16a34a",borderRadius:"8px",color:"#166534",fontWeight:"600"},children:[(0,V.jsx)(E.g,{icon:O.SGM}),"Potvrzeno"]}):(0,V.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#fee2e2",border:"2px solid #ef4444",borderRadius:"8px",color:"#991b1b",fontWeight:"600"},children:[(0,V.jsx)(E.g,{icon:O.s0Q}),"Nepotvrzeno"]})})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Datum potvrzen\xed"}),(0,V.jsx)(te,{children:e.dt_potvrzeni_vecne_spravnosti?(0,V.jsx)("span",{style:{fontWeight:"600",color:"#059669"},children:(0,M.iS)(e.dt_potvrzeni_vecne_spravnosti)}):(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"Nepotvrzeno"})})]}),(0,V.jsxs)(oe,{children:[(0,V.jsx)(re,{children:"Potvrdil"}),(0,V.jsx)(te,{children:(n=>{if(e.potvrdil_vecnou_spravnost_jmeno){const n=e.potvrdil_vecnou_spravnost_titul_pred?"".concat(e.potvrdil_vecnou_spravnost_titul_pred," "):"",o=e.potvrdil_vecnou_spravnost_titul_za?", ".concat(e.potvrdil_vecnou_spravnost_titul_za):"",r="".concat(n).concat(e.potvrdil_vecnou_spravnost_jmeno," ").concat(e.potvrdil_vecnou_spravnost_prijmeni||"").concat(o).trim();return(0,V.jsx)("span",{style:{fontWeight:"600",color:"#059669"},children:r})}const o=null===(n=e._enriched)||void 0===n?void 0:n.potvrdil_vecnou_spravnost;if(o){const e=o.titul_pred?"".concat(o.titul_pred," "):"",n=o.titul_za?", ".concat(o.titul_za):"",r="".concat(e).concat(o.jmeno," ").concat(o.prijmeni).concat(n);return(0,V.jsx)("span",{style:{fontWeight:"600",color:"#059669"},children:r})}return(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})()})]}),(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Um\xedst\u011bn\xed majetku"}),(0,V.jsx)(te,{children:e.vecna_spravnost_umisteni_majetku||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]}),(0,V.jsxs)(oe,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(re,{children:"Pozn\xe1mka k v\u011bcn\xe9 kontrole"}),(0,V.jsx)(te,{children:e.vecna_spravnost_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]})]})]})]})]},e.id||n)})})]}),b.poznamka&&(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"orange",$isActive:!C.poznamky,onClick:()=>I("poznamky"),children:[(0,V.jsxs)(Z,{$theme:"orange",children:[(0,V.jsx)(E.g,{icon:O.h8M}),"Pozn\xe1mky"]}),(0,V.jsx)(K,{$collapsed:C.poznamky,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsx)(J,{$collapsed:C.poznamky,$theme:"orange",children:(0,V.jsx)(Q,{children:(0,V.jsx)(te,{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:b.poznamka})})})]}),b.stav_workflow_kod&&b.stav_workflow_kod.includes("DOKONCENA")&&(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"green",$isActive:!C.dokonceni,onClick:()=>I("dokonceni"),children:[(0,V.jsxs)(Z,{$theme:"green",children:[(0,V.jsx)(E.g,{icon:O.e68}),"Dokon\u010den\xed objedn\xe1vky"]}),(0,V.jsx)(K,{$collapsed:C.dokonceni,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsxs)(J,{$collapsed:C.dokonceni,$theme:"green",children:[(0,V.jsxs)("div",{style:{padding:"1rem",background:"#dcfce7",border:"2px solid #16a34a",borderRadius:"8px",color:"#166534",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"600",marginBottom:"1.5rem"},children:[(0,V.jsx)(E.g,{icon:O.SGM,size:"lg"}),"Objedn\xe1vka byla \xfasp\u011b\u0161n\u011b dokon\u010dena"]}),(0,V.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,V.jsx)("h4",{style:{marginBottom:"1rem",color:"#166534",fontSize:"0.95rem",fontWeight:"600"},children:"Historie workflow"}),b.dt_schvaleni&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"Schv\xe1len\xed objedn\xe1vky"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_schvaleni),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.schvalovatel;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]}),b.dt_odeslani&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"Odesl\xe1n\xed dodavateli"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_odeslani),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.odesilatel;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]}),b.dt_akceptace&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"Potvrzen\xed dodavatele"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_akceptace),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.dodavatel_potvrdil;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]}),b.dt_zverejneni&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"Zve\u0159ejn\u011bn\xed v registru smluv"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_zverejneni),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.zverejnil;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]}),b.dt_faktura_pridana&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"P\u0159id\xe1n\xed faktury"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_faktura_pridana),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.fakturant;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]}),b.dt_potvrzeni_vecne_spravnosti&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,V.jsx)("span",{style:{color:"#16a34a",fontSize:"1.1rem",lineHeight:"1.4"},children:"\u2705"}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:"600",color:"#374151",marginBottom:"0.25rem"},children:"Potvrzen\xed v\u011bcn\xe9 spr\xe1vnosti"}),(0,V.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[(0,M.iS)(b.dt_potvrzeni_vecne_spravnosti),(e=>{const n=null===(e=b._enriched)||void 0===e?void 0:e.potvrdil_vecnou_spravnost;if(n){const e=n.titul_pred?"".concat(n.titul_pred," "):"",o=n.titul_za?", ".concat(n.titul_za):"";return" \u2022 ".concat(e).concat(n.jmeno," ").concat(n.prijmeni).concat(o)}return""})()]})]})]})]}),b.faktury_celkem_s_dph&&b.max_cena_s_dph&&parseFloat(b.faktury_celkem_s_dph)>parseFloat(b.max_cena_s_dph)&&(0,V.jsxs)("div",{style:{padding:"0.75rem 1rem",background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"6px",color:"#991b1b",fontSize:"0.875rem",marginBottom:"1rem"},children:[(0,V.jsx)("strong",{children:"\u26a0\ufe0f Upozorn\u011bn\xed:"})," Celkov\xe1 cena faktur (",parseFloat(b.faktury_celkem_s_dph).toLocaleString("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2})," K\u010d) p\u0159ekra\u010duje maxim\xe1ln\xed cenu objedn\xe1vky (",parseFloat(b.max_cena_s_dph).toLocaleString("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2})," K\u010d)"]}),(0,V.jsxs)(Y,{children:[(0,V.jsx)(G,{children:"Pozn\xe1mka k dokon\u010den\xed"}),(0,V.jsx)(X,{children:b.dokonceni_poznamka||(0,V.jsx)("span",{style:{color:"#9ca3af"},children:"---"})})]})]})]}),b.prilohy_count>0&&(0,V.jsxs)(W,{children:[(0,V.jsxs)(U,{$theme:"red",$isActive:!C.prilohy,onClick:()=>I("prilohy"),children:[(0,V.jsxs)(Z,{$theme:"red",children:[(0,V.jsx)(E.g,{icon:O.h8M}),"P\u0159\xedlohy (",b.prilohy_count,")"]}),(0,V.jsx)(K,{$collapsed:C.prilohy,children:(0,V.jsx)(E.g,{icon:O.w2A})})]}),(0,V.jsx)(J,{$collapsed:C.prilohy,$theme:"red",children:b.prilohy&&b.prilohy.length>0?(0,V.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:b.prilohy.map((e,n)=>(0,V.jsxs)("div",{onClick:async()=>{try{const n=await(0,R.downloadOrderAttachment)(b.id,e.id,z,w),o=window.URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e.originalni_nazev_souboru||e.nazev_souboru||"attachment",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(o),document.body.removeChild(r)}catch(n){console.error("Error downloading order attachment:",n),alert(n.message||"Nepoda\u0159ilo se st\xe1hnout p\u0159\xedlohu objedn\xe1vky")}},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:e=>{e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#e5e7eb"},title:"Klikn\u011bte pro sta\u017een\xed",children:[(0,V.jsx)(E.g,{icon:O.A4h,style:{color:"#6b7280",fontSize:"1.25rem"}}),(0,V.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,V.jsx)("div",{style:{fontSize:"0.9rem",color:"#374151",fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.originalni_nazev_souboru||e.nazev_souboru||"Nepojmenovan\xfd soubor"}),(0,V.jsx)("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"2px"},children:(e=>{if(!e||0===e)return"0 B";const n=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,n)*100)/100+" "+["B","KB","MB","GB"][n]})(e.velikost_souboru_b||e.velikost)})]}),(e=>{const n={FAKTURA:{bg:"#dbeafe",color:"#1e40af",label:"Faktura"},ISDOC:{bg:"#e0e7ff",color:"#4338ca",label:"ISDOC"},PRILOHA:{bg:"#f3e8ff",color:"#6b21a8",label:"P\u0159\xedloha"},SMLOUVA:{bg:"#fef3c7",color:"#92400e",label:"Smlouva"},OBJEDNAVKA:{bg:"#d1fae5",color:"#065f46",label:"Objedn\xe1vka"},IMPORT:{bg:"#fce7f3",color:"#9f1239",label:"Import"},JINE:{bg:"#f1f5f9",color:"#475569",label:"Jin\xe9"},JINA:{bg:"#f1f5f9",color:"#475569",label:"Jin\xe1"}},o=n[e]||n.JINA;return(0,V.jsx)(q,{$bg:o.bg,$color:o.color,children:o.label})})(e.typ_prilohy||e.typ),(0,V.jsx)(E.g,{icon:O.cbP,style:{color:"#3b82f6",fontSize:"1rem",marginLeft:"0.5rem"}})]},e.id||n))}):(0,V.jsxs)(X,{children:["Po\u010det p\u0159\xedloh: ",(0,V.jsx)("strong",{children:b.prilohy_count})]})})]})]});var L});ie.displayName="OrderFormReadOnly";const se=ie;var le,de,ce,me,pe,ue,fe,he,xe,ve,ge,be,_e,ye,je,ke,we,Ae;const ze=S.A.div(le||(le=(0,w.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  height: 100%;\n  overflow-y: auto;\n"]))),Ce=S.A.div(de||(de=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #e5e7eb;\n  margin-bottom: 1.5rem;\n"]))),Se=S.A.div(ce||(ce=(0,w.A)(["\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.5rem;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n"]))),Ee=S.A.div(me||(me=(0,w.A)(["\n  flex: 1;\n"]))),Oe=S.A.div(pe||(pe=(0,w.A)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #1e40af;\n  margin-bottom: 0.25rem;\n"]))),Ie=S.A.div(ue||(ue=(0,w.A)(["\n  font-size: 0.95rem;\n  color: #6b7280;\n  font-weight: 500;\n"]))),Ne=S.A.div(fe||(fe=(0,w.A)(["\n  margin-bottom: 1.5rem;\n"]))),De=S.A.div(he||(he=(0,w.A)(["\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #6b7280;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 0.75rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),Te=S.A.div(xe||(xe=(0,w.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n"]))),Re=S.A.div(ve||(ve=(0,w.A)(["\n  background: #f9fafb;\n  padding: 0.875rem;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n"]))),$e=S.A.div(ge||(ge=(0,w.A)(["\n  font-size: 0.75rem;\n  color: #9ca3af;\n  margin-bottom: 0.25rem;\n  font-weight: 500;\n"]))),Pe=S.A.div(be||(be=(0,w.A)(["\n  font-size: 0.95rem;\n  color: #1f2937;\n  font-weight: 600;\n"]))),Le=(0,S.A)(Re)(_e||(_e=(0,w.A)(["\n  grid-column: 1 / -1;\n"]))),Be=S.A.div(ye||(ye=(0,w.A)(["\n  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);\n  border: 2px solid #10b981;\n  border-radius: 12px;\n  padding: 1.25rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n"]))),Me=S.A.div(je||(je=(0,w.A)(["\n  font-size: 0.85rem;\n  color: #065f46;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),Ve=S.A.div(ke||(ke=(0,w.A)(["\n  font-size: 2rem;\n  font-weight: 700;\n  color: #065f46;\n"]))),Fe=S.A.div(we||(we=(0,w.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 0.5rem 1rem;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: ",";\n"])),e=>e.$active?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",e=>e.$active?"#10b981":"#d1d5db",e=>e.$active?"#065f46":"#6b7280"),We=S.A.div(Ae||(Ae=(0,w.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #9ca3af;\n  font-size: 0.95rem;\n"]))),Ue=e=>e||0===e?new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",minimumFractionDigits:2,maximumFractionDigits:2}).format(e):"\u2014",Ze=e=>{if(!e)return"\u2014";try{return new Date(e).toLocaleDateString("cs-CZ")}catch(n){return e}},Ke=e=>{let{smlouvaData:n,loading:o}=e;const r=n;return o?(0,V.jsx)(ze,{children:(0,V.jsxs)(We,{children:[(0,V.jsx)(E.g,{icon:O.IJd,size:"3x",style:{marginBottom:"1rem",opacity:.3}}),(0,V.jsx)("div",{children:"Na\u010d\xedt\xe1m smlouvu..."})]})}):r?(console.log("\ud83c\udfa8 SmlouvaPreview rendering with data:",r),(0,V.jsxs)(ze,{children:[(0,V.jsxs)(Ce,{children:[(0,V.jsx)(Se,{children:(0,V.jsx)(E.g,{icon:O.IJd})}),(0,V.jsxs)(Ee,{children:[(0,V.jsx)(Oe,{children:r.cislo_smlouvy||"Bez \u010d\xedsla"}),(0,V.jsx)(Ie,{children:r.nazev_smlouvy||r.nazev||"Smlouva"})]}),(1===r.pouzit_v_obj_formu||"1"===r.pouzit_v_obj_formu||!0===r.pouzit_v_obj_formu)&&(0,V.jsx)(Fe,{$active:!1,style:{background:"#dbeafe",color:"#1e40af",marginRight:"8px"},children:"FORM"}),(0,V.jsx)(Fe,{$active:1===r.aktivni||"1"===r.aktivni||!0===r.aktivni,children:1===r.aktivni||"1"===r.aktivni||!0===r.aktivni?"Aktivn\xed":"Neaktivn\xed"})]}),(0,V.jsxs)(Be,{children:[(0,V.jsxs)(Me,{children:[(0,V.jsx)(E.g,{icon:O.ymQ})," Celkem pln\u011bn\xed s DPH"]}),(0,V.jsx)(Ve,{children:Ue(r.hodnota_s_dph||0)})]}),(0,V.jsxs)(Ne,{children:[(0,V.jsxs)(De,{children:[(0,V.jsx)(E.g,{icon:O.URI}),"Dodavatel"]}),(0,V.jsxs)(Te,{children:[(0,V.jsxs)(Le,{children:[(0,V.jsx)($e,{children:"N\xe1zev"}),(0,V.jsx)(Pe,{children:r.nazev_firmy||"\u2014"})]}),r.ico&&(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"I\u010cO"}),(0,V.jsx)(Pe,{children:r.ico})]}),r.dic&&(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"DI\u010c"}),(0,V.jsx)(Pe,{children:r.dic})]})]})]}),(0,V.jsxs)(Ne,{children:[(0,V.jsxs)(De,{children:[(0,V.jsx)(E.g,{icon:O.okg}),"Term\xedny"]}),(0,V.jsxs)(Te,{children:[(r.datum_uzavreni||r.datum_podpisu||r.datum_uzavreni_smlouvy||r.dt_vytvoreni)&&(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"Datum importu"}),(0,V.jsx)(Pe,{children:Ze(r.datum_uzavreni||r.datum_podpisu||r.datum_uzavreni_smlouvy||r.dt_vytvoreni)})]}),(r.platnost_od||r.datum_od)&&(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"Platnost od"}),(0,V.jsx)(Pe,{children:Ze(r.platnost_od||r.datum_od)})]}),(r.platnost_do||r.datum_do)&&(()=>{const e=r.platnost_do||r.datum_do,n=e&&new Date(e)<new Date;return(0,V.jsxs)(Re,{style:{background:n?"#fee2e2":"#d1fae5",border:"2px solid ".concat(n?"#dc2626":"#10b981")},children:[(0,V.jsx)($e,{style:{color:n?"#7f1d1d":"#065f46"},children:"Platnost do"}),(0,V.jsx)(Pe,{style:{color:n?"#7f1d1d":"#065f46"},children:Ze(e)})]})})(),(r.datum_ukonceni||r.ukonceni)&&(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"Datum ukon\u010den\xed"}),(0,V.jsx)(Pe,{children:Ze(r.datum_ukonceni||r.ukonceni)})]})]})]}),r.predmet&&(0,V.jsxs)(Ne,{children:[(0,V.jsxs)(De,{children:[(0,V.jsx)(E.g,{icon:O.YEm}),"P\u0159edm\u011bt smlouvy"]}),(0,V.jsx)(Le,{children:(0,V.jsx)(Pe,{style:{whiteSpace:"pre-wrap"},children:r.predmet})})]}),(void 0!==r.cerpano_celkem||void 0!==r.cerpano)&&(0,V.jsxs)(Ne,{children:[(0,V.jsxs)(De,{children:[(0,V.jsx)(E.g,{icon:O.ymQ}),"\u010cerp\xe1n\xed"]}),(0,V.jsxs)(Te,{children:[(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"\u010cerp\xe1no"}),(0,V.jsx)(Pe,{children:Ue(r.cerpano_celkem||r.cerpano||0)})]}),(0,V.jsxs)(Re,{children:[(0,V.jsx)($e,{children:"Zb\xfdv\xe1"}),(0,V.jsx)(Pe,{children:Ue((r.hodnota_s_dph||r.celkova_castka||0)-(r.cerpano_celkem||r.cerpano||0))})]})]})]}),r.poznamka&&(0,V.jsxs)(Ne,{children:[(0,V.jsx)(De,{children:"Pozn\xe1mka"}),(0,V.jsx)(Le,{children:(0,V.jsx)(Pe,{style:{whiteSpace:"pre-wrap",fontSize:"0.875rem"},children:r.poznamka})})]})]})):(0,V.jsx)(ze,{children:(0,V.jsxs)(We,{children:[(0,V.jsx)(E.g,{icon:O.IJd,size:"3x",style:{marginBottom:"1rem",opacity:.3}}),(0,V.jsx)("div",{children:"\u017d\xe1dn\xe1 smlouva nen\xed vybr\xe1na"})]})})};var Je,He,Ye,Ge,Xe,qe,Qe,en,nn,on,rn,tn=o(32575),an=o(63974),sn=o(51833),ln=o(39292),dn=o(90087),cn=o(43548),mn=o(56099),pn=o(24749),un=o(29521),fn=o(77819),hn=o(40614);const xn=S.A.div(Je||(Je=(0,w.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 100003;\n  animation: fadeIn 0.2s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),vn=S.A.div(He||(He=(0,w.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow: hidden;\n  animation: slideIn 0.3s ease;\n\n  @keyframes slideIn {\n    from {\n      transform: translateY(-20px);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n"]))),gn=S.A.div(Ye||(Ye=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 20px 24px;\n  border-bottom: 1px solid #e5e7eb;\n  background: linear-gradient(135deg, #dc2626, #991b1b);\n  color: white;\n"]))),bn=S.A.div(Ge||(Ge=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  flex-shrink: 0;\n"]))),_n=S.A.h2(Xe||(Xe=(0,w.A)(["\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin: 0;\n  flex: 1;\n"]))),yn=S.A.button(qe||(qe=(0,w.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  flex-shrink: 0;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n"]))),jn=S.A.div(Qe||(Qe=(0,w.A)(["\n  padding: 24px;\n  max-height: 60vh;\n  overflow-y: auto;\n"]))),kn=S.A.div(en||(en=(0,w.A)(["\n  font-size: 0.95rem;\n  line-height: 1.6;\n  color: #374151;\n  white-space: pre-wrap;\n  word-break: break-word;\n"]))),wn=S.A.details(nn||(nn=(0,w.A)(["\n  margin-top: 16px;\n  padding: 12px;\n  background: #f9fafb;\n  border-radius: 6px;\n  font-size: 0.85rem;\n  color: #6b7280;\n  cursor: pointer;\n\n  summary {\n    font-weight: 600;\n    user-select: none;\n    outline: none;\n  }\n\n  pre {\n    margin-top: 8px;\n    padding: 8px;\n    background: #1f2937;\n    color: #f3f4f6;\n    border-radius: 4px;\n    overflow-x: auto;\n    font-size: 0.75rem;\n    line-height: 1.4;\n  }\n"]))),An=S.A.div(on||(on=(0,w.A)(["\n  padding: 16px 24px;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n"]))),zn=S.A.button(rn||(rn=(0,w.A)(["\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n  \n  ","\n"])),e=>e.primary?"\n    background: #dc2626;\n    color: white;\n    \n    &:hover {\n      background: #b91c1c;\n    }\n  ":"\n    background: #f3f4f6;\n    color: #374151;\n    \n    &:hover {\n      background: #e5e7eb;\n    }\n  "),Cn=e=>{let{isOpen:n,title:o="Chyba",message:r,details:t=null,onClose:a,onConfirm:i=null,confirmText:s="OK",cancelText:l="Zru\u0161it"}=e;if(!n)return null;return z.createPortal((0,V.jsx)(xn,{onClick:e=>{e.target===e.currentTarget&&a()},children:(0,V.jsxs)(vn,{children:[(0,V.jsxs)(gn,{children:[(0,V.jsx)(bn,{children:(0,V.jsx)(fn.A,{size:24})}),(0,V.jsx)(_n,{children:o}),(0,V.jsx)(yn,{onClick:a,children:(0,V.jsx)(hn.A,{size:18})})]}),(0,V.jsxs)(jn,{children:[(0,V.jsx)(kn,{children:r}),t&&(0,V.jsxs)(wn,{children:[(0,V.jsx)("summary",{children:"Technick\xe9 detaily"}),(0,V.jsx)("pre",{children:t})]})]}),(0,V.jsx)(An,{children:i?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(zn,{onClick:a,children:l}),(0,V.jsx)(zn,{primary:!0,onClick:i,children:s})]}):(0,V.jsx)(zn,{primary:!0,onClick:a,children:s})})]})}),document.body)};var Sn,En,On,In,Nn,Dn,Tn,Rn,$n,Pn,Ln,Bn,Mn,Vn,Fn,Wn,Un,Zn,Kn,Jn,Hn,Yn,Gn,Xn,qn,Qn,eo,no,oo,ro,to,ao,io,so;const lo=S.A.div(Sn||(Sn=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  flex: 1;\n  min-height: 0;\n"]))),co=S.A.div(En||(En=(0,w.A)(["\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  padding: 0.6rem;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid #60a5fa;\n"]))),mo=S.A.div(On||(On=(0,w.A)(["\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: #f1f5f9;\n  letter-spacing: 0.5px;\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n"]))),po=S.A.div(In||(In=(0,w.A)(["\n  font-size: 0.65rem;\n  color: #cbd5e1;\n  font-weight: 600;\n"]))),uo=S.A.div(Nn||(Nn=(0,w.A)(["\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0.3rem;\n  background: rgba(255, 255, 255, 0.03);\n  border-radius: 6px;\n  min-height: 0;\n\n  scrollbar-width: thin;\n  scrollbar-color: #93c5fd rgba(255, 255, 255, 0.05);\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #93c5fd;\n    border-radius: 4px;\n    border: 2px solid rgba(15, 23, 42, 0.92);\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #60a5fa;\n  }\n"]))),fo=S.A.div(Dn||(Dn=(0,w.A)(["\n  background: linear-gradient(135deg, rgba(147, 197, 253, 0.12), rgba(96, 165, 250, 0.08));\n  border: 1px solid rgba(96, 165, 250, 0.3);\n  border-radius: 8px;\n  padding: 0.7rem;\n  transition: all 0.2s;\n  cursor: pointer;\n\n  &:hover {\n    background: linear-gradient(135deg, rgba(147, 197, 253, 0.18), rgba(96, 165, 250, 0.12));\n    border-color: rgba(96, 165, 250, 0.5);\n    transform: translateX(2px);\n  }\n"]))),ho=S.A.div(Tn||(Tn=(0,w.A)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n"]))),xo=S.A.div(Rn||(Rn=(0,w.A)(["\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #f1f5f9;\n  line-height: 1.3;\n  flex: 1;\n"]))),vo=S.A.div($n||($n=(0,w.A)(["\n  font-size: 0.6rem;\n  color: #60a5fa;\n  font-family: 'Courier New', monospace;\n  background: rgba(96, 165, 250, 0.2);\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  white-space: nowrap;\n"]))),go=S.A.div(Pn||(Pn=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.3rem;\n  font-size: 0.65rem;\n  color: #cbd5e1;\n"]))),bo=S.A.div(Ln||(Ln=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n"]))),_o=S.A.span(Bn||(Bn=(0,w.A)(["\n  color: #94a3b8;\n  font-weight: 600;\n"]))),yo=S.A.span(Mn||(Mn=(0,w.A)(["\n  color: #e2e8f0;\n"]))),jo=S.A.div(Vn||(Vn=(0,w.A)(["\n  margin-top: 0.5rem;\n  padding-top: 0.5rem;\n  border-top: 1px solid rgba(96, 165, 250, 0.25);\n"]))),ko=S.A.div(Fn||(Fn=(0,w.A)(["\n  font-size: 0.65rem;\n  color: #94a3b8;\n  font-weight: 600;\n  margin-bottom: 0.4rem;\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n"]))),wo=S.A.div(Wn||(Wn=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.4rem;\n  background: rgba(96, 165, 250, 0.1);\n  border-radius: 5px;\n  margin-bottom: 0.3rem;\n  transition: background 0.15s;\n\n  &:hover {\n    background: rgba(96, 165, 250, 0.18);\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Ao=S.A.div(Un||(Un=(0,w.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),zo=S.A.div(Zn||(Zn=(0,w.A)(["\n  font-size: 0.65rem;\n  color: #f1f5f9;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Co=S.A.div(Kn||(Kn=(0,w.A)(["\n  font-size: 0.55rem;\n  color: #cbd5e1;\n  margin-top: 0.15rem;\n"]))),So=S.A.a(Jn||(Jn=(0,w.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.3rem 0.5rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border-radius: 4px;\n  text-decoration: none;\n  font-size: 0.6rem;\n  font-weight: 600;\n  transition: all 0.15s;\n  white-space: nowrap;\n\n  &:hover {\n    background: linear-gradient(135deg, #2563eb, #1d4ed8);\n    transform: scale(1.05);\n  }\n\n  svg {\n    font-size: 0.65rem;\n  }\n"]))),Eo=S.A.div(Hn||(Hn=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: #94a3b8;\n  font-size: 0.75rem;\n  gap: 0.5rem;\n"]))),Oo=S.A.div(Yn||(Yn=(0,w.A)(["\n  background: rgba(239, 68, 68, 0.15);\n  border: 1px solid rgba(239, 68, 68, 0.3);\n  border-radius: 6px;\n  padding: 0.7rem;\n  color: #fca5a5;\n  font-size: 0.7rem;\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n"]))),Io=S.A.div(Gn||(Gn=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem 1rem;\n  color: #94a3b8;\n  font-size: 0.75rem;\n  text-align: center;\n  gap: 0.5rem;\n  opacity: 0.7;\n"]))),No=S.A.button(Xn||(Xn=(0,w.A)(["\n  background: rgba(100, 116, 139, 0.15);\n  border: 1px solid rgba(100, 116, 139, 0.3);\n  color: #94a3b8;\n  padding: 0.3rem 0.6rem;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 0.65rem;\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.3rem;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(16, 185, 129, 0.25);\n    border-color: rgba(16, 185, 129, 0.5);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Do=S.A.div(qn||(qn=(0,w.A)(["\n  position: fixed;\n  top: ","px;\n  left: ","px;\n  width: ","px;\n  height: ","px;\n  background: white;\n  border-radius: 12px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  z-index: 100002;\n  resize: both;\n  min-width: 400px;\n  min-height: 300px;\n"])),e=>e.y||50,e=>e.x||window.innerWidth/2,e=>e.w||window.innerWidth/2-40,e=>e.h||window.innerHeight-100),To=S.A.div(Qn||(Qn=(0,w.A)(["\n  width: 100%;\n  height: 100%;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),Ro=S.A.div(eo||(eo=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.5rem;\n  background: linear-gradient(135deg, #475569, #334155);\n  color: white;\n"]))),$o=S.A.div(no||(no=(0,w.A)(["\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Po=S.A.button(oo||(oo=(0,w.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n"]))),Lo=(S.A.iframe(ro||(ro=(0,w.A)(["\n  flex: 1;\n  border: none;\n  width: 100%;\n  height: 100%;\n"]))),S.A.object(to||(to=(0,w.A)(["\n  flex: 1;\n  border: none;\n  width: 100%;\n  height: 100%;\n"])))),Bo=S.A.div(ao||(ao=(0,w.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 2rem;\n  background: #f8fafc;\n  color: #334155;\n"]))),Mo=S.A.a(io||(io=(0,w.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    background: linear-gradient(135deg, #2563eb, #1d4ed8);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n"]))),Vo=S.A.pre(so||(so=(0,w.A)(["\n  flex: 1;\n  overflow: auto;\n  padding: 2rem;\n  margin: 0;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n  line-height: 1.6;\n  background: #1e293b;\n  color: #e2e8f0;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n\n  scrollbar-width: thin;\n  scrollbar-color: #64748b #1e293b;\n\n  &::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #1e293b;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #64748b;\n    border-radius: 5px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #475569;\n  }\n"]))),Fo=e=>{let{panelState:n,setPanelState:o,beginDrag:r,onClose:t,onOCRDataExtracted:a}=e;const[i,s]=(0,A.useState)([]),[l,d]=(0,A.useState)(!1),[c,m]=(0,A.useState)(null),[p,u]=(0,A.useState)({total:0,limit:10,offset:0,rok:2025}),[f,h]=(0,A.useState)({visible:!1,url:"",filename:"",type:"",content:""}),[x,v]=(0,A.useState)({visible:!1,progress:0,message:""}),[g,b]=(0,A.useState)(()=>({x:window.innerWidth/2,y:50,w:window.innerWidth/2-40,h:window.innerHeight-100})),[_,y]=(0,A.useState)(!1),[j,w]=(0,A.useState)({isOpen:!1,title:"",message:"",details:null,onConfirm:null}),C=(0,A.useCallback)(e=>{_&&(e.preventDefault(),b(n=>(0,k.A)((0,k.A)({},n),{},{x:e.clientX-200,y:e.clientY-20})))},[_]),S=(0,A.useCallback)(()=>{y(!1)},[]);(0,A.useEffect)(()=>{if(_)return window.addEventListener("mousemove",C),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",S)}},[_,C,S]);const I=(0,A.useCallback)(async()=>{d(!0),m(null);try{const e="".concat("https://erdms.zachranka.cz/api.eeo/","spisovka.php/faktury?limit=").concat(p.limit,"&offset=").concat(p.offset,"&rok=").concat(p.rok),n=await fetch(e);if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));const o=await n.json();if("success"!==o.status)throw new Error(o.message||"Nepoda\u0159ilo se na\u010d\xedst faktury");s(o.data),u(o.pagination)}catch(e){m(e.message),console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed faktur ze spisovky:",e)}finally{d(!1)}},[p.limit,p.offset,p.rok]);(0,A.useEffect)(()=>{I()},[]),(0,A.useEffect)(()=>{const e=setInterval(()=>{console.log("\ud83d\udd04 Spisovka auto-refresh (5 minut)"),I()},3e5);return()=>clearInterval(e)},[I]);const N=e=>{if(!e)return"-";return new Date(e).toLocaleString("cs-CZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},D={left:"".concat(n.x,"px"),top:"".concat(n.y,"px"),width:"".concat(n.w,"px"),height:"".concat(n.h,"px"),minWidth:"320px",minHeight:"200px",maxHeight:"90vh"};return z.createPortal((0,V.jsxs)(pn.yW,{style:D,children:[(0,pn.Jr)(r,"spisovkaInbox"),(0,V.jsxs)(pn.aO,{onMouseDown:e=>r(e,"spisovkaInbox","move"),style:{cursor:"move"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[(0,V.jsx)(E.g,{icon:O.ReK,style:{color:"#94a3b8"}}),"Spisovka Inbox"]}),(0,V.jsxs)("div",{style:{display:"flex",gap:"0.3rem"},children:[(0,V.jsx)(pn.PJ,{onClick:()=>{o(e=>(0,k.A)((0,k.A)({},e),{},{minimized:!e.minimized}))},title:n.minimized?"Obnovit":"Minimalizovat",children:(0,V.jsx)(E.g,{icon:n.minimized?O.aFw:O.EZy})}),(0,V.jsx)(pn.PJ,{onClick:()=>{t&&t()},title:"Zav\u0159\xedt",children:(0,V.jsx)(E.g,{icon:O.GRI})})]})]}),!n.minimized&&(0,V.jsxs)(lo,{children:[(0,V.jsxs)(co,{children:[(0,V.jsxs)(mo,{children:[(0,V.jsx)(E.g,{icon:O.ReK}),"Faktury ",p.rok]}),(0,V.jsxs)(po,{children:[p.total," celkem"]})]}),l&&(0,V.jsxs)(Eo,{children:[(0,V.jsx)(E.g,{icon:O.z1G,spin:!0}),"Na\u010d\xedt\xe1m faktury..."]}),c&&(0,V.jsxs)(Oo,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),"Chyba: ",c,(0,V.jsxs)(No,{onClick:I,disabled:l,children:[(0,V.jsx)(E.g,{icon:O.VNe}),"Zkusit znovu"]})]}),!l&&!c&&0===i.length&&(0,V.jsxs)(Io,{children:[(0,V.jsx)(E.g,{icon:O.ReK,size:"2x"}),"\u017d\xe1dn\xe9 faktury k zobrazen\xed"]}),!l&&!c&&i.length>0&&(0,V.jsx)(uo,{children:i.map(e=>(0,V.jsxs)(fo,{children:[(0,V.jsxs)(ho,{draggable:e.prilohy&&e.prilohy.length>0,onDragStart:n=>{if(e.prilohy&&e.prilohy.length>0){n.stopPropagation(),n.currentTarget.style.cursor="grabbing",n.currentTarget.style.opacity="0.6";const o=e.prilohy.map(e=>({url:e.download_url,filename:e.filename,mime_type:e.mime_type||"application/octet-stream"}));n.dataTransfer.setData("text/spisovka-attachments",JSON.stringify(o)),n.dataTransfer.effectAllowed="copy"}},onDragEnd:n=>{n.stopPropagation(),n.currentTarget.style.cursor=e.prilohy&&e.prilohy.length>0?"grab":"default",n.currentTarget.style.opacity="1"},style:{cursor:e.prilohy&&e.prilohy.length>0?"grab":"default"},title:e.prilohy&&e.prilohy.length>0?"P\u0159et\xe1hn\u011bte hlavi\u010dku pro nahr\xe1n\xed v\u0161ech ".concat(e.prilohy.length," p\u0159\xedloh"):"",children:[(0,V.jsx)(xo,{children:e.nazev}),(0,V.jsxs)(vo,{children:["#",e.dokument_id]})]}),(0,V.jsxs)(go,{children:[(0,V.jsxs)(bo,{children:[(0,V.jsx)(_o,{children:"JID:"}),(0,V.jsx)(yo,{children:e.jid})]}),(0,V.jsxs)(bo,{children:[(0,V.jsx)(_o,{children:"\u010c\xedslo jednac\xed:"}),(0,V.jsx)(yo,{children:e.cislo_jednaci})]}),(0,V.jsxs)(bo,{children:[(0,V.jsx)(_o,{children:"Datum vzniku:"}),(0,V.jsx)(yo,{children:N(e.datum_vzniku)})]})]}),e.prilohy&&e.prilohy.length>0&&(0,V.jsxs)(jo,{children:[(0,V.jsxs)(ko,{children:["\ud83d\udcce P\u0159\xedlohy (",e.prilohy.length,")"]}),e.prilohy.slice(0,3).map(n=>{const o="application/pdf"===n.mime_type,r="text/plain"===n.mime_type||n.filename.toLowerCase().endsWith(".txt"),t=o||r;return(0,V.jsxs)(wo,{draggable:!0,onDragStart:e=>{e.stopPropagation(),e.currentTarget.style.cursor="grabbing",e.currentTarget.style.opacity="0.6",e.dataTransfer.setData("text/spisovka-file-url",n.download_url),e.dataTransfer.setData("text/spisovka-file-name",n.filename),e.dataTransfer.setData("text/spisovka-file-mime",n.mime_type||"application/octet-stream"),e.dataTransfer.effectAllowed="copy"},style:{cursor:"grab"},onDragEnd:e=>{e.stopPropagation(),e.currentTarget.style.cursor="grab",e.currentTarget.style.opacity="1"},children:[(0,V.jsxs)(Ao,{children:[(0,V.jsxs)(zo,{children:[o&&"\ud83d\udcc4 ",r&&"\ud83d\udcdd ",n.filename]}),(0,V.jsx)(Co,{children:(i=n.size,i<1024?"".concat(i," B"):i<1048576?"".concat((i/1024).toFixed(1)," KB"):"".concat((i/1048576).toFixed(1)," MB"))})]}),(0,V.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[o&&(0,V.jsxs)("button",{onClick:o=>{o.stopPropagation(),(async e=>{try{a&&a({datumVystaveni:"",datumSplatnosti:"",variabilniSymbol:"",castka:""}),v({visible:!0,progress:0,message:"Stahuji PDF ze Spisovky..."});const n="".concat("https://erdms.zachranka.cz/api.eeo/","spisovka.php/proxy-file?url=").concat(encodeURIComponent(e.download_url));console.log("\ud83d\udcc4 Fetching PDF via proxy: ".concat(n)),console.log("\ud83d\udcc4 Original URL: ".concat(e.download_url));const o=await fetch(n);if(!o.ok)throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));const r=o.headers.get("content-type"),t=o.headers.get("content-length");if(console.log("\ud83d\udcc4 Response received, Content-Type: ".concat(r,", Length: ").concat(t)),!r||!r.includes("pdf"))throw new Error("Neplatn\xfd form\xe1t souboru: ".concat(r||"unknown",". O\u010dek\xe1v\xe1no PDF."));v({visible:!0,progress:3,message:"Stahuji PDF data..."});const i=await o.arrayBuffer();if(console.log("\u2705 PDF completely downloaded: ".concat(i.byteLength," bytes")),0===i.byteLength)throw new Error("Sta\u017een\xfd soubor je pr\xe1zdn\xfd. Zkuste to pros\xedm znovu.");if(i.byteLength<100)throw new Error("Sta\u017een\xfd soubor je p\u0159\xedli\u0161 mal\xfd (".concat(i.byteLength," bytes). Stahov\xe1n\xed mo\u017en\xe1 selhalo."));const s=new Uint8Array(i.slice(0,5)),l=String.fromCharCode(...s);if(!l.startsWith("%PDF"))throw console.error("Invalid PDF header:",l),new Error("Sta\u017een\xfd soubor nen\xed platn\xe9 PDF (chyb\xed PDF header).");console.log('\u2705 PDF validated: header="'.concat(l,'", size=').concat(i.byteLength," bytes")),v({visible:!0,progress:5,message:"PDF sta\u017eeno, p\u0159ipravuji OCR..."});const d=await(0,un.p)(i,(e,n)=>{v({visible:!0,progress:e,message:n})}),c=(0,un.N)(d);v({visible:!1,progress:100,message:"Hotovo!"}),c.warning&&await new Promise(e=>{w({isOpen:!0,title:"\u26a0\ufe0f Varov\xe1n\xed",message:c.warning,details:null,onConfirm:()=>{w({isOpen:!1,title:"",message:"",details:null,onConfirm:null}),e(!0)},onClose:()=>{w({isOpen:!1,title:"",message:"",details:null,onConfirm:null}),e(!1)}})}).then(e=>{if(!e)throw console.log("\ud83d\udcc4 OCR zru\u0161eno u\u017eivatelem - dokument nen\xed faktura"),new Error("OCR_CANCELLED")}),a&&a(c),console.log("\ud83d\udcc4 OCR Data:",c),console.log("\ud83d\udcc4 Opening PDF for verification..."),h({visible:!0,url:e.download_url,filename:e.filename,type:"pdf",content:""})}catch(n){if(console.error("\u274c OCR Error:",n),v({visible:!1,progress:0,message:""}),"OCR_CANCELLED"===n.message)return;w({isOpen:!0,title:"Chyba p\u0159i OCR extrakci",message:n.message||"Nepoda\u0159ilo se extrahovat data z dokumentu.",details:n.stack||null,onConfirm:()=>{w({isOpen:!1,title:"",message:"",details:null,onConfirm:null}),h({visible:!0,url:e.download_url,filename:e.filename,type:"pdf",content:""})},onClose:()=>{w({isOpen:!1,title:"",message:"",details:null,onConfirm:null})}})}})(n,e.dokument_id)},style:{background:"linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%)",border:"none",borderRadius:"4px",padding:"4px 6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"3px",color:"white",fontSize:"0.65rem",fontWeight:"600",boxShadow:"0 1px 3px rgba(139, 92, 246, 0.3)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 2px 6px rgba(139, 92, 246, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 1px 3px rgba(139, 92, 246, 0.3)"},title:"Vyt\u011b\u017eit \xfadaje pomoc\xed OCR",children:[(0,V.jsx)(mn.A,{size:12}),(0,V.jsx)("span",{children:"OCR"})]}),(0,V.jsxs)(So,{as:t?"button":"a",href:t?void 0:n.download_url,target:t?void 0:"_blank",rel:t?void 0:"noopener noreferrer",onClick:async e=>{if(e.stopPropagation(),o)h({visible:!0,url:n.download_url,filename:n.filename,type:"pdf",content:""});else if(r){const e=await(async e=>{try{const n="".concat("https://erdms.zachranka.cz/api.eeo/","spisovka.php/proxy-txt?url=").concat(encodeURIComponent(e)),o=await fetch(n);if(!o.ok)throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));return await o.text()}catch(c){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed TXT souboru:",c),"Chyba p\u0159i na\u010d\xedt\xe1n\xed souboru:\n".concat(c.message,"\n\nURL: ").concat(e)}})(n.download_url);h({visible:!0,url:n.download_url,filename:n.filename,type:"txt",content:e})}},children:[(0,V.jsx)(E.g,{icon:o||r?O.h8M:O.cbP}),o?"PDF":r?"TXT":"DL"]})]})]},n.file_id);var i}),e.prilohy.length>3&&(0,V.jsxs)("div",{style:{fontSize:"0.6rem",color:"#94a3b8",marginTop:"0.3rem",textAlign:"center"},children:["+",e.prilohy.length-3," dal\u0161\xed"]})]})]},e.dokument_id))})]}),x.visible&&(0,V.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem",zIndex:1e3,borderRadius:"8px"},children:[(0,V.jsx)(mn.A,{size:48,color:"#8b5cf6",style:{animation:"spin 2s linear infinite"}}),(0,V.jsx)("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a1a1a"},children:"OCR extrakce z PDF"}),(0,V.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:x.message}),(0,V.jsx)("div",{style:{width:"80%",maxWidth:"300px",height:"8px",backgroundColor:"#e9d5ff",borderRadius:"4px",overflow:"hidden"},children:(0,V.jsx)("div",{style:{height:"100%",width:"".concat(x.progress,"%"),backgroundColor:"#8b5cf6",transition:"width 0.3s ease"}})}),(0,V.jsxs)("div",{style:{fontSize:"0.75rem",color:"#8b5cf6",fontWeight:"600"},children:[Math.round(x.progress),"%"]})]}),f.visible&&z.createPortal((0,V.jsx)(Do,{x:g.x,y:g.y,w:g.w,h:g.h,children:(0,V.jsxs)(To,{children:[(0,V.jsxs)(Ro,{onMouseDown:e=>{y(!0),e.preventDefault()},style:{cursor:_?"grabbing":"grab"},children:[(0,V.jsxs)($o,{children:[(0,V.jsx)(E.g,{icon:O.h8M}),f.filename]}),(0,V.jsx)(Po,{onClick:()=>h({visible:!1,url:"",filename:"",type:"",content:""}),children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),"pdf"===f.type?(0,V.jsx)(Lo,{data:f.url,type:"application/pdf",title:f.filename,children:(0,V.jsxs)(Bo,{children:[(0,V.jsx)(E.g,{icon:O.h8M,size:"3x",style:{color:"#64748b"}}),(0,V.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:600},children:"PDF nelze zobrazit v prohl\xed\u017ee\u010di"}),(0,V.jsx)("div",{style:{fontSize:"0.9rem",color:"#64748b",textAlign:"center",maxWidth:"400px"},children:"V\xe1\u0161 prohl\xed\u017ee\u010d nepodporuje zobrazen\xed PDF soubor\u016f. M\u016f\u017eete soubor st\xe1hnout a otev\u0159\xedt extern\u011b."}),(0,V.jsxs)(Mo,{href:f.url,download:f.filename,children:[(0,V.jsx)(E.g,{icon:O.cbP}),"St\xe1hnout PDF"]})]})}):"txt"===f.type?(0,V.jsx)(Vo,{children:f.content}):null]})}),document.body),(0,V.jsx)(Cn,{isOpen:j.isOpen,title:j.title,message:j.message,details:j.details,onConfirm:j.onConfirm,onClose:j.onClose,confirmText:j.onConfirm?j.title.includes("Varov\xe1n\xed")?"Pokra\u010dovat":"Otev\u0159\xedt PDF":null,cancelText:"Zru\u0161it"})]}),document.body)};var Wo,Uo,Zo,Ko,Jo,Ho,Yo,Go,Xo,qo,Qo,er,nr,or,rr,tr,ar,ir,sr,lr,dr,cr,mr,pr,ur,fr,hr,xr,vr,gr,br,_r,yr,jr,kr,wr,Ar,zr,Cr,Sr,Er,Or,Ir,Nr,Dr,Tr,Rr,$r,Pr,Lr,Br,Mr,Vr,Fr,Wr,Ur,Zr,Kr,Jr,Hr,Yr,Gr,Xr,qr,Qr,et,nt,ot,rt=o(4569),tt=o(29071);const at=e=>{if(!e)return"";const n=new Date(e);return isNaN(n)?"":n.toISOString().split("T")[0]},it=S.A.div(Wo||(Wo=(0,w.A)(["\n  position: relative;\n  width: 100%;\n  height: calc(100vh - 60px);\n  background: #f9fafb;\n  padding: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),st=S.A.div(Uo||(Uo=(0,w.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ffffff;\n  z-index: 99999;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"]))),lt=S.A.div(Zo||(Zo=(0,w.A)(["\n  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);\n  color: white;\n  padding: 1.5rem 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 3px solid #3498db;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n"]))),dt=S.A.h1(Ko||(Ko=(0,w.A)(["\n  margin: 0;\n  font-size: 1.75rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),ct=S.A.div(Jo||(Jo=(0,w.A)(["\n  display: flex;\n  gap: 12px;\n  align-items: center;\n"]))),mt=S.A.button(Ho||(Ho=(0,w.A)(["\n  background: rgba(255, 255, 255, 0.1);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  width: 44px;\n  height: 44px;\n  padding: 0;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 1.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  position: relative;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"]))),pt=S.A.span(Yo||(Yo=(0,w.A)(["\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  font-size: 0.7rem;\n  font-weight: 700;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #0f172a;\n  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);\n"]))),ut=S.A.div(Go||(Go=(0,w.A)(["\n  position: relative;\n  display: inline-block;\n"]))),ft=S.A.div(Xo||(Xo=(0,w.A)(["\n  position: fixed;\n  top: ","px;\n  left: ","px;\n  min-width: 350px;\n  max-width: 450px;\n  background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.98));\n  border: 1px solid rgba(16, 185, 129, 0.3);\n  border-radius: 10px;\n  padding: 0.75rem;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n  z-index: 10000;\n  opacity: ",";\n  visibility: ",";\n  transform: ",";\n  transition: all 0.2s ease;\n  pointer-events: none;\n\n  &::before {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    right: 20px;\n    border: 6px solid transparent;\n    border-bottom-color: rgba(16, 185, 129, 0.3);\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    right: 21px;\n    border: 5px solid transparent;\n    border-bottom-color: rgba(15, 23, 42, 0.98);\n  }\n"])),e=>e.$top||0,e=>e.$left||0,e=>e.show?1:0,e=>e.show?"visible":"hidden",e=>e.show?"translateY(0)":"translateY(-10px)"),ht=S.A.div(qo||(qo=(0,w.A)(["\n  font-size: 0.7rem;\n  font-weight: 700;\n  color: #10b981;\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),xt=S.A.div(Qo||(Qo=(0,w.A)(["\n  padding: 0.4rem;\n  border-radius: 6px;\n  margin-bottom: 0.3rem;\n  background: rgba(16, 185, 129, 0.08);\n  border: 1px solid rgba(16, 185, 129, 0.2);\n  font-size: 0.75rem;\n  color: #e2e8f0;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),vt=S.A.div(er||(er=(0,w.A)(["\n  font-weight: 600;\n  color: #d1fae5;\n  margin-bottom: 0.2rem;\n"]))),gt=S.A.div(nr||(nr=(0,w.A)(["\n  font-size: 0.7rem;\n  color: #94a3b8;\n  display: flex;\n  justify-content: space-between;\n"]))),bt=S.A.div(or||(or=(0,w.A)(["\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  min-height: 0;\n"]))),_t=S.A.div(rr||(rr=(0,w.A)(["\n  width: 55%;\n  background: white;\n  border-right: 2px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),yt=S.A.div(tr||(tr=(0,w.A)(["\n  flex-shrink: 0;\n  background: white;\n  padding: 1.5rem 2rem 1rem 2rem;\n  border-bottom: 2px solid #e5e7eb;\n"]))),jt=S.A.div(ar||(ar=(0,w.A)(["\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 2rem;\n\n  &::-webkit-scrollbar {\n    width: 10px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 5px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #94a3b8;\n  }\n"]))),kt=S.A.div(ir||(ir=(0,w.A)(["\n  width: 45%;\n  background: #f8fafc;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),wt=S.A.div(sr||(sr=(0,w.A)(["\n  flex-shrink: 0;\n  background: #f8fafc;\n  padding: 1.25rem 2rem 1.5rem 2rem;\n  border-bottom: 2px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n"]))),At=S.A.button(lr||(lr=(0,w.A)(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 6px;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.15s ease;\n  white-space: nowrap;\n  align-self: center;\n  margin: 0;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n"])),e=>e.disabled?"#e5e7eb":"#3b82f6",e=>e.disabled?"#94a3b8":"white",e=>e.disabled?"not-allowed":"pointer"),zt=S.A.div(dr||(dr=(0,w.A)(["\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 2rem;\n\n  &::-webkit-scrollbar {\n    width: 10px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #e5e7eb;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #9ca3af;\n    border-radius: 5px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #6b7280;\n  }\n"]))),Ct=S.A.h2(cr||(cr=(0,w.A)(["\n  font-size: 1.3rem;\n  color: #1e293b;\n  margin: 0 0 1.5rem 0;\n  padding-bottom: 12px;\n  border-bottom: 2px solid #3498db;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),St=S.A.div(mr||(mr=(0,w.A)(["\n  border: 2px solid ",";\n  border-radius: 12px;\n  padding: 1.5rem;\n  background: ",";\n  margin-bottom: 1.5rem;\n  transition: all 0.3s ease;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  }\n"])),e=>e.$hasError?"#ef4444":"#e5e7eb",e=>e.$isEditing?"#f0f9ff":"#ffffff"),Et=S.A.div(pr||(pr=(0,w.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: ",";\n  margin-bottom: 1rem;\n"])),e=>e.$columns||"1fr",e=>e.$gap||"1rem"),Ot=S.A.div(ur||(ur=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),It=S.A.label(fr||(fr=(0,w.A)(["\n  font-weight: 600;\n  color: #475569;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Nt=S.A.span(hr||(hr=(0,w.A)(["\n  color: #ef4444;\n"]))),Dt=S.A.div(xr||(xr=(0,w.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]))),Tt=S.A.span(vr||(vr=(0,w.A)(["\n  position: absolute;\n  right: 12px;\n  color: #374151;\n  font-weight: 600;\n  font-size: 0.875rem;\n  font-family: inherit;\n  pointer-events: none;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]))),Rt=S.A.input(gr||(gr=(0,w.A)(["\n  width: 100%;\n  height: 48px;\n  padding: 1px 0.875rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.95rem;\n  transition: all 0.2s ease;\n  font-family: inherit;\n  box-sizing: border-box;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #94a3af;\n  }\n"])),e=>e.$hasError?"#ef4444":"#e2e8f0",e=>e.$hasError?"#ef4444":"#3b82f6",e=>e.$hasError?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),$t=S.A.textarea(br||(br=(0,w.A)(["\n  padding: 0.875rem;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  font-size: 0.95rem;\n  min-height: 100px;\n  resize: vertical;\n  font-family: inherit;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Pt=(S.A.select(_r||(_r=(0,w.A)(["\n  width: 100%;\n  height: 48px;\n  padding: 1px 2.5rem 1px 0.875rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.95rem;\n  cursor: pointer;\n  font-family: inherit;\n  background-color: white;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 9L1 4h10z'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 12px;\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  option {\n    padding: 0.5rem;\n  }\n"])),e=>e.$hasError?"#ef4444":"#e2e8f0",e=>e.$hasError?"#ef4444":"#cbd5e1",e=>e.$hasError?"#ef4444":"#3b82f6",e=>e.$hasError?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),S.A.div(yr||(yr=(0,w.A)(["\n  color: #ef4444;\n  font-size: 0.875rem;\n  margin-top: 0.5rem;\n"]))),S.A.div(jr||(jr=(0,w.A)(["\n  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n  border: 2px solid #86efac;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-top: 2rem;\n"]))),S.A.h3(kr||(kr=(0,w.A)(["\n  margin: 0 0 1rem 0;\n  font-size: 1.1rem;\n  color: #166534;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),S.A.label(wr||(wr=(0,w.A)(['\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  padding: 0.75rem;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid #d1fae5;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #86efac;\n    background: #f0fdf4;\n  }\n\n  input[type="checkbox"] {\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n  }\n\n  strong {\n    color: #166534;\n    font-size: 1rem;\n  }\n']))),S.A.div(Ar||(Ar=(0,w.A)(["\n  display: flex;\n  gap: 1rem;\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 2px solid #e5e7eb;\n  justify-content: flex-end;\n"])))),Lt=S.A.button(zr||(zr=(0,w.A)(["\n  padding: 0.875rem 1.75rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  ","\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none !important;\n  }\n\n  &:active:not(:disabled) {\n    transform: scale(0.98);\n  }\n"])),e=>"primary"===e.$variant&&"\n    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n    color: white;\n\n    &:hover {\n      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);\n    }\n  ",e=>"secondary"===e.$variant&&"\n    background: #f1f5f9;\n    color: #475569;\n\n    &:hover {\n      background: #e2e8f0;\n    }\n  "),Bt=(S.A.div(Cr||(Cr=(0,w.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  margin-bottom: 1.5rem;\n"]))),S.A.div(Sr||(Sr=(0,w.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #e5e7eb;\n"]))),S.A.div(Er||(Er=(0,w.A)(["\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #1e293b;\n"]))),S.A.span(Or||(Or=(0,w.A)(["\n  padding: 6px 14px;\n  border-radius: 16px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  background: ",";\n  color: white;\n"])),e=>e.$color||"#64748b"),S.A.div(Ir||(Ir=(0,w.A)(["\n  display: flex;\n  margin-bottom: 12px;\n  gap: 12px;\n"]))),S.A.div(Nr||(Nr=(0,w.A)(["\n  font-weight: 600;\n  color: #64748b;\n  min-width: 140px;\n  font-size: 0.9rem;\n"]))),S.A.div(Dr||(Dr=(0,w.A)(["\n  color: #1e293b;\n  flex: 1;\n  font-size: 0.9rem;\n"]))),S.A.div(Tr||(Tr=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  color: #64748b;\n"])))),Mt=S.A.div(Rr||(Rr=(0,w.A)(["\n  width: 48px;\n  height: 48px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #3b82f6;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n"]))),Vt=S.A.div($r||($r=(0,w.A)(["\n  background: #fef2f2;\n  border: 2px solid #fecaca;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  color: #991b1b;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),Ft=S.A.div(Pr||(Pr=(0,w.A)(["\n  font-size: 0.85rem;\n  color: #64748b;\n  margin-top: 0.5rem;\n  font-style: italic;\n"]))),Wt=S.A.div(Lr||(Lr=(0,w.A)(["\n  font-size: 0.85rem;\n  color: #dc2626;\n  margin-top: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-weight: 500;\n"]))),Ut=S.A.div(Br||(Br=(0,w.A)(["\n  position: relative;\n  width: 100%;\n"]))),Zt=(0,S.A)(Rt)(Mr||(Mr=(0,w.A)(["\n  padding-right: 2.5rem;\n"]))),Kt=S.A.button(Vr||(Vr=(0,w.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #cbd5e1;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s ease;\n  font-size: 0.75rem;\n  opacity: 0.6;\n\n  &:hover {\n    color: #94a3b8;\n    opacity: 1;\n  }\n\n  &:active {\n    transform: translateY(-50%) scale(0.9);\n  }\n"]))),Jt=S.A.div(Fr||(Fr=(0,w.A)(["\n  position: absolute;\n  top: calc(100% + 4px);\n  left: 0;\n  width: 150%;\n  max-height: 400px;\n  overflow-y: auto;\n  background: white;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n"]))),Ht=S.A.div(Wr||(Wr=(0,w.A)(["\n  padding: 0.75rem 1rem;\n  cursor: pointer;\n  border-bottom: 1px solid #f3f4f6;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]))),Yt=S.A.div(Ur||(Ur=(0,w.A)(["\n  font-weight: 600;\n  color: #1e40af;\n  font-size: 0.95rem;\n  margin-bottom: 0.25rem;\n"]))),Gt=S.A.div(Zr||(Zr=(0,w.A)(["\n  font-size: 0.85rem;\n  color: #6b7280;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-top: 0.25rem;\n"]))),Xt=S.A.span(Kr||(Kr=(0,w.A)(["\n  background: ",";\n  color: ",";\n  padding: 0.125rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 500;\n"])),e=>e.$color||"#e5e7eb",e=>e.$textColor||"#374151"),qt=S.A.div(Jr||(Jr=(0,w.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #9ca3af;\n  font-size: 0.9rem;\n"]))),Qt=S.A.div(Hr||(Hr=(0,w.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #6b7280;\n"]))),ea=S.A.div(Yr||(Yr=(0,w.A)(["\n  position: relative;\n  width: 100%;\n  z-index: ",";\n"])),e=>e.isOpen?1e4:1),na=S.A.div(Gr||(Gr=(0,w.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  height: 48px;\n  padding: 1px 2.5rem 1px 0.875rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.95rem;\n  background: ",";\n  cursor: ",";\n  color: ",";\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  position: relative;\n  transition: all 0.2s ease;\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n  background-image: ",";\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 12px 12px;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n"])),e=>e.hasError?"#dc2626":"#e2e8f0",e=>e.disabled?"#f1f5f9":"#ffffff",e=>e.disabled?"not-allowed":"pointer",e=>e.disabled?"#6b7280":e.placeholder||!e.value||""===e.value?"#94a3af":"#1f2937",e=>e.disabled?"400":e.value&&""!==e.value&&"true"!==e.placeholder?"600":"400",e=>e.disabled?e.isOpen?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'%3E%3C/polyline%3E%3C/svg%3E\")":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")":e.hasError?e.isOpen?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23b91c1c' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'%3E%3C/polyline%3E%3C/svg%3E\")":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23b91c1c' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")":e.isOpen?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'%3E%3C/polyline%3E%3C/svg%3E\")":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\")",e=>e.disabled?"#e2e8f0":e.hasError?"#dc2626":"#cbd5e1",e=>e.hasError?"#dc2626":"#3b82f6",e=>e.hasError?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),oa=S.A.span(Xr||(Xr=(0,w.A)(["\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: ",";\n  font-weight: ",";\n"])),e=>e.isEmpty?"#9ca3af":"#1f2937",e=>e.isEmpty?"400":"600"),ra=S.A.div(qr||(qr=(0,w.A)(["\n  position: fixed;\n  z-index: 40;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1);\n  max-height: 300px;\n  overflow-y: auto;\n  min-width: 200px;\n  user-select: none;\n  scroll-behavior: auto;\n  contain: layout style paint;\n  will-change: scroll-position;\n  transform: translateZ(0);\n  scrollbar-width: thin;\n  scrollbar-color: #d1d5db #f9fafb;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f9fafb;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #d1d5db;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #9ca3af;\n  }\n"]))),ta=S.A.div(Qr||(Qr=(0,w.A)(["\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: white;\n  padding: 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n"]))),aa=S.A.input(et||(et=(0,w.A)(["\n  width: 100%;\n  padding: 0.75rem 0.75rem 0.75rem 2.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n"]))),ia=S.A.div(nt||(nt=(0,w.A)(["\n  position: absolute;\n  left: 1rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #6b7280;\n  pointer-events: none;\n"]))),sa=S.A.div(ot||(ot=(0,w.A)(["\n  padding: ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: ",";\n  border-bottom: ",";\n  font-weight: ",";\n  color: ",";\n  position: relative;\n  will-change: transform;\n  backface-visibility: hidden;\n  outline: none;\n\n  &:hover {\n    background: ",';\n  }\n\n  &:focus {\n    background: #dbeafe;\n    box-shadow: inset 0 0 0 2px #3b82f6;\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  input[type="checkbox"] {\n    margin: 0;\n    pointer-events: none;\n  }\n\n  span {\n    padding-left: ',"px;\n    font-weight: ",";\n  }\n"])),e=>0===e.level?"0.75rem":"0.5rem 0.75rem 0.5rem 2rem",e=>0===e.level?"#f9fafb":"#ffffff",e=>0===e.level?"2px solid #e5e7eb":"1px solid #f3f4f6",e=>0===e.level?"600":"400",e=>0===e.level?"#111827":"#4b5563",e=>0===e.level?"#f3f4f6":"#f8fafc",e=>20*(e.level||0),e=>0===(e.level||0)?"600":"400");function la(){var e,n;const o=(0,C.Zp)(),r=(0,C.zy)(),{orderId:t}=(0,C.g)(),{token:a,username:i,user_id:s,hasPermission:l}=(0,A.useContext)(I.cy),{showToast:d}=(0,A.useContext)(N.$o),{setProgress:c}=(0,A.useContext)(D.z)||{},m=l("INVOICE_MANAGE")||l("ORDER_MANAGE")||l("ADMIN"),p=(0,A.useCallback)(e=>{if(!e||!e.stav_workflow_kod)return null;let n=[];try{"string"===typeof e.stav_workflow_kod?n=JSON.parse(e.stav_workflow_kod):Array.isArray(e.stav_workflow_kod)&&(n=e.stav_workflow_kod)}catch(o){return null}return n.length>0?n[n.length-1]:null},[]),u=(0,A.useCallback)(e=>{if(!e||!e.stav_workflow_kod)return{allowed:!1,reason:"Objedn\xe1vka nem\xe1 definovan\xfd stav"};let n=[];try{"string"===typeof e.stav_workflow_kod?n=JSON.parse(e.stav_workflow_kod):Array.isArray(e.stav_workflow_kod)&&(n=e.stav_workflow_kod)}catch(r){return{allowed:!1,reason:"Chyba p\u0159i parsov\xe1n\xed stavu objedn\xe1vky"}}const o=n.length>0?n[n.length-1]:null;if(!o)return{allowed:!1,reason:"Objedn\xe1vka nem\xe1 definovan\xfd aktu\xe1ln\xed stav"};return["NEUVEREJNIT","UVEREJNENA","FAKTURACE","VECNA_SPRAVNOST","ZKONTROLOVANA"].includes(o)?{allowed:!0,reason:null}:{allowed:!1,reason:"Fakturaci lze p\u0159idat pouze k objedn\xe1vk\xe1m ve stavu: NEUVE\u0158EJNIT, UVE\u0158EJN\u011aNA, FAKTURACE, V\u011aCN\xc1 SPR\xc1VNOST nebo ZKONTROLOVAN\xc1. Aktu\xe1ln\xed stav: ".concat(o)}},[]),[f,h]=(0,A.useState)(!1),[x,v]=(0,A.useState)(!1),[g,b]=(0,A.useState)(!1),[_,y]=(0,A.useState)(null),[j,w]=(0,A.useState)(null),[S,F]=(0,A.useState)("order"),[W,U]=(0,A.useState)(null),[Z,K]=(0,A.useState)({}),[J,H]=(0,A.useState)(""),[Y,G]=(0,A.useState)([]),[X,q]=(0,A.useState)(!1),[Q,ee]=(0,A.useState)(!1),ne=(0,A.useRef)(null),[oe,re]=(0,A.useState)(!1),[te,ae]=(0,A.useState)(null),[ie,le]=(0,A.useState)({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null}),[de,ce]=(0,A.useState)(!1),[me,pe]=(0,A.useState)(!1),[ue,fe]=(0,A.useState)(!1),[he,xe]=(0,A.useState)({x:window.innerWidth-620,y:Math.max(200,window.innerHeight/2-300),w:600,h:600,minimized:!1}),[ve,ge]=(0,A.useState)(0),[be,_e]=(0,A.useState)([]),[ye,je]=(0,A.useState)(!1),[ke,we]=(0,A.useState)({top:0,left:0}),Ae=(0,A.useRef)(null);(0,A.useEffect)(()=>{const e=()=>{xe(e=>{const n=window.innerWidth-e.w-20,o=window.innerHeight-e.h-20;return(0,k.A)((0,k.A)({},e),{},{x:Math.min(Math.max(20,e.x),n),y:Math.min(Math.max(20,e.y),o)})})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[ze,Ce]=(0,A.useState)({order_id:t||"",smlouva_id:null,fa_cislo_vema:"",fa_typ:"BEZNA",fa_datum_doruceni:at(new Date),fa_datum_vystaveni:"",fa_datum_splatnosti:"",fa_castka:"",fa_poznamka:"",fa_strediska_kod:[],fa_predana_zam_id:null,fa_datum_predani_zam:"",fa_datum_vraceni_zam:""}),[Se,Ee]=(0,A.useState)([]),[Oe,Ie]=(0,A.useState)({}),[Ne,De]=(0,A.useState)({}),[Te,Re]=(0,A.useState)({}),[$e,Pe]=(0,A.useState)([]),[Le,Be]=(0,A.useState)(!1),[Me,Ve]=(0,A.useState)([]),[Fe,We]=(0,A.useState)(!1),[Ue,Ze]=(0,A.useState)([]),[Je,He]=(0,A.useState)(!1),[Ye,Ge]=(0,A.useState)(null),[Xe,qe]=(0,A.useState)(!1);(0,A.useEffect)(()=>{a&&i&&((async()=>{if(a&&i){Be(!0);try{const e=await(0,B.CR)({token:a,username:i});e&&Array.isArray(e)&&(Pe(e),console.log("\u2705 St\u0159ediska na\u010dtena:",e.length))}catch(e){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed st\u0159edisek:",e)}finally{Be(!1)}}else console.log("\u23f3 Token nebo username je\u0161t\u011b nen\xed k dispozici, \u010dek\xe1m...")})(),(async()=>{if(a&&i){We(!0);try{const e=await(0,B.Zz)({token:a,username:i,aktivni:1});e&&Array.isArray(e)&&(Ve(e),console.log("\u2705 Typy faktur na\u010dteny:",e.length))}catch(e){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed typ\u016f faktur:",e)}finally{We(!1)}}})(),(async()=>{if(a&&i){He(!0);try{const e=await(0,L.Ym)({token:a,username:i});if(e&&Array.isArray(e)){const n=e.filter(e=>1===e.aktivni).sort((e,n)=>{const o="".concat(e.prijmeni||""," ").concat(e.jmeno||"").trim(),r="".concat(n.prijmeni||""," ").concat(n.jmeno||"").trim();return o.localeCompare(r,"cs")});Ze(n),console.log("\u2705 Zam\u011bstnanci na\u010dteni:",n.length)}}catch(e){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed zam\u011bstnanc\u016f:",e)}finally{He(!1)}}})())},[a,i]),(0,A.useEffect)(()=>{if(!te||!Ye)return;const e=Ye.order_id||Ye.smlouva_id,n=!Ye.fa_predana_zam_id,o=1===Ye.vecna_spravnost_potvrzeno;if(!e||!n||!o)return void qe(!1);const r=["fa_castka","fa_cislo_vema","fa_strediska_kod","fa_typ","fa_datum_vystaveni","fa_datum_splatnosti","fa_datum_doruceni"].some(e=>{const n=Ye[e],o=ze[e];return Array.isArray(n)&&Array.isArray(o)?JSON.stringify(n.sort())!==JSON.stringify(o.sort()):n!==o});qe(r)},[ze,Ye,te]),(0,A.useEffect)(()=>{var e;null!==(e=r.state)&&void 0!==e&&e.editInvoiceId&&(async()=>{var e,n;const o=null===(e=r.state)||void 0===e?void 0:e.editInvoiceId,t=null===(n=r.state)||void 0===n?void 0:n.orderIdForLoad;if(o&&a&&i&&0!==$e.length&&(te!==o||!ze.fa_cislo_vema)){v(!0),ae(o);try{const e=await(0,T.V1)({token:a,username:i,id:o});if(e){let n=[];if(e.fa_strediska_kod){let o=[];if("string"===typeof e.fa_strediska_kod)try{o=JSON.parse(e.fa_strediska_kod)}catch(s){console.warn("Chyba p\u0159i parsov\xe1n\xed st\u0159edisek:",s)}else Array.isArray(e.fa_strediska_kod)&&(o=e.fa_strediska_kod);n=o.map(e=>"string"===typeof e?($e.find(n=>n.value===e)||console.warn("\u26a0\ufe0f St\u0159edisko ".concat(e," nen\xed v options (neaktivn\xed)")),e):"object"===typeof e&&e.value?e.value:e)}const o={order_id:e.objednavka_id||"",smlouva_id:e.smlouva_id||null,fa_cislo_vema:e.fa_cislo_vema||"",fa_typ:e.fa_typ||"BEZNA",fa_datum_doruceni:at(e.fa_datum_doruceni),fa_datum_vystaveni:at(e.fa_datum_vystaveni),fa_datum_splatnosti:at(e.fa_datum_splatnosti),fa_castka:e.fa_castka||"",fa_poznamka:e.fa_poznamka||"",fa_strediska_kod:n,file:null,fa_predana_zam_id:e.fa_predana_zam_id||null,fa_datum_predani_zam:at(e.fa_datum_predani_zam),fa_datum_vraceni_zam:at(e.fa_datum_vraceni_zam),vecna_spravnost_potvrzeno:e.vecna_spravnost_potvrzeno||0};if(Ce(o),Ge(o),pe(!(!e.objednavka_id&&!e.smlouva_id)),t||e.objednavka_id){const n=t||e.objednavka_id;await Qe(n),F("order"),e.cislo_objednavky&&H(e.cislo_objednavky)}else e.smlouva_id&&(await en(e.smlouva_id),F("smlouva"))}}catch(l){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed faktury:",l),null===d||void 0===d||d(l.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed faktury",{type:"error"})}finally{v(!1)}}})()},[null===(e=r.state)||void 0===e?void 0:e.editInvoiceId,a,i,$e]);const Qe=(0,A.useCallback)(async e=>{if(e&&a&&i){b(!0),U(null);try{const n=await(0,R.Hj)(e,a,i,!0);if(n&&n.id){y(n);const e=n.cislo_objednavky||n.evidencni_cislo||"#".concat(n.id);H(e)}else U("Nepoda\u0159ilo se na\u010d\xedst data objedn\xe1vky")}catch(n){U(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed objedn\xe1vky"),d&&d(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed objedn\xe1vky","error")}finally{b(!1)}}},[a,i,d]),en=(0,A.useCallback)(async e=>{if(e&&a&&i){b(!0),U(null);try{console.log("\ud83d\udd0d Na\u010d\xedt\xe1m smlouvu ID:",e);const n=await(0,$.hu)({token:a,username:i,id:e});if(console.log("\ud83d\udce6 RAW API RESPONSE - smlouvaData:",JSON.stringify(n,null,2)),n){const e=n.smlouva||n,o=(0,k.A)((0,k.A)({},e),{},{objednavky:n.objednavky||[],statistiky:n.statistiky||{}});w(o),F("smlouva"),console.log("\u2705 Smlouva na\u010dtena (normalized):",o),Ce(e=>(0,k.A)((0,k.A)({},e),{},{smlouva_id:o.id,order_id:null}));const r=o.cislo_smlouvy||"#".concat(o.id);H(r),y(null)}else U("Nepoda\u0159ilo se na\u010d\xedst data smlouvy - pr\xe1zdn\xe1 odpov\u011b\u010f z API"),d&&d("Nepoda\u0159ilo se na\u010d\xedst data smlouvy","error")}catch(n){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed smlouvy:",n),U(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed smlouvy"),d&&d(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed smlouvy","error")}finally{b(!1)}}},[a,i,d]),nn=(0,A.useCallback)(async e=>{if(!e||e.length<3)G([]);else{q(!0);try{var n,o,r,t;const a={query:e,categories:["orders_2025","contracts"],limit:15,archivovano:0,search_all:m},i=await(0,P.C)(a),s=(null===i||void 0===i||null===(n=i.categories)||void 0===n||null===(o=n.orders_2025)||void 0===o?void 0:o.results)||[],l=(null===i||void 0===i||null===(r=i.categories)||void 0===r||null===(t=r.contracts)||void 0===t?void 0:t.results)||[],d=s.filter(e=>{let n=[];try{e.stav_kod&&(n=JSON.parse(e.stav_kod))}catch(t){}const o=["STORNOVANA","ZAMITNUTA"];if(n.some(e=>o.includes(e)))return!1;const r=["ODESLANA","ODESLANO","POTVRZENA","NEUVEREJNIT","FAKTURACE","VECNA_SPRAVNOST","ZKONTROLOVANA","DOKONCENA"];return!!n.some(e=>r.includes(e))&&(m||!0)}),c=l.filter(e=>1===e.aktivni),p=[...d.map(e=>(0,k.A)((0,k.A)({},e),{},{_type:"order"})),...c.map(e=>(0,k.A)((0,k.A)({},e),{},{_type:"smlouva"}))];G(p),ee(!0)}catch(a){G([])}finally{q(!1)}}},[m]);(0,A.useEffect)(()=>{const e=setTimeout(()=>{J&&Q&&nn(J)},300);return()=>clearTimeout(e)},[J,Q,nn]),(0,A.useEffect)(()=>{t&&(Ce(e=>(0,k.A)((0,k.A)({},e),{},{order_id:t})),Qe(t))},[t,Qe]),(0,A.useEffect)(()=>{ze.order_id&&ze.order_id!==t&&Qe(ze.order_id)},[ze.order_id,t,Qe]),(0,A.useEffect)(()=>{const e=e=>{e.target.closest(".autocomplete-wrapper")||ee(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,A.useEffect)(()=>{if(!l("ADMIN"))return;const e=async()=>{try{const e="".concat("https://erdms.zachranka.cz/api.eeo/","spisovka.php/count-today"),n=await fetch(e);if(n.ok){const e=await n.json();"success"===e.status&&ge(e.count)}const o="".concat("https://erdms.zachranka.cz/api.eeo/","spisovka.php/faktury?limit=5&offset=0&rok=2025"),r=await fetch(o);if(r.ok){const e=await r.json();"success"===e.status&&_e(e.data)}}catch(W){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat ze spisovky:",W)}};e();const n=setInterval(e,3e5);return()=>clearInterval(n)},[l]);const on=e=>{const{name:n,value:o}=e.target;Ce(e=>(0,k.A)((0,k.A)({},e),{},{[n]:o}))},rn=(e,n)=>{Ce(n=>(0,k.A)((0,k.A)({},n),{},{order_id:e.id,smlouva_id:null})),H(n),ee(!1),F("order"),w(null),localStorage.setItem("activeOrderEditId",e.id),Qe(e.id)},mn=(0,A.useCallback)(e=>{if(_){const e=u(_);if(!e.allowed)return void(d&&d("\u274c ".concat(e.reason),"error"))}Ce({order_id:e.objednavka_id||"",smlouva_id:e.smlouva_id||null,fa_cislo_vema:e.fa_cislo_vema||"",fa_typ:e.fa_typ||"BEZNA",fa_datum_vystaveni:e.fa_datum_vystaveni||"",fa_datum_splatnosti:e.fa_datum_splatnosti||"",fa_datum_doruceni:e.fa_datum_doruceni||"",fa_castka:e.fa_castka||"",fa_variabilni_symbol:e.fa_variabilni_symbol||"",fa_poznamka:e.fa_poznamka||"",fa_predana_zam_id:e.fa_predana_zam_id||null,fa_datum_predani_zam:e.fa_datum_predani_zam||"",fa_datum_vraceni_zam:e.fa_datum_vraceni_zam||"",file:null,invoice_id:e.id}),ae(e.id),window.scrollTo({top:0,behavior:"smooth"}),d&&d("\ud83d\udcdd Faktura na\u010dtena pro \xfapravu","info")},[d,_,u]),pn=(0,A.useCallback)(e=>{Ee(e)},[]),un=(0,A.useCallback)(e=>{},[]),fn=(0,A.useCallback)((e,n)=>{if(te)return{isValid:!0,isISDOC:!1,categories:{}};if(n&&n.name&&n.name.toLowerCase().endsWith(".isdoc"))return{isValid:!0,isISDOC:!0,categories:{}};const o={objednateli:{label:"Informace o objednateli",errors:[]},schvaleni:{label:"Schv\xe1len\xed n\xe1kupu PO",errors:[]}};null!==e&&void 0!==e&&e.fa_cislo_vema||o.objednateli.errors.push("\u010c\xedslo faktury"),null!==e&&void 0!==e&&e.fa_datum_splatnosti||o.objednateli.errors.push("Datum splatnosti"),null!==e&&void 0!==e&&e.fa_castka||o.objednateli.errors.push("\u010c\xe1stka");return{isValid:0===[...o.objednateli.errors,...o.schvaleni.errors].length,isISDOC:!1,categories:o}},[te]),hn=(0,A.useCallback)(async e=>{console.log("\ud83d\udd04 handleCreateInvoiceInDB - vytv\xe1\u0159\xedm fakturu v DB p\u0159ed uploadem p\u0159\xedlohy",{tempFakturaId:e});try{const e={token:a,username:i,order_id:ze.order_id||null,smlouva_id:ze.smlouva_id||null,fa_cislo_vema:ze.fa_cislo_vema,fa_typ:ze.fa_typ||"BEZNA",fa_datum_vystaveni:ze.fa_datum_vystaveni,fa_datum_splatnosti:ze.fa_datum_splatnosti||null,fa_datum_doruceni:ze.fa_datum_doruceni||null,fa_castka:ze.fa_castka,fa_poznamka:ze.fa_poznamka||"",fa_dorucena:ze.fa_datum_doruceni?1:0,fa_strediska_kod:JSON.stringify(ze.fa_strediska_kod||[]),fa_predana_zam_id:ze.fa_predana_zam_id||null,fa_datum_predani_zam:ze.fa_datum_predani_zam||null,fa_datum_vraceni_zam:ze.fa_datum_vraceni_zam||null},n=await(0,T.We)(e);if(console.log("\ud83d\udd0d createInvoiceV2 result:",n),!n||!n.invoice_id&&!n.id)throw console.error("\u274c Neplatn\xfd result z createInvoiceV2:",n),new Error("Nepoda\u0159ilo se vytvo\u0159it fakturu v DB");const o=n.invoice_id||n.id;return console.log("\u2705 Faktura vytvo\u0159ena v DB, ID:",o),ae(o),o}catch(W){throw console.error("\u274c Chyba p\u0159i vytv\xe1\u0159en\xed faktury v DB:",W),W}},[a,i,ze]),xn=(0,A.useCallback)((e,n)=>{try{const n=(0,tt.GC)(e,{strediska:$e,orderStrediska:(null===_||void 0===_?void 0:_.strediska_kod)||ze.fa_strediska_kod});Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_cislo_vema:n.fa_cislo_vema||e.fa_cislo_vema,fa_datum_vystaveni:n.fa_datum_vystaveni||e.fa_datum_vystaveni,fa_datum_splatnosti:n.fa_datum_splatnosti||e.fa_datum_splatnosti,fa_castka:n.fa_castka||e.fa_castka,fa_strediska_kod:n.fa_strediska_kod||e.fa_strediska_kod,fa_poznamka:n.fa_poznamka||e.fa_poznamka})),d&&d("\u2705 Data z ISDOC byla \xfasp\u011b\u0161n\u011b na\u010dtena\n\n\u010c\xedslo faktury: ".concat(n.fa_cislo_vema,"\n\u010c\xe1stka: ").concat(n.fa_castka," K\u010d"),{type:"success"})}catch(W){console.error("\u274c Chyba p\u0159i zpracov\xe1n\xed ISDOC:",W),d&&d("Chyba p\u0159i zpracov\xe1n\xed ISDOC: ".concat(W.message),{type:"error"})}},[ze,_,$e,d]),vn=(0,A.useCallback)(e=>{try{Ce(n=>{const o={};return e.variabilniSymbol&&(o.fa_cislo_vema=e.variabilniSymbol),e.datumVystaveni&&(o.fa_datum_vystaveni=e.datumVystaveni),e.datumSplatnosti&&(o.fa_datum_splatnosti=e.datumSplatnosti),e.castka&&(o.fa_castka=e.castka),(0,k.A)((0,k.A)({},n),o)}),console.log("\u2705 OCR data \xfasp\u011b\u0161n\u011b aplikov\xe1na do formul\xe1\u0159e:",e)}catch(W){console.error("\u274c Chyba p\u0159i aplikaci OCR dat:",W),d&&d("Chyba p\u0159i aplikaci OCR dat: ".concat(W.message),{type:"error"})}},[d]),gn=(0,A.useCallback)((e,n,o)=>{e.preventDefault(),e.stopPropagation();const r=e.clientX,t=e.clientY,a=(0,k.A)({},he),i=e=>{const n=e.clientX-r,i=e.clientY-t;xe(e=>{let r=(0,k.A)({},e);const t=320,s=200;if("move"===o)r.x=Math.max(0,Math.min(a.x+n,window.innerWidth-e.w)),r.y=Math.max(0,Math.min(a.y+i,window.innerHeight-e.h));else if("right"===o)r.w=Math.max(t,a.w+n);else if("left"===o){const e=Math.max(t,a.w-n);e>t&&(r.w=e,r.x=a.x+n)}else if("top"===o){const e=Math.max(s,a.h-i);e>s&&(r.h=e,r.y=a.y+i)}else if("bottom"===o)r.h=Math.max(s,a.h+i);else if("top-left"===o){const e=Math.max(t,a.w-n),o=Math.max(s,a.h-i);e>t&&(r.w=e,r.x=a.x+n),o>s&&(r.h=o,r.y=a.y+i)}else if("top-right"===o){const e=Math.max(s,a.h-i);r.w=Math.max(t,a.w+n),e>s&&(r.h=e,r.y=a.y+i)}else if("bottom-left"===o){const e=Math.max(t,a.w-n);r.h=Math.max(s,a.h+i),e>t&&(r.w=e,r.x=a.x+n)}else"bottom-right"===o&&(r.w=Math.max(t,a.w+n),r.h=Math.max(s,a.h+i));return r})},s=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)},[he]),bn=()=>{o(-1)},_n=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.value)||e,yn=e=>{let{values:n=[],onChange:o,options:r=[],placeholder:t,disabled:a=!1}=e;const i=Array.isArray(n)?n:[],s=Oe.strediska,l=Ne.strediska||"",d=(0,A.useRef)(null),c=(0,A.useRef)(null),m=(0,A.useRef)(null),p=((e,n)=>{if(!n)return e;const o=n.toLowerCase();return e.filter(e=>(e.label||e).toLowerCase().includes(o))})(r,l);(0,A.useEffect)(()=>{if(!s)return;const e=e=>{d.current&&c.current&&!d.current.contains(e.target)&&!c.current.contains(e.target)&&Ie(e=>(0,k.A)((0,k.A)({},e),{},{strediska:!1}))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),(0,A.useEffect)(()=>{if(s&&c.current&&d.current){const e=()=>{if(!c.current||!d.current)return;const e=c.current.getBoundingClientRect(),n=d.current;n.style.left=e.left+"px",n.style.width=e.width+"px",n.style.top=e.bottom+2+"px"};return e(),window.addEventListener("scroll",e,{passive:!0,capture:!0}),window.addEventListener("resize",e,{passive:!0}),()=>{window.removeEventListener("scroll",e,{capture:!0}),window.removeEventListener("resize",e)}}},[s]),(0,A.useEffect)(()=>{s&&m.current&&setTimeout(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},100)},[s]);const u=i.length>0?i.map(e=>{const n=r.find(n=>n.value===e||n===e);return n?_n(n):e}).join(", "):t;return(0,V.jsxs)(ea,{isOpen:s,children:[(0,V.jsx)(na,{ref:c,onClick:()=>{return!a&&(e="strediska",void Ie(n=>(0,k.A)((0,k.A)({},n),{},{[e]:!n[e]})));var e},disabled:a,placeholder:0===i.length?"true":"false",value:i.length>0?"selected":"",isOpen:s,children:(0,V.jsx)(oa,{isEmpty:0===i.length,children:u})}),s&&!a&&(0,V.jsxs)(ra,{ref:d,children:[(0,V.jsxs)(ta,{children:[(0,V.jsx)(ia,{children:(0,V.jsx)(ln.A,{size:16})}),(0,V.jsx)(aa,{ref:m,type:"text",placeholder:"Vyhledat st\u0159edisko...",value:l,onChange:e=>De(n=>(0,k.A)((0,k.A)({},n),{},{strediska:e.target.value}))})]}),p.map((e,n)=>{const r=e.value||e,t=i.includes(r);return(0,V.jsxs)(sa,{level:e.level||0,onClick:()=>(e=>{const n=e.value||e,r=i.includes(n)?i.filter(e=>e!==n):[...i,n];o({target:{value:r}})})(e),children:[(0,V.jsx)("input",{type:"checkbox",checked:t,readOnly:!0}),(0,V.jsx)("span",{children:_n(e)})]},e.value||n)}),0===p.length&&(0,V.jsx)("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af"},children:"\u017d\xe1dn\xe9 st\u0159edisko nenalezeno"})]})]})},jn=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(lt,{children:[(0,V.jsxs)(dt,{children:[(0,V.jsx)(E.g,{icon:te?O.MT7:O.p4e}),te?"Upravit fakturu":"Zaevidovat fakturu"]}),(0,V.jsxs)(ct,{children:[l("ADMIN")&&(0,V.jsxs)(ut,{ref:Ae,onMouseEnter:()=>{if(je(!0),Ae.current){const e=Ae.current.getBoundingClientRect(),n=350;let o=e.right-n;o<10&&(o=10),o+n>window.innerWidth-10&&(o=window.innerWidth-n-10),we({top:e.bottom+10,left:o})}},onMouseLeave:()=>je(!1),children:[(0,V.jsxs)(mt,{onClick:()=>{je(!1),fe(!ue)},title:ue?"Zav\u0159\xedt Spisovka InBox":"Otev\u0159\xedt Spisovka InBox",style:{backgroundColor:ue?"rgba(16, 185, 129, 0.2)":"transparent",color:ue?"#10b981":"#9ca3af"},children:[(0,V.jsx)(E.g,{icon:O.ReK}),ve>0&&(0,V.jsx)(pt,{children:ve})]}),(0,V.jsxs)(ft,{show:ye&&be.length>0,$top:ke.top,$left:ke.left,children:[(0,V.jsx)(ht,{children:"Posledn\xedch 5 z\xe1znam\u016f"}),be.map(e=>(0,V.jsxs)(xt,{children:[(0,V.jsx)(vt,{children:e.nazev}),(0,V.jsxs)(gt,{children:[(0,V.jsxs)("span",{children:["\ud83d\udcce ",e.pocet_priloh," p\u0159\xedlohy"]}),(0,V.jsxs)("span",{children:["#",e.dokument_id]})]})]},e.dokument_id))]})]}),(0,V.jsx)(mt,{onClick:()=>{h(e=>!e)},title:f?"Norm\xe1ln\xed re\u017eim":"Cel\xe1 obrazovka",children:(0,V.jsx)(E.g,{icon:f?O.gr3:O.oZK})}),(0,V.jsx)(mt,{onClick:bn,title:"Zav\u0159\xedt a vr\xe1tit se na seznam faktur",children:(0,V.jsx)(E.g,{icon:O.GRI})})]})]}),(0,V.jsxs)(bt,{$fullscreen:f,children:[(0,V.jsxs)(_t,{children:[(0,V.jsxs)(yt,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[(0,V.jsxs)(Ct,{style:{margin:0},children:[(0,V.jsx)(E.g,{icon:O.$O8}),"\xdadaje faktury",te&&(0,V.jsxs)("span",{style:{marginLeft:"1rem",color:"#6b7280",fontSize:"0.9rem",fontWeight:400},children:["- Re\u017eim \xfaprav #",te]})]}),te&&(0,V.jsxs)("button",{onClick:()=>{ae(null),Ee([]),Ge(null),qe(!1),ce(!1),pe(!1),K({});const e=J.trim().length>0;Ce({order_id:e?"":ze.order_id,smlouva_id:e?null:ze.smlouva_id,fa_cislo_vema:"",fa_typ:"BEZNA",fa_datum_doruceni:at(new Date),fa_datum_vystaveni:"",fa_datum_splatnosti:"",fa_castka:"",fa_poznamka:"",fa_strediska_kod:[],file:null,fa_predana_zam_id:null,fa_datum_predani_zam:"",fa_datum_vraceni_zam:""}),e&&(y(null),w(null),H(""),ee(!1)),o(r.pathname,{replace:!0,state:{}}),d&&d("\u2728 Formul\xe1\u0159 resetov\xe1n pro novou fakturu","info")},style:{background:"#dc2626",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},title:"Zru\u0161it \xfapravy a vr\xe1tit se k nov\xe9mu z\xe1znamu",children:[(0,V.jsx)(E.g,{icon:O.GRI})," Zru\u0161it \xfapravu"]})]}),(0,V.jsxs)(jt,{children:[W&&(0,V.jsxs)(Vt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),W]}),(0,V.jsxs)(St,{$isEditing:!0,children:[(0,V.jsx)(Et,{$columns:"1fr",children:(0,V.jsxs)(Ot,{children:[(0,V.jsx)(It,{children:"smlouva"===S?"N\xe1zev smlouvy":"P\u0159edm\u011bt objedn\xe1vky"}),(0,V.jsx)("div",{style:{minHeight:"62px",padding:"0.75rem",display:"flex",alignItems:"center",background:_||j?"#f0f9ff":"#f9fafb",border:_||j?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",color:_||j?"#1e40af":"#9ca3af",fontWeight:_||j?"600":"400",fontSize:"0.95rem",boxSizing:"border-box"},children:"order"===S&&_?_.predmet||"\u2014":"smlouva"===S&&j&&(j.nazev_smlouvy||j.nazev)||"\u2014"})]})}),(0,V.jsxs)(Et,{$columns:"2fr 1fr 1fr",children:[(0,V.jsxs)(Ot,{style:{width:"100%"},children:[(0,V.jsx)(It,{children:"Vyberte objedn\xe1vku nebo smlouvu"}),(0,V.jsxs)(Ut,{className:"autocomplete-wrapper",style:{width:"100%",position:"relative"},children:[te&&me&&(ze.order_id||ze.smlouva_id)&&!de&&(0,V.jsx)("div",{onClick:()=>{le({isOpen:!0,title:"\u26a0\ufe0f Zm\u011bna objedn\xe1vky/smlouvy",message:(0,V.jsxs)("div",{style:{lineHeight:"1.6"},children:[(0,V.jsx)("p",{style:{marginBottom:"1rem",fontWeight:600},children:"Opravdu chcete zm\u011bnit p\u0159i\u0159azen\xed faktury k jin\xe9 objedn\xe1vce nebo smlouv\u011b?"}),(0,V.jsxs)("div",{style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[(0,V.jsx)("strong",{style:{color:"#92400e"},children:"\u26a0\ufe0f VAROV\xc1N\xcd - Mo\u017en\xe9 dopady:"}),(0,V.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.25rem",color:"#78350f"},children:[(0,V.jsxs)("li",{children:["P\u016fvodn\xed objedn\xe1vka m\u016f\u017ee b\xfdt vr\xe1cena na ",(0,V.jsx)("strong",{children:"v\u011bcnou spr\xe1vnost"})]}),(0,V.jsxs)("li",{children:["M\u016f\u017ee doj\xedt ke zm\u011bn\u011b ",(0,V.jsx)("strong",{children:"workflow stavu"})," objedn\xe1vky"]}),(0,V.jsxs)("li",{children:["\u010c\xe1stka faktury ovlivn\xed ",(0,V.jsx)("strong",{children:"\u010derp\xe1n\xed rozpo\u010dtu"})," nov\xe9 entity"]}),(0,V.jsx)("li",{children:"Historie a notifikace budou nav\xe1z\xe1ny na novou entitu"})]})]}),(0,V.jsx)("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Po odem\u010den\xed budete moci vybrat jinou objedn\xe1vku nebo smlouvu."})]}),onConfirm:()=>{ce(!0),le({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null})},onCancel:()=>{le({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null})}})},style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#f59e0b",fontSize:"0.875rem",zIndex:1,cursor:"pointer",transition:"color 0.2s"},onMouseEnter:e=>e.currentTarget.style.color="#d97706",onMouseLeave:e=>e.currentTarget.style.color="#f59e0b",title:"Klikn\u011bte pro odem\u010den\xed zm\u011bny objedn\xe1vky/smlouvy",children:(0,V.jsx)(E.g,{icon:O.DW4})}),(0,V.jsx)(Zt,{type:"text",value:J,onChange:e=>{const n=e.target.value;H(n),ee(!0),n!==J&&(Ce(e=>(0,k.A)((0,k.A)({},e),{},{order_id:""})),y(null))},onFocus:()=>ee(!0),disabled:!!t||te&&me&&(ze.order_id||ze.smlouva_id)&&!de,placeholder:"Za\u010dn\u011bte ps\xe1t ev. \u010d\xedslo objedn\xe1vky nebo smlouvy (min. 3 znaky)...",style:{width:"100%",paddingLeft:te&&me&&(ze.order_id||ze.smlouva_id)&&!de?"2.5rem":"0.75rem",paddingRight:J?"2.5rem":"0.75rem"}}),J&&(0,V.jsx)(Kt,{type:"button",onClick:()=>{H(""),G([]),ee(!1),Ce(e=>(0,k.A)((0,k.A)({},e),{},{order_id:"",smlouva_id:null})),y(null),w(null),F("order")},title:"Vymazat text",children:(0,V.jsx)(E.g,{icon:O.GRI})}),Q&&J&&(0,V.jsx)(Jt,{children:X?(0,V.jsxs)(Qt,{children:[(0,V.jsx)(E.g,{icon:O.p4e,spin:!0})," Vyhled\xe1v\xe1m..."]}):J.length<3?(0,V.jsxs)(qt,{children:[(0,V.jsx)(E.g,{icon:O.MjD,style:{marginRight:"0.5rem"}}),"Zadejte alespo\u0148 3 znaky pro vyhled\xe1v\xe1n\xed"]}):Y.length>0?Y.map(e=>{const n="order"===e._type,o="smlouva"===e._type;if(n){const n=e.stav||"",o=(e=>{const n=(e||"").toLowerCase();return n.includes("dokon\u010den")||n.includes("zkontrolovan")?{bg:"#d1fae5",text:"#065f46"}:n.includes("fakturac")||n.includes("v\u011bcn\xe1 spr\xe1vnost")?{bg:"#dbeafe",text:"#1e40af"}:n.includes("odeslan")||n.includes("potvr")?{bg:"#e0e7ff",text:"#3730a3"}:n.includes("schval")?{bg:"#fef3c7",text:"#92400e"}:{bg:"#e5e7eb",text:"#374151"}})(n);return(0,V.jsxs)(Ht,{onClick:()=>(async e=>{const n=e.cislo_objednavky||e.evidencni_cislo||"#".concat(e.id);dn.default.setCurrentUser(s);const o=await dn.default.loadDraft();if(o&&o.formData&&parseInt(o.formData.id)===parseInt(e.id)){const n=o.formData.cislo_objednavky||o.formData.evidencni_cislo||"#".concat(e.id);return void le({isOpen:!0,title:"\u26a0\ufe0f Objedn\xe1vka je otev\u0159en\xe1 na formul\xe1\u0159i",message:"Objedn\xe1vka ".concat(n," je pr\xe1v\u011b otev\u0159en\xe1 v edita\u010dn\xedm formul\xe1\u0159i.\n\n\u26a0\ufe0f NEJD\u0158\xcdVE JI ZAV\u0158ETE!\n\nTeprve pot\xe9 m\u016f\u017eete p\u0159id\xe1vat nebo aktualizovat faktury."),onConfirm:()=>{le({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null})},onCancel:null})}b(!0);try{var r;const o=await(0,R.Hj)(e.id,a,i,!1);if(!0===(null===o||void 0===o||null===(r=o.lock_info)||void 0===r?void 0:r.locked)){const e=o.lock_info,r=e.locked_by_user_fullname||"u\u017eivatel #".concat(e.locked_by_user_id);return b(!1),void le({isOpen:!0,title:"\ud83d\udd12 Objedn\xe1vka je zam\u010den\xe1",message:"Objedn\xe1vka ".concat(n," je pr\xe1v\u011b otev\u0159en\xe1 na editaci u\u017eivatelem ").concat(r,".\n\n\u26a0\ufe0f NEJD\u0158\xcdVE MUS\xcd ").concat(r.toUpperCase()," ZAV\u0158\xcdT OBJEDN\xc1VKU!\n\nObjedn\xe1vka je zam\u010den\xe1 a nelze ji zpracov\xe1vat, dokud ji jin\xfd u\u017eivatel uzamkl pro editaci."),onConfirm:()=>{le({isOpen:!1,title:"",message:"",onConfirm:null,onCancel:null})},onCancel:null})}}catch(t){console.warn("\u26a0\ufe0f Nepoda\u0159ilo se zkontrolovat lock status:",t)}finally{b(!1)}rn(e,n)})(e),children:[(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.5rem"},children:[(0,V.jsxs)(Yt,{style:{flex:1},children:[(0,V.jsx)(Xt,{$color:"#3b82f6",$textColor:"white",style:{marginRight:"0.5rem"},children:"OBJ"}),e.cislo_objednavky||e.evidencni_cislo||"#".concat(e.id),n&&(0,V.jsx)(Xt,{$color:o.bg,$textColor:o.text,style:{marginLeft:"0.5rem"},children:n}),e.max_cena_s_dph&&(0,V.jsxs)(Xt,{$color:"#fef3c7",$textColor:"#92400e",style:{marginLeft:"0.5rem"},children:[parseFloat(e.max_cena_s_dph).toLocaleString("cs-CZ")," K\u010d"]})]}),void 0!==e.pocet_faktur&&(0,V.jsxs)(Xt,{$color:e.pocet_faktur>0?"#e0f2fe":"#f1f5f9",$textColor:e.pocet_faktur>0?"#0369a1":"#64748b",style:{flexShrink:0,display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,V.jsx)(E.g,{icon:O.p4e,style:{fontSize:"0.7rem"}}),e.pocet_faktur||0]})]}),(0,V.jsxs)(Gt,{children:[e.predmet&&(0,V.jsxs)("span",{children:[(0,V.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",e.predmet]}),e.dodavatel_nazev&&(0,V.jsxs)("span",{children:[(0,V.jsx)("strong",{children:e.dodavatel_nazev}),e.dodavatel_ico&&" (I\u010cO: ".concat(e.dodavatel_ico,")")]})]})]},"order-".concat(e.id))}return o?(0,V.jsxs)(Ht,{onClick:()=>{F("smlouva"),en(e.id),ee(!1)},children:[(0,V.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.5rem"},children:(0,V.jsxs)(Yt,{style:{flex:1},children:[(0,V.jsx)(Xt,{$color:"#10b981",$textColor:"white",style:{marginRight:"0.5rem"},children:"SML"}),e.cislo_smlouvy,e.hodnota_s_dph&&(0,V.jsxs)(Xt,{$color:"#fef3c7",$textColor:"#92400e",style:{marginLeft:"0.5rem"},children:[parseFloat(e.hodnota_s_dph).toLocaleString("cs-CZ")," K\u010d"]})]})}),(0,V.jsxs)(Gt,{children:[e.nazev_smlouvy&&(0,V.jsxs)("span",{children:[(0,V.jsx)("strong",{children:"N\xe1zev:"})," ",e.nazev_smlouvy]}),e.nazev_firmy&&(0,V.jsxs)("span",{children:[(0,V.jsx)("strong",{children:e.nazev_firmy}),e.ico&&" (I\u010cO: ".concat(e.ico,")")]})]})]},"smlouva-".concat(e.id)):null}):(0,V.jsxs)(qt,{children:[(0,V.jsx)(E.g,{icon:O.MjD,style:{marginRight:"0.5rem"}}),"\u017d\xe1dn\xe9 objedn\xe1vky ani smlouvy nenalezeny",(0,V.jsx)("div",{style:{fontSize:"0.75rem",marginTop:"0.5rem",color:"#9ca3af"},children:"Hledaj\xed se odeslan\xe9 objedn\xe1vky a aktivn\xed smlouvy"})]})})]}),(0,V.jsx)(Ft,{children:t?"Objedn\xe1vka je p\u0159edvypln\u011bna z kontextu":"Nepovinn\xe9 - pokud faktura nen\xed v\xe1z\xe1na na objedn\xe1vku ani smlouvu, nechte pr\xe1zdn\xe9"})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsx)(It,{children:"smlouva"===S?"Platnost do":"Datum vytvo\u0159en\xed"}),(0,V.jsx)("div",{style:{height:"48px",padding:"1px 0.875rem",display:"flex",alignItems:"center",background:_||j?"#fef3c7":"#f9fafb",border:_||j?"2px solid #f59e0b":"2px solid #e5e7eb",borderRadius:"8px",color:_||j?"#92400e":"#9ca3af",fontWeight:_||j?"600":"400",fontSize:"0.875rem",boxSizing:"border-box"},children:(()=>{if(_){const e=_.dt_objednavky||_.datum_objednavky||_.created_at||_.dt_vytvoreni||_.datum_vytvoreni;if(e)return(0,M.iS)(e)}return j&&j.platnost_do?(0,M.iS)(j.platnost_do):"\u2014"})()})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsx)(It,{children:"smlouva"===S?"Celkem pln\u011bn\xed s DPH":"Celkov\xe1 cena"}),(0,V.jsx)("div",{style:{height:"48px",padding:"1px 0.875rem",display:"flex",alignItems:"center",justifyContent:"flex-end",background:_||j?"#f0fdf4":"#f9fafb",border:_||j?"2px solid #10b981":"2px solid #e5e7eb",borderRadius:"8px",color:_||j?"#065f46":"#9ca3af",fontWeight:_||j?"700":"400",fontSize:"0.875rem",boxSizing:"border-box"},children:(()=>{let e=null;return"order"===S&&null!==_&&void 0!==_&&_.max_cena_s_dph?e=_.max_cena_s_dph:"smlouva"===S&&j&&(e=j.hodnota_s_dph||j.celkova_castka),e?new Intl.NumberFormat("cs-CZ",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(e))+" K\u010d":"\u2014"})()})]})]}),(0,V.jsxs)(Et,{$columns:"1fr 1fr 1fr",children:[(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{children:["Datum doru\u010den\xed ",(0,V.jsx)(Nt,{children:"*"})]}),(0,V.jsx)(tn.A,{value:ze.fa_datum_doruceni,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_doruceni:e})),onBlur:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_doruceni:e})),placeholder:"dd.mm.rrrr",hasError:!!Z.fa_datum_doruceni}),Z.fa_datum_doruceni&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),Z.fa_datum_doruceni]})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{children:["Datum vystaven\xed ",(0,V.jsx)(Nt,{children:"*"})]}),(0,V.jsx)(tn.A,{value:ze.fa_datum_vystaveni,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_vystaveni:e})),onBlur:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_vystaveni:e})),placeholder:"dd.mm.rrrr",hasError:!!Z.fa_datum_vystaveni}),Z.fa_datum_vystaveni&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),Z.fa_datum_vystaveni]})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{children:["Datum splatnosti ",(0,V.jsx)(Nt,{children:"*"})]}),(0,V.jsx)(tn.A,{value:ze.fa_datum_splatnosti,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_splatnosti:e})),onBlur:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_splatnosti:e})),placeholder:"dd.mm.rrrr",hasError:!!Z.fa_datum_splatnosti}),Z.fa_datum_splatnosti&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),Z.fa_datum_splatnosti]})]})]}),(0,V.jsxs)(Et,{$columns:"minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr)",$gap:"1rem",children:[(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{children:["Typ faktury ",(0,V.jsx)(Nt,{children:"*"})]}),(0,V.jsx)(an.A,{field:"fa_typ",value:ze.fa_typ,onChange:e=>{console.log("\ud83d\udd0d FA_TYP CHANGE:",e.target.value,typeof e.target.value),Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_typ:e.target.value}))},options:[{id:"BEZNA",nazev:"B\u011b\u017en\xe1 faktura"},{id:"ZALOHOVA",nazev:"Z\xe1lohov\xe1 faktura"},{id:"OPRAVNA",nazev:"Opravn\xe1 faktura"},{id:"PROFORMA",nazev:"Proforma"},{id:"DOBROPIS",nazev:"Dobropis"}],placeholder:"-- Vyberte typ --",required:!0,selectStates:Oe,setSelectStates:Ie,searchStates:Ne,setSearchStates:De,touchedSelectFields:Te,setTouchedSelectFields:Re,toggleSelect:e=>Ie(n=>(0,k.A)((0,k.A)({},n),{},{[e]:!n[e]})),filterOptions:(e,n)=>n?e.filter(e=>{var o;return null===(o=e.nazev)||void 0===o?void 0:o.toLowerCase().includes(n.toLowerCase())}):e,getOptionLabel:e=>(null===e||void 0===e?void 0:e.nazev)||""})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsxs)("span",{children:["Variabiln\xed symbol ",(0,V.jsx)(Nt,{children:"*"})]}),ze.fa_cislo_vema&&(0,V.jsx)("button",{type:"button",onClick:()=>Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_cislo_vema:""})),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",fontSize:"0.875rem"},onMouseEnter:e=>e.currentTarget.style.color="#6b7280",onMouseLeave:e=>e.currentTarget.style.color="#9ca3af",title:"Vymazat variabiln\xed symbol",children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),(0,V.jsx)(Rt,{type:"text",name:"fa_cislo_vema",value:ze.fa_cislo_vema,onChange:on,placeholder:"12345678",$hasError:!!Z.fa_cislo_vema}),Z.fa_cislo_vema&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),Z.fa_cislo_vema]})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsxs)("span",{children:["\u010c\xe1stka v\u010d. DPH ",(0,V.jsx)(Nt,{children:"*"})]}),ze.fa_castka&&(0,V.jsx)("button",{type:"button",onClick:()=>Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_castka:""})),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",fontSize:"0.875rem"},onMouseEnter:e=>e.currentTarget.style.color="#6b7280",onMouseLeave:e=>e.currentTarget.style.color="#9ca3af",title:"Vymazat \u010d\xe1stku",children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),(0,V.jsxs)(Dt,{children:[(0,V.jsx)(Rt,{type:"text",name:"fa_castka",value:ze.fa_castka,onChange:on,placeholder:"25 000,50",style:{textAlign:"right",paddingRight:"40px",width:"100%"},$hasError:!!Z.fa_castka}),(0,V.jsx)(Tt,{children:"K\u010d"})]}),Z.fa_castka&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),Z.fa_castka]})]})]}),(0,V.jsx)(Et,{$columns:"1fr",children:(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsx)("span",{children:"St\u0159ediska"}),ze.fa_strediska_kod&&ze.fa_strediska_kod.length>0&&(0,V.jsx)("button",{type:"button",onClick:()=>Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_strediska_kod:[]})),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",fontSize:"0.875rem"},onMouseEnter:e=>e.currentTarget.style.color="#6b7280",onMouseLeave:e=>e.currentTarget.style.color="#9ca3af",title:"Vymazat st\u0159ediska",children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),(0,V.jsx)(yn,{values:ze.fa_strediska_kod,onChange:e=>{Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_strediska_kod:e.target.value}))},options:$e,placeholder:Le?"Na\u010d\xedt\xe1m st\u0159ediska...":"Vyberte st\u0159ediska...",disabled:Le})]})}),(0,V.jsx)(Et,{$columns:"1fr",children:(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsx)("span",{children:"Pozn\xe1mka"}),ze.fa_poznamka&&(0,V.jsx)("button",{type:"button",onClick:()=>Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_poznamka:""})),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",fontSize:"0.875rem"},onMouseEnter:e=>e.currentTarget.style.color="#6b7280",onMouseLeave:e=>e.currentTarget.style.color="#9ca3af",title:"Vymazat pozn\xe1mku",children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),(0,V.jsx)($t,{name:"fa_poznamka",value:ze.fa_poznamka,onChange:on,placeholder:"Voliteln\xe1 pozn\xe1mka..."})]})}),(0,V.jsx)(rt.r6,{fakturaId:te||"temp-new-invoice",objednavkaId:ze.order_id||null,fakturaTypyPrilohOptions:Me,readOnly:!1,onISDOCParsed:xn,formData:ze,faktura:{fa_cislo_vema:ze.fa_cislo_vema,fa_datum_vystaveni:ze.fa_datum_vystaveni,fa_datum_splatnosti:ze.fa_datum_splatnosti,fa_castka:ze.fa_castka,fa_strediska_kod:ze.fa_strediska_kod},validateInvoiceForAttachments:fn,attachments:Se,onAttachmentsChange:pn,onAttachmentUploaded:un,onCreateInvoiceInDB:hn,onOCRDataExtracted:vn}),(0,V.jsx)("div",{style:{borderTop:"2px solid #e5e7eb",margin:"1.5rem 0",position:"relative"},children:(0,V.jsx)("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",background:"#f9fafb",padding:"0 1rem",fontSize:"0.875rem",color:"#6b7280",fontWeight:600},children:"Dopl\u0148uj\xedc\xed \xfadaje (nepovinn\xe9)"})}),(0,V.jsxs)(Et,{$columns:"1fr 1fr",children:[(0,V.jsxs)(Ot,{children:[(0,V.jsx)(It,{children:"Datum p\u0159ed\xe1n\xed"}),(0,V.jsx)(tn.A,{value:ze.fa_datum_predani_zam,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_predani_zam:e})),onBlur:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_predani_zam:e})),placeholder:"dd.mm.rrrr"})]}),(0,V.jsxs)(Ot,{children:[(0,V.jsx)(It,{children:"Datum vr\xe1cen\xed"}),(0,V.jsx)(tn.A,{value:ze.fa_datum_vraceni_zam,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_vraceni_zam:e})),onBlur:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_datum_vraceni_zam:e})),placeholder:"dd.mm.rrrr"}),ze.fa_datum_predani_zam&&ze.fa_datum_vraceni_zam&&new Date(ze.fa_datum_vraceni_zam)<new Date(ze.fa_datum_predani_zam)&&(0,V.jsxs)(Wt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),"Datum vr\xe1cen\xed nem\u016f\u017ee b\xfdt d\u0159\xedv\u011bj\u0161\xed ne\u017e datum p\u0159ed\xe1n\xed"]})]})]}),(0,V.jsx)(Et,{$columns:"1fr",children:(0,V.jsxs)(Ot,{children:[(0,V.jsxs)(It,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsx)("span",{children:"P\u0159ed\xe1no zam\u011bstnanci"}),ze.fa_predana_zam_id&&(0,V.jsx)("button",{type:"button",onClick:()=>Ce(e=>(0,k.A)((0,k.A)({},e),{},{fa_predana_zam_id:null,fa_datum_predani_zam:"",fa_datum_vraceni_zam:""})),style:{background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",fontSize:"0.875rem"},onMouseEnter:e=>e.currentTarget.style.color="#6b7280",onMouseLeave:e=>e.currentTarget.style.color="#9ca3af",title:"Vymazat zam\u011bstnance (v\u010detn\u011b datum\u016f p\u0159ed\xe1n\xed/vr\xe1cen\xed)",children:(0,V.jsx)(E.g,{icon:O.GRI})})]}),(0,V.jsx)(an.A,{value:ze.fa_predana_zam_id,onChange:e=>Ce(n=>(0,k.A)((0,k.A)({},n),{},{fa_predana_zam_id:e.target.value?parseInt(e.target.value):null})),options:Ue,placeholder:Je?"Na\u010d\xedt\xe1m zam\u011bstnance...":"-- Nevybr\xe1no --",disabled:Je,field:"fa_predana_zam_id",selectStates:Oe,setSelectStates:Ie,searchStates:Ne,setSearchStates:De,touchedSelectFields:Te,setTouchedSelectFields:Re,toggleSelect:e=>Ie(n=>(0,k.A)((0,k.A)({},n),{},{[e]:!n[e]})),filterOptions:(e,n)=>n?e.filter(e=>"".concat(e.prijmeni||""," ").concat(e.jmeno||""," ").concat(e.titul_za||"").toLowerCase().includes(n.toLowerCase())):e,getOptionLabel:e=>e?"".concat(e.prijmeni||""," ").concat(e.jmeno||""," ").concat(e.titul_za?", ".concat(e.titul_za):"").trim():"",allowEmpty:!0}),Je&&(0,V.jsxs)("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"0.5rem"},children:[(0,V.jsx)(E.g,{icon:O.z1G,spin:!0})," Na\u010d\xedt\xe1m zam\u011bstnance..."]})]})})]}),te&&ze.order_id&&_&&u(_).allowed&&(0,V.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"3px solid #f59e0b",borderRadius:"12px",padding:"1.25rem",marginBottom:"1.5rem",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.25)"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[(0,V.jsx)("div",{style:{background:"#f59e0b",color:"white",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},children:(0,V.jsx)(E.g,{icon:O.zpE})}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsx)("div",{style:{fontWeight:700,color:"#92400e",fontSize:"1.1rem",marginBottom:"0.5rem"},children:"\u26a0\ufe0f D\u016eLE\u017dIT\xc9: Aktualizace faktury v\xe1zan\xe9 na objedn\xe1vku"}),(0,V.jsxs)("div",{style:{fontSize:"0.95rem",color:"#78350f",lineHeight:"1.6"},children:["Editace faktury v\xe1zan\xe9 na objedn\xe1vku ",(0,V.jsx)("strong",{children:_.cislo_objednavky||_.evidencni_cislo})," zp\u016fsob\xed, \u017ee objedn\xe1vka bude muset znovu proj\xedt ",(0,V.jsx)("strong",{children:"v\u011bcnou spr\xe1vnost\xed"})," a kontrolou."]})]})]}),(0,V.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"6px",padding:"0.75rem",fontSize:"0.9rem",color:"#78350f"},children:[(0,V.jsx)("strong",{children:"Co se stane po ulo\u017een\xed:"}),(0,V.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",paddingLeft:0},children:[(0,V.jsxs)("li",{children:["Objedn\xe1vka bude vr\xe1cena do stavu ",(0,V.jsx)("strong",{children:'"V\u011bcn\xe1 spr\xe1vnost"'})]}),(0,V.jsx)("li",{children:"Objednatel, garant a schvalovatel obdr\u017e\xed notifikaci"}),(0,V.jsx)("li",{children:"Bude nutn\xe9 prov\xe9st novou kontrolu a schv\xe1len\xed"})]})]})]}),ze.order_id&&_&&!u(_).allowed&&(0,V.jsxs)("div",{style:{background:te?"#fee2e2":"#fef3c7",border:te?"3px solid #dc2626":"2px solid #f59e0b",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[(0,V.jsx)(E.g,{icon:O.zpE,style:{color:te?"#dc2626":"#f59e0b",marginTop:"0.25rem",fontSize:"1.25rem"}}),(0,V.jsxs)("div",{style:{flex:1},children:[(0,V.jsxs)("div",{style:{fontWeight:600,color:te?"#991b1b":"#92400e",marginBottom:"0.25rem"},children:["\u26a0\ufe0f ",te?"Nelze aktualizovat fakturu u t\xe9to objedn\xe1vky":"Nelze p\u0159idat fakturu k t\xe9to objedn\xe1vce"]}),(0,V.jsx)("div",{style:{fontSize:"0.9rem",color:te?"#991b1b":"#78350f"},children:u(_).reason})]})]}),te&&Xe&&(0,V.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%)",border:"2px solid #fb923c",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,V.jsx)(E.g,{icon:O.zpE,style:{color:"#ea580c",fontSize:"1.25rem"}}),(0,V.jsxs)("div",{style:{flex:1,fontSize:"0.9rem",color:"#9a3412"},children:[(0,V.jsx)("strong",{children:"Pozor:"})," Zm\u011bnili jste kritick\xe9 pole faktury (\u010d\xe1stka, \u010d\xedslo, st\u0159edisko, typ nebo datum). Po ulo\u017een\xed bude nutn\xe9 ",(0,V.jsx)("strong",{children:"znovu schv\xe1lit v\u011bcnou spr\xe1vnost"}),"."]})]}),(0,V.jsxs)(Pt,{children:[(0,V.jsxs)(Lt,{$variant:"secondary",onClick:bn,disabled:x,children:[(0,V.jsx)(E.g,{icon:O.GRI}),"Zru\u0161it"]}),(0,V.jsxs)(Lt,{$variant:"primary",onClick:async()=>{if(U(null),K({}),ze.order_id&&_&&!te){const e=u(_);if(!e.allowed)return U(e.reason),void(d&&d(e.reason,"error"))}const e={};if(ze.fa_cislo_vema&&ze.fa_cislo_vema.trim()||(e.fa_cislo_vema="Vypl\u0148te \u010d\xedslo faktury"),ze.fa_typ||(e.fa_typ="Vyberte typ faktury"),ze.fa_datum_doruceni||(e.fa_datum_doruceni="Vypl\u0148te datum doru\u010den\xed"),ze.fa_datum_vystaveni||(e.fa_datum_vystaveni="Vypl\u0148te datum vystaven\xed"),ze.fa_datum_splatnosti||(e.fa_datum_splatnosti="Vypl\u0148te datum splatnosti"),(!ze.fa_castka||parseFloat(ze.fa_castka)<=0)&&(e.fa_castka="Vypl\u0148te platnou \u010d\xe1stku faktury"),ze.fa_datum_predani_zam&&ze.fa_datum_vraceni_zam){const n=new Date(ze.fa_datum_predani_zam);new Date(ze.fa_datum_vraceni_zam)<n&&(e.fa_datum_vraceni_zam="Datum vr\xe1cen\xed nem\u016f\u017ee b\xfdt d\u0159\xedv\u011bj\u0161\xed ne\u017e datum p\u0159ed\xe1n\xed")}if(Object.keys(e).length>0)return K(e),void U("Opravte pros\xedm chyby ve formul\xe1\u0159i p\u0159ed odesl\xe1n\xedm");v(!0),null===c||void 0===c||c(50);try{console.log("\ud83d\udd0d FORM DATA p\u0159ed API:",{fa_typ:ze.fa_typ,fa_typ_type:typeof ze.fa_typ});const e={token:a,username:i,order_id:ze.order_id||null,smlouva_id:ze.smlouva_id||null,fa_cislo_vema:ze.fa_cislo_vema,fa_typ:ze.fa_typ||"BEZNA",fa_datum_vystaveni:ze.fa_datum_vystaveni,fa_datum_splatnosti:ze.fa_datum_splatnosti||null,fa_datum_doruceni:ze.fa_datum_doruceni||null,fa_castka:ze.fa_castka,fa_poznamka:ze.fa_poznamka||"",fa_dorucena:ze.fa_datum_doruceni?1:0,fa_strediska_kod:JSON.stringify(ze.fa_strediska_kod||[]),fa_predana_zam_id:ze.fa_predana_zam_id||null,fa_datum_predani_zam:ze.fa_datum_predani_zam||null,fa_datum_vraceni_zam:ze.fa_datum_vraceni_zam||null};let r;if(console.log("\ud83d\udd0d API PARAMS:",{fa_typ:e.fa_typ,fa_typ_type:typeof e.fa_typ}),te){const e={objednavka_id:ze.order_id||null,smlouva_id:ze.smlouva_id||null,fa_cislo_vema:ze.fa_cislo_vema,fa_typ:ze.fa_typ||"BEZNA",fa_datum_vystaveni:ze.fa_datum_vystaveni,fa_datum_splatnosti:ze.fa_datum_splatnosti||null,fa_datum_doruceni:ze.fa_datum_doruceni||null,fa_castka:ze.fa_castka,fa_poznamka:ze.fa_poznamka||"",fa_dorucena:ze.fa_datum_doruceni?1:0,fa_predana_zam_id:ze.fa_predana_zam_id||null,fa_datum_predani_zam:ze.fa_datum_predani_zam||null,fa_datum_vraceni_zam:ze.fa_datum_vraceni_zam||null,fa_strediska_kod:JSON.stringify(ze.fa_strediska_kod||[])};r=await(0,T.Br)({token:a,username:i,invoice_id:te,updateData:e}),null===c||void 0===c||c(100),d&&d("\u2705 Faktura byla \xfasp\u011b\u0161n\u011b aktualizov\xe1na","success")}else r=ze.file?await(0,T.BG)((0,k.A)((0,k.A)({},e),{},{file:ze.file,klasifikace:ze.klasifikace||null})):await(0,T.We)(e),null===c||void 0===c||c(100),d&&d("\u2705 Faktura byla \xfasp\u011b\u0161n\u011b zaevidov\xe1na","success");if(ze.order_id&&_)try{let e=[];try{"string"===typeof _.stav_workflow_kod?e=JSON.parse(_.stav_workflow_kod):Array.isArray(_.stav_workflow_kod)&&(e=[..._.stav_workflow_kod])}catch(n){console.error("Chyba p\u0159i parsov\xe1n\xed workflow stav\u016f:",n),e=[]}const o=e.length>0?e[e.length-1]:null;let r=!1;te?"ZKONTROLOVANA"!==o&&"DOKONCENA"!==o||(e.pop(),"DOKONCENA"===o&&"ZKONTROLOVANA"===e[e.length-1]&&e.pop(),"VECNA_SPRAVNOST"!==e[e.length-1]&&e.push("VECNA_SPRAVNOST"),r=!0,console.log("\u26a0\ufe0f EDITACE FAKTURY: Objedn\xe1vka vr\xe1cena na v\u011bcnou spr\xe1vnost")):"NEUVEREJNIT"===o||"UVEREJNENA"===o?(e.push("FAKTURACE"),e.push("VECNA_SPRAVNOST"),r=!0):"FAKTURACE"===o?(e.push("VECNA_SPRAVNOST"),r=!0):"ZKONTROLOVANA"===o&&(e.pop(),r=!0),r&&(await(0,R.qA)(ze.order_id,{stav_workflow_kod:JSON.stringify(e),stav_objednavky:"V\u011bcn\xe1 spr\xe1vnost"},a,i),console.log("\u2705 Workflow objedn\xe1vky aktualizov\xe1no:",{oldState:o,newStates:e,newStatusText:"V\u011bcn\xe1 spr\xe1vnost"}),await(async(e,n)=>{try{const o=new Set;n.uzivatel_id?o.add(parseInt(n.uzivatel_id,10)):n.objednatel_id&&o.add(parseInt(n.objednatel_id,10)),n.garant_uzivatel_id&&o.add(parseInt(n.garant_uzivatel_id,10)),n.prikazce_id&&o.add(parseInt(n.prikazce_id,10));const r=Array.from(o).filter(e=>e&&!isNaN(e)&&e>0);if(0===r.length)return void console.warn("\u26a0\ufe0f \u017d\xe1dn\xed p\u0159\xedjemci notifikac\xed pro objedn\xe1vku:",e);await cn.lY.create({token:a,username:i,type:cn.I9.ORDER_STATUS_KONTROLA_CEKA,order_id:e,action_user_id:s,recipients:r}),console.log("\u2705 Notifikace o v\u011bcn\xe9 kontrole odesl\xe1ny:",{orderId:e,recipients:r,type:cn.I9.ORDER_STATUS_KONTROLA_CEKA})}catch(W){console.error("\u274c Chyba p\u0159i odes\xedl\xe1n\xed notifikac\xed:",W)}})(ze.order_id,_),await Qe(ze.order_id))}catch(o){console.error("\u26a0\ufe0f Nepoda\u0159ilo se aktualizovat workflow objedn\xe1vky:",o)}const t=!!te||J.trim().length>0;Ce({order_id:t?"":ze.order_id,smlouva_id:t?null:ze.smlouva_id,fa_cislo_vema:"",fa_typ:"BEZNA",fa_datum_doruceni:at(new Date),fa_datum_vystaveni:"",fa_datum_splatnosti:"",fa_castka:"",fa_poznamka:"",fa_strediska_kod:[],file:null,fa_predana_zam_id:null,fa_datum_predani_zam:"",fa_datum_vraceni_zam:""});const l=!!te;ae(null),Ee([]),t?(y(null),w(null),H(""),ee(!1),ce(!1),pe(!1)):l||ze.order_id&&_&&await Qe(ze.order_id),K({}),Ge(null),qe(!1)}catch(r){console.error("Error creating invoice:",r),U(r.message||"Chyba p\u0159i evidenci faktury"),d&&d(r.message||"Chyba p\u0159i evidenci faktury","error"),null===c||void 0===c||c(0)}finally{v(!1)}},disabled:x||ze.order_id&&_&&!u(_).allowed,title:ze.order_id&&_&&!u(_).allowed?u(_).reason:"",children:[(0,V.jsx)(E.g,{icon:x?O.zpE:O.hSh}),x?"Ukl\xe1d\xe1m...":te?"Aktualizovat fakturu":ze.order_id&&_?"P\u0159ipojit fakturu":"Zaevidovat fakturu"]})]})]})]}),(0,V.jsxs)(kt,{children:[(0,V.jsx)(wt,{children:(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",flex:1},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",paddingBottom:"12px",borderBottom:"smlouva"===S?"2px solid #10b981":"2px solid #3498db",marginBottom:"1rem"},children:[(0,V.jsxs)(Ct,{style:{margin:0,border:"none",paddingBottom:0,whiteSpace:"nowrap"},children:[(0,V.jsx)(E.g,{icon:"smlouva"===S?O.IJd:O.URI}),"smlouva"===S?"N\xe1hled smlouvy":"N\xe1hled objedn\xe1vky"]}),_&&"order"===S&&(0,V.jsx)("span",{style:{fontWeight:700,color:"#1e40af",fontSize:"1.05rem",whiteSpace:"nowrap"},children:_.cislo_objednavky||"#".concat(_.id)}),j&&"smlouva"===S&&(0,V.jsx)("span",{style:{fontWeight:700,color:"#059669",fontSize:"1.05rem",whiteSpace:"nowrap"},children:j.cislo_smlouvy||"#".concat(j.id)})]}),_&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[(0,V.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"0.4rem 0.75rem",background:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)",border:"2px solid #10b981",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,color:"#065f46",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",whiteSpace:"nowrap"},children:(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[(0,V.jsx)("div",{style:{fontSize:"0.6rem",opacity:.8,fontWeight:500},children:"STAV"}),(0,V.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:700},children:_.stav_objednavky||(null===(n=p(_))||void 0===n?void 0:n.replace(/_/g," "))||"N/A"})]})}),(0,V.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"0.4rem 0.75rem",background:"linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)",border:"2px solid #64748b",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,color:"#1e293b",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",whiteSpace:"nowrap"},children:(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[(0,V.jsx)("div",{style:{fontSize:"0.6rem",opacity:.8,fontWeight:500},children:"MAX CENA S DPH"}),(0,V.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:700},children:[parseFloat(_.max_cena_s_dph||0).toLocaleString("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2})," K\u010d"]})]})}),(0,V.jsx)("div",{onClick:()=>{const e=document.querySelector('[data-section="polozky"]');e&&e.scrollIntoView({behavior:"smooth",block:"start"})},style:{display:"flex",alignItems:"center",gap:"6px",padding:"0.4rem 0.75rem",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"2px solid #fbbf24",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 4px 8px rgba(251, 191, 36, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[(0,V.jsx)("div",{style:{fontSize:"0.6rem",opacity:.8,fontWeight:500},children:"POLO\u017dKY (DPH)"}),(0,V.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:700},children:[parseFloat(_.polozky_celkova_cena_s_dph||0).toLocaleString("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2})," K\u010d"]})]})}),(0,V.jsx)("div",{onClick:()=>{const e=document.querySelector('[data-section="faktury"]');e&&e.scrollIntoView({behavior:"smooth",block:"start"})},style:{display:"flex",alignItems:"center",gap:"6px",padding:"0.4rem 0.75rem",background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",border:"2px solid #3b82f6",borderRadius:"6px",fontSize:"0.7rem",fontWeight:600,color:"#1e40af",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[(0,V.jsx)("div",{style:{fontSize:"0.6rem",opacity:.8,fontWeight:500},children:"FAKTURY"}),(0,V.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:700},children:((null===(kn=_.faktury)||void 0===kn?void 0:kn.reduce((e,n)=>e+parseFloat(n.fa_castka||0),0))||0).toLocaleString("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2})+" K\u010d"})]})})]}),(0,V.jsxs)(At,{onClick:()=>{var e,n;oe?null===(e=ne.current)||void 0===e||e.expandAll():null===(n=ne.current)||void 0===n||n.collapseAll()},children:[(0,V.jsx)(E.g,{icon:oe?O.Jt$:O.w2A}),oe?"Rozbalit v\u0161e":"Sbalit v\u0161e"]})]})]})}),(0,V.jsxs)(zt,{children:[g&&(0,V.jsxs)(Bt,{children:[(0,V.jsx)(Mt,{}),(0,V.jsxs)("div",{children:["Na\u010d\xedt\xe1m ","smlouva"===S?"smlouvu":"objedn\xe1vku","..."]})]}),!g&&!_&&!j&&ze.order_id&&(0,V.jsxs)(Vt,{children:[(0,V.jsx)(E.g,{icon:O.zpE}),"Nepoda\u0159ilo se na\u010d\xedst objedn\xe1vku ID ",ze.order_id]}),!g&&!_&&!j&&!ze.order_id&&(0,V.jsxs)("div",{style:{color:"#94a3af",textAlign:"center",padding:"3rem"},children:[(0,V.jsx)(E.g,{icon:"smlouva"===S?O.IJd:O.URI,size:"3x",style:{marginBottom:"1rem",opacity:.3}}),(0,V.jsx)("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"smlouva"===S?"\u017d\xe1dn\xe1 smlouva nevybr\xe1na":"\u017d\xe1dn\xe1 objedn\xe1vka nevybr\xe1na"}),(0,V.jsx)("div",{style:{fontSize:"0.9rem"},children:'Za\u010dn\u011bte ps\xe1t do pole "Vyberte objedn\xe1vku nebo smlouvu"'})]}),!g&&_&&"order"===S&&(0,V.jsx)(se,{ref:ne,orderData:_,onCollapseChange:re,onEditInvoice:mn,canEditInvoice:u(_).allowed,token:a,username:i}),!g&&j&&"smlouva"===S&&(0,V.jsx)(Ke,{smlouvaData:j}),!1]})]})]})]});var kn;return(0,V.jsxs)(V.Fragment,{children:[f?(0,z.createPortal)((0,V.jsx)(st,{children:jn}),document.body):(0,V.jsx)(it,{children:jn}),ie.isOpen&&(0,z.createPortal)((0,V.jsx)(sn.A,{isOpen:ie.isOpen,title:ie.title,message:ie.message,confirmText:ie.onCancel?"Ano, pokra\u010dovat":"OK",cancelText:"Zru\u0161it",showCancel:!!ie.onCancel,variant:"warning",icon:O.zpE,onConfirm:()=>{ie.onConfirm&&ie.onConfirm()},onClose:ie.onCancel?()=>{ie.onCancel&&ie.onCancel()}:()=>{}}),document.body),l("ADMIN")&&ue&&(0,V.jsx)(Fo,{panelState:he,setPanelState:xe,beginDrag:gn,onClose:()=>fe(!1),onOCRDataExtracted:vn})]})}},39292:(e,n,o)=>{o.d(n,{A:()=>r});const r=(0,o(77784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},77220:(e,n,o)=>{o.d(n,{Bn:()=>g,Fl:()=>m,SJ:()=>u,aF:()=>h,gy:()=>d,hu:()=>l,iE:()=>s,oO:()=>v,pi:()=>p,pq:()=>c,sw:()=>b,vh:()=>f});var r=o(89379);const t=o(56263).A.create({baseURL:"".concat("https://erdms.zachranka.cz/api.eeo/"),headers:{"Content-Type":"application/json"}}),a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chyba serveru";if(!e.response)throw e.request?new Error("Server neodpov\xedd\xe1. Zkontrolujte p\u0159ipojen\xed."):new Error(e.message||n);{const{status:o,data:r}=e.response,t=(null===r||void 0===r?void 0:r.err)||(null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.message)||n;switch(o){case 401:throw new Error("Neplatn\xfd token. P\u0159ihlaste se znovu.");case 403:throw new Error("Nem\xe1te opr\xe1vn\u011bn\xed k t\xe9to akci.");case 404:throw new Error("Z\xe1znam nebyl nalezen.");default:throw new Error(t)}}},i=function(e){var n,o,r;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"operace";if(null!==(n=e.data)&&void 0!==n&&n.err)throw new Error(e.data.err);if("error"===(null===(o=e.data)||void 0===o?void 0:o.status))throw new Error(e.data.message||"".concat(t," se nezda\u0159ila"));if("ok"!==(null===(r=e.data)||void 0===r?void 0:r.status))throw new Error("".concat(t," se nezda\u0159ila - neplatn\xfd status"));return e.data};async function s(e){let{token:n,username:o,show_inactive:r=!1,usek_id:s=null,druh_smlouvy:l=null,stav:d=null,search:c=null,platnost_od:m=null,platnost_do:p=null,limit:u=1e3,offset:f=0}=e;try{const e={username:o,token:n,show_inactive:r,usek_id:s,druh_smlouvy:l,stav:d,search:c,platnost_od:m,platnost_do:p,limit:u,offset:f},a=await t.post("ciselniky/smlouvy/list",e);return i(a,"Na\u010d\xedt\xe1n\xed smluv")}catch(h){throw a(h,"Chyba p\u0159i na\u010d\xedt\xe1n\xed smluv"),h}}async function l(e){let{token:n,username:o,id:r}=e;try{const e=await t.post("ciselniky/smlouvy/detail",{username:o,token:n,id:r});return i(e,"Na\u010d\xedt\xe1n\xed detailu smlouvy").data||null}catch(s){throw a(s,"Chyba p\u0159i na\u010d\xedt\xe1n\xed detailu smlouvy"),s}}async function d(e){let{token:n,username:o,smlouvaData:s}=e;try{const e=await t.post("ciselniky/smlouvy/insert",(0,r.A)({username:o,token:n},s));return i(e,"Vytv\xe1\u0159en\xed smlouvy").data}catch(l){throw a(l,"Chyba p\u0159i vytv\xe1\u0159en\xed smlouvy"),l}}async function c(e){let{token:n,username:o,id:s,smlouvaData:l}=e;try{const e=await t.post("ciselniky/smlouvy/update",(0,r.A)({username:o,token:n,id:s},l));return i(e,"Aktualizace smlouvy").data}catch(d){throw a(d,"Chyba p\u0159i aktualizaci smlouvy"),d}}async function m(e){let{token:n,username:o,id:r}=e;try{const e=await t.post("ciselniky/smlouvy/delete",{username:o,token:n,id:r});return i(e,"Maz\xe1n\xed smlouvy").data}catch(s){throw a(s,"Chyba p\u0159i maz\xe1n\xed smlouvy"),s}}async function p(e){let{token:n,username:o,data:r,overwrite_existing:s=!1,nazev_souboru:l=null,typ_souboru:d=null,velikost_souboru:c=null}=e;try{const e=await t.post("ciselniky/smlouvy/bulk-import",{username:o,token:n,data:r,overwrite_existing:s,nazev_souboru:l,typ_souboru:d,velikost_souboru:c});return i(e,"Import smluv").data}catch(m){throw a(m,"Chyba p\u0159i importu smluv"),m}}async function u(e){let{token:n,username:o,cislo_smlouvy:r=null,usek_id:s=null}=e;try{const e=await t.post("ciselniky/smlouvy/prepocet-cerpani",{username:o,token:n,cislo_smlouvy:r,usek_id:s});return i(e,"P\u0159epo\u010det \u010derp\xe1n\xed").data}catch(l){throw a(l,"Chyba p\u0159i p\u0159epo\u010dtu \u010derp\xe1n\xed"),l}}const f=[{value:"SLU\u017dBY",label:"Smlouva o poskytov\xe1n\xed slu\u017eeb"},{value:"KUPN\xcd",label:"Kupn\xed smlouva"},{value:"R\xc1MCOV\xc1",label:"R\xe1mcov\xe1 smlouva"}],h=[{value:"AKTIVNI",label:"Platn\xe1",color:"#10b981",icon:"\u2705",popis:"Smlouva je v platnosti a lze ji pou\u017e\xedvat"},{value:"UKONCENA",label:"Vypr\u0161ela",color:"#dc2626",icon:"\u26d4",popis:"Smlouva p\u0159ekro\u010dila datum konce platnosti"},{value:"PRERUSENA",label:"P\u0159eru\u0161ena",color:"#f59e0b",icon:"\u23f8\ufe0f",popis:"Smlouva je do\u010dasn\u011b pozastavena"},{value:"PRIPRAVOVANA",label:"P\u0159ipraven\xe1",color:"#f97316",icon:"\u23f3",popis:"Smlouva \u010dek\xe1 na za\u010d\xe1tek platnosti"},{value:"NEAKTIVNI",label:"Neaktivn\xed",color:"#6b7280",icon:"\ud83d\udeab",popis:"Smlouva je deaktivov\xe1na (soft delete)"}],x=e=>h.find(n=>n.value===e)||{value:e,label:e,color:"#6b7280",icon:"\u2753"},v=e=>x(e).label,g=e=>x(e).color,b=[{value:0,label:"0% (osvobozeno)"},{value:12,label:"12% (sn\xed\u017een\xe1)"},{value:21,label:"21% (z\xe1kladn\xed)"}]}}]);
//# sourceMappingURL=1340.7beee205.chunk.js.map