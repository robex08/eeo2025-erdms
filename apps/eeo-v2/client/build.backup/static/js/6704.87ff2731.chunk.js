"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[6704],{11895:(e,n,t)=>{t.r(n),t.d(n,{default:()=>wn});var o,a,i,r,s,l=t(89379),d=t(57528),c=t(65043),u=t(97950),m=t(45903),p=t(83290),h=t(83910),v=t(97929),g=t(27837),f=t(88720),x=t(32115),b=(t(92342),t(32575)),y=t(51833),k=t(70579);const j=m.A.div(o||(o=(0,d.A)(["\n  position: relative;\n  width: 100%;\n"]))),_=m.A.input(a||(a=(0,d.A)(["\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.9rem;\n  background-color: ",";\n  cursor: ",";\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &::placeholder {\n    color: #a0aec0;\n  }\n"])),e=>e.hasError?"#e53e3e":"#cbd5e0",e=>e.disabled?"#f7fafc":"white",e=>e.disabled?"not-allowed":"text",e=>e.hasError?"#e53e3e":"#4299e1",e=>e.hasError?"rgba(229, 62, 62, 0.1)":"rgba(66, 153, 225, 0.1)"),z=m.A.ul(i||(i=(0,d.A)(["\n  position: fixed; /* Fixed m\xedsto absolute pro Portal */\n  min-width: 320px; /* \u0160ir\u0161\xed dropdown kv\u016fli popisu LP k\xf3d\u016f */\n  max-width: 500px;\n  max-height: 250px;\n  overflow-y: auto;\n  background: white;\n  border: 1px solid #cbd5e0;\n  border-radius: 4px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 10000; /* Vysok\xfd z-index pro Portal */\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"]))),w=m.A.li(r||(r=(0,d.A)(["\n  padding: 0.6rem 0.85rem;\n  cursor: pointer;\n  transition: background-color 0.15s;\n  font-size: 0.9rem;\n  border-bottom: 1px solid #f7fafc;\n\n  &:hover,\n  &.highlighted {\n    background-color: #edf2f7;\n  }\n\n  &.selected {\n    background-color: #4299e1;\n    color: white;\n\n    small {\n      color: #e6f2ff;\n    }\n  }\n\n  strong {\n    font-family: monospace;\n    font-size: 0.95rem;\n    color: #2d3748;\n  }\n\n  &.selected strong {\n    color: white;\n  }\n\n  small {\n    display: block;\n    color: #718096;\n    font-size: 0.8rem;\n    margin-top: 0.2rem;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"]))),S=m.A.div(s||(s=(0,d.A)(["\n  padding: 0.75rem;\n  color: #718096;\n  font-size: 0.85rem;\n  text-align: center;\n  font-style: italic;\n"]))),A=e=>{let{value:n="",onChange:t,onKeyDown:o,onBlur:a,options:i=[],placeholder:r="Za\u010dn\u011bte ps\xe1t...",disabled:s=!1,hasError:l=!1,loading:d=!1}=e;const[m,p]=(0,c.useState)(n),[h,v]=(0,c.useState)(!1),[g,f]=(0,c.useState)(-1),[x,b]=(0,c.useState)({top:0,left:0,width:0}),y=(0,c.useRef)(null),A=(0,c.useRef)(null);(0,c.useEffect)(()=>{p(n||"")},[n]);const C=()=>{if(y.current){const e=y.current.getBoundingClientRect();b({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:Math.max(e.width,320)})}};(0,c.useEffect)(()=>{if(h){C();const e=()=>C(),n=()=>C();return window.addEventListener("scroll",e,!0),window.addEventListener("resize",n),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",n)}}},[h]);const N=c.useMemo(()=>{if(!m||d)return i;const e=m.toLowerCase().trim();return i.filter(n=>{const t=(n.code||"").toLowerCase(),o=(n.name||"").toLowerCase();return t.includes(e)||o.includes(e)})},[m,i,d]);(0,c.useEffect)(()=>{const e=e=>{A.current&&!A.current.contains(e.target)&&(v(!1),f(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const O=e=>{const n=e.code;p(n),v(!1),f(-1),t&&t({target:{value:n}}),setTimeout(()=>{var e;null===(e=y.current)||void 0===e||e.focus()},0)};return(0,k.jsxs)(j,{ref:A,children:[(0,k.jsx)(_,{ref:y,type:"text",value:m,onChange:e=>{const n=e.target.value;p(n),v(!0),f(-1),t&&t({target:{value:n}})},onFocus:()=>{!s&&i.length>0&&v(!0)},onBlur:e=>{setTimeout(()=>{v(!1),f(-1),a&&a(e)},200)},onKeyDown:e=>{if(!o||h)if(h&&N.length>0)switch(e.key){case"ArrowDown":e.preventDefault(),f(e=>e<N.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),f(e=>e>0?e-1:N.length-1);break;case"Enter":g>=0&&g<N.length?(e.preventDefault(),O(N[g])):o&&o(e);break;case"Escape":e.preventDefault(),v(!1),f(-1);break;case"Tab":v(!1),f(-1),o&&o(e);break;default:o&&o(e)}else o&&o(e);else o(e)},placeholder:d?"Na\u010d\xedt\xe1n\xed...":r,disabled:s||d,hasError:l,autoComplete:"off"}),h&&!s&&!d&&u.createPortal((0,k.jsx)(z,{style:{top:"".concat(x.top,"px"),left:"".concat(x.left,"px"),width:"".concat(x.width,"px")},children:N.length>0?N.map((e,n)=>(0,k.jsxs)(w,{className:"".concat(g===n?"highlighted":""," ").concat(m===e.code?"selected":""),onMouseDown:n=>{n.preventDefault(),O(e)},onMouseEnter:()=>f(n),children:[(0,k.jsx)("strong",{children:e.code}),e.name&&(0,k.jsx)("small",{children:e.name})]},e.code)):(0,k.jsx)(S,{children:m?"\u017d\xe1dn\xe1 shoda. M\u016f\u017eete zadat vlastn\xed text.":"Za\u010dn\u011bte ps\xe1t pro filtrov\xe1n\xed..."})}),document.body)]})};var C=t(200),N=t(75949),O=t(9227),E=(t(79916),t(40950));const D=O.vv.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:30,paddingBottom:60,fontFamily:"Roboto",fontSize:9},header:{marginBottom:20,flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:15},logoContainer:{width:60,height:60},logo:{width:"100%",height:"100%",objectFit:"contain"},headerContent:{flex:1,flexDirection:"column",justifyContent:"center"},headerOrganization:{fontSize:16,fontWeight:600,color:"#374151",marginBottom:4},headerTitle:{fontSize:18,fontWeight:700,color:"#1e40af",marginBottom:4},headerSubtitle:{fontSize:10,fontWeight:400,color:"#6b7280",marginBottom:2},headerInfo:{fontSize:9,fontWeight:400,color:"#6b7280"},headerPeriod:{flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start",alignSelf:"flex-start"},periodMonth:{fontSize:18,fontWeight:700,color:"#1e40af",textTransform:"uppercase"},periodYear:{fontSize:16,fontWeight:500,color:"#374151"},summaryBlock:{marginBottom:15,padding:10,backgroundColor:"#f8fafc",borderRadius:4},summaryGrid:{flexDirection:"row",justifyContent:"space-between",flexWrap:"nowrap",gap:8},summaryItem:{flex:1,minWidth:0},summaryLabel:{fontSize:7,fontWeight:400,color:"#6b7280",marginBottom:2},summaryValue:{fontSize:11,fontWeight:700},summaryValuePositive:{color:"#10b981"},summaryValueNegative:{color:"#ef4444"},summaryValueNeutral:{color:"#1e40af"},bookStatusCard:{marginBottom:12,padding:10,backgroundColor:"#fff7ed",borderRadius:4,borderLeftWidth:4,borderLeftColor:"#f59e0b",borderLeftStyle:"solid"},bookStatusCardClosed:{backgroundColor:"#fef3c7",borderLeftColor:"#eab308"},bookStatusCardLocked:{backgroundColor:"#fee2e2",borderLeftColor:"#ef4444"},bookStatusTitle:{fontSize:10,fontWeight:700,color:"#92400e",marginBottom:4},bookStatusInfo:{flexDirection:"row",justifyContent:"space-between",fontSize:8,color:"#78716c"},bookStatusInfoItem:{flexDirection:"row",gap:4},bookStatusLabel:{fontWeight:500},bookStatusValue:{fontWeight:400,color:"#1c1917"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderColor:"#d1d5db",borderRightWidth:0,borderBottomWidth:0},tableRow:{flexDirection:"row"},tableHeaderRow:{flexDirection:"row",backgroundColor:"#1e40af"},tableHeaderCell:{padding:6,fontSize:8,fontWeight:700,color:"#ffffff",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderColor:"#d1d5db",textAlign:"center",verticalAlign:"middle"},tableCell:{padding:5,fontSize:8,fontWeight:400,color:"#1f2937",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderColor:"#d1d5db"},tableCellAlternate:{backgroundColor:"#f9fafb"},colNumber:{width:"4%",textAlign:"center"},colDate:{width:"8%",textAlign:"center"},colDocNumber:{width:"8%",textAlign:"center"},colDescription:{width:"22%",textAlign:"left"},colPerson:{width:"15%",textAlign:"left"},colIncome:{width:"10%",textAlign:"right",fontWeight:700,color:"#10b981"},colExpense:{width:"10%",textAlign:"right",fontWeight:700,color:"#ef4444"},colBalance:{width:"11%",textAlign:"right",fontWeight:700,color:"#1e40af"},colLpCode:{width:"7%",textAlign:"center"},colNote:{width:"15%",textAlign:"left",fontSize:7},colHeaderIncome:{width:"10%",textAlign:"center"},colHeaderExpense:{width:"10%",textAlign:"center"},colHeaderBalance:{width:"11%",textAlign:"center"},footer:{position:"absolute",bottom:20,left:30,right:30,flexDirection:"row",justifyContent:"space-between",fontSize:8,color:"#6b7280",borderTopWidth:1,borderTopColor:"#e5e7eb",paddingTop:10}}),P=e=>{if(null===e||void 0===e||""===e)return"";const n=parseFloat(e);return isNaN(n)?"":new Intl.NumberFormat("cs-CZ",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n)+" K\u010d"},B=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("cs-CZ",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(n){return e}},L=e=>{let{organizationInfo:n,carryOverAmount:t,totals:o,entries:a,generatedBy:i,bookStatus:r}=e;const s=(new Date).toLocaleString("cs-CZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,k.jsx)(O.yo,{children:(0,k.jsxs)(O.YW,{size:"A4",orientation:"landscape",style:D.page,children:[(0,k.jsxs)(O.Ss,{style:D.header,children:[(0,k.jsx)(O.Ss,{style:D.logoContainer,children:(0,k.jsx)(O._V,{src:E.kf.LOGO_ZZS_MAIN,style:D.logo})}),(0,k.jsxs)(O.Ss,{style:D.headerContent,children:[(0,k.jsx)(O.EY,{style:D.headerOrganization,children:n.organizationName||"Zdravotnick\xe1 z\xe1chrann\xe1 slu\u017eba St\u0159edo\u010desk\xe9ho kraje, p.o."}),(0,k.jsx)(O.EY,{style:D.headerTitle,children:"POKLADN\xcd KNIHA"}),(0,k.jsxs)(O.EY,{style:D.headerInfo,children:["Pracovi\u0161t\u011b: ",n.workplace||"P\u0159\xedbram"," | Pokladna \u010d. ",n.cashboxNumber||"600"]})]}),(0,k.jsxs)(O.Ss,{style:D.headerPeriod,children:[(0,k.jsx)(O.EY,{style:D.periodMonth,children:(n.month||"listopad").toUpperCase()}),(0,k.jsx)(O.EY,{style:D.periodYear,children:n.year||"2025"})]})]}),r&&("uzavrena_uzivatelem"===r.status||"zamknuta_spravcem"===r.status)&&(0,k.jsxs)(O.Ss,{style:[D.bookStatusCard,"uzavrena_uzivatelem"===r.status&&D.bookStatusCardClosed,"zamknuta_spravcem"===r.status&&D.bookStatusCardLocked],children:[(0,k.jsx)(O.EY,{style:D.bookStatusTitle,children:"uzavrena_uzivatelem"===r.status?"\ud83d\udd12 KNIHA UZAV\u0158ENA":"\ud83d\udd10 KNIHA ZAM\u010cENA"}),(0,k.jsxs)(O.Ss,{style:D.bookStatusInfo,children:["uzavrena_uzivatelem"===r.status&&(0,k.jsxs)(k.Fragment,{children:[r.closedDate&&(0,k.jsxs)(O.Ss,{style:D.bookStatusInfoItem,children:[(0,k.jsx)(O.EY,{style:D.bookStatusLabel,children:"Uzav\u0159eno dne:"}),(0,k.jsx)(O.EY,{style:D.bookStatusValue,children:B(r.closedDate)})]}),r.closedBy&&(0,k.jsxs)(O.Ss,{style:D.bookStatusInfoItem,children:[(0,k.jsx)(O.EY,{style:D.bookStatusLabel,children:"Uzav\u0159el:"}),(0,k.jsx)(O.EY,{style:D.bookStatusValue,children:r.closedBy})]})]}),"zamknuta_spravcem"===r.status&&(0,k.jsxs)(k.Fragment,{children:[r.lockedDate&&(0,k.jsxs)(O.Ss,{style:D.bookStatusInfoItem,children:[(0,k.jsx)(O.EY,{style:D.bookStatusLabel,children:"Zam\u010deno dne:"}),(0,k.jsx)(O.EY,{style:D.bookStatusValue,children:B(r.lockedDate)})]}),r.lockedBy&&(0,k.jsxs)(O.Ss,{style:D.bookStatusInfoItem,children:[(0,k.jsx)(O.EY,{style:D.bookStatusLabel,children:"Zamkl:"}),(0,k.jsx)(O.EY,{style:D.bookStatusValue,children:r.lockedBy})]})]})]})]}),(0,k.jsx)(O.Ss,{style:D.summaryBlock,children:(0,k.jsxs)(O.Ss,{style:D.summaryGrid,children:[(0,k.jsxs)(O.Ss,{style:D.summaryItem,children:[(0,k.jsx)(O.EY,{style:D.summaryLabel,children:"P\u0159evod z p\u0159edchoz\xedho m\u011bs\xedce:"}),(0,k.jsx)(O.EY,{style:[D.summaryValue,D.summaryValueNeutral],children:P(t)})]}),(0,k.jsxs)(O.Ss,{style:D.summaryItem,children:[(0,k.jsx)(O.EY,{style:D.summaryLabel,children:"Celkov\xe9 p\u0159\xedjmy:"}),(0,k.jsx)(O.EY,{style:[D.summaryValue,D.summaryValuePositive],children:P(o.totalIncome)})]}),(0,k.jsxs)(O.Ss,{style:D.summaryItem,children:[(0,k.jsx)(O.EY,{style:D.summaryLabel,children:"Celkov\xe9 v\xfddaje:"}),(0,k.jsx)(O.EY,{style:[D.summaryValue,D.summaryValueNegative],children:P(o.totalExpenses)})]}),(0,k.jsxs)(O.Ss,{style:D.summaryItem,children:[(0,k.jsx)(O.EY,{style:D.summaryLabel,children:"Aktu\xe1ln\xed z\u016fstatek:"}),(0,k.jsx)(O.EY,{style:[D.summaryValue,o.currentBalance>=0?D.summaryValuePositive:D.summaryValueNegative],children:P(o.currentBalance)})]})]})}),(0,k.jsxs)(O.Ss,{style:D.table,children:[(0,k.jsxs)(O.Ss,{style:D.tableHeaderRow,children:[(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colNumber],children:"#"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colDate],children:"Datum"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colDocNumber],children:"Doklad \u010d."}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colDescription],children:"Obsah z\xe1pisu"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colPerson],children:"Komu/Od koho"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colHeaderIncome],children:"P\u0159\xedjmy (K\u010d)"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colHeaderExpense],children:"V\xfddaje (K\u010d)"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colHeaderBalance],children:"Z\u016fstatek (K\u010d)"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colLpCode],children:"LP k\xf3d"}),(0,k.jsx)(O.EY,{style:[D.tableHeaderCell,D.colNote],children:"Pozn\xe1mka"})]}),a.map((e,n)=>(0,k.jsxs)(O.Ss,{style:[D.tableRow,n%2===1&&D.tableCellAlternate],children:[(0,k.jsx)(O.EY,{style:[D.tableCell,D.colNumber],children:n+1}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colDate],children:B(e.date)}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colDocNumber],children:e.documentNumber||""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colDescription],children:e.description||""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colPerson],children:e.person||""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colIncome],children:e.income?P(e.income):""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colExpense],children:e.expense?P(e.expense):""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colBalance],children:P(e.balance)}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colLpCode],children:e.lpCode||""}),(0,k.jsx)(O.EY,{style:[D.tableCell,D.colNote],children:e.note||""})]},e.id||n))]}),(0,k.jsxs)(O.Ss,{style:D.footer,fixed:!0,children:[(0,k.jsxs)(O.EY,{children:[(null===i||void 0===i?void 0:i.fullName)||""," | ",(null===i||void 0===i?void 0:i.usekZkr)||""," | ",(null===i||void 0===i?void 0:i.lokalita)||n.workplace||""]}),(0,k.jsx)(O.EY,{render:e=>{let{pageNumber:n,totalPages:t}=e;return"Strana ".concat(n," z ").concat(t)}}),(0,k.jsxs)(O.EY,{children:["Vygenerov\xe1no: ",s]})]})]})})};var I=t(95680);const K=e=>{let{status:n}=e;const t=(()=>{switch(n){case"aktivni":return{label:"Aktivn\xed",className:"status-badge status-active",icon:"\u2713",description:"Kniha je otev\u0159en\xe1 pro z\xe1pis"};case"uzavrena_uzivatelem":return{label:"Uzav\u0159ena u\u017eivatelem",className:"status-badge status-closed",icon:"\u23f8",description:"M\u011bs\xedc uzav\u0159en, lze odemknout spr\xe1vcem"};case"zamknuta_spravcem":return{label:"Zam\u010dena spr\xe1vcem",className:"status-badge status-locked",icon:"\ud83d\udd12",description:"Zam\u010deno spr\xe1vcem, nelze editovat"};default:return{label:"Nezn\xe1m\xfd stav",className:"status-badge status-unknown",icon:"?",description:n||"Stav nen\xed definov\xe1n"}}})();return(0,k.jsxs)("div",{className:t.className,title:t.description,children:[(0,k.jsx)("span",{className:"status-icon",children:t.icon}),(0,k.jsx)("span",{className:"status-label",children:t.label})]})};var T,W,R,F,M,H,V,Y,Z,U,J,$,G,q,X,Q,ee,ne,te,oe;const ae=m.A.div(T||(T=(0,d.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #dee2e6;\n"]))),ie=m.A.div(W||(W=(0,d.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),re=m.A.select(R||(R=(0,d.A)(["\n  padding: 0.5rem;\n  border: 1px solid #ced4da;\n  border-radius: 4px;\n  font-size: 1rem;\n  background: white;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-color: #007bff;\n  }\n"]))),se=m.A.label(F||(F=(0,d.A)(["\n  font-weight: 600;\n  color: #495057;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),le=m.A.div(M||(M=(0,d.A)(["\n  position: relative;\n  flex: 1;\n  min-width: 300px;\n"]))),de=m.A.button(H||(H=(0,d.A)(["\n  width: 100%;\n  padding: 0.5rem 2.5rem 0.5rem 1rem;\n  border: 1px solid #ced4da;\n  border-radius: 4px;\n  font-size: 1rem;\n  background: white;\n  cursor: pointer;\n  text-align: left;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    border-color: #007bff;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #007bff;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]))),ce=m.A.span(V||(V=(0,d.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  pointer-events: none;\n  color: #6c757d;\n"]))),ue=m.A.div(Y||(Y=(0,d.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 0.25rem;\n  background: white;\n  border: 1px solid #ced4da;\n  border-radius: 4px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 1000;\n"]))),me=m.A.div(Z||(Z=(0,d.A)(["\n  position: relative;\n  border-bottom: 1px solid #dee2e6;\n\n  &:focus-within .search-icon {\n    color: #007bff;\n  }\n"]))),pe=m.A.span(U||(U=(0,d.A)(["\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #6c757d;\n"]))),he=m.A.input(J||(J=(0,d.A)(["\n  width: 100%;\n  padding: 0.75rem 0.75rem 0.75rem 2.5rem;\n  border: none;\n  font-size: 1rem;\n\n  &:focus {\n    outline: none;\n  }\n"]))),ve=m.A.div($||($=(0,d.A)(["\n  max-height: 240px;\n  overflow-y: auto;\n"]))),ge=m.A.div(G||(G=(0,d.A)(["\n  padding: 0.75rem 1rem;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:hover {\n    background: #f8f9fa;\n  }\n\n  ","\n"])),e=>e.$selected&&"\n    background: #e7f3ff;\n    font-weight: 600;\n  "),fe=m.A.span(q||(q=(0,d.A)(["\n  flex: 1;\n"]))),xe=m.A.div(X||(X=(0,d.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n"]))),be=m.A.div(Q||(Q=(0,d.A)(["\n  font-weight: 500;\n"]))),ye=m.A.div(ee||(ee=(0,d.A)(["\n  font-size: 0.875rem;\n  color: #6c757d;\n"]))),ke=m.A.span(ne||(ne=(0,d.A)(["\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  background: #007bff;\n  color: white;\n  border-radius: 3px;\n  white-space: nowrap;\n"]))),je=m.A.span(te||(te=(0,d.A)(["\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 3px;\n  white-space: nowrap;\n  font-weight: 600;\n\n  ","\n"])),e=>"aktivni"===e.$status?"\n        background: #28a745;\n        color: white;\n      ":"uzavrena_uzivatelem"===e.$status?"\n        background: #ffc107;\n        color: #212529;\n      ":"zamknuta_spravcem"===e.$status?"\n        background: #dc3545;\n        color: white;\n      ":"\n      background: #6c757d;\n      color: white;\n    "),_e=m.A.div(oe||(oe=(0,d.A)(["\n  font-size: 0.875rem;\n  color: #6c757d;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),ze=e=>{let{currentCashbox:n,userCashboxes:t=[],allCashboxes:o=[],permissions:a={},canSeeAllCashboxes:i=!1,onCashboxChange:r,currentYear:s,currentMonth:l,onPeriodChange:d}=e;const[u,m]=(0,c.useState)(!1),[p,g]=(0,c.useState)(""),f=(0,c.useRef)(null),x=(0,c.useRef)(null);(0,c.useEffect)(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&(m(!1),g(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,c.useEffect)(()=>{u&&x.current&&x.current.focus()},[u]);const b=a.canReadAll||a.canManage,y=(0,c.useMemo)(()=>!!n&&t.some(e=>String(e.id)===String(n.id)||e.cislo_pokladny&&String(e.cislo_pokladny)===String(n.cislo_pokladny)),[n,t]),j=(0,c.useMemo)(()=>{let e=[];if(b&&o.length>0){if(e=o.filter(e=>1===parseInt(e.je_hlavni,10)),0===e.length){const n=new Set;e=o.filter(e=>{const t=e.cislo_pokladny||e.id;return!n.has(t)&&(n.add(t),!0)})}}else e=t;return e},[b,o,t]),_=(0,c.useMemo)(()=>{if(!p.trim())return j;const e=p.toLowerCase();return j.filter(n=>{const t=String(n.cislo_pokladny||"").toLowerCase(),o=(n.nazev||n.nazev_pracoviste||"").toLowerCase(),a=(n.uzivatel_cele_jmeno||(n.uzivatel_jmeno&&n.uzivatel_prijmeni?"".concat(n.uzivatel_jmeno," ").concat(n.uzivatel_prijmeni):"")).toLowerCase(),i=(n.lokalita_nazev||n.lokalita_kod||"").toLowerCase(),r=(n.usek_nazev||"").toLowerCase(),s=(n.nazev_pracoviste||n.kod_pracoviste||"").toLowerCase();return t.includes(e)||o.includes(e)||a.includes(e)||i.includes(e)||r.includes(e)||s.includes(e)})},[j,p]),z=[{value:1,label:"Leden"},{value:2,label:"\xdanor"},{value:3,label:"B\u0159ezen"},{value:4,label:"Duben"},{value:5,label:"Kv\u011bten"},{value:6,label:"\u010cerven"},{value:7,label:"\u010cervenec"},{value:8,label:"Srpen"},{value:9,label:"Z\xe1\u0159\xed"},{value:10,label:"\u0158\xedjen"},{value:11,label:"Listopad"},{value:12,label:"Prosinec"}],w=new Date,S=w.getFullYear(),A=w.getMonth()+1,C=[];for(let c=2025;c<=S;c++)C.push(c);const N=(0,c.useMemo)(()=>s===S?z.filter(e=>e.value<=A):z,[s,S,A]);return j.length<=1&&!d?null:(0,k.jsxs)(ae,{children:[d&&(0,k.jsxs)(ie,{children:[(0,k.jsx)(se,{children:"\ud83d\udcc5 Obdob\xed:"}),(0,k.jsx)(re,{value:l,onChange:e=>d(s,parseInt(e.target.value)),children:N.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,k.jsx)(re,{value:s,onChange:e=>{const n=parseInt(e.target.value);let t=l;n===S&&l>A&&(t=A),d(n,t)},children:C.map(e=>(0,k.jsx)("option",{value:e,children:e},e))}),(0,k.jsxs)("span",{style:{fontSize:"0.875rem",color:"#6c757d"},children:[j.length," ",1===j.length?"pokladna":j.length<5?"pokladny":"pokladen"," v tomto obdob\xed"]})]}),j.length>1&&(0,k.jsxs)(ie,{children:[(0,k.jsxs)(se,{children:[(0,k.jsx)(h.g,{icon:v.yqK}),"Pokladna:"]}),(0,k.jsxs)(le,{ref:f,children:[(0,k.jsxs)(de,{onClick:()=>m(!u),type:"button",children:[(()=>{const e=(()=>{if(!n)return{label:"Vyberte pokladnu...",isOwn:!1};const e=n.uzivatel_cele_jmeno||(n.uzivatel_jmeno&&n.uzivatel_prijmeni?"".concat(n.uzivatel_jmeno," ").concat(n.uzivatel_prijmeni):null),t=n.lokalita_nazev||n.lokalita_kod||null,o=n.usek_nazev||null,a=n.nazev_pracoviste||n.kod_pracoviste||null,i=n.nazev||n.nazev_pracoviste||"";let r="";y&&(r+="\u2605 "),r+="\u010d. ".concat(n.cislo_pokladny),i&&(r+=" - ".concat(i));const s=[];return e&&s.push(e),t&&s.push(t),o&&s.push(o),a&&s.push(a),s.length>0&&(r+=" (".concat(s.join(", "),")")),{label:r,isOwn:y}})();return(0,k.jsx)("span",{style:{flex:1,fontWeight:e.isOwn?"bold":"normal",color:e.isOwn?"#007bff":"inherit"},children:e.label})})(),(null===n||void 0===n?void 0:n.stav_knihy)&&(0,k.jsxs)(je,{$status:n.stav_knihy,style:{marginLeft:"0.5rem"},children:["aktivni"===n.stav_knihy&&"\u2705 Aktivn\xed","uzavrena_uzivatelem"===n.stav_knihy&&"\u26a0\ufe0f Uzav\u0159ena","zamknuta_spravcem"===n.stav_knihy&&"\ud83d\udd12 Zamknuta"]})]}),(0,k.jsx)(ce,{children:(0,k.jsx)(h.g,{icon:v.Jt$})}),u&&(0,k.jsxs)(ue,{children:[(0,k.jsxs)(me,{children:[(0,k.jsx)(he,{ref:x,type:"text",placeholder:"Hledat podle \u010d\xedsla nebo n\xe1zvu...",value:p,onChange:e=>g(e.target.value)}),(0,k.jsx)(pe,{className:"search-icon",children:(0,k.jsx)(h.g,{icon:v.MjD})})]}),(0,k.jsx)(ve,{children:0===_.length?(0,k.jsx)(ge,{style:{color:"#6c757d",cursor:"default"},children:"\u017d\xe1dn\xe9 v\xfdsledky"}):_.map((e,o)=>{const a=e.uzivatel_cele_jmeno||(e.uzivatel_jmeno&&e.uzivatel_prijmeni?"".concat(e.uzivatel_jmeno," ").concat(e.uzivatel_prijmeni):null),i=e.lokalita_nazev||e.lokalita_kod||null,s=e.usek_nazev||null,l=e.nazev_pracoviste||e.kod_pracoviste||null,d=t.some(n=>String(n.id)===String(e.id)||n.cislo_pokladny&&String(n.cislo_pokladny)===String(e.cislo_pokladny)),c=e.stav_knihy||"aktivni";return(0,k.jsxs)(ge,{onClick:()=>(e=>{r&&r(e),m(!1),g("")})(e),$selected:(null===n||void 0===n?void 0:n.id)===e.id,children:[(0,k.jsx)(fe,{children:(0,k.jsxs)(xe,{children:[(0,k.jsxs)(be,{style:{fontWeight:d?"bold":"normal",color:d?"#007bff":"inherit"},children:[d&&"\u2605 ","\u010d. ",e.cislo_pokladny," - ",e.nazev||e.nazev_pracoviste||"Bez n\xe1zvu"]}),(a||i||s||l)&&(0,k.jsxs)(ye,{children:[a&&"\ud83d\udc64 ".concat(a),a&&(i||s||l)&&" \u2022 ",i&&"\ud83c\udfe2 ".concat(i),i&&(s||l)&&" \u2022 ",s&&"\ud83d\udccb ".concat(s),s&&l&&" \u2022 ",l&&"\ud83d\udccd ".concat(l)]})]})}),(0,k.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,k.jsx)(je,{$status:c,children:{aktivni:"\u2705 Aktivn\xed",uzavrena_uzivatelem:"\u26a0\ufe0f Uzav\u0159ena",zamknuta_spravcem:"\ud83d\udd12 Zamknuta"}[c]||c}),(null===n||void 0===n?void 0:n.id)===e.id&&(0,k.jsxs)(ke,{children:[(0,k.jsx)(h.g,{icon:v.SGM})," Vybr\xe1na"]})]})]},"".concat(e.id,"-").concat(e.cislo_pokladny,"-").concat(o))})})]})]}),n&&(0,k.jsxs)(_e,{children:[(0,k.jsx)(h.g,{icon:v.SGM})," ",1===parseInt(n.je_hlavni,10)?"Hlavn\xed pokladn\xedk":"Z\xe1stupce"]})]})]})},we={CASH_BOOK_READ_OWN:"CASH_BOOK_READ_OWN",CASH_BOOK_READ_ALL:"CASH_BOOK_READ_ALL",CASH_BOOK_EDIT_OWN:"CASH_BOOK_EDIT_OWN",CASH_BOOK_EDIT_ALL:"CASH_BOOK_EDIT_ALL",CASH_BOOK_DELETE_OWN:"CASH_BOOK_DELETE_OWN",CASH_BOOK_DELETE_ALL:"CASH_BOOK_DELETE_ALL",CASH_BOOK_EXPORT_OWN:"CASH_BOOK_EXPORT_OWN",CASH_BOOK_EXPORT_ALL:"CASH_BOOK_EXPORT_ALL",CASH_BOOK_MANAGE:"CASH_BOOK_MANAGE"},Se=e=>{if(!e)return new Set;const n=new Set,t=e.direct_rights||e.directRights||[];Array.isArray(t)&&t.forEach(e=>{if(e&&"object"===typeof e){const t=e.kod_prava||e.kod_opravneni||e.code||"";t.startsWith("CASH_BOOK_")&&n.add(t)}});const o=e.prava||[];Array.isArray(o)&&o.forEach(e=>{if(e&&"object"===typeof e){const t=e.kod_prava||e.kod_opravneni||e.code||"";t.startsWith("CASH_BOOK_")&&n.add(t)}});const a=e.permissions||[];Array.isArray(a)&&a.forEach(e=>{if("string"===typeof e&&e.startsWith("CASH_BOOK_"))n.add(e);else if(e&&"object"===typeof e){const t=e.kod_prava||e.kod_opravneni||e.code||"";t.startsWith("CASH_BOOK_")&&n.add(t)}});const i=e.roles||[];return Array.isArray(i)&&i.forEach(e=>{if(e&&"object"===typeof e){const t=e.prava||e.rights||e.permissions||[];Array.isArray(t)&&t.forEach(e=>{if(e&&"object"===typeof e){const t=e.kod_prava||e.kod_opravneni||e.code||"";t.startsWith("CASH_BOOK_")&&n.add(t)}else"string"===typeof e&&e.startsWith("CASH_BOOK_")&&n.add(e)})}}),n},Ae=e=>{const n=Se(e);return{canReadOwn:n.has(we.CASH_BOOK_READ_OWN),canReadAll:n.has(we.CASH_BOOK_READ_ALL)||n.has(we.CASH_BOOK_MANAGE),canEditOwn:n.has(we.CASH_BOOK_EDIT_OWN),canEditAll:n.has(we.CASH_BOOK_EDIT_ALL)||n.has(we.CASH_BOOK_MANAGE),canDeleteOwn:n.has(we.CASH_BOOK_DELETE_OWN),canDeleteAll:n.has(we.CASH_BOOK_DELETE_ALL)||n.has(we.CASH_BOOK_MANAGE),canExportOwn:n.has(we.CASH_BOOK_EXPORT_OWN),canExportAll:n.has(we.CASH_BOOK_EXPORT_ALL)||n.has(we.CASH_BOOK_MANAGE),canManage:n.has(we.CASH_BOOK_MANAGE)}};var Ce,Ne,Oe,Ee,De,Pe,Be,Le,Ie,Ke,Te,We,Re,Fe,Me,He,Ve,Ye,Ze,Ue,Je,$e,Ge,qe,Xe,Qe;const en=(0,p.AH)(Ce||(Ce=(0,d.A)(["\n  @media print {\n    /* Skr\xfdt v\u0161e krom\u011b tabulky p\u0159i tisku */\n    body * {\n      visibility: hidden;\n    }\n\n    /* Zobrazit pouze obsah pokladn\xed knihy */\n    .cashbook-print-area,\n    .cashbook-print-area * {\n      visibility: visible;\n    }\n\n    /* Odstranit padding/margin z body */\n    body {\n      margin: 0;\n      padding: 0;\n      background: white;\n    }\n\n    /* Tabulka na celou \u0161\xed\u0159ku */\n    .cashbook-print-area {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      padding: 2rem;\n    }\n\n    /* Zobrazit hlavi\u010dku jen p\u0159i tisku */\n    .print-header {\n      display: block !important;\n    }\n\n    /* Skr\xfdt ak\u010dn\xed tla\u010d\xedtka, navigaci atd. */\n    button,\n    .no-print {\n      display: none !important;\n    }\n\n    /* Optimalizace tabulky pro tisk */\n    table {\n      page-break-inside: auto;\n      border-collapse: collapse;\n      width: 100%;\n      font-size: 0.8rem;\n    }\n\n    tr {\n      page-break-inside: avoid;\n      page-break-after: auto;\n    }\n\n    thead {\n      display: table-header-group;\n    }\n\n    tfoot {\n      display: table-footer-group;\n    }\n\n    /* Men\u0161\xed padding pro tisk */\n    td, th {\n      padding: 0.25rem 0.5rem !important;\n    }\n  }\n"]))),nn=(0,p.i7)(Ne||(Ne=(0,d.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),tn=(0,p.i7)(Oe||(Oe=(0,d.A)(["\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n"]))),on=(0,p.i7)(Ee||(Ee=(0,d.A)(["\n  0%, 100% {\n    background-color: #fff;\n  }\n  50% {\n    background-color: #dbeafe;\n  }\n"]))),an=m.A.div(De||(De=(0,d.A)(["\n  min-height: 100vh;\n  padding: 2rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n  animation: "," 0.6s ease-out;\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n"])),nn),rn=m.A.div(Pe||(Pe=(0,d.A)(["\n  background: linear-gradient(135deg, #1e40af, #3b82f6);\n  color: white;\n  padding: 2rem;\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(30, 64, 175, 0.3);\n  margin-bottom: 2rem;\n  animation: "," 0.8s ease-out;\n\n  h1 {\n    font-size: 2.5rem;\n    font-weight: 700;\n    margin: 0 0 0.5rem 0;\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  }\n\n  .subtitle {\n    font-size: 1.1rem;\n    opacity: 0.9;\n    margin: 0;\n  }\n\n  @media (max-width: 768px) {\n    padding: 1.5rem;\n    h1 {\n      font-size: 2rem;\n    }\n  }\n"])),tn),sn=m.A.div(Be||(Be=(0,d.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  animation: "," 0.6s ease-out 0.2s both;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"])),tn),ln=m.A.div(Le||(Le=(0,d.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n"]))),dn=m.A.button(Ie||(Ie=(0,d.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n"])),e=>{switch(e.variant){case"primary":return"#10b981";case"danger":return"#ef4444";case"warning":return"#f59e0b";default:return"#3b82f6"}},e=>{if(e.$filled)switch(e.variant){case"primary":return"#10b981";case"danger":return"#ef4444";case"warning":return"#f59e0b";default:return"#3b82f6"}return"white"},e=>{if(e.$filled)return"white";switch(e.variant){case"primary":return"#10b981";case"danger":return"#ef4444";case"warning":return"#f59e0b";default:return"#3b82f6"}},e=>{if(e.$filled)switch(e.variant){case"primary":return"#059669";case"danger":return"#dc2626";case"warning":return"#d97706";default:return"#2563eb"}switch(e.variant){case"primary":return"#d1fae5";case"danger":return"#fee2e2";case"warning":return"#fef3c7";default:return"#eff6ff"}},e=>{switch(e.variant){case"primary":return"#059669";case"danger":return"#dc2626";case"warning":return"#d97706";default:return"#2563eb"}},e=>{switch(e.variant){case"primary":return"rgba(16, 185, 129, 0.25)";case"danger":return"rgba(239, 68, 68, 0.25)";case"warning":return"rgba(245, 158, 11, 0.25)";default:return"rgba(59, 130, 246, 0.25)"}}),cn=m.A.div(Ke||(Ke=(0,d.A)(["\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n  color: white;\n  animation: "," 0.6s ease-out 0.2s both;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 2rem;\n"])),tn),un=m.A.div(Te||(Te=(0,d.A)(["\n  flex: 1;\n\n  h2 {\n    margin: 0 0 0.5rem 0;\n    font-size: 1.5rem;\n    font-weight: 700;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n\n  .carry-over {\n    font-size: 0.95rem;\n    opacity: 0.95;\n    margin: 0.25rem 0 0 0;\n\n    .amount {\n      font-weight: 600;\n      font-size: 1.1rem;\n      margin-left: 0.5rem;\n    }\n  }\n"]))),mn=m.A.div(We||(We=(0,d.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n"]))),pn=m.A.button(Re||(Re=(0,d.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.75rem 1.25rem;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.95rem;\n\n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n"]))),hn=(m.A.div(Fe||(Fe=(0,d.A)(["\n  background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);\n  border: 2px solid #dc2626;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);\n  animation: "," 0.4s ease-out;\n\n  .warning-header {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 1rem;\n\n    .icon {\n      font-size: 2.5rem;\n      color: #dc2626;\n      animation: pulse 2s ease-in-out infinite;\n    }\n\n    h3 {\n      color: #991b1b;\n      margin: 0;\n      font-size: 1.3rem;\n      font-weight: 700;\n    }\n  }\n\n  .warning-content {\n    color: #7f1d1d;\n    line-height: 1.6;\n\n    p {\n      margin: 0.75rem 0;\n    }\n\n    strong {\n      color: #991b1b;\n      font-weight: 600;\n    }\n\n    .contact-info {\n      margin-top: 1rem;\n      padding: 1rem;\n      background: rgba(255, 255, 255, 0.5);\n      border-radius: 8px;\n      border-left: 4px solid #dc2626;\n    }\n  }\n\n  @keyframes pulse {\n    0%, 100% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.1);\n    }\n  }\n"])),tn),m.A.div(Me||(Me=(0,d.A)(["\n  background: linear-gradient(135deg, #fff3cd 0%, #fff8e1 100%);\n  border: 2px solid #ffc107;\n  border-radius: 12px;\n  padding: 1.25rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 3px 10px rgba(255, 193, 7, 0.2);\n  animation: "," 0.4s ease-out;\n\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n\n  @media print {\n    display: none;\n  }\n"])),tn)),vn=m.A.div(He||(He=(0,d.A)(["\n  font-size: 1.5rem;\n  color: #ff9800;\n  line-height: 1;\n  margin-top: 0.25rem;\n  flex-shrink: 0;\n"]))),gn=m.A.div(Ve||(Ve=(0,d.A)(["\n  flex: 1;\n\n  h4 {\n    margin: 0 0 0.5rem 0;\n    color: #f57c00;\n    font-size: 1rem;\n    font-weight: 600;\n  }\n\n  p {\n    margin: 0.25rem 0;\n    color: #5d4037;\n    font-size: 0.9rem;\n    line-height: 1.5;\n  }\n\n  strong {\n    color: #e65100;\n  }\n\n  .tip {\n    margin-top: 0.5rem;\n    font-size: 0.85rem;\n    color: #666;\n  }\n"]))),fn=m.A.div(Ye||(Ye=(0,d.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border-left: 4px solid #3b82f6;\n  animation: "," 0.6s ease-out 0.3s both;\n\n  .organization-info {\n    margin-bottom: 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 1rem;\n    flex-wrap: wrap;\n\n    .info-text {\n      flex: 1;\n      min-width: 300px;\n\n      h3 {\n        color: #1f2937;\n        margin: 0 0 0.5rem 0;\n        font-size: 1.2rem;\n        font-weight: 600;\n      }\n\n      p {\n        color: #6b7280;\n        margin: 0;\n        font-size: 0.95rem;\n      }\n    }\n\n    .info-actions {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n    }\n  }\n\n  .summary-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 1rem;\n    margin-top: 1rem;\n  }\n\n  .summary-item {\n    text-align: center;\n\n    .label {\n      font-size: 0.875rem;\n      color: #6b7280;\n      margin-bottom: 0.25rem;\n    }\n\n    .value {\n      font-size: 1.5rem;\n      font-weight: 600;\n      color: #1f2937;\n    }\n\n    &.positive .value {\n      color: #059669;\n    }\n\n    &.negative .value {\n      color: #dc2626;\n    }\n  }\n"])),tn),xn=m.A.div(Ze||(Ze=(0,d.A)(["\n  position: fixed;\n  top: var(--app-fixed-offset-actual, 130px);\n  left: 0;\n  right: 0;\n  z-index: 40;\n  background: white;\n  border-bottom: 2px solid #3b82f6;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 0.75rem 2rem;\n\n  /* Plynul\xfd p\u0159echod */\n  opacity: ",";\n  transform: translateY(",");\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  pointer-events: ",";\n\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n\n  @media (max-width: 768px) {\n    padding: 0.75rem 1rem;\n  }\n\n  @media print {\n    display: none !important;\n  }\n\n  .compact-title {\n    font-weight: 600;\n    color: #1f2937;\n    font-size: 1rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .compact-values {\n    display: flex;\n    gap: 2rem;\n    flex-wrap: wrap;\n  }\n\n  .compact-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    .compact-label {\n      font-size: 0.75rem;\n      color: #6b7280;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n    }\n\n    .compact-value {\n      font-size: 1.1rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin-top: 0.1rem;\n\n      &.positive {\n        color: #059669;\n      }\n\n      &.negative {\n        color: #dc2626;\n      }\n    }\n  }\n\n  @media print {\n    display: none !important;\n  }\n"])),e=>e.$visible?"1":"0",e=>e.$visible?"0":"-100%",e=>e.$visible?"auto":"none"),bn=m.A.div(Ue||(Ue=(0,d.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n  overflow-x: auto;\n  overflow-y: visible;\n  animation: "," 0.8s ease-out 0.4s both;\n"])),nn),yn=m.A.table(Je||(Je=(0,d.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  th, td {\n    padding: 0.75rem;\n    text-align: left;\n    border-bottom: 1px solid #e5e7eb;\n  }\n\n  th {\n    background: #f8fafc;\n    color: #374151;\n    font-weight: 600;\n    font-size: 0.875rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    line-height: 1.3;\n    vertical-align: middle;\n  }\n\n  td {\n    color: #1f2937;\n  }\n\n  tbody tr:hover {\n    background: #f9fafb;\n  }\n\n  .row-number {\n    width: 60px;\n    text-align: center;\n    font-weight: 600;\n    color: #6b7280;\n  }\n\n  .date-cell {\n    width: 130px; /* Z\xfa\u017eeno z 220px - datum se nesm\xed zalamovat */\n    min-width: 130px;\n    padding: 0.5rem;\n    position: relative;\n    overflow: visible;\n    white-space: nowrap; /* Zabr\xe1n\u011bn\xed zalamov\xe1n\xed datumu */\n\n    /* DatePicker m\xe1 vlastn\xed padding, resetujeme padding bu\u0148ky kdy\u017e je uvnit\u0159 */\n    > div {\n      margin: -0.25rem;\n      position: relative;\n      z-index: 100;\n    }\n  }\n\n  .document-cell {\n    width: 120px;\n    font-family: monospace;\n    font-weight: 500;\n    text-align: left;\n  }\n\n  .description-cell {\n    width: 360px; /* 60% pom\u011br - Obsah */\n    text-align: left;\n  }\n\n  .person-cell {\n    width: 150px; /* Vr\xe1ceno na p\u016fvodn\xed \u0161\xed\u0159ku */\n    text-align: center;\n\n    /* V td zarovnat vlevo */\n    td& {\n      text-align: left;\n    }\n  }\n\n  .amount-cell {\n    width: 120px;\n    text-align: center;\n    font-family: monospace;\n    font-weight: 500;\n\n    /* V td zarovnat vpravo */\n    td& {\n      text-align: right;\n    }\n  }\n\n  .balance-cell {\n    width: 120px;\n    text-align: center;\n    font-family: monospace;\n    font-weight: 600;\n\n    /* V td zarovnat vpravo a zv\xfdraznit */\n    td& {\n      text-align: right;\n      background: #f0f9f4;\n    }\n  }\n\n  .lp-code-cell {\n    width: 180px; /* Roz\u0161\xed\u0159eno ze 100px - kv\u016fli popisu LP k\xf3du */\n    min-width: 180px;\n    font-family: monospace;\n    font-size: 0.875rem;\n    text-align: left;\n  }\n\n  .note-cell {\n    width: 240px; /* 40% pom\u011br - Pozn\xe1mka */\n    font-size: 0.875rem;\n    color: #6b7280;\n    text-align: left;\n  }\n\n  .actions-cell {\n    width: 80px;\n    text-align: center;\n  }\n\n  .income {\n    color: #059669;\n  }\n\n  .expense {\n    color: #dc2626;\n  }\n"]))),kn=m.A.div($e||($e=(0,d.A)(["\n  position: relative;\n  width: 100%;\n\n  /* K\u010d symbol vpravo */\n  &::after {\n    content: 'K\u010d';\n    position: absolute;\n    right: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #6b7280;\n    font-size: 0.875rem;\n    font-weight: 500;\n    pointer-events: none;\n  }\n"]))),jn=m.A.input(Ge||(Ge=(0,d.A)(["\n  width: 100%;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  padding: 0.5rem;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &.date-input {\n    font-family: monospace;\n  }\n\n  &.amount-input {\n    text-align: right;\n    font-family: monospace;\n    padding-right: 2.5rem; /* m\xedsto pro K\u010d symbol */\n\n    /* Odstran\u011bn\xed spinner \u0161ipek - WebKit */\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    /* Odstran\u011bn\xed spinner \u0161ipek - Firefox */\n    &[type=number] {\n      -moz-appearance: textfield;\n    }\n  }\n\n  &.readonly {\n    background: #f3f4f6;\n    border-color: #e5e7eb;\n    cursor: not-allowed;\n  }\n"]))),_n=(m.A.select(qe||(qe=(0,d.A)(["\n  width: 100%;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  padding: 0.5rem;\n  font-size: 0.875rem;\n  background: white;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),m.A.button(Xe||(Xe=(0,d.A)(["\n  padding: 0.25rem;\n  border: none;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f3f4f6;\n    color: ",";\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n"])),e=>e.danger?"#dc2626":"#374151")),zn=m.A.button(Qe||(Qe=(0,d.A)(["\n  width: 100%;\n  padding: 1rem;\n  border: 2px dashed #d1d5db;\n  background: #f9fafb;\n  color: #6b7280;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #eff6ff;\n    color: #3b82f6;\n  }\n\n  &:active {\n    transform: scale(0.99);\n  }\n"]))),wn=()=>{var e;const{user:n,token:t,hasPermission:o,userDetail:a}=(0,c.useContext)(g.cy),{showToast:i}=(0,c.useContext)(f.$o),r=(()=>{try{const e=localStorage.getItem("cashbook_selector_period");if(e){const{year:n,month:t}=JSON.parse(e);return{year:n,month:t}}}catch(e){}return{year:(new Date).getFullYear(),month:(new Date).getMonth()+1}})(),[s,d]=(0,c.useState)(r.month),[m,j]=(0,c.useState)(r.year),[_,z]=(0,c.useState)(0),[w,S]=(0,c.useState)(!1),[E,D]=(0,c.useState)(!1),[P,B]=(0,c.useState)(null),[T,W]=(0,c.useState)(!1),[R,F]=(0,c.useState)(!1),[M,H]=(0,c.useState)(!1),[V,Y]=(0,c.useState)(!1),[Z,U]=(0,c.useState)(!1),[J,$]=(0,c.useState)([]),G=(0,c.useRef)(J);(0,c.useEffect)(()=>{G.current=J},[J]);const[q,X]=(0,c.useState)(null),[Q,ee]=(0,c.useState)([]),[ne,te]=(0,c.useState)(!0),[oe,ae]=(0,c.useState)(null),[ie,re]=(0,c.useState)([]),[se,le]=(0,c.useState)(null),[de,ce]=(0,c.useState)(!0),[ue,me]=(0,c.useState)([]),[pe,he]=(0,c.useState)([]),[ve,ge]=(0,c.useState)("aktivni"),[fe,xe]=(0,c.useState)(null),[be,ye]=(0,c.useState)(!1),[ke,je]=(0,c.useState)(!0),[_e,we]=(0,c.useState)(null),[Se,Ce]=(0,c.useState)(null),[Ne,Oe]=(0,c.useState)(!1),[Ee,De]=(0,c.useState)(null),[Pe,Be]=(0,c.useState)(!1),[Le,Ie]=(0,c.useState)([]),Ke=()=>{var e,n;return(null===a||void 0===a||null===(e=a.lokalita_nazev)||void 0===e?void 0:e.nazev)||(null===a||void 0===a||null===(n=a.lokalita)||void 0===n?void 0:n.nazev)||(null===a||void 0===a?void 0:a.location)||"P\u0159\xedbram"},Te={organizationName:"Zdravotnick\xe1 z\xe1chrann\xe1 slu\u017eba St\u0159edo\u010desk\xe9ho kraje, p\u0159\xedsp\u011bvkov\xe1 organizace",workplace:(null===se||void 0===se?void 0:se.nazev_pracoviste)||(null===se||void 0===se?void 0:se.kod_pracoviste)||Ke(),cashboxNumber:(null===se||void 0===se?void 0:se.cislo_pokladny)||600,cashboxVpd:(null===se||void 0===se?void 0:se.ciselna_rada_vpd)||null,cashboxPpd:(null===se||void 0===se?void 0:se.ciselna_rada_ppd)||null,month:new Date(m,s-1).toLocaleDateString("cs-CZ",{month:"long"}),year:m},We=(0,c.useMemo)(()=>{const e=(null===a||void 0===a?void 0:a.id)||"default",n=(null===se||void 0===se?void 0:se.id)||"noassignment";return"cashbook_".concat(e,"_").concat(n,"_").concat(m,"_").concat(s)},[null===a||void 0===a?void 0:a.id,null===se||void 0===se?void 0:se.id,m,s]),Re=(0,c.useMemo)(()=>Ae(a),[a]),Fe=(0,c.useMemo)(()=>{const e=Re.canReadAll||Re.canEditAll||Re.canDeleteAll||Re.canManage,n=ue&&ue.length>1;return e||n},[Re,ue]),Me=(0,c.useCallback)(e=>{const n=e.aktualizovano||e.vytvoreno,t=e.detail_items||[],o=t.length>0;return{id:"local_".concat(Date.now(),"_").concat(Math.random()),db_id:e.id,date:e.datum_zapisu,documentNumber:e.cislo_dokladu,description:e.obsah_zapisu||"",person:e.komu_od_koho||"",income:e.castka_prijem?parseFloat(e.castka_prijem):null,expense:e.castka_vydaj?parseFloat(e.castka_vydaj):null,balance:parseFloat(e.zustatek_po_operaci||0),lpCode:o?"":e.lp_kod||"",note:e.poznamka||"",isEditing:!1,detailItems:t.map(e=>({lp_kod:e.lp_kod||"",castka:parseFloat(e.castka||0),popis:e.popis||""})),last_modified_local:(new Date).toISOString(),last_synced_at:n,db_updated_at:n,changed:!1,sync_status:"synced"}},[]),He=(0,c.useCallback)((e,n)=>{const t={book_id:n,datum_zapisu:e.date,cislo_dokladu:e.documentNumber,obsah_zapisu:e.description||"",komu_od_koho:e.person||"",castka_prijem:e.income||0,castka_vydaj:e.expense||0,typ_dokladu:e.expense>0?"vydaj":"prijem",poznamka:e.note||""};return e.detailItems&&e.detailItems.length>0?(t.detail_items=e.detailItems,t.castka_celkem=e.detailItems.reduce((e,n)=>e+(n.castka||0),0),console.log("\ud83d\udce6 MULTI-LP payload:",{detail_items_count:e.detailItems.length,castka_celkem:t.castka_celkem,detail_items:e.detailItems})):e.lpCode&&(t.lp_kod=e.lpCode),t},[]),Ve=(0,c.useCallback)(async()=>{if(null===se||void 0===se||!se.id||null===a||void 0===a||!a.id)return null;try{var e,n;const i=se.uzivatel_id||a.id,c=await I.default.listBooks(i,m,s);if("ok"===c.status&&(null===(e=c.data)||void 0===e||null===(n=e.books)||void 0===n?void 0:n.length)>0){var t;const e=c.data.books[0];we(e.id),Ce(e),ge(e.stav_knihy||"aktivni"),z(parseFloat(e.prevod_z_predchoziho||0));const n=await I.default.getBook(e.id,!0);if("ok"===n.status&&null!==(t=n.data)&&void 0!==t&&t.entries){return{book:e,entries:n.data.entries.map(Me)}}return{book:e,entries:[]}}if(null!==se&&void 0!==se&&se.id){const e=await I.default.createBook(se.id,m,s,i);if("ok"===e.status){var o,r;const n=(null===(o=e.data)||void 0===o?void 0:o.book_id)||(null===(r=e.data)||void 0===r?void 0:r.id);if(n){const e=await I.default.getBook(n,!0);if("ok"===e.status){var l,d;const t=(null===(l=e.data)||void 0===l?void 0:l.book)||e.data;we(n),Ce(t),ge(t.stav_knihy||"aktivni"),z(parseFloat(t.prevod_z_predchoziho||0));return{book:t,entries:((null===(d=e.data)||void 0===d?void 0:d.entries)||[]).map(Me)}}}}const n=e.message||e.error||"Backend nevr\xe1til book_id";throw new Error("Nepoda\u0159ilo se vytvo\u0159it knihu: "+n)}throw console.warn("\u26d4 U\u017eivatel nem\xe1 p\u0159i\u0159azen\xed k \u017e\xe1dn\xe9 pokladn\u011b",{mainAssignment:se,userDetail:a}),new Error("NO_ASSIGNMENT")}catch(c){return console.error("\u274c Chyba p\u0159i zaji\u0161t\u011bn\xed existence knihy:",c),"NO_ASSIGNMENT"===c.message?(i("Bohu\u017eel V\xe1m pokladn\xed kniha nebyla p\u0159id\u011blena. Kontaktujte spr\xe1vce.","error"),$([]),we(null),null):(i("Chyba p\u0159i na\u010d\xedt\xe1n\xed/vytv\xe1\u0159en\xed knihy: "+c.message,"error"),null)}},[se,a,m,s,i,Me]),Ye=(0,c.useCallback)((e,n,t)=>{const o={entries:e,bookStatus:n,carryOverAmount:t,lastModified:(new Date).toISOString(),lastSyncTimestamp:Ee};localStorage.setItem(We,JSON.stringify(o))},[We,Ee]),Ze=(0,c.useCallback)(async function(e){const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||_e;if(n&&!Ne&&!Ne)try{Oe(!0);let a=0,r=0;for(const i of e)if("synced"!==i.sync_status||i.changed)try{if(i.db_id)await I.default.updateEntry(i.db_id,He(i,n));else{var t;const e=await I.default.createEntry(He(i,n));"ok"===e.status&&null!==(t=e.data)&&void 0!==t&&t.entry&&(i.db_id=e.data.entry.id,i.documentNumber=e.data.entry.cislo_dokladu)}i.changed=!1,i.sync_status="synced",i.last_synced_at=(new Date).toISOString(),a++}catch(o){console.error("\u274c Chyba p\u0159i sync entry:",o),i.sync_status="error",r++}const s=e.reduce((e,n)=>e+(n.income||0),0),l=e.reduce((e,n)=>e+(n.expense||0),0),d=_+s-l;await I.default.updateBook(n,{celkove_prijmy:s,celkove_vydaje:l,koncovy_stav:d,pocet_zaznamu:e.length}),De((new Date).toISOString()),r>0&&i("Synchronizov\xe1no ".concat(a," polo\u017eek, ").concat(r," chyb"),"warning")}catch(o){console.error("\u274c Chyba p\u0159i synchronizaci:",o),i("Chyba p\u0159i synchronizaci s datab\xe1z\xed","error")}finally{Oe(!1)}},[_e,Ne,_,i,He]);(0,c.useEffect)(()=>{if(null===a||void 0===a||!a.id||null===se||void 0===se||!se.id)return;const e=()=>{const e=localStorage.getItem(We),n=1===s?12:s-1,t=1===s?m-1:m,o="cashbook_".concat(a.id,"_").concat(t,"_").concat(n);let i=0;const r=localStorage.getItem(o);if(r)try{const e=JSON.parse(r),n=e.entries||[],t=e.carryOverAmount||0,o=n.reduce((e,n)=>e+(n.income||0),0);i=t+o-n.reduce((e,n)=>e+(n.expense||0),0)}catch(d){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed dat p\u0159edchoz\xedho m\u011bs\xedce:",d)}if(e)try{const n=JSON.parse(e);$(n.entries||[]),ge(n.bookStatus||"aktivni");const t=n.carryOverAmount;if("number"===typeof t)z(t);else{z(i);const e=(0,l.A)((0,l.A)({},n),{},{carryOverAmount:i});localStorage.setItem(We,JSON.stringify(e))}}catch(d){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed dat z localStorage:",d),$([]),z(i)}else $([]),z(i)};(async()=>{try{var n,t,o,i,r,s;const d=await Ve();if(!d)return null===_e?void $([]):void e();const{book:c,entries:u}=d;ge(c.stav_knihy||"aktivni");const m=c.uzivatel_jmeno_plne||"ID: ".concat(c.uzivatel_id),p=c.zamknul_spravce_jmeno_plne||null;xe({closedDate:c.uzavrena_uzivatelem_kdy||null,closedBy:m,lockedDate:c.zamknuta_spravcem_kdy||null,lockedBy:p});const h=1===(null===(n=window.performance)||void 0===n||null===(t=n.navigation)||void 0===t?void 0:t.type)||"reload"===(null===(o=window.performance)||void 0===o||null===(i=o.getEntriesByType)||void 0===i||null===(r=i.call(o,"navigation"))||void 0===r||null===(s=r[0])||void 0===s?void 0:s.type),v=localStorage.getItem(We);let g=[],f=null;if(v&&!h)try{const e=JSON.parse(v);g=e.entries||[],f=e.lastSyncTimestamp}catch(l){console.error("\u274c Chyba parsov\xe1n\xed localStorage:",l)}const x=c.aktualizovano&&f&&new Date(c.aktualizovano)>new Date(f);if(h)$(u),u.length>0?Ye(u,c.stav_knihy,parseFloat(c.prevod_z_predchoziho||0)):localStorage.removeItem(We),De((new Date).toISOString());else if(x)$(u),Ye(u,c.stav_knihy,parseFloat(c.prevod_z_predchoziho||0)),De((new Date).toISOString());else if(u.length>0)$(u),Ye(u,c.stav_knihy,parseFloat(c.prevod_z_predchoziho||0)),De((new Date).toISOString());else if(0===u.length&&g.length>0){We.includes("_".concat(se.id,"_"))&&We.includes("_".concat(a.id,"_"))?($(g),Ze(g,c.id)):($([]),localStorage.removeItem(We))}else $([]),localStorage.removeItem(We)}catch(l){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed z DB:",l),e()}})()},[We,s,m,null===a||void 0===a?void 0:a.id,null===se||void 0===se?void 0:se.id,null===se||void 0===se?void 0:se.cislo_pokladny]),(0,c.useEffect)(()=>{(async()=>{if(t&&null!==n&&void 0!==n&&n.username)try{te(!0);const e=await(0,N.Hy)({token:t,username:n.username}),o=Array.isArray(e)?e.map(e=>({code:e.cislo_lp||e.kod||e.code||e.id,name:e.nazev_uctu||e.nazev||e.name||e.popis||""})):[];ee(o),te(!1)}catch(e){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed LP k\xf3d\u016f:",e),i("Nepoda\u0159ilo se na\u010d\xedst LP k\xf3dy","error"),ee([]),te(!1)}else te(!1)})()},[t,null===n||void 0===n?void 0:n.username,i]),(0,c.useEffect)(()=>{const e=()=>{const e=document.querySelector("main");if(!e)return;const n=e.scrollTop;S(n>575)},n=document.querySelector("main");if(n)return n.addEventListener("scroll",e),e(),window.addEventListener("resize",e),()=>{n&&n.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]),(0,c.useEffect)(()=>{const e=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_e)try{const o=await I.default.getBook(_e,!0);if("ok"===o.status){var n,t;const a=(null===(n=o.data)||void 0===n?void 0:n.book)||o.data;if(a&&void 0!==a.prevod_z_predchoziho){const e=parseFloat(a.prevod_z_predchoziho||0);z(e)}const r=((null===(t=o.data)||void 0===t?void 0:t.entries)||[]).map(e=>(0,l.A)((0,l.A)({},e),{},{id:e.id||"temp-".concat(Date.now(),"-").concat(Math.random()),db_id:e.id,date:e.datum_zapisu||e.datum||(new Date).toISOString().split("T")[0],documentNumber:e.cislo_dokladu||"",description:e.obsah_zapisu||"",person:e.komu_od_koho||"",income:e.castka_prijem?parseFloat(e.castka_prijem):null,expense:e.castka_vydaj?parseFloat(e.castka_vydaj):null,balance:parseFloat(e.zustatek_po_operaci||0),lpCode:e.lp_kod||"",note:e.poznamka||"",isEditing:!1,changed:!1,sync_status:"synced"})),s=localStorage.getItem(We),d=s?JSON.parse(s):null;if(null!==d&&void 0!==d&&d.entries&&d.entries.some(e=>e.isEditing||e.changed)){const n=r.map(e=>{const n=d.entries.find(n=>n.id===e.id);return null!==n&&void 0!==n&&n.changed?n:e});$(n),e&&i("Data refreshnuta - zachov\xe1ny lok\xe1ln\xed zm\u011bny","info")}else $(r),e&&i("Data aktualizov\xe1na z DB","success")}}catch(o){console.error("\u274c Chyba p\u0159i auto-refresh:",o)}},n=()=>{!document.hidden&&_e&&e(!0)},t=setInterval(()=>{var n,t,o;const a=localStorage.getItem(We),i=a?JSON.parse(a):null,r=(null===i||void 0===i||null===(n=i.entries)||void 0===n?void 0:n.some(e=>e.isEditing))||!1,s=(null===i||void 0===i||null===(t=i.entries)||void 0===t?void 0:t.some(e=>e.changed||"synced"!==e.sync_status))||!1,l=(null===(o=G.current)||void 0===o?void 0:o.some(e=>e.isEditing))||!1;r||l||s||e(!1)},12e4);return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n),clearInterval(t)}},[_e,We,i]),(0,c.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.id)try{var e;ce(!0);const o=(null===(e=(await I.default.listAssignments(a.id,!0)).data)||void 0===e?void 0:e.assignments)||[];me(o);let r=o;if(Fe)try{var n;const e=await I.default.getCashboxListByPeriod(m,s,!0,!0);if("ok"===e.status&&null!==(n=e.data)&&void 0!==n&&n.pokladny){const n=e.data.pokladny.map(e=>(0,l.A)((0,l.A)({},e),{},{id:parseInt(e.prirazeni_id||e.id,10),pokladna_id:parseInt(e.id,10),cislo_pokladny:parseInt(e.cislo_pokladny,10),aktivni:parseInt(e.aktivni,10),uzivatel_id:parseInt(e.uzivatel_id,10),je_hlavni:1}));he(n),r=n}}catch(t){}let d=null;try{const e=localStorage.getItem("cashbook_selector_cashbox");if(e){const n=JSON.parse(e);d=r.find(e=>e.id===n.id)}}catch(t){}if(!d){d=r.find(e=>1===e.je_hlavni)||r[0]}d?le(d):i("Nem\xe1te p\u0159i\u0159azenou pokladnu.","error")}catch(o){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed dat:",o),i("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat: "+o.message,"error")}finally{ce(!1)}})()},[null===a||void 0===a?void 0:a.id,Fe,m,s,i]),(0,c.useEffect)(()=>{try{localStorage.setItem("cashbook_selector_period",JSON.stringify({year:m,month:s}))}catch(e){}},[m,s]),(0,c.useEffect)(()=>{(async()=>{try{je(!0);const e=await I.default.getSettings("cashbook_use_prefix");if("ok"===e.status&&e.data){const n=e.data.value;ye("1"===n||1===n)}else ye(!1)}catch(e){console.error("\u274c CASHBOOK V2: Chyba p\u0159i na\u010d\xedt\xe1n\xed nastaven\xed:",e),ye(!1)}finally{je(!1)}})()},[]);const Ue=_,Je=c.useMemo(()=>{const e=J.reduce((e,n)=>e+(n.income||0),0),n=J.reduce((e,n)=>e+(n.expense||0),0);return{totalIncome:e,totalExpenses:n,currentBalance:Ue+e-n,entryCount:J.length}},[J,_,Ue]),$e=(0,c.useCallback)(async()=>{if(null===se||void 0===se||!se.uzivatel_id)return{lastP:0,lastV:0};const e=se.uzivatel_id,n=1===s?12:s-1,t=1===s?m-1:m;try{var o,a,i;const r=await I.default.listBooks(e,t,n);if("ok"!==r.status||null===(o=r.data)||void 0===o||!o.books||0===r.data.books.length)return{lastP:0,lastV:0};const s=r.data.books[0],l=await I.default.getBook(s.id,!1);if("ok"===l.status&&(null===(a=l.data)||void 0===a||null===(i=a.entries)||void 0===i?void 0:i.length)>0){const e=l.data.entries,n=e.filter(e=>{var n;return null===(n=e.cislo_dokladu)||void 0===n?void 0:n.startsWith("P")}).map(e=>parseInt(e.cislo_dokladu.substring(1))||0),t=n.length>0?Math.max(...n):0,o=e.filter(e=>{var n;return null===(n=e.cislo_dokladu)||void 0===n?void 0:n.startsWith("V")}).map(e=>parseInt(e.cislo_dokladu.substring(1))||0);return{lastP:t,lastV:o.length>0?Math.max(...o):0}}return{lastP:0,lastV:0}}catch(r){return console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed \u010d\xedsel z p\u0159edchoz\xedho m\u011bs\xedce:",r),{lastP:0,lastV:0}}},[se,s,m]),Ge=e=>null===e||void 0===e?"":new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),qe=e=>{if(!e)return"";return new Date(e).toLocaleDateString("cs-CZ")},Xe=(0,c.useCallback)(async(e,n)=>{if(null===se||void 0===se||!se.uzivatel_id)return{hasClosedFuture:!1,closedMonths:[]};try{const a=se.uzivatel_id,i=[],r=new Date,s=r.getMonth()+1,l=r.getFullYear();let d=e,c=n+1;for(c>12&&(c=1,d++);d<l||d===l&&c<=s;){var t,o;const e=await I.default.listBooks(a,d,c);if("ok"===e.status&&(null===(t=e.data)||void 0===t||null===(o=t.books)||void 0===o?void 0:o.length)>0){const n=e.data.books[0];"uzavrena_uzivatelem"!==n.stav_knihy&&"zamknuta_spravcem"!==n.stav_knihy||i.push({year:d,month:c,status:n.stav_knihy,monthName:new Date(d,c-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})})}c++,c>12&&(c=1,d++)}return{hasClosedFuture:i.length>0,closedMonths:i}}catch(a){return console.error("\u274c Chyba p\u0159i kontrole budouc\xedch uzav\u0159en\xfdch m\u011bs\xedc\u016f:",a),{hasClosedFuture:!1,closedMonths:[]}}},[se]),Qe=(0,c.useCallback)(async()=>{if(!_e||null===se||void 0===se||!se.uzivatel_id)return void Be(!1);const e=se.uzivatel_id,n=1===s?12:s-1,t=1===s?m-1:m;try{var o,a;const i=await I.default.listBooks(e,t,n);if("ok"===i.status&&(null===(o=i.data)||void 0===o||null===(a=o.books)||void 0===a?void 0:a.length)>0){"aktivni"===i.data.books[0].stav_knihy?Be(!0):Be(!1)}else Be(!1)}catch(i){console.error("Chyba p\u0159i kontrole p\u0159edchoz\xedho m\u011bs\xedce:",i),Be(!1)}},[se,m,s,_e]);(0,c.useEffect)(()=>{Qe()},[Qe]);const nn=()=>{const e=Date.now(),n=new Date;let t;if(m===n.getFullYear()&&s===n.getMonth()+1)t=(new Date).toISOString().split("T")[0];else{const e=new Date(m,s,0),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");t="".concat(n,"-").concat(o,"-").concat(a)}const o={id:e,date:t,documentNumber:"",description:"",person:"",income:null,expense:null,balance:Je.currentBalance,lpCode:"",note:"",isEditing:!0,detailItems:[],hasDetails:!1};return $(e=>[...e,o]),requestAnimationFrame(()=>{const n=document.querySelector('input[data-entry-id="'.concat(e,'"][data-field="description"]'));n&&n.focus()}),e},tn=(0,c.useCallback)(async e=>{if(e&&e.id!==(null===se||void 0===se?void 0:se.id)){le(e);try{const n={id:e.id,cislo_pokladny:e.cislo_pokladny,uzivatel_id:e.uzivatel_id};localStorage.setItem("cashbook_selector_cashbox",JSON.stringify(n))}catch(n){}$([]),we(null),z(0),i("P\u0159epnuto na pokladnu ".concat(e.cislo_pokladny," - ").concat(e.nazev_pracoviste||e.nazev),"success")}},[se,i]),wn=e=>{$(n=>n.map(n=>n.id===e?(0,l.A)((0,l.A)({},n),{},{isEditing:!0}):n))},Sn=async e=>{var n;const t=J.find(n=>n.id===e);if(!t)return;if(!(null!==(n=t.description)&&void 0!==n&&n.trim())&&!t.income&&!t.expense&&(!t.detailItems||0===t.detailItems.length))return t.db_id?void An(e):void $(n=>{const t=n.filter(n=>n.id!==e),o={entries:t.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})),carryOverAmount:_,lastModified:(new Date).toISOString()};return localStorage.setItem(We,JSON.stringify(o)),t});let o=t.documentNumber;const a=t.income&&t.income>0,r=t.expense&&t.expense>0;let s=!1;if(!o&&(a||r)){const n=r&&!a;if(a&&!r){const n=J.filter(n=>{var t;return n.id!==e&&(null===(t=n.documentNumber)||void 0===t?void 0:t.startsWith("P"))}).map(e=>parseInt(e.documentNumber.substring(1))||0);let t;if(n.length>0)t=Math.max(...n)+1;else{const{lastP:e}=await $e();t=e+1}o="P".concat(String(t).padStart(3,"0")),s=!0,console.log("\u2728 Nov\xe1 entry - vygenerov\xe1no \u010d\xedslo: ".concat(o))}else if(n){const n=J.filter(n=>{var t;return n.id!==e&&(null===(t=n.documentNumber)||void 0===t?void 0:t.startsWith("V"))}).map(e=>parseInt(e.documentNumber.substring(1))||0);let t;if(n.length>0)t=Math.max(...n)+1;else{const{lastV:e}=await $e();t=e+1}o="V".concat(String(t).padStart(3,"0")),s=!0,console.log("\u2728 Nov\xe1 entry - vygenerov\xe1no \u010d\xedslo: ".concat(o))}}if(o&&!s){const n=o.charAt(0),t=r&&!a;if(a&&!r&&"P"!==n){const n=J.filter(n=>{var t;return n.id!==e&&(null===(t=n.documentNumber)||void 0===t?void 0:t.startsWith("P"))}).map(e=>parseInt(e.documentNumber.substring(1))||0);let t;if(n.length>0)t=Math.max(...n)+1;else{const{lastP:e}=await $e();t=e+1}o="P".concat(String(t).padStart(3,"0")),s=!0,console.log("\ud83d\udd04 Zm\u011bna typu: V \u2192 P, nov\xe9 \u010d\xedslo: ".concat(o)),i("Zm\u011bna typu dokladu: v\xfddaj \u2192 p\u0159\xedjem. Nov\xe9 \u010d\xedslo: ".concat(o),"info")}else if(t&&"V"!==n){const n=J.filter(n=>{var t;return n.id!==e&&(null===(t=n.documentNumber)||void 0===t?void 0:t.startsWith("V"))}).map(e=>parseInt(e.documentNumber.substring(1))||0);let t;if(n.length>0)t=Math.max(...n)+1;else{const{lastV:e}=await $e();t=e+1}o="V".concat(String(t).padStart(3,"0")),s=!0,console.log("\ud83d\udd04 Zm\u011bna typu: P \u2192 V, nov\xe9 \u010d\xedslo: ".concat(o)),i("Zm\u011bna typu dokladu: p\u0159\xedjem \u2192 v\xfddaj. Nov\xe9 \u010d\xedslo: ".concat(o),"info")}}const d=(0,l.A)((0,l.A)({},t),{},{documentNumber:o,isEditing:!1,changed:!0,sync_status:"pending",last_modified_local:(new Date).toISOString()});if($(n=>{const t=n.map(n=>n.id===e?d:n);return Ye(t,ve,_),t}),X(e),setTimeout(()=>{X(null)},5e3),_e)try{const n=He(d,_e);if(d.db_id){console.log("\ud83d\udd39 UPDATE payload:",{entry_id:d.db_id,cislo_dokladu:n.cislo_dokladu,typeChanged:s});const t=await I.default.updateEntry(d.db_id,n);var c,u;if("ok"===t.status)console.log("\ud83d\udd39 UPDATE result:",{backend_cislo:null===(c=t.data)||void 0===c||null===(u=c.entry)||void 0===u?void 0:u.cislo_dokladu,frontend_cislo:o,typeChanged:s}),$(n=>n.map(n=>{var a,i;return n.id===e?(0,l.A)((0,l.A)({},n),{},{documentNumber:s?o:(null===(a=t.data)||void 0===a||null===(i=a.entry)||void 0===i?void 0:i.cislo_dokladu)||n.documentNumber,sync_status:"synced",changed:!1,last_synced_at:(new Date).toISOString()}):n}))}else{var m;console.log("\ud83d\udd39 CREATE payload:",{cislo_dokladu:n.cislo_dokladu,typeChanged:s});const t=await I.default.createEntry(n);var p,h;if("ok"===t.status&&null!==(m=t.data)&&void 0!==m&&m.entry)console.log("\ud83d\udd39 CREATE result:",{backend_cislo:null===(p=t.data)||void 0===p||null===(h=p.entry)||void 0===h?void 0:h.cislo_dokladu,frontend_cislo:o}),$(n=>n.map(n=>n.id===e?(0,l.A)((0,l.A)({},n),{},{db_id:t.data.entry.id,documentNumber:s?o:t.data.entry.cislo_dokladu||o,sync_status:"synced",changed:!1,last_synced_at:(new Date).toISOString()}):n))}const t=J.reduce((e,n)=>e+(n.income||0),0),a=J.reduce((e,n)=>e+(n.expense||0),0),i=_+t-a;await I.default.updateBook(_e,{celkove_prijmy:t,celkove_vydaje:a,koncovy_stav:i})}catch(v){console.error("\u274c Chyba p\u0159i ukl\xe1d\xe1n\xed do DB:",v),i("Ulo\u017eeno lok\xe1ln\u011b, sync do DB selhala: "+v.message,"warning"),$(n=>n.map(n=>n.id===e?(0,l.A)((0,l.A)({},n),{},{sync_status:"error"}):n))}},An=e=>{const n=J.find(n=>n.id===e);!n||n.description||n.documentNumber?$(n=>n.map(n=>n.id===e?(0,l.A)((0,l.A)({},n),{},{isEditing:!1}):n)):$(n=>{const t=n.filter(n=>n.id!==e),o={entries:t.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})),carryOverAmount:_,lastModified:(new Date).toISOString()};return localStorage.setItem(We,JSON.stringify(o)),t})},Cn=(e,n)=>{"Enter"===e.key&&e.shiftKey?(e.preventDefault(),Sn(n)):"Escape"===e.key&&(e.preventDefault(),An(n))},Nn=(e,n,t)=>{$(o=>{const a=o.map(o=>{if(o.id!==e)return o;let a=t;if("income"===n||"expense"===n){const e=(0,l.A)((0,l.A)({},o),{},{[n]:a});return"income"===n?e.expense=null:e.income=null,e}if("date"===n){const e=new Date;new Date(t)>e&&i("Pozor: Datum je v budoucnosti","warning")}return(0,l.A)((0,l.A)({},o),{},{[n]:a})});if("income"===n||"expense"===n){let e=Ue;return a.map(n=>(n.income&&(e+=n.income),n.expense&&(e-=n.expense),(0,l.A)((0,l.A)({},n),{},{balance:e})))}return a})},On=()=>{try{const e={entries:J,carryOverAmount:_,lastModified:(new Date).toISOString()};localStorage.setItem(We,JSON.stringify(e))}catch(e){console.error("Chyba p\u0159i auto-ukl\xe1d\xe1n\xed do localStorage:",e)}},En=e=>{try{const n="Pokladni_kniha_".concat(Te.workplace,"_").concat(Te.month,"_").concat(Te.year);"CSV"===e?Dn(n):"PDF"===e&&Pn(n)}catch(n){i("Chyba p\u0159i exportu dat","error")}},Dn=e=>{const n=J.map((e,n)=>[n+1,qe(e.date),e.documentNumber||"",'"'.concat((e.description||"").replace(/"/g,'""'),'"'),'"'.concat((e.person||"").replace(/"/g,'""'),'"'),e.income?e.income.toFixed(2):"",e.expense?e.expense.toFixed(2):"",e.balance.toFixed(2),e.lpCode||"",'"'.concat((e.note||"").replace(/"/g,'""'),'"')]),t=[["\u0158\xe1dek","Datum","\u010c\xedslo dokladu","Obsah z\xe1pisu","Komu/Od koho","P\u0159\xedjmy (K\u010d)","V\xfddaje (K\u010d)","Z\u016fstatek (K\u010d)","LP k\xf3d","Pozn\xe1mka"].join(";"),...n.map(e=>e.join(";"))].join("\n"),o=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(o),a.download="".concat(e,".csv"),a.click(),URL.revokeObjectURL(a.href),i("CSV soubor byl exportov\xe1n","success")},Pn=async e=>{try{var n;const t={fullName:"".concat((null===a||void 0===a?void 0:a.titul_pred)||""," ").concat((null===a||void 0===a?void 0:a.jmeno)||""," ").concat((null===a||void 0===a?void 0:a.prijmeni)||""," ").concat((null===a||void 0===a?void 0:a.titul_za)||"").trim(),usekZkr:(null===a||void 0===a||null===(n=a.usek_zkr)||void 0===n?void 0:n[0])||"",lokalita:Ke()},o=await(0,O.x8)((0,k.jsx)(L,{organizationInfo:{organizationName:Te.organizationName,workplace:Ke(),cashboxNumber:Te.cashboxNumber,month:Te.month,year:Te.year},carryOverAmount:_,totals:Je,entries:J,generatedBy:t,bookStatus:{status:ve,closedDate:null===fe||void 0===fe?void 0:fe.closedDate,closedBy:null===fe||void 0===fe?void 0:fe.closedBy,lockedDate:null===fe||void 0===fe?void 0:fe.lockedDate,lockedBy:null===fe||void 0===fe?void 0:fe.lockedBy}})).toBlob(),r=URL.createObjectURL(o),s=document.createElement("a");s.href=r,s.download="".concat(e,".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),i("PDF report byl \xfasp\u011b\u0161n\u011b vygenerov\xe1n","success")}catch(t){console.error("Chyba p\u0159i generov\xe1n\xed PDF:",t),i("Chyba p\u0159i generov\xe1n\xed PDF reportu","error")}},Bn=null===a||void 0===a||null===(e=a.roles)||void 0===e?void 0:e.some(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role),Ln=o&&o("CASH_BOOK_MANAGE"),In=o&&o("CASH_BOOK_READ_ALL"),Kn=o&&o("CASH_BOOK_EDIT_ALL"),Tn=(o&&o("CASH_BOOK_DELETE_ALL"),o&&o("CASH_BOOK_EXPORT_ALL")),Wn=o&&o("CASH_BOOK_READ_OWN"),Rn=o&&o("CASH_BOOK_EDIT_OWN"),Fn=(o&&o("CASH_BOOK_DELETE_OWN"),o&&o("CASH_BOOK_EXPORT_OWN")),Mn=(o&&o("CASH_BOOK_CREATE"),(0,c.useMemo)(()=>{if(!se||!a)return!1;const e=String(se.uzivatel_id)===String(a.id),n=null===ue||void 0===ue?void 0:ue.some(e=>String(e.pokladna_id)===String(se.pokladna_id)&&String(e.uzivatel_id)===String(a.id));return e||n},[se,a,ue])),Hn=(0,c.useMemo)(()=>!("uzavrena_uzivatelem"===ve||"zamknuta_spravcem"===ve)&&(Bn||Ln||Kn||Rn&&Mn),[ve,Bn,Ln,Kn,Rn,Mn]),Vn=Bn||Ln||In||Wn&&Mn,Yn=Hn,Zn=Hn,Un=Hn,Jn=Bn||Ln||Tn||Fn&&Mn,$n=(o&&o("BUDGET_MANAGE"),(0,c.useMemo)(()=>{const e=new Date,n=e.getFullYear(),t=e.getMonth()+1;return m<n||m===n&&s<t},[m,s])),Gn=()=>{"zamknuta_spravcem"!==ve||Ln?"uzavrena_uzivatelem"!==ve||Ln||Rn&&Mn?_e?"zamknuta_spravcem"===ve?Y(!0):"uzavrena_uzivatelem"===ve&&H(!0):i("Chyba: Kniha nen\xed na\u010dtena","error"):i("Nem\xe1te opr\xe1vn\u011bn\xed odemknout tento m\u011bs\xedc","error"):i("Kniha je zam\u010den\xe1 spr\xe1vcem. Kontaktujte administr\xe1tora.","error")};return(0,c.useEffect)(()=>{const e=async e=>{if(e.shiftKey&&"Insert"===e.key&&Un){e.preventDefault();const n=J.find(e=>e.isEditing);n?(await Sn(n.id),nn(),requestAnimationFrame(()=>{const e=document.querySelector(".entry-row:last-child input");e&&e.focus()})):nn()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[Un,Je.currentBalance,J,On,nn]),de?(0,k.jsxs)(an,{children:[(0,k.jsxs)(rn,{children:[(0,k.jsxs)("h1",{children:[(0,k.jsx)(h.g,{icon:v.yqK}),"Pokladn\xed kniha"]}),(0,k.jsx)("p",{className:"subtitle",children:"Na\u010d\xedt\xe1n\xed..."})]}),(0,k.jsx)(fn,{children:(0,k.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,k.jsx)(h.g,{icon:v.yqK,size:"3x",style:{color:"#3b82f6",marginBottom:"1rem"},className:"fa-spin"}),(0,k.jsx)("h3",{children:"Na\u010d\xedt\xe1n\xed p\u0159i\u0159azen\xed pokladny..."}),(0,k.jsx)("p",{children:"Pros\xedm vy\u010dkejte"})]})})]}):se?Vn?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.mL,{styles:en}),(0,k.jsxs)(an,{children:[(0,k.jsxs)(rn,{className:"no-print",children:[(0,k.jsxs)("h1",{children:[(0,k.jsx)(h.g,{icon:v.yqK}),"Pokladn\xed kniha"]}),(0,k.jsx)("p",{className:"subtitle",children:(()=>{const e=(null===Se||void 0===Se?void 0:Se.uzivatel_jmeno_plne)||(null===Se||void 0===Se?void 0:Se.uzivatel_cele_jmeno)||(null===se||void 0===se?void 0:se.uzivatel_cele_jmeno)||(null!==se&&void 0!==se&&se.uzivatel_jmeno&&null!==se&&void 0!==se&&se.uzivatel_prijmeni?"".concat(se.uzivatel_jmeno," ").concat(se.uzivatel_prijmeni):null),n=(null===Se||void 0===Se?void 0:Se.lokalita_nazev)||(null===se||void 0===se?void 0:se.lokalita_nazev)||(null===se||void 0===se?void 0:se.lokalita_kod),t=(null===Se||void 0===Se?void 0:Se.usek_nazev)||(null===se||void 0===se?void 0:se.usek_nazev),o=Te.cashboxNumber,a=Te.cashboxVpd,i=Te.cashboxPpd;return(0,k.jsxs)(k.Fragment,{children:[e?"".concat(e," | "):"",n&&"".concat(n," | "),t&&"".concat(t," | "),"Pokladna \u010d. ",o,a&&i&&" | VPD: ".concat(a," | PPD: ").concat(i)]})})()})]}),Fe&&!de&&(0,k.jsx)("div",{className:"no-print",style:{marginBottom:"1rem"},children:(0,k.jsx)(ze,{currentCashbox:se,userCashboxes:ue,allCashboxes:pe,permissions:Re,canSeeAllCashboxes:Fe,onCashboxChange:tn,currentYear:m,currentMonth:s,onPeriodChange:(e,n)=>{j(e),d(n)}})}),(0,k.jsxs)(xn,{$visible:w,children:[(0,k.jsxs)("div",{className:"compact-title",children:[(0,k.jsx)(h.g,{icon:v.yqK}),"P\u0159ehled pokladny - ",Te.month," ",Te.year,(0,k.jsx)(K,{status:ve})]}),(0,k.jsxs)("div",{className:"compact-values",children:[(0,k.jsxs)("div",{className:"compact-item",children:[(0,k.jsx)("div",{className:"compact-label",children:"P\u0159evod"}),(0,k.jsx)("div",{className:"compact-value",children:Ge(_)})]}),(0,k.jsxs)("div",{className:"compact-item",children:[(0,k.jsx)("div",{className:"compact-label",children:"P\u0159\xedjmy"}),(0,k.jsx)("div",{className:"compact-value positive",children:Ge(Je.totalIncome)})]}),(0,k.jsxs)("div",{className:"compact-item",children:[(0,k.jsx)("div",{className:"compact-label",children:"V\xfddaje"}),(0,k.jsx)("div",{className:"compact-value negative",children:Ge(Je.totalExpenses)})]}),(0,k.jsxs)("div",{className:"compact-item",children:[(0,k.jsx)("div",{className:"compact-label",children:"Z\u016fstatek"}),(0,k.jsx)("div",{className:"compact-value ".concat(Je.currentBalance>=0?"positive":"negative"),children:Ge(Je.currentBalance)})]}),(0,k.jsxs)("div",{className:"compact-item",children:[(0,k.jsx)("div",{className:"compact-label",children:"Po\u010det operac\xed"}),(0,k.jsx)("div",{className:"compact-value",children:Je.entryCount})]})]})]}),(0,k.jsxs)(fn,{className:"no-print",children:[(0,k.jsxs)("div",{className:"organization-info",children:[(0,k.jsxs)("div",{className:"info-text",children:[(0,k.jsxs)("h3",{children:[(0,k.jsx)(h.g,{icon:v.iW_,style:{marginRight:"0.5rem"}}),"P\u0159ehled pokladny",(0,k.jsx)("span",{style:{marginLeft:"1rem",display:"inline-flex",verticalAlign:"middle"},children:(0,k.jsx)(K,{status:ve})})]}),(0,k.jsxs)("p",{children:["Aktu\xe1ln\xed stav pokladn\xed knihy za m\u011bs\xedc ",Te.month," ",Te.year]})]}),(Rn&&Mn||Ln)&&(0,k.jsxs)("div",{className:"info-actions",children:["aktivni"===ve&&(0,k.jsxs)(dn,{type:"button",variant:"warning",onClick:()=>{Ln||Rn&&Mn?$n?_e?W(!0):i("Chyba: Kniha nen\xed na\u010dtena","error"):i("Nelze uzav\u0159\xedt aktu\xe1ln\xed m\u011bs\xedc. Uzav\u0159\xedt lze a\u017e od 1. dne n\xe1sleduj\xedc\xedho m\u011bs\xedce.","warning"):i("Nem\xe1te opr\xe1vn\u011bn\xed uzav\u0159\xedt tento m\u011bs\xedc","error")},disabled:!$n,title:$n?"Uzav\u0159\xedt m\u011bs\xedc - knihu nebude mo\u017en\xe9 editovat":"Nelze uzav\u0159\xedt aktu\xe1ln\xed m\u011bs\xedc. Uzav\u0159\xedt lze a\u017e od 1. dne n\xe1sleduj\xedc\xedho m\u011bs\xedce.",children:[(0,k.jsx)(h.g,{icon:v.e68}),"Uzav\u0159\xedt m\u011bs\xedc"]}),Ln&&("aktivni"===ve||"uzavrena_uzivatelem"===ve)&&(0,k.jsx)(dn,{type:"button",variant:"danger",onClick:()=>{Ln?$n?_e?F(!0):i("Chyba: Kniha nen\xed na\u010dtena","error"):i("Nelze zamknout aktu\xe1ln\xed m\u011bs\xedc. Zamknout lze a\u017e od 1. dne n\xe1sleduj\xedc\xedho m\u011bs\xedce.","warning"):i("Nem\xe1te opr\xe1vn\u011bn\xed zamknout knihu","error")},disabled:!$n,title:$n?"Zamknout knihu spr\xe1vcem - nelze editovat ani odemknout":"Nelze zamknout aktu\xe1ln\xed m\u011bs\xedc. Zamknout lze a\u017e od 1. dne n\xe1sleduj\xedc\xedho m\u011bs\xedce.",children:"\ud83d\udd12 Zamknout"}),"uzavrena_uzivatelem"===ve&&(0,k.jsx)(dn,{type:"button",variant:"primary",$filled:!0,onClick:Gn,title:"Otev\u0159\xedt m\u011bs\xedc pro editaci",children:"\ud83d\udd13 Otev\u0159\xedt m\u011bs\xedc"}),"zamknuta_spravcem"===ve&&Ln&&(0,k.jsx)(dn,{type:"button",variant:"primary",$filled:!0,onClick:Gn,title:"Odemknout knihu zam\u010denou spr\xe1vcem",children:"\ud83d\udd13 Odemknout (Admin)"})]})]}),(0,k.jsxs)("div",{className:"summary-grid",children:[(0,k.jsxs)("div",{className:"summary-item info",children:[(0,k.jsx)("div",{className:"label",children:"P\u0159evod z p\u0159edchoz\xedho m\u011bs\xedce"}),(0,k.jsx)("div",{className:"value",children:Ge(_)})]}),(0,k.jsxs)("div",{className:"summary-item positive",children:[(0,k.jsx)("div",{className:"label",children:"P\u0159\xedjmy v m\u011bs\xedci"}),(0,k.jsx)("div",{className:"value",children:Ge(Je.totalIncome)})]}),(0,k.jsxs)("div",{className:"summary-item negative",children:[(0,k.jsx)("div",{className:"label",children:"V\xfddaje v m\u011bs\xedci"}),(0,k.jsx)("div",{className:"value",children:Ge(Je.totalExpenses)})]}),(0,k.jsxs)("div",{className:"summary-item ".concat(Je.currentBalance>=0?"positive":"negative"),children:[(0,k.jsx)("div",{className:"label",children:"Koncov\xfd stav m\u011bs\xedce"}),(0,k.jsx)("div",{className:"value",children:Ge(Je.currentBalance)})]}),(0,k.jsxs)("div",{className:"summary-item",children:[(0,k.jsx)("div",{className:"label",children:"Po\u010det operac\xed"}),(0,k.jsx)("div",{className:"value",children:Je.entryCount})]})]})]}),(0,k.jsxs)(cn,{className:"no-print",children:[(0,k.jsx)(un,{children:(0,k.jsxs)("h2",{children:[Te.month," ",Te.year]})}),(0,k.jsxs)(mn,{children:[(0,k.jsxs)(pn,{onClick:async()=>{let e=s-1,n=m;if(e<1&&(e=12,n--),null!==se&&void 0!==se&&se.uzivatel_id)try{var t;const o=se.uzivatel_id,a=await I.default.listBooks(o,n,e);if(null===(t=a.data)||void 0===t||!t.books||0===a.data.books.length){const{hasClosedFuture:t,closedMonths:o}=await Xe(n,e);if(t)return void U(!0)}}catch(a){console.error("\u274c Chyba p\u0159i kontrole existence knihy:",a)}const o={entries:J.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})),carryOverAmount:_,lastModified:(new Date).toISOString()};localStorage.setItem(We,JSON.stringify(o)),d(e),j(n)},title:"P\u0159edchoz\xed m\u011bs\xedc",children:[(0,k.jsx)(h.g,{icon:v.Wzs}),"P\u0159edchoz\xed"]}),(0,k.jsxs)(pn,{onClick:()=>{const e={entries:J.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})),carryOverAmount:_,lastModified:(new Date).toISOString()};localStorage.setItem(We,JSON.stringify(e));const n=new Date;d(n.getMonth()+1),j(n.getFullYear())},disabled:s===(new Date).getMonth()+1&&m===(new Date).getFullYear(),title:"Aktu\xe1ln\xed m\u011bs\xedc",children:[(0,k.jsx)(h.g,{icon:v.isQ}),"Nyn\xed"]}),(0,k.jsxs)(pn,{onClick:()=>{const e=new Date,n=e.getMonth()+1,t=e.getFullYear();if(m===t&&s===n)return void i("Nelze p\u0159ej\xedt do budoucnosti","warning");const o={entries:J.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})),carryOverAmount:_,lastModified:(new Date).toISOString()};localStorage.setItem(We,JSON.stringify(o)),12===s?(d(1),j(e=>e+1)):d(e=>e+1)},disabled:s===(new Date).getMonth()+1&&m===(new Date).getFullYear(),title:"N\xe1sleduj\xedc\xed m\u011bs\xedc",children:["Dal\u0161\xed",(0,k.jsx)(h.g,{icon:v.XkK})]})]})]}),Pe&&(0,k.jsxs)(hn,{children:[(0,k.jsx)(vn,{children:(0,k.jsx)(h.g,{icon:v.zpE})}),(0,k.jsxs)(gn,{children:[(0,k.jsx)("h4",{children:"\u26a0\ufe0f P\u0159edchoz\xed m\u011bs\xedc nen\xed uzav\u0159en\xfd"}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Pozor:"})," P\u0159edchoz\xed m\u011bs\xedc (",new Date(1===s?m-1:m,(1===s?12:s-1)-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"}),") nen\xed uzav\u0159en."]}),(0,k.jsxs)("p",{children:["\u010c\xedsla doklad\u016f ",(0,k.jsx)("strong",{children:"PPD a VPD"})," v tomto m\u011bs\xedci se mohou po uzav\u0159en\xed p\u0159edchoz\xedho m\u011bs\xedce",(0,k.jsx)("strong",{children:" automaticky p\u0159epo\u010d\xedtat"})," pro zachov\xe1n\xed spr\xe1vn\xe9 posloupnosti."]}),(0,k.jsx)("p",{className:"tip",children:"\ud83d\udca1 Doporu\u010dujeme nejprve uzav\u0159\xedt p\u0159edchoz\xed m\u011bs\xedce chronologicky od nejstar\u0161\xedho."})]})]}),(0,k.jsxs)("div",{className:"cashbook-print-area",children:[(0,k.jsxs)("div",{className:"print-header",style:{display:"none",textAlign:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #1e40af"},children:[(0,k.jsx)("h1",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#1e40af",margin:"0 0 0.5rem 0"},children:"Pokladn\xed kniha"}),(0,k.jsx)("p",{style:{fontSize:"1rem",color:"#4b5563",margin:"0"},children:(()=>{const e=(null===se||void 0===se?void 0:se.uzivatel_cele_jmeno)||(null!==se&&void 0!==se&&se.uzivatel_jmeno&&null!==se&&void 0!==se&&se.uzivatel_prijmeni?"".concat(se.uzivatel_jmeno," ").concat(se.uzivatel_prijmeni):null),n=(null===se||void 0===se?void 0:se.nazev_pracoviste)||(null===se||void 0===se?void 0:se.kod_pracoviste),t=null===se||void 0===se?void 0:se.cislo_pokladny;return(0,k.jsxs)(k.Fragment,{children:[e||"Bez u\u017eivatele"," | ",n||"Bez odd\u011blen\xed"," | ","Pokladna \u010d. ",t||Te.cashboxNumber," | ",Te.month," ",Te.year]})})()}),(0,k.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.5rem 0 0 0"},children:["VPD: ",Te.cashboxVpd||"N/A"," | PPD: ",Te.cashboxPpd||"N/A"," | P\u0159evod z p\u0159edchoz\xedho m\u011bs\xedce: ",Ge(_)]})]}),(0,k.jsxs)(bn,{children:[(0,k.jsxs)(yn,{children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"row-number",children:"#"}),(0,k.jsx)("th",{className:"date-cell",children:"Datum"}),(0,k.jsx)("th",{className:"document-cell",children:"Doklad \u010d."}),(0,k.jsx)("th",{className:"description-cell",children:"Obsah z\xe1pisu"}),(0,k.jsx)("th",{className:"person-cell",children:"Komu/Od koho"}),(0,k.jsxs)("th",{className:"amount-cell income",children:["P\u0159\xedjmy",(0,k.jsx)("br",{}),"(K\u010d)"]}),(0,k.jsxs)("th",{className:"amount-cell expense",children:["V\xfddaje",(0,k.jsx)("br",{}),"(K\u010d)"]}),(0,k.jsxs)("th",{className:"balance-cell",children:["Z\u016fstatek",(0,k.jsx)("br",{}),"(K\u010d)"]}),(0,k.jsx)("th",{className:"lp-code-cell",children:"LP k\xf3d"}),(0,k.jsx)("th",{className:"note-cell",children:"Pozn\xe1mka"}),Yn&&(0,k.jsx)("th",{className:"actions-cell",children:"Akce"})]})}),(0,k.jsx)("tbody",{children:J.map((e,n)=>{const t=e.id===q;return(0,k.jsxs)(c.Fragment,{children:[(0,k.jsxs)("tr",{onDoubleClick:()=>{Yn&&!e.isEditing&&wn(e.id)},style:{cursor:Yn&&!e.isEditing?"pointer":"default",animation:t?"".concat(on," 1s ease-in-out 5"):"none"},children:[(0,k.jsx)("td",{className:"row-number",children:n+1}),(0,k.jsx)("td",{className:"date-cell",children:e.isEditing?(0,k.jsx)(b.A,{value:e.date,onChange:n=>Nn(e.id,"date",n),placeholder:"Vyberte datum",limitToMonth:s,limitToYear:m}):qe(e.date)}),(0,k.jsx)("td",{className:"document-cell",children:(()=>{if(!e.documentNumber)return"";if(e.documentNumber.includes("-")){const n=e.documentNumber.charAt(0);return(0,k.jsx)("span",{title:"\u010c\xedslo dokladu: ".concat(e.documentNumber),style:{cursor:"help",fontWeight:"500",color:"P"===n?"#059669":"#dc2626"},children:e.documentNumber})}if(!be)return e.documentNumber;const n=e.documentNumber.charAt(0),t=e.documentNumber.substring(1);let o="";"V"===n&&Te.cashboxVpd?o=Te.cashboxVpd:"P"===n&&Te.cashboxPpd&&(o=Te.cashboxPpd);const a=o?"".concat(n).concat(o,"-").concat(t):e.documentNumber;return(0,k.jsx)("span",{title:"Po\u0159adov\xe9 \u010d\xedslo dokladu v roce: ".concat(e.documentNumber),style:{cursor:"help",fontWeight:"500",color:"P"===n?"#059669":"#dc2626"},children:a})})()}),(0,k.jsx)("td",{className:"description-cell",children:e.isEditing?(0,k.jsx)(jn,{value:e.description,onChange:n=>Nn(e.id,"description",n.target.value),onKeyDown:n=>Cn(n,e.id),onBlur:On,"data-entry-id":e.id,"data-field":"description",placeholder:"Popis operace"}):e.description}),(0,k.jsx)("td",{className:"person-cell",children:e.isEditing?(0,k.jsx)(jn,{value:e.person,onChange:n=>Nn(e.id,"person",n.target.value),onKeyDown:n=>Cn(n,e.id),onBlur:On,placeholder:"Jm\xe9no osoby"}):e.person}),(0,k.jsx)("td",{className:"amount-cell income",children:e.isEditing?(0,k.jsx)(kn,{children:(0,k.jsx)(jn,{type:"text",value:e.income?e.income.toLocaleString("cs-CZ",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>{const t=n.target.value.replace(/[^\d,.-]/g,"").replace(",","."),o=parseFloat(t);Nn(e.id,"income",isNaN(o)?null:o)},onKeyDown:n=>Cn(n,e.id),onBlur:On,placeholder:"0",className:"amount-input"})}):e.income?Ge(e.income):""}),(0,k.jsx)("td",{className:"amount-cell expense",children:e.isEditing?(0,k.jsx)(kn,{children:(0,k.jsx)(jn,{type:"text",value:e.expense?e.expense.toLocaleString("cs-CZ",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:n=>{const t=n.target.value.replace(/[^\d,.-]/g,"").replace(",","."),o=parseFloat(t);Nn(e.id,"expense",isNaN(o)?null:o)},onKeyDown:n=>Cn(n,e.id),onBlur:On,placeholder:"0",className:"amount-input"})}):e.expense?Ge(e.expense):""}),(0,k.jsx)("td",{className:"balance-cell",children:Ge(e.balance)}),(0,k.jsx)("td",{className:"lp-code-cell",children:e.isEditing?(0,k.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[!(e.detailItems&&e.detailItems.length>0)&&(0,k.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,k.jsx)(A,{value:e.lpCode||"",onChange:n=>Nn(e.id,"lpCode",n.target.value),onKeyDown:n=>Cn(n,e.id),onBlur:On,options:Q,placeholder:ne?"Na\u010d\xedt\xe1n\xed...":e.expense>0?"LP k\xf3d (povinn\xfd) *":"LP k\xf3d (nepovinn\xfd)",disabled:ne,loading:ne,hasError:e.expense>0&&!e.lpCode}),e.expense>0&&!e.lpCode&&(0,k.jsx)("div",{style:{position:"absolute",top:"100%",left:0,fontSize:"10px",color:"#f44336",marginTop:"2px",whiteSpace:"nowrap"},children:"\u26a0 LP k\xf3d je povinn\xfd u v\xfddaj\u016f"})]}),e.expense>0&&(0,k.jsx)("button",{onClick:()=>{oe===e.id?(ae(null),re([])):(ae(e.id),re(e.detailItems&&e.detailItems.length>0?[...e.detailItems]:[{popis:"",castka:0,lp_kod:"",lp_popis:""}]))},style:{padding:"4px 8px",fontSize:"12px",background:oe===e.id?"#ff9800":e.detailItems&&e.detailItems.length>0?"#4caf50":"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",minWidth:"24px"},title:oe===e.id?"Zav\u0159\xedt panel":e.detailItems&&e.detailItems.length>0?e.detailItems.map(e=>"".concat(e.lp_kod,": ").concat(e.castka," K\u010d").concat(e.popis?" - "+e.popis:"")).join("\n"):"P\u0159idat v\xedce LP k\xf3d\u016f",children:oe===e.id?"\u25bc":e.detailItems&&e.detailItems.length>0?"".concat(e.detailItems.length,"\xd7"):"+"}),e.detailItems&&e.detailItems.length>0&&(0,k.jsxs)("div",{style:{fontSize:"11px",color:"#4caf50",fontWeight:"bold"},children:["Multi-LP (",e.detailItems.length,"\xd7)"]})]}):(0,k.jsx)("div",{children:e.detailItems&&e.detailItems.length>0?(0,k.jsx)("div",{style:{fontSize:"11px",color:"#666"},children:e.detailItems.map((e,n)=>(0,k.jsxs)("div",{children:[e.lp_kod," (",e.castka," K\u010d)"]},n))}):e.lpCode||"-"})}),(0,k.jsx)("td",{className:"note-cell",children:e.isEditing?(0,k.jsx)(jn,{value:e.note,onChange:n=>Nn(e.id,"note",n.target.value),onKeyDown:n=>Cn(n,e.id),onBlur:On,placeholder:"Pozn\xe1mka"}):e.note}),Yn&&(0,k.jsx)("td",{className:"actions-cell",children:e.isEditing?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(_n,{onClick:()=>Sn(e.id),title:"Potvrdit",children:(0,k.jsx)(h.g,{icon:v.e68})})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(_n,{onClick:()=>wn(e.id),title:"Editovat",children:(0,k.jsx)(h.g,{icon:v.MT7})}),Zn&&(0,k.jsx)(_n,{onClick:()=>{return n=e.id,B(n),void D(!0);var n},title:"Smazat",danger:!0,children:(0,k.jsx)(h.g,{icon:v.yLS})})]})})]}),oe===e.id&&(0,k.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,k.jsx)("td",{colSpan:1,style:{padding:0}}),(0,k.jsx)("td",{colSpan:2,style:{padding:0}}),(0,k.jsx)("td",{colSpan:Yn?8:7,style:{padding:"16px 16px 16px 8px"},children:(0,k.jsxs)("div",{style:{background:"white",border:"2px solid #2196f3",borderRadius:"8px",padding:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",borderBottom:"2px solid #e0e0e0",paddingBottom:"8px"},children:[(0,k.jsxs)("h4",{style:{margin:0,color:"#2196f3"},children:["\ud83d\udccb Rozpad LP k\xf3d\u016f pro doklad ",e.documentNumber||"(nov\xfd)"]}),(0,k.jsxs)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:["Celkem: ",e.expense||0," K\u010d"]})]}),(0,k.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"12px",tableLayout:"fixed"},children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{style:{background:"#f5f5f5"},children:[(0,k.jsx)("th",{style:{padding:"8px",textAlign:"left",border:"1px solid #ddd",width:"50%"},children:"Popis polo\u017eky"}),(0,k.jsx)("th",{style:{padding:"8px",textAlign:"left",border:"1px solid #ddd",width:"18%"},children:"\u010c\xe1stka"}),(0,k.jsx)("th",{style:{padding:"8px",textAlign:"left",border:"1px solid #ddd",width:"25%"},children:"LP k\xf3d"}),(0,k.jsx)("th",{style:{padding:"8px",textAlign:"center",border:"1px solid #ddd",width:"7%"}})]})}),(0,k.jsx)("tbody",{children:ie.map((e,n)=>{const t=!e.lp_kod||Q.find(n=>n.code===e.lp_kod);return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:(0,k.jsx)("input",{type:"text",value:e.popis||"",onChange:e=>{const t=[...ie];t[n].popis=e.target.value,re(t)},style:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",border:"1px solid #ccc",borderRadius:"4px",boxSizing:"border-box"},placeholder:"Nap\u0159. Oprava kavovaru"})}),(0,k.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:(0,k.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,k.jsx)("input",{type:"text",value:e.castka?e.castka.toLocaleString("cs-CZ",{minimumFractionDigits:0,maximumFractionDigits:2}):"",onChange:e=>{const t=[...ie],o=e.target.value.replace(/[^\d,.-]/g,"").replace(",","."),a=parseFloat(o);t[n].castka=isNaN(a)?0:a,re(t)},style:{width:"100%",padding:"0.5rem 35px 0.5rem 0.5rem",fontSize:"0.9rem",border:"1px solid #ccc",borderRadius:"4px",textAlign:"right",boxSizing:"border-box"},placeholder:"0"}),(0,k.jsx)("span",{style:{position:"absolute",right:"8px",color:"#374151",fontWeight:"600",fontSize:"13px",pointerEvents:"none",userSelect:"none"},children:"K\u010d"})]})}),(0,k.jsxs)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:[(0,k.jsx)(A,{value:e.lp_kod||"",onChange:e=>{const t=[...ie],o=Q.find(n=>n.code===e.target.value);t[n].lp_kod=e.target.value,t[n].lp_popis=(null===o||void 0===o?void 0:o.name)||"",re(t)},options:Q,placeholder:ne?"Na\u010d\xedt\xe1n\xed...":"LP k\xf3d (nap\u0159. LPIT01)",disabled:ne,loading:ne,hasError:!t}),!t&&(0,k.jsx)("div",{style:{color:"#f44336",fontSize:"10px",marginTop:"2px"},children:"\u26a0 Neplatn\xfd k\xf3d"})]}),(0,k.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center"},children:(0,k.jsx)("button",{onClick:()=>{const e=ie.filter((e,t)=>t!==n);re(e)},style:{padding:"0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"18px",minWidth:"40px",display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1},title:"Smazat \u0159\xe1dek",children:"\xd7"})})]},n)})})]}),(0,k.jsx)("button",{onClick:()=>{re([...ie,{popis:"",castka:0,lp_kod:"",lp_popis:""}])},style:{padding:"6px 12px",background:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",marginBottom:"12px"},children:"+ P\u0159idat polo\u017eku"}),(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",paddingTop:"12px",borderTop:"2px solid #e0e0e0"},children:[(0,k.jsxs)("div",{style:{fontSize:"14px"},children:["Sou\u010det polo\u017eek: ",(0,k.jsxs)("strong",{children:[ie.reduce((e,n)=>e+(n.castka||0),0).toFixed(2)," K\u010d"]}),Math.abs(ie.reduce((e,n)=>e+(n.castka||0),0)-(e.expense||0))>.01&&(0,k.jsx)("span",{style:{color:"#f44336",marginLeft:"8px"},children:"\u26a0 Nesouhlas\xed s \u010d\xe1stkou v\xfddaje!"})]}),(0,k.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,k.jsx)("button",{onClick:()=>{ae(null),re([])},style:{padding:"8px 16px",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Zru\u0161it"}),(0,k.jsx)("button",{onClick:()=>{const n=ie.reduce((e,n)=>e+(n.castka||0),0);if(Math.abs(n-(e.expense||0))>.01)x.oR.error("\u26a0\ufe0f Sou\u010det polo\u017eek (".concat(n.toFixed(2)," K\u010d) se neshoduje s \u010d\xe1stkou v\xfddaje (").concat(e.expense," K\u010d)"),{position:"top-center",autoClose:4e3});else{for(const e of ie){if(!e.lp_kod)return void x.oR.warning("\u26a0\ufe0f V\u0161echny polo\u017eky mus\xed m\xedt vybran\xfd LP k\xf3d",{position:"top-center",autoClose:3e3});if(!Q.find(n=>n.code===e.lp_kod))return void x.oR.error("\u274c LP k\xf3d '".concat(e.lp_kod,"' nen\xed platn\xfd"),{position:"top-center",autoClose:3e3})}$(n=>n.map(n=>n.id===e.id?(0,l.A)((0,l.A)({},n),{},{detailItems:ie,lpCode:"",hasDetails:!0,changed:!0,sync_status:"pending"}):n)),x.oR.success("\u2705 Ulo\u017eeno ".concat(ie.length," LP k\xf3d\u016f pod dokladem ").concat(e.documentNumber),{position:"top-right",autoClose:2e3}),ae(null),re([]),On()}},style:{padding:"8px 16px",background:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"\ud83d\udcbe Ulo\u017eit"})]})]})]})})]},"detail-".concat(e.id))]},e.id)})})]}),Un&&(0,k.jsx)("div",{style:{padding:"1rem"},children:(0,k.jsxs)(zn,{onClick:()=>{const e=J.find(e=>e.isEditing);if(e){!e.documentNumber&&!e.description&&!e.person&&!e.income&&!e.expense&&!e.lpCode&&!e.note?requestAnimationFrame(()=>{const n=document.querySelector('input[data-entry-id="'.concat(e.id,'"][data-field="description"]'));n&&n.focus()}):(u.flushSync(()=>{$(e=>e.map(e=>(0,l.A)((0,l.A)({},e),{},{isEditing:!1})))}),On(),nn())}else nn()},children:[(0,k.jsx)(h.g,{icon:v.QLR}),"P\u0159idat nov\xfd \u0159\xe1dek"]})})]}),"zamknuta_spravcem"===ve&&(0,k.jsxs)("div",{className:"no-print",style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",border:"2px solid #dc2626",borderRadius:"8px",padding:"1rem 1.25rem",marginTop:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,k.jsx)("div",{style:{fontSize:"2rem",color:"#dc2626",flexShrink:0},children:(0,k.jsx)(h.g,{icon:v.DW4})}),(0,k.jsxs)("div",{style:{flex:1},children:[(0,k.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#991b1b",fontSize:"1rem",fontWeight:"600"},children:"\ud83d\udd12 Pokladn\xed kniha je fin\xe1ln\u011b uzam\u010dena spr\xe1vcem"}),(0,k.jsxs)("p",{style:{margin:0,color:"#7f1d1d",fontSize:"0.875rem",lineHeight:"1.4"},children:["Tento m\u011bs\xedc byl zam\u010den administr\xe1torem a je ji\u017e za\xfa\u010dtov\xe1n.",(0,k.jsx)("strong",{children:" Nelze p\u0159id\xe1vat, upravovat ani mazat z\xe1znamy."})," ","V p\u0159\xedpad\u011b pot\u0159eby zm\u011bn kontaktujte spr\xe1vce pokladn\xed knihy."]})]})]})]}),"aktivni"===ve&&(0,k.jsxs)("div",{className:"no-print",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"2rem",padding:"0.75rem 1rem",marginTop:"0.75rem",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"8px",fontSize:"0.8rem",fontWeight:600,color:"#475569",border:"1px solid #cbd5e1",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"Shift"}),(0,k.jsx)("span",{children:"+"}),(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"Insert"}),(0,k.jsx)("span",{style:{marginLeft:"0.25rem"},children:"Nov\xfd \u0159\xe1dek"})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"Shift"}),(0,k.jsx)("span",{children:"+"}),(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"Enter"}),(0,k.jsx)("span",{style:{marginLeft:"0.25rem"},children:"Ulo\u017eit a ukon\u010dit editaci"})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"ESC"}),(0,k.jsx)("span",{style:{marginLeft:"0.25rem"},children:"Zru\u0161it editaci bez ulo\u017een\xed"})]}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,k.jsx)("kbd",{style:{background:"#ffffff",border:"1px solid #cbd5e1",borderRadius:"4px",padding:"0.15rem 0.4rem",fontSize:"0.75rem",fontFamily:"monospace",fontWeight:700,color:"#1e40af",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"Double-click"}),(0,k.jsx)("span",{style:{marginLeft:"0.25rem"},children:"Editovat \u0159\xe1dek"})]})]}),(0,k.jsxs)(sn,{className:"no-print",style:{marginTop:"1rem"},children:[(0,k.jsx)(ln,{}),(0,k.jsx)(ln,{children:Jn&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(dn,{type:"button",onClick:()=>En("CSV"),children:[(0,k.jsx)(h.g,{icon:v.o1d}),"Export CSV"]}),(0,k.jsxs)(dn,{type:"button",onClick:()=>En("PDF"),children:[(0,k.jsx)(h.g,{icon:v.JxU}),"Export PDF"]}),(0,k.jsxs)(dn,{type:"button",onClick:async()=>{try{var e;const n={fullName:"".concat((null===a||void 0===a?void 0:a.titul_pred)||""," ").concat((null===a||void 0===a?void 0:a.jmeno)||""," ").concat((null===a||void 0===a?void 0:a.prijmeni)||""," ").concat((null===a||void 0===a?void 0:a.titul_za)||"").trim(),usekZkr:(null===a||void 0===a||null===(e=a.usek_zkr)||void 0===e?void 0:e[0])||"",lokalita:Ke()},t=await(0,O.x8)((0,k.jsx)(L,{organizationInfo:{organizationName:Te.organizationName,workplace:Ke(),cashboxNumber:Te.cashboxNumber,month:Te.month,year:Te.year},carryOverAmount:_,totals:Je,entries:J,generatedBy:n,bookStatus:{status:ve,closedDate:null===fe||void 0===fe?void 0:fe.closedDate,closedBy:null===fe||void 0===fe?void 0:fe.closedBy,lockedDate:null===fe||void 0===fe?void 0:fe.lockedDate,lockedBy:null===fe||void 0===fe?void 0:fe.lockedBy}})).toBlob(),o=URL.createObjectURL(t),r=window.open(o,"_blank");r?r.onload=()=>{r.print(),r.onafterprint=()=>{URL.revokeObjectURL(o)}}:(URL.revokeObjectURL(o),i("Nepoda\u0159ilo se otev\u0159\xedt tiskov\xfd dialog. Zkontrolujte blokov\xe1n\xed vyskakovac\xedch oken.","error"))}catch(n){console.error("Chyba p\u0159i tisku PDF:",n),i("Chyba p\u0159i p\u0159\xedprav\u011b tisku","error")}},title:"Tisknout pokladn\xed knihu (PDF form\xe1t, A4 na \u0161\xed\u0159ku)",children:[(0,k.jsx)(h.g,{icon:v.JxU}),"Tisknout"]})]})})]}),(0,k.jsx)(y.A,{isOpen:E,title:"Smaz\xe1n\xed polo\u017eky",icon:"trash",variant:"danger",onConfirm:async()=>{if(P){const n=J.find(e=>e.id===P);if($(e=>e.filter(e=>e.id!==P)),null!==n&&void 0!==n&&n.db_id)try{await I.default.deleteEntry(n.db_id),i("Polo\u017eka byla smaz\xe1na z datab\xe1ze","success")}catch(e){console.error("\u274c Chyba p\u0159i maz\xe1n\xed z DB:",e),i("Chyba p\u0159i maz\xe1n\xed z datab\xe1ze","error")}else i("Polo\u017eka byla odstran\u011bna","success");const t=J.filter(e=>e.id!==P);Ye(t,ve,_)}D(!1),B(null)},onClose:()=>{D(!1),B(null)},children:"Opravdu chcete odstranit tento z\xe1znam z pokladn\xed knihy? Tato akce je nevratn\xe1."}),(0,k.jsx)(y.A,{isOpen:T,title:"Uzav\u0159\xedt m\u011bs\xedc ".concat(new Date(m,s-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})),icon:v.e68,variant:"warning",onConfirm:async()=>{W(!1);try{var e,n;const t=await I.default.getBook(_e,!1);if("ok"===t.status&&null!==(e=t.data)&&void 0!==e&&e.stav_knihy){const e=t.data.stav_knihy;if("aktivni"!==e)return ge(e),void i("Kniha je ji\u017e ve stavu: ".concat(e),"warning")}i("Prob\xedh\xe1 p\u0159e\u010d\xedslov\xe1n\xed doklad\u016f...","info");const o=await(async()=>{if(null!==se&&void 0!==se&&se.uzivatel_id)try{var e;const t=await I.default.listBooks(se.uzivatel_id);if("ok"!==t.status)throw new Error("Backend vr\xe1til chybu: "+(t.message||"nezn\xe1m\xe1"));let o=null;if(Array.isArray(t.data)?o=t.data:null!==(e=t.data)&&void 0!==e&&e.books&&Array.isArray(t.data.books)?o=t.data.books:t.books&&Array.isArray(t.books)&&(o=t.books),!o)throw console.error("\u274c Nepoda\u0159ilo se naj\xedt pole knih v odpov\u011bdi:",t),new Error("Backend nevr\xe1til pole knih");const a=o.filter(e=>new Date(e.rok,e.mesic-1)>=new Date(m,s-1)).sort((e,n)=>e.rok!==n.rok?e.rok-n.rok:e.mesic-n.mesic),{lastP:i,lastV:r}=await $e();let l=i,d=r;for(const e of a){var n;const t=await I.default.getBook(e.id,!1);if("ok"!==t.status||null===(n=t.data)||void 0===n||!n.entries){console.warn("\u26a0\ufe0f Nepoda\u0159ilo se na\u010d\xedst entries pro knihu ".concat(e.id));continue}const o=[...t.data.entries].sort((e,n)=>new Date(e.datum_zapisu)-new Date(n.datum_zapisu));for(const e of o){const n=e.castka_prijem&&parseFloat(e.castka_prijem)>0,t=e.castka_vydaj&&parseFloat(e.castka_vydaj)>0;let o=null;n&&!t?(l++,o="P".concat(String(l).padStart(3,"0"))):t&&!n&&(d++,o="V".concat(String(d).padStart(3,"0"))),o&&o!==e.cislo_dokladu&&(console.log("  \ud83d\udd04 ".concat(e.cislo_dokladu," \u2192 ").concat(o)),await I.default.updateEntry(e.id,{cislo_dokladu:o}))}}return{success:!0,lastP:l,lastV:d}}catch(t){return console.error("\u274c Chyba p\u0159i p\u0159e\u010d\xedslov\xe1n\xed:",t),{success:!1,error:t.message}}})();if(!o.success)throw new Error("Chyba p\u0159i p\u0159e\u010d\xedslov\xe1n\xed: ".concat(o.error));i("P\u0159e\u010d\xedslov\xe1n\xed dokon\u010deno (P: ".concat(o.lastP,", V: ").concat(o.lastV,")"),"success");const a=await I.default.getBook(_e,!1);if("ok"===a.status&&null!==(n=a.data)&&void 0!==n&&n.entries){const e=a.data.entries.map(Me);$(e)}const r=await I.default.closeMonth(_e);if("ok"!==r.status)throw new Error(r.message||"Nezn\xe1m\xe1 chyba");ge("uzavrena_uzivatelem"),i("M\u011bs\xedc byl \xfasp\u011b\u0161n\u011b uzav\u0159en","success"),Ye(J,"uzavrena_uzivatelem",_)}catch(o){console.error("\u274c Chyba p\u0159i uzav\xedr\xe1n\xed m\u011bs\xedce:",o),i("Chyba p\u0159i uzav\xedr\xe1n\xed m\u011bs\xedce: "+o.message,"error");try{var t;const e=await I.default.getBook(_e,!1);"ok"===e.status&&null!==(t=e.data)&&void 0!==t&&t.stav_knihy&&ge(e.data.stav_knihy)}catch(a){console.error("Nepoda\u0159ilo se znovu na\u010d\xedst stav knihy:",a)}}},onClose:()=>W(!1),children:(0,k.jsxs)("div",{style:{textAlign:"left"},children:[(0,k.jsx)("p",{children:(0,k.jsx)("strong",{children:"Po uzav\u0159en\xed m\u011bs\xedce:"})}),(0,k.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[(0,k.jsx)("li",{children:"Nebude mo\u017en\xe9 p\u0159id\xe1vat nov\xe9 z\xe1znamy"}),(0,k.jsx)("li",{children:"Nebude mo\u017en\xe9 upravovat existuj\xedc\xed z\xe1znamy"}),(0,k.jsx)("li",{children:'M\u011bs\xedc lze znovu otev\u0159\xedt tla\u010d\xedtkem "Otev\u0159\xedt m\u011bs\xedc"'})]}),(0,k.jsxs)("div",{style:{background:"#fef3c7",border:"2px solid #d97706",borderRadius:"8px",padding:"1rem",marginTop:"1rem"},children:[(0,k.jsx)("p",{style:{color:"#92400e",fontWeight:"600",marginBottom:"0.5rem"},children:"\ud83d\udd04 Automatick\xe9 p\u0159e\u010d\xedslov\xe1n\xed doklad\u016f"}),(0,k.jsxs)("p",{style:{color:"#92400e",fontSize:"0.9rem"},children:["P\u0159ed uzav\u0159en\xedm budou ",(0,k.jsx)("strong",{children:"v\u0161echny doklady"})," v tomto m\u011bs\xedci i ve v\u0161ech n\xe1sleduj\xedc\xedch m\u011bs\xedc\xedch ",(0,k.jsx)("strong",{children:"p\u0159e\u010d\xedslov\xe1ny chronologicky"})," podle data a typu (P/V)."]}),(0,k.jsx)("p",{style:{color:"#92400e",fontSize:"0.9rem",marginTop:"0.5rem"},children:"T\xedm se zajist\xed spr\xe1vn\xe9 navazuj\xedc\xed po\u0159ad\xed \u010d\xedsel doklad\u016f."})]}),(0,k.jsx)("p",{style:{marginTop:"1rem",fontWeight:"500"},children:"Opravdu chcete pokra\u010dovat?"})]})}),(0,k.jsx)(y.A,{isOpen:R,title:"\u26a0\ufe0f Zamknout m\u011bs\xedc ".concat(new Date(m,s-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})),icon:v.DW4,variant:"danger",onConfirm:async()=>{F(!1);try{const e=await I.default.lockBook(_e);if("ok"!==e.status)throw new Error(e.message||"Nezn\xe1m\xe1 chyba");ge("zamknuta_spravcem"),i("Kniha byla zam\u010dena spr\xe1vcem","success"),Ye(J,"zamknuta_spravcem",_)}catch(e){console.error("\u274c Chyba p\u0159i zamyk\xe1n\xed knihy:",e),i("Chyba p\u0159i zamyk\xe1n\xed knihy: "+e.message,"error")}},onClose:()=>F(!1),children:(0,k.jsxs)("div",{style:{textAlign:"left"},children:[(0,k.jsx)("p",{style:{color:"#dc3545",fontWeight:"bold",marginBottom:"1rem"},children:"POZOR: Toto je fin\xe1ln\xed uzav\u0159en\xed m\u011bs\xedce!"}),(0,k.jsx)("p",{children:(0,k.jsx)("strong",{children:"Po zamknut\xed spr\xe1vcem:"})}),(0,k.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[(0,k.jsx)("li",{children:"Nikdo (ani b\u011b\u017en\xfd u\u017eivatel) nebude moci upravovat z\xe1znamy"}),(0,k.jsx)("li",{children:"Nikdo (ani b\u011b\u017en\xfd u\u017eivatel) nebude moci otev\u0159\xedt m\u011bs\xedc"}),(0,k.jsx)("li",{children:'Odemknout m\u016f\u017ee pouze spr\xe1vce tla\u010d\xedtkem "Odemknout (Admin)"'}),(0,k.jsxs)("li",{children:["Toto je ",(0,k.jsx)("strong",{children:"FIN\xc1LN\xcd"})," uzav\u0159en\xed m\u011bs\xedce"]})]}),(0,k.jsx)("p",{style:{marginTop:"1rem"},children:"Pokra\u010dovat s fin\xe1ln\xedm zam\u010den\xedm?"})]})}),(0,k.jsx)(y.A,{isOpen:M,title:"\u26a0\ufe0f Otev\u0159\xedt m\u011bs\xedc ".concat(new Date(m,s-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})),icon:v.zpE,variant:"warning",onConfirm:async()=>{H(!1);try{const e=await I.default.reopenBook(_e);if("ok"!==e.status)throw new Error(e.message||"Nezn\xe1m\xe1 chyba");ge("aktivni"),i("M\u011bs\xedc byl znovu otev\u0159en","success"),Ye(J,"aktivni",_)}catch(e){console.error("\u274c Chyba p\u0159i otev\xedr\xe1n\xed m\u011bs\xedce:",e),i("Chyba p\u0159i otev\xedr\xe1n\xed m\u011bs\xedce: "+e.message,"error")}},onClose:()=>H(!1),confirmText:"Ano, otev\u0159\xedt m\u011bs\xedc",cancelText:"Zru\u0161it",children:(0,k.jsxs)("div",{style:{textAlign:"left"},children:[(0,k.jsx)("p",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:"1rem"},children:"\u26a0\ufe0f POZOR: Znovu otev\xedr\xe1te uzav\u0159en\xfd m\u011bs\xedc!"}),(0,k.jsx)("p",{children:(0,k.jsx)("strong",{children:"Po otev\u0159en\xed m\u011bs\xedce:"})}),(0,k.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[(0,k.jsxs)("li",{children:["Bude mo\u017en\xe9 znovu ",(0,k.jsx)("strong",{children:"p\u0159id\xe1vat"})," nov\xe9 z\xe1znamy"]}),(0,k.jsxs)("li",{children:["Bude mo\u017en\xe9 ",(0,k.jsx)("strong",{children:"upravovat"})," existuj\xedc\xed z\xe1znamy"]}),(0,k.jsxs)("li",{children:["Bude mo\u017en\xe9 ",(0,k.jsx)("strong",{children:"mazat"})," z\xe1znamy"]}),(0,k.jsxs)("li",{children:["M\u011bs\xedc ",(0,k.jsx)("strong",{children:"nebude uzav\u0159en"})," pro \xfa\u010detn\xed operace"]}),(0,k.jsx)("li",{style:{color:"#d97706",fontWeight:"500",marginTop:"0.5rem"},children:"\u26a0\ufe0f Pokud n\xe1sledn\u011b provedete zm\u011bny a znovu m\u011bs\xedc uzav\u0159ete, \u010d\xedsla doklad\u016f v n\xe1sleduj\xedc\xedch m\u011bs\xedc\xedch budou p\u0159e\u010d\xedslov\xe1na"})]}),(0,k.jsx)("p",{style:{marginTop:"1rem",color:"#ff9800",fontWeight:"bold"},children:"\u26a0\ufe0f T\xedmto zru\u0161\xedte uzav\u0159en\xed m\u011bs\xedce! Opravdu pokra\u010dovat?"})]})}),(0,k.jsx)(y.A,{isOpen:V,title:"\ud83d\udd13 Odemknout m\u011bs\xedc ".concat(new Date(m,s-1).toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})),icon:v.pNp,variant:"danger",onConfirm:async()=>{Y(!1);try{const e=await I.default.reopenBook(_e);if("ok"!==e.status)throw new Error(e.message||"Nezn\xe1m\xe1 chyba");ge("aktivni"),i("M\u011bs\xedc byl odem\u010den administr\xe1torem","success"),Ye(J,"aktivni",_)}catch(e){console.error("\u274c Chyba p\u0159i odemyk\xe1n\xed m\u011bs\xedce:",e),i("Chyba p\u0159i odemyk\xe1n\xed m\u011bs\xedce: "+e.message,"error")}},onClose:()=>Y(!1),confirmText:"Ano, odemknout (Admin)",cancelText:"Zru\u0161it",children:(0,k.jsxs)("div",{style:{textAlign:"left"},children:[(0,k.jsx)("p",{style:{color:"#dc3545",fontWeight:"bold",marginBottom:"1rem"},children:"\ud83d\udea8 ADMIN AKCE: Odemyk\xe1te fin\xe1ln\u011b zam\u010den\xfd m\u011bs\xedc!"}),(0,k.jsx)("p",{children:(0,k.jsx)("strong",{children:"Po odemknut\xed spr\xe1vcem:"})}),(0,k.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[(0,k.jsxs)("li",{children:["Bude mo\u017en\xe9 znovu ",(0,k.jsx)("strong",{children:"p\u0159id\xe1vat a upravovat"})," z\xe1znamy"]}),(0,k.jsxs)("li",{children:["Bude mo\u017en\xe9 ",(0,k.jsx)("strong",{children:"mazat"})," z\xe1znamy"]}),(0,k.jsxs)("li",{children:["M\u011bs\xedc ",(0,k.jsx)("strong",{children:"ztrat\xed fin\xe1ln\xed uzav\u0159en\xed"})]}),(0,k.jsx)("li",{children:"V\u0161ichni u\u017eivatel\xe9 budou moci op\u011bt editovat"})]}),(0,k.jsx)("p",{style:{marginTop:"1rem",color:"#dc3545",fontWeight:"bold"},children:"\ud83d\udea8 POZOR: Toto ru\u0161\xed fin\xe1ln\xed administrativn\xed uzam\u010den\xed! Opravdu pokra\u010dovat?"})]})}),(0,k.jsx)(y.A,{isOpen:Z,title:"\ud83d\udeab Zp\u011btn\xe9 vytvo\u0159en\xed knihy nen\xed mo\u017en\xe9",icon:v.zpE,variant:"danger",onConfirm:()=>U(!1),onClose:()=>U(!1),confirmText:"Rozum\xedm",showCancel:!1,children:(0,k.jsxs)("div",{style:{textAlign:"left"},children:[(0,k.jsx)("p",{style:{color:"#dc3545",fontWeight:"bold",marginBottom:"1rem"},children:"\u26d4 NELZE VYTVO\u0158IT NOVOU KNIHU V TOMTO M\u011aS\xcdCI"}),(0,k.jsxs)("p",{children:["Pro tento m\u011bs\xedc ",(0,k.jsx)("strong",{children:"nem\xe1te zalo\u017eenou pokladn\xed knihu"})," a existuj\xed ",(0,k.jsx)("strong",{children:"uzav\u0159en\xe9 m\u011bs\xedce v budoucnosti"}),"."]}),(0,k.jsx)("p",{style:{marginTop:"1rem"},children:(0,k.jsx)("strong",{children:"D\u016fvody blokace:"})}),(0,k.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:[(0,k.jsxs)("li",{children:["V n\xe1sleduj\xedc\xedch m\u011bs\xedc\xedch m\xe1te ",(0,k.jsx)("strong",{children:"uzav\u0159en\xe9 nebo zam\u010den\xe9"})," knihy"]}),(0,k.jsxs)("li",{children:["Zp\u011btn\xe9 vytvo\u0159en\xed knihy by ",(0,k.jsx)("strong",{children:"poru\u0161ilo kontinuitu"})," \xfa\u010detnictv\xed"]}),(0,k.jsxs)("li",{children:["Nelze dodate\u010dn\u011b vytv\xe1\u0159et knihy ",(0,k.jsx)("strong",{children:"p\u0159ed uzav\u0159en\xfdmi m\u011bs\xedci"})]})]}),(0,k.jsx)("p",{style:{marginTop:"1rem",color:"#28a745",fontWeight:"bold"},children:"\u2705 POZN\xc1MKA: Prohl\xed\u017een\xed existuj\xedc\xedch knih v minulosti je mo\u017en\xe9 kdykoliv."}),(0,k.jsx)("p",{style:{marginTop:"1rem",color:"#ff9800",fontWeight:"bold"},children:"\ufffd \u0158e\u0161en\xed: Nejprve otev\u0159ete uzav\u0159en\xe9 m\u011bs\xedce v budoucnosti, pak m\u016f\u017eete vytvo\u0159it nov\xe9 knihy v minulosti."})]})}),o("HELPER_VIEW")&&(0,k.jsx)(C.A,{pageContext:"cashbook"}),(0,k.jsx)(x.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})]}):(0,k.jsxs)(an,{children:[(0,k.jsxs)(rn,{children:[(0,k.jsxs)("h1",{children:[(0,k.jsx)(h.g,{icon:v.yqK}),"Pokladn\xed kniha"]}),(0,k.jsx)("p",{className:"subtitle",children:"P\u0159\xedstup odep\u0159en"})]}),(0,k.jsx)(fn,{children:(0,k.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,k.jsx)(h.g,{icon:v.iW_,size:"3x",style:{color:"#dc2626",marginBottom:"1rem"}}),(0,k.jsx)("h3",{children:"Nedostate\u010dn\xe1 opr\xe1vn\u011bn\xed"}),(0,k.jsx)("p",{children:"Pro p\u0159\xedstup k pokladn\xed knize pot\u0159ebujete opr\xe1vn\u011bn\xed CASH_BOOK_READ_OWN nebo vy\u0161\u0161\xed."}),(0,k.jsx)("p",{children:"Kontaktujte spr\xe1vce syst\xe9mu pro ud\u011blen\xed pot\u0159ebn\xfdch opr\xe1vn\u011bn\xed."})]})})]}):(0,k.jsxs)(an,{children:[(0,k.jsxs)(rn,{children:[(0,k.jsxs)("h1",{children:[(0,k.jsx)(h.g,{icon:v.yqK}),"Pokladn\xed kniha"]}),(0,k.jsx)("p",{className:"subtitle",children:"Chyba konfigurace"})]}),(0,k.jsx)(fn,{children:(0,k.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,k.jsx)(h.g,{icon:v.iW_,size:"3x",style:{color:"#f59e0b",marginBottom:"1rem"}}),(0,k.jsx)("h3",{children:"Nem\xe1te p\u0159i\u0159azenou pokladnu"}),(0,k.jsx)("p",{children:"Pro pr\xe1ci s pokladn\xed knihou mus\xedte m\xedt p\u0159i\u0159azenou alespo\u0148 jednu pokladnu."}),(0,k.jsx)("p",{children:"Kontaktujte administr\xe1tora syst\xe9mu pro p\u0159i\u0159azen\xed pokladny."})]})})]})}},79916:(e,n,t)=>{var o=t(9227);let a=!1;const i=()=>{if(!a)try{o.KQ.register({family:"Roboto",fonts:[{src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-light-webfont.ttf",fontWeight:300,fontStyle:"normal"},{src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf",fontWeight:400,fontStyle:"normal"},{src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-italic-webfont.ttf",fontWeight:400,fontStyle:"italic"},{src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-medium-webfont.ttf",fontWeight:500,fontStyle:"normal"},{src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-bold-webfont.ttf",fontWeight:700,fontStyle:"normal"}]}),a=!0}catch(e){console.error("\u274c Chyba p\u0159i registraci Roboto font\u016f:",e)}};i()}}]);
//# sourceMappingURL=6704.87ff2731.chunk.js.map