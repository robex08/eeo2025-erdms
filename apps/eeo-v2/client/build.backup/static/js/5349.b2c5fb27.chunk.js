(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[5349],{5647:(n,e,o)=>{"use strict";o.d(e,{HR:()=>x,createEnhancedFieldMapping:()=>p,createFieldValuesFromMapping:()=>u,extractDocxFields:()=>i,getOrderFieldsForMapping:()=>c});var t=o(89379),r=o(26159),a=o.n(r);const i=async n=>{try{var e,o,t;const r=await a().loadAsync(n),i=await(null===(e=r.file("word/document.xml"))||void 0===e?void 0:e.async("text"));if(!i)throw new Error("Neplatn\xfd DOCX soubor - chyb\xed document.xml");const d=await(null===(o=r.file("docProps/app.xml"))||void 0===o?void 0:o.async("text")),c=await(null===(t=r.file("docProps/core.xml"))||void 0===t?void 0:t.async("text")),p=l(i);return{success:!0,fields:p,metadata:s(d,c),documentXml:i,fileName:n.name,fileSize:n.size,lastModified:new Date(n.lastModified)}}catch(r){return console.error("Chyba p\u0159i zpracov\xe1n\xed DOCX:",r),{success:!1,error:r.message,fields:[],metadata:{}}}},l=n=>{const e=[];try{const o=/DOCVARIABLE\s+(?:"([^"]+)"|([A-Z0-9_|.\-/]+))(?:\s+\\[^}]*)?/gi;let r;for(;null!==(r=o.exec(n));){const n=r[1]||r[2];n&&e.push({type:"docvariable",name:n,fullMatch:r[0],position:r.index})}const a=/<w:instrText[^>]*>([^<]*DOCVARIABLE[^<]*)<\/w:instrText>/gi;for(;null!==(r=a.exec(n));){const n=r[1].match(/DOCVARIABLE\s+(?:"([^"]+)"|([A-Z0-9_|.\-/]+))/i);if(n){const o=n[1]||n[2];o&&!e.some(n=>n.name===o&&"docvariable"===n.type)&&e.push({type:"docvariable",name:o,fullMatch:r[0],position:r.index,source:"instrText"})}}const i=/<w:p[\s\S]*?<\/w:p>/gi;let l;for(;null!==(l=i.exec(n));){const n=l[0],o=[],t=/<w:instrText[^>]*>([\s\S]*?)<\/w:instrText>/gi;let r;for(;null!==(r=t.exec(n));)o.push(r[1]);if(o.length>0){const n=o.join("").replace(/\s+/g," ").trim(),t=/(DOCVARIABLE|MERGEFIELD)\s+([A-Z0-9_|.\-/]+)/gi;let r;for(;null!==(r=t.exec(n));){const n=r[2].replace(/\s+/g,"");n&&!e.some(e=>e.name===n&&"docvariable"===e.type)&&e.push({type:"docvariable",name:n,fullMatch:r[0],position:l.index,source:"fragmentedInstrText"})}}}const s=/MERGEFIELD\s+([A-Z0-9_|.\-/]+)(?:\s+\\[^}]*)?/gi;for(;null!==(r=s.exec(n));)e.push({type:"mergefield",name:r[1],fullMatch:r[0],position:r.index});const d=/<w:bookmarkStart[^>]*w:name="([^"]+)"/gi;for(;null!==(r=d.exec(n));)e.push({type:"bookmark",name:r[1],fullMatch:r[0],position:r.index});const c=/<w:tag[^>]*w:val="([^"]+)"/gi;for(;null!==(r=c.exec(n));)e.push({type:"contentcontrol",name:r[1],fullMatch:r[0],position:r.index});const p=/\{\{(\w+)\}\}/gi;for(;null!==(r=p.exec(n));)e.push({type:"custom",name:r[1],fullMatch:r[0],position:r.index});const u={};e.forEach(n=>{const e="".concat(n.name,"|").concat(n.type);u[e]=(u[e]||0)+1});return e.reduce((n,e)=>{if(!n.find(n=>n.name===e.name&&n.type===e.type)){const o="".concat(e.name,"|").concat(e.type);n.push((0,t.A)((0,t.A)({},e),{},{count:u[o]}))}return n},[]).sort((n,e)=>n.name.localeCompare(e.name))}catch(o){return console.error("Chyba p\u0159i extrakci pol\xed:",o),[]}},s=(n,e)=>{const o={};try{if(n){const e=d(n,"Application")||"Unknown",t=d(n,"AppVersion")||"Unknown",r=d(n,"TotalTime")||"0";o.application=e,o.appVersion=t,o.totalEditTime=r}if(e){const n=d(e,"title"),t=d(e,"creator"),r=d(e,"created"),a=d(e,"modified");o.title=n,o.creator=t,o.created=r,o.modified=a}return o}catch(t){return console.error("Chyba p\u0159i extrakci metadat:",t),{}}},d=(n,e)=>{try{const o=new RegExp("<[^:]*:".concat(e,"[^>]*>([^<]*)</[^:]*:").concat(e,">"),"i"),t=n.match(o);return t?t[1]:null}catch(o){return null}},c=()=>[{group:"\ud83d\udcc5 Datumov\xe1 pole workflow",fields:[{key:"dt_vytvoreni",label:"Datum vytvo\u0159en\xed objedn\xe1vky\n{dt_vytvoreni}",type:"datetime",example:"2025-01-10 14:30:00"},{key:"dt_aktualizace",label:"Datum posledn\xed aktualizace\n{dt_aktualizace}",type:"datetime",example:"2025-01-14 16:45:00"},{key:"dt_objednavky",label:"Datum objedn\xe1vky\n{dt_objednavky}",type:"datetime",example:"2025-01-15 10:30:00"},{key:"dt_schvaleni",label:"Datum schv\xe1len\xed\n{dt_schvaleni}",type:"datetime",example:"2025-01-12 10:00:00"},{key:"dt_odeslani",label:"Datum odesl\xe1n\xed dodavateli\n{dt_odeslani}",type:"datetime",example:"2025-01-13 15:00:00"},{key:"dt_akceptace",label:"Datum akceptace dodavatelem\n{dt_akceptace}",type:"datetime",example:"2025-01-14 09:30:00"},{key:"dt_zverejneni",label:"Datum zve\u0159ejn\u011bn\xed\n{dt_zverejneni}",type:"datetime",example:"2025-01-20 12:00:00"},{key:"dt_predpokladany_termin_dodani",label:"P\u0159edpokl\xe1dan\xfd term\xedn dod\xe1n\xed\n{dt_predpokladany_termin_dodani}",type:"date",example:"2025-02-15"}]},{group:"Z\xe1kladn\xed \xfadaje",fields:[{key:"cislo_objednavky",label:"\u010c\xedslo objedn\xe1vky\n{cislo_objednavky}",type:"string",example:"2025-123"},{key:"predmet",label:"P\u0159edm\u011bt objedn\xe1vky\n{predmet}",type:"string",example:"P\u0159edm\u011bt objedn\xe1vky"},{key:"strediska_kod",label:"K\xf3dy st\u0159edisek\n{strediska_kod}",type:"string",example:"IT001,FIN002,ADM003"},{key:"max_cena_s_dph",label:"Max. cena s DPH\n{max_cena_s_dph}",type:"currency",example:"250000.50"},{key:"financovani",label:"Financov\xe1n\xed (text)\n{financovani}",type:"string",example:"Rozpo\u010det 2025"},{key:"druh_objednavky_kod",label:"Druh objedn\xe1vky (k\xf3d)\n{druh_objednavky_kod}",type:"string",example:"STANDARD"},{key:"schvaleni_komentar",label:"Koment\xe1\u0159 schv\xe1len\xed\n{schvaleni_komentar}",type:"text",example:"Objedn\xe1vka schv\xe1lena"},{key:"misto_dodani",label:"M\xedsto dod\xe1n\xed\n{misto_dodani}",type:"string",example:"M\xedsto dod\xe1n\xed"},{key:"zaruka",label:"Z\xe1ruka\n{zaruka}",type:"string",example:"24 m\u011bs\xedc\u016f"},{key:"poznamka",label:"Pozn\xe1mka\n{poznamka}",type:"text",example:"Pozn\xe1mka k objedn\xe1vce"}]},{group:"Financov\xe1n\xed",fields:[{key:"financovani.typ",label:"Typ financov\xe1n\xed\n{financovani.typ}",type:"string",example:"LP"},{key:"financovani.nazev",label:"N\xe1zev financov\xe1n\xed\n{financovani.nazev}",type:"string",example:"Leasing Plus"},{key:"financovani.nazev_stavu",label:"N\xe1zev stavu financov\xe1n\xed\n{financovani.nazev_stavu}",type:"string",example:"Limitovan\xfd p\u0159\xedslib"},{key:"financovani.kod",label:"K\xf3d financov\xe1n\xed\n{financovani.kod}",type:"string",example:"LP001"},{key:"financovani.kod_stavu",label:"K\xf3d stavu financov\xe1n\xed\n{financovani.kod_stavu}",type:"string",example:"LP"}]},{group:"Objedn\xe1vka - detail",fields:[{key:"cislo_objednavky",label:"\u010c\xedslo objedn\xe1vky\n{cislo_objednavky}",type:"string",example:"2025-123"},{key:"dt_objednavky",label:"Datum objedn\xe1vky\n{dt_objednavky}",type:"datetime",example:"2025-01-15 10:30:00"},{key:"predmet",label:"P\u0159edm\u011bt objedn\xe1vky\n{predmet}",type:"string",example:"P\u0159edm\u011bt objedn\xe1vky"},{key:"strediska_kod",label:"K\xf3dy st\u0159edisek\n{strediska_kod}",type:"string",example:"IT001,FIN002,ADM003"},{key:"max_cena_s_dph",label:"Max. cena s DPH\n{max_cena_s_dph}",type:"currency",example:"250000.50"},{key:"financovani",label:"Financov\xe1n\xed\n{financovani}",type:"string",example:"Rozpo\u010det 2025"},{key:"druh_objednavky_kod",label:"Druh objedn\xe1vky (k\xf3d)\n{druh_objednavky_kod}",type:"string",example:"STANDARD"},{key:"dt_schvaleni",label:"Datum schv\xe1len\xed\n{dt_schvaleni}",type:"datetime",example:"2025-01-12 10:00:00"},{key:"schvaleni_komentar",label:"Koment\xe1\u0159 schv\xe1len\xed\n{schvaleni_komentar}",type:"text",example:"Objedn\xe1vka schv\xe1lena"},{key:"dt_predpokladany_termin_dodani",label:"P\u0159edpokl\xe1dan\xfd term\xedn dod\xe1n\xed\n{dt_predpokladany_termin_dodani}",type:"date",example:"2025-02-15"},{key:"misto_dodani",label:"M\xedsto dod\xe1n\xed\n{misto_dodani}",type:"string",example:"M\xedsto dod\xe1n\xed"},{key:"zaruka",label:"Z\xe1ruka\n{zaruka}",type:"string",example:"24 m\u011bs\xedc\u016f"},{key:"poznamka",label:"Pozn\xe1mka\n{poznamka}",type:"text",example:"Pozn\xe1mka k objedn\xe1vce"},{key:"dt_vytvoreni",label:"Datum vytvo\u0159en\xed\n{dt_vytvoreni}",type:"datetime",example:"2025-01-10 14:30:00"},{key:"dt_aktualizace",label:"Datum aktualizace\n{dt_aktualizace}",type:"datetime",example:"2025-01-14 16:45:00"}]},{group:"Stavy",fields:[{key:"stav_workflow_kod",label:"K\xf3d workflow stavu\n{stav_workflow_kod}",type:"string",example:"ODESLANO_DODAVATELI"},{key:"stav_objednavky",label:"N\xe1zev stavu\n{stav_objednavky}",type:"string",example:"Odesl\xe1no dodavateli"},{key:"dt_odeslani",label:"Datum odesl\xe1n\xed\n{dt_odeslani}",type:"datetime",example:"2025-01-13 15:00:00"},{key:"dodavatel_zpusob_potvrzeni",label:"Zp\u016fsob potvrzen\xed\n{dodavatel_zpusob_potvrzeni}",type:"string",example:"email,form"},{key:"dt_akceptace",label:"Datum akceptace\n{dt_akceptace}",type:"datetime",example:"2025-01-14 09:30:00"},{key:"dt_zverejneni",label:"Datum zve\u0159ejn\u011bn\xed\n{dt_zverejneni}",type:"datetime",example:"2025-01-20 12:00:00"},{key:"registr_iddt",label:"Registr IDDT\n{registr_iddt}",type:"string",example:"REG-2025-001"}]},{group:"Objednatel",fields:[{key:"objednatel.username",label:"Username objednatele\n{objednatel.username}",type:"string",example:"jan.novak"},{key:"objednatel.titul_pred",label:"Titul p\u0159ed jm\xe9nem\n{objednatel.titul_pred}",type:"string",example:"Ing."},{key:"objednatel.jmeno",label:"Jm\xe9no objednatele\n{objednatel.jmeno}",type:"string",example:"Jan"},{key:"objednatel.prijmeni",label:"P\u0159\xedjmen\xed objednatele\n{objednatel.prijmeni}",type:"string",example:"Nov\xe1k"},{key:"objednatel.titul_za",label:"Titul za jm\xe9nem\n{objednatel.titul_za}",type:"string",example:"Ph.D."},{key:"objednatel.email",label:"Email objednatele\n{objednatel.email}",type:"string",example:"jan.novak@firma.cz"},{key:"objednatel.telefon",label:"Telefon objednatele\n{objednatel.telefon}",type:"string",example:"+420 123 456 789"},{key:"objednatel.cele_jmeno",label:"Cel\xe9 jm\xe9no objednatele\n{objednatel.cele_jmeno}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"objednatel.plne_jmeno",label:"Pln\xe9 jm\xe9no objednatele (alias)\n{objednatel.plne_jmeno}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"objednatel.lokalita.nazev",label:"Lokalita objednatele\n{objednatel.lokalita.nazev}",type:"string",example:"Praha"}]},{group:"Garant",fields:[{key:"garant.username",label:"Username garanta\n{garant.username}",type:"string",example:"marie.svoboda"},{key:"garant.titul_pred",label:"Titul p\u0159ed jm\xe9nem\n{garant.titul_pred}",type:"string",example:""},{key:"garant.jmeno",label:"Jm\xe9no garanta\n{garant.jmeno}",type:"string",example:"Marie"},{key:"garant.prijmeni",label:"P\u0159\xedjmen\xed garanta\n{garant.prijmeni}",type:"string",example:"Svobodov\xe1"},{key:"garant.titul_za",label:"Titul za jm\xe9nem\n{garant.titul_za}",type:"string",example:""},{key:"garant.email",label:"Email garanta\n{garant.email}",type:"string",example:"marie.svoboda@firma.cz"},{key:"garant.telefon",label:"Telefon garanta\n{garant.telefon}",type:"string",example:"+420 987 654 321"},{key:"garant.cele_jmeno",label:"Cel\xe9 jm\xe9no garanta\n{garant.cele_jmeno}",type:"string",example:"Marie Svobodov\xe1"},{key:"garant.plne_jmeno",label:"Pln\xe9 jm\xe9no garanta (alias)\n{garant.plne_jmeno}",type:"string",example:"Marie Svobodov\xe1"},{key:"garant.lokalita.nazev",label:"Lokalita garanta\n{garant.lokalita.nazev}",type:"string",example:"Praha"}]},{group:"U\u017eivatel (vytvo\u0159il)",fields:[{key:"uzivatel.username",label:"Username tv\u016frce\n{uzivatel.username}",type:"string",example:"jan.novak"},{key:"uzivatel.titul_pred",label:"Titul p\u0159ed jm\xe9nem\n{uzivatel.titul_pred}",type:"string",example:"Ing."},{key:"uzivatel.jmeno",label:"Jm\xe9no tv\u016frce\n{uzivatel.jmeno}",type:"string",example:"Jan"},{key:"uzivatel.prijmeni",label:"P\u0159\xedjmen\xed tv\u016frce\n{uzivatel.prijmeni}",type:"string",example:"Nov\xe1k"},{key:"uzivatel.titul_za",label:"Titul za jm\xe9nem\n{uzivatel.titul_za}",type:"string",example:"Ph.D."},{key:"uzivatel.email",label:"Email tv\u016frce\n{uzivatel.email}",type:"string",example:"jan.novak@firma.cz"},{key:"uzivatel.telefon",label:"Telefon tv\u016frce\n{uzivatel.telefon}",type:"string",example:"+420 123 456 789"},{key:"uzivatel.cele_jmeno",label:"Cel\xe9 jm\xe9no tv\u016frce\n{uzivatel.cele_jmeno}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"uzivatel.plne_jmeno",label:"Pln\xe9 jm\xe9no tv\u016frce (alias)\n{uzivatel.plne_jmeno}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"uzivatel.lokalita.nazev",label:"Lokalita tv\u016frce\n{uzivatel.lokalita.nazev}",type:"string",example:"Praha"}]},{group:"Schvalovatel",fields:[{key:"schvalovatel.username",label:"Username schvalovatele\n{schvalovatel.username}",type:"string",example:"admin"},{key:"schvalovatel.titul_pred",label:"Titul p\u0159ed jm\xe9nem\n{schvalovatel.titul_pred}",type:"string",example:"Mgr."},{key:"schvalovatel.jmeno",label:"Jm\xe9no schvalovatele\n{schvalovatel.jmeno}",type:"string",example:"Petr"},{key:"schvalovatel.prijmeni",label:"P\u0159\xedjmen\xed schvalovatele\n{schvalovatel.prijmeni}",type:"string",example:"\u0158editel"},{key:"schvalovatel.titul_za",label:"Titul za jm\xe9nem\n{schvalovatel.titul_za}",type:"string",example:"MBA"},{key:"schvalovatel.email",label:"Email schvalovatele\n{schvalovatel.email}",type:"string",example:"reditel@firma.cz"},{key:"schvalovatel.telefon",label:"Telefon schvalovatele\n{schvalovatel.telefon}",type:"string",example:"+420 111 222 333"},{key:"schvalovatel.cele_jmeno",label:"Cel\xe9 jm\xe9no schvalovatele\n{schvalovatel.cele_jmeno}",type:"string",example:"Mgr. Petr \u0158editel MBA"},{key:"schvalovatel.plne_jmeno",label:"Pln\xe9 jm\xe9no schvalovatele (alias)\n{schvalovatel.plne_jmeno}",type:"string",example:"Mgr. Petr \u0158editel MBA"},{key:"schvalovatel.lokalita.nazev",label:"Lokalita schvalovatele\n{schvalovatel.lokalita.nazev}",type:"string",example:"Praha"}]},{group:"P\u0159\xedkazce",fields:[{key:"prikazce.username",label:"Username p\u0159\xedkazce\n{prikazce.username}",type:"string",example:"pavel.prikazce"},{key:"prikazce.titul_pred",label:"Titul p\u0159ed jm\xe9nem\n{prikazce.titul_pred}",type:"string",example:"Bc."},{key:"prikazce.jmeno",label:"Jm\xe9no p\u0159\xedkazce\n{prikazce.jmeno}",type:"string",example:"Pavel"},{key:"prikazce.prijmeni",label:"P\u0159\xedjmen\xed p\u0159\xedkazce\n{prikazce.prijmeni}",type:"string",example:"P\u0159\xedkazce"},{key:"prikazce.titul_za",label:"Titul za jm\xe9nem\n{prikazce.titul_za}",type:"string",example:""},{key:"prikazce.email",label:"Email p\u0159\xedkazce\n{prikazce.email}",type:"string",example:"pavel.prikazce@firma.cz"},{key:"prikazce.telefon",label:"Telefon p\u0159\xedkazce\n{prikazce.telefon}",type:"string",example:"+420 444 555 666"},{key:"prikazce.cele_jmeno",label:"Cel\xe9 jm\xe9no p\u0159\xedkazce\n{prikazce.cele_jmeno}",type:"string",example:"Bc. Pavel P\u0159\xedkazce"},{key:"prikazce.plne_jmeno",label:"Pln\xe9 jm\xe9no p\u0159\xedkazce (alias)\n{prikazce.plne_jmeno}",type:"string",example:"Bc. Pavel P\u0159\xedkazce"},{key:"prikazce.lokalita.nazev",label:"Lokalita p\u0159\xedkazce\n{prikazce.lokalita.nazev}",type:"string",example:"Praha"}]},{group:"\ud83e\uddee Vypo\u010d\xedtan\xe9 hodnoty",fields:[{key:"vypocitane.celkova_cena_bez_dph",label:"Celkov\xe1 cena bez DPH\n{vypocitane.celkova_cena_bez_dph}",type:"currency",example:"8264.46"},{key:"vypocitane.celkova_cena_s_dph",label:"Celkov\xe1 cena s DPH\n{vypocitane.celkova_cena_s_dph}",type:"currency",example:"10000.00"},{key:"vypocitane.vypoctene_dph",label:"Vypo\u010dten\xe9 DPH\n{vypocitane.vypoctene_dph}",type:"currency",example:"1735.54"},{key:"vypocitane.celkova_cena_bez_dph_kc",label:"Celkov\xe1 cena bez DPH (s K\u010d)\n{vypocitane.celkova_cena_bez_dph_kc}",type:"string",example:"8 264.46 K\u010d"},{key:"vypocitane.celkova_cena_s_dph_kc",label:"Celkov\xe1 cena s DPH (s K\u010d)\n{vypocitane.celkova_cena_s_dph_kc}",type:"string",example:"10 000.00 K\u010d"},{key:"vypocitane.vypoctene_dph_kc",label:"Vypo\u010dten\xe9 DPH (s K\u010d)\n{vypocitane.vypoctene_dph_kc}",type:"string",example:"1 735.54 K\u010d"},{key:"vypocitane.pocet_polozek",label:"Po\u010det polo\u017eek\n{vypocitane.pocet_polozek}",type:"number",example:"5"},{key:"vypocitane.pocet_priloh",label:"Po\u010det p\u0159\xedloh\n{vypocitane.pocet_priloh}",type:"number",example:"3"},{key:"vypocitane.datum_generovani",label:"Datum generov\xe1n\xed\n{vypocitane.datum_generovani}",type:"date",example:"24.11.2025"},{key:"vypocitane.cas_generovani",label:"\u010cas generov\xe1n\xed\n{vypocitane.cas_generovani}",type:"time",example:"14:30"},{key:"vypocitane.datum_cas_generovani",label:"Datum a \u010das generov\xe1n\xed\n{vypocitane.datum_cas_generovani}",type:"datetime",example:"24.11.2025 14:30"},{key:"vypocitane.garant_jmeno_prijmeni",label:"Garant - Jm\xe9no P\u0159\xedjmen\xed\n{vypocitane.garant_jmeno_prijmeni}",type:"string",example:"Jan Nov\xe1k"},{key:"vypocitane.garant_prijmeni_jmeno",label:"Garant - P\u0159\xedjmen\xed Jm\xe9no\n{vypocitane.garant_prijmeni_jmeno}",type:"string",example:"Nov\xe1k Jan"},{key:"vypocitane.garant_cele_jmeno_s_tituly",label:"Garant - s tituly\n{vypocitane.garant_cele_jmeno_s_tituly}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"vypocitane.prikazce_jmeno_prijmeni",label:"P\u0159\xedkazce - Jm\xe9no P\u0159\xedjmen\xed\n{vypocitane.prikazce_jmeno_prijmeni}",type:"string",example:"Marie Svobodov\xe1"},{key:"vypocitane.prikazce_prijmeni_jmeno",label:"P\u0159\xedkazce - P\u0159\xedjmen\xed Jm\xe9no\n{vypocitane.prikazce_prijmeni_jmeno}",type:"string",example:"Svobodov\xe1 Marie"},{key:"vypocitane.schvalovatel_jmeno_prijmeni",label:"Schvalovatel - Jm\xe9no P\u0159\xedjmen\xed\n{vypocitane.schvalovatel_jmeno_prijmeni}",type:"string",example:"Petr Dvo\u0159\xe1k"},{key:"vypocitane.objednatel_jmeno_prijmeni",label:"Objednatel - Jm\xe9no P\u0159\xedjmen\xed\n{vypocitane.objednatel_jmeno_prijmeni}",type:"string",example:"Anna Nov\xe1kov\xe1"}]},{group:"Dodavatel",fields:[{key:"dodavatel_nazev",label:"N\xe1zev dodavatele\n{dodavatel_nazev}",type:"string",example:"DODAVATEL s.r.o."},{key:"dodavatel_adresa",label:"Adresa dodavatele\n{dodavatel_adresa}",type:"string",example:"Obchodn\xed 123, 110 00 Praha 1"},{key:"dodavatel_ico",label:"I\u010cO dodavatele\n{dodavatel_ico}",type:"string",example:"12345678"},{key:"dodavatel_dic",label:"DI\u010c dodavatele\n{dodavatel_dic}",type:"string",example:"CZ12345678"}]},{group:"Polo\u017eky",fields:[{key:"polozky",label:"V\u0161echny polo\u017eky (array)\n{polozky}",type:"array",example:"[{id,popis,cena_bez_dph,sazba_dph,cena_s_dph}]"},{key:"polozky[0].id",label:"Prvn\xed polo\u017eka - ID\n{polozky[0].id}",type:"number",example:"1"},{key:"polozky[0].popis",label:"Prvn\xed polo\u017eka - popis\n{polozky[0].popis}",type:"string",example:"Kancel\xe1\u0159sk\xfd st\u016fl 120x80 cm"},{key:"polozky[0].cena_bez_dph",label:"Prvn\xed polo\u017eka - cena bez DPH\n{polozky[0].cena_bez_dph}",type:"currency",example:"8264.46"},{key:"polozky[0].sazba_dph",label:"Prvn\xed polo\u017eka - sazba DPH\n{polozky[0].sazba_dph}",type:"number",example:"21"},{key:"polozky[0].cena_s_dph",label:"Prvn\xed polo\u017eka - cena s DPH\n{polozky[0].cena_s_dph}",type:"currency",example:"10000.00"}]},{group:"P\u0159\xedlohy",fields:[{key:"prilohy",label:"V\u0161echny p\u0159\xedlohy (array)\n{prilohy}",type:"array",example:"[{id,originalni_nazev_souboru,velikost_souboru_b,...}]"},{key:"prilohy[0].id",label:"Prvn\xed p\u0159\xedloha - ID\n{prilohy[0].id}",type:"number",example:"1"},{key:"prilohy[0].originalni_nazev_souboru",label:"Prvn\xed p\u0159\xedloha - n\xe1zev\n{prilohy[0].originalni_nazev_souboru}",type:"string",example:"Specifikace_objednavky.pdf"},{key:"prilohy[0].velikost_souboru_b",label:"Prvn\xed p\u0159\xedloha - velikost\n{prilohy[0].velikost_souboru_b}",type:"number",example:"245760"},{key:"prilohy[0].typ_prilohy",label:"Prvn\xed p\u0159\xedloha - typ\n{prilohy[0].typ_prilohy}",type:"string",example:"specifikace"},{key:"prilohy[0].dt_vytvoreni",label:"Prvn\xed p\u0159\xedloha - datum vytvo\u0159en\xed\n{prilohy[0].dt_vytvoreni}",type:"datetime",example:"2025-01-10 15:00:00"},{key:"prilohy[0].nahrano_uzivatel.username",label:"Prvn\xed p\u0159\xedloha - nahr\xe1l username\n{prilohy[0].nahrano_uzivatel.username}",type:"string",example:"jan.novak"},{key:"prilohy[0].nahrano_uzivatel.jmeno",label:"Prvn\xed p\u0159\xedloha - nahr\xe1l jm\xe9no\n{prilohy[0].nahrano_uzivatel.jmeno}",type:"string",example:"Jan"},{key:"prilohy[0].nahrano_uzivatel.prijmeni",label:"Prvn\xed p\u0159\xedloha - nahr\xe1l p\u0159\xedjmen\xed\n{prilohy[0].nahrano_uzivatel.prijmeni}",type:"string",example:"Nov\xe1k"}]},{group:"Faktury",fields:[{key:"faktury",label:"V\u0161echny faktury (array)\n{faktury}",type:"array",example:"[{id,fa_cislo_vema,fa_datum_vystaveni,fa_castka,...}]"},{key:"faktury[0].id",label:"Prvn\xed faktura - ID\n{faktury[0].id}",type:"number",example:"1"},{key:"faktury[0].fa_cislo_vema",label:"Prvn\xed faktura - \u010d\xedslo Fa/VPD\n{faktury[0].fa_cislo_vema}",type:"string",example:"FA-2025-001"},{key:"faktury[0].fa_datum_vystaveni",label:"Prvn\xed faktura - datum vystaven\xed\n{faktury[0].fa_datum_vystaveni}",type:"date",example:"2025-02-01"},{key:"faktury[0].fa_datum_splatnosti",label:"Prvn\xed faktura - datum splatnosti\n{faktury[0].fa_datum_splatnosti}",type:"date",example:"2025-02-15"},{key:"faktury[0].fa_datum_doruceni",label:"Prvn\xed faktura - datum doru\u010den\xed\n{faktury[0].fa_datum_doruceni}",type:"date",example:"2025-02-01"},{key:"faktury[0].fa_dorucena",label:"Prvn\xed faktura - doru\u010dena (0/1)\n{faktury[0].fa_dorucena}",type:"number",example:"1"},{key:"faktury[0].fa_castka",label:"Prvn\xed faktura - \u010d\xe1stka\n{faktury[0].fa_castka}",type:"currency",example:"10000.00"},{key:"faktury[0].fa_strediska_kod",label:"Prvn\xed faktura - st\u0159ediska\n{faktury[0].fa_strediska_kod}",type:"string",example:"IT001,FIN002"},{key:"faktury[0].fa_poznamka",label:"Prvn\xed faktura - pozn\xe1mka\n{faktury[0].fa_poznamka}",type:"text",example:"Pozn\xe1mka k faktu\u0159e"},{key:"faktury[0].vytvoril_uzivatel_id",label:"Prvn\xed faktura - vytvo\u0159il (user ID)\n{faktury[0].vytvoril_uzivatel_id}",type:"number",example:"5"},{key:"faktury[0].dt_vytvoreni",label:"Prvn\xed faktura - datum vytvo\u0159en\xed\n{faktury[0].dt_vytvoreni}",type:"datetime",example:"2025-02-01 10:00:00"},{key:"faktury[0].dt_aktualizace",label:"Prvn\xed faktura - datum aktualizace\n{faktury[0].dt_aktualizace}",type:"datetime",example:"2025-02-01 15:30:00"}]},{group:"Faktury - Polo\u017eky",fields:[{key:"faktury[0].polozky",label:"Prvn\xed faktura - v\u0161echny polo\u017eky (array)\n{faktury[0].polozky}",type:"array",example:"[{id,popis,cena_bez_dph,sazba_dph,cena_s_dph}]"},{key:"faktury[0].polozky[0].id",label:"Prvn\xed faktura, prvn\xed polo\u017eka - ID\n{faktury[0].polozky[0].id}",type:"number",example:"1"},{key:"faktury[0].polozky[0].popis",label:"Prvn\xed faktura, prvn\xed polo\u017eka - popis\n{faktury[0].polozky[0].popis}",type:"string",example:"Kancel\xe1\u0159sk\xfd st\u016fl 120x80 cm"},{key:"faktury[0].polozky[0].mnozstvi",label:"Prvn\xed faktura, prvn\xed polo\u017eka - mno\u017estv\xed\n{faktury[0].polozky[0].mnozstvi}",type:"number",example:"1"},{key:"faktury[0].polozky[0].jednotka",label:"Prvn\xed faktura, prvn\xed polo\u017eka - jednotka\n{faktury[0].polozky[0].jednotka}",type:"string",example:"ks"},{key:"faktury[0].polozky[0].cena_bez_dph",label:"Prvn\xed faktura, prvn\xed polo\u017eka - cena bez DPH\n{faktury[0].polozky[0].cena_bez_dph}",type:"currency",example:"8264.46"},{key:"faktury[0].polozky[0].sazba_dph",label:"Prvn\xed faktura, prvn\xed polo\u017eka - sazba DPH\n{faktury[0].polozky[0].sazba_dph}",type:"number",example:"21"},{key:"faktury[0].polozky[0].cena_s_dph",label:"Prvn\xed faktura, prvn\xed polo\u017eka - cena s DPH\n{faktury[0].polozky[0].cena_s_dph}",type:"currency",example:"10000.00"}]},{group:"Faktury - P\u0159\xedlohy",fields:[{key:"faktury[0].prilohy",label:"Prvn\xed faktura - v\u0161echny p\u0159\xedlohy (array)\n{faktury[0].prilohy}",type:"array",example:"[{id,originalni_nazev_souboru,typ_prilohy,...}]"},{key:"faktury[0].prilohy[0].id",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - ID\n{faktury[0].prilohy[0].id}",type:"number",example:"1"},{key:"faktury[0].prilohy[0].originalni_nazev_souboru",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - n\xe1zev\n{faktury[0].prilohy[0].originalni_nazev_souboru}",type:"string",example:"Faktura_FA-2025-001.pdf"},{key:"faktury[0].prilohy[0].typ_prilohy",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - typ\n{faktury[0].prilohy[0].typ_prilohy}",type:"string",example:"FAKTURA"},{key:"faktury[0].prilohy[0].velikost_souboru_b",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - velikost\n{faktury[0].prilohy[0].velikost_souboru_b}",type:"number",example:"145280"},{key:"faktury[0].prilohy[0].je_isdoc",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - je ISDOC\n{faktury[0].prilohy[0].je_isdoc}",type:"boolean",example:"ano"},{key:"faktury[0].prilohy[0].dt_vytvoreni",label:"Prvn\xed faktura, prvn\xed p\u0159\xedloha - datum vytvo\u0159en\xed\n{faktury[0].prilohy[0].dt_vytvoreni}",type:"datetime",example:"2025-02-01 10:00:00"}]},{group:"Vypo\u010d\xedtan\xe9",fields:[{key:"vypocitane.celkova_cena_bez_dph",label:"Celkov\xe1 cena bez DPH (sou\u010det polo\u017eek)\n{vypocitane.celkova_cena_bez_dph}",type:"currency",example:"82644.63"},{key:"vypocitane.celkova_cena_s_dph",label:"Celkov\xe1 cena s DPH (sou\u010det polo\u017eek)\n{vypocitane.celkova_cena_s_dph}",type:"currency",example:"100000.00"},{key:"vypocitane.vypoctene_dph",label:"Vypo\u010dten\xe9 DPH (rozd\xedl)\n{vypocitane.vypoctene_dph}",type:"currency",example:"17355.37"},{key:"vypocitane.celkova_cena_bez_dph_kc",label:"Celkov\xe1 cena bez DPH s K\u010d\n{vypocitane.celkova_cena_bez_dph_kc}",type:"string",example:"82 644.63 K\u010d"},{key:"vypocitane.celkova_cena_s_dph_kc",label:"Celkov\xe1 cena s DPH s K\u010d\n{vypocitane.celkova_cena_s_dph_kc}",type:"string",example:"100 000.00 K\u010d"},{key:"vypocitane.vypoctene_dph_kc",label:"Vypo\u010dten\xe9 DPH s K\u010d\n{vypocitane.vypoctene_dph_kc}",type:"string",example:"17 355.37 K\u010d"},{key:"vypocitane.pocet_polozek",label:"Po\u010det polo\u017eek objedn\xe1vky\n{vypocitane.pocet_polozek}",type:"number",example:"5"},{key:"vypocitane.pocet_priloh",label:"Po\u010det p\u0159\xedloh\n{vypocitane.pocet_priloh}",type:"number",example:"3"},{key:"vypocitane.datum_generovani",label:"Datum generov\xe1n\xed dokumentu\n{vypocitane.datum_generovani}",type:"date",example:"16.11.2025"},{key:"vypocitane.cas_generovani",label:"\u010cas generov\xe1n\xed dokumentu\n{vypocitane.cas_generovani}",type:"time",example:"14:30"},{key:"vypocitane.datum_cas_generovani",label:"Datum a \u010das generov\xe1n\xed\n{vypocitane.datum_cas_generovani}",type:"datetime",example:"16.11.2025 14:30"},{key:"vypocitane.vybrany_uzivatel_cele_jmeno",label:"Vybran\xfd u\u017eivatel - cel\xe9 jm\xe9no s tituly\n{vypocitane.vybrany_uzivatel_cele_jmeno}",type:"string",example:"Ing. Jan Nov\xe1k Ph.D."},{key:"vypocitane.vybrany_uzivatel_jmeno",label:"Vybran\xfd u\u017eivatel - jm\xe9no\n{vypocitane.vybrany_uzivatel_jmeno}",type:"string",example:"Jan"},{key:"vypocitane.vybrany_uzivatel_prijmeni",label:"Vybran\xfd u\u017eivatel - p\u0159\xedjmen\xed\n{vypocitane.vybrany_uzivatel_prijmeni}",type:"string",example:"Nov\xe1k"},{key:"vypocitane.vybrany_uzivatel_titul_pred",label:"Vybran\xfd u\u017eivatel - titul p\u0159ed\n{vypocitane.vybrany_uzivatel_titul_pred}",type:"string",example:"Ing."},{key:"vypocitane.vybrany_uzivatel_titul_za",label:"Vybran\xfd u\u017eivatel - titul za\n{vypocitane.vybrany_uzivatel_titul_za}",type:"string",example:"Ph.D."},{key:"vypocitane.vybrany_uzivatel_email",label:"Vybran\xfd u\u017eivatel - email\n{vypocitane.vybrany_uzivatel_email}",type:"string",example:"jan.novak@firma.cz"},{key:"vypocitane.vybrany_uzivatel_telefon",label:"Vybran\xfd u\u017eivatel - telefon\n{vypocitane.vybrany_uzivatel_telefon}",type:"string",example:"+420 123 456 789"},{key:"vypocitane.uzivatelem_vybrany_text",label:"Text vybran\xfd u\u017eivatelem (placeholder)\n{vypocitane.uzivatelem_vybrany_text}",type:"string",example:"[TEXT_VYBRAN_U\u017dIVATELEM]"}]},{group:"Syst\xe9mov\xe9",fields:[{key:"aktualni_datum",label:"Aktu\xe1ln\xed datum (generovan\xe9 FE)\n{aktualni_datum}",type:"string",example:"22.10.2025"},{key:"aktualni_cas",label:"Aktu\xe1ln\xed \u010das (generovan\xe9 FE)\n{aktualni_cas}",type:"string",example:"14:30:15"},{key:"aktualni_datum_cas",label:"Aktu\xe1ln\xed datum a \u010das (generovan\xe9 FE)\n{aktualni_datum_cas}",type:"string",example:"22.10.2025 14:30:15"}]}],p=(n,e)=>{const o=(0,t.A)({},n);return e.forEach(n=>{n.fields.forEach(n=>{if("composed"===n.type&&o[Object.keys(o).find(e=>o[e]===n.key)]){const e=Object.keys(o).find(e=>o[e]===n.key);if(n.composition&&n.composition.length>0)if(n.template){let t=n.template;n.composition.forEach((n,e)=>{t=t.replace("{".concat(e,"}"),"{".concat(n,"}"))}),o[e]=t}else{const t=n.separator||" ";o[e]=n.composition.map(n=>"{".concat(n,"}")).join(t)}}})}),o},u=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o={};return Object.entries(n).forEach(n=>{let[t,r]=n;o[t]=e?m(e,r):"{".concat(r,"}")}),o},m=(n,e)=>{if(e.includes("+")&&!e.includes("{")){const o=e.split("+").map(n=>n.trim()).map(e=>{const o=h(n,e);return g(e,o)}).filter(n=>n&&n.trim());return o.join(" ")}if(e.includes("{")&&e.includes("}")){let o=e;const t=e.match(/\{([^}]+)\}/g);return t&&t.forEach(e=>{const t=e.replace(/[{}]/g,"");if(t.includes("+")){const r=t.split("+").map(n=>n.trim()).map(e=>{const o=h(n,e);return g(e,o)}).filter(n=>n&&n.trim()),a=r.join(" ");o=o.replace(e,a)}else{const r=h(n,t),a=g(t,r);o=o.replace(e,a||"")}}),o}const o=h(n,e);return g(e,o)||"{".concat(e,"}")},g=(n,e)=>{if(null===e||void 0===e||""===e)return"";const o=n.toLowerCase();if("boolean"===typeof e)return e?"ano":"";if(o.includes("boolean_text")||"string"===typeof e&&("ano"===e||""===e))return e;if(o.includes("cena")||o.includes("price")||o.includes("amount")||o.includes("max_cena")||o.includes("currency")){const n=parseFloat(e);if(!isNaN(n))return n.toLocaleString("cs-CZ",{minimumFractionDigits:0,maximumFractionDigits:0})+" K\u010d"}if(o.includes("datum")||o.includes("date")||o.includes("dt_")||o.includes("termin"))try{const n=new Date(e);if(!isNaN(n.getTime()))return n.toLocaleDateString("cs-CZ")}catch(t){}if(o.includes("datetime")||o.includes("dt_vytvoreno")||o.includes("dt_aktualizace")||o.includes("datum_schvaleni"))try{const n=new Date(e);if(!isNaN(n.getTime()))return n.toLocaleDateString("cs-CZ")+" "+n.toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"})}catch(t){}if(o.includes("time")&&!o.includes("datetime"))try{if("string"===typeof e&&e.match(/^\d{1,2}:\d{2}$/))return e;const n=new Date(e);if(!isNaN(n.getTime()))return n.toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"})}catch(t){}return String(e)},h=(n,e)=>{if(e.startsWith("polozky_")&&n.polozky&&Array.isArray(n.polozky)){const o=n.polozky;switch(e){case"polozky_count":return o.length;case"polozky_celkova_cena":return o.reduce((n,e)=>n+(parseFloat(e.cena_s_dph)||0),0);case"polozky_celkova_cena_bez_dph":return o.reduce((n,e)=>n+(parseFloat(e.cena_bez_dph)||0),0);case"polozky_dph_celkem":return o.reduce((n,e)=>n+(parseFloat(e.cena_s_dph)||0),0)-o.reduce((n,e)=>n+(parseFloat(e.cena_bez_dph)||0),0);case"polozky_nazvy":return o.map(n=>n.nazev||n.popis||"").filter(n=>n).join(", ");case"polozky_mnozstvi_celkem":return o.reduce((n,e)=>n+(parseFloat(e.mnozstvi)||0),0);case"polozky_jednotky":return[...new Set(o.map(n=>n.jednotka).filter(n=>n))].join(", ");case"polozky_dodavatele":return[...new Set(o.map(n=>n.dodavatel_nazev).filter(n=>n))].join(", ");case"polozky_katalogova_cisla":return o.map(n=>n.katalogove_cislo).filter(n=>n).join(", ");case"polozky_popis_souhrnny":return o.map(n=>n.popis||n.nazev||"").filter(n=>n).join("; ");case"polozky_formatovane":return o.map((n,e)=>{const o=n.nazev||n.popis||"Polo\u017eka",t=n.mnozstvi||1,r=n.jednotka||"ks",a=n.cena_s_dph||n.cena_bez_dph||0;return"".concat(e+1,". ").concat(o," (").concat(t).concat(r," \xd7 ").concat(a," K\u010d)")}).join("\n")}}if(e.endsWith(".jmeno_cele")){const o=e.replace(".jmeno_cele",""),t=o?e.split(".").reduce((n,e)=>n&&void 0!==n[e]?n[e]:void 0,n):n;if(t){if(t.jmeno_cele)return t.jmeno_cele;const n=t.jmeno||t.uzivatel_jmeno||"",e=t.prijmeni||t.uzivatel_prijmeni||"",o="".concat(n," ").concat(e).trim();if(o)return o}if("objednatel"===o){const e=n.uzivatel_jmeno||n.jmeno||"",o=n.uzivatel_prijmeni||n.prijmeni||"";return"".concat(e," ").concat(o).trim()}if("garant"===o){const e=n.garant_jmeno||"",o=n.garant_prijmeni||"";return"".concat(e," ").concat(o).trim()}if("schvalovatel"===o){const e=n.schvalovatel_jmeno||"",o=n.schvalovatel_prijmeni||"";return"".concat(e," ").concat(o).trim()}return""}return e.split(".").reduce((n,e)=>n&&void 0!==n[e]?n[e]:void 0,n)},x=n=>{if(!n||"object"!==typeof n)return console.warn("\u26a0\ufe0f generateFieldsFromApiData: Neplatn\xe1 data"),c();const e=[],o={dodavatel:"Dodavatel",objednatel:"Objednatel",garant:"Garant",uzivatel:"U\u017eivatel",schvalovatel:"Schvalovatel",prikazce:"P\u0159\xedkazce",polozky:"Polo\u017eky",prilohy:"P\u0159\xedlohy",smlouva:"Smlouva",faktury:"Faktury",platba:"Platba"},t=function(n,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const t=(n=>null===n||void 0===n?"string":Array.isArray(n)?"array":"number"===typeof n?n.toString().includes(".")?"currency":"number":"boolean"===typeof n?"boolean":"string"===typeof n?/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(n)?"datetime":/^\d{4}-\d{2}-\d{2}$/.test(n)?"date":n.length>100?"text":"string":"string")(e);return{key:n,label:o?"".concat(o,"\n{").concat(n,"}"):"".concat(n,"\n{").concat(n,"}"),type:t,example:null!==e&&void 0!==e?String(e).substring(0,50):""}},r=n=>{const e=n.match(/^([a-z]+)_/i);if(e){const n=e[1].toLowerCase();if(o[n])return{prefix:n,name:o[n]}}const t=n.match(/^([a-z]+)\./i);if(t){const n=t[1].toLowerCase();if(o[n])return{prefix:n,name:o[n]}}const r=n.toLowerCase();return o[r]?{prefix:r,name:o[r]}:null},a={},i=[],l=["cislo_objednavky","dt_objednavky","dt_vytvoreni","dt_aktualizace","dt_schvaleni","dt_odeslani","dt_akceptace","dt_zverejneni","predmet","strediska_kod","max_cena_s_dph","financovani","druh_objednavky_kod","schvaleni_komentar","dt_predpokladany_termin_dodani","misto_dodani","zaruka","poznamka","stav_workflow_kod","stav_objednavky","dodavatel_zpusob_potvrzeni","registr_iddt"];if(Object.entries(n).forEach(n=>{let[o,s]=n;if(s&&"object"===typeof s&&!Array.isArray(s)){const n=r(o);return void function(n,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=[];Object.entries(n).forEach(n=>{let[e,o]=n;const i=r?"".concat(r,".").concat(e):e;o&&"object"===typeof o&&!Array.isArray(o)?(a.push(t(i,JSON.stringify(o))),Object.entries(o).forEach(n=>{let[e,o]=n;a.push(t("".concat(i,".").concat(e),o))})):Array.isArray(o)&&o.length>0?(a.push(t(i,"[".concat(o.length," polo\u017eek]"))),"object"===typeof o[0]&&Object.entries(o[0]).forEach(n=>{let[e,o]=n;a.push(t("".concat(i,"[0].").concat(e),o))})):a.push(t(i,o))}),a.length>0&&e.push({group:o,fields:a})}(s,n?n.name:o.charAt(0).toUpperCase()+o.slice(1),o)}if(Array.isArray(s)){const n=r(o),a=n?n.name:o.charAt(0).toUpperCase()+o.slice(1),i=[t(o,"[".concat(s.length," polo\u017eek]"))];return s.length>0&&"object"===typeof s[0]&&Object.entries(s[0]).forEach(n=>{let[e,r]=n;"object"!==typeof r||null===r||Array.isArray(r)?i.push(t("".concat(o,"[0].").concat(e),r)):Object.entries(r).forEach(n=>{let[r,a]=n;i.push(t("".concat(o,"[0].").concat(e,".").concat(r),a))})}),void e.push({group:a,fields:i})}const d=r(o);l.includes(o)?i.push(t(o,s)):d?(a[d.prefix]||(a[d.prefix]={name:d.name,fields:[]}),a[d.prefix].fields.push(t(o,s))):i.push(t(o,s))}),i.length>0){const n=["dt_vytvoreni","dt_aktualizace","dt_objednavky","dt_schvaleni","dt_odeslani","dt_akceptace","dt_zverejneni","dt_predpokladany_termin_dodani"],o=i.filter(e=>n.includes(e.key));o.length>0&&e.unshift({group:"\ud83d\udcc5 Datumov\xe1 pole workflow",fields:o});const t=["cislo_objednavky","predmet","strediska_kod","max_cena_s_dph","financovani","druh_objednavky_kod","schvaleni_komentar","misto_dodani","zaruka","poznamka","stav_workflow_kod","stav_objednavky","dodavatel_zpusob_potvrzeni","registr_iddt"],r=i.filter(n=>t.includes(n.key));r.length>0&&e.push({group:"Z\xe1kladn\xed \xfadaje",fields:r}),e.push({group:"Objedn\xe1vka - detail",fields:i})}Object.keys(o).forEach(n=>{a[n]&&e.push({group:a[n].name,fields:a[n].fields})});const s=c(),d=s.find(n=>"\ud83d\udcc5 Datumov\xe1 pole workflow"===n.group);if(d){const n=e.find(n=>"\ud83d\udcc5 Datumov\xe1 pole workflow"===n.group);if(n){const e=n.fields.map(n=>n.key),o=d.fields.filter(n=>!e.includes(n.key));o.length>0&&(console.log("\u26a0\ufe0f Dopl\u0148uji ".concat(o.length," chyb\u011bj\xedc\xedch datumov\xfdch pol\xed (NULL v API):"),o.map(n=>n.key)),n.fields.push(...o))}else console.log("\u26a0\ufe0f Datumov\xe1 sekce chyb\xed \xfapln\u011b, p\u0159id\xe1v\xe1m statickou definici"),e.unshift(d)}s.filter(n=>"Faktury"===n.group||"Faktury - Polo\u017eky"===n.group||"Faktury - P\u0159\xedlohy"===n.group).forEach(n=>{e.some(e=>e.group===n.group)||e.push(n)});const p=s.find(n=>"\ud83e\uddee Vypo\u010d\xedtan\xe9 hodnoty"===n.group||"Vypo\u010d\xedtan\xe9"===n.group);p&&!e.some(n=>n.group===p.group)&&e.push(p);const u=s.find(n=>"Syst\xe9mov\xe9"===n.group);u&&!e.some(n=>"Syst\xe9mov\xe9"===n.group)&&e.push(u);["Objednatel","Garant","U\u017eivatel (vytvo\u0159il)","Schvalovatel","P\u0159\xedkazce"].forEach(n=>{const o=s.find(e=>e.group===n);if(!o)return;const t=e.find(e=>e.group===n);if(t){const e=t.fields.map(n=>n.key),r=o.fields.filter(n=>!e.includes(n.key));r.length>0&&(console.log("\u26a0\ufe0f Dopl\u0148uji ".concat(r.length,' chyb\u011bj\xedc\xedch pol\xed pro "').concat(n,'" (NULL v API):'),r.map(n=>n.key)),t.fields.push(...r))}else console.log('\u26a0\ufe0f Skupina "'.concat(n,'" chyb\xed \xfapln\u011b, p\u0159id\xe1v\xe1m statickou definici')),e.push(o)});const m=[],g=new Set;return e.forEach(n=>{g.has(n.group)?console.warn('\u26a0\ufe0f Odstran\u011bna duplicitn\xed skupina: "'.concat(n.group,'"')):(g.add(n.group),m.push(n))}),m}},39202:(n,e,o)=>{"use strict";o.d(e,{processDocxWithFields:()=>a});var t=o(26159),r=o.n(t);async function a(n){let{file:e,fieldValues:o={},keepEmptyFields:t=!1}=n;if(!e)return{xml:"",error:"No file provided"};try{const i=new(r()),l=await e.arrayBuffer(),s=await i.loadAsync(l);let d=await s.file("word/document.xml").async("string");const c=new window.DOMParser,p=new window.XMLSerializer,u=c.parseFromString(d,"application/xml");let m=0,g=0;function h(n){if(!n||!n.childNodes)return;let e=[];for(let o=0;o<n.childNodes.length;o++){const t=n.childNodes[o];1===t.nodeType&&"r"===t.localName&&e.push(t)}let r=0;for(;r<e.length;){let a=-1,i=-1,l=null,s="";for(let n=r;n<e.length;n++){const o=e[n];for(let t=0;t<o.childNodes.length;t++){const r=o.childNodes[t];if(1===r.nodeType&&"fldChar"===r.localName){if("begin"===(r.getAttribute("w:fldCharType")||r.getAttribute("fldCharType"))){a=n;let o=!1;for(let r=n+1;r<e.length;r++){const n=e[r];for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(1===t.nodeType&&"instrText"===t.localName&&(s+=t.textContent),1===t.nodeType&&"fldChar"===t.localName){if("end"===(t.getAttribute("w:fldCharType")||t.getAttribute("fldCharType"))){i=r,o=!0;break}}}if(o)break}const t=/(DOCVARIABLE|MERGEFIELD)\s+([A-Z0-9_|.\-/]+)/i.exec(s.replace(/\s+/g," "));t&&(l=t[2].replace(/\s+/g,""));break}}}if(-1!==a)break}if(-1!==a&&-1!==i&&l){let s=o[l]||o[l.toUpperCase()]||o[l.toLowerCase()];if((m+g<3||!s)&&console.log('\ud83d\udd0d Zpracov\xe1v\xe1m pole: "'.concat(l,'", hodnota: "').concat(s||"PR\xc1ZDN\xc9",'", dostupn\xe9 varianty:'),{original:!!o[l],uppercase:!!o[l.toUpperCase()],lowercase:!!o[l.toLowerCase()],hledaneVarianty:[l,l.toUpperCase(),l.toLowerCase()]}),(!s||""===s.trim())&&t){m+g<3&&console.log("  \u23ed\ufe0f Ponech\xe1v\xe1m pr\xe1zdn\xe9 pole: ".concat(l)),g++,r=i+1;continue}const d=e[a];for(;d.firstChild;)d.removeChild(d.firstChild);const c=u.createElementNS(d.namespaceURI,"w:t");c.textContent=s||"",d.appendChild(c);for(let o=i;o>a;o--)n.removeChild(e[o]);(m<3||""===s)&&console.log("  \u2713 Nahrazeno pole: ".concat(l,' = "').concat(s||"(pr\xe1zdn\xe9)",'"')),m++,e=Array.from(n.childNodes).filter(n=>1===n.nodeType&&"r"===n.localName),r=0;continue}r++}for(let o=0;o<n.childNodes.length;o++)h(n.childNodes[o])}h(u.documentElement),d=p.serializeToString(u),s.file("word/document.xml",d);const x=await s.generateAsync({type:"blob"});return console.log("\u2705 DOCX zpracov\xe1n - FIN\xc1LN\xcd STATISTIKY:",{nahrazeno:m,ponechano:g,celkemPoli:Object.keys(o).length,dostupnaData:Object.keys(o).slice(0,10),uspesnost:"".concat(m,"/").concat(m+g," pol\xed")}),{xml:d,blob:x,stats:{replacedCount:m,skippedCount:g,totalFields:Object.keys(o).length}}}catch(a){return console.error("\u274c Chyba p\u0159i zpracov\xe1n\xed DOCX:",a),{xml:"",error:a.message}}}},41740:(n,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>jI});var t,r,a,i,l,s,d,c,p,u,m,g,h,x,f,b,v,y,k,j,A=o(57528),z=o(65043),w=o(45903),_=o(83910),C=o(97929),S=o(41680),P=o(87260),D=o(58467),I=o(95264),N=o(13190),E=o(77737),$=o(42489),O=o(29868),M=o(30380),R=o(53639),F=o(37087),L=o(53986),T=o(89379),V=o(28006),Z=o(7118),K=o(27837),H=o(88720),B=o(8139),U=o(58931),W=o(47111),G=o(36629),Y=o(97950),J=o(83290),q=o(40614),X=o(37719),Q=o(88693),nn=o(63974),en=o(70579);const on=(0,J.i7)(t||(t=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),tn=w.A.div(r||(r=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),rn=w.A.div(a||(a=(0,A.A)(["\n  background: white;\n  border-radius: 20px;\n  width: 100%;\n  max-width: ",";\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  animation: "," 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n"])),n=>n.$large?"1000px":"700px",on),an=w.A.div(i||(i=(0,A.A)(["\n  padding: 2rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),ln=w.A.h2(l||(l=(0,A.A)(["\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),sn=w.A.button(s||(s=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n"]))),dn=w.A.div(d||(d=(0,A.A)(["\n  padding: 2rem;\n  max-height: calc(90vh - 200px);\n  overflow-y: auto;\n"]))),cn=w.A.div(c||(c=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  background: #f9fafb;\n"]))),pn=w.A.div(p||(p=(0,A.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1.5rem;\n  margin-bottom: 1.5rem;\n"])),n=>n.$columns||"1fr"),un=w.A.div(u||(u=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),mn=w.A.label(m||(m=(0,A.A)(["\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #374151;\n"]))),gn=w.A.span(g||(g=(0,A.A)(["\n  color: #dc2626;\n  margin-left: 0.25rem;\n"]))),hn=w.A.input(h||(h=(0,A.A)(["\n  padding: 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  background: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n"])),n=>n.$hasError?"#dc2626":"#e5e7eb",n=>n.$hasError?"#fef2f2":"white",n=>n.$hasError?"#dc2626":"#3b82f6",n=>n.$hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)"),xn=w.A.textarea(x||(x=(0,A.A)(["\n  padding: 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  min-height: 100px;\n  resize: vertical;\n  font-family: inherit;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n"])),n=>n.$hasError?"#dc2626":"#e5e7eb",n=>n.$hasError?"#dc2626":"#3b82f6",n=>n.$hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)"),fn=w.A.label(f||(f=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  cursor: pointer;\n  user-select: none;\n"]))),bn=w.A.input(b||(b=(0,A.A)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n"]))),vn=w.A.div(v||(v=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #dc2626;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0.25rem;\n"]))),yn=w.A.button(y||(y=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),kn=(0,w.A)(yn)(k||(k=(0,A.A)(["\n  background: #3b82f6;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n"]))),jn=(0,w.A)(yn)(j||(j=(0,A.A)(["\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n"]))),An=n=>{let{isOpen:e,onClose:o,onSave:t,editData:r=null,title:a,icon:i,fields:l=[],selectOptions:s={}}=n;const[d,c]=(0,z.useState)({}),[p,u]=(0,z.useState)({}),[m,g]=(0,z.useState)(!1);(0,z.useEffect)(()=>{if(e){if(r){const n=(0,T.A)({},r);l.forEach(e=>{"checkbox"===e.type&&void 0!==n[e.name]&&(n[e.name]=!!n[e.name])}),c(n)}else{const n={};l.forEach(e=>{void 0!==e.default?n[e.name]=e.default:"checkbox"===e.type?n[e.name]=!0:n[e.name]=""}),c(n)}u({})}},[r,e,l]);const h=(n,e)=>{c(o=>(0,T.A)((0,T.A)({},o),{},{[n]:e})),p[n]&&u(e=>{const o=(0,T.A)({},e);return delete o[n],o})};if(!e)return null;const x=n=>{const e=!!p[n.name];switch(n.type){case"text":case"email":case"number":return(0,en.jsx)(hn,{type:n.type,value:d[n.name]||"",onChange:e=>h(n.name,e.target.value),placeholder:n.placeholder,$hasError:e,disabled:n.disabled});case"textarea":return(0,en.jsx)(xn,{value:d[n.name]||"",onChange:e=>h(n.name,e.target.value),placeholder:n.placeholder,$hasError:e});case"select":return(0,en.jsx)(nn.A,{value:d[n.name],onChange:e=>h(n.name,e),options:s[n.name]||[],placeholder:n.placeholder,hasError:e});case"checkbox":return(0,en.jsxs)(fn,{children:[(0,en.jsx)(bn,{type:"checkbox",checked:!!d[n.name],onChange:e=>h(n.name,e.target.checked)}),(0,en.jsx)("span",{children:n.checkboxLabel||n.label})]});default:return null}};return Y.createPortal((0,en.jsx)(tn,{onClick:n=>n.target===n.currentTarget&&o(),children:(0,en.jsxs)(rn,{onClick:n=>n.stopPropagation(),$large:l.length>6,children:[(0,en.jsxs)(an,{children:[(0,en.jsxs)(ln,{children:[i&&(0,en.jsx)(i,{size:28}),a]}),(0,en.jsx)(sn,{onClick:o,children:(0,en.jsx)(q.A,{size:20,color:"white"})})]}),(0,en.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{const n={};return l.forEach(e=>{if(e.required){const o=d[e.name];(void 0===o||null===o||"string"===typeof o&&!o.trim())&&(n[e.name]=e.errorMessage||"".concat(e.label," je povinn\xe9 pole"))}if(e.validate&&d[e.name]){const o=e.validate(d[e.name]);o&&(n[e.name]=o)}}),u(n),0===Object.keys(n).length})()){g(!0);try{await t(d),o()}catch(e){u({submit:e.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed"})}finally{g(!1)}}},children:[(0,en.jsxs)(dn,{children:[l.reduce((n,e,o)=>{if(void 0!==e.row)n[e.row]||(n[e.row]=[]),n[e.row].push(e);else{const t=Math.floor(o/("textarea"===e.type?1:2));n[t]||(n[t]=[]),n[t].push(e)}return n},[]).map((n,e)=>(0,en.jsx)(pn,{$columns:1===n.length?"1fr":"1fr 1fr",children:n.map(n=>(0,en.jsxs)(un,{children:[(0,en.jsxs)(mn,{children:[n.label,n.required&&(0,en.jsx)(gn,{children:"*"})]}),x(n),p[n.name]&&(0,en.jsxs)(vn,{children:[(0,en.jsx)(X.A,{size:16}),p[n.name]]})]},n.name))},e)),p.submit&&(0,en.jsxs)(vn,{children:[(0,en.jsx)(X.A,{size:16}),p.submit]})]}),(0,en.jsxs)(cn,{children:[(0,en.jsxs)(jn,{type:"button",onClick:o,children:[(0,en.jsx)(q.A,{size:16}),"Zru\u0161it"]}),(0,en.jsxs)(kn,{type:"submit",disabled:m,children:[(0,en.jsx)(Q.A,{size:16}),m?"Ukl\xe1d\xe1m...":"Ulo\u017eit"]})]})]})]})}),document.body)};var zn,wn,_n,Cn,Sn,Pn,Dn,In,Nn,En,$n,On,Mn=o(9855);const Rn=(0,J.i7)(zn||(zn=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),Fn=w.A.div(wn||(wn=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99999;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),Ln=w.A.div(_n||(_n=(0,A.A)(["\n  background: white;\n  border-radius: 16px;\n  width: 90%;\n  max-width: 450px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  animation: "," 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n"])),Rn),Tn=w.A.div(Cn||(Cn=(0,A.A)(["\n  padding: 1.5rem 1.5rem 1rem 1.5rem;\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n"]))),Vn=w.A.div(Sn||(Sn=(0,A.A)(["\n  background: #fee2e2;\n  border-radius: 12px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n\n  svg {\n    color: #dc2626;\n  }\n"]))),Zn=w.A.div(Pn||(Pn=(0,A.A)(["\n  flex: 1;\n"]))),Kn=w.A.h3(Dn||(Dn=(0,A.A)(["\n  margin: 0 0 0.5rem 0;\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #1f2937;\n"]))),Hn=w.A.p(In||(In=(0,A.A)(["\n  margin: 0;\n  font-size: 0.875rem;\n  color: #6b7280;\n  line-height: 1.5;\n"]))),Bn=w.A.div(Nn||(Nn=(0,A.A)(["\n  padding: 1rem 1.5rem 1.5rem 1.5rem;\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n"]))),Un=w.A.button(En||(En=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Wn=(0,w.A)(Un)($n||($n=(0,A.A)(["\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n"]))),Gn=(0,w.A)(Un)(On||(On=(0,A.A)(["\n  background: #dc2626;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #b91c1c;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n  }\n"]))),Yn=n=>{let{isOpen:e,onClose:o,onConfirm:t,title:r="Potvrdit akci",message:a="Opravdu chcete prov\xe9st tuto akci?",confirmText:i="Potvrdit",loading:l=!1}=n;if(!e)return null;return Y.createPortal((0,en.jsx)(Fn,{onClick:n=>n.target===n.currentTarget&&o(),children:(0,en.jsxs)(Ln,{onClick:n=>n.stopPropagation(),children:[(0,en.jsxs)(Tn,{children:[(0,en.jsx)(Vn,{children:(0,en.jsx)(X.A,{size:24})}),(0,en.jsxs)(Zn,{children:[(0,en.jsx)(Kn,{children:r}),(0,en.jsx)(Hn,{children:a})]})]}),(0,en.jsxs)(Bn,{children:[(0,en.jsxs)(Wn,{onClick:o,disabled:l,children:[(0,en.jsx)(q.A,{size:16}),"Zru\u0161it"]}),(0,en.jsxs)(Gn,{onClick:async()=>{await t(),o()},disabled:l,children:[(0,en.jsx)(Mn.A,{size:16}),l?"Prob\xedh\xe1...":i]})]})]})}),document.body)},Jn=["nazev"],qn=["parent_id"],Xn=["typ"],Qn=["pocet_uzivatelu"];var ne,ee,oe,te,re,ae,ie,le,se,de,ce,pe,ue,me,ge,he,xe,fe,be,ve,ye,ke,je,Ae,ze,we,_e,Ce,Se,Pe;const De=w.A.div(ne||(ne=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n"]))),Ie=w.A.div(ee||(ee=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),Ne=w.A.button(oe||(oe=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff",n=>(n.$primary,"#2563eb")),Ee=w.A.div(te||(te=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),$e=w.A.button(re||(re=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Oe=w.A.div(ae||(ae=(0,A.A)(["\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n"]))),Me=w.A.table(ie||(ie=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),Re=w.A.tr(le||(le=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),Fe=w.A.th(se||(se=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),Le=w.A.tr(de||(de=(0,A.A)(["\n  background: #f8f9fa;\n"]))),Te=w.A.div(ce||(ce=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  gap: 0.5rem;\n  user-select: none;\n"])),n=>n.$isFirstColumn?"flex-start":"center"),Ve=w.A.tr(pe||(pe=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),Ze=w.A.td(ue||(ue=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),Ke=w.A.div(me||(me=(0,A.A)(["\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n"]))),He=w.A.button(ge||(ge=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n"]))),Be=w.A.div(he||(he=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n"]))),Ue=w.A.div(xe||(xe=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),We=w.A.div(fe||(fe=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),Ge=w.A.button(be||(be=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Ye=w.A.select(ve||(ve=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Je=w.A.button(ye||(ye=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),qe=w.A.button(ke||(ke=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Xe=w.A.div(je||(je=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Qe=w.A.input(Ae||(Ae=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),no=((0,w.A)(Qe)(ze||(ze=(0,A.A)([""]))),w.A.button(we||(we=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"])))),eo=(w.A.span(_e||(_e=(0,A.A)(["\n  padding: 0.25rem 0.75rem;\n  background: ",";\n  color: ",";\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: normal;\n"])),n=>"vnitrni"===n.$type?"#dbeafe":"vnejsi"===n.$type?"#fef3c7":"#e5e7eb",n=>"vnitrni"===n.$type?"#1e40af":"vnejsi"===n.$type?"#92400e":"#374151"),w.A.span(Ce||(Ce=(0,A.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n"])))),oo=w.A.span(Se||(Se=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),to=w.A.div(Pe||(Pe=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 2rem;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n"]))),ro=()=>{var n,e;const{token:o,user:t,userDetail:r}=(0,z.useContext)(K.cy),{showToast:a}=(0,z.useContext)(H.$o),{cache:i,loadDictionary:l,invalidateCache:s}=(0,z.useContext)(B.y),d=null===r||void 0===r?void 0:r.user_id,c=n=>{const e=d||"anon";return"".concat(n,"_").concat(e)},p=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(c(n));return null!==o?JSON.parse(o):e}catch(o){return e}},u=(n,e)=>{try{localStorage.setItem(c(n),JSON.stringify(e))}catch(o){}},[m,g]=(0,z.useState)([]),[h,x]=(0,z.useState)(!1),[f,b]=(0,z.useState)(()=>p("lokality_globalFilter","")),[v,y]=(0,z.useState)(()=>p("lokality_aktivniFilter","all")),[k,j]=(0,z.useState)(()=>p("lokality_columnFilters",{})),[A,w]=(0,z.useState)(()=>p("lokality_sorting",[])),[S,P]=(0,z.useState)(()=>p("lokality_pageSize",25)),[D,I]=(0,z.useState)(()=>p("lokality_pageIndex",0)),[N,E]=(0,z.useState)({open:!1,item:null}),[$,O]=(0,z.useState)({open:!1,item:null}),M=async()=>{x(!0);try{const n=await l("lokality");g(n||[])}catch(n){a(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed lokalit","error")}finally{x(!1)}};(0,z.useEffect)(()=>{var n;o&&null!==t&&void 0!==t&&t.username&&(null!==(n=i.lokality)&&void 0!==n&&n.loaded&&i.lokality.data?(g(i.lokality.data),x(!1)):M())},[o,null===t||void 0===t?void 0:t.username,null===(n=i.lokality)||void 0===n?void 0:n.loaded]),(0,z.useEffect)(()=>{u("lokality_globalFilter",f)},[f,d]),(0,z.useEffect)(()=>{u("lokality_aktivniFilter",v)},[v,d]),(0,z.useEffect)(()=>{u("lokality_columnFilters",k)},[k,d]),(0,z.useEffect)(()=>{u("lokality_sorting",A)},[A,d]),(0,z.useEffect)(()=>{u("lokality_pageSize",S)},[S,d]),(0,z.useEffect)(()=>{u("lokality_pageIndex",D)},[D,d]);const R=(0,z.useMemo)(()=>m.filter(n=>{const e=1===n.aktivni||!0===n.aktivni||"1"===n.aktivni;if("aktivni"===v&&!e)return!1;if("neaktivni"===v&&e)return!1;if(k.nazev&&!(n.nazev||"").toLowerCase().includes(k.nazev.toLowerCase()))return!1;if(k.typ&&!(n.typ||"").toLowerCase().includes(k.typ.toLowerCase()))return!1;if(k.parent_id&&n.parent_id){const e=m.find(e=>e.id===n.parent_id);if(!(e?e.nazev:"").toLowerCase().includes(k.parent_id.toLowerCase()))return!1}return!(k.pocet_uzivatelu&&void 0!==n.pocet_uzivatelu&&!n.pocet_uzivatelu.toString().includes(k.pocet_uzivatelu))}),[m,v,k]),F=(0,z.useMemo)(()=>[{accessorKey:"nazev",header:"N\xe1zev lokality",enableSorting:!0,cell:n=>{let{getValue:e,row:o}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",textAlign:"left"},children:[(0,en.jsx)(V.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("strong",{children:[e(),o.original.id&&(0,en.jsxs)("sup",{style:{fontSize:"0.6rem",color:"#9ca3af",fontWeight:"normal",marginLeft:"4px"},children:["#",o.original.id]})]})]})}},{accessorKey:"parent_id",header:"Nad\u0159azen\xe1 lokalita",enableSorting:!0,cell:n=>{let{getValue:e}=n;const o=e();if(!o)return(0,en.jsx)("div",{style:{textAlign:"left"},children:(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})});const t=m.find(n=>n.id===o);return(0,en.jsx)("div",{style:{textAlign:"left"},children:t?t.nazev:"ID: ".concat(o)})}},{accessorKey:"typ",header:"Typ lokality",enableSorting:!0,cell:n=>{let{getValue:e}=n;const o=e();return(0,en.jsx)(eo,{children:o||"Nezn\xe1m\xfd"})}},{accessorKey:"pocet_uzivatelu",header:"Po\u010det u\u017eivatel\u016f",enableSorting:!0,cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!==e.original.pocet_uzivatelu?(0,en.jsxs)(oo,{title:"".concat(e.original.pocet_uzivatelu," ").concat(1===e.original.pocet_uzivatelu?"u\u017eivatel m\xe1":"u\u017eivatel\u016f m\xe1"," tuto lokalitu"),children:[(0,en.jsx)(Z.A,{size:12}),e.original.pocet_uzivatelu]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})}},{accessorKey:"aktivni",header:"Aktivn\xed",enableSorting:!0,cell:n=>{let{row:e}=n;const o=1===e.original.aktivni||!0===e.original.aktivni||"1"===e.original.aktivni;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(_.g,{icon:o?C.SGM:C.s0Q,style:{color:o?"#22c55e":"#ef4444",fontSize:"18px"}})})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),size:120,cell:n=>{let{row:e}=n;return(0,en.jsxs)(Ke,{children:[(0,en.jsx)(He,{className:"edit",onClick:()=>E({open:!0,item:e.original}),title:"Upravit",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(He,{className:"delete",onClick:()=>O({open:!0,item:e.original}),title:"Smazat",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}],[m]),Y=(0,U.N4)({data:R,columns:F,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{globalFilter:f,sorting:A,pagination:{pageSize:S,pageIndex:D}},onGlobalFilterChange:b,onSortingChange:w,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:S,pageIndex:D}):n;P(e.pageSize),I(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getFilteredRowModel:(0,W.hM)(),getPaginationRowModel:(0,W.kW)()}),J=[{name:"nazev",label:"N\xe1zev",type:"text",required:!0,placeholder:"N\xe1zev lokality"},{name:"typ",label:"Typ",type:"select",required:!0,options:[{value:"vnitrni",label:"Vnit\u0159n\xed"},{value:"vnejsi",label:"Vn\u011bj\u0161\xed"}]},{name:"parent_id",label:"Nad\u0159azen\xe1 lokalita",type:"select",options:[{value:null,label:"\u017d\xe1dn\xe1 (ko\u0159en)"},...m.map(n=>({value:n.id,label:n.nazev}))]}];return(0,en.jsxs)(De,{children:[(0,en.jsxs)(Ie,{children:[(0,en.jsxs)(Ee,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat v lokalit\xe1ch...",value:null!==f&&void 0!==f?f:"",onChange:n=>b(n.target.value)}),f&&(0,en.jsx)($e,{onClick:()=>b(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(Ne,{$primary:!0,onClick:()=>E({open:!0,item:null}),children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xe1 lokalita"]})]}),(0,en.jsxs)(Oe,{children:[(0,en.jsx)(Me,{children:(0,en.jsxs)("tbody",{children:[(0,en.jsx)(Re,{children:Y.getHeaderGroups()[0].headers.map((n,e)=>(0,en.jsx)(Fe,{style:(0,T.A)({width:"typ"===n.id||"pocet_uzivatelu"===n.id?"140px":"aktivni"===n.id||"actions"===n.id?"90px":"auto",maxWidth:"typ"===n.id||"pocet_uzivatelu"===n.id?"140px":"aktivni"===n.id||"actions"===n.id?"90px":"none"},0===e&&{textAlign:"left"}),children:(0,en.jsxs)(Te,{$isFirstColumn:0===e,onClick:n.column.getCanSort()?n.column.getToggleSortingHandler():void 0,style:{cursor:n.column.getCanSort()?"pointer":"default"},children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getCanSort()&&n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{marginLeft:"0.5rem",fontSize:"0.75rem"}})]})},n.id))}),(0,en.jsxs)(Le,{children:[(0,en.jsx)(Fe,{children:(0,en.jsxs)(Xe,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Qe,{type:"text",placeholder:"Hledat n\xe1zev...",value:k.nazev||"",onChange:n=>j(e=>(0,T.A)((0,T.A)({},e),{},{nazev:n.target.value}))}),k.nazev&&(0,en.jsx)(no,{onClick:()=>j(n=>{const{nazev:e}=n;return(0,L.A)(n,Jn)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(Fe,{children:(0,en.jsxs)(Xe,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Qe,{type:"text",placeholder:"Nad\u0159azen\xe1...",value:k.parent_id||"",onChange:n=>j(e=>(0,T.A)((0,T.A)({},e),{},{parent_id:n.target.value}))}),k.parent_id&&(0,en.jsx)(no,{onClick:()=>j(n=>{const{parent_id:e}=n;return(0,L.A)(n,qn)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(Fe,{style:{width:"140px",maxWidth:"140px"},children:(0,en.jsxs)(Xe,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Qe,{type:"text",placeholder:"Typ...",value:k.typ||"",onChange:n=>j(e=>(0,T.A)((0,T.A)({},e),{},{typ:n.target.value}))}),k.typ&&(0,en.jsx)(no,{onClick:()=>j(n=>{const{typ:e}=n;return(0,L.A)(n,Xn)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(Fe,{children:(0,en.jsxs)(Xe,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Qe,{type:"number",placeholder:"Po\u010det...",value:k.pocet_uzivatelu||"",onChange:n=>j(e=>(0,T.A)((0,T.A)({},e),{},{pocet_uzivatelu:n.target.value}))}),k.pocet_uzivatelu&&(0,en.jsx)(no,{onClick:()=>j(n=>{const{pocet_uzivatelu:e}=n;return(0,L.A)(n,Qn)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(Fe,{style:{width:"90px",maxWidth:"90px"},children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(Je,{onClick:()=>{y(n=>"all"===n?"aktivni":"aktivni"===n?"neaktivni":"all")},title:"all"===v?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===v?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===v?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===v?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})})}),(0,en.jsx)(Fe,{style:{width:"90px",maxWidth:"90px"},children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(qe,{onClick:()=>{b(""),y("all"),j({})},title:"Vymazat v\u0161echny filtry",disabled:0===Object.keys(k).length&&"all"===v,children:(0,en.jsx)(_.g,{icon:C.IP$})})})})]}),0===Y.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(Ze,{colSpan:F.length,children:(0,en.jsxs)(to,{children:[(0,en.jsx)(V.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:0===m.length?"\u017d\xe1dn\xe9 lokality":"Nenalezeny \u017e\xe1dn\xe9 lokality"}),(0,en.jsx)("p",{children:0===m.length?"Nejsou k dispozici \u017e\xe1dn\xe9 lokality":"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):Y.getRowModel().rows.map((n,e)=>(0,en.jsx)(Ve,{$isEven:e%2===0,children:n.getVisibleCells().map((n,e)=>(0,en.jsx)(Ze,{style:(0,T.A)({width:"typ"===n.column.id?"140px":"aktivni"===n.column.id||"actions"===n.column.id?"90px":"auto",maxWidth:"typ"===n.column.id?"140px":"aktivni"===n.column.id||"actions"===n.column.id?"90px":"none"},0===e&&{textAlign:"left"}),children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))]})}),(0,en.jsxs)(Be,{children:[(0,en.jsxs)(Ue,{children:["Zobrazeno ",Math.min(D*S+1,R.length)," - ",Math.min((D+1)*S,R.length)," z ",R.length," lokalit"]}),(0,en.jsxs)(We,{children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(Ye,{value:S,onChange:n=>{const e=Number(n.target.value);P(e),I(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(Ge,{onClick:()=>{I(0)},disabled:0===D,children:"\xab\xab"}),(0,en.jsx)(Ge,{onClick:()=>{I(n=>Math.max(0,n-1))},disabled:0===D,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",D+1," z ",Math.max(1,Y.getPageCount())]}),(0,en.jsx)(Ge,{onClick:()=>{I(n=>Math.min(Y.getPageCount()-1,n+1))},disabled:D>=Y.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(Ge,{onClick:()=>{I(Y.getPageCount()-1)},disabled:D>=Y.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),N.open&&(0,en.jsx)(An,{title:N.item?"Upravit lokalitu":"Nov\xe1 lokalita",fields:J,initialData:N.item,onSave:N.item?async n=>{try{await(0,G.ZO)((0,T.A)({token:o,username:null===t||void 0===t?void 0:t.username,id:N.item.id},n)),null===a||void 0===a||a("Lokalita aktualizov\xe1na",{type:"success"}),s("lokality"),M(),E({open:!1,item:null})}catch(e){throw null===a||void 0===a||a(e.message||"Chyba p\u0159i aktualizaci",{type:"error"}),e}}:async n=>{try{await(0,G.c7)((0,T.A)({token:o,username:null===t||void 0===t?void 0:t.username},n)),null===a||void 0===a||a("Lokalita vytvo\u0159ena",{type:"success"}),s("lokality"),M(),E({open:!1,item:null})}catch(e){throw null===a||void 0===a||a(e.message||"Chyba p\u0159i vytv\xe1\u0159en\xed",{type:"error"}),e}},onClose:()=>E({open:!1,item:null})}),$.open&&(0,en.jsx)(Yn,{title:"Smazat lokalitu",message:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{children:["Opravdu chcete smazat lokalitu ",(0,en.jsx)("strong",{children:null===(e=$.item)||void 0===e?void 0:e.nazev}),"?"]}),(0,en.jsx)("p",{style:{color:"#ef4444",fontWeight:600},children:"\u26a0\ufe0f POZOR: Z\xe1znam bude trvale odstran\u011bn z datab\xe1ze!"})]}),onConfirm:async()=>{try{await(0,G.De)({token:o,username:null===t||void 0===t?void 0:t.username,id:$.item.id}),null===a||void 0===a||a("Lokalita smaz\xe1na",{type:"success"}),s("lokality"),M(),O({open:!1,item:null})}catch(n){throw null===a||void 0===a||a(n.message||"Chyba p\u0159i maz\xe1n\xed",{type:"error"}),n}},onCancel:()=>O({open:!1,item:null}),confirmText:"Smazat",cancelText:"Zru\u0161it"})]})};var ao,io,lo,so,co,po,uo,mo,go,ho,xo,fo,bo,vo,yo,ko,jo,Ao,zo,wo,_o,Co,So,Po,Do,Io,No,Eo,$o=o(49922);const Oo=w.A.div(ao||(ao=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),Mo=w.A.div(io||(io=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),Ro=w.A.button(lo||(lo=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff"),Fo=w.A.div(so||(so=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),Lo=w.A.button(co||(co=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),To=w.A.div(po||(po=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n"]))),Vo=w.A.table(uo||(uo=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),Zo=w.A.tr(mo||(mo=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),Ko=w.A.th(go||(go=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),Ho=w.A.tr(ho||(ho=(0,A.A)(["\n  background: #f8f9fa;\n"]))),Bo=w.A.th(xo||(xo=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n"]))),Uo=w.A.div(fo||(fo=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n"]))),Wo=w.A.tr(bo||(bo=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),Go=w.A.td(vo||(vo=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),Yo=(0,w.A)(Go)(yo||(yo=(0,A.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n"]))),Jo=w.A.button(ko||(ko=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),qo=w.A.div(jo||(jo=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Xo=w.A.input(Ao||(Ao=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),Qo=w.A.button(zo||(zo=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),nt=w.A.button(wo||(wo=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),et=w.A.button(_o||(_o=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),ot=w.A.div(Co||(Co=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),tt=w.A.button(So||(So=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),rt=w.A.span(Po||(Po=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),at=w.A.select(Do||(Do=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),it=w.A.div(Io||(Io=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n"]))),lt=w.A.div(No||(No=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n"]))),st=w.A.span(Eo||(Eo=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),dt=()=>{var n;const{token:e,user:o,userDetail:t}=(0,z.useContext)(K.cy),{showToast:r}=(0,z.useContext)(H.$o),{cache:a,loadDictionary:i,invalidateCache:l}=(0,z.useContext)(B.y),s=null===t||void 0===t?void 0:t.user_id,d=n=>{const e=s||"anon";return"".concat(n,"_").concat(e)},c=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(d(n));return null!==o?JSON.parse(o):e}catch(o){return e}},p=(n,e)=>{try{localStorage.setItem(d(n),JSON.stringify(e))}catch(o){}},[u,m]=(0,z.useState)([]),[g,h]=(0,z.useState)(!0),[x,f]=(0,z.useState)(()=>c("pozice_globalFilter","")),[b,v]=(0,z.useState)(()=>c("pozice_columnFilters",{})),[y,k]=(0,z.useState)(()=>c("pozice_aktivniFilter","all")),[j,A]=(0,z.useState)(()=>c("pozice_sorting",[])),[w,S]=(0,z.useState)(()=>c("pozice_pageSize",25)),[P,D]=(0,z.useState)(()=>c("pozice_pageIndex",0)),[I,E]=(0,z.useState)(!1),[$,O]=(0,z.useState)("create"),[M,R]=(0,z.useState)(null),[F,V]=(0,z.useState)(!1),[Y,J]=(0,z.useState)(null);(0,z.useEffect)(()=>{p("pozice_globalFilter",x)},[x,s]),(0,z.useEffect)(()=>{p("pozice_columnFilters",b)},[b,s]),(0,z.useEffect)(()=>{p("pozice_aktivniFilter",y)},[y,s]),(0,z.useEffect)(()=>{p("pozice_sorting",j)},[j,s]),(0,z.useEffect)(()=>{p("pozice_pageSize",w)},[w,s]),(0,z.useEffect)(()=>{p("pozice_pageIndex",P)},[P,s]);const q=async()=>{h(!0);try{const n=await i("pozice");m(n||[])}catch(n){r(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed pozic","error")}finally{h(!1)}};(0,z.useEffect)(()=>{var n;e&&null!==o&&void 0!==o&&o.username&&(null!==(n=a.pozice)&&void 0!==n&&n.loaded&&a.pozice.data?(m(a.pozice.data),h(!1)):q())},[e,null===o||void 0===o?void 0:o.username,null===(n=a.pozice)||void 0===n?void 0:n.loaded]);const X=(0,z.useMemo)(()=>u.filter(n=>{const e=1===n.aktivni||!0===n.aktivni||"1"===n.aktivni;if("aktivni"===y&&!e)return!1;if("neaktivni"===y&&e)return!1;if(x){const e=x.toLowerCase(),o=(n.usek_zkr||"")+" "+(n.usek_nazev||"")+" "+(n.usek_popis||"");if(!((n.nazev_pozice||"").toLowerCase().includes(e)||o.toLowerCase().includes(e)||(n.id||"").toString().toLowerCase().includes(e)))return!1}if(b.nazev_pozice&&!(n.nazev_pozice||"").toLowerCase().includes(b.nazev_pozice.toLowerCase()))return!1;if(b.usek){if(!((n.usek_zkr||"")+" "+(n.usek_nazev||"")+" "+(n.usek_popis||"")).toLowerCase().includes(b.usek.toLowerCase()))return!1}if(b.parent_id&&n.parent_id){const e=u.find(e=>e.id===n.parent_id);if(!(e?e.nazev_pozice:"").toLowerCase().includes(b.parent_id.toLowerCase()))return!1}return!(b.pocet_uzivatelu&&void 0!==n.pocet_uzivatelu&&!n.pocet_uzivatelu.toString().includes(b.pocet_uzivatelu))}),[u,x,b,y]),Q=n=>{if(!n)return"-";const e=u.find(e=>e.id===n);return e?e.nazev_pozice:"ID: ".concat(n)},nn=(0,z.useMemo)(()=>[{accessorKey:"nazev_pozice",header:"N\xe1zev pozice",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[(0,en.jsx)(N.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("span",{style:{fontWeight:"600"},children:[e.original.nazev_pozice,(0,en.jsxs)("sup",{style:{fontSize:"0.65em",opacity:.6,marginLeft:"0.25rem",color:"#6b7280",fontWeight:"normal"},children:["#",e.original.id]})]})]})}},{accessorKey:"usek",header:"\xdasek",cell:n=>{let{row:e}=n;const o=e.original.usek_zkr||"",t=e.original.usek_nazev||"",r=e.original.usek_popis||"";return o||t||r?(0,en.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(o||t)&&(0,en.jsx)("div",{style:{color:"#374151"},children:o&&t?"".concat(o," - ").concat(t):o||t}),r&&(0,en.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:r})]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"-"})}},{accessorKey:"parent_id",header:"Nad\u0159azen\xe1 pozice",cell:n=>{let{row:e}=n;return(0,en.jsx)("span",{style:{color:e.original.parent_id?"#374151":"#9ca3af"},children:Q(e.original.parent_id)})}},{accessorKey:"pocet_uzivatelu",header:"Po\u010det u\u017eivatel\u016f",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!==e.original.pocet_uzivatelu?(0,en.jsxs)(st,{title:"".concat(e.original.pocet_uzivatelu," ").concat(1===e.original.pocet_uzivatelu?"u\u017eivatel m\xe1":"u\u017eivatel\u016f m\xe1"," tuto pozici"),children:[(0,en.jsx)(Z.A,{size:12}),e.original.pocet_uzivatelu]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})}},{accessorKey:"aktivni",header:"Aktivn\xed",cell:n=>{let{row:e}=n;const o=1===e.original.aktivni||!0===e.original.aktivni||"1"===e.original.aktivni;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(_.g,{icon:o?C.SGM:C.s0Q,style:{color:o?"#22c55e":"#ef4444",fontSize:"18px"}})})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(Yo,{children:[(0,en.jsx)(Jo,{className:"edit",onClick:()=>tn(e.original),title:"Upravit pozici",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(Jo,{className:"delete",onClick:()=>rn(e.original),title:"Smazat pozici",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}],[u]),on=(0,U.N4)({data:X,columns:nn,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{sorting:j,pagination:{pageIndex:P,pageSize:w}},onSortingChange:A,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:w,pageIndex:P}):n;S(e.pageSize),D(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getPaginationRowModel:(0,W.kW)(),manualPagination:!1}),tn=n=>{O("edit"),R(n),E(!0)},rn=n=>{J(n),V(!0)},an=()=>{k(n=>"all"===n?"aktivni":"aktivni"===n?"neaktivni":"all")},ln=()=>{v({}),k("all")},sn=[{name:"nazev_pozice",label:"N\xe1zev pozice",type:"text",required:!0,placeholder:"Zadejte n\xe1zev pozice"},{name:"parent_id",label:"Nad\u0159azen\xe1 pozice",type:"select",required:!1,options:[{value:"",label:"\u017d\xe1dn\xe1 (root)"},...u.map(n=>({value:n.id,label:n.nazev_pozice}))]},{name:"popis",label:"Popis",type:"textarea",required:!1,placeholder:"Zadejte popis pozice (voliteln\xe9)"},{name:"aktivni",label:"Aktivn\xed",type:"checkbox",required:!1}];return g?(0,en.jsx)(Oo,{children:(0,en.jsxs)(it,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0,size:"2x"}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:"Na\u010d\xedt\xe1m pozice..."})]})}):(0,en.jsxs)(Oo,{children:[(0,en.jsxs)(Mo,{children:[(0,en.jsxs)(Fo,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Vyhledat v pozic\xedch...",value:x,onChange:n=>f(n.target.value)}),x&&(0,en.jsx)(Lo,{onClick:()=>f(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(Ro,{$primary:!0,onClick:()=>{O("create"),R(null),E(!0)},children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xe1 pozice"]})]}),(0,en.jsxs)(To,{children:[(0,en.jsx)(Vo,{children:(0,en.jsxs)("tbody",{children:[(0,en.jsx)(Zo,{children:on.getHeaderGroups()[0].headers.map(n=>(0,en.jsx)(Ko,{children:"actions"!==n.id?(0,en.jsxs)(Uo,{onClick:n.column.getToggleSortingHandler(),style:{cursor:"pointer"},children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{marginLeft:"0.5rem",fontSize:"0.75rem"}})]}):(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,U.Kv)(n.column.columnDef.header,n.getContext())})},n.id))}),(0,en.jsx)(Ho,{children:on.getHeaderGroups()[0].headers.map(n=>(0,en.jsxs)(Bo,{children:["nazev_pozice"===n.id&&(0,en.jsxs)(qo,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Xo,{type:"text",placeholder:"Hledat...",value:b[n.id]||"",onChange:e=>{const o=e.target.value;v(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),b[n.id]&&(0,en.jsx)(Qo,{onClick:()=>{v(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"usek"===n.id&&(0,en.jsxs)(qo,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Xo,{type:"text",placeholder:"Hledat...",value:b[n.id]||"",onChange:e=>{const o=e.target.value;v(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),b[n.id]&&(0,en.jsx)(Qo,{onClick:()=>{v(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"parent_id"===n.id&&(0,en.jsxs)(qo,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Xo,{type:"text",placeholder:"Hledat...",value:b[n.id]||"",onChange:e=>{const o=e.target.value;v(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),b[n.id]&&(0,en.jsx)(Qo,{onClick:()=>{v(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"pocet_uzivatelu"===n.id&&(0,en.jsxs)(qo,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Xo,{type:"number",placeholder:"Po\u010det...",value:b[n.id]||"",onChange:e=>{const o=e.target.value;v(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),b[n.id]&&(0,en.jsx)(Qo,{onClick:()=>{v(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"aktivni"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(nt,{onClick:an,title:"all"===y?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===y?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===y?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===y?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})}),"actions"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(et,{onClick:ln,title:"Vymazat v\u0161echny filtry sloupc\u016f",disabled:0===Object.keys(b).length&&"all"===y,children:(0,en.jsx)(_.g,{icon:C.IP$})})})]},n.id))}),0===on.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(Go,{colSpan:nn.length,children:(0,en.jsxs)(lt,{children:[(0,en.jsx)(N.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:0===u.length?"\u017d\xe1dn\xe9 pozice":"Nenalezeny \u017e\xe1dn\xe9 pozice"}),(0,en.jsx)("p",{children:0===u.length?"Nejsou k dispozici \u017e\xe1dn\xe9 pozice":"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):on.getRowModel().rows.map((n,e)=>(0,en.jsx)(Wo,{$isEven:e%2===0,children:n.getVisibleCells().map(n=>"actions"===n.column.id?(0,en.jsx)(z.Fragment,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id):(0,en.jsx)(Go,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))]})}),(0,en.jsxs)(ot,{children:[(0,en.jsxs)(rt,{children:["Zobrazeno ",Math.min(P*w+1,X.length)," - ",Math.min((P+1)*w,X.length)," z ",X.length," pozic"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(at,{value:w,onChange:n=>{const e=Number(n.target.value);S(e),D(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(tt,{onClick:()=>{D(0)},disabled:0===P,children:"\xab\xab"}),(0,en.jsx)(tt,{onClick:()=>{D(n=>Math.max(0,n-1))},disabled:0===P,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",P+1," z ",Math.max(1,on.getPageCount())]}),(0,en.jsx)(tt,{onClick:()=>{D(n=>Math.min(on.getPageCount()-1,n+1))},disabled:P>=on.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(tt,{onClick:()=>{D(on.getPageCount()-1)},disabled:P>=on.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),(0,en.jsx)(An,{isOpen:I,onClose:()=>E(!1),onSave:async n=>{try{"create"===$?(await(0,G.Z2)((0,T.A)({token:e,username:o.username},n)),r("Pozice byla vytvo\u0159ena","success"),l("pozice"),q(),E(!1)):(await(0,G.qI)((0,T.A)({token:e,username:o.username,id:M.id},n)),r("Pozice byla aktualizov\xe1na","success"),l("pozice"),q(),E(!1))}catch(t){r(t.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed pozice","error")}},mode:$,title:"create"===$?"Nov\xe1 pozice":"Upravit pozici",fields:sn,initialData:M}),(0,en.jsx)(Yn,{isOpen:F,onClose:()=>V(!1),onConfirm:async()=>{try{await(0,G.ME)({token:e,username:o.username,id:Y.id}),r("Pozice byla smaz\xe1na","success"),l("pozice"),q(),V(!1),J(null)}catch(n){r(n.message||"Chyba p\u0159i maz\xe1n\xed pozice","error")}},title:"Smazat pozici",message:'Opravdu chcete smazat pozici "'.concat(null===Y||void 0===Y?void 0:Y.nazev_pozice,'"?')})]})};var ct,pt,ut,mt,gt,ht,xt,ft,bt,vt,yt,kt,jt,At,zt,wt,_t,Ct,St,Pt,Dt,It,Nt,Et,$t,Ot,Mt,Rt,Ft;const Lt=w.A.div(ct||(ct=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),Tt=w.A.div(pt||(pt=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),Vt=w.A.button(ut||(ut=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff"),Zt=w.A.div(mt||(mt=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),Kt=w.A.button(gt||(gt=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Ht=w.A.div(ht||(ht=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n"]))),Bt=w.A.table(xt||(xt=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Fixn\xed \u0161\xed\u0159ky sloupc\u016f */\n  th:nth-of-type(1), td:nth-of-type(1) { width: auto; }     /* N\xe1zev \xfaseku */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 150px; }    /* Zkratka */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 140px; }    /* Po\u010det u\u017eivatel\u016f */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 90px; }     /* Aktivn\xed */\n  th:last-child, td:last-child { width: 100px; }            /* Akce */\n"]))),Ut=w.A.tr(ft||(ft=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),Wt=w.A.th(bt||(bt=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),Gt=w.A.tr(vt||(vt=(0,A.A)(["\n  background: #f8f9fa;\n"]))),Yt=w.A.th(yt||(yt=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n"]))),Jt=w.A.div(kt||(kt=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n"]))),qt=w.A.tr(jt||(jt=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),Xt=w.A.td(At||(At=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),Qt=(0,w.A)(Xt)(zt||(zt=(0,A.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n"]))),nr=w.A.button(wt||(wt=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),er=w.A.div(_t||(_t=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),or=w.A.input(Ct||(Ct=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),tr=w.A.button(St||(St=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),rr=w.A.button(Pt||(Pt=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),ar=w.A.button(Dt||(Dt=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),ir=w.A.div(It||(It=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),lr=w.A.button(Nt||(Nt=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),sr=w.A.span(Et||(Et=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),dr=w.A.select($t||($t=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),cr=w.A.div(Ot||(Ot=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n"]))),pr=w.A.div(Mt||(Mt=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n"]))),ur=w.A.span(Rt||(Rt=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),mr=w.A.span(Ft||(Ft=(0,A.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n"]))),gr=()=>{var n;const{token:e,user:o,userDetail:t}=(0,z.useContext)(K.cy),{showToast:r}=(0,z.useContext)(H.$o),{cache:a,loadDictionary:i,refreshDictionary:l,invalidateCache:s}=(0,z.useContext)(B.y),d=null===t||void 0===t?void 0:t.user_id,c=n=>{const e=d||"anon";return"".concat(n,"_").concat(e)},p=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(c(n));return null!==o?JSON.parse(o):e}catch(o){return e}},u=(n,e)=>{try{localStorage.setItem(c(n),JSON.stringify(e))}catch(o){}},[m,g]=(0,z.useState)([]),[h,x]=(0,z.useState)(!0),[f,b]=(0,z.useState)(()=>p("useky_globalFilter","")),[v,y]=(0,z.useState)(()=>p("useky_columnFilters",{})),[k,j]=(0,z.useState)(()=>p("useky_aktivniFilter","all")),[A,w]=(0,z.useState)(()=>p("useky_sorting",[])),[S,P]=(0,z.useState)(()=>p("useky_pageSize",25)),[D,I]=(0,z.useState)(()=>p("useky_pageIndex",0)),[N,E]=(0,z.useState)(!1),[$,O]=(0,z.useState)("create"),[R,F]=(0,z.useState)(null),[V,Y]=(0,z.useState)(!1),[J,q]=(0,z.useState)(null);(0,z.useEffect)(()=>{u("useky_globalFilter",f)},[f,d]),(0,z.useEffect)(()=>{u("useky_columnFilters",v)},[v,d]),(0,z.useEffect)(()=>{u("useky_aktivniFilter",k)},[k,d]),(0,z.useEffect)(()=>{u("useky_sorting",A)},[A,d]),(0,z.useEffect)(()=>{u("useky_pageSize",S)},[S,d]),(0,z.useEffect)(()=>{u("useky_pageIndex",D)},[D,d]);const X=async()=>{x(!0);try{const n=await i("useky");g(n||[])}catch(n){r(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed \xfasek\u016f","error")}finally{x(!1)}};(0,z.useEffect)(()=>{var n;e&&null!==o&&void 0!==o&&o.username&&(null!==(n=a.useky)&&void 0!==n&&n.loaded&&a.useky.data?(g(a.useky.data),x(!1)):X())},[e,null===o||void 0===o?void 0:o.username,null===(n=a.useky)||void 0===n?void 0:n.loaded]);const Q=(0,z.useMemo)(()=>m.filter(n=>{const e=1===n.aktivni||!0===n.aktivni||"1"===n.aktivni;if("aktivni"===k&&!e)return!1;if("neaktivni"===k&&e)return!1;if(f){const e=f.toLowerCase();if(!((n.usek_nazev||"").toLowerCase().includes(e)||(n.usek_zkr||"").toLowerCase().includes(e)||(n.id||"").toString().toLowerCase().includes(e)))return!1}return!(v.usek_nazev&&!(n.usek_nazev||"").toLowerCase().includes(v.usek_nazev.toLowerCase()))&&(!(v.usek_zkr&&!(n.usek_zkr||"").toLowerCase().includes(v.usek_zkr.toLowerCase()))&&!(v.pocet_uzivatelu&&void 0!==n.pocet_uzivatelu&&!n.pocet_uzivatelu.toString().includes(v.pocet_uzivatelu)))}),[m,f,v,k]),nn=(0,z.useMemo)(()=>[{accessorKey:"usek_nazev",header:"N\xe1zev \xfaseku",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[(0,en.jsx)(M.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("span",{children:[e.original.usek_nazev,(0,en.jsxs)("sup",{style:{fontSize:"0.65em",opacity:.6,marginLeft:"0.25rem",color:"#6b7280"},children:["#",e.original.id]})]})]})}},{accessorKey:"usek_zkr",header:"Zkratka",cell:n=>{let{row:e}=n;return(0,en.jsx)(mr,{children:e.original.usek_zkr})}},{accessorKey:"pocet_uzivatelu",header:"Po\u010det u\u017eivatel\u016f",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!==e.original.pocet_uzivatelu?(0,en.jsxs)(ur,{title:"".concat(e.original.pocet_uzivatelu," ").concat(1===e.original.pocet_uzivatelu?"u\u017eivatel m\xe1":"u\u017eivatel\u016f m\xe1"," tento \xfasek"),children:[(0,en.jsx)(Z.A,{size:12}),e.original.pocet_uzivatelu]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})}},{accessorKey:"aktivni",header:"Aktivn\xed",cell:n=>{let{row:e}=n;const o=1===e.original.aktivni||!0===e.original.aktivni||"1"===e.original.aktivni;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(_.g,{icon:o?C.SGM:C.s0Q,style:{color:o?"#22c55e":"#ef4444",fontSize:"18px"}})})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(Qt,{children:[(0,en.jsx)(nr,{className:"edit",onClick:()=>tn(e.original),title:"Upravit \xfasek",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(nr,{className:"delete",onClick:()=>rn(e.original),title:"Smazat \xfasek",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}],[]),on=(0,U.N4)({data:Q,columns:nn,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{sorting:A,pagination:{pageIndex:D,pageSize:S}},onSortingChange:w,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:S,pageIndex:D}):n;P(e.pageSize),I(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getPaginationRowModel:(0,W.kW)(),manualPagination:!1}),tn=n=>{O("edit"),F(n),E(!0)},rn=n=>{q(n),Y(!0)},an=()=>{j(n=>"all"===n?"aktivni":"aktivni"===n?"neaktivni":"all")},ln=()=>{y({}),j("all")};return h?(0,en.jsx)(Lt,{children:(0,en.jsxs)(cr,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0,size:"2x"}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:"Na\u010d\xedt\xe1m \xfaseky..."})]})}):(0,en.jsxs)(Lt,{children:[(0,en.jsxs)(Tt,{children:[(0,en.jsxs)(Zt,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Vyhledat v \xfasec\xedch...",value:f,onChange:n=>b(n.target.value)}),f&&(0,en.jsx)(Kt,{onClick:()=>b(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(Vt,{$primary:!0,onClick:()=>{O("create"),F(null),E(!0)},children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xfd \xfasek"]})]}),(0,en.jsxs)(Ht,{children:[(0,en.jsx)(Bt,{children:(0,en.jsxs)("tbody",{children:[(0,en.jsx)(Ut,{children:on.getHeaderGroups()[0].headers.map(n=>(0,en.jsx)(Wt,{children:"actions"!==n.id?(0,en.jsxs)(Jt,{onClick:n.column.getToggleSortingHandler(),style:{cursor:"pointer"},children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{marginLeft:"0.5rem",fontSize:"0.75rem"}})]}):(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,U.Kv)(n.column.columnDef.header,n.getContext())})},n.id))}),(0,en.jsx)(Gt,{children:on.getHeaderGroups()[0].headers.map(n=>(0,en.jsxs)(Yt,{children:["usek_nazev"===n.id&&(0,en.jsxs)(er,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(or,{type:"text",placeholder:"Filtrovat...",value:v[n.id]||"",onChange:e=>{const o=e.target.value;y(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),v[n.id]&&(0,en.jsx)(tr,{onClick:()=>{y(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"usek_zkr"===n.id&&(0,en.jsxs)(er,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(or,{type:"text",placeholder:"Filtrovat...",value:v[n.id]||"",onChange:e=>{const o=e.target.value;y(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),v[n.id]&&(0,en.jsx)(tr,{onClick:()=>{y(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"pocet_uzivatelu"===n.id&&(0,en.jsxs)(er,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(or,{type:"number",placeholder:"Po\u010det...",value:v[n.id]||"",onChange:e=>{const o=e.target.value;y(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),v[n.id]&&(0,en.jsx)(tr,{onClick:()=>{y(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"aktivni"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(rr,{onClick:an,title:"all"===k?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===k?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===k?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===k?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})}),"actions"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(ar,{onClick:ln,title:"Vymazat v\u0161echny filtry sloupc\u016f",disabled:0===Object.keys(v).length&&"all"===k,children:(0,en.jsx)(_.g,{icon:C.IP$})})})]},n.id))}),h?(0,en.jsx)("tr",{children:(0,en.jsx)(Xt,{colSpan:nn.length,style:{textAlign:"center",padding:"2rem"},children:"Na\u010d\xedt\xe1m..."})}):0===on.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(Xt,{colSpan:nn.length,style:{textAlign:"center",padding:"2rem"},children:(0,en.jsxs)(pr,{children:[(0,en.jsx)(M.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:0===m.length?"\u017d\xe1dn\xe9 \xfaseky":"Nenalezeny \u017e\xe1dn\xe9 \xfaseky"}),(0,en.jsx)("p",{children:0===m.length?"Nejsou k dispozici \u017e\xe1dn\xe9 \xfaseky":"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):on.getRowModel().rows.map((n,e)=>(0,en.jsx)(qt,{$isEven:e%2===0,children:n.getVisibleCells().map(n=>"actions"===n.column.id?(0,en.jsx)(z.Fragment,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id):(0,en.jsx)(Xt,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))]})}),(0,en.jsxs)(ir,{children:[(0,en.jsxs)(sr,{children:["Zobrazeno ",Math.min(D*S+1,Q.length)," - ",Math.min((D+1)*S,Q.length)," z ",Q.length," \xfasek\u016f"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(dr,{value:S,onChange:n=>{const e=Number(n.target.value);P(e),I(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(lr,{onClick:()=>{I(0)},disabled:0===D,children:"\xab\xab"}),(0,en.jsx)(lr,{onClick:()=>{I(n=>Math.max(0,n-1))},disabled:0===D,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",D+1," z ",Math.max(1,on.getPageCount())]}),(0,en.jsx)(lr,{onClick:()=>{I(n=>Math.min(on.getPageCount()-1,n+1))},disabled:D>=on.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(lr,{onClick:()=>{I(on.getPageCount()-1)},disabled:D>=on.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),(0,en.jsx)(An,{isOpen:N,onClose:()=>E(!1),onSave:async n=>{try{"create"===$?(await(0,G.dQ)((0,T.A)({token:e,username:o.username},n)),r("\xdasek byl vytvo\u0159en","success"),s("useky"),X(),E(!1)):(await(0,G.MT)((0,T.A)({token:e,username:o.username,id:R.id},n)),r("\xdasek byl aktualizov\xe1n","success"),s("useky"),X(),E(!1))}catch(t){r(t.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed \xfaseku","error")}},mode:$,title:"create"===$?"Nov\xfd \xfasek":"Upravit \xfasek",fields:[{name:"usek_nazev",label:"N\xe1zev \xfaseku",type:"text",required:!0,placeholder:"Zadejte n\xe1zev \xfaseku"},{name:"usek_zkr",label:"Zkratka",type:"text",required:!0,placeholder:"Zadejte zkratku (nap\u0159. IT, HR)"},{name:"aktivni",label:"Aktivn\xed",type:"checkbox",required:!1}],initialData:R}),(0,en.jsx)(Yn,{isOpen:V,onClose:()=>Y(!1),onConfirm:async()=>{try{await(0,G._B)({token:e,username:o.username,id:J.id}),r("\xdasek byl smaz\xe1n","success"),s("useky"),X(),Y(!1),q(null)}catch(n){r(n.message||"Chyba p\u0159i maz\xe1n\xed \xfaseku","error")}},title:"Smazat \xfasek",message:'Opravdu chcete smazat \xfasek "'.concat(null===J||void 0===J?void 0:J.usek_nazev,'"?')})]})},hr=["ico"],xr=["ico"],fr=["mesto"],br=["mesto"],vr=["adresa"],yr=["adresa"],kr=["kontakt"],jr=["kontakt"],Ar=["zastoupeny"],zr=["zastoupeny"],wr=["pocet_uzivatelu"],_r=["pocet_uzivatelu"];var Cr,Sr,Pr,Dr,Ir,Nr,Er,$r,Or,Mr,Rr,Fr,Lr,Tr,Vr,Zr,Kr,Hr,Br,Ur,Wr,Gr,Yr,Jr,qr,Xr,Qr,na,ea;const oa=w.A.div(Cr||(Cr=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),ta=w.A.div(Sr||(Sr=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),ra=w.A.button(Pr||(Pr=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff"),aa=w.A.div(Dr||(Dr=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),ia=w.A.button(Ir||(Ir=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),la=w.A.div(Nr||(Nr=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n"]))),sa=w.A.table(Er||(Er=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),da=w.A.tr($r||($r=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),ca=w.A.th(Or||(Or=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),pa=w.A.tr(Mr||(Mr=(0,A.A)(["\n  background: #f8f9fa;\n"]))),ua=w.A.th(Rr||(Rr=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n"]))),ma=w.A.div(Fr||(Fr=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n"]))),ga=w.A.tr(Lr||(Lr=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),ha=w.A.td(Tr||(Tr=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),xa=w.A.div(Vr||(Vr=(0,A.A)(["\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n"]))),fa=w.A.button(Zr||(Zr=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n"]))),ba=w.A.div(Kr||(Kr=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),va=w.A.input(Hr||(Hr=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),ya=w.A.button(Br||(Br=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),ka=(w.A.button(Ur||(Ur=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),w.A.div(Wr||(Wr=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n"])))),ja=w.A.button(Gr||(Gr=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Aa=w.A.span(Yr||(Yr=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),za=w.A.select(Jr||(Jr=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),wa=w.A.div(qr||(qr=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n"]))),_a=w.A.button(Xr||(Xr=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n\n  &:hover {\n    background: rgba(59, 130, 246, 0.1);\n    transform: scale(1.1);\n  }\n\n  svg {\n    width: 20px !important;\n    height: 20px !important;\n  }\n"]))),Ca=w.A.div(Qr||(Qr=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.5;\n  }\n"]))),Sa=w.A.span(na||(na=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),Pa=w.A.div(ea||(ea=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-top: 0.25rem;\n"]))),Da=()=>{var n;const{token:e,user:o,userDetail:t}=(0,z.useContext)(K.cy),{showToast:r}=(0,z.useContext)(H.$o),{cache:a,loadDictionary:i,invalidateCache:l}=(0,z.useContext)(B.y),s=null===t||void 0===t?void 0:t.user_id,d=n=>{const e=s||"anon";return"".concat(n,"_").concat(e)},c=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(d(n));return null!==o?JSON.parse(o):e}catch(o){return e}},p=(n,e)=>{try{localStorage.setItem(d(n),JSON.stringify(e))}catch(o){}},[u,m]=(0,z.useState)([]),[g,h]=(0,z.useState)(!0),[x,f]=(0,z.useState)(()=>c("organizace_globalFilter","")),[b,v]=(0,z.useState)(()=>c("organizace_columnFilters",{})),[y,k]=(0,z.useState)(()=>c("organizace_aktivniFilter","all")),[j,A]=(0,z.useState)(()=>c("organizace_sorting",[])),[w,S]=(0,z.useState)(()=>c("organizace_pageSize",25)),[P,D]=(0,z.useState)(()=>c("organizace_pageIndex",0)),[N,E]=(0,z.useState)(!1),[$,O]=(0,z.useState)("create"),[M,R]=(0,z.useState)(null),[F,V]=(0,z.useState)(!1),[Y,J]=(0,z.useState)(null);(0,z.useEffect)(()=>{p("organizace_globalFilter",x)},[x,s]),(0,z.useEffect)(()=>{p("organizace_columnFilters",b)},[b,s]),(0,z.useEffect)(()=>{p("organizace_aktivniFilter",y)},[y,s]),(0,z.useEffect)(()=>{p("organizace_sorting",j)},[j,s]),(0,z.useEffect)(()=>{p("organizace_pageSize",w)},[w,s]),(0,z.useEffect)(()=>{p("organizace_pageIndex",P)},[P,s]);const q=async()=>{h(!0);try{const n=await i("organizace");m(n||[])}catch(n){r(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed organizac\xed","error")}finally{h(!1)}};(0,z.useEffect)(()=>{var n;e&&null!==o&&void 0!==o&&o.username&&(null!==(n=a.organizace)&&void 0!==n&&n.loaded&&a.organizace.data?(m(a.organizace.data),h(!1)):q())},[e,null===o||void 0===o?void 0:o.username,null===(n=a.organizace)||void 0===n?void 0:n.loaded]);const X=(0,z.useMemo)(()=>u.filter(n=>{if(x){const e=x.toLowerCase();if(!((n.nazev_organizace||"").toLowerCase().includes(e)||(n.ico||"").toLowerCase().includes(e)||(n.mesto||"").toLowerCase().includes(e)||(n.email||"").toLowerCase().includes(e)||(n.id||"").toString().toLowerCase().includes(e)))return!1}return!(b.nazev_organizace&&!(n.nazev_organizace||"").toLowerCase().includes(b.nazev_organizace.toLowerCase()))&&(!(b.ico&&!(n.ico||"").toLowerCase().includes(b.ico.toLowerCase()))&&(!(b.mesto&&!(n.mesto||"").toLowerCase().includes(b.mesto.toLowerCase()))&&(!(b.adresa&&!(n.adresa||"").toLowerCase().includes(b.adresa.toLowerCase()))&&(!(b.kontakt&&!(n.kontakt||"").toLowerCase().includes(b.kontakt.toLowerCase()))&&(!(b.zastoupeny&&!(n.zastoupeny||"").toLowerCase().includes(b.zastoupeny.toLowerCase()))&&!(b.pocet_uzivatelu&&!n.pocet_uzivatelu.toString().includes(b.pocet_uzivatelu)))))))}),[u,x,b]),Q=(0,z.useMemo)(()=>[{accessorKey:"nazev_organizace",header:"N\xe1zev organizace",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{children:(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[(0,en.jsx)(I.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("div",{children:[(0,en.jsxs)("div",{style:{fontWeight:600},children:[e.original.nazev_organizace,(0,en.jsxs)("sup",{style:{fontSize:"0.65em",opacity:.6,marginLeft:"0.25rem",color:"#6b7280",fontWeight:400},children:["#",e.original.id]})]}),e.original.ico&&(0,en.jsxs)(Pa,{children:["I\u010cO: ",e.original.ico]})]})]})})}},{accessorKey:"adresa",header:"Adresa",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{children:[e.original.ulice_cislo&&(0,en.jsx)("div",{children:e.original.ulice_cislo}),(e.original.mesto||e.original.psc)&&(0,en.jsxs)(Pa,{children:[e.original.psc&&"".concat(e.original.psc," "),e.original.mesto]}),!e.original.ulice_cislo&&!e.original.mesto&&!e.original.psc&&(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"Bez adresy"})]})}},{accessorKey:"kontakt",header:"Kontakt",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{children:[e.original.email&&(0,en.jsx)("div",{style:{fontSize:"0.875rem"},children:e.original.email}),e.original.telefon&&(0,en.jsx)(Pa,{children:e.original.telefon}),!e.original.email&&!e.original.telefon&&(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"Bez kontaktu"})]})}},{accessorKey:"zastoupeny",header:"Zastoupen",cell:n=>{let{row:e}=n;return(0,en.jsx)("span",{style:{color:e.original.zastoupeny?"#374151":"#9ca3af",fontSize:"0.875rem"},children:e.original.zastoupeny||"Neuvedeno"})}},{accessorKey:"pocet_uzivatelu",header:"Po\u010det u\u017eivatel\u016f",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:void 0!==e.original.pocet_uzivatelu?(0,en.jsxs)(Sa,{title:"".concat(e.original.pocet_uzivatelu," ").concat(1===e.original.pocet_uzivatelu?"u\u017eivatel pat\u0159\xed":"u\u017eivatel\u016f pat\u0159\xed"," do t\xe9to organizace"),children:[(0,en.jsx)(Z.A,{size:12}),e.original.pocet_uzivatelu]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})}},{accessorKey:"aktivni",header:"Aktivn\xed",cell:n=>{let{row:e}=n;const o=e.original.aktivni,t=1===o||"1"===o||!0===o;return(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"18px"},title:t?"Aktivn\xed":"Neaktivn\xed",children:(0,en.jsx)(_.g,{icon:t?C.SGM:C.s0Q,style:{color:t?"#16a34a":"#dc2626"}})})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(xa,{children:[(0,en.jsx)(fa,{className:"edit",onClick:()=>on(e.original),title:"Upravit organizaci",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(fa,{className:"delete",onClick:()=>tn(e.original),title:"Smazat organizaci",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}],[]),nn=(0,U.N4)({data:X,columns:Q,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{sorting:j,pagination:{pageIndex:P,pageSize:w}},onSortingChange:A,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:w,pageIndex:P}):n;S(e.pageSize),D(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getPaginationRowModel:(0,W.kW)(),manualPagination:!1}),on=n=>{O("edit"),R(n),E(!0)},tn=n=>{J(n),V(!0)};return g?(0,en.jsx)(oa,{children:(0,en.jsxs)(wa,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0,size:"2x"}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:"Na\u010d\xedt\xe1m organizace..."})]})}):(0,en.jsxs)(oa,{children:[(0,en.jsxs)(ta,{children:[(0,en.jsxs)(aa,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Vyhledat v organizac\xedch...",value:x,onChange:n=>f(n.target.value)}),x&&(0,en.jsx)(ia,{onClick:()=>f(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(ra,{$primary:!0,onClick:()=>{O("create"),R(null),E(!0)},children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xe1 organizace"]})]}),(0,en.jsxs)(la,{children:[(0,en.jsx)(sa,{children:(0,en.jsxs)("tbody",{children:[(0,en.jsx)(da,{children:nn.getHeaderGroups()[0].headers.map(n=>(0,en.jsx)(ca,{children:"actions"!==n.id?(0,en.jsxs)(ma,{onClick:n.column.getToggleSortingHandler(),style:{cursor:"pointer"},children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{marginLeft:"0.5rem",fontSize:"0.75rem"}})]}):(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,U.Kv)(n.column.columnDef.header,n.getContext())})},n.id))}),(0,en.jsx)(pa,{children:nn.getHeaderGroups()[0].headers.map(n=>(0,en.jsxs)(ua,{children:["nazev_organizace"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"Filtrovat...",value:b[n.id]||"",onChange:e=>{const o=e.target.value;v(e=>{if(!o){const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))}return(0,T.A)((0,T.A)({},e),{},{[n.id]:o})})}}),b[n.id]&&(0,en.jsx)(ya,{onClick:()=>{v(e=>{const o=n.id,{[o]:t}=e;return(0,L.A)(e,[o].map($o.A))})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"ico"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"I\u010cO...",value:b.ico||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{ico:e}=n;return(0,L.A)(n,hr)}return(0,T.A)((0,T.A)({},n),{},{ico:e})})}}),b.ico&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{ico:e}=n;return(0,L.A)(n,xr)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"mesto"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"M\u011bsto...",value:b.mesto||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{mesto:e}=n;return(0,L.A)(n,fr)}return(0,T.A)((0,T.A)({},n),{},{mesto:e})})}}),b.mesto&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{mesto:e}=n;return(0,L.A)(n,br)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"adresa"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"Adresa...",value:b.adresa||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{adresa:e}=n;return(0,L.A)(n,vr)}return(0,T.A)((0,T.A)({},n),{},{adresa:e})})}}),b.adresa&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{adresa:e}=n;return(0,L.A)(n,yr)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"kontakt"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"Kontakt...",value:b.kontakt||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{kontakt:e}=n;return(0,L.A)(n,kr)}return(0,T.A)((0,T.A)({},n),{},{kontakt:e})})}}),b.kontakt&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{kontakt:e}=n;return(0,L.A)(n,jr)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"zastoupeny"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"text",placeholder:"Zastoupen...",value:b.zastoupeny||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{zastoupeny:e}=n;return(0,L.A)(n,Ar)}return(0,T.A)((0,T.A)({},n),{},{zastoupeny:e})})}}),b.zastoupeny&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{zastoupeny:e}=n;return(0,L.A)(n,zr)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"pocet_uzivatelu"===n.id&&(0,en.jsxs)(ba,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(va,{type:"number",placeholder:"Po\u010det...",value:b.pocet_uzivatelu||"",onChange:n=>{const e=n.target.value;v(n=>{if(!e){const{pocet_uzivatelu:e}=n;return(0,L.A)(n,wr)}return(0,T.A)((0,T.A)({},n),{},{pocet_uzivatelu:e})})}}),b.pocet_uzivatelu&&(0,en.jsx)(ya,{onClick:()=>{v(n=>{const{pocet_uzivatelu:e}=n;return(0,L.A)(n,_r)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),"aktivni"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(_a,{onClick:()=>{k("all"===y?"aktivni":"aktivni"===y?"neaktivni":"all")},title:"all"===y?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===y?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===y?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===y?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})}),"actions"===n.id&&(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(_a,{onClick:()=>{v({}),k("all")},title:"Vymazat v\u0161echny filtry",disabled:0===Object.keys(b).length&&"all"===y,children:(0,en.jsx)(_.g,{icon:C.IP$,style:{fontSize:"14px"}})})})]},n.id))}),0===nn.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(ha,{colSpan:Q.length,children:(0,en.jsxs)(Ca,{children:[(0,en.jsx)(I.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:"\u017d\xe1dn\xe9 organizace"}),(0,en.jsx)("p",{children:x||Object.keys(b).length>0||"all"!==y?"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry":"Nejsou k dispozici \u017e\xe1dn\xe9 organizace"})]})})}):nn.getRowModel().rows.map((n,e)=>(0,en.jsx)(ga,{$isEven:e%2===0,children:n.getVisibleCells().map(n=>(0,en.jsx)(ha,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))]})}),(0,en.jsxs)(ka,{children:[(0,en.jsxs)(Aa,{children:["Zobrazeno ",Math.min(P*w+1,X.length)," - ",Math.min((P+1)*w,X.length)," z ",X.length," organizac\xed"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(za,{value:w,onChange:n=>{const e=Number(n.target.value);S(e),D(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(ja,{onClick:()=>{D(0)},disabled:0===P,children:"\xab\xab"}),(0,en.jsx)(ja,{onClick:()=>{D(n=>Math.max(0,n-1))},disabled:0===P,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",P+1," z ",Math.max(1,nn.getPageCount())]}),(0,en.jsx)(ja,{onClick:()=>{D(n=>Math.min(nn.getPageCount()-1,n+1))},disabled:P>=nn.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(ja,{onClick:()=>{D(nn.getPageCount()-1)},disabled:P>=nn.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),(0,en.jsx)(An,{isOpen:N,onClose:()=>E(!1),onSave:async n=>{try{"create"===$?(await(0,G.SC)((0,T.A)({token:e,username:o.username},n)),r("Organizace byla vytvo\u0159ena","success"),l("organizace"),q(),E(!1)):(await(0,G.b7)((0,T.A)({token:e,username:o.username,id:M.id},n)),r("Organizace byla aktualizov\xe1na","success"),l("organizace"),q(),E(!1))}catch(t){r(t.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed organizace","error")}},mode:$,title:"create"===$?"Nov\xe1 organizace":"Upravit organizaci",fields:[{name:"nazev_organizace",label:"N\xe1zev organizace",type:"text",required:!0,placeholder:"Zadejte n\xe1zev organizace"},{name:"ico",label:"I\u010cO",type:"text",required:!1,placeholder:"Nap\u0159. 12345678"},{name:"ulice_cislo",label:"Ulice a \u010d\xedslo",type:"text",required:!1,placeholder:"Nap\u0159. Hlavn\xed 123"},{name:"mesto",label:"M\u011bsto",type:"text",required:!1,placeholder:"Nap\u0159. Praha"},{name:"psc",label:"PS\u010c",type:"text",required:!1,placeholder:"Nap\u0159. 11000"},{name:"zastoupeny",label:"Zastoupen",type:"text",required:!1,placeholder:"Nap\u0159. Jan Nov\xe1k, jednatel"},{name:"datova_schranka",label:"Datov\xe1 schr\xe1nka",type:"text",required:!1,placeholder:"ID datov\xe9 schr\xe1nky"},{name:"email",label:"Email",type:"email",required:!1,placeholder:"info@organizace.cz"},{name:"telefon",label:"Telefon",type:"tel",required:!1,placeholder:"+420 123 456 789"}],initialData:M}),(0,en.jsx)(Yn,{isOpen:F,onClose:()=>V(!1),onConfirm:async()=>{try{await(0,G.lJ)({token:e,username:o.username,id:Y.id}),r("Organizace byla smaz\xe1na","success"),l("organizace"),q(),V(!1),J(null)}catch(n){r(n.message||"Chyba p\u0159i maz\xe1n\xed organizace","error")}},title:"Smazat organizaci",message:'Opravdu chcete smazat organizaci "'.concat(null===Y||void 0===Y?void 0:Y.nazev_organizace,'"?')})]})},Ia=["nazev_stavu"],Na=["kod_stavu"],Ea=["typ_objektu"];var $a,Oa,Ma,Ra,Fa,La,Ta,Va,Za,Ka,Ha,Ba,Ua,Wa,Ga,Ya,Ja,qa,Xa,Qa,ni,ei,oi,ti,ri,ai,ii,li;const si=w.A.div($a||($a=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n"]))),di=w.A.div(Oa||(Oa=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),ci=w.A.button(Ma||(Ma=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff",n=>(n.$primary,"#2563eb")),pi=w.A.div(Ra||(Ra=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),ui=w.A.button(Fa||(Fa=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),mi=w.A.div(La||(La=(0,A.A)(["\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n"]))),gi=w.A.table(Ta||(Ta=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),hi=w.A.tr(Va||(Va=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),xi=w.A.th(Za||(Za=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),fi=w.A.tr(Ka||(Ka=(0,A.A)(["\n  background: #f8f9fa;\n"]))),bi=w.A.div(Ha||(Ha=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  gap: 0.5rem;\n  user-select: none;\n"])),n=>n.$isFirstColumn?"flex-start":"center"),vi=w.A.tr(Ba||(Ba=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),yi=w.A.td(Ua||(Ua=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),ki=w.A.div(Wa||(Wa=(0,A.A)(["\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n"]))),ji=w.A.button(Ga||(Ga=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n"]))),Ai=w.A.div(Ya||(Ya=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n"]))),zi=w.A.div(Ja||(Ja=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),wi=w.A.div(qa||(qa=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),_i=w.A.button(Xa||(Xa=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Ci=w.A.select(Qa||(Qa=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Si=w.A.button(ni||(ni=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),Pi=w.A.button(ei||(ei=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #6b7280;\n  padding: 0.4rem 0.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Di=w.A.div(oi||(oi=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Ii=w.A.input(ti||(ti=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),Ni=w.A.button(ri||(ri=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Ei=w.A.span(ai||(ai=(0,A.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n"]))),$i=w.A.span(ii||(ii=(0,A.A)(["\n  padding: 0.25rem 0.75rem;\n  background: ",";\n  color: ",";\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: normal;\n"])),n=>"OBJEDNAVKA"===n.$type?"#dbeafe":"FAKTURA"===n.$type?"#fef3c7":"#e5e7eb",n=>"OBJEDNAVKA"===n.$type?"#1e40af":"FAKTURA"===n.$type?"#92400e":"#374151"),Oi=w.A.div(li||(li=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 2rem;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n"]))),Mi=()=>{var n,e;const{token:o,user:t,userDetail:r}=(0,z.useContext)(K.cy),{showToast:a}=(0,z.useContext)(H.$o),{cache:i,loadDictionary:l,refreshDictionary:s,invalidateCache:d}=(0,z.useContext)(B.y),c=null===r||void 0===r?void 0:r.user_id,p=n=>{const e=c||"anon";return"".concat(n,"_").concat(e)},u=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(p(n));return null!==o?JSON.parse(o):e}catch(o){return e}},m=(n,e)=>{try{localStorage.setItem(p(n),JSON.stringify(e))}catch(o){}},[g,h]=(0,z.useState)([]),[x,f]=(0,z.useState)(!1),[b,v]=(0,z.useState)(()=>u("stavy_globalFilter","")),[y,k]=(0,z.useState)(()=>u("stavy_aktivniFilter","all")),[j,A]=(0,z.useState)(()=>u("stavy_columnFilters",{})),[w,S]=(0,z.useState)(()=>u("stavy_sorting",[])),[P,D]=(0,z.useState)(()=>u("stavy_pageSize",25)),[I,N]=(0,z.useState)(()=>u("stavy_pageIndex",0)),[E,$]=(0,z.useState)({open:!1,item:null}),[M,R]=(0,z.useState)({open:!1,item:null}),F=async()=>{f(!0);try{const n=await l("stavy");h(n||[])}catch(n){a(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed stav\u016f","error")}finally{f(!1)}};(0,z.useEffect)(()=>{var n;o&&null!==t&&void 0!==t&&t.username&&(null!==(n=i.stavy)&&void 0!==n&&n.loaded&&i.stavy.data?(h(i.stavy.data),f(!1)):F())},[o,null===t||void 0===t?void 0:t.username,null===(n=i.stavy)||void 0===n?void 0:n.loaded]),(0,z.useEffect)(()=>{m("stavy_globalFilter",b)},[b,c]),(0,z.useEffect)(()=>{m("stavy_aktivniFilter",y)},[y,c]),(0,z.useEffect)(()=>{m("stavy_columnFilters",j)},[j,c]),(0,z.useEffect)(()=>{m("stavy_sorting",w)},[w,c]),(0,z.useEffect)(()=>{m("stavy_pageSize",P)},[P,c]),(0,z.useEffect)(()=>{m("stavy_pageIndex",I)},[I,c]);const V=(0,z.useMemo)(()=>g.filter(n=>{const e=1===n.aktivni||!0===n.aktivni||"1"===n.aktivni;return!("aktivni"===y&&!e)&&(("neaktivni"!==y||!e)&&(!(j.nazev_stavu&&!(n.nazev_stavu||"").toLowerCase().includes(j.nazev_stavu.toLowerCase()))&&(!(j.kod_stavu&&!(n.kod_stavu||"").toLowerCase().includes(j.kod_stavu.toLowerCase()))&&!(j.typ_objektu&&!(n.typ_objektu||"").toLowerCase().includes(j.typ_objektu.toLowerCase())))))}),[g,y,j]),Z=(0,z.useMemo)(()=>[{accessorKey:"nazev_stavu",header:"N\xe1zev stavu",enableSorting:!0,cell:n=>{let{getValue:e,row:o}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",textAlign:"left"},children:[(0,en.jsx)(O.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("strong",{children:[e(),o.original.id&&(0,en.jsxs)("sup",{style:{fontSize:"0.6rem",color:"#9ca3af",fontWeight:"normal",marginLeft:"4px"},children:["#",o.original.id]})]})]})}},{accessorKey:"kod_stavu",header:"K\xf3d stavu",enableSorting:!0,cell:n=>{let{getValue:e}=n;return(0,en.jsx)(Ei,{children:e()||"\u2014"})}},{accessorKey:"typ_objektu",header:"Typ objektu",enableSorting:!0,cell:n=>{let{getValue:e}=n;const o=e();return(0,en.jsx)($i,{$type:o,children:o||"N/A"})}},{accessorKey:"aktivni",header:"Aktivn\xed",enableSorting:!0,cell:n=>{let{row:e}=n;const o=1===e.original.aktivni||!0===e.original.aktivni||"1"===e.original.aktivni;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(_.g,{icon:o?C.SGM:C.s0Q,style:{color:o?"#22c55e":"#ef4444",fontSize:"18px"}})})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),size:120,cell:n=>{let{row:e}=n;return(0,en.jsxs)(ki,{children:[(0,en.jsx)(ji,{className:"edit",onClick:()=>$({open:!0,item:e.original}),title:"Upravit",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(ji,{className:"delete",onClick:()=>R({open:!0,item:e.original}),title:"Smazat",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}],[]),Y=(0,U.N4)({data:V,columns:Z,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{globalFilter:b,sorting:w,pagination:{pageSize:P,pageIndex:I}},onGlobalFilterChange:v,onSortingChange:S,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:P,pageIndex:I}):n;D(e.pageSize),N(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getFilteredRowModel:(0,W.hM)(),getPaginationRowModel:(0,W.kW)()});return(0,en.jsxs)(si,{children:[(0,en.jsxs)(di,{children:[(0,en.jsxs)(pi,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat ve stavech...",value:b,onChange:n=>v(n.target.value)}),b&&(0,en.jsx)(ui,{onClick:()=>v(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(ci,{$primary:!0,onClick:()=>$({open:!0,item:null}),children:[(0,en.jsx)(_.g,{icon:C.QLR}),"P\u0159idat stav"]})]}),(0,en.jsxs)(mi,{children:[(0,en.jsxs)(gi,{children:[(0,en.jsxs)("thead",{children:[(0,en.jsx)(hi,{children:Y.getHeaderGroups().map(n=>n.headers.map((n,e)=>(0,en.jsx)(xi,{onClick:n.column.getToggleSortingHandler(),children:(0,en.jsxs)(bi,{$isFirstColumn:0===e,children:[(0,U.Kv)(n.column.columnDef.header,n.getContext()),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{fontSize:"0.75rem"}})]})},n.id)))}),(0,en.jsxs)(fi,{children:[(0,en.jsx)(xi,{children:(0,en.jsxs)(Di,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Ii,{type:"text",placeholder:"Hledat n\xe1zev...",value:j.nazev_stavu||"",onChange:n=>A((0,T.A)((0,T.A)({},j),{},{nazev_stavu:n.target.value}))}),j.nazev_stavu&&(0,en.jsx)(Ni,{onClick:()=>{const{nazev_stavu:n}=j,e=(0,L.A)(j,Ia);A(e)},children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(xi,{children:(0,en.jsxs)(Di,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Ii,{type:"text",placeholder:"K\xf3d...",value:j.kod_stavu||"",onChange:n=>A((0,T.A)((0,T.A)({},j),{},{kod_stavu:n.target.value}))}),j.kod_stavu&&(0,en.jsx)(Ni,{onClick:()=>{const{kod_stavu:n}=j,e=(0,L.A)(j,Na);A(e)},children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(xi,{children:(0,en.jsxs)(Di,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(Ii,{type:"text",placeholder:"Typ...",value:j.typ_objektu||"",onChange:n=>A((0,T.A)((0,T.A)({},j),{},{typ_objektu:n.target.value}))}),j.typ_objektu&&(0,en.jsx)(Ni,{onClick:()=>{const{typ_objektu:n}=j,e=(0,L.A)(j,Ea);A(e)},children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(xi,{children:(0,en.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"32px"},children:(0,en.jsx)(Si,{onClick:()=>{k(n=>"all"===n?"aktivni":"aktivni"===n?"neaktivni":"all")},title:"all"===y?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===y?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===y?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===y?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})})}),(0,en.jsx)(xi,{children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(Pi,{onClick:()=>{v(""),k("all"),A({})},title:"Vymazat v\u0161echny filtry",disabled:0===Object.keys(j).length&&"all"===y,children:(0,en.jsx)(_.g,{icon:C.IP$})})})})]})]}),(0,en.jsx)("tbody",{children:x?(0,en.jsx)("tr",{children:(0,en.jsx)(yi,{colSpan:Z.length,children:"Na\u010d\xedt\xe1m..."})}):0===Y.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(yi,{colSpan:Z.length,children:(0,en.jsxs)(Oi,{children:[(0,en.jsx)(O.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:0===g.length?"\u017d\xe1dn\xe9 stavy":"Nenalezeny \u017e\xe1dn\xe9 stavy"}),(0,en.jsx)("p",{children:0===g.length?"Nejsou k dispozici \u017e\xe1dn\xe9 stavy":"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):Y.getRowModel().rows.map((n,e)=>(0,en.jsx)(vi,{$isEven:e%2===0,children:n.getVisibleCells().map(n=>(0,en.jsx)(yi,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))})]}),(0,en.jsxs)(Ai,{children:[(0,en.jsxs)(zi,{children:["Zobrazeno ",Math.min(I*P+1,V.length)," - ",Math.min((I+1)*P,V.length)," z ",V.length," z\xe1znam\u016f",g.length!==V.length&&" (celkem ".concat(g.length,")")]}),(0,en.jsxs)(wi,{children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(Ci,{value:P,onChange:n=>{const e=Number(n.target.value);D(e),N(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(_i,{onClick:()=>N(0),disabled:0===I,children:"\xab\xab"}),(0,en.jsx)(_i,{onClick:()=>N(n=>Math.max(0,n-1)),disabled:0===I,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",I+1," z ",Math.max(1,Y.getPageCount())]}),(0,en.jsx)(_i,{onClick:()=>N(n=>Math.min(Y.getPageCount()-1,n+1)),disabled:I>=Y.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(_i,{onClick:()=>N(Y.getPageCount()-1),disabled:I>=Y.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),(0,en.jsx)(An,{open:E.open,onClose:()=>$({open:!1,item:null}),onSave:E.item?async n=>{try{await(0,G.O0)((0,T.A)({token:o,username:null===t||void 0===t?void 0:t.username,id:E.item.id},n)),null===a||void 0===a||a("Stav aktualizov\xe1n",{type:"success"}),d("stavy"),F(),$({open:!1,item:null})}catch(e){throw null===a||void 0===a||a(e.message||"Chyba p\u0159i aktualizaci",{type:"error"}),e}}:async n=>{try{await(0,G.DZ)((0,T.A)({token:o,username:null===t||void 0===t?void 0:t.username},n)),null===a||void 0===a||a("Stav vytvo\u0159en",{type:"success"}),d("stavy"),F(),$({open:!1,item:null})}catch(e){throw null===a||void 0===a||a(e.message||"Chyba p\u0159i vytv\xe1\u0159en\xed",{type:"error"}),e}},title:E.item?"Upravit stav":"Nov\xfd stav",fields:[{name:"nazev_stavu",label:"N\xe1zev stavu",type:"text",required:!0,placeholder:"N\xe1zev stavu"},{name:"kod_stavu",label:"K\xf3d stavu",type:"text",required:!0,placeholder:"NOVY, SCHVALENY, ..."},{name:"typ_objektu",label:"Typ objektu",type:"select",required:!0,options:[{value:"OBJEDNAVKA",label:"Objedn\xe1vka"},{value:"FAKTURA",label:"Faktura"}]},{name:"nadrazeny_kod_stavu",label:"Nad\u0159azen\xfd k\xf3d",type:"text",required:!1,placeholder:"Voliteln\u011b"},{name:"popis",label:"Popis",type:"textarea",required:!1,placeholder:"Popis stavu"},{name:"platnost_do",label:"Platnost do",type:"date",required:!1},{name:"aktivni",label:"Aktivn\xed",type:"checkbox",required:!1}],initialData:E.item}),(0,en.jsx)(Yn,{open:M.open,onClose:()=>R({open:!1,item:null}),onConfirm:async()=>{try{await(0,G.yp)({token:o,username:null===t||void 0===t?void 0:t.username,id:M.item.id}),null===a||void 0===a||a("Stav smaz\xe1n",{type:"success"}),d("stavy"),F(),R({open:!1,item:null})}catch(n){throw null===a||void 0===a||a(n.message||"Chyba p\u0159i maz\xe1n\xed",{type:"error"}),n}},title:"Smazat stav?",message:'Opravdu chcete smazat stav "'.concat(null===(e=M.item)||void 0===e?void 0:e.nazev_stavu,'"?')})]})};var Ri=o(51833);const Fi=["nazev_role"],Li=["nazev_role"],Ti=["popis"],Vi=["popis"],Zi=["pocet_prav"],Ki=["pocet_prav"],Hi=["pocet_uzivatelu"],Bi=["pocet_uzivatelu"];var Ui,Wi,Gi,Yi,Ji,qi,Xi,Qi,nl,el,ol,tl,rl,al,il,ll,sl,dl,cl,pl,ul,ml,gl,hl,xl,fl,bl,vl,yl,kl,jl,Al,zl,wl,_l,Cl,Sl,Pl,Dl,Il,Nl,El,$l,Ol,Ml,Rl,Fl,Ll,Tl,Vl,Zl,Kl,Hl,Bl,Ul,Wl,Gl,Yl,Jl,ql,Xl,Ql,ns,es,os,ts,rs,as,is,ls,ss;const ds="\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n",cs=w.A.div(Ui||(Ui=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n"]))),ps=w.A.div(Wi||(Wi=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),us=w.A.div(Gi||(Gi=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),ms=w.A.button(Yi||(Yi=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),gs=w.A.button(Ji||(Ji=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"])),n=>"primary"===n.$variant||n.$active?"#3b82f6":"#d1d5db",n=>"primary"===n.$variant?"#3b82f6":n.$active?"#eff6ff":"white",n=>"primary"===n.$variant?"white":n.$active?"#3b82f6":"#6b7280",n=>"primary"===n.$variant?"#2563eb":n.$active?"#dbeafe":"#f9fafb",n=>"primary"===n.$variant?"#2563eb":"#3b82f6"),hs=w.A.div(qi||(qi=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n"]))),xs=w.A.div(Xi||(Xi=(0,A.A)(["\n  overflow-x: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n"]))),fs=w.A.table(Qi||(Qi=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Pevn\xe9 \u0161\xed\u0159ky pro specifick\xe9 sloupce */\n  th:nth-of-type(1), td:nth-of-type(1) { width: 375px !important; min-width: 375px !important; max-width: 375px !important; }   /* N\xe1zev role - \u0161irok\xfd fixn\xed */\n  th:nth-of-type(2), td:nth-of-type(2) { width: auto !important; min-width: 200px !important; }                                   /* Popis - dynamick\xfd */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 100px !important; min-width: 100px !important; max-width: 100px !important; }   /* Po\u010det pr\xe1v - \xfazk\xfd fixn\xed */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 100px !important; min-width: 100px !important; max-width: 100px !important; }   /* Po\u010det u\u017eivatel\u016f - \xfazk\xfd fixn\xed */\n  th:nth-of-type(5), td:nth-of-type(5) { width: 80px !important; min-width: 80px !important; max-width: 80px !important; }      /* Aktivn\xed - \xfazk\xfd fixn\xed */\n  th:last-child, td:last-child { width: 110px !important; min-width: 110px !important; max-width: 110px !important; }           /* Akce - \xfazk\xfd fixn\xed */\n"]))),bs=w.A.thead(nl||(nl=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"]))),vs=w.A.th(el||(el=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  color: white;\n  font-weight: 600;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: ",";\n  user-select: none;\n  white-space: nowrap;\n  width: ",";\n\n  &:hover {\n    background: ",";\n  }\n\n  &:first-of-type {\n    text-align: left;\n  }\n"])),n=>n.$sortable?"pointer":"default",n=>n.$width?"".concat(n.$width,"px"):"auto",n=>n.$sortable?"rgba(255, 255, 255, 0.1)":"transparent"),ys=w.A.tbody(ol||(ol=(0,A.A)([""]))),ks=w.A.td(tl||(tl=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  vertical-align: middle;\n  white-space: nowrap;\n  width: ",";\n\n  &:first-of-type {\n    text-align: left;\n  }\n"])),n=>n.$width?"".concat(n.$width,"px"):"auto"),js=w.A.tr(rl||(rl=(0,A.A)(["\n  background: #f8f9fa;\n"]))),As=w.A.th(al||(al=(0,A.A)(["\n  padding: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n  width: ",";\n"])),n=>n.$width?"".concat(n.$width,"px"):"auto"),zs=w.A.div(il||(il=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),ws=w.A.input(ll||(ll=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: white;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),_s=w.A.button(sl||(sl=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Cs=w.A.button(dl||(dl=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n\n  &:hover:not(:disabled) {\n    background: rgba(59, 130, 246, 0.1);\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 20px !important;\n    height: 20px !important;\n  }\n"]))),Ss=w.A.div(cl||(cl=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-weight: 600;\n  color: #1e293b;\n"]))),Ps=w.A.div(pl||(pl=(0,A.A)(["\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1rem;\n"])),n=>n.$inactive?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"),Ds=w.A.span(ul||(ul=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ",";\n  color: ",";\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n\n  /* Punt\xedk m\xedsto ikony */\n  &::before {\n    content: '';\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: ",";\n    margin-right: 0.25rem;\n  }\n"])),n=>n.$active?"#dcfce7":"#fee2e2",n=>n.$active?"#166534":"#991b1b",n=>n.$active?"#22c55e":"#ef4444"),Is=w.A.span(ml||(ml=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 28px;\n  height: 28px;\n  padding: 0 0.5rem;\n  border-radius: 14px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  background: ",";\n  color: white;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n"])),n=>"rights"===n.$type?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"users"===n.$type?"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)"),Ns=w.A.span(gl||(gl=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),Es=w.A.div(hl||(hl=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  justify-content: center;\n"]))),$s=w.A.button(xl||(xl=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  ","\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n"])),n=>"expand"===n.$variant?"\n    &:hover {\n      color: #1e293b;\n      background: #f1f5f9;\n    }\n  ":"rights"===n.$variant?"\n    &:hover {\n      color: #8b5cf6;\n      background: #f5f3ff;\n    }\n  ":"edit"===n.$variant?"\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  ":"delete"===n.$variant?"\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  ":""),Os=w.A.tr(fl||(fl=(0,A.A)(["\n  background: #f8fafc !important;\n\n  &:hover {\n    background: #f8fafc !important;\n  }\n"]))),Ms=w.A.td(bl||(bl=(0,A.A)(["\n  padding: 0 !important;\n"]))),Rs=w.A.div(vl||(vl=(0,A.A)(["\n  padding: 1.5rem;\n  border-top: 2px solid #e2e8f0;\n"]))),Fs=w.A.div(yl||(yl=(0,A.A)(["\n  margin-bottom: ",";\n"])),n=>n.$last?"0":"1.5rem"),Ls=w.A.div(kl||(kl=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e2e8f0;\n\n  h4 {\n    margin: 0;\n    font-size: 0.9375rem;\n    font-weight: 700;\n    color: #1e293b;\n    text-transform: uppercase;\n    letter-spacing: 0.025em;\n  }\n\n  svg {\n    color: #3b82f6;\n    width: 18px;\n    height: 18px;\n  }\n"]))),Ts=w.A.div(jl||(jl=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 0.75rem;\n"]))),Vs=w.A.div(Al||(Al=(0,A.A)(["\n  padding: 0.875rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);\n  }\n"]))),Zs=w.A.div(zl||(zl=(0,A.A)(["\n  font-family: 'Courier New', monospace;\n  font-size: 0.8125rem;\n  font-weight: 700;\n  color: #3b82f6;\n  margin-bottom: 0.375rem;\n"]))),Ks=w.A.div(wl||(wl=(0,A.A)(["\n  font-size: 0.8125rem;\n  color: #64748b;\n  line-height: 1.4;\n"]))),Hs=(w.A.div(_l||(_l=(0,A.A)(["\n  display: grid;\n  gap: 0.75rem;\n"]))),w.A.div(Cl||(Cl=(0,A.A)(["\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n"]))),w.A.div(Sl||(Sl=(0,A.A)(["\n  padding: 1rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  }\n"]))),w.A.div(Pl||(Pl=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n"]))),w.A.div(Dl||(Dl=(0,A.A)(["\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);\n"]))),w.A.div(Il||(Il=(0,A.A)(["\n  flex: 1;\n"]))),w.A.div(Nl||(Nl=(0,A.A)(["\n  font-weight: 700;\n  color: #1e293b;\n  font-size: 0.9375rem;\n  margin-bottom: 0.25rem;\n"]))),w.A.div(El||(El=(0,A.A)(["\n  font-size: 0.8125rem;\n  color: #64748b;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n\n  > span {\n    display: flex;\n    align-items: center;\n    gap: 0.375rem;\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),w.A.div($l||($l=(0,A.A)(["\n  font-size: 0.75rem;\n  font-weight: 700;\n  padding: 0.375rem 0.75rem;\n  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n  color: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.2);\n"]))),w.A.div(Ol||(Ol=(0,A.A)(["\n  padding: 1rem;\n  border-top: 1px solid #e2e8f0;\n  display: ",";\n"])),n=>n.$visible?"block":"none"),w.A.div(Ml||(Ml=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0 0 0.5rem 0;\n    font-size: 1.125rem;\n    color: #64748b;\n  }\n\n  p {\n    margin: 0;\n    font-size: 0.875rem;\n  }\n"])))),Bs=w.A.div(Rl||(Rl=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e2e8f0;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),Us=(w.A.div(Fl||(Fl=(0,A.A)(["\n  color: #64748b;\n  font-size: 0.875rem;\n"]))),w.A.div(Ll||(Ll=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n"]))),w.A.button(Tl||(Tl=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  background: white;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    border-color: #3b82f6;\n    color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),w.A.select(Vl||(Vl=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])))),Ws=w.A.button(Zl||(Zl=(0,A.A)(["\n  padding: 0.4rem 0.65rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  background: white;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  min-width: 2.5rem;\n\n  &:hover:not(:disabled) {\n    border-color: #3b82f6;\n    color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n"]))),Gs=w.A.div(Kl||(Kl=(0,A.A)(["\n  color: #64748b;\n  font-size: 0.875rem;\n"]))),Ys=w.A.div(Hl||(Hl=(0,A.A)(["\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),Js=(0,J.i7)(Bl||(Bl=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),qs=w.A.div(Ul||(Ul=(0,A.A)(["\n  background: white;\n  border-radius: 20px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  max-width: 1100px;\n  width: 95%;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: "," 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n"])),Js),Xs=w.A.div(Wl||(Wl=(0,A.A)(["\n  padding: 2rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h2 {\n    margin: 0;\n    font-size: 1.5rem;\n    font-weight: 700;\n    color: white;\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n  }\n"]))),Qs=w.A.button(Gl||(Gl=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: white;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),nd=w.A.div(Yl||(Yl=(0,A.A)(["\n  padding: 2rem;\n  overflow-y: auto;\n  flex: 1;\n\n  ","\n"])),ds),ed=w.A.div(Jl||(Jl=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  border-top: 2px solid #e5e7eb;\n  background: #f9fafb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n"]))),od=w.A.div(ql||(ql=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),td=w.A.div(Xl||(Xl=(0,A.A)(["\n  h3 {\n    margin: 0 0 1rem 0;\n    font-size: 0.875rem;\n    font-weight: 700;\n    color: #374151;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n"]))),rd=w.A.div(Ql||(Ql=(0,A.A)(["\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  max-height: 400px;\n  overflow-y: auto;\n  background: #fafbfc;\n\n  ","\n"])),ds),ad=w.A.div(ns||(ns=(0,A.A)(["\n  padding: 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  transition: background 0.2s;\n  background: white;\n\n  &:first-of-type {\n    border-radius: 10px 10px 0 0;\n  }\n\n  &:last-child {\n    border-bottom: none;\n    border-radius: 0 0 10px 10px;\n  }\n\n  &:only-child {\n    border-radius: 10px;\n  }\n\n  &:hover {\n    background: #f8fafc;\n  }\n"]))),id=w.A.div(es||(es=(0,A.A)(["\n  flex: 1;\n  min-width: 0;\n  max-width: calc(100% - 120px);\n\n  .kod {\n    font-family: 'Courier New', monospace;\n    font-weight: 700;\n    color: #1e293b;\n    font-size: 0.8125rem;\n    margin-bottom: 0.25rem;\n    word-break: break-word;\n  }\n\n  .popis {\n    font-size: 0.75rem;\n    color: #64748b;\n    line-height: 1.4;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    word-break: break-word;\n  }\n"]))),ld=w.A.button(os||(os=(0,A.A)(["\n  padding: 0.5rem 0.875rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n\n  ","\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),n=>"add"===n.$variant&&"\n    background: #10b981;\n    color: white;\n\n    &:hover:not(:disabled) {\n      background: #059669;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n    }\n  ",n=>"remove"===n.$variant&&"\n    background: #ef4444;\n    color: white;\n\n    &:hover:not(:disabled) {\n      background: #dc2626;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);\n    }\n  "),sd=w.A.div(ts||(ts=(0,A.A)(["\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n"]))),dd=w.A.button(rs||(rs=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),cd=w.A.h2(as||(as=(0,A.A)(["\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),pd=w.A.input(is||(is=(0,A.A)(["\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.2s;\n  outline: none;\n\n  &:focus {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n"]))),ud=w.A.button(ls||(ls=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: 2px solid #e5e7eb;\n  background: white;\n  color: #6b7280;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),md=w.A.button(ss||(ss=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n  background: #3b82f6;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),gd=n=>{let{role:e,availablePrava:o,onSave:t,onClose:r}=n;const[a,i]=(0,z.useState)(""),[l,s]=(0,z.useState)(""),[d,c]=(0,z.useState)(!1),[p,u]=(0,z.useState)({toAdd:[],toRemove:[]}),m=p.toAdd.length+p.toRemove.length,g=m>0,h=(0,z.useMemo)(()=>{const n=e.prava_globalni||[],t=o.filter(n=>p.toAdd.includes(n.id));return[...n.filter(n=>!p.toRemove.includes(n.id)),...t].filter(n=>{var e,o;return(null===(e=n.kod_prava)||void 0===e?void 0:e.toLowerCase().includes(a.toLowerCase()))||(null===(o=n.popis)||void 0===o?void 0:o.toLowerCase().includes(a.toLowerCase()))})},[e,o,a,p]),x=(0,z.useMemo)(()=>{const n=(e.prava_globalni||[]).map(n=>n.id);return o.filter(e=>{const o=n.includes(e.id),t=p.toAdd.includes(e.id),r=p.toRemove.includes(e.id);return!o&&!t||r}).filter(n=>{var e,o;return(null===(e=n.kod_prava)||void 0===e?void 0:e.toLowerCase().includes(l.toLowerCase()))||(null===(o=n.popis)||void 0===o?void 0:o.toLowerCase().includes(l.toLowerCase()))})},[e,o,l,p]);return(0,Y.createPortal)((0,en.jsx)(Ys,{children:(0,en.jsxs)(qs,{children:[(0,en.jsxs)(Xs,{children:[(0,en.jsxs)("h2",{children:[(0,en.jsx)($.A,{size:24}),"Spr\xe1va pr\xe1v role: ",e.nazev_role]}),(0,en.jsx)(Qs,{onClick:r,title:"Zav\u0159\xedt",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsx)(nd,{children:(0,en.jsxs)(od,{children:[(0,en.jsxs)(td,{children:[(0,en.jsxs)("h3",{children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#10b981"}}),"P\u0159i\u0159azen\xe1 pr\xe1va (",h.length,")"]}),(0,en.jsxs)(us,{style:{marginBottom:"1rem"},children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat v p\u0159i\u0159azen\xfdch pr\xe1vech...",value:a,onChange:n=>i(n.target.value)}),a&&(0,en.jsx)(ms,{onClick:()=>i(""),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsx)(rd,{children:0===h.length?(0,en.jsx)(sd,{children:a?"\u017d\xe1dn\xe1 pr\xe1va nenalezena":"\u017d\xe1dn\xe1 p\u0159i\u0159azen\xe1 pr\xe1va"}):h.map((n,o)=>{const t=p.toAdd.includes(n.id);return(0,en.jsxs)(ad,{style:t?{background:"#d1fae5",borderColor:"#10b981",borderWidth:"2px"}:{},children:[(0,en.jsxs)(id,{children:[(0,en.jsxs)("div",{className:"kod",children:[t&&"\u2728 ",n.kod_prava]}),n.popis&&(0,en.jsx)("div",{className:"popis",children:n.popis})]}),(0,en.jsxs)(ld,{$variant:"remove",onClick:()=>(n=>{const o=(e.prava_globalni||[]).map(n=>n.id).includes(n.id);u(e=>e.toAdd.includes(n.id)?{toAdd:e.toAdd.filter(e=>e!==n.id),toRemove:e.toRemove}:o&&!e.toRemove.includes(n.id)?{toAdd:e.toAdd,toRemove:[...e.toRemove,n.id]}:e)})(n),title:"Odebrat pr\xe1vo",children:[(0,en.jsx)(_.g,{icon:C.yLS})," Odebrat"]})]},"assigned-".concat(n.id,"-").concat(o))})})]}),(0,en.jsxs)(td,{children:[(0,en.jsxs)("h3",{children:[(0,en.jsx)(_.g,{icon:C.QLR,style:{color:"#3b82f6"}}),"Dostupn\xe1 pr\xe1va (",x.length,")"]}),(0,en.jsxs)(us,{style:{marginBottom:"1rem"},children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat v dostupn\xfdch pr\xe1vech...",value:l,onChange:n=>s(n.target.value)}),l&&(0,en.jsx)(ms,{onClick:()=>s(""),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsx)(rd,{children:0===x.length?(0,en.jsx)(sd,{children:l?"\u017d\xe1dn\xe1 pr\xe1va nenalezena":"V\u0161echna pr\xe1va jsou p\u0159i\u0159azena"}):x.map((n,o)=>{const t=p.toRemove.includes(n.id);return(0,en.jsxs)(ad,{style:t?{background:"#fee2e2",borderColor:"#ef4444",borderWidth:"2px"}:{},children:[(0,en.jsxs)(id,{children:[(0,en.jsxs)("div",{className:"kod",children:[t&&"\ud83d\uddd1\ufe0f ",n.kod_prava]}),n.popis&&(0,en.jsx)("div",{className:"popis",children:n.popis})]}),(0,en.jsxs)(ld,{$variant:"add",onClick:()=>(n=>{const o=(e.prava_globalni||[]).map(n=>n.id).includes(n.id);u(e=>e.toRemove.includes(n.id)?{toAdd:e.toAdd,toRemove:e.toRemove.filter(e=>e!==n.id)}:o||e.toAdd.includes(n.id)?e:{toAdd:[...e.toAdd,n.id],toRemove:e.toRemove})})(n),title:"P\u0159idat pr\xe1vo",children:[(0,en.jsx)(_.g,{icon:C.QLR})," P\u0159idat"]})]},"available-".concat(n.id,"-").concat(o))})})]})]})}),(0,en.jsxs)(ed,{children:[(0,en.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:g&&(0,en.jsxs)("div",{style:{color:"#3b82f6",fontSize:"0.9375rem",fontWeight:600},children:[m," ",1===m?"zm\u011bna":m<5?"zm\u011bny":"zm\u011bn"," \u010dek\xe1 na ulo\u017een\xed"]})}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,en.jsxs)(dd,{onClick:r,disabled:d,children:[(0,en.jsx)(_.g,{icon:C.GRI}),"Storno"]}),(0,en.jsx)(gs,{$variant:"primary",onClick:async()=>{if(g){c(!0);try{await t(p.toAdd,p.toRemove),r()}finally{c(!1)}}else r()},disabled:d||!g,style:{background:"#10b981",borderColor:"#10b981"},children:d?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0}),"Ukl\xe1d\xe1m..."]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.SGM}),"Ulo\u017eit zm\u011bny ",g&&"(".concat(m,")")]})})]})]})]})}),document.body)},hd=n=>{let{sourceRole:e,allRoles:o,onCopy:t,onClose:r}=n;const[a,i]=(0,z.useState)([]),[l,s]=(0,z.useState)([]),[d,c]=(0,z.useState)(""),[p,u]=(0,z.useState)(""),[m,g]=(0,z.useState)(!1),[h,x]=(0,z.useState)(!1);(0,z.useEffect)(()=>{null!==e&&void 0!==e&&e.prava_globalni&&s(e.prava_globalni.map(n=>n.id))},[e]);const f=(0,z.useMemo)(()=>{if(null===e||void 0===e||!e.prava_globalni)return[];if(!d)return e.prava_globalni;const n=d.toLowerCase();return e.prava_globalni.filter(e=>{var o,t;return(null===(o=e.kod_prava)||void 0===o?void 0:o.toLowerCase().includes(n))||(null===(t=e.popis)||void 0===t?void 0:t.toLowerCase().includes(n))})},[e,d]),b=(0,z.useMemo)(()=>{if(!o||!e)return[];const n=o.filter(n=>n.id!==e.id);if(!p)return n;const t=p.toLowerCase();return n.filter(n=>(n.nazev_role||n.kod_role||"").toLowerCase().includes(t))},[o,e,p]),v=a.length>0&&l.length>0&&!m;return e?(0,Y.createPortal)((0,en.jsxs)(Ys,{children:[(0,en.jsxs)(qs,{style:{maxWidth:"900px",width:"90%"},children:[(0,en.jsxs)(Xs,{children:[(0,en.jsxs)(cd,{children:[(0,en.jsx)(_.g,{icon:C.jPR,style:{marginRight:"0.75rem",color:"#3b82f6"}}),"Kop\xedrovat pr\xe1va role: ",e.nazev_role||e.kod_role]}),(0,en.jsx)(Qs,{onClick:r,children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(nd,{children:[(0,en.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,en.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"0.5rem"},children:["C\xedlov\xe9 role (",a.length," vybr\xe1no)"]}),(0,en.jsx)(pd,{type:"text",placeholder:"\ud83d\udd0d Hledat roli...",value:p,onChange:n=>u(n.target.value),style:{marginBottom:"0.5rem"}}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",justifyContent:"flex-end"},children:[(0,en.jsx)("button",{onClick:()=>{i(b.map(n=>n.id))},style:{padding:"0.375rem 0.75rem",fontSize:"12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#fff",color:"#374151",cursor:"pointer"},children:"\u2713 Vybrat v\u0161e"}),(0,en.jsx)("button",{onClick:()=>{i([])},style:{padding:"0.375rem 0.75rem",fontSize:"12px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#fff",color:"#374151",cursor:"pointer"},children:"\u2717 Zru\u0161it v\u0161e"})]}),(0,en.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"0.5rem",maxHeight:"200px",overflowY:"auto",padding:"0.5rem",border:"2px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:0===b.length?(0,en.jsx)("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"1rem",color:"#6b7280"},children:p?"\u017d\xe1dn\xe9 role nenalezeny":"\u017d\xe1dn\xe9 dostupn\xe9 role"}):b.map(n=>{const e=a.includes(n.id),o=n.nazev_role||n.kod_role||"Role ".concat(n.id),t=(n.prava_globalni||[]).length;return(0,en.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:e?"#dbeafe":"#fff",border:"2px solid ".concat(e?"#3b82f6":"#e5e7eb"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",userSelect:"none"},children:[(0,en.jsx)("input",{type:"checkbox",checked:e,onChange:()=>{return e=n.id,void i(n=>n.includes(e)?n.filter(n=>n!==e):[...n,e]);var e},style:{width:"16px",height:"16px",cursor:"pointer"}}),(0,en.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,en.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o}),(0,en.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280"},children:[t," pr\xe1v"]})]})]},n.id)})})]}),(0,en.jsx)("div",{style:{marginBottom:"1rem"},children:(0,en.jsx)(pd,{type:"text",placeholder:"\ud83d\udd0d Hledat pr\xe1vo...",value:d,onChange:n=>c(n.target.value)})}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",justifyContent:"flex-end"},children:[(0,en.jsxs)("button",{onClick:()=>{s(f.map(n=>n.id))},style:{padding:"0.5rem 1rem",fontSize:"13px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#fff",color:"#374151",cursor:"pointer",transition:"all 0.2s"},children:["\u2713 Vybrat v\u0161e (",f.length,")"]}),(0,en.jsx)("button",{onClick:()=>{s([])},style:{padding:"0.5rem 1rem",fontSize:"13px",borderRadius:"6px",border:"1px solid #d1d5db",background:"#fff",color:"#374151",cursor:"pointer",transition:"all 0.2s"},children:"\u2717 Zru\u0161it v\u0161e"})]}),(0,en.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem",maxHeight:"400px",overflowY:"auto",padding:"0.5rem",border:"2px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:0===f.length?(0,en.jsx)("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:d?"\u017d\xe1dn\xe1 pr\xe1va nenalezena":"Role nem\xe1 \u017e\xe1dn\xe1 pr\xe1va"}):f.map(n=>{const e=l.includes(n.id);return(0,en.jsxs)("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.75rem",background:e?"#dbeafe":"#fff",border:"2px solid ".concat(e?"#3b82f6":"#e5e7eb"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",userSelect:"none"},children:[(0,en.jsx)("input",{type:"checkbox",checked:e,onChange:()=>{return e=n.id,void s(n=>n.includes(e)?n.filter(n=>n!==e):[...n,e]);var e},style:{marginTop:"0.25rem",width:"16px",height:"16px",cursor:"pointer"}}),(0,en.jsxs)("div",{style:{flex:1},children:[(0,en.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",marginBottom:"0.25rem"},children:n.kod_prava}),n.popis&&(0,en.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",lineHeight:"1.4"},children:n.popis})]})]},n.id)})}),(0,en.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"6px",fontSize:"14px",color:"#0c4a6e"},children:[(0,en.jsxs)("div",{style:{marginBottom:"0.25rem"},children:[(0,en.jsx)("strong",{children:"Pr\xe1v k kop\xedrov\xe1n\xed:"})," ",l.length," z ",e.prava_globalni.length]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("strong",{children:"C\xedlov\xfdch rol\xed:"})," ",a.length]}),a.length>0&&(0,en.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"13px",color:"#075985"},children:["\u26a0\ufe0f Pr\xe1va budou p\u0159id\xe1na do ",a.length," ",1===a.length?"role":(a.length,"rol\xed")]})]})]}),(0,en.jsxs)(ed,{children:[(0,en.jsxs)(ud,{onClick:r,disabled:m,children:[(0,en.jsx)(_.g,{icon:C.GRI,style:{marginRight:"0.5rem"}}),"Zru\u0161it"]}),(0,en.jsxs)(md,{onClick:()=>{0!==a.length&&0!==l.length&&x(!0)},disabled:!v,children:[(0,en.jsx)(_.g,{icon:C.jPR,style:{marginRight:"0.5rem"}}),m?"Kop\xedruji...":"Kop\xedrovat ".concat(l.length," pr\xe1v \u2192 ").concat(a.length," ").concat(1===a.length?"role":"rol\xed")]})]})]}),(0,en.jsxs)(Ri.A,{isOpen:h,onClose:()=>x(!1),onConfirm:async()=>{x(!1),g(!0);try{await t(a,l)}finally{g(!1)}},title:"\u26a0\ufe0f Hromadn\xe9 kop\xedrov\xe1n\xed pr\xe1v",icon:C.zpE,variant:"warning",confirmText:"Ano, kop\xedrovat",cancelText:"Zru\u0161it",children:[(0,en.jsx)("div",{style:{marginBottom:"1rem"},children:(0,en.jsxs)("p",{style:{margin:"0 0 1rem 0",fontSize:"15px",color:"#374151"},children:["Chyst\xe1te se zkop\xedrovat ",(0,en.jsxs)("strong",{children:[l.length," pr\xe1v"]})," do ",(0,en.jsxs)("strong",{children:[a.length," ",1===a.length?"role":(a.length,"rol\xed")]}),"."]})}),(0,en.jsxs)("div",{style:{padding:"1rem",background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:"8px",marginBottom:"1rem"},children:[(0,en.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#92400e",marginBottom:"0.5rem"},children:"C\xedlov\xe9 role:"}),(0,en.jsx)("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"14px",color:"#78350f"},children:a.map(n=>{const e=o.find(e=>e.id===n);return e?e.nazev_role||e.kod_role:"Role ".concat(n)}).map((n,e)=>(0,en.jsx)("li",{style:{marginBottom:"0.25rem"},children:n},e))})]}),(0,en.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#6b7280"},children:"Tato operace p\u0159id\xe1 vybran\xe1 pr\xe1va do v\u0161ech uveden\xfdch rol\xed. Pr\xe1va, kter\xe1 role ji\u017e m\xe1, budou p\u0159esko\u010dena."})]})]}),document.body):null},xd=()=>{var n,e;const{token:o,user:{username:t}={},userDetail:r,hasPermission:a}=(0,z.useContext)(K.cy),{showToast:i}=(0,z.useContext)(H.$o),{cache:l,loadDictionary:s,invalidateCache:d}=(0,z.useContext)(B.y),c=a("ADMIN")||a("DICT_MANAGE"),p=null===r||void 0===r||null===(n=r.roles)||void 0===n?void 0:n.some(n=>"SUPERADMIN"===n.kod_role),u=null===r||void 0===r?void 0:r.user_id,m=n=>{const e=u||"anon";return"".concat(n,"_").concat(e)},g=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(m(n));return null!==o?JSON.parse(o):e}catch(o){return e}},h=(n,e)=>{try{localStorage.setItem(m(n),JSON.stringify(e))}catch(o){}},[x,f]=(0,z.useState)([]),[b,v]=(0,z.useState)(()=>g("role_search","")),[y,k]=(0,z.useState)(()=>g("role_columnFilters",{})),[j,A]=(0,z.useState)(()=>g("role_aktivniFilter","all")),[w,S]=(0,z.useState)(!1),[P,D]=(0,z.useState)(()=>g("role_pageSize",25)),[I,N]=(0,z.useState)(()=>g("role_pageIndex",0)),[O,M]=(0,z.useState)(!1),[R,F]=(0,z.useState)("create"),[V,Y]=(0,z.useState)(null),[J,q]=(0,z.useState)(!1),[X,Q]=(0,z.useState)(null),[nn,on]=(0,z.useState)(!1),[tn,rn]=(0,z.useState)(null),[an,ln]=(0,z.useState)([]),[sn,dn]=(0,z.useState)(!1),[cn,pn]=(0,z.useState)(null),un=async()=>{S(!0);try{const n=(await s("role")||[]).map(n=>{const e=n.prava_globalni?Array.from(new Map(n.prava_globalni.map(n=>[n.id,n])).values()):[];return(0,T.A)((0,T.A)({},n),{},{popis:n.Popis||n.popis||"",prava_globalni:e})});f(n)}catch(n){null===i||void 0===i||i("Chyba p\u0159i na\u010d\xedt\xe1n\xed rol\xed",{type:"error"})}finally{S(!1)}};(0,z.useEffect)(()=>{var n;if(o&&t)if(null!==(n=l.role)&&void 0!==n&&n.loaded&&l.role.data){const n=(l.role.data||[]).map(n=>{const e=n.prava_globalni?Array.from(new Map(n.prava_globalni.map(n=>[n.id,n])).values()):[];return(0,T.A)((0,T.A)({},n),{},{popis:n.Popis||n.popis||"",prava_globalni:e})});f(n)}else un()},[o,t,null===(e=l.role)||void 0===e?void 0:e.loaded]),(0,z.useEffect)(()=>{h("role_search",b)},[b,u]),(0,z.useEffect)(()=>{h("role_columnFilters",y)},[y,u]),(0,z.useEffect)(()=>{h("role_aktivniFilter",j)},[j,u]),(0,z.useEffect)(()=>{h("role_pageSize",P)},[P,u]),(0,z.useEffect)(()=>{h("role_pageIndex",I)},[I,u]);const mn=(0,z.useMemo)(()=>[{accessorKey:"nazev_role",header:"N\xe1zev role",size:375,minSize:375,maxSize:375,cell:n=>{let{row:e}=n;return(0,en.jsxs)(Ss,{children:[(0,en.jsx)(Ps,{$inactive:!e.original.aktivni,children:(0,en.jsx)($.A,{})}),(0,en.jsx)("div",{children:e.original.nazev_role})]})}},{accessorKey:"popis",header:"Popis",size:void 0,minSize:200,cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{textAlign:"left",color:e.original.popis?"#374151":"#9ca3af",fontStyle:e.original.popis?"normal":"italic"},children:e.original.popis||"\u2014"})}},{id:"pocet_prav",accessorKey:"statistiky.pocet_prav",header:"Po\u010det pr\xe1v",size:100,minSize:100,maxSize:100,cell:n=>{var e;let{row:o}=n;return(0,en.jsx)(Is,{$type:"rights",children:(null===(e=o.original.statistiky)||void 0===e?void 0:e.pocet_prav)||0})}},{id:"pocet_uzivatelu",accessorKey:"statistiky.pocet_uzivatelu",header:()=>(0,en.jsxs)("div",{style:{lineHeight:"1.2"},children:["Po\u010det",(0,en.jsx)("br",{}),"u\u017eivatel\u016f"]}),size:100,minSize:100,maxSize:100,cell:n=>{var e;let{row:o}=n;return(0,en.jsx)(Is,{$type:"users",children:(null===(e=o.original.statistiky)||void 0===e?void 0:e.pocet_uzivatelu)||0})}},{accessorKey:"aktivni",header:"Aktivn\xed",size:80,minSize:80,maxSize:80,cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",fontSize:"18px"},title:e.original.aktivni?"Aktivn\xed":"Neaktivn\xed",children:(0,en.jsx)(_.g,{icon:e.original.aktivni?C.SGM:C.s0Q,style:{color:e.original.aktivni?"#16a34a":"#dc2626"}})})}},{id:"actions",size:110,minSize:110,maxSize:110,header:()=>(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"16px"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(Es,{children:[(0,en.jsx)($s,{$variant:"expand",onClick:()=>e.toggleExpanded(),title:e.getIsExpanded()?"Skr\xfdt detaily":"Zobrazit detaily",children:(0,en.jsx)(_.g,{icon:e.getIsExpanded()?C.w2A:C.Jt$})}),c&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)($s,{$variant:"rights",onClick:()=>(async n=>{rn(n);try{const n=await s("prava");ln(n||[]),on(!0)}catch(e){null===i||void 0===i||i("Chyba p\u0159i na\u010d\xedt\xe1n\xed pr\xe1v",{type:"error"})}})(e.original),title:"Spravovat pr\xe1va",style:{color:"#8b5cf6"},children:(0,en.jsx)(E.A,{size:16})}),(0,en.jsx)($s,{$variant:"copy",onClick:()=>{return n=e.original,pn(n),void dn(!0);var n},title:"Kop\xedrovat pr\xe1va do jin\xe9 role",style:{color:"#3b82f6"},children:(0,en.jsx)(_.g,{icon:C.jPR})}),(0,en.jsx)($s,{$variant:"edit",onClick:()=>{return n=e.original,F("edit"),Y(n),void M(!0);var n},title:"Upravit roli",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)($s,{$variant:"delete",onClick:()=>{return n=e.original,Q(n),void q(!0);var n},title:"Smazat roli",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})]})}}],[]),gn=(0,z.useMemo)(()=>x?x.filter(n=>{var e,o;return!("aktivni"===j&&!n.aktivni)&&(("neaktivni"!==j||!n.aktivni)&&(!(y.nazev_role&&!(n.nazev_role||"").toLowerCase().includes(y.nazev_role.toLowerCase()))&&(!(y.popis&&!(n.popis||"").toLowerCase().includes(y.popis.toLowerCase()))&&(!(y.pocet_prav&&!((null===(e=n.statistiky)||void 0===e?void 0:e.pocet_prav)||0).toString().includes(y.pocet_prav))&&!(y.pocet_uzivatelu&&!((null===(o=n.statistiky)||void 0===o?void 0:o.pocet_uzivatelu)||0).toString().includes(y.pocet_uzivatelu))))))}):[],[x,y,j]),hn=(0,U.N4)({data:gn,columns:mn,getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getFilteredRowModel:(0,W.hM)(),getPaginationRowModel:(0,W.kW)(),getExpandedRowModel:(0,W.D0)(),state:{globalFilter:b,pagination:{pageSize:P,pageIndex:I}},onGlobalFilterChange:v,globalFilterFn:(n,e,o)=>{const t=o.toLowerCase(),r=(n.original.nazev_role||"").toLowerCase(),a=(n.original.popis||"").toLowerCase(),i=(n.original.pocet_uzivatelu||"").toString();return!!(r.includes(t)||a.includes(t)||i.includes(t))||!(!n.original.permissions||!Array.isArray(n.original.permissions))&&n.original.permissions.some(n=>{const e=(n.nazev_prava||"").toLowerCase(),o=(n.kod_prava||"").toLowerCase(),r=(n.popis_prava||"").toLowerCase();return e.includes(t)||o.includes(t)||r.includes(t)})},onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:P,pageIndex:I}):n;D(e.pageSize),N(e.pageIndex)}}),xn=n=>{var e,o;const t=n.original;return(0,en.jsx)(Os,{children:(0,en.jsx)(Ms,{colSpan:mn.length,children:(0,en.jsx)(Rs,{children:(0,en.jsxs)(Fs,{children:[(0,en.jsxs)(Ls,{children:[(0,en.jsx)(_.g,{icon:C.Bwz}),(0,en.jsxs)("h4",{children:["Pr\xe1va role (role m\xe1 ",(null===(e=t.statistiky)||void 0===e?void 0:e.pocet_uzivatelu)||0," ",1===(null===(o=t.statistiky)||void 0===o?void 0:o.pocet_uzivatelu)?"u\u017eivatele":"u\u017eivatel\u016f",")"]})]}),(0,en.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"-0.5rem",marginBottom:"1rem",fontStyle:"italic"},children:"\ud83d\udca1 Jednotliv\xe1 pr\xe1va mohou m\xedt v\xedce u\u017eivatel\u016f d\xedky personalizovan\xfdm p\u0159i\u0159azen\xedm"}),t.prava_globalni&&t.prava_globalni.length>0?(0,en.jsx)(Ts,{children:t.prava_globalni.map(n=>{var e;return(0,en.jsxs)(Vs,{children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[(0,en.jsx)(Zs,{children:n.kod_prava}),void 0!==n.pocet_uzivatelu&&(0,en.jsxs)(Ns,{title:"Celkem ".concat(n.pocet_uzivatelu," ").concat(1===n.pocet_uzivatelu?"u\u017eivatel m\xe1":"u\u017eivatel\u016f m\xe1"," toto pr\xe1vo (").concat((null===(e=t.statistiky)||void 0===e?void 0:e.pocet_uzivatelu)||0," z role + personalizovan\xe1 p\u0159i\u0159azen\xed)"),children:[(0,en.jsx)(Z.A,{size:12}),n.pocet_uzivatelu]})]}),(0,en.jsx)(Ks,{children:n.popis||"-"}),(0,en.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,en.jsx)(Ds,{$active:n.vazba_aktivni&&n.pravo_aktivni,children:n.vazba_aktivni&&n.pravo_aktivni?"Aktivn\xed":"Neaktivn\xed"})})]},n.id)})}):(0,en.jsx)(Hs,{style:{padding:"2rem"},children:(0,en.jsx)("p",{children:"\u017d\xe1dn\xe1 pr\xe1va nejsou p\u0159i\u0159azena"})})]})})})})};return(0,en.jsxs)(cs,{children:[(0,en.jsxs)(ps,{children:[(0,en.jsxs)(us,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat v rol\xedch, pr\xe1vech nebo u\u017eivatel\xedch...",value:null!==b&&void 0!==b?b:"",onChange:n=>v(n.target.value)}),b&&(0,en.jsx)(ms,{onClick:()=>v(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[c&&(0,en.jsxs)(gs,{$variant:"primary",onClick:()=>{F("create"),Y(null),M(!0)},children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xe1 role"]}),p&&(0,en.jsxs)(gs,{$variant:"secondary",onClick:async()=>{if(window.confirm("\u26a0\ufe0f POZOR! Tato akce sma\u017ee duplicitn\xed p\u0159i\u0159azen\xed pr\xe1v k rol\xedm v datab\xe1zi.\n\nDuplicity vznikly v minulosti a br\xe1n\xed spr\xe1vn\xe9mu fungov\xe1n\xed syst\xe9mu.\n\nTato akce je nevratn\xe1. Pokra\u010dovat?"))try{var n,e;const r=await G.Ay.cleanupDuplicatePrava({token:o,username:t,dry_run:!1}),a=(null===(n=r.data)||void 0===n?void 0:n.message)||"Duplicity byly vy\u010di\u0161t\u011bny",l=(null===(e=r.data)||void 0===e?void 0:e.deleted_count)||0;null===i||void 0===i||i("".concat(a,". Odstran\u011bno ").concat(l," duplicitn\xedch z\xe1znam\u016f."),{type:"success"}),d("role"),await un()}catch(r){null===i||void 0===i||i(r.message||"Chyba p\u0159i \u010di\u0161t\u011bn\xed duplicit",{type:"error"})}},title:"Vy\u010distit duplicitn\xed p\u0159i\u0159azen\xed pr\xe1v (POUZE SUPERADMIN)",style:{background:"#f59e0b",color:"white"},children:[(0,en.jsx)(_.g,{icon:C.pyI}),"Vy\u010distit duplicity"]})]})]}),(0,en.jsxs)(hs,{children:[(0,en.jsx)(xs,{children:w?(0,en.jsxs)(Hs,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0,style:{width:"48px",height:"48px"}}),(0,en.jsx)("h3",{children:"Na\u010d\xedt\xe1m role..."})]}):(0,en.jsxs)(fs,{children:[(0,en.jsxs)(bs,{children:[hn.getHeaderGroups().map(n=>(0,en.jsx)("tr",{children:n.headers.map(n=>{var e;return(0,en.jsxs)(vs,{$sortable:n.column.getCanSort(),$width:n.column.columnDef.size,onClick:n.column.getToggleSortingHandler(),children:[(0,U.Kv)(n.column.columnDef.header,n.getContext()),null!==(e={asc:" \ud83d\udd3c",desc:" \ud83d\udd3d"}[n.column.getIsSorted()])&&void 0!==e?e:null]},n.id)})},n.id)),(0,en.jsx)(js,{children:hn.getHeaderGroups()[0].headers.map(n=>(0,en.jsx)(As,{$width:n.column.columnDef.size,children:"nazev_role"===n.id?(0,en.jsxs)(zs,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(ws,{type:"text",placeholder:"Hledat n\xe1zev role...",value:y.nazev_role||"",onChange:n=>{const e=n.target.value;k(n=>{if(!e){const{nazev_role:e}=n;return(0,L.A)(n,Fi)}return(0,T.A)((0,T.A)({},n),{},{nazev_role:e})})}}),y.nazev_role&&(0,en.jsx)(_s,{onClick:()=>{k(n=>{const{nazev_role:e}=n;return(0,L.A)(n,Li)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}):"popis"===n.id?(0,en.jsxs)(zs,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(ws,{type:"text",placeholder:"Hledat popis...",value:y.popis||"",onChange:n=>{const e=n.target.value;k(n=>{if(!e){const{popis:e}=n;return(0,L.A)(n,Ti)}return(0,T.A)((0,T.A)({},n),{},{popis:e})})}}),y.popis&&(0,en.jsx)(_s,{onClick:()=>{k(n=>{const{popis:e}=n;return(0,L.A)(n,Vi)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}):"pocet_prav"===n.id?(0,en.jsxs)(zs,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(ws,{type:"number",placeholder:"Po\u010det...",value:y.pocet_prav||"",onChange:n=>{const e=n.target.value;k(n=>{if(!e){const{pocet_prav:e}=n;return(0,L.A)(n,Zi)}return(0,T.A)((0,T.A)({},n),{},{pocet_prav:e})})}}),y.pocet_prav&&(0,en.jsx)(_s,{onClick:()=>{k(n=>{const{pocet_prav:e}=n;return(0,L.A)(n,Ki)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}):"pocet_uzivatelu"===n.id?(0,en.jsxs)(zs,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(ws,{type:"number",placeholder:"Po\u010det...",value:y.pocet_uzivatelu||"",onChange:n=>{const e=n.target.value;k(n=>{if(!e){const{pocet_uzivatelu:e}=n;return(0,L.A)(n,Hi)}return(0,T.A)((0,T.A)({},n),{},{pocet_uzivatelu:e})})}}),y.pocet_uzivatelu&&(0,en.jsx)(_s,{onClick:()=>{k(n=>{const{pocet_uzivatelu:e}=n;return(0,L.A)(n,Bi)})},children:(0,en.jsx)(_.g,{icon:C.GRI})})]}):"aktivni"===n.id?(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(Cs,{onClick:()=>{A("all"===j?"aktivni":"aktivni"===j?"neaktivni":"all")},title:"all"===j?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===j?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===j?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===j?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})}):"actions"===n.id?(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"0.25rem"},children:(0,en.jsx)(Cs,{onClick:()=>{k({}),A("all")},title:"Vymazat v\u0161echny filtry",disabled:0===Object.keys(y).length&&"all"===j,children:(0,en.jsx)(_.g,{icon:C.IP$,style:{fontSize:"14px"}})})}):null},"filter-".concat(n.id)))})]}),(0,en.jsx)(ys,{children:0===hn.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(ks,{colSpan:mn.length,children:(0,en.jsxs)(Hs,{children:[(0,en.jsx)($.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:"\u017d\xe1dn\xe9 role"}),(0,en.jsx)("p",{children:b?"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed":"Nejsou k dispozici \u017e\xe1dn\xe9 role"})]})})}):hn.getRowModel().rows.map((n,e)=>{const o=!n.original.aktivni,t=e%2===0;return(0,en.jsxs)(z.Fragment,{children:[(0,en.jsx)("tr",{style:{background:o?"#f8f9fa":t?"#f8fafc":"white",opacity:o?.7:1,transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.background=o?"#e9ecef":"#f0f9ff"},onMouseLeave:n=>{n.currentTarget.style.background=o?"#f8f9fa":t?"#f8fafc":"white"},children:n.getVisibleCells().map(n=>(0,en.jsx)(ks,{$width:n.column.columnDef.size,children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))}),n.getIsExpanded()&&xn(n)]},n.id)})})]})}),!w&&hn.getPageCount()>0&&(0,en.jsxs)(Bs,{children:[(0,en.jsxs)(Gs,{children:["Zobrazeno ",Math.min(I*P+1,hn.getFilteredRowModel().rows.length)," - ",Math.min((I+1)*P,hn.getFilteredRowModel().rows.length)," ","z ",hn.getFilteredRowModel().rows.length," rol\xed"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{children:"Zobrazit:"}),(0,en.jsxs)(Us,{value:P,onChange:n=>{const e=Number(n.target.value);D(e),N(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(Ws,{onClick:()=>N(0),disabled:0===I,children:"\xab\xab"}),(0,en.jsx)(Ws,{onClick:()=>N(n=>Math.max(0,n-1)),disabled:0===I,children:"\u2039"}),(0,en.jsxs)("span",{style:{margin:"0 0.5rem"},children:["Str\xe1nka ",I+1," z ",Math.max(1,hn.getPageCount())]}),(0,en.jsx)(Ws,{onClick:()=>N(n=>Math.min(hn.getPageCount()-1,n+1)),disabled:I>=hn.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(Ws,{onClick:()=>N(hn.getPageCount()-1),disabled:I>=hn.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),(0,en.jsx)(An,{isOpen:O,onClose:()=>M(!1),onSave:async n=>{console.log("\ud83d\udd35 RoleTab handleSave:",{dialogMode:R,formData:n,editingItem:V});try{"create"===R?(console.log("\ud83d\udfe2 Vol\xe1m createRole s daty:",(0,T.A)({token:"***",username:t},n)),await G.Ay.createRole((0,T.A)({token:o,username:t},n)),null===i||void 0===i||i("Role byla \xfasp\u011b\u0161n\u011b vytvo\u0159ena",{type:"success"})):(console.log("\ud83d\udfe0 Vol\xe1m updateRole s daty:",(0,T.A)({token:"***",username:t,id:V.id},n)),await G.Ay.updateRole((0,T.A)({token:o,username:t,id:V.id},n)),null===i||void 0===i||i("Role byla \xfasp\u011b\u0161n\u011b aktualizov\xe1na",{type:"success"})),M(!1),d("role"),un()}catch(e){console.error("\ud83d\udd34 RoleTab handleSave ERROR:",e),null===i||void 0===i||i(e.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed role",{type:"error"})}},editData:V,title:"create"===R?"Vytvo\u0159it novou roli":"Upravit roli",icon:$.A,fields:[{name:"nazev_role",label:"N\xe1zev role",type:"text",required:!0},{name:"popis",label:"Popis",type:"textarea",required:!1},{name:"aktivni",label:"Aktivn\xed",type:"checkbox",required:!1,default:!0}]}),(0,en.jsx)(Yn,{isOpen:J,onClose:()=>q(!1),onConfirm:async()=>{try{await G.Ay.deleteRole({token:o,username:t,id:X.id}),null===i||void 0===i||i("Role byla \xfasp\u011b\u0161n\u011b smaz\xe1na",{type:"success"}),q(!1),d("role"),un()}catch(n){null===i||void 0===i||i(n.message||"Chyba p\u0159i maz\xe1n\xed role",{type:"error"})}},title:"Smazat roli",message:'Opravdu chcete smazat roli "'.concat(null===X||void 0===X?void 0:X.nazev_role,'"?')}),nn&&tn&&(0,en.jsx)(gd,{role:tn,availablePrava:an,onSave:async(n,e)=>{try{await G.Ay.bulkUpdateRolePrava({token:o,username:t,role_id:tn.id,prava_to_add:n,prava_to_remove:e});const r=n.length,a=e.length,l=[];r>0&&l.push("P\u0159id\xe1no: ".concat(r)),a>0&&l.push("Odebr\xe1no: ".concat(a)),null===i||void 0===i||i("Pr\xe1va byla aktualizov\xe1na. ".concat(l.join(", ")),{type:"success"}),d("role"),await un()}catch(r){throw null===i||void 0===i||i(r.message||"Chyba p\u0159i aktualizaci pr\xe1v",{type:"error"}),r}},onClose:()=>on(!1)}),sn&&cn&&(0,en.jsx)(hd,{sourceRole:cn,allRoles:x,onCopy:async(n,e)=>{try{let r=0,a=0;const l=[];for(const i of n){const n=x.find(n=>n.id===i);if(!n)continue;const s=(n.prava_globalni||[]).map(n=>n.id),d=e.filter(n=>!s.includes(n));0!==d.length?(await G.Ay.bulkUpdateRolePrava({token:o,username:t,role_id:i,prava_to_add:d,prava_to_remove:[]}),r+=d.length,l.push({role:n.nazev_role||n.kod_role,count:d.length})):a++}if(0===l.length)null===i||void 0===i||i("V\u0161echny c\xedlov\xe9 role ji\u017e maj\xed vybran\xe1 pr\xe1va",{type:"info"});else if(1===l.length)null===i||void 0===i||i("\u2713 Zkop\xedrov\xe1no ".concat(l[0].count,' pr\xe1v do role "').concat(l[0].role,'"'),{type:"success"});else{const n=l.map(n=>"  \u2022 ".concat(n.role,": ").concat(n.count," pr\xe1v")).join("\n");null===i||void 0===i||i("\u2713 Zkop\xedrov\xe1no pr\xe1v do ".concat(l.length," rol\xed:\n").concat(n),{type:"success",duration:5e3})}d("role"),await un(),dn(!1),pn(null)}catch(r){throw null===i||void 0===i||i(r.message||"Chyba p\u0159i kop\xedrov\xe1n\xed pr\xe1v",{type:"error"}),r}},onClose:()=>{dn(!1),pn(null)}})]})},fd=["popis"],bd=["kod_prava"],vd=["pocet_uzivatelu"];var yd,kd,jd,Ad,zd,wd,_d,Cd,Sd,Pd,Dd,Id,Nd,Ed,$d,Od,Md,Rd,Fd,Ld,Td,Vd,Zd,Kd,Hd,Bd,Ud,Wd,Gd,Yd,Jd,qd,Xd,Qd,nc,ec,oc;const tc=w.A.div(yd||(yd=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),rc=w.A.div(kd||(kd=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),ac=w.A.button(jd||(jd=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff"),ic=w.A.div(Ad||(Ad=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),lc=w.A.button(zd||(zd=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),sc=w.A.div(wd||(wd=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n"]))),dc=w.A.table(_d||(_d=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Fixn\xed \u0161\xed\u0159ky sloupc\u016f */\n  th:nth-of-type(1), td:nth-of-type(1) { width: auto; }     /* Popis pr\xe1va */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 200px; }    /* K\xf3d pr\xe1va */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 140px; }    /* Po\u010det u\u017eivatel\u016f */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 90px; }     /* Aktivn\xed */\n  th:last-child, td:last-child { width: 100px; }            /* Akce */\n"]))),cc=w.A.tr(Cd||(Cd=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),pc=w.A.th(Sd||(Sd=(0,A.A)(["\n  padding: 0.75rem 1rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),uc=w.A.tr(Pd||(Pd=(0,A.A)(["\n  background: #f8f9fa;\n"]))),mc=(w.A.th(Dd||(Dd=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n"]))),w.A.div(Id||(Id=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n"])))),gc=w.A.tr(Nd||(Nd=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),hc=w.A.td(Ed||(Ed=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),xc=w.A.div($d||($d=(0,A.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n"]))),fc=w.A.button(Od||(Od=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),bc=w.A.div(Md||(Md=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),vc=w.A.input(Rd||(Rd=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),yc=((0,w.A)(vc)(Fd||(Fd=(0,A.A)([""]))),w.A.button(Ld||(Ld=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"])))),kc=w.A.button(Td||(Td=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),jc=w.A.button(Vd||(Vd=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Ac=w.A.div(Zd||(Zd=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),zc=w.A.div(Kd||(Kd=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),wc=w.A.div(Hd||(Hd=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),_c=w.A.button(Bd||(Bd=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Cc=(0,w.A)(_c)(Ud||(Ud=(0,A.A)([""]))),Sc=(w.A.span(Wd||(Wd=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),w.A.select(Gd||(Gd=(0,A.A)(["\n  padding: 0.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])))),Pc=(w.A.div(Yd||(Yd=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n"]))),w.A.div(Jd||(Jd=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n"])))),Dc=w.A.div(qd||(qd=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 1rem;\n"]))),Ic=(w.A.div(Xd||(Xd=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  font-size: 0.875rem;\n  color: #475569;\n  white-space: nowrap;\n"]))),w.A.span(Qd||(Qd=(0,A.A)(["\n  display: inline-block;\n  padding: 4px 8px;\n  background-color: #f1f5f9;\n  border: 1px solid #cbd5e1;\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  font-size: 12px;\n  color: #475569;\n"]))),w.A.span(nc||(nc=(0,A.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n"])))),Nc=(w.A.span(ec||(ec=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);\n  border-radius: 6px;\n  font-weight: 500;\n  color: #1e40af;\n"]))),w.A.span(oc||(oc=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"])))),Ec=()=>{var n;const{token:e,user:o,userDetail:t,hasPermission:r}=(0,z.useContext)(K.cy),{showToast:a}=(0,z.useContext)(H.$o),{cache:i,loadDictionary:l,invalidateCache:s}=(0,z.useContext)(B.y),d=r("ADMIN")||r("DICT_MANAGE"),c=null===t||void 0===t?void 0:t.user_id,p=n=>{const e=c||"anon";return"".concat(n,"_").concat(e)},u=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(p(n));return null!==o?JSON.parse(o):e}catch(o){return e}},m=(n,e)=>{try{localStorage.setItem(p(n),JSON.stringify(e))}catch(o){}},[g,h]=(0,z.useState)([]),[x,f]=(0,z.useState)(!0),[b,v]=(0,z.useState)(()=>u("prava_globalFilter","")),[y,k]=(0,z.useState)(()=>u("prava_columnFilters",{})),[j,A]=(0,z.useState)(()=>u("prava_aktivniFilter","all")),[w,S]=(0,z.useState)(()=>u("prava_sorting",[])),[P,D]=(0,z.useState)(()=>u("prava_pageSize",25)),[I,N]=(0,z.useState)(()=>u("prava_pageIndex",0)),[$,O]=(0,z.useState)(!1),[M,R]=(0,z.useState)("create"),[F,V]=(0,z.useState)(null),[Y,J]=(0,z.useState)(!1),[q,X]=(0,z.useState)(null);(0,z.useEffect)(()=>{m("prava_globalFilter",b)},[b,c]),(0,z.useEffect)(()=>{m("prava_columnFilters",y)},[y,c]),(0,z.useEffect)(()=>{m("prava_aktivniFilter",j)},[j,c]),(0,z.useEffect)(()=>{m("prava_sorting",w)},[w,c]),(0,z.useEffect)(()=>{m("prava_pageSize",P)},[P,c]),(0,z.useEffect)(()=>{m("prava_pageIndex",I)},[I,c]);const Q=async()=>{f(!0);try{const n=await l("prava");h(n||[])}catch(n){a(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed pr\xe1v","error")}finally{f(!1)}};(0,z.useEffect)(()=>{var n;e&&null!==o&&void 0!==o&&o.username&&(null!==(n=i.prava)&&void 0!==n&&n.loaded&&i.prava.data?(h(i.prava.data),f(!1)):Q())},[e,null===o||void 0===o?void 0:o.username,null===(n=i.prava)||void 0===n?void 0:n.loaded]);const nn=(0,z.useMemo)(()=>g.filter(n=>{const e=1===n.aktivni||!0===n.aktivni||"1"===n.aktivni;if("aktivni"===j&&!e)return!1;if("neaktivni"===j&&e)return!1;if(b){const e=b.toLowerCase();if(!((n.kod_prava||"").toLowerCase().includes(e)||(n.popis||"").toLowerCase().includes(e)||(n.id||"").toString().toLowerCase().includes(e)))return!1}return!(y.kod_prava&&!(n.kod_prava||"").toLowerCase().includes(y.kod_prava.toLowerCase()))&&(!(y.popis&&!(n.popis||"").toLowerCase().includes(y.popis.toLowerCase()))&&!(y.pocet_uzivatelu&&void 0!==n.pocet_uzivatelu&&!n.pocet_uzivatelu.toString().includes(y.pocet_uzivatelu)))}),[g,b,y,j]),on=(0,z.useMemo)(()=>[{accessorKey:"popis",header:"Popis pr\xe1va",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[(0,en.jsx)(E.A,{size:16,style:{color:"#3b82f6",marginTop:"2px"}}),(0,en.jsxs)("span",{style:{fontWeight:"600",color:e.original.popis?"#374151":"#9ca3af"},children:[e.original.popis||"-",(0,en.jsxs)("sup",{style:{fontSize:"0.65em",opacity:.6,marginLeft:"0.25rem",color:"#6b7280",fontWeight:"normal"},children:["#",e.original.id]})]})]})}},{accessorKey:"kod_prava",header:"K\xf3d pr\xe1va",cell:n=>{let{getValue:e}=n;return(0,en.jsx)(Ic,{children:e()||"\u2014"})}},{accessorKey:"pocet_uzivatelu",header:"Po\u010det u\u017eivatel\u016f",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:void 0!==e.original.pocet_uzivatelu?(0,en.jsxs)(Nc,{title:"".concat(e.original.pocet_uzivatelu," ").concat(1===e.original.pocet_uzivatelu?"u\u017eivatel m\xe1":"u\u017eivatel\u016f m\xe1"," toto pr\xe1vo"),children:[(0,en.jsx)(Z.A,{size:12}),e.original.pocet_uzivatelu]}):(0,en.jsx)("span",{style:{color:"#9ca3af"},children:"\u2014"})})}},{accessorKey:"aktivni",header:"Aktivn\xed",cell:n=>{let{row:e}=n;const o=1===e.original.aktivni||!0===e.original.aktivni||"1"===e.original.aktivni;return(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(_.g,{icon:o?C.SGM:C.s0Q,style:{color:o?"#22c55e":"#ef4444",fontSize:"18px"}})})}},...d?[{id:"actions",header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(xc,{children:[(0,en.jsx)(fc,{className:"edit",onClick:()=>rn(e.original),title:"Upravit pr\xe1vo",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(fc,{className:"delete",onClick:()=>an(e.original),title:"Smazat pr\xe1vo",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})}}]:[]],[g]),tn=(0,U.N4)({data:nn,columns:on,state:{sorting:w,pagination:{pageIndex:I,pageSize:P}},onSortingChange:S,onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:P,pageIndex:I}):n;D(e.pageSize),N(e.pageIndex)},getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getPaginationRowModel:(0,W.kW)(),manualPagination:!1}),rn=n=>{R("edit"),V(n),O(!0)},an=n=>{X(n),J(!0)};return(0,en.jsxs)(tc,{children:[(0,en.jsxs)(rc,{children:[(0,en.jsxs)(ic,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Vyhledat v pr\xe1vech...",value:b,onChange:n=>v(n.target.value)}),b&&(0,en.jsx)(lc,{onClick:()=>v(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),d&&(0,en.jsxs)(ac,{$primary:!0,onClick:()=>{R("create"),V(null),O(!0)},title:"Vytvo\u0159it nov\xe9 pr\xe1vo",children:[(0,en.jsx)(_.g,{icon:C.QLR}),"Nov\xe9 pr\xe1vo"]})]}),(0,en.jsx)(sc,{children:x?(0,en.jsx)(Dc,{children:"Na\u010d\xedt\xe1m pr\xe1va..."}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(dc,{children:(0,en.jsxs)("tbody",{children:[(0,en.jsx)(cc,{children:tn.getHeaderGroups()[0].headers.map(n=>(0,en.jsx)(pc,{style:{width:"aktivni"===n.id?"80px":"actions"===n.id?"90px":"auto",maxWidth:"aktivni"===n.id?"80px":"actions"===n.id?"90px":"none"},children:(0,en.jsxs)(mc,{onClick:n.column.getToggleSortingHandler(),style:{cursor:"pointer"},children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{marginLeft:"0.5rem",fontSize:"0.75rem"}})]})},n.id))}),(0,en.jsxs)(uc,{children:[(0,en.jsx)(pc,{children:(0,en.jsxs)(bc,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(vc,{type:"text",placeholder:"Hledat popis...",value:y.popis||"",onChange:n=>k(e=>(0,T.A)((0,T.A)({},e),{},{popis:n.target.value}))}),y.popis&&(0,en.jsx)(kc,{onClick:()=>k(n=>{const{popis:e}=n;return(0,L.A)(n,fd)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(pc,{children:(0,en.jsxs)(bc,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(vc,{type:"text",placeholder:"K\xf3d...",value:y.kod_prava||"",onChange:n=>k(e=>(0,T.A)((0,T.A)({},e),{},{kod_prava:n.target.value}))}),y.kod_prava&&(0,en.jsx)(kc,{onClick:()=>k(n=>{const{kod_prava:e}=n;return(0,L.A)(n,bd)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(pc,{children:(0,en.jsxs)(bc,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(vc,{type:"number",placeholder:"Po\u010det...",value:y.pocet_uzivatelu||"",onChange:n=>k(e=>(0,T.A)((0,T.A)({},e),{},{pocet_uzivatelu:n.target.value}))}),y.pocet_uzivatelu&&(0,en.jsx)(kc,{onClick:()=>k(n=>{const{pocet_uzivatelu:e}=n;return(0,L.A)(n,vd)}),children:(0,en.jsx)(_.g,{icon:C.GRI})})]})}),(0,en.jsx)(pc,{style:{width:"90px",maxWidth:"90px"},children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(yc,{onClick:()=>{A(n=>"all"===n?"aktivni":"aktivni"===n?"neaktivni":"all")},title:"all"===j?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===j?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===j?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===j?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})})}),d&&(0,en.jsx)(pc,{style:{width:"90px",maxWidth:"90px"},children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,en.jsx)(jc,{onClick:()=>{k({}),A("all")},title:"Vymazat v\u0161echny filtry",children:(0,en.jsx)(_.g,{icon:C.IP$})})})})]}),0===nn.length?(0,en.jsx)("tr",{children:(0,en.jsx)(hc,{colSpan:d?5:4,children:(0,en.jsxs)(Pc,{children:[(0,en.jsx)(E.A,{size:48,style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:0===g.length?"\u017d\xe1dn\xe1 pr\xe1va":"Nenalezena \u017e\xe1dn\xe1 pr\xe1va"}),(0,en.jsx)("p",{children:0===g.length?"Nejsou k dispozici \u017e\xe1dn\xe1 pr\xe1va":"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):tn.getRowModel().rows.map(n=>(0,en.jsx)(gc,{children:n.getVisibleCells().map(n=>(0,en.jsx)(hc,{style:{width:"aktivni"===n.column.id?"80px":"actions"===n.column.id?"90px":"auto",maxWidth:"aktivni"===n.column.id?"80px":"actions"===n.column.id?"90px":"none"},children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))]})}),(0,en.jsxs)(Ac,{children:[(0,en.jsxs)(zc,{children:["Zobrazeno ",Math.min(I*P+1,nn.length)," - ",Math.min((I+1)*P,nn.length)," z ",nn.length," pr\xe1v"]}),(0,en.jsxs)(wc,{children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(Sc,{value:P,onChange:n=>{const e=Number(n.target.value);D(e),N(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(Cc,{onClick:()=>{N(0)},disabled:0===I,children:"\xab\xab"}),(0,en.jsx)(Cc,{onClick:()=>{N(n=>Math.max(0,n-1))},disabled:0===I,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",I+1," z ",Math.max(1,tn.getPageCount())]}),(0,en.jsx)(Cc,{onClick:()=>{N(n=>Math.min(tn.getPageCount()-1,n+1))},disabled:I>=tn.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(Cc,{onClick:()=>{N(tn.getPageCount()-1)},disabled:I>=tn.getPageCount()-1,children:"\xbb\xbb"})]})]})]})}),(0,en.jsx)(An,{isOpen:$,onClose:()=>O(!1),onSave:async n=>{try{"create"===M?(await(0,G.x6)((0,T.A)({token:e,username:o.username},n)),a("Pr\xe1vo bylo \xfasp\u011b\u0161n\u011b vytvo\u0159eno","success")):(await(0,G.OB)((0,T.A)({token:e,username:o.username,id:F.id},n)),a("Pr\xe1vo bylo \xfasp\u011b\u0161n\u011b aktualizov\xe1no","success")),O(!1),s("prava"),Q()}catch(t){a(t.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed pr\xe1va","error")}},editData:F,title:"create"===M?"Vytvo\u0159it nov\xe9 pr\xe1vo":"Upravit pr\xe1vo",icon:E.A,fields:[{name:"kod_prava",label:"K\xf3d pr\xe1va",type:"text",required:!0},{name:"popis",label:"Popis",type:"textarea",required:!1},{name:"aktivni",label:"Aktivn\xed",type:"checkbox",required:!1,default:!0}]}),(0,en.jsx)(Yn,{isOpen:Y,onClose:()=>J(!1),onConfirm:async()=>{try{await(0,G.C8)({token:e,username:o.username,id:q.id}),a("Pr\xe1vo bylo \xfasp\u011b\u0161n\u011b smaz\xe1no","success"),J(!1),s("prava"),Q()}catch(n){a(n.message||"Chyba p\u0159i maz\xe1n\xed pr\xe1va","error")}},title:"Smazat pr\xe1vo",message:'Opravdu chcete smazat pr\xe1vo "'.concat((null===q||void 0===q?void 0:q.kod_prava)||(null===q||void 0===q?void 0:q.popis),'"?')})]})};var $c,Oc,Mc,Rc,Fc,Lc,Tc,Vc,Zc,Kc,Hc,Bc,Uc,Wc,Gc,Yc,Jc,qc,Xc,Qc,np,ep,op,tp,rp,ap,ip,lp,sp,dp,cp,pp,up=o(39292),mp=o(81990),gp=o(56804),hp=o(32730),xp=o(33637),fp=o(74714),bp=o(5647);w.A.div($c||($c=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n"]))),w.A.div(Oc||(Oc=(0,A.A)(["\n  border: 2px dashed ",";\n  border-radius: 12px;\n  padding: 3rem 2rem;\n  text-align: center;\n  background: ",";\n  transition: all 0.2s ease;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #f0f9ff;\n  }\n"])),n=>n.$dragOver?"#3b82f6":"#d1d5db",n=>n.$dragOver?"#f0f9ff":"#fafbfc"),w.A.div(Mc||(Mc=(0,A.A)(["\n  font-size: 3rem;\n  color: ",";\n  margin-bottom: 1rem;\n"])),n=>n.$dragOver?"#3b82f6":"#9ca3af"),w.A.div(Rc||(Rc=(0,A.A)(["\n  color: #374151;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n"]))),w.A.div(Fc||(Fc=(0,A.A)(["\n  color: #6b7280;\n  font-size: 0.875rem;\n"]))),w.A.input(Lc||(Lc=(0,A.A)(["\n  display: none;\n"]))),w.A.div(Tc||(Tc=(0,A.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.95);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  z-index: 10;\n"]))),w.A.div(Vc||(Vc=(0,A.A)(["\n  margin-top: 1rem;\n  color: #374151;\n  font-weight: 500;\n"]))),w.A.div(Zc||(Zc=(0,A.A)(["\n  margin-top: 2rem;\n"]))),w.A.div(Kc||(Kc=(0,A.A)(["\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n"]))),w.A.div(Hc||(Hc=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),w.A.span(Bc||(Bc=(0,A.A)(["\n  font-weight: 500;\n  color: #475569;\n"]))),w.A.span(Uc||(Uc=(0,A.A)(["\n  color: #1e293b;\n"]))),w.A.div(Wc||(Wc=(0,A.A)(["\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n"]))),w.A.div(Gc||(Gc=(0,A.A)(["\n  display: flex;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n"]))),w.A.button(Yc||(Yc=(0,A.A)(["\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  border-bottom: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n\n  &:hover {\n    background: ",";\n  }\n"])),n=>n.$active?"white":"transparent",n=>n.$active?"#1e40af":"#64748b",n=>n.$active?"600":"500",n=>n.$active?"2px solid #1e40af":"none",n=>n.$active?"white":"#f1f5f9"),w.A.div(Jc||(Jc=(0,A.A)(["\n  padding: 1.5rem;\n  max-height: 400px;\n  overflow-y: auto;\n"]))),w.A.div(qc||(qc=(0,A.A)(["\n  display: grid;\n  gap: 0.75rem;\n"]))),w.A.div(Xc||(Xc=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n"]))),w.A.div(Qc||(Qc=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),w.A.div(np||(np=(0,A.A)(["\n  width: 2rem;\n  height: 2rem;\n  background: ",";\n  color: ",";\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.875rem;\n"])),n=>{switch(n.$type){case"mergefield":return"#dbeafe";case"bookmark":return"#dcfce7";case"contentcontrol":return"#fef3c7";case"custom":return"#fce7f3";default:return"#f3f4f6"}},n=>{switch(n.$type){case"mergefield":return"#1e40af";case"bookmark":return"#166534";case"contentcontrol":return"#92400e";case"custom":return"#be185d";default:return"#374151"}}),w.A.div(ep||(ep=(0,A.A)([""]))),w.A.div(op||(op=(0,A.A)(["\n  font-weight: 600;\n  color: #1e293b;\n  margin-bottom: 0.25rem;\n"]))),w.A.div(tp||(tp=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]))),w.A.div(rp||(rp=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n"]))),w.A.div(ap||(ap=(0,A.A)(["\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  padding: 1rem;\n"]))),w.A.div(ip||(ip=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: 0.5rem;\n"]))),w.A.div(lp||(lp=(0,A.A)(["\n  font-weight: 600;\n  color: #1e293b;\n  word-break: break-word;\n"]))),w.A.div(sp||(sp=(0,A.A)(["\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),w.A.div(dp||(dp=(0,A.A)(["\n  color: #dc2626;\n  font-weight: 500;\n"]))),w.A.div(cp||(cp=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  margin-top: 1.5rem;\n  justify-content: flex-end;\n"]))),w.A.button(pp||(pp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),n=>n.$primary?"\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ":"\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  ");var vp,yp,kp,jp,Ap,zp,wp,_p,Cp,Sp,Pp,Dp,Ip,Np,Ep,$p,Op,Mp,Rp,Fp,Lp,Tp=o(95162);w.A.div(vp||(vp=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n"]))),w.A.div(yp||(yp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #f3f4f6;\n"]))),w.A.h3(kp||(kp=(0,A.A)(["\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.25rem;\n  font-weight: 600;\n"]))),w.A.div(jp||(jp=(0,A.A)(["\n  background: #dbeafe;\n  color: #1e40af;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n"]))),w.A.div(Ap||(Ap=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 1rem;\n  align-items: start;\n"]))),w.A.div(zp||(zp=(0,A.A)(["\n  background: #f9fafb;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n"]))),w.A.div(wp||(wp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]))),w.A.input(_p||(_p=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),w.A.div(Cp||(Cp=(0,A.A)(["\n  max-height: 400px;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 3px;\n  }\n"]))),w.A.div(Sp||(Sp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem;\n  margin-bottom: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),n=>n.$mapped?"#10b981":"#e5e7eb"),w.A.div(Pp||(Pp=(0,A.A)(["\n  flex: 1;\n"]))),w.A.div(Dp||(Dp=(0,A.A)(["\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 0.25rem;\n"]))),w.A.div(Ip||(Ip=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #6b7280;\n  font-family: 'Courier New', monospace;\n"]))),w.A.div(Np||(Np=(0,A.A)(["\n  margin-bottom: 1rem;\n"]))),w.A.div(Ep||(Ep=(0,A.A)(["\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n"]))),w.A.div($p||($p=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 0.5rem;\n"]))),w.A.div(Op||(Op=(0,A.A)(["\n  background: #3b82f6;\n  color: white;\n  width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 1rem;\n"]))),w.A.div(Mp||(Mp=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n  justify-content: flex-end;\n"]))),w.A.button(Rp||(Rp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),n=>n.$primary?"\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ":"\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  "),w.A.div(Fp||(Fp=(0,A.A)(["\n  background: ",";\n  color: ",";\n  padding: 0.75rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n"])),n=>n.$complete?"#dcfce7":"#fef3c7",n=>n.$complete?"#166534":"#92400e"),w.A.select(Lp||(Lp=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])));var Vp,Zp,Kp,Hp,Bp,Up,Wp,Gp,Yp,Jp,qp,Xp,Qp,nu,eu;w.A.div(Vp||(Vp=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n  margin-bottom: 2rem;\n"]))),w.A.div(Zp||(Zp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #f3f4f6;\n"]))),w.A.div(Kp||(Kp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),w.A.h2(Hp||(Hp=(0,A.A)(["\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.5rem;\n  font-weight: 700;\n"]))),w.A.div(Bp||(Bp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  background: #f8fafc;\n  padding: 0.5rem 1rem;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n"]))),w.A.div(Up||(Up=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: ",";\n  font-weight: ",";\n  font-size: 0.875rem;\n"])),n=>n.$active?"#1e40af":n.$completed?"#059669":"#6b7280",n=>n.$active?"600":"500"),w.A.div(Wp||(Wp=(0,A.A)(["\n  width: 1px;\n  height: 1rem;\n  background: #d1d5db;\n"]))),w.A.button(Gp||(Gp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n  }\n"]))),w.A.div(Yp||(Yp=(0,A.A)(["\n  min-height: 400px;\n"]))),w.A.div(Jp||(Jp=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 2rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e5e7eb;\n"]))),w.A.button(qp||(qp=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  border: 1px solid;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),n=>n.$primary?"\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ":"\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  "),w.A.div(Xp||(Xp=(0,A.A)(["\n  background: #ecfdf5;\n  border: 1px solid #a7f3d0;\n  border-radius: 8px;\n  padding: 1.5rem;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n"]))),w.A.div(Qp||(Qp=(0,A.A)(["\n  width: 4rem;\n  height: 4rem;\n  background: #10b981;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n"]))),w.A.h3(nu||(nu=(0,A.A)(["\n  margin: 0;\n  color: #065f46;\n  font-size: 1.25rem;\n  font-weight: 600;\n"]))),w.A.p(eu||(eu=(0,A.A)(["\n  margin: 0;\n  color: #047857;\n  line-height: 1.5;\n"])));const ou={topLevel:["id","cislo_objednavky","dt_objednavky","predmet","max_cena_s_dph","poznamka","strediska_kod","druh_objednavky_kod","stav_workflow_kod","dt_predpokladany_termin_dodani","misto_dodani","zaruka","polozky_count","prilohy_count","dt_vytvoreni","dt_aktualizace","dt_schvaleni","dt_schvaleni_zamitnutim","dt_uzavreni","dt_zruseni","dt_archivace","dt_odeslani","dt_akceptace","dt_zverejneni","schvaleni_komentar","financovani","stav_objednavky","dodavatel_zpusob_potvrzeni","registr_iddt"],dodavatel:["dodavatel_id","dodavatel_nazev","dodavatel_adresa","dodavatel_ico","dodavatel_dic","dodavatel_zastoupeny","dodavatel_kontakt_jmeno","dodavatel_kontakt_email","dodavatel_kontakt_telefon"],enrichedUserFields:["id","cele_jmeno","jmeno","prijmeni","titul_pred","titul_za","email","telefon","username","lokalita.id","lokalita.nazev","lokalita.kod"],enrichedUserPrefixes:["garant_uzivatel","garant","prikazce_uzivatel","prikazce","schvalovatel","uzivatel","objednatel","odesilatel","fakturant","dodavatel_potvrdil","potvrdil_vecnou_spravnost","dokoncil"],vypocitane:["celkova_cena_bez_dph","celkova_cena_s_dph","vypoctene_dph","celkova_cena_bez_dph_kc","celkova_cena_s_dph_kc","vypoctene_dph_kc","pocet_polozek","pocet_priloh","datum_generovani","cas_generovani","datum_cas_generovani","vybrany_uzivatel_cele_jmeno","vybrany_uzivatel_role","vybrany_uzivatel_lokalita","garant_jmeno_prijmeni","garant_prijmeni_jmeno","garant_cele_jmeno_s_tituly","garant_cele_jmeno","garant_jmeno","garant_prijmeni","garant_email","garant_telefon","prikazce_jmeno_prijmeni","prikazce_prijmeni_jmeno","prikazce_cele_jmeno_s_tituly","prikazce_cele_jmeno","prikazce_jmeno","prikazce_prijmeni","prikazce_email","prikazce_telefon","schvalovatel_jmeno_prijmeni","schvalovatel_prijmeni_jmeno","schvalovatel_cele_jmeno_s_tituly","schvalovatel_cele_jmeno","schvalovatel_jmeno","schvalovatel_prijmeni","schvalovatel_email","schvalovatel_telefon","objednatel_jmeno_prijmeni","objednatel_prijmeni_jmeno","objednatel_cele_jmeno_s_tituly","objednatel_cele_jmeno","objednatel_jmeno","objednatel_prijmeni","objednatel_email","objednatel_telefon","odesilatel_jmeno_prijmeni","odesilatel_prijmeni_jmeno","odesilatel_cele_jmeno_s_tituly","odesilatel_cele_jmeno","odesilatel_jmeno","odesilatel_prijmeni","odesilatel_email","odesilatel_telefon","fakturant_jmeno_prijmeni","fakturant_prijmeni_jmeno","fakturant_cele_jmeno_s_tituly","fakturant_cele_jmeno","fakturant_jmeno","fakturant_prijmeni","fakturant_email","fakturant_telefon"]},tu={celkova_cena_bez_dph:{newPath:"vypocitane.celkova_cena_bez_dph",reason:"Ceny jsou nyn\xed v objektu vypocitane"},celkova_cena_s_dph:{newPath:"vypocitane.celkova_cena_s_dph",reason:"Ceny jsou nyn\xed v objektu vypocitane"},vypoctene_dph:{newPath:"vypocitane.vypoctene_dph",reason:"DPH je nyn\xed v objektu vypocitane"},"objednatel.plne_jmeno":{newPath:"uzivatel.cele_jmeno",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.cele_jmeno":{newPath:"uzivatel.cele_jmeno",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.jmeno":{newPath:"uzivatel.jmeno",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.prijmeni":{newPath:"uzivatel.prijmeni",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.email":{newPath:"uzivatel.email",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.telefon":{newPath:"uzivatel.telefon",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.lokalita.nazev":{newPath:"uzivatel.lokalita.nazev",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},"objednatel.lokalita.kod":{newPath:"uzivatel.lokalita.kod",reason:"Enriched endpoint pou\u017e\xedv\xe1 uzivatel m\xedsto objednatel"},aktualni_datum:{newPath:"vypocitane.datum_generovani",reason:"Datum je nyn\xed v objektu vypocitane"}};function ru(n){const e=[],o=[];return n&&"object"===typeof n?(Object.entries(n).forEach(n=>{let[t,r]=n;if(r){if(tu[r]){const n=tu[r];return void e.push({docxField:t,apiPath:r,type:"deprecated",message:"Pole ".concat(r," je zastaral\xe9"),suggestion:n.newPath,reason:n.reason,severity:"error"})}(function(n){if(ou.topLevel.includes(n))return!0;if(ou.dodavatel.includes(n))return!0;if(n.startsWith("vypocitane.")){const e=n.substring(11);return ou.vypocitane.includes(e)}for(const e of ou.enrichedUserPrefixes)if(n.startsWith(e+".")){const o=n.substring(e.length+1);return ou.enrichedUserFields.includes(o)}return n.startsWith("financovani.")?["typ","nazev","nazev_stavu","kod","kod_stavu"].includes(n.substring(12)):!(!n.startsWith("strediska_kod.")&&"strediska_kod"!==n)||!!(n.startsWith("polozky.")||n.startsWith("prilohy.")||n.startsWith("faktury."))})(r)||e.push({docxField:t,apiPath:r,type:"invalid",message:"Pole ".concat(r," neexistuje v enriched API"),severity:"error"})}else o.push({docxField:t,apiPath:r,type:"empty",message:"Pole ".concat(t," nen\xed namapov\xe1no"),severity:"warning"})}),{valid:0===e.length,errors:e,warnings:o,totalFields:Object.keys(n).length,validFields:Object.keys(n).length-e.length-o.filter(n=>"empty"===n.type).length}):{valid:!1,errors:[{message:"Mapping nen\xed platn\xfd objekt"}],warnings:[]}}var au,iu,lu,su,du,cu,pu,uu,mu,gu,hu,xu,fu,bu,vu,yu,ku,ju,Au,zu,wu,_u,Cu,Su,Pu,Du,Iu,Nu,Eu,$u,Ou,Mu,Ru,Fu,Lu,Tu,Vu,Zu,Ku,Hu,Bu,Uu,Wu,Gu,Yu,Ju,qu,Xu,Qu,nm,em,om,tm,rm,am,im,lm,sm,dm,cm;const pm=w.A.div(au||(au=(0,A.A)(["\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n"]))),um=w.A.div(iu||(iu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  background: ",";\n  border-bottom: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n"])),n=>n.$expanded?"#f8fafc":"#fafbfc",n=>n.$expanded?"1px solid #e5e7eb":"none"),mm=w.A.div(lu||(lu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),gm=w.A.div(su||(su=(0,A.A)(["\n  width: 2.5rem;\n  height: 2.5rem;\n  background: #6366f1;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.125rem;\n"]))),hm=w.A.h3(du||(du=(0,A.A)(["\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.125rem;\n  font-weight: 600;\n"]))),xm=w.A.p(cu||(cu=(0,A.A)(["\n  margin: 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n"]))),fm=w.A.div(pu||(pu=(0,A.A)(["\n  transition: transform 0.2s ease;\n  transform: ",";\n  color: #6b7280;\n"])),n=>n.$expanded?"rotate(180deg)":"rotate(0deg)"),bm=w.A.div(uu||(uu=(0,A.A)(["\n  max-height: ",";\n  overflow: ",";\n  transition: max-height 0.3s ease;\n  background: white;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink */\n"])),n=>n.$expanded?"none":"0",n=>(n.$expanded,"hidden")),vm=w.A.div(mu||(mu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n\n  ","\n"])),n=>{switch(n.$status){case"analyzing":return"background: #fef3c7; color: #92400e; border: 1px solid #fcd34d;";case"ready":return"background: #d1fae5; color: #065f46; border: 1px solid #10b981;";case"error":return"background: #fee2e2; color: #991b1b; border: 1px solid #f87171;";default:return"background: #f3f4f6; color: #374151; border: 1px solid #d1d5db;"}}),ym=w.A.button(gu||(gu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 50%;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n    color: #1f2937;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),km=w.A.div(hu||(hu=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n"]))),jm=w.A.div(xu||(xu=(0,A.A)(["\n  font-size: 2rem;\n  margin-bottom: 1rem;\n  color: #6366f1;\n"]))),Am=w.A.div(fu||(fu=(0,A.A)(["\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  flex: 1;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink */\n  overflow: hidden; /* Zajist\xed, \u017ee obsah nep\u0159ete\u010de */\n"]))),zm=w.A.div(bu||(bu=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  flex: 1;\n  overflow: hidden;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink */\n"]))),wm=w.A.div(vu||(vu=(0,A.A)(["\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink a scrolling */\n  overflow: hidden; /* Zajist\xed, \u017ee obsah nep\u0159ete\u010de */\n"]))),_m=w.A.div(yu||(yu=(0,A.A)(["\n  background: #f0fdf4;\n  border: 2px solid #d1fae5;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink a scrolling */\n  overflow: hidden; /* Zajist\xed, \u017ee obsah nep\u0159ete\u010de */\n"]))),Cm=w.A.div(ku||(ku=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  flex-shrink: 0;\n  background: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n"]))),Sm=w.A.div(ju||(ju=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n"]))),Pm=w.A.div(Au||(Au=(0,A.A)(["\n  font-size: 1rem;\n  color: #6366f1;\n"]))),Dm=w.A.div(zu||(zu=(0,A.A)(["\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #374151;\n"]))),Im=w.A.div(wu||(wu=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),Nm=w.A.input(_u||(_u=(0,A.A)(["\n  width: 100%;\n  padding: 0.375rem 0.75rem 0.375rem 2rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  outline: none;\n  transition: all 0.2s ease;\n\n  &:focus {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n"]))),Em=w.A.div(Cu||(Cu=(0,A.A)(["\n  position: absolute;\n  left: 0.5rem;\n  color: #9ca3af;\n  font-size: 0.875rem;\n  pointer-events: none;\n"]))),$m=w.A.button(Su||(Su=(0,A.A)(["\n  position: absolute;\n  right: 0.5rem;\n  background: none;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.15s ease;\n\n  &:hover {\n    background: #f3f4f6;\n    color: #6b7280;\n  }\n"]))),Om=w.A.div(Pu||(Pu=(0,A.A)(["\n  overflow-y: auto; /* auto m\xedsto scroll - scrollbar se zobraz\xed jen kdy\u017e je pot\u0159eba */\n  overflow-x: hidden;\n  padding: 0.5rem;\n  flex: 1;\n  min-height: 0; /* Umo\u017en\xed spr\xe1vn\xfd flex shrink */\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f1f5f9;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n"]))),Mm=(0,w.A)(Om)(Du||(Du=(0,A.A)(["\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f8fafc; /* Lad\xed s DOCX panel pozad\xedm */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1; /* Sv\u011btlej\u0161\xed \u0161ed\xe1 pro DOCX */\n    border-radius: 4px;\n\n    &:hover {\n      background: #94a3b8;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #cbd5e1 #f1f5f9;\n"]))),Rm=(0,w.A)(Om)(Iu||(Iu=(0,A.A)(["\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f0fdf4; /* Lad\xed s DB panel pozad\xedm */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #dcfce7; /* Sv\u011btle zelen\xe1 */\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #86efac; /* Zelenkav\xe1 pro DB pole */\n    border-radius: 4px;\n\n    &:hover {\n      background: #4ade80; /* Tmav\u0161\xed zelen\xe1 p\u0159i hover */\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #86efac #dcfce7;\n"]))),Fm=w.A.div(Nu||(Nu=(0,A.A)(["\n  background: white;\n  border: 1px solid ",";\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  transition: all 0.2s ease;\n\n  ","\n\n  ","\n\n  ","\n"])),n=>n.$hasError?"#ef4444":n.$mapped?"#10b981":"#d1d5db",n=>n.$dragOver&&"\n    border-color: #3b82f6;\n    background: #dbeafe;\n  ",n=>n.$hasError&&"\n    background: #fef2f2;\n    border-color: #ef4444;\n    border-width: 2px;\n  ",n=>n.$mapped&&!n.$hasError&&"\n    background: #f0fdf4;\n    border-color: #10b981;\n  "),Lm=w.A.div(Eu||(Eu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border-bottom: 1px solid #f3f4f6;\n"]))),Tm=w.A.div($u||($u=(0,A.A)(["\n  width: 1.5rem;\n  height: 1.5rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n  color: white;\n\n  ","\n"])),n=>{switch(n.$type){case"docvariable":return"background: #3b82f6;";case"bookmark":return"background: #10b981;";case"field":return"background: #f59e0b;";default:return"background: #6b7280;"}}),Vm=w.A.div(Ou||(Ou=(0,A.A)(["\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.875rem;\n"]))),Zm=w.A.div(Mu||(Mu=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  min-height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n\n  ","\n"])),n=>n.$dragOver&&"\n    background: #dbeafe;\n    border: 2px dashed #3b82f6;\n    border-radius: 4px;\n  "),Km=w.A.div(Ru||(Ru=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n"]))),Hm=w.A.div(Fu||(Fu=(0,A.A)(["\n  color: ",";\n  font-weight: 500;\n  font-size: 0.8rem;\n  flex: 1;\n"])),n=>n.$hasError?"#dc2626":"#059669"),Bm=w.A.div(Lu||(Lu=(0,A.A)(["\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: #dc2626;\n  line-height: 1.3;\n"]))),Um=w.A.div(Tu||(Tu=(0,A.A)(["\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #f0fdf4;\n  border: 1px solid #bbf7d0;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: #166534;\n  line-height: 1.3;\n  font-family: 'Monaco', 'Menlo', monospace;\n"]))),Wm=w.A.div(Vu||(Vu=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  width: 100%;\n"]))),Gm=w.A.div(Zu||(Zu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: ",";\n  border: 1px solid ",";\n  color: ",";\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: ",";\n  opacity: ",";\n  transform: ",";\n  transition: all 0.15s ease;\n  user-select: none;\n\n  &:hover {\n    background: ",";\n  }\n"])),n=>n.$isDragging?"#f3f4f6":n.$dragOver?"#e5e7eb":n.$isComposed?"#fef3c7":"#dcfce7",n=>n.$isDragging?"#9ca3af":n.$dragOver?"#6b7280":n.$isComposed?"#fbbf24":"#16a34a",n=>n.$isDragging?"#6b7280":n.$dragOver?"#374151":n.$isComposed?"#92400e":"#166534",n=>n.$isDragging?"grabbing":"grab",n=>n.$isDragging?.5:1,n=>n.$dragOver?"scale(1.02)":"scale(1)",n=>n.$isDragging?"#f3f4f6":n.$dragOver?"#e5e7eb":n.$isComposed?"#fef08a":"#bbf7d0"),Ym=w.A.span(Ku||(Ku=(0,A.A)(["\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: none;\n  pointer-events: none;\n"]))),Jm=w.A.button(Hu||(Hu=(0,A.A)(["\n  background: none;\n  border: none;\n  color: #dc2626;\n  cursor: pointer;\n  padding: 0.125rem;\n  border-radius: 2px;\n  margin-left: 0.25rem;\n  font-size: 0.625rem;\n\n  &:hover {\n    background: rgba(220, 38, 38, 0.1);\n  }\n"]))),qm=w.A.div(Bu||(Bu=(0,A.A)(["\n  font-size: 0.7rem;\n  color: #6b7280;\n  text-align: center;\n  padding: 0.125rem;\n  font-style: italic;\n"]))),Xm=w.A.button(Uu||(Uu=(0,A.A)(["\n  background: none;\n  border: none;\n  color: #dc2626;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n\n  &:hover {\n    background: #fee2e2;\n  }\n"]))),Qm=w.A.div(Wu||(Wu=(0,A.A)(["\n  color: #9ca3af;\n  font-size: 0.8rem;\n  font-style: italic;\n"]))),ng=w.A.div(Gu||(Gu=(0,A.A)(["\n  margin-bottom: 1rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  overflow: hidden;\n"]))),eg=w.A.div(Yu||(Yu=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.8rem;\n  padding: 0.5rem 0.75rem;\n  background: #f9fafb;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-bottom: ",";\n\n  &:hover {\n    background: #f3f4f6;\n  }\n"])),n=>n.$expanded?"1px solid #e5e7eb":"none"),og=w.A.div(Ju||(Ju=(0,A.A)(["\n  transition: transform 0.2s ease;\n  transform: ",";\n  color: #6b7280;\n  font-size: 0.75rem;\n"])),n=>n.$expanded?"rotate(90deg)":"rotate(0deg)"),tg=w.A.div(qu||(qu=(0,A.A)(["\n  display: ",";\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n"])),n=>n.$expanded?"flex":"none"),rg=w.A.div(Xu||(Xu=(0,A.A)(["\n  background: white;\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0.5rem 0.75rem;\n  cursor: grab;\n  transition: all 0.2s ease;\n  position: relative;\n\n  ","\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    cursor: grabbing;\n  }\n"])),n=>n.$isComposed?"#e879f9":"#d1fae5",n=>n.$isComposed&&"\n    background: linear-gradient(135deg, #fef7ff 0%, #fdf4ff 100%);\n    border-left: 3px solid #d946ef;\n  ",n=>n.$isComposed?"#fdf2f8":"#f0fdf4",n=>n.$isComposed?"#d946ef":"#10b981"),ag=w.A.span(Qu||(Qu=(0,A.A)(["\n  position: absolute;\n  top: -0.25rem;\n  right: -0.25rem;\n  background: #d946ef;\n  color: white;\n  font-size: 0.625rem;\n  padding: 0.125rem 0.25rem;\n  border-radius: 2px;\n  font-weight: 600;\n  line-height: 1;\n"]))),ig=w.A.div(nm||(nm=(0,A.A)(["\n  margin-top: 0.25rem;\n  padding-top: 0.25rem;\n  border-top: 1px solid #f3e8ff;\n  font-size: 0.7rem;\n  color: #7c3aed;\n"]))),lg=w.A.div(em||(em=(0,A.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  margin-top: 0.25rem;\n"]))),sg=w.A.span(om||(om=(0,A.A)(["\n  background: #e879f9;\n  color: white;\n  font-size: 0.625rem;\n  padding: 0.125rem 0.25rem;\n  border-radius: 2px;\n  font-weight: 500;\n"]))),dg=w.A.div(tm||(tm=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n"]))),cg=w.A.div(rm||(rm=(0,A.A)(["\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.8rem;\n  line-height: 1.2;\n"]))),pg=w.A.div(am||(am=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),ug=w.A.span(im||(im=(0,A.A)(["\n  font-family: 'Courier New', monospace;\n  color: #059669;\n  font-size: 0.75rem;\n  flex: 1;\n"]))),mg=(w.A.div(lm||(lm=(0,A.A)(["\n  color: #059669;\n  font-size: 0.75rem;\n  font-style: italic;\n  opacity: 0.8;\n  display: none; /* Skryt\xfd - u\u017e se nepou\u017e\xedv\xe1 */\n"]))),w.A.span(sm||(sm=(0,A.A)(["\n  background: #e0f2fe;\n  color: #0369a1;\n  font-size: 0.7rem;\n  padding: 0.125rem 0.375rem;\n  border-radius: 3px;\n  font-weight: 500;\n"])))),gg=w.A.button(dm||(dm=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n"]))),hg=w.A.button(cm||(cm=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #374151;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n    color: #1f2937;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n"])));const xg=n=>{let{file:e,mapping:o={},onMappingChange:t,expanded:r,onExpandChange:a,token:i=null,username:l=null,sampleOrderId:s=null,useDynamicFields:d=!0}=n;const{showToast:c}=(0,z.useContext)(H.$o),[p,u]=(0,z.useState)(!1),[m,g]=(0,z.useState)(null),[h,x]=(0,z.useState)(!1),[f,b]=(0,z.useState)(!1),[v,y]=(0,z.useState)([]),[k,j]=(0,z.useState)(null),[A,w]=(0,z.useState)(null),[S,P]=(0,z.useState)({}),[D,I]=(0,z.useState)({}),[N,E]=(0,z.useState)(null),[$,O]=(0,z.useState)(null),[M,R]=(0,z.useState)(""),[F,L]=(0,z.useState)(""),[V,Z]=(0,z.useState)(null),K=((0,z.useRef)(null),void 0!==r?r:p);(0,z.useEffect)(()=>{(async()=>{if(d&&i&&l&&s){console.log("\ud83d\udd04 Na\u010d\xedt\xe1m ENRICHED DB pole z API pro sampleOrderId:",s);try{const n=await(0,Tp.h7)({token:i,username:l,objednavka_id:s}),e=(0,bp.HR)(n);y(e),console.log("\u2705 ENRICHED DB pole na\u010dtena z API:",{pocet_skupin:e.length,celkem_poli:e.reduce((n,e)=>n+e.fields.length,0),skupiny:e.map(n=>"".concat(n.group," (").concat(n.fields.length,")"))})}catch(n){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed enriched dat, fallback na statick\xe9 pole:",n);const e=(0,bp.getOrderFieldsForMapping)();y(e)}}else{console.log("\ud83d\udd04 Na\u010d\xedt\xe1m STATICK\xc9 DB pole (fallback - \u017e\xe1dn\xe9 auth parametry)...");const n=(0,bp.getOrderFieldsForMapping)();y(n),console.log("\u2705 STATICK\xc9 DB pole na\u010dtena:",{pocet_skupin:n.length,celkem_poli:n.reduce((n,e)=>n+e.fields.length,0)})}})()},[d,i,l,s]),(0,z.useEffect)(()=>{if(0===v.length)return;const n={};v.forEach((e,o)=>{n[e.group]=!1}),P(n)},[v]),(0,z.useEffect)(()=>{if(!o||0===Object.keys(o).length)return void Z(null);const n=ru(o);Z(n),n&&!n.valid&&console.log("\u26a0\ufe0f Mapping obsahuje chyby:",{errors:n.errors.length,warnings:n.warnings.length})},[o]),(0,z.useEffect)(()=>{if(!o||0===Object.keys(o).length||0===v.length)return;const n={},e=v.flatMap(n=>n.fields);Object.entries(o).forEach(o=>{let[t,r]=o;if("string"===typeof r&&r.includes(" + ")){const o=r.split(" + ").map(n=>n.trim()),a=o.map(n=>e.find(e=>e.key===n)).filter(Boolean);a.length===o.length&&a.length>1&&(n[t]=a)}}),Object.keys(n).length>0&&I(e=>(0,T.A)((0,T.A)({},e),n))},[o,v]);const B=()=>v.every(n=>S[n.group]);(0,z.useEffect)(()=>{e&&K&&!m&&U(e)},[e,K]),(0,z.useEffect)(()=>{e&&(g(null),x(!1),I({}))},[e]);const U=async n=>{if(n&&!h){x(!0),g(null);try{const e=await(0,bp.extractDocxFields)(n);g(e)}catch(e){console.error("\u274c Chyba p\u0159i anal\xfdze DOCX:",e),g({success:!1,error:e.message||"Neo\u010dek\xe1van\xe1 chyba p\u0159i anal\xfdze"})}finally{x(!1)}}},W=n=>{switch(n){case"docvariable":return C.CYF;case"bookmark":return C.pS3;case"field":return C.jTw;default:return C.X46}},G=()=>{w(null)},Y=n=>{const e=(0,T.A)({},o);delete e[n],null===t||void 0===t||t(e),I(e=>{const o=(0,T.A)({},e);return delete o[n],o})},J=n=>{n.stopPropagation(),O(null)},q=(()=>{var n,e;if(h)return{status:"analyzing",text:"Analyzuji..."};if(null!==m&&void 0!==m&&m.success&&(null===(n=m.fields)||void 0===n?void 0:n.length)>0){const n=Object.keys(o).length;return{status:"ready",text:"".concat(m.fields.length," pol\xed, ").concat(n," namapov\xe1no")}}return null!==m&&void 0!==m&&m.success&&0===(null===(e=m.fields)||void 0===e?void 0:e.length)?{status:"error",text:"\u017d\xe1dn\xe1 pole nenalezena"}:m&&!m.success?{status:"error",text:"Chyba p\u0159i anal\xfdze"}:{status:"waiting",text:"Rozbalte pro anal\xfdzu"}})();return(0,en.jsxs)(pm,{children:[(0,en.jsxs)(um,{$expanded:K,onClick:()=>{const n=!K;void 0===r&&u(n),null===a||void 0===a||a(n)},children:[(0,en.jsxs)(mm,{children:[(0,en.jsx)(gm,{children:(0,en.jsx)(_.g,{icon:C.W1P})}),(0,en.jsxs)("div",{children:[(0,en.jsx)(hm,{children:"DOCX Mapov\xe1n\xed pol\xed"}),(0,en.jsx)(xm,{children:"Automatick\xe1 extrakce a mapov\xe1n\xed programov\xfdch pol\xed"})]})]}),(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,en.jsxs)(vm,{$status:q.status,children:["analyzing"===q.status&&(0,en.jsx)(_.g,{icon:C.z1G,spin:!0}),"ready"===q.status&&(0,en.jsx)(_.g,{icon:C.e68}),"error"===q.status&&(0,en.jsx)(_.g,{icon:C.GRI}),q.text]}),(0,en.jsx)(fm,{$expanded:K,children:(0,en.jsx)(_.g,{icon:C.Jt$})})]})]}),(0,en.jsxs)(bm,{$expanded:K,children:[!e&&(0,en.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,en.jsx)(_.g,{icon:C.W1P,style:{fontSize:"3rem",marginBottom:"1rem"}}),(0,en.jsx)("p",{children:"Nejd\u0159\xedve nahrajte DOCX soubor pro anal\xfdzu programov\xfdch pol\xed"})]}),e&&h&&(0,en.jsxs)(km,{children:[(0,en.jsx)(jm,{children:(0,en.jsx)(_.g,{icon:C.z1G,spin:!0})}),(0,en.jsx)("p",{children:"Analyzuji DOCX soubor a hled\xe1m programov\xe1 pole..."})]}),e&&m&&m.success&&(0,en.jsx)(Am,{children:(0,en.jsxs)(zm,{children:[(0,en.jsxs)(wm,{children:[(0,en.jsxs)(Cm,{children:[(0,en.jsxs)(Sm,{children:[(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsx)(Pm,{children:(0,en.jsx)(_.g,{icon:C.W1P})}),(0,en.jsxs)(Dm,{children:["DOCX Pole (",m.fields.filter(n=>!M||n.name.toLowerCase().includes(M.toLowerCase())).length,"/",m.fields.length,")"]})]}),(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsxs)(gg,{type:"button",onClick:async()=>{var n;if(null!==m&&void 0!==m&&null!==(n=m.fields)&&void 0!==n&&n.length&&!f&&null!==v&&void 0!==v&&v.length){b(!0);try{const r=v.flatMap(n=>n.fields||[]),a=[{docxPatterns:[/datum.*vytvor/i,/date.*creat/i,/datum.*zalozen/i,/datum/i,/date/i,/den/i,/mesic/i,/rok/i],dbFields:["objednavky.datum_vytvoreni","objednavky.created_at","objednavky.datum"],priority:100,category:"datum"},{docxPatterns:[/datum.*uprav/i,/date.*modif/i,/datum.*zmeny/i],dbFields:["objednavky.datum_upravy","objednavky.updated_at"],priority:95,category:"datum"},{docxPatterns:[/termin/i,/deadline/i,/splatnost/i,/due/i],dbFields:["objednavky.termin_plneni","objednavky.deadline","objednavky.termin"],priority:90,category:"datum"},{docxPatterns:[/cislo.*objednavk/i,/order.*number/i,/^cislo$/i,/^number$/i],dbFields:["objednavky.cislo_objednavky","objednavky.order_number"],priority:85,category:"cislo"},{docxPatterns:[/^id$/i,/identifikator/i,/identifier/i],dbFields:["objednavky.id","objednavky.order_id"],priority:80,category:"cislo"},{docxPatterns:[/nazev/i,/name/i,/title/i,/nadpis/i,/heading/i],dbFields:["objednavky.nazev","objednavky.title","objednavky.name"],priority:75,category:"text"},{docxPatterns:[/popis/i,/description/i,/desc/i,/text/i],dbFields:["objednavky.popis","objednavky.description"],priority:70,category:"text"},{docxPatterns:[/poznamka/i,/note/i,/comment/i,/komentar/i],dbFields:["objednavky.poznamka","objednavky.notes","objednavky.interni_poznamka"],priority:65,category:"text"},{docxPatterns:[/cena.*celk/i,/total.*price/i,/celkem/i,/total/i,/suma/i],dbFields:["objednavky.celkova_cena","objednavky.total_price","objednavky.cena_celkem"],priority:60,category:"finance"},{docxPatterns:[/cena.*bez.*dph/i,/price.*without.*vat/i,/net.*price/i],dbFields:["objednavky.cena_bez_dph","objednavky.net_price"],priority:55,category:"finance"},{docxPatterns:[/dph/i,/vat/i,/tax/i,/dan/i],dbFields:["objednavky.dph","objednavky.vat","objednavky.tax"],priority:50,category:"finance"},{docxPatterns:[/cena/i,/price/i,/castka/i,/amount/i,/hodnota/i],dbFields:["objednavky.cena","objednavky.price","objednavky.amount"],priority:45,category:"finance"},{docxPatterns:[/stav/i,/status/i,/state/i],dbFields:["objednavky.stav","objednavky.status","objednavky.state"],priority:40,category:"status"},{docxPatterns:[/email/i,/e-mail/i,/mail/i,/posta/i],dbFields:["objednavky.email","objednavky.kontakt_email","objednavky.mail"],priority:35,category:"kontakt"},{docxPatterns:[/telefon/i,/phone/i,/tel/i,/mobil/i,/gsm/i],dbFields:["objednavky.telefon","objednavky.phone","objednavky.mobil"],priority:30,category:"kontakt"},{docxPatterns:[/dodavatel/i,/supplier/i,/vendor/i],dbFields:["objednavky.dodavatel","objednavky.supplier","objednavky.vendor_name"],priority:25,category:"firma"},{docxPatterns:[/firma/i,/company/i,/spolecnost/i],dbFields:["objednavky.firma","objednavky.company","objednavky.company_name"],priority:20,category:"firma"},{docxPatterns:[/ico/i,/^ic$/i,/company.*id/i],dbFields:["objednavky.ico","objednavky.company_id"],priority:15,category:"firma"},{docxPatterns:[/adresa/i,/address/i],dbFields:["objednavky.adresa","objednavky.address","objednavky.dodaci_adresa"],priority:10,category:"adresa"}],i={},l=[];function s(n,e){let o=null,t=0;return e.forEach(e=>{const r=(e.key||"").toLowerCase(),a=(e.label||"").toLowerCase();let i=0;const l=n.split(/[_\s-]+/).filter(n=>n.length>2),s=[...r.split(/[._\s-]+/),...a.split(/[_\s-]+/)].filter(n=>n.length>2);l.forEach(n=>{s.forEach(e=>{n===e?i+=30:n.includes(e)||e.includes(n)?i+=15:d(n,e)<=2&&(i+=10)})}),i>t&&(t=i,o=e)}),t>0?{field:o,score:t}:null}function d(n,e){const o=[];for(let t=0;t<=e.length;t++)o[t]=[t];for(let t=0;t<=n.length;t++)o[0][t]=t;for(let t=1;t<=e.length;t++)for(let r=1;r<=n.length;r++)e.charAt(t-1)===n.charAt(r-1)?o[t][r]=o[t-1][r-1]:o[t][r]=Math.min(o[t-1][r-1]+1,o[t][r-1]+1,o[t-1][r]+1);return o[e.length][n.length]}m.fields.forEach(n=>{var e;const o=(null===(e=n.name)||void 0===e?void 0:e.toLowerCase())||"";let t=null,d=0,c="";const p=r.find(n=>{var e,t;const r=(null===(e=n.key)||void 0===e?void 0:e.toLowerCase())||"",a=(null===(t=n.label)||void 0===t?void 0:t.toLowerCase())||"";return o===r||o===a});if(p&&(t=p,d=1e3,c="\ud83c\udfaf P\u0159esn\xe1 shoda n\xe1zvu"),!t)for(const i of a){if(i.docxPatterns.some(n=>n.test(o)))for(const n of i.dbFields){const e=r.find(e=>e.key===n);if(e&&i.priority>d){t=e,d=i.priority,c="\ud83e\udde0 Inteligentn\xed pravidlo (".concat(i.category,")");break}}}if(!t||d<50){const n=s(o,r);n&&n.score>d&&(t=n.field,d=n.score,c="\ud83d\udd0d Fuzzy match (sk\xf3re: ".concat(n.score,")"))}t&&d>=10&&(i[n.name]=t.key,l.push({docx:n.name,db:t.key,label:t.label,score:d,reason:c}))});const c=(0,T.A)((0,T.A)({},o),i);t(c)}catch(e){console.error("\u274c Chyba p\u0159i AI mapov\xe1n\xed:",e)}finally{b(!1)}}else console.warn("\u26a0\ufe0f AI mapov\xe1n\xed nelze spustit - chyb\xed data nebo u\u017e b\u011b\u017e\xed")},disabled:f||!m.fields.length,title:"AI automatick\xe9 mapov\xe1n\xed pol\xed - nevy\u017eaduje ulo\u017een\xed",children:[(0,en.jsx)(_.g,{icon:f?C.z1G:C.jTw,spin:f}),f?"Mapuji...":"AI Map"]}),e&&(0,en.jsx)(ym,{type:"button",onClick:n=>{n.stopPropagation(),(async()=>{e&&!h&&await U(e)})()},disabled:h,title:"Obnovit detekci DOCX pol\xed",children:(0,en.jsx)(_.g,{icon:C.VNe,spin:h})})]})]}),(0,en.jsxs)(Im,{children:[(0,en.jsx)(Em,{children:(0,en.jsx)(_.g,{icon:C.MjD})}),(0,en.jsx)(Nm,{type:"text",placeholder:"Hledat DOCX pole...",value:M,onChange:n=>R(n.target.value)}),M&&(0,en.jsx)($m,{type:"button",onClick:()=>R(""),title:"Vymazat hled\xe1n\xed",children:(0,en.jsx)(_.g,{icon:C.GRI})})]})]}),(0,en.jsx)(Mm,{children:m.fields.filter(n=>!M||n.name.toLowerCase().includes(M.toLowerCase())).sort((n,e)=>{const o=n.name.localeCompare(e.name,"cs",{sensitivity:"base",numeric:!0});if(0!==o)return o;const t={docvariable:1,bookmark:2,field:3};return(t[n.type]||4)-(t[e.type]||4)}).map((n,e)=>{var r;const a=(i=n.name,V&&o[i]?V.errors.find(n=>n.docxField===i):null);var i;return(0,en.jsxs)(Fm,{$mapped:!!o[n.name],$hasError:!!a,$dragOver:A===n.name,children:[(0,en.jsxs)(Lm,{children:[(0,en.jsx)(Tm,{$type:n.type,children:(0,en.jsx)(_.g,{icon:W(n.type)})}),(0,en.jsxs)(Vm,{children:[n.name,n.count&&n.count>1&&(0,en.jsxs)("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#6b7280",fontWeight:"400",fontStyle:"italic"},children:["(\xd7",n.count,")"]})]})]}),(0,en.jsx)(Zm,{$mapped:!!o[n.name],$dragOver:A===n.name,onDragOver:e=>((n,e)=>{n.preventDefault(),w(e)})(e,n.name),onDragLeave:G,onDrop:e=>((n,e)=>{if(n.preventDefault(),w(null),k&&"order"===k.source){const n=o[e],r=D[e];if(n||r){let a=[];if(r&&r.length>0)a=[...r];else if(n){const e=v.flatMap(n=>n.fields).find(e=>e.key===n);e&&(a=[e])}if(!a.find(n=>n.key===k.key)){const n=[...a,k];I(o=>(0,T.A)((0,T.A)({},o),{},{[e]:n}));const r=n.map(n=>n.key).join(" + "),i=(0,T.A)((0,T.A)({},o),{},{[e]:r});null===t||void 0===t||t(i)}}else{const n=(0,T.A)((0,T.A)({},o),{},{[e]:k.key});null===t||void 0===t||t(n),console.log("\u2705 Namapov\xe1no jednoduch\xe9 pole:",{docxField:e,dbField:k.key})}}j(null)})(e,n.name),children:D[n.name]?(0,en.jsx)(Wm,{children:D[n.name].map((e,r)=>(0,en.jsxs)("div",{children:[(0,en.jsxs)(Gm,{$isComposed:"composed"===e.type,$isDragging:(null===N||void 0===N?void 0:N.docxFieldName)===n.name&&(null===N||void 0===N?void 0:N.fieldIndex)===r,$dragOver:(null===$||void 0===$?void 0:$.docxFieldName)===n.name&&(null===$||void 0===$?void 0:$.fieldIndex)===r,draggable:!0,onDragStart:e=>((n,e,o)=>{n.stopPropagation(),E({docxFieldName:e,fieldIndex:o}),n.dataTransfer.effectAllowed="move"})(e,n.name,r),onDragOver:e=>((n,e,o)=>{n.preventDefault(),n.stopPropagation(),O({docxFieldName:e,fieldIndex:o})})(e,n.name,r),onDragLeave:J,onDrop:e=>((n,e,r)=>{if(n.preventDefault(),n.stopPropagation(),!N||N.docxFieldName!==e)return E(null),void O(null);const a=N.fieldIndex;if(a===r)return E(null),void O(null);const i=[...D[e]],[l]=i.splice(a,1);i.splice(r,0,l),I(n=>(0,T.A)((0,T.A)({},n),{},{[e]:i}));const s=i.map(n=>n.key).join(" + "),d=(0,T.A)((0,T.A)({},o),{},{[e]:s});null===t||void 0===t||t(d),E(null),O(null)})(e,n.name,r),title:"P\u0159et\xe1hn\u011bte pro zm\u011bnu po\u0159ad\xed",children:[(0,en.jsx)(Ym,{children:e.label||e.key}),(0,en.jsx)(Jm,{type:"button",onClick:()=>((n,e)=>{const r=(D[n]||[]).filter(n=>n.key!==e.key);if(0===r.length)Y(n);else if(1===r.length){I(e=>{const o=(0,T.A)({},e);return delete o[n],o});const e=(0,T.A)((0,T.A)({},o),{},{[n]:r[0].key});null===t||void 0===t||t(e)}else{I(e=>(0,T.A)((0,T.A)({},e),{},{[n]:r}));const e=r.map(n=>n.key).join(" + "),a=(0,T.A)((0,T.A)({},o),{},{[n]:e});null===t||void 0===t||t(a)}})(n.name,e),title:"Odebrat z mapov\xe1n\xed",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),r<D[n.name].length-1&&(0,en.jsx)(qm,{children:"+ mezera +"})]},e.key||r))}):o[n.name]?(0,en.jsxs)(Km,{children:[(0,en.jsx)(Hm,{$hasError:!!a,children:(null===(r=v.flatMap(n=>n.fields).find(e=>e.key===o[n.name]))||void 0===r?void 0:r.label)||o[n.name]}),(0,en.jsx)(Xm,{type:"button",onClick:()=>Y(n.name),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}):(0,en.jsx)(Qm,{children:"P\u0159et\xe1hn\u011bte pole (nebo v\xedce pol\xed pro slu\u010dov\xe1n\xed)"})}),a&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(Bm,{children:["deprecated"===a.type&&(0,en.jsxs)(en.Fragment,{children:["\u274c ",(0,en.jsx)("strong",{children:"Zastaral\xe1 cesta:"})," ",(0,en.jsx)("code",{children:a.apiPath}),(0,en.jsxs)("div",{style:{marginTop:"0.25rem"},children:["\ud83d\udca1 ",a.reason]})]}),"invalid"===a.type&&(0,en.jsxs)(en.Fragment,{children:["\u274c ",(0,en.jsx)("strong",{children:"Neplatn\xe1 cesta:"})," ",(0,en.jsx)("code",{children:a.apiPath}),(0,en.jsx)("div",{style:{marginTop:"0.25rem"},children:"\ud83d\udca1 Toto pole neexistuje v enriched API"})]})]}),a.suggestion&&(0,en.jsxs)(Um,{children:["\u2705 Pou\u017eijte: ",(0,en.jsx)("strong",{children:a.suggestion})]})]})]},e)})})]}),(0,en.jsxs)(_m,{children:[(0,en.jsxs)(Cm,{children:[(0,en.jsxs)(Sm,{children:[(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsx)(Pm,{children:(0,en.jsx)(_.g,{icon:C.cbP})}),(0,en.jsxs)(Dm,{children:["Datab\xe1zov\xe1 pole (",v.reduce((n,e)=>n+e.fields.filter(n=>!F||n.label.toLowerCase().includes(F.toLowerCase())||n.key.toLowerCase().includes(F.toLowerCase())).length,0),"/",v.reduce((n,e)=>n+e.fields.length,0),")"]})]}),(0,en.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(0,en.jsx)(hg,{type:"button",onClick:B()?()=>{const n={};v.forEach(e=>{n[e.group]=!1}),P(n)}:()=>{const n={};v.forEach(e=>{n[e.group]=!0}),P(n)},title:B()?"Sbalit v\u0161echny skupiny":"Rozbalit v\u0161echny skupiny",children:(0,en.jsx)(_.g,{icon:B()?C.$sC:C.WxX})})})]}),(0,en.jsxs)(Im,{children:[(0,en.jsx)(Em,{children:(0,en.jsx)(_.g,{icon:C.MjD})}),(0,en.jsx)(Nm,{type:"text",placeholder:"Hledat DB pole...",value:F,onChange:n=>L(n.target.value)}),F&&(0,en.jsx)($m,{type:"button",onClick:()=>L(""),title:"Vymazat hled\xe1n\xed",children:(0,en.jsx)(_.g,{icon:C.GRI})})]})]}),(0,en.jsx)(Rm,{children:v.map(n=>{const e=n.fields.filter(n=>!F||n.label.toLowerCase().includes(F.toLowerCase())||n.key.toLowerCase().includes(F.toLowerCase()));return 0===e.length?null:(0,en.jsxs)(ng,{children:[(0,en.jsxs)(eg,{$expanded:S[n.group],onClick:()=>{return e=n.group,void P(n=>(0,T.A)((0,T.A)({},n),{},{[e]:!n[e]}));var e},children:[(0,en.jsxs)("span",{children:[n.group," (",e.length,"/",n.fields.length,")"]}),(0,en.jsx)(og,{$expanded:S[n.group],children:(0,en.jsx)(_.g,{icon:C.Jt$})})]}),(0,en.jsx)(tg,{$expanded:S[n.group],children:e.map(n=>{var e;const o=(null===(e=n.label)||void 0===e?void 0:e.split("\n"))||[n.label||n.key],t=o[0],r=o[1]||"{".concat(n.key,"}");return(0,en.jsxs)(rg,{draggable:!0,onDragStart:e=>((n,e,o)=>{j((0,T.A)((0,T.A)({},e),{},{source:o})),n.dataTransfer.effectAllowed="move"})(e,n,"order"),$isComposed:"composed"===n.type,children:["composed"===n.type&&(0,en.jsx)(ag,{children:"SLO\u017dEN\xc9"}),(0,en.jsxs)(dg,{children:[(0,en.jsx)(cg,{children:t}),(0,en.jsxs)(pg,{children:[(0,en.jsx)(ug,{children:r}),(0,en.jsx)(mg,{children:n.type})]})]}),"composed"===n.type&&n.composition&&(0,en.jsxs)(ig,{children:[(0,en.jsxs)("div",{children:["Skl\xe1d\xe1 se z: ",n.composition.join(" ".concat(n.separator||" "," "))]}),n.template&&(0,en.jsxs)("div",{children:["Form\xe1t: ",n.template]}),(0,en.jsx)(lg,{children:n.composition.map((n,e)=>(0,en.jsx)(sg,{children:n},e))})]})]},n.key)})})]},n.group)})})]})]})}),e&&m&&!m.success&&(0,en.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#dc2626"},children:[(0,en.jsx)(_.g,{icon:C.GRI,style:{fontSize:"3rem",marginBottom:"1rem"}}),(0,en.jsxs)("p",{children:["Chyba p\u0159i anal\xfdze DOCX souboru: ",m.error]})]}),e&&m&&m.success&&0===m.fields.length&&(0,en.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#f59e0b"},children:[(0,en.jsx)(_.g,{icon:C.iW_,style:{fontSize:"3rem",marginBottom:"1rem"}}),(0,en.jsx)("p",{children:"V DOCX souboru nebyla nalezena \u017e\xe1dn\xe1 programov\xe1 pole."}),(0,en.jsx)("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"Zkontrolujte, zda dokument obsahuje merge fields, bookmarks nebo content controls."})]})]})]})};var fg,bg,vg,yg,kg,jg,Ag,zg,wg,_g,Cg,Sg,Pg,Dg,Ig,Ng,Eg,$g,Og,Mg,Rg,Fg,Lg,Tg,Vg,Zg,Kg,Hg,Bg,Ug,Wg,Gg,Yg,Jg,qg,Xg,Qg,nh,eh,oh,th,rh,ah,ih,lh,sh,dh,ch,ph,uh,mh,gh,hh,xh,fh,bh,vh,yh,kh,jh,Ah,zh,wh,_h,Ch,Sh,Ph,Dh,Ih,Nh,Eh,$h,Oh,Mh,Rh,Fh,Lh,Th,Vh,Zh,Kh,Hh,Bh,Uh,Wh,Gh,Yh,Jh,qh,Xh,Qh,nx,ex,ox,tx,rx,ax,ix=o(47633);o(26159),o(39202);const lx="\n  /* Webkit scrollbars (Chrome, Safari, Edge) */\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  /* Firefox scrollbars */\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n",sx="\n  /* Webkit scrollbars (Chrome, Safari, Edge) */\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #64748b; /* Tmav\u0161\xed \u0161ed\xe1 */\n    border-radius: 4px;\n\n    &:hover {\n      background: #475569; /* Je\u0161t\u011b tmav\u0161\xed p\u0159i hover */\n    }\n  }\n\n  /* Firefox scrollbars */\n  scrollbar-width: thin;\n  scrollbar-color: #64748b #f1f5f9;\n",dx=w.A.div(fg||(fg=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n\n  @keyframes pulse {\n    0%, 100% {\n      opacity: 0.3;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.1);\n    }\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]))),cx=w.A.div(bg||(bg=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),px=w.A.button(vg||(vg=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n\n  svg {\n    font-size: 1rem;\n    ","\n  }\n"])),n=>n.$primary?"#3b82f6":"white",n=>n.$primary?"white":"#3b82f6",n=>n.$primary?"#2563eb":"#eff6ff",n=>(n.$primary,"#2563eb"),n=>n.$loading&&"\n      animation: spin 1s linear infinite;\n    "),ux=w.A.div(yg||(yg=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),mx=w.A.div(kg||(kg=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n"]))),gx=w.A.table(jg||(jg=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Pevn\xe9 \u0161\xed\u0159ky pro specifick\xe9 sloupce */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 147px !important; min-width: 147px !important; max-width: 147px !important; }   /* Typ \u0161ablony */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 147px !important; min-width: 147px !important; max-width: 147px !important; }   /* Vytvo\u0159eno */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 135px !important; min-width: 135px !important; max-width: 135px !important; }   /* Verze */\n  th:nth-of-type(5), td:nth-of-type(5) { width: 135px !important; min-width: 135px !important; max-width: 135px !important; }   /* Velikost */\n  /* U\u017eivatel (6) - \u017e\xe1dn\xe1 pevn\xe1 \u0161\xed\u0159ka, dynamicky zabere zbytek */\n  th:nth-of-type(7), td:nth-of-type(7) { width: 150px !important; min-width: 150px !important; max-width: 150px !important; }   /* \u010c\xe1stka */\n  th:nth-of-type(8), td:nth-of-type(8) { width: 50px !important; min-width: 50px !important; max-width: 50px !important; }   /* Disk */\n  th:nth-of-type(9), td:nth-of-type(9) { width: 50px !important; min-width: 50px !important; max-width: 50px !important; }   /* Aktivn\xed */\n  th:last-child, td:last-child { width: 120px !important; min-width: 120px !important; max-width: 120px !important; }      /* Akce */\n"]))),hx=w.A.tr(Ag||(Ag=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),xx=w.A.th(zg||(zg=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),fx=w.A.tr(wg||(wg=(0,A.A)(["\n  background: ",";\n  opacity: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n  }\n"])),n=>n.$isInactive?"#f8f9fa":n.$isEven?"#f8fafc":"white",n=>n.$isInactive?.7:1,n=>n.$isInactive?"#e9ecef":"#f9fafb"),bx=w.A.td(_g||(_g=(0,A.A)(["\n  vertical-align: middle;\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n"]))),vx=w.A.div(Cg||(Cg=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  align-items: center;\n  justify-content: center;\n\n  .action-row {\n    display: flex;\n    gap: 0.12rem;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),yx=w.A.button(Sg||(Sg=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem; /* Zmen\u0161eno z 2rem na 1.75rem = 28px */\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.download {\n    &:hover {\n      color: #059669;\n      background: #ecfdf5;\n    }\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n"]))),kx=w.A.div(Pg||(Pg=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  svg {\n    position: absolute;\n    left: 0.5rem;\n    color: #9ca3af;\n    font-size: 0.75rem;\n    pointer-events: none;\n  }\n"]))),jx=w.A.input(Dg||(Dg=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),Ax=w.A.button(Ig||(Ig=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),zx=w.A.button(Ng||(Ng=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),wx=w.A.button(Eg||(Eg=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(1.15);\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n"]))),_x=w.A.button($g||($g=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #6b7280;\n  padding: 0.4rem 0.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Cx=w.A.div(Og||(Og=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n"]))),Sx=w.A.div(Mg||(Mg=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),Px=w.A.div(Rg||(Rg=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),Dx=w.A.button(Fg||(Fg=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Ix=w.A.select(Lg||(Lg=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Nx=w.A.span(Tg||(Tg=(0,A.A)(["\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n"]))),Ex=w.A.div(Vg||(Vg=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #6b7280;\n\n  svg {\n    margin-bottom: 1rem;\n  }\n\n  h3 {\n    margin: 0 0 0.5rem 0;\n    color: #374151;\n  }\n\n  p {\n    margin: 0;\n  }\n"]))),$x=(0,J.i7)(Zg||(Zg=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),Ox=w.A.div(Kg||(Kg=(0,A.A)(["\n  position: fixed !important;\n  top: ",";\n  left: 0 !important;\n  right: 0 !important;\n  bottom: ",";\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ",";\n  padding: ",";\n  cursor: default;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n"])),n=>n.$isFullscreen?"0 !important":"132px",n=>n.$isFullscreen?"0 !important":"60px",n=>n.$isFullscreen?"1050 !important":"1010",n=>n.$isFullscreen?"0":"1rem"),Mx=w.A.div(Hg||(Hg=(0,A.A)(["\n  background: white;\n  border-radius: ",";\n  width: ",";\n  max-width: ",";\n  height: ",";\n  max-height: ",";\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-shadow: ",";\n  animation: "," 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n  transition: all 0.3s ease;\n  z-index: ",";\n  position: ",";\n"])),n=>n.$isFullscreen?"0":"16px",n=>n.$isFullscreen?"100vw":"100%",n=>n.$isFullscreen?"none":n.$expanded?"1400px":"900px",n=>n.$isFullscreen?"100vh":"calc(100vh - 280px)",n=>n.$isFullscreen?"none":"calc(100vh - 280px)",n=>n.$isFullscreen?"none":"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)",$x,n=>n.$isFullscreen?"1051 !important":"auto",n=>n.$isFullscreen?"relative !important":"static"),Rx=w.A.div(Bg||(Bg=(0,A.A)(['\n  padding: 1.25rem 1.5rem 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url(\'data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.05"><circle cx="30" cy="30" r="1"/></g></svg>\');\n    pointer-events: none;\n  }\n']))),Fx=w.A.div(Ug||(Ug=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n  z-index: 1;\n"]))),Lx=w.A.div(Wg||(Wg=(0,A.A)(["\n  flex: 1;\n"]))),Tx=w.A.h2(Gg||(Gg=(0,A.A)(["\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 700;\n  line-height: 1.2;\n"]))),Vx=w.A.p(Yg||(Yg=(0,A.A)(["\n  margin: 0.375rem 0 0 0;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.8125rem;\n  font-weight: 400;\n"]))),Zx=w.A.button(Jg||(Jg=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  cursor: pointer;\n  padding: 0.625rem;\n  border-radius: 10px;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.05);\n  }\n"]))),Kx=w.A.div(qg||(qg=(0,A.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  ","\n"])),lx),Hx=w.A.div(Xg||(Xg=(0,A.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  grid-template-rows: 1fr;\n  gap: ",";\n  transition: all 0.3s ease;\n  flex: 1;\n  overflow: hidden;\n  padding: 1rem 1.25rem;\n\n  @media (max-width: 1200px) {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n"])),n=>n.$hasMapping?"1fr 1.8fr":"1fr",n=>n.$hasMapping?"1.25rem":"0"),Bx=w.A.div(Qg||(Qg=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  overflow: hidden;\n"]))),Ux=w.A.div(nh||(nh=(0,A.A)(["\n  display: ",";\n  flex-direction: column;\n  opacity: ",";\n  transition: opacity 0.3s ease;\n  overflow: hidden;\n  height: 100%;\n"])),n=>n.$visible?"flex":"none",n=>n.$visible?1:0),Wx=w.A.div(eh||(eh=(0,A.A)(["\n  display: block;\n  width: 100%;\n"]))),Gx=(w.A.div(oh||(oh=(0,A.A)(["\n  width: 100%;\n  margin-top: 0.5rem;\n"]))),w.A.div(th||(th=(0,A.A)(["\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"])))),Yx=w.A.div(rh||(rh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n  background: linear-gradient(135deg, #e2e8f0 0%, #f1f5f9 100%);\n  border-bottom: 1px solid #cbd5e1;\n  flex-shrink: 0;\n"]))),Jx=w.A.h4(ah||(ah=(0,A.A)(["\n  margin: 0;\n  color: #1e293b;\n  font-size: 0.85rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n"]))),qx=w.A.div(ih||(ih=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n"]))),Xx=w.A.button(lh||(lh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #475569;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(59, 130, 246, 0.1);\n    color: #3b82f6;\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),Qx=w.A.div(sh||(sh=(0,A.A)(["\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),nf=(w.A.textarea(dh||(dh=(0,A.A)(["\n  width: 100%;\n  height: 150px;\n  background: #1f2937;\n  color: #e5e7eb;\n  border: none;\n  padding: 1rem;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  resize: none;\n  outline: none;\n\n  &::placeholder {\n    color: #6b7280;\n  }\n"]))),w.A.textarea(ch||(ch=(0,A.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  color: transparent;\n  border: none;\n  padding: 0.5rem 1rem; /* Men\u0161\xed padding top/bottom */\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'JetBrains Mono', 'Fira Code', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  resize: none;\n  outline: none;\n  overflow: auto; /* Textarea m\u016f\u017ee scrollovat */\n  z-index: 2;\n\n  &::placeholder {\n    color: #94a3b8;\n    font-style: italic;\n  }\n\n  /* JSON Syntax Highlighting simulation pro textarea */\n  ::selection {\n    background: rgba(59, 130, 246, 0.2);\n  }\n\n  ","\n"])),sx)),ef=w.A.div(ph||(ph=(0,A.A)(["\n  position: relative;\n  width: 100%;\n  flex: 1;\n  min-height: 0;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: auto; /* Umo\u017en\xed scrollov\xe1n\xed */\n  transition: all 0.2s ease;\n\n  &:focus-within {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  ","\n"])),sx),of=w.A.pre(uh||(uh=(0,A.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  padding: 0.5rem 1rem; /* Stejn\xfd padding jako textarea */\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'JetBrains Mono', 'Fira Code', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  background: transparent;\n  color: #374151; /* Z\xe1kladn\xed barva textu */\n  pointer-events: none;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow: auto; /* Overlay m\u016f\u017ee scrollovat, ale bude synchronizov\xe1no */\n  z-index: 1;\n\n  /* JSON Syntax Colors pro sv\u011btl\xe9 t\xe9ma */\n  .json-key {\n    color: #d97706; /* Amber pro kl\xed\u010de */\n    font-weight: 600;\n  }\n\n  .json-string {\n    color: #059669; /* Emerald pro \u0159et\u011bzce */\n  }\n\n  .json-number {\n    color: #2563eb; /* Blue pro \u010d\xedsla */\n    font-weight: 500;\n  }\n\n  .json-boolean {\n    color: #7c3aed; /* Purple pro booleany */\n    font-weight: 600;\n  }\n\n  .json-null {\n    color: #dc2626; /* Red pro null */\n    font-weight: 600;\n    font-style: italic;\n  }\n\n  .json-punctuation {\n    color: #64748b; /* Slate pro interpunkci */\n    font-weight: 600;\n  }\n\n  ","\n"])),sx),tf=w.A.div(mh||(mh=(0,A.A)(["\n  margin-top: 0.75rem;\n  border-radius: 6px;\n  background: ",";\n  border: 1px solid ",";\n  padding: 0.75rem;\n  max-height: 300px;\n  overflow-y: auto;\n  ","\n"])),n=>"error"===n.$type?"#fef2f2":"#fffbeb",n=>"error"===n.$type?"#fecaca":"#fde68a",lx),rf=w.A.div(gh||(gh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),n=>"error"===n.$type?"#dc2626":"#d97706"),af=w.A.div(hh||(hh=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),lf=w.A.div(xh||(xh=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  border-left: 3px solid ",";\n  font-size: 0.8125rem;\n"])),n=>"error"===n.$type?"#ef4444":"#f59e0b"),sf=w.A.div(fh||(fh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  color: #1f2937;\n"]))),df=w.A.div(bh||(bh=(0,A.A)(["\n  color: #6b7280;\n  font-size: 0.75rem;\n  line-height: 1.4;\n"]))),cf=w.A.div(vh||(vh=(0,A.A)(["\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #f0fdf4;\n  border-radius: 3px;\n  border: 1px solid #bbf7d0;\n  color: #166534;\n  font-size: 0.75rem;\n  font-family: 'Monaco', 'Menlo', monospace;\n"]))),pf=w.A.button(yh||(yh=(0,A.A)(["\n  margin-top: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"]))),uf=w.A.div(kh||(kh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem;\n  background: ",";\n  border-radius: 6px;\n  border: 1px solid ",";\n  margin-bottom: 0.75rem;\n  font-size: 0.875rem;\n"])),n=>n.$valid?"#f0fdf4":"#fef2f2",n=>n.$valid?"#bbf7d0":"#fecaca"),mf=w.A.div(jh||(jh=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  flex: 1;\n"]))),gf=w.A.div(Ah||(Ah=(0,A.A)(["\n  padding: 1rem 1.25rem 0 1.25rem;\n  flex-shrink: 0;\n"]))),hf=w.A.div(zh||(zh=(0,A.A)(["\n  padding: 1rem 1.25rem;\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),xf=(w.A.div(wh||(wh=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem 1.25rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),w.A.div(_h||(_h=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.75rem;\n"])))),ff=w.A.label(Ch||(Ch=(0,A.A)(["\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: #374151;\n  margin-bottom: 0.375rem;\n  display: block;\n\n  &::after {\n    content: ",";\n    color: #dc2626;\n    margin-left: 2px;\n  }\n"])),n=>n.required?'" *"':'""'),bf=w.A.div(Sh||(Sh=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: ",";\n    transform: ",';\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px;\n    height: 16px;\n  }\n\n  input {\n    padding-left: 2rem;\n  }\n\n  textarea {\n    padding-left: 2rem;\n  }\n\n  /* Zpracov\xe1n\xed \u010d\xedseln\xe9ho inputu bez spin button\u016f */\n  input[type="text"].no-spinner::-webkit-outer-spin-button,\n  input[type="text"].no-spinner::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type="text"].no-spinner {\n    -moz-appearance: textfield;\n  }\n'])),n=>n.hasTextarea?"0.75rem":"50%",n=>n.hasTextarea?"none":"translateY(-50%)"),vf=w.A.input(Ph||(Ph=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  min-height: 2.5rem; /* Sjednocen\xe1 v\xfd\u0161ka se StableCustomSelect */\n  padding: ","; /* V\u011bt\u0161\xed padding pro sjednocen\xed */\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem; /* V\u011bt\u0161\xed font jako ve StableCustomSelect */\n  transition: all 0.2s ease;\n  background: ",";\n\n  color: ",";\n  font-weight: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:focus + svg {\n    color: ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n"])),n=>n.hasIcon?"0.75rem 0.75rem 0.75rem 2rem":"0.75rem",n=>n.hasError?"#dc2626":"#e5e7eb",n=>n.hasError?"#fef2f2":"#ffffff",n=>n.value&&""!==n.value?"#1f2937":"#6b7280",n=>n.disabled?"400":n.value&&""!==n.value?"600":"400",n=>n.hasError?"#dc2626":"#3b82f6",n=>n.hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)",n=>n.hasError?"#dc2626":"#3b82f6"),yf=w.A.textarea(Dh||(Dh=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem; /* Sjednocen\xfd padding */\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem; /* Sjednocen\xfd font size */\n  transition: all 0.2s ease;\n  background: ",";\n  min-height: 2.5rem; /* Sn\xed\u017eeno na ~2 \u0159\xe1dky */\n  max-height: 3.5rem; /* Max ~2 \u0159\xe1dky s paddingem */\n  resize: vertical;\n  font-family: ",";\n  line-height: 1.2; /* Kompaktn\u011bj\u0161\xed \u0159\xe1dkov\xe1n\xed */\n\n  /* Stejn\xe1 logika pro zv\xfdrazn\u011bn\xed jako u Input */\n  color: ",";\n  font-weight: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:focus + svg {\n    color: ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n"])),n=>n.hasError?"#dc2626":"#e5e7eb",n=>n.hasError?"#fef2f2":"#ffffff",n=>n.monospace?"monospace":"inherit",n=>n.value&&""!==n.value?"#1f2937":"#6b7280",n=>n.disabled?"400":n.value&&""!==n.value?"600":"400",n=>n.hasError?"#dc2626":"#3b82f6",n=>n.hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)",n=>n.hasError?"#dc2626":"#3b82f6"),kf=(w.A.select(Ih||(Ih=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.5rem; /* Men\u0161\xed padding */\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.8125rem;\n  transition: all 0.2s ease;\n  background: #ffffff;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),w.A.label(Nh||(Nh=(0,A.A)(['\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  color: #374151;\n\n  input[type="checkbox"] {\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    accent-color: #3b82f6;\n  }\n'])))),jf=w.A.div(Eh||(Eh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.625rem;\n  border-bottom: 1px solid #e5e7eb;\n"]))),Af=w.A.div($h||($h=(0,A.A)(["\n  width: 1.75rem;\n  height: 1.75rem;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8125rem;\n"]))),zf=w.A.h3(Oh||(Oh=(0,A.A)(["\n  margin: 0;\n  color: #1f2937;\n  font-size: 0.9375rem;\n  font-weight: 600;\n"]))),wf=w.A.div(Mh||(Mh=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n"]))),_f=w.A.form(Rh||(Rh=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n"]))),Cf=w.A.div(Fh||(Fh=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: #64748b;\n"]))),Sf=w.A.div(Lh||(Lh=(0,A.A)(["\n  display: flex;\n  gap: 0.875rem;\n"]))),Pf=w.A.button(Th||(Th=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &.cancel {\n    background: white;\n    color: #64748b;\n    border: 2px solid #e2e8f0;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #cbd5e1;\n    }\n  }\n\n  &.primary {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    border: 2px solid transparent;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);\n    }\n\n    &:disabled {\n      background: #e2e8f0;\n      color: #64748b;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n  }\n"]))),Df=w.A.div(Vh||(Vh=(0,A.A)(["\n  border: 2px dashed #e5e7eb;\n  border-radius: 12px;\n  padding: 0.5rem; /* Sn\xed\u017eeno o 1em pro v\xedce prostoru */\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: #fafbfc;\n  min-height: 80px; /* Tak\xe9 sn\xed\u017eeno pro kompaktn\u011bj\u0161\xed vzhled */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  user-select: none;\n\n  &:hover, &.drag-over {\n    border-color: #3b82f6;\n    background: linear-gradient(135deg, #eff6ff, #dbeafe);\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);\n  }\n\n  .icon {\n    font-size: 2.5rem;\n    color: #9ca3af;\n    margin-bottom: 0.75rem;\n    transition: all 0.3s ease;\n    pointer-events: none;\n  }\n\n  .text {\n    color: #6b7280;\n    font-weight: 500;\n    font-size: 0.875rem;\n    line-height: 1.4;\n    pointer-events: none;\n  }\n\n  &:hover .icon {\n    color: #3b82f6;\n    transform: scale(1.1);\n  }\n\n  &:hover .text {\n    color: #1f2937;\n  }\n"]))),If=w.A.div(Zh||(Zh=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n"]))),Nf=w.A.div(Kh||(Kh=(0,A.A)(["\n  padding: 1rem;\n  border-radius: 8px;\n  background: ",";\n  border: 1px solid ",";\n"])),n=>"success"===n.$status?"#dcfce7":"warning"===n.$status?"#fef3c7":"error"===n.$status?"#fee2e2":"#f3f4f6",n=>"success"===n.$status?"#bbf7d0":"warning"===n.$status?"#fde68a":"error"===n.$status?"#fecaca":"#e5e7eb"),Ef=w.A.div(Hh||(Hh=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n  margin-bottom: 0.25rem;\n"]))),$f=w.A.div(Bh||(Bh=(0,A.A)(["\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1f2937;\n"]))),Of=w.A.div(Uh||(Uh=(0,A.A)(["\n  margin-top: 1.5rem;\n"]))),Mf=w.A.div(Wh||(Wh=(0,A.A)(["\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background: #f9fafb;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n"]))),Rf=w.A.h4(Gh||(Gh=(0,A.A)(["\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #374151;\n"]))),Ff=w.A.div(Yh||(Yh=(0,A.A)(["\n  font-family: monospace;\n  font-size: 0.875rem;\n  color: #6b7280;\n  background: white;\n  padding: 0.5rem;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n"]))),Lf=w.A.div(Jh||(Jh=(0,A.A)(["\n  display: inline-block;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ",";\n  margin-right: 1rem;\n"])),n=>n.$ok?"#059669":"#dc2626"),Tf=w.A.div(qh||(qh=(0,A.A)(["\n  padding: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  border-left: 3px solid #f59e0b;\n  font-size: 0.875rem;\n"]))),Vf=w.A.div(Xh||(Xh=(0,A.A)(["\n  position: relative;\n  width: 100%;\n"]))),Zf=w.A.button(Qh||(Qh=(0,A.A)(["\n  width: 100%;\n  min-height: 2.5rem;\n  padding: 0.75rem 3rem 0.75rem ",";\n  background: white;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  text-align: left;\n  cursor: ",";\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-family: inherit;\n  font-weight: ",";\n  color: ",";\n\n  &:hover:not(:disabled) {\n    border-color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    cursor: not-allowed;\n  }\n\n  /* Chevron ikona */\n  &::after {\n    content: '';\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%) rotate(",");\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-top: 4px solid #6b7280;\n    transition: transform 0.2s ease;\n  }\n"])),n=>n.hasIcon?"2rem":"1rem",n=>n.hasError?"#dc2626":n.isOpen?"#3b82f6":"#e5e7eb",n=>n.disabled?"not-allowed":"pointer",n=>n.disabled?"400":n.hasValue?"600":"400",n=>n.disabled?"#9ca3af":n.hasValue?"#1f2937":"#6b7280",n=>n.hasError?"#dc2626":"#3b82f6",n=>n.hasError?"#dc2626":"#3b82f6",n=>n.hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)",n=>n.isOpen?"180deg":"0deg"),Kf=w.A.div(nx||(nx=(0,A.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 4000;\n  margin-top: 2px;\n\n  /* Optimalizace pro plynul\xe9 scrollov\xe1n\xed */\n  scroll-behavior: smooth;\n  overscroll-behavior: contain;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f8f9fa;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #d1d5db;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #9ca3af;\n  }\n"]))),Hf=w.A.div(ex||(ex=(0,A.A)(["\n  position: relative;\n  padding: 0.5rem;\n  border-bottom: 1px solid #f3f4f6;\n  background: #f8f9fa;\n"]))),Bf=w.A.input(ox||(ox=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 0.75rem 0.5rem 2.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n"]))),Uf=w.A.div(tx||(tx=(0,A.A)(["\n  position: absolute;\n  left: 1rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n"]))),Wf=w.A.div(rx||(rx=(0,A.A)(["\n  padding: ",";\n  cursor: ",";\n  font-size: 0.875rem;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: ",";\n  border-left: ",";\n  border-bottom: ",";\n  font-weight: "," !important; /* Bold jen pro vybranou mo\u017enost */\n\n  &:hover {\n    background: ",";\n    font-weight: ",' !important; /* Z\u016fst\xe1v\xe1 stejn\xe9 i p\u0159i hover */\n  }\n\n  &:last-child {\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n\n  input[type="checkbox"] {\n    margin: 0;\n    cursor: pointer;\n  }\n\n  span {\n    padding-left: ',"px;\n    font-weight: "," !important; /* Bold jen pro vybranou mo\u017enost */\n  }\n"])),n=>0===n.level?"0.75rem 1rem":"0.5rem 1rem 0.5rem 2rem",n=>n.isHeader?"default":"pointer",n=>0===n.level?"#111827":"#4b5563",n=>n.isHeader?"#f9fafb":n.selected?"#eff6ff":"white",n=>n.selected?"3px solid #3b82f6":"3px solid transparent",n=>0===n.level?"1px solid #e5e7eb":"none",n=>n.selected?"600":"400",n=>n.isHeader?"#f3f4f6":n.selected?"#dbeafe":"#f8fafc",n=>n.selected?"600":"400",n=>20*(n.level||0),n=>n.selected?"600":"400"),Gf=w.A.span(ax||(ax=(0,A.A)(["\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),Yf=z.memo(n=>{let{value:e,onChange:o,onBlur:t,options:r=[],placeholder:a="Vyberte...",disabled:i=!1,hasError:l=!1,required:s=!1,field:d,loading:c=!1,loadingText:p="Na\u010d\xedt\xe1n\xed...",icon:u=null,multiple:m=!1,getOptionLabel:g,getOptionValue:h}=n;const[x,f]=(0,z.useState)(!1),[b,v]=(0,z.useState)(""),[y,k]=(0,z.useState)(0),j=(0,z.useRef)(null),A=(0,z.useRef)(null),w=(0,z.useRef)(null),_=m?Array.isArray(e)?e:[]:e,C=(0,z.useMemo)(()=>!b||c?r:r.filter(n=>{let e;return e=g?g(n,d):"strediska"===d||"strediska_kod"===d?n.label||n.name||n.nazev_stavu||String(n):"lp_kod"===d?n.cislo_lp?"".concat(n.cislo_lp," - ").concat(n.nazev_uctu||""):n.label||String(n):n.label||n.nazev||n.name||String(n),e.toLowerCase().includes(b.toLowerCase())}),[r,b,c,g,d]),S=(0,z.useMemo)(()=>{if(m)return 0===_.length?a:_.map(n=>{const e=r.find(e=>(h?h(e,d):e.id||e.value||e)===n);return e?g?g(e,d):"strediska"===d||"strediska_kod"===d?e.label||e.name||e.nazev_stavu||String(e):"lp_kod"===d?e.cislo_lp?"".concat(e.cislo_lp," - ").concat(e.nazev_uctu||""):e.label||String(e):e.label||e.nazev||e.name||String(e):String(n)}).join(", ");{if(!_)return a;const n=r.find(n=>(h?h(n,d):n.id||n.value||n)===_);return n?g?g(n,d):n.label||n.nazev||n.name||String(n):"prikazce"!==d&&"schvalovatel"!==d||0!==_&&null!==_&&"0"!==_?String(_):"Nezn\xe1m\xfd"}},[_,r,a,m,g,h,d]);(0,z.useEffect)(()=>{const n=n=>{j.current&&!j.current.contains(n.target)&&(f(!1),v(""))};if(x)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[x]),(0,z.useEffect)(()=>{x&&w.current&&C.length>5&&setTimeout(()=>{var n;return null===(n=w.current)||void 0===n?void 0:n.focus()},100)},[x,C.length]),(0,z.useEffect)(()=>{},[C,y]);return(0,en.jsxs)(Vf,{ref:j,children:[(0,en.jsxs)(Zf,{ref:A,type:"button",onClick:()=>{i||(f(n=>!n),x&&v(""))},disabled:i,hasError:l,isOpen:x,hasValue:m?_.length>0:!!_,hasIcon:!!u,children:[u&&(0,en.jsx)("span",{style:{position:"absolute",left:"12px",color:"#9ca3af",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:z.cloneElement(u,{size:16})}),(0,en.jsx)(Gf,{title:S,children:S})]}),x&&!i&&(0,en.jsxs)(Kf,{children:[C.length>0&&(0,en.jsxs)(Hf,{children:[(0,en.jsx)(Uf,{children:(0,en.jsx)(up.A,{size:16})}),(0,en.jsx)(Bf,{ref:w,type:"text",placeholder:"Vyhledat...",value:b,onChange:n=>v(n.target.value),onClick:n=>n.stopPropagation()})]}),c?(0,en.jsx)(Wf,{children:p}):C.length>0?C.map((n,e)=>{const r=h?h(n,d):n.id||n.value||n;let a;a=g?g(n,d):"strediska"===d||"strediska_kod"===d?n.label||n.name||n.nazev_stavu||String(n):"lp_kod"===d?n.cislo_lp?"".concat(n.cislo_lp," - ").concat(n.nazev_uctu||""):n.label||String(n):n.label||n.nazev||n.name||String(n);const i=(n=>{const e=h?h(n,d):n.id||n.value||n;return m?_.includes(e):_===e})(n),l=n.level||0,s=n.isHeader||0===l&&!n.value&&!n.id;return(0,en.jsxs)(Wf,{selected:i,level:l,isHeader:s,onClick:e=>{e.preventDefault(),e.stopPropagation(),s||(n=>{const e=h?h(n,d):n.id||n.value||n;if(m){const n=Array.isArray(_)?_:[],r=n.includes(e)?n.filter(n=>n!==e):[...n,e];o(r),t&&t(d,r)}else o(e),t&&t(d,e),f(!1),v("")})(n)},children:[m&&!s&&(0,en.jsx)("input",{type:"checkbox",checked:i,readOnly:!0,onChange:()=>{}}),(0,en.jsx)("span",{children:a})]},r||e)}):(0,en.jsx)(Wf,{children:"\u017d\xe1dn\xe9 v\xfdsledky"})]})]})}),Jf=n=>{if(!n)return"";try{let e=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e=e.replace(/"([^"\\]*(\\.[^"\\]*)*)"\s*:/g,'<span class="json-key">"$1"</span><span class="json-punctuation">:</span>').replace(/:\s*"([^"\\]*(\\.[^"\\]*)*)"/g,': <span class="json-string">"$1"</span>').replace(/\[\s*"([^"\\]*(\\.[^"\\]*)*)"/g,'[<span class="json-string">"$1"</span>').replace(/,\s*"([^"\\]*(\\.[^"\\]*)*)"/g,', <span class="json-string">"$1"</span>').replace(/:\s*(-?\d+\.?\d*([eE][+-]?\d+)?)/g,': <span class="json-number">$1</span>').replace(/\[\s*(-?\d+\.?\d*([eE][+-]?\d+)?)/g,'[<span class="json-number">$1</span>').replace(/,\s*(-?\d+\.?\d*([eE][+-]?\d+)?)/g,', <span class="json-number">$1</span>').replace(/:\s*(true|false)\b/g,': <span class="json-boolean">$1</span>').replace(/\[\s*(true|false)\b/g,'[<span class="json-boolean">$1</span>').replace(/,\s*(true|false)\b/g,', <span class="json-boolean">$1</span>').replace(/:\s*null\b/g,': <span class="json-null">null</span>').replace(/\[\s*null\b/g,'[<span class="json-null">null</span>').replace(/,\s*null\b/g,', <span class="json-null">null</span>').replace(/([{}[\],])/g,'<span class="json-punctuation">$1</span>'),e}catch(e){return console.error("JSON highlighting error:",e),n}},qf="https://erdms.zachranka.cz/api.eeo/",Xf={file:null,nazev:"",popis:"",typ_dokumentu:"",aktivni:!0,verze:"1.0",platnost_od:"",platnost_do:"",castka:"",min_cena:"",max_cena:"",mapovani_json:"",docx_mapping:{}},Qf=()=>{var n,e,t,r,a,i,l,s,d;const{token:c,user:p,hasPermission:u,userDetail:m}=(0,z.useContext)(K.cy),{showToast:g}=(0,z.useContext)(H.$o),{start:h,setProgress:x,done:f}=(0,z.useContext)(hp.z),b=(0,z.useMemo)(()=>{return n=null===p||void 0===p?void 0:p.username,{async list(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await(0,G.Dv)((0,T.A)({token:e,username:n||"system"},o))},create:async(e,o)=>(o.append("token",e),o.append("username",n||"system"),await(0,G.HM)(e,o)),update:async(e,o,t)=>await(0,G.Mn)((0,T.A)({token:e,username:n||"system",id:o},t)),updateWithFile:async(e,o,t)=>(t.append("token",e),t.append("username",n||"system"),t.append("id",o),await(0,G.Wz)(e,o,t)),reupload:async(e,o,t)=>await(0,G.ZT)({token:e,username:n||"system",id:o,file:t}),delete:async(e,o)=>await(0,G.mL)({token:e,username:n||"system",id:o}),deactivate:async(e,o)=>await(0,G.TX)({token:e,username:n||"system",id:o}),download:async(e,o)=>await(0,G.P4)({token:e,username:n||"system",id:o}),verify:async e=>await(0,G.AR)({token:e,username:n||"system"}),verifySingle:async(e,o)=>await(0,G.An)({token:e,username:n||"system",id:o}),getDownloadUrl:(e,o)=>"".concat("https://erdms.zachranka.cz/api.eeo/","sablona_docx/download?username=").concat(n||"system","&token=").concat(e,"&id=").concat(o)};var n},[null===p||void 0===p?void 0:p.username]),v=null===m||void 0===m?void 0:m.user_id,y=n=>{const e=v||"anon";return"".concat(n,"_").concat(e)},k=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(y(n));return null!==o?JSON.parse(o):e}catch(o){return e}},j=(n,e)=>{try{localStorage.setItem(y(n),JSON.stringify(e))}catch(o){}},A=(0,z.useCallback)(async()=>{try{E(!0),h();const n=await b.list(c,{});if("ok"!==n.status)throw new Error(n.error||"Chyba p\u0159i na\u010d\xedt\xe1n\xed dat");{const e=n.data||[];I(e),Yn(e,!1)}}catch(n){console.error("Load error:",n),g(n.message||"Chyba p\u0159i na\u010d\xedt\xe1n\xed dat","error")}finally{E(!1),f()}},[c,null===p||void 0===p?void 0:p.username,b,h,f,g]),w=(0,z.useCallback)(async()=>{try{un(!0);const n=[{value:"",label:"Vyberte typ dokumentu..."},...await(0,xp.iH)({token:c,username:(null===p||void 0===p?void 0:p.username)||"system"})];cn(n)}catch(n){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed typ\u016f dokument\u016f:",n),g("Chyba p\u0159i na\u010d\xedt\xe1n\xed typ\u016f dokument\u016f","error"),cn([{value:"",label:"Vyberte typ dokumentu..."},{value:"OBJEDNAVKA",label:"Objedn\xe1vka"},{value:"SMLOUVA",label:"Smlouva"},{value:"PROTOKOL",label:"Protokol"}])}finally{un(!1)}},[c,null===p||void 0===p?void 0:p.username,g]),[D,I]=(0,z.useState)([]),[N,E]=(0,z.useState)(!0),[$,O]=(0,z.useState)(()=>k("docxSablony_globalFilter","")),[M,R]=(0,z.useState)(()=>k("docxSablony_columnFilters",{})),[F,L]=(0,z.useState)(()=>k("docxSablony_aktivniFilter","all")),[V,Z]=(0,z.useState)(()=>k("docxSablony_diskFilter","all")),[B,J]=(0,z.useState)(!1),[q,X]=(0,z.useState)(!1),[Q,nn]=(0,z.useState)(!1),[on,tn]=(0,z.useState)(null),[rn,an]=(0,z.useState)(!1),[ln,sn]=(0,z.useState)(null),[dn,cn]=(0,z.useState)([]),[pn,un]=(0,z.useState)(!1),[mn,gn]=(0,z.useState)(null),[hn,xn]=(0,z.useState)(!1),[fn,bn]=(0,z.useState)({}),[vn,yn]=(0,z.useState)(null),[kn,jn]=(0,z.useState)(!1),[An,zn]=(0,z.useState)(!1),[wn,_n]=(0,z.useState)(null),[Cn,Sn]=(0,z.useState)(!1),[Pn,Dn]=(0,z.useState)(!1),[In,Nn]=(0,z.useState)(!1),[En,$n]=(0,z.useState)(null),[On,Mn]=(0,z.useState)(!1),[Rn,Fn]=(0,z.useState)(!1),[Ln,Tn]=(0,z.useState)(!1),[Vn,Zn]=(0,z.useState)(null),[Kn,Hn]=(0,z.useState)(()=>k("docxSablony_pageSize",25)),[Bn,Un]=(0,z.useState)(()=>k("docxSablony_pageIndex",0)),[Wn,Gn]=(0,z.useState)(Xf),Yn=async function(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&0!==n.length)try{const t=await b.verify(c);if("ok"===t.status&&t.data){const r={},a=[];for(const d of t.data)if(d.id){const t=d.file_exists,i=n.find(n=>n.id===d.id),l={status:t?"ok":"error",error:t?null:"Soubor neexistuje na disku"};if(bn(n=>(0,T.A)((0,T.A)({},n),{},{[d.id]:l})),r[d.id]=l,!t&&!e&&i&&(1===i.aktivni||!0===i.aktivni))try{const n=await b.deactivate(c,i.id);n.success?(I(n=>n.filter(n=>n.id!==i.id)),a.push({id:i.id,nazev:i.nazev,success:!0})):a.push({id:i.id,nazev:i.nazev,success:!1,error:n.message||"Nezn\xe1m\xe1 chyba"})}catch(o){a.push({id:i.id,nazev:i.nazev,success:!1,error:o.message})}}Object.values(r).filter(n=>"error"===n.status).length;const i=a.filter(n=>n.success).length,l=a.filter(n=>!n.success).length,s=t.data.map(e=>{const o=n.find(n=>n.id===e.id);return(0,T.A)((0,T.A)({},e),{},{aktivni:null===o||void 0===o?void 0:o.aktivni})});s.filter(n=>!n.file_exists&&(1===n.aktivni||!0===n.aktivni)).length>0&&(i>0&&g("\u26a0\ufe0f Automaticky deaktivov\xe1no ".concat(i," \u0161ablon s chyb\u011bj\xedc\xedmi soubory na disku"),"warning"),l>0&&g("\u274c Nepoda\u0159ilo se deaktivovat ".concat(l," \u0161ablon"),"error"),i>0&&setTimeout(async()=>{try{E(!0),h();const n=await b.list(c,{aktivni:1});if("ok"===n.status){const e=n.data||[];I(e),Yn(e,!0)}}catch(n){console.error("Chyba p\u0159i opakovan\xe9m na\u010d\xedt\xe1n\xed:",n),g("Chyba p\u0159i na\u010d\xedt\xe1n\xed aktualizovan\xfdch dat","error")}finally{E(!1),f()}},500))}else console.error("X Verifikace selhala - neocekavany status:",t)}catch(t){console.error("\u26a0\ufe0f Automatick\xe1 verifikace se nezda\u0159ila:",t)}};(0,z.useEffect)(()=>{c&&(A(),w())},[c,A,w]),(0,z.useEffect)(()=>{try{const n=Wn.docx_mapping||JSON.parse(Wn.mapovani_json||"{}");if(Object.keys(n).length>0){const e=ru(n);Zn(e)}else Zn(null)}catch(n){Zn({valid:!1,errors:[{type:"parse",message:"Nevalidn\xed JSON form\xe1t"}],warnings:[],totalFields:0,validFields:0})}},[Wn.docx_mapping,Wn.mapovani_json]);(0,z.useEffect)(()=>{j("docxSablony_globalFilter",$)},[$,v]),(0,z.useEffect)(()=>{j("docxSablony_columnFilters",M)},[M,v]),(0,z.useEffect)(()=>{j("docxSablony_aktivniFilter",F)},[F,v]),(0,z.useEffect)(()=>{j("docxSablony_diskFilter",V)},[V,v]),(0,z.useEffect)(()=>{j("docxSablony_pageSize",Kn)},[Kn,v]),(0,z.useEffect)(()=>{j("docxSablony_pageIndex",Bn)},[Bn,v]);const Jn=(0,z.useCallback)(async n=>{await ge(n)},[c]),qn=(0,z.useCallback)(async n=>{await de(n)},[c]),Xn=(0,z.useCallback)(async n=>{await se(n)},[c]),Qn=(0,z.useCallback)(async n=>{await pe(n)},[c]),ne=(0,z.useCallback)(n=>{ue(n)},[fn]),ee=(0,z.useCallback)(n=>{me(n)},[]),oe=(0,z.useCallback)(async n=>{await le(n)},[c]),te=(0,z.useMemo)(()=>[{accessorKey:"nazev",header:()=>(0,en.jsx)("div",{style:{textAlign:"left",paddingLeft:"1rem"},children:"N\xe1zev \u0161ablony"}),cell:n=>{let{getValue:e,row:o}=n;return(0,en.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",textAlign:"left",paddingLeft:"1rem"},children:[(0,en.jsx)(S.A,{size:16,style:{color:"#3b82f6",flexShrink:0,marginTop:"2px"}}),(0,en.jsxs)("div",{children:[(0,en.jsxs)("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[e(),o.original.id&&(0,en.jsxs)("sup",{style:{fontSize:"0.6rem",color:"#9ca3af",fontWeight:"normal",marginLeft:"4px"},children:["#",o.original.id]})]}),o.original.popis&&(0,en.jsx)("div",{style:{fontSize:"0.8125rem",color:"#6b7280",fontStyle:"italic"},children:o.original.popis})]})]})}},{accessorKey:"typ_dokumentu",size:147,maxSize:147,minSize:147,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Typ \u0161ablony"}),cell:n=>{let{getValue:e}=n;return(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,en.jsx)(Nx,{children:e()||"N/A"})})}},{accessorKey:"dt_vytvoreni",size:147,maxSize:147,minSize:147,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Vytvo\u0159eno"}),cell:n=>{let{getValue:e}=n;const o=e();if(!o)return(0,en.jsx)("div",{style:{textAlign:"center",color:"#9ca3af"},children:"\u2014"});const t=new Date(o),r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear(),l="".concat(r,".").concat(a,".").concat(i),s=String(t.getHours()).padStart(2,"0"),d=String(t.getMinutes()).padStart(2,"0"),c="".concat(s,":").concat(d);return(0,en.jsxs)("div",{style:{fontSize:"0.875rem",textAlign:"center",lineHeight:"1.4"},children:[(0,en.jsx)("div",{children:l}),(0,en.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:c})]})}},{accessorKey:"verze",size:135,maxSize:135,minSize:135,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Verze"}),cell:n=>{let{getValue:e}=n;return(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,en.jsx)("span",{style:{fontFamily:"monospace"},children:e()||"1.0"})})}},{accessorKey:"velikost_souboru",size:135,maxSize:135,minSize:135,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Velikost"}),cell:n=>{let{getValue:e}=n;const o=((e()||0)/1024).toFixed(1);return(0,en.jsx)("div",{style:{textAlign:"center"},children:"".concat(o," KB")})}},{accessorKey:"uzivatele",header:()=>(0,en.jsx)("div",{style:{textAlign:"left"},children:"U\u017eivatel"}),cell:n=>{var e,o;let{row:t}=n;const r=(null===(e=t.original.vytvoril)||void 0===e?void 0:e.jmeno)||"\u2014",a=(null===(o=t.original.aktualizoval)||void 0===o?void 0:o.jmeno)||"\u2014";return(0,en.jsxs)("div",{style:{textAlign:"left",fontSize:"0.875rem"},title:"Vytvo\u0159il: ".concat(r,"\nAktualizoval: ").concat(a),children:[(0,en.jsx)("div",{style:{color:"#059669",fontWeight:"500"},children:r}),(0,en.jsx)("div",{style:{color:"#3b82f6",fontWeight:"500",marginTop:"2px"},children:a})]})}},{accessorKey:"castka",size:150,maxSize:150,minSize:150,header:()=>(0,en.jsx)("div",{style:{textAlign:"right",paddingRight:"1rem"},children:"\u010c\xe1stka"}),cell:n=>{let{getValue:e}=n;const o=e();return null===o||void 0===o?(0,en.jsx)("div",{style:{textAlign:"right",paddingRight:"1rem",color:"#9ca3af"},children:"\u2014"}):(0,en.jsx)("div",{style:{textAlign:"right",paddingRight:"1rem",fontWeight:"600"},children:new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",maximumFractionDigits:0}).format(o)})}},{id:"disk_status",size:50,maxSize:50,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Disk"}),cell:n=>{let{row:e}=n;const o=e.original,t=fn[o.id];return(0,en.jsx)("div",{style:{textAlign:"center"},children:(0,en.jsx)(_.g,{icon:C.MBK,onClick:()=>Jn(o),title:(null===t||void 0===t?void 0:t.error)||"Klikn\u011bte pro kontrolu existence souboru",style:{color:"checking"===(null===t||void 0===t?void 0:t.status)?"#f59e0b":"ok"===(null===t||void 0===t?void 0:t.status)?"#059669":"error"===(null===t||void 0===t?void 0:t.status)?"#dc2626":"#6b7280",cursor:"pointer",fontSize:"18px",animation:"checking"===(null===t||void 0===t?void 0:t.status)?"pulse 1s infinite":"none"}})})}},{accessorKey:"aktivni",size:50,maxSize:50,header:()=>(0,en.jsx)("div",{style:{textAlign:"center"},children:"Aktivn\xed"}),cell:n=>{let{getValue:e}=n;return(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",fontSize:"18px"},title:e()?"Aktivn\xed":"Neaktivn\xed",children:(0,en.jsx)(_.g,{icon:e()?C.SGM:C.s0Q,style:{color:e()?"#16a34a":"#dc2626"}})})}},{id:"actions",size:120,maxSize:120,minSize:120,enableResizing:!1,header:()=>(0,en.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(vx,{children:[(0,en.jsxs)("div",{className:"action-row",children:[(0,en.jsx)(yx,{className:"download-original",onClick:()=>Xn(e.original),title:"St\xe1hnout origin\xe1ln\xed \u0161ablonu (bez mapov\xe1n\xed)",style:{color:"#8b5cf6"},children:(0,en.jsx)(_.g,{icon:C.W1P})}),(0,en.jsx)(yx,{className:"download",onClick:()=>qn(e.original),title:"St\xe1hnout",children:(0,en.jsx)(_.g,{icon:C.cbP})}),(()=>{const n=e.original.docx_mapping||e.original.mapovani_json,o=n&&("string"===typeof n?"{}"!==n&&""!==n.trim():Object.keys(n).length>0);return(0,en.jsx)(yx,{className:"preview",onClick:o?()=>Qn(e.original):void 0,title:o?"N\xe1hled s daty":"N\xe1hled nen\xed dostupn\xfd - chyb\xed mapov\xe1n\xed pol\xed",disabled:!o,style:{opacity:o?1:.3,cursor:o?"pointer":"not-allowed"},children:(0,en.jsx)(_.g,{icon:C.pS3})})})()]}),(0,en.jsxs)("div",{className:"action-row",children:[(0,en.jsx)(yx,{className:e.original.aktivni?"toggle-active":"toggle-inactive",onClick:()=>oe(e.original),title:e.original.aktivni?"Deaktivovat \u0161ablonu":"Aktivovat \u0161ablonu",children:(0,en.jsx)(_.g,{icon:e.original.aktivni?C.npb:C.tKC})}),(0,en.jsx)(yx,{className:"edit",onClick:()=>ne(e.original),title:"Upravit",children:(0,en.jsx)(_.g,{icon:C.MT7})}),u("DICT_MANAGE")&&(0,en.jsx)(yx,{className:"delete",onClick:()=>ee(e.original),title:"Smazat \xfapln\u011b z disku (hard delete)",children:(0,en.jsx)(_.g,{icon:C.yLS})})]})]})}}],[fn,u,Jn,Xn,qn,Qn,ne,ee,oe]),re=(n,e)=>{if(!e||""===e.trim())return!0;const o=e.trim(),t=o.match(/^(>=|<=|>|<|=)\s*(.+)$/);if(!t)return String(n||"").toLowerCase().includes(o.toLowerCase());const r=t[1],a=t[2].trim(),i=parseFloat(a);if(isNaN(i))return!0;const l=parseFloat(n);if(isNaN(l))return!1;switch(r){case">":return l>i;case"<":return l<i;case">=":return l>=i;case"<=":return l<=i;case"=":return l===i;default:return!0}},ae=(0,z.useMemo)(()=>D.filter(n=>{if("aktivni"===F&&!n.aktivni)return!1;if("neaktivni"===F&&n.aktivni)return!1;if("all"!==V){const e=fn[n.id];if("ok"===V&&"ok"!==(null===e||void 0===e?void 0:e.status))return!1;if("error"===V&&"error"!==(null===e||void 0===e?void 0:e.status))return!1}if($){var e,o,t,r,a,i;const l=(0,fp.WL)($),s=(null===(e=n.vytvoril)||void 0===e?void 0:e.jmeno)||"",d=(null===(o=n.vytvoril)||void 0===o?void 0:o.prijmeni)||"",c=(null===(t=n.vytvoril)||void 0===t?void 0:t.username)||"",p=[s,d,c].filter(Boolean).join(" "),u=(null===(r=n.aktualizoval)||void 0===r?void 0:r.jmeno)||"",m=(null===(a=n.aktualizoval)||void 0===a?void 0:a.prijmeni)||"",g=(null===(i=n.aktualizoval)||void 0===i?void 0:i.username)||"",h=[u,m,g].filter(Boolean).join(" ");let x="",f="";if(n.dt_vytvoreni){const e=new Date(n.dt_vytvoreni);x=e.toLocaleDateString("cs-CZ"),f=e.toLocaleTimeString("cs-CZ",{hour:"2-digit",minute:"2-digit"})}const b=n.velikost_souboru?(n.velikost_souboru/1024).toFixed(1)+" KB":"",v=null!==n.castka&&void 0!==n.castka?new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",maximumFractionDigits:0}).format(n.castka):"",y=n.aktivni?"aktivn\xed":"neaktivn\xed";if(!((0,fp.WL)(n.nazev||"").includes(l)||(0,fp.WL)(n.popis||"").includes(l)||(0,fp.WL)(n.typ_dokumentu||"").includes(l)||(0,fp.WL)((n.verze||"").toString()).includes(l)||(0,fp.WL)(b).includes(l)||(0,fp.WL)(s).includes(l)||(0,fp.WL)(d).includes(l)||(0,fp.WL)(c).includes(l)||(0,fp.WL)(p).includes(l)||s.split(/\s+/).some(n=>(0,fp.WL)(n).includes(l))||d.split(/\s+/).some(n=>(0,fp.WL)(n).includes(l))||(0,fp.WL)(u).includes(l)||(0,fp.WL)(m).includes(l)||(0,fp.WL)(g).includes(l)||(0,fp.WL)(h).includes(l)||u.split(/\s+/).some(n=>(0,fp.WL)(n).includes(l))||m.split(/\s+/).some(n=>(0,fp.WL)(n).includes(l))||(0,fp.WL)(x).includes(l)||(0,fp.WL)(f).includes(l)||(0,fp.WL)(v).includes(l)||(0,fp.WL)(n.nazev_souboru||"").includes(l)||(0,fp.WL)(y).includes(l)))return!1}return!(M.nazev&&!(n.nazev||"").toLowerCase().includes(M.nazev.toLowerCase()))&&(!(M.typ_dokumentu&&!(n.typ_dokumentu||"").toLowerCase().includes(M.typ_dokumentu.toLowerCase()))&&(!(M.verze&&!re(n.verze,M.verze))&&(!(M.velikost_souboru&&!re(n.velikost_souboru,M.velikost_souboru))&&(!(M.dt_vytvoreni&&!(n.dt_vytvoreni||"").toLowerCase().includes(M.dt_vytvoreni.toLowerCase()))&&!(M.dt_upraveno&&!(n.dt_upraveno||"").toLowerCase().includes(M.dt_upraveno.toLowerCase()))))))}),[D,$,M,F,V,fn]),ie=(0,U.N4)({data:ae,columns:te,getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getPaginationRowModel:(0,W.kW)(),columnResizeMode:"onChange",enableColumnResizing:!0,enableGlobalFilter:!1,state:{pagination:{pageSize:Kn,pageIndex:Bn}},initialState:{pagination:{pageSize:25,pageIndex:0},columnSizing:{verze:50,velikost_souboru:80,castka:80,dt_vytvoreni:90,dt_aktualizace:90,aktivni:70}},onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:Kn,pageIndex:Bn}):n;Hn(e.pageSize),Un(e.pageIndex)}}),le=async n=>{try{const e=!n.aktivni,o=e?"aktivace":"deaktivace";let t;if(console.log("\ud83d\udd04 DOCX Template Toggle Status:",{templateId:n.id,templateName:n.nazev,currentStatus:n.aktivni,newStatus:e,action:o}),I(o=>o.map(o=>o.id===n.id?(0,T.A)((0,T.A)({},o),{},{aktivni:e?1:0}):o)),e?(console.log("API CALL: docxApi.update(token, ".concat(n.id,", { aktivni: 1 })")),t=await b.update(c,n.id,{aktivni:1}),console.log("BE RESPONSE aktivace:",JSON.stringify(t,null,2))):(console.log("API CALL: docxApi.deactivate(token, ".concat(n.id,")")),t=await b.deactivate(c,n.id),console.log("BE RESPONSE deaktivace:",JSON.stringify(t,null,2))),console.log("Kontrola vysledku - newStatus: ".concat(e,", result.status: ").concat(t.status,", result.success: ").concat(t.success)),!(e&&"ok"===t.status||!e&&t.success))throw I(e=>e.map(e=>e.id===n.id?(0,T.A)((0,T.A)({},e),{},{aktivni:n.aktivni}):e)),new Error(t.error||"Chyba p\u0159i ".concat(o));g('\u2705 \u0160ablona "'.concat(n.nazev,'" byla \xfasp\u011b\u0161n\u011b ').concat(e?"aktivov\xe1na":"deaktivov\xe1na"),"success")}catch(e){console.error("Toggle status error:",e),I(e=>e.map(e=>e.id===n.id?(0,T.A)((0,T.A)({},e),{},{aktivni:n.aktivni}):e)),g("\u274c Chyba p\u0159i zm\u011bn\u011b stavu: ".concat(e.message),"error")}},se=async n=>{try{console.log("\ud83d\udce5 Stahov\xe1n\xed origin\xe1ln\xed DOCX \u0161ablony:",{templateId:n.id,templateName:n.nazev,username:null===p||void 0===p?void 0:p.username}),x(!0);const e=await b.download(c,n.id),o=window.URL.createObjectURL(e),t=document.createElement("a");t.href=o,t.download=n.nazev_souboru||"".concat(n.nazev,".docx"),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(o),document.body.removeChild(t),g("\u2705 Origin\xe1ln\xed \u0161ablona sta\u017eena","success")}catch(e){console.error("Download original error:",e),g("\u274c Chyba p\u0159i stahov\xe1n\xed: ".concat(e.message),"error")}finally{x(!1)}},de=async n=>{try{console.log("\ud83d\udce5 DOCX Download Request:",{templateId:n.id,templateName:n.nazev,username:null===p||void 0===p?void 0:p.username,hasMapping:!(!n.docx_mapping&&!n.mapovani_json)});const e=n.docx_mapping||n.mapovani_json;if(!(e&&("string"===typeof e?"{}"!==e&&""!==e.trim():Object.keys(e).length>0))){console.log("\ud83d\udcc4 Stahuji \u0161ablonu bez mapov\xe1n\xed (pr\xe1zdn\xe1)");const e=await b.download(c,n.id),o=window.URL.createObjectURL(e),t=document.createElement("a");return t.href=o,t.download=n.nazev_souboru||"".concat(n.nazev,".docx"),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(o),void document.body.removeChild(t)}console.log("\ud83d\udcdd Stahuji \u0161ablonu s mapov\xe1n\xedm - budu plnit pole"),x(!0);const t=await(0,G.F_)({token:c,username:null===p||void 0===p?void 0:p.username,id:n.id,fileName:n.nazev_souboru||"template.docx"}),r="string"===typeof e?JSON.parse(e):e,{createEnhancedFieldMapping:a,createFieldValuesFromMapping:i,getOrderFieldsForMapping:l}=await Promise.resolve().then(o.bind(o,5647)),{processDocxWithFields:s}=await Promise.resolve().then(o.bind(o,39202)),d=a(r,l()),u=i(d,null);console.log("\ud83d\udd27 Zpracov\xe1v\xe1m DOCX s roz\u0161\xed\u0159en\xfdmi poli:",u),console.log("\ud83d\udcca Z\xe1kladn\xed mapov\xe1n\xed:",r),console.log("\ud83d\udcca Roz\u0161\xed\u0159en\xe9 mapov\xe1n\xed:",d);const m=await s({file:t,fieldValues:u,keepEmptyFields:!1});if(m.error)throw new Error(m.error);console.log("\u2705 DOCX zpracov\xe1n:",m.stats);const h=window.URL.createObjectURL(m.blob),f=document.createElement("a");f.href=h,f.download=n.nazev_souboru||"".concat(n.nazev,".docx"),document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(h),document.body.removeChild(f),g("\u2705 Sta\u017eeno s ".concat(m.stats.replacedCount," vypln\u011bn\xfdmi poli"),"success")}catch(e){console.error("Download error:",e),g("\u274c Chyba p\u0159i stahov\xe1n\xed: ".concat(e.message),"error")}finally{x(!1)}},ce=async function(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!n||!e||0===Object.keys(e).length)throw new Error("Pro n\xe1hled je pot\u0159eba DOCX soubor a definovan\xe9 mapov\xe1n\xed");try{console.log("\ud83c\udfa8 Generuji univerz\xe1ln\xed HTML n\xe1hled...",{file:n.name,mappingFields:Object.keys(e).length,mapping:e});const{createEnhancedFieldMapping:r,createFieldValuesFromMapping:a,getOrderFieldsForMapping:i}=await Promise.resolve().then(o.bind(o,5647)),{processDocxWithFields:l}=await Promise.resolve().then(o.bind(o,39202)),s=r(e,i()),d=a(s,null);console.log("\ud83d\udccb Enhanced mapping:",s),console.log("\ud83d\udccb Field values pro n\xe1hled:",d);const c=await l({file:n,fieldValues:d,keepEmptyFields:!0});if(c.error)throw new Error(c.error);console.log("\ud83d\udcca Statistiky n\xe1hrady:",c.stats);let p=(await ix.convertToHtml({arrayBuffer:await c.blob.arrayBuffer()})).value;Object.entries(e).forEach(n=>{let[e,o]=n,t="";const r=o.toLowerCase();t=r.includes("cislo")||r.includes("number")?Math.floor(9e4*Math.random())+1e4:r.includes("datum")||r.includes("date")?(new Date).toLocaleDateString("cs-CZ"):r.includes("cena")||r.includes("price")||r.includes("amount")?(5e4*Math.random()+1e3).toLocaleString("cs-CZ",{style:"currency",currency:"CZK"}):r.includes("email")?"priklad@email.cz":r.includes("telefon")||r.includes("phone")?"+420 777 123 456":r.includes("adresa")||r.includes("address")?"P\u0159\xedkladov\xe1 ulice 123, 110 00 Praha":r.includes("nazev")||r.includes("jmeno")||r.includes("name")?"P\u0159\xedkladov\xe9 jm\xe9no/n\xe1zev":"[".concat(o,"]");const a=new RegExp("\\{".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\}"),"g"),i='<span style="background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 3px; font-weight: 600; border: 1px solid #93c5fd;">'.concat(t,"</span>");p=p.replace(a,i)});const u='<!DOCTYPE html>\n<html lang="cs">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>N\xe1hled DOCX \u0161ablony - '.concat(t||"Bez n\xe1zvu","</title>\n  <style>\n    body {\n      font-family: 'Times New Roman', serif;\n      line-height: 1.4;\n      margin: 40px;\n      background: white;\n      color: #000;\n    }\n    h1, h2, h3, h4, h5, h6 {\n      color: #1f2937;\n      margin-top: 1.5em;\n      margin-bottom: 0.5em;\n    }\n    p {\n      margin-bottom: 1em;\n    }\n    table {\n      border-collapse: collapse;\n      width: 100%;\n      margin: 1em 0;\n    }\n    th, td {\n      border: 1px solid #ccc;\n      padding: 8px;\n      text-align: left;\n    }\n    th {\n      background-color: #f5f5f5;\n      font-weight: bold;\n    }\n    .field-highlight {\n      background: #dbeafe !important;\n      color: #1e40af !important;\n      padding: 2px 6px !important;\n      border-radius: 3px !important;\n      font-weight: 600 !important;\n      border: 1px solid #93c5fd !important;\n    }\n  </style>\n</head>\n<body>\n  <div style=\"margin-bottom: 20px; padding: 10px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 6px;\">\n    <strong>\ud83d\udcc4 N\xe1hled DOCX \u0161ablony:</strong> ").concat(t||"Bez n\xe1zvu","<br>\n    <small>Pole jsou zv\xfdrazn\u011bna mod\u0159e s uk\xe1zkov\xfdmi hodnotami podle typu</small>\n  </div>\n  ").concat(p,"\n</body>\n</html>"),m=new Blob([u],{type:"text/html"}),g=URL.createObjectURL(m);return window.open(g,"_blank"),setTimeout(()=>URL.revokeObjectURL(g),1e3),console.log("\u2705 HTML n\xe1hled vygenerov\xe1n: ".concat(c.stats.replacedCount," pol\xed nahrazeno (v\u010detn\u011b ").concat(Object.keys(s).length-Object.keys(e).length," slo\u017een\xfdch pol\xed)")),{success:!0,stats:c.stats,enhancedMapping:s}}catch(r){throw console.error("\u274c Chyba p\u0159i generov\xe1n\xed HTML n\xe1hledu:",r),r}},pe=async n=>{console.log("\ud83d\udc41\ufe0f Zahajuji preview \u0161ablony z tabulky:",n);const e=n.docx_mapping||n.mapovani_json;if(e&&("string"===typeof e?"{}"!==e:Object.keys(e).length>0))try{x(30);const t=await(0,G.F_)({token:c,username:null===p||void 0===p?void 0:p.username,id:n.id,fileName:n.nazev_souboru||"template.docx"});if(!t)throw new Error("Nepoda\u0159ilo se st\xe1hnout soubor \u0161ablony");console.log("\ud83d\udcc4 Soubor p\u0159ipraven pro preview:",{name:t.name,size:t.size,type:t.type}),x(60);let r=e;if("string"===typeof r)try{r=JSON.parse(r)}catch(o){console.warn("\u26a0\ufe0f Nepoda\u0159ilo se parsovat mapov\xe1n\xed z stringu:",o),r={}}await ce(t,r,n.nazev),g("\u2705 N\xe1hled otev\u0159en v nov\xe9 z\xe1lo\u017ece","success")}catch(t){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed n\xe1hledu:",t),g("Chyba p\u0159i na\u010d\xedt\xe1n\xed n\xe1hledu: ".concat(t.message),"error")}finally{x(!1)}else g("\u26a0\ufe0f \u0160ablona nem\xe1 definovan\xe9 mapov\xe1n\xed pol\xed. Nejd\u0159\xedve upravte \u0161ablonu a namapujte pole.","warning")},ue=n=>{nn(!0),tn(n);let e={};try{const o=n.mapovani_json||n.docx_mapping;o?(e="string"===typeof o?JSON.parse(o):o,Object.keys(e).length>0&&jn(!0)):jn(!1)}catch(a){console.error("\u274c Chyba p\u0159i parsov\xe1n\xed DOCX mapov\xe1n\xed:",a),e={},jn(!1)}let o="";n.mapovani_json?o="string"===typeof n.mapovani_json?n.mapovani_json:JSON.stringify(n.mapovani_json,null,2):Object.keys(e).length>0&&(o=JSON.stringify(e,null,2));const t={file:null,nazev:n.nazev||"",popis:n.popis||"",typ_dokumentu:n.typ_dokumentu||"",aktivni:1===n.aktivni||"1"===n.aktivni||!0===n.aktivni,verze:n.verze||"1.0",castka:void 0!==n.castka&&null!==n.castka?n.castka:"",platnost_od:n.platnost_od||"",platnost_do:n.platnost_do||"",mapovani_json:o,docx_mapping:e};Gn(t),J(!0);const r=fn[n.id];"ok"===(null===r||void 0===r?void 0:r.status)?be(n):(yn(null),e&&Object.keys(e).length>0?(jn(!0),console.log("\ud83d\udcdd Zobrazuji mapovac\xed sekci s existuj\xedc\xedm mapov\xe1n\xedm bez DOCX souboru")):(jn(!1),console.log("\ud83d\udcdd DOCX soubor nen\xed k dispozici na disku, mapov\xe1n\xed nebude zobrazeno")))},me=n=>{sn(n),an(!0)},ge=async n=>{try{bn(e=>(0,T.A)((0,T.A)({},e),{},{[n.id]:{status:"checking"}})),console.log("\ud83d\udd0d DOCX Template Verify Single:",{templateId:n.id,templateName:n.nazev,username:null===p||void 0===p?void 0:p.username});const e=await b.verifySingle(c,n.id);if("ok"!==e.status||!e.data)throw new Error(e.error||e.message||"Chyba p\u0159i verifikaci \u0161ablony");{const o=e.data,t=o.file_exists?"ok":"error",r=o.file_exists?null:"Soubor neexistuje na disku";bn(e=>(0,T.A)((0,T.A)({},e),{},{[n.id]:{status:t,error:r}}))}}catch(e){console.error("Template verify error:",e),bn(o=>(0,T.A)((0,T.A)({},o),{},{[n.id]:{status:"error",error:e.message}})),g("\u274c Chyba p\u0159i verifikaci: ".concat(e.message),"error")}},he=n=>{var e;if(Wn.file||vn)return $n(n),void Nn(!0);null===(e=document.getElementById(n))||void 0===e||e.click()},xe=n=>{n.name.toLowerCase().endsWith(".docx")?n.size>10485760?g("Soubor je p\u0159\xedli\u0161 velk\xfd (max 10MB)","error"):fe(n):g("Pouze DOCX soubory jsou povoleny","error")},fe=n=>{const e=(n=>{if(!n||!dn.length)return"";const e=n.toLowerCase(),o={objednavka:["objednavka","objednavku","order","zakzka"],faktura:["faktura","fakturu","invoice","ucet"],smlouva:["smlouva","smlouvu","contract","dohoda"],protokol:["protokol","meeting","zasedani","vysledek"],kosilka:["kosilka","obal","cover"],schvaleni:["schvaleni","approval","potvrzeni"],jine:["ostatni","other","misc"]};for(const t of dn){if(!t.value)continue;const n=t.label.toLowerCase(),r=t.value.toLowerCase();if(e.includes(n)||e.includes(r))return t.value;const a=o[r]||[];for(const o of a)if(e.includes(o))return t.value}return""})(n.name);if(Gn(o=>(0,T.A)((0,T.A)({},o),{},{file:n,nazev:o.nazev||n.name.replace(/\.docx$/i,""),typ_dokumentu:o.typ_dokumentu||e,json_mapovani:{}})),Q&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===n.type){jn(!0),console.log("\ud83d\udd04 Automaticky aktualizuji pole po v\xfdb\u011bru nov\xe9ho souboru v edit m\xf3du");try{Promise.resolve().then(o.bind(o,5647)).then(e=>{let{extractDocxFields:o}=e;o(n).then(n=>{console.log("\ud83d\udd0d Extrahovan\xe1 pole z nov\xe9ho souboru:",n),g("\u2705 Pole \xfasp\u011b\u0161n\u011b aktualizov\xe1na z nov\xe9ho souboru","success")}).catch(n=>{console.error("\u274c Chyba p\u0159i extrakci pol\xed:",n),g("\u26a0\ufe0f Nepoda\u0159ilo se extrahovat pole z nov\xe9ho souboru","warning")})})}catch(t){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed DOCX procesoru:",t)}}},be=async n=>{try{const e=await(0,G.F_)({token:c,username:(null===p||void 0===p?void 0:p.username)||"system",id:n.id,fileName:n.nazev_souboru||"".concat(n.nazev,".docx")});return yn(e),jn(!0),e}catch(e){return console.error("\u274c Chyba p\u0159i stahov\xe1n\xed DOCX souboru:",e),yn(null),jn(!1),g("Soubor nen\xed k dispozici pro anal\xfdzu: ".concat(e.message),"warning"),null}},ve=n=>{Gn(e=>(0,T.A)((0,T.A)({},e),{},{docx_mapping:n,mapovani_json:JSON.stringify(n,null,2)}))};return(0,en.jsxs)(dx,{children:[(0,en.jsxs)(cx,{children:[(0,en.jsxs)(ux,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat v n\xe1zvu \u0161ablony, typu, verzi, u\u017eivateli...",value:null!==$&&void 0!==$?$:"",onChange:n=>O(n.target.value)}),$&&(0,en.jsx)(zx,{onClick:()=>O(""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(px,{onClick:()=>{console.log("\u2795 Otev\xedr\xe1m modal pro p\u0159id\xe1n\xed nov\xe9 \u0161ablony"),nn(!1),tn(null),Gn((0,T.A)({},Xf)),yn(null),jn(!1),J(!0)},$primary:!0,children:[(0,en.jsx)(_.g,{icon:C.JmV}),"Nahr\xe1t \u0161ablonu"]})]}),(0,en.jsxs)(mx,{children:[(0,en.jsxs)(gx,{children:[(0,en.jsxs)("thead",{children:[ie.getHeaderGroups().map(n=>(0,en.jsx)(hx,{children:n.headers.map(n=>(0,en.jsx)(xx,{onClick:n.column.getCanSort()?n.column.getToggleSortingHandler():void 0,style:{cursor:n.column.getCanSort()?"pointer":"default"},children:(0,en.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.35rem"},children:[(0,U.Kv)(n.column.columnDef.header,n.getContext()),n.column.getCanSort()&&n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{fontSize:"0.75em",marginLeft:"0.25rem"}})]})},n.id))},n.id)),(0,en.jsx)(hx,{children:null===(n=ie.getHeaderGroups()[0])||void 0===n?void 0:n.headers.map(n=>(0,en.jsx)(xx,{style:{padding:"0.5rem",backgroundColor:"#f8f9fa",borderTop:"1px solid #e5e7eb"},children:"actions"===n.id?(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(_x,{onClick:()=>{R({}),L("all"),Z("all")},title:"Vymazat v\u0161echny filtry sloupc\u016f",disabled:0===Object.keys(M).length&&"all"===F&&"all"===V,children:(0,en.jsx)(_.g,{icon:C.IP$})})}):"disk_status"===n.id?(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(wx,{onClick:()=>{Z("all"===V?"ok":"ok"===V?"error":"all")},title:"all"===V?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr OK)":"ok"===V?"Zobrazeny pouze OK (klikn\u011bte pro filtr chyb)":"Zobrazeny pouze chyby (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===V?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.MBK,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#059669"}}),(0,en.jsx)(_.g,{icon:C.MBK,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"ok"===V?(0,en.jsx)(_.g,{icon:C.MBK,style:{color:"#059669"}}):(0,en.jsx)(_.g,{icon:C.MBK,style:{color:"#dc2626"}})})}):"aktivni"===n.column.columnDef.accessorKey?(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,en.jsx)(wx,{onClick:()=>{L("all"===F?"aktivni":"aktivni"===F?"neaktivni":"all")},title:"all"===F?"Zobrazeny v\u0161echny (klikn\u011bte pro filtr aktivn\xedch)":"aktivni"===F?"Zobrazeny pouze aktivn\xed (klikn\u011bte pro filtr neaktivn\xedch)":"Zobrazeny pouze neaktivn\xed (klikn\u011bte pro zobrazen\xed v\u0161ech)",children:"all"===F?(0,en.jsxs)("div",{style:{position:"relative",width:"20px",height:"20px"},children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{position:"absolute",left:0,top:0,clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)",color:"#16a34a"}}),(0,en.jsx)(_.g,{icon:C.s0Q,style:{position:"absolute",left:0,top:0,clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)",color:"#dc2626"}})]}):"aktivni"===F?(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#16a34a"}}):(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626"}})})}):(0,en.jsxs)(kx,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(jx,{type:"text",placeholder:"Hledat...",value:M[n.column.columnDef.accessorKey]||"",onChange:e=>{const o=(0,T.A)({},M);e.target.value?o[n.column.columnDef.accessorKey]=e.target.value:delete o[n.column.columnDef.accessorKey],R(o)}}),M[n.column.columnDef.accessorKey]&&(0,en.jsx)(Ax,{onClick:()=>{const e=(0,T.A)({},M);delete e[n.column.columnDef.accessorKey],R(e)},title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]})},"filter-".concat(n.id)))})]}),(0,en.jsx)("tbody",{children:0===ie.getRowModel().rows.length?(0,en.jsx)("tr",{children:(0,en.jsx)(bx,{colSpan:te.length,children:(0,en.jsxs)(Ex,{children:[(0,en.jsx)(_.g,{icon:C.W1P,size:"3x",style:{marginBottom:"1rem",color:"#d1d5db"}}),(0,en.jsx)("h3",{children:"\u017d\xe1dn\xe9 \u0161ablony"}),(0,en.jsx)("p",{children:"Zat\xedm nebyly nahr\xe1ny \u017e\xe1dn\xe9 DOCX \u0161ablony."})]})})}):ie.getRowModel().rows.map((n,e)=>(0,en.jsx)(fx,{$isEven:e%2===0,$isInactive:0===n.original.aktivni,children:n.getVisibleCells().map(n=>(0,en.jsx)(bx,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))})]}),(0,en.jsxs)(Cx,{children:[(0,en.jsxs)(Sx,{children:["Zobrazeno ",Math.min(Bn*Kn+1,D.length)," - ",Math.min((Bn+1)*Kn,D.length)," z ",D.length," \u0161ablon"]}),(0,en.jsxs)(Px,{children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(Ix,{value:Kn,onChange:n=>{const e=Number(n.target.value);Hn(e),Un(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(Dx,{onClick:()=>{Un(0)},disabled:0===Bn,children:"\xab\xab"}),(0,en.jsx)(Dx,{onClick:()=>{Un(n=>Math.max(0,n-1))},disabled:0===Bn,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",Bn+1," z ",Math.max(1,ie.getPageCount())]}),(0,en.jsx)(Dx,{onClick:()=>{Un(n=>Math.min(ie.getPageCount()-1,n+1))},disabled:Bn>=ie.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(Dx,{onClick:()=>{Un(ie.getPageCount()-1)},disabled:Bn>=ie.getPageCount()-1,children:"\xbb\xbb"})]})]})]}),B&&(0,Y.createPortal)((0,en.jsx)("div",{style:{position:"fixed",top:Pn?"0":"132px",left:"0",right:"0",bottom:Pn?"0":"60px",background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"1000",padding:Pn?"0":"1rem",cursor:"default"},children:(0,en.jsxs)("div",{onClick:n=>n.stopPropagation(),style:{background:"white",borderRadius:Pn?"0":"16px",width:Pn?"100vw":"100%",maxWidth:Pn?"none":!Q&&Wn.file&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===Wn.file.type||Q&&vn?"1464px":"900px",height:Pn?"100vh":"calc(100vh - 280px)",maxHeight:Pn?"none":"calc(100vh - 280px)",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:Pn?"none":"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",zIndex:"1001"},children:[(0,en.jsx)(Rx,{children:(0,en.jsxs)(Fx,{children:[(0,en.jsxs)(Lx,{children:[(0,en.jsx)(Tx,{children:Q?'Upravit \u0161ablonu "'.concat(null===on||void 0===on?void 0:on.nazev,'"'):"Nahr\xe1t novou \u0161ablonu"}),(0,en.jsx)(Vx,{children:"Nahrajte DOCX soubor a nastavte vlastnosti \u0161ablony"})]}),(0,en.jsx)(Zx,{onClick:()=>Dn(!Pn),children:(0,en.jsx)(_.g,{icon:Pn?C.gr3:C.pGo})})]})}),(0,en.jsxs)(_f,{onSubmit:async n=>{var e;n.preventDefault();const o=Q&&on,t=o?"editace":"nahr\xe1n\xed";console.log("\ud83d\udd27 Zahajuji ".concat(t," \u0161ablony:"),{isEditing:o,templateId:null===on||void 0===on?void 0:on.id,templateName:null===on||void 0===on?void 0:on.nazev,diskStatus:fn[null===on||void 0===on?void 0:on.id],hasNewFile:!!Wn.file});const r=[];if(o){const n=fn[on.id];"ok"===(null===n||void 0===n?void 0:n.status)||Wn.file||r.push("Soubor je povinn\xfd - p\u016fvodn\xed soubor neexistuje, mus\xedte nahr\xe1t nov\xfd")}else Wn.file||r.push("Soubor je povinn\xfd - vyberte DOCX soubor");if(null!==(e=Wn.nazev)&&void 0!==e&&e.trim()||r.push("N\xe1zev \u0161ablony je povinn\xfd"),Wn.typ_dokumentu||r.push("Typ dokumentu je povinn\xfd"),r.length>0)g("Vypl\u0148te povinn\xe1 pole:\n".concat(r.join("\n")),"error");else try{var a;let n;if(console.log("\ud83d\udd10 DocxSablonyTab ".concat(t.charAt(0).toUpperCase()+t.slice(1),":"),{username:(null===p||void 0===p?void 0:p.username)||"system",filename:null===(a=Wn.file)||void 0===a?void 0:a.name,hasToken:!!c,endpoint:"".concat(qf,o?"sablona_docx/update":"sablona_docx/create")}),o)if(Wn.file){const e=new FormData;if(e.append("file",Wn.file),e.append("nazev",Wn.nazev),e.append("popis",Wn.popis),e.append("typ_dokumentu",Wn.typ_dokumentu),e.append("aktivni",Wn.aktivni?"1":"0"),e.append("verze",Wn.verze),e.append("castka",Wn.castka||"0"),console.log("\ud83d\udcbe [DOCX Tab] Ukl\xe1d\xe1m \u010d\xe1stku (s nov\xfdm souborem):",Wn.castka),e.append("platnost_od",Wn.platnost_od),e.append("platnost_do",Wn.platnost_do),Wn.docx_mapping&&Object.keys(Wn.docx_mapping).length>0){const n=JSON.stringify(Wn.docx_mapping);e.append("mapovani_json",n),console.log("\ud83d\udcbe Ukl\xe1d\xe1m DOCX mapov\xe1n\xed (s nov\xfdm souborem) jako mapovani_json:",{mapping:Wn.docx_mapping,jsonString:n,fieldsCount:Object.keys(Wn.docx_mapping).length})}else console.log("\u26a0\ufe0f DOCX mapov\xe1n\xed je pr\xe1zdn\xe9 nebo neexistuje (s nov\xfdm souborem)"),e.append("mapovani_json",Wn.mapovani_json||"");n=await b.updateWithFile(c,on.id,e)}else{const e={nazev:Wn.nazev,popis:Wn.popis,typ_dokumentu:Wn.typ_dokumentu,aktivni:Wn.aktivni?1:0,verze:Wn.verze,castka:parseFloat(Wn.castka)||0,platnost_od:Wn.platnost_od,platnost_do:Wn.platnost_do,mapovani_json:Wn.mapovani_json};console.log("\ud83d\udcbe [DOCX Tab] Ukl\xe1d\xe1m \u010d\xe1stku (bez nov\xe9ho souboru):",e.castka,"p\u016fvodn\xed:",Wn.castka),Wn.docx_mapping&&Object.keys(Wn.docx_mapping).length>0?(e.docx_mapping=JSON.stringify(Wn.docx_mapping),console.log("\ud83d\udcbe Ukl\xe1d\xe1m DOCX mapov\xe1n\xed (bez souboru):",{mapping:Wn.docx_mapping,jsonString:e.docx_mapping,fieldsCount:Object.keys(Wn.docx_mapping).length})):console.log("\u26a0\ufe0f DOCX mapov\xe1n\xed je pr\xe1zdn\xe9 nebo neexistuje (bez souboru)"),console.log("\ud83d\udce4 Pos\xedl\xe1m updateData na backend:",e),console.log("\ud83d\udce4 castka v updateData:",e.castka,typeof e.castka),n=await b.update(c,on.id,e)}else{const e=new FormData;if(e.append("file",Wn.file),e.append("nazev",Wn.nazev),e.append("popis",Wn.popis),e.append("typ_dokumentu",Wn.typ_dokumentu),e.append("aktivni",Wn.aktivni?"1":"0"),e.append("verze",Wn.verze),e.append("castka",Wn.castka||"0"),console.log("\ud83d\udcbe [DOCX Tab] Ukl\xe1d\xe1m \u010d\xe1stku (p\u0159i vytvo\u0159en\xed):",Wn.castka),e.append("platnost_od",Wn.platnost_od),e.append("platnost_do",Wn.platnost_do),Wn.docx_mapping&&Object.keys(Wn.docx_mapping).length>0){const n=JSON.stringify(Wn.docx_mapping);e.append("mapovani_json",n),console.log("\ud83d\udcbe Ukl\xe1d\xe1m DOCX mapov\xe1n\xed (p\u0159i vytvo\u0159en\xed) jako mapovani_json:",{mapping:Wn.docx_mapping,jsonString:n,fieldsCount:Object.keys(Wn.docx_mapping).length})}else console.log("\u26a0\ufe0f DOCX mapov\xe1n\xed je pr\xe1zdn\xe9 nebo neexistuje (p\u0159i vytvo\u0159en\xed)"),e.append("mapovani_json",Wn.mapovani_json||"");n=await b.create(c,e)}if(console.log("\ud83d\udd25 DOCX ".concat(t.charAt(0).toUpperCase()+t.slice(1)," Result:"),n),"ok"===n.status)g(o?'\u2705 \u0160ablona "'.concat(Wn.nazev,'" byla \xfasp\u011b\u0161n\u011b aktualizov\xe1na'):"\u2705 \u0160ablona byla \xfasp\u011b\u0161n\u011b nahr\xe1na","success"),J(!1),nn(!1),tn(null),Gn((0,T.A)({},Xf)),A();else{if(!n.htmlContent)throw new Error(n.error||"Chyba p\u0159i ".concat(t));console.error("\ud83d\udd25 Server vr\xe1til HTML:",n.htmlContent),g("\u274c Server Error (".concat(n.status,"): ").concat(n.htmlContent.substring(0,500),"..."),"error")}}catch(i){console.error("\ud83d\udd25 ".concat(t.charAt(0).toUpperCase()+t.slice(1)," error (full):"),i),i.response?(console.error("\ud83d\udd25 Response status:",i.response.status),console.error("\ud83d\udd25 Response headers:",i.response.headers),console.error("\ud83d\udd25 Response data:",i.response.data),g("\u274c Server Error (".concat(i.response.status,"): ").concat(JSON.stringify(i.response.data)),"error")):i.message&&i.message.includes("Failed to fetch")?g("\u274c S\xed\u0165ov\xe1 chyba: Server neodpov\xedd\xe1 nebo je nedostupn\xfd","error"):g("\u274c ".concat(t.charAt(0).toUpperCase()+t.slice(1)," Error: ").concat(i.message||"Nezn\xe1m\xe1 chyba"),"error")}},children:[(0,en.jsx)(Kx,{children:(0,en.jsxs)(Hx,{$hasMapping:!Q&&Wn.file&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===Wn.file.type||Q&&vn,children:[(0,en.jsx)(Bx,{children:(0,en.jsxs)(mf,{children:[(0,en.jsx)(gf,{children:(0,en.jsxs)(jf,{children:[(0,en.jsx)(Af,{children:"\ud83d\udcc4"}),(0,en.jsx)(zf,{children:"Detail \u0161ablony"})]})}),(0,en.jsxs)(hf,{children:[Q&&on&&(0,en.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#f8fafc",borderRadius:"6px",border:"1px solid #e2e8f0",fontSize:"0.8rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,en.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[on.nazev_souboru&&(0,en.jsx)("span",{style:{fontSize:"1rem",cursor:"help"},title:"ok"===(null===(e=fn[on.id])||void 0===e?void 0:e.status)?"Soubor existuje na disku":"error"===(null===(t=fn[on.id])||void 0===t?void 0:t.status)?"Soubor neexistuje na disku":"Stav souboru neov\u011b\u0159en",children:"ok"===(null===(r=fn[on.id])||void 0===r?void 0:r.status)?"\u2705":"error"===(null===(a=fn[on.id])||void 0===a?void 0:a.status)?"\u274c":"\u2753"}),(0,en.jsx)("strong",{children:"Aktu\xe1ln\xed:"})]}),"ok"===(null===(i=fn[on.id])||void 0===i?void 0:i.status)&&(0,en.jsx)("button",{type:"button",onClick:()=>{Tn(!0)},style:{padding:"4px 8px",fontSize:"0.875rem",color:"#6b7280",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},title:"Odstranit aktu\xe1ln\xed soubor",children:(0,en.jsx)(_.g,{icon:C.yLS})})]}),(0,en.jsx)("div",{style:{paddingLeft:"1.5rem",color:"#374151",fontSize:"0.9rem"},children:on.nazev_souboru||"N/A"}),(0,en.jsxs)("div",{style:{paddingLeft:"0.5rem",paddingRight:"0.5rem",marginTop:"8px"},children:[(0,en.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"4px"},children:Wn.file&&(0,en.jsxs)("button",{type:"button",onClick:()=>{Gn(n=>(0,T.A)((0,T.A)({},n),{},{file:null})),jn(!1)},style:{padding:"2px 6px",fontSize:"9px",color:"#dc2626",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"2px",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#fee2e2",n.currentTarget.style.borderColor="#f87171"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="#fef2f2",n.currentTarget.style.borderColor="#fecaca"},children:[(0,en.jsx)(_.g,{icon:C.yLS}),"Odstranit"]})}),(0,en.jsx)(Df,{onClick:()=>{he("fileInput")},onDragOver:n=>{n.preventDefault(),n.stopPropagation(),Sn(!0)},onDragLeave:n=>{n.preventDefault(),n.stopPropagation(),Sn(!1)},onDrop:n=>{n.preventDefault(),n.stopPropagation(),Sn(!1);const e=Array.from(n.dataTransfer.files).find(n=>n.name.endsWith(".docx"));e&&xe(e)},style:{cursor:"pointer",width:"100%",height:"50px",backgroundColor:Cn?"#f0f9ff":Wn.file?"#f0fdf4":"#f9fafb",border:Cn?"2px dashed #3b82f6":Wn.file?"1px solid #bbf7d0":"1px dashed #d1d5db",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",textAlign:"center",transition:"all 0.2s ease"},children:(0,en.jsx)("div",{style:{lineHeight:"1.2"},children:Wn.file?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("div",{style:{color:"#059669",fontSize:"12px",marginBottom:"2px"},children:[(0,en.jsx)(_.g,{icon:C.W1P}),(0,en.jsx)("span",{style:{marginLeft:"4px",fontSize:"10px",fontWeight:"500"},children:Wn.file.name})]}),(0,en.jsxs)("small",{style:{color:"#6b7280",fontSize:"9px"},children:["(",(Wn.file.size/1024/1024).toFixed(1)," MB)"]})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("div",{style:{fontSize:"10px",fontWeight:"500",marginBottom:"2px"},children:"Klikn\u011bte pro p\u0159id\xe1n\xed nebo v\xfdm\u011bnu DOCX \u0161ablony"}),(0,en.jsx)("small",{style:{color:"#6b7280",fontSize:"9px"},children:"(max 10MB)"})]})})}),(0,en.jsx)("input",{id:"fileInput",type:"file",accept:".docx",multiple:!1,style:{display:"none"},onChange:n=>{var e;const o=null===(e=n.target.files)||void 0===e?void 0:e[0];o&&(xe(o),n.target.value="")}})]})]}),(0,en.jsxs)(Wx,{children:[(0,en.jsx)("div",{style:{display:"flex",gap:"1rem",alignItems:"start"},children:(0,en.jsxs)(xf,{style:{flex:"1"},children:[(0,en.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,en.jsx)(ff,{required:!0,children:"N\xe1zev \u0161ablony"}),(0,en.jsxs)(kf,{children:[(0,en.jsx)("input",{type:"checkbox",checked:Wn.aktivni,onChange:n=>Gn(e=>(0,T.A)((0,T.A)({},e),{},{aktivni:n.target.checked}))}),"Aktivn\xed"]})]}),(0,en.jsxs)(bf,{children:[(0,en.jsx)(S.A,{size:16}),(0,en.jsx)(vf,{type:"text",value:Wn.nazev,onChange:n=>Gn(e=>(0,T.A)((0,T.A)({},e),{},{nazev:n.target.value})),required:!0,placeholder:"nap\u0159. Smlouva o d\xedlo, Faktura za slu\u017eby, Pracovn\xed smlouva..."})]})]})}),(0,en.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,en.jsxs)(xf,{style:{flex:"1"},children:[(0,en.jsxs)(ff,{required:!0,children:["Typ dokumentu ",pn&&"(na\u010d\xedt\xe1 se...)"]}),(0,en.jsx)(Yf,{value:Wn.typ_dokumentu,onChange:n=>Gn(e=>(0,T.A)((0,T.A)({},e),{},{typ_dokumentu:n})),options:dn.map(n=>({value:n.value,label:n.label})),placeholder:"Vyberte typ dokumentu...",icon:(0,en.jsx)(mp.A,{size:16}),disabled:pn,field:"typ_dokumentu"})]}),(0,en.jsxs)(xf,{style:{flex:"0 0 75px"},children:[(0,en.jsx)(ff,{children:"Verze"}),(0,en.jsxs)(bf,{children:[(0,en.jsx)(gp.A,{size:16}),(0,en.jsx)(vf,{type:"text",value:Wn.verze,onChange:n=>Gn(e=>(0,T.A)((0,T.A)({},e),{},{verze:n.target.value})),placeholder:"1.0",style:{textAlign:"center"}})]})]}),(0,en.jsxs)(xf,{style:{flex:"0 0 120px"},children:[(0,en.jsx)(ff,{children:"\u010c\xe1stka"}),(0,en.jsxs)(bf,{children:[(0,en.jsx)(P.A,{size:16}),(0,en.jsxs)("div",{style:{position:"relative"},children:[(0,en.jsx)(vf,{type:"text",className:"no-spinner",value:Wn.castka?new Intl.NumberFormat("cs-CZ").format(Wn.castka):"",onChange:n=>{const e=n.target.value.replace(/[^\d.,]/g,"").replace(",",".");Gn(n=>(0,T.A)((0,T.A)({},n),{},{castka:e}))},onBlur:n=>{const e=n.target.value.replace(/[^\d.,]/g,"").replace(",","."),o=parseFloat(e);isNaN(o)?""===e&&Gn(n=>(0,T.A)((0,T.A)({},n),{},{castka:""})):Gn(n=>(0,T.A)((0,T.A)({},n),{},{castka:o.toString()}))},placeholder:"nap\u0159. 25 000",style:{textAlign:"right",paddingRight:"35px"}}),(0,en.jsx)("span",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",color:"#6b7280",fontSize:"14px",pointerEvents:"none"},children:"K\u010d"})]})]})]})]})]}),!Q&&(0,en.jsxs)("div",{style:{marginTop:"16px"},children:[(0,en.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"8px"},children:Wn.file&&(0,en.jsxs)("button",{type:"button",onClick:()=>{Gn(n=>(0,T.A)((0,T.A)({},n),{},{file:null})),jn(!1)},style:{padding:"4px 8px",fontSize:"10px",color:"#dc2626",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#fee2e2",n.currentTarget.style.borderColor="#f87171"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="#fef2f2",n.currentTarget.style.borderColor="#fecaca"},children:[(0,en.jsx)(_.g,{icon:C.yLS}),"Odstranit"]})}),(0,en.jsx)(Df,{onClick:()=>{he("fileInputCreate")},onDragOver:n=>{n.preventDefault(),n.stopPropagation(),Sn(!0)},onDragLeave:n=>{n.preventDefault(),n.stopPropagation(),Sn(!1)},onDrop:n=>{n.preventDefault(),n.stopPropagation(),Sn(!1);const e=Array.from(n.dataTransfer.files).find(n=>n.name.endsWith(".docx"));e&&xe(e)},style:{cursor:"pointer",width:"100%",height:"60px",backgroundColor:Cn?"#f0f9ff":Wn.file?"#f0fdf4":"#f9fafb",border:Cn?"2px dashed #3b82f6":Wn.file?"1px solid #bbf7d0":"1px dashed #d1d5db",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",padding:"12px",textAlign:"center",transition:"all 0.2s ease"},children:(0,en.jsx)("div",{style:{lineHeight:"1.3"},children:Wn.file?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("div",{style:{color:"#059669",fontSize:"14px",marginBottom:"4px"},children:[(0,en.jsx)(_.g,{icon:C.W1P}),(0,en.jsx)("span",{style:{marginLeft:"6px",fontSize:"11px",fontWeight:"500"},children:Wn.file.name})]}),(0,en.jsxs)("small",{style:{color:"#6b7280",fontSize:"10px"},children:["(",(Wn.file.size/1024/1024).toFixed(1)," MB)"]})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("div",{style:{fontSize:"11px",fontWeight:"500",marginBottom:"4px"},children:"Klikn\u011bte pro p\u0159id\xe1n\xed nebo v\xfdm\u011bnu DOCX \u0161ablony"}),(0,en.jsx)("small",{style:{color:"#6b7280",fontSize:"10px"},children:"(max 10MB)"})]})})}),(0,en.jsx)("input",{id:"fileInputCreate",type:"file",accept:".docx",multiple:!1,style:{display:"none"},onChange:n=>{var e;const o=null===(e=n.target.files)||void 0===e?void 0:e[0];o&&(xe(o),n.target.value="")}})]}),(0,en.jsxs)(xf,{children:[(0,en.jsx)(ff,{children:"Popis"}),(0,en.jsxs)(bf,{hasTextarea:!0,children:[(0,en.jsx)(S.A,{size:16}),(0,en.jsx)(yf,{value:Wn.popis,onChange:n=>Gn(e=>(0,T.A)((0,T.A)({},e),{},{popis:n.target.value})),placeholder:"nap\u0159. \u0160ablona pro smlouvy o d\xedlo s dodavateli, Fakturace za poskytnut\xe9 slu\u017eby, Pracovn\xed smlouvy na dobu ur\u010ditou...",style:{minHeight:"50px",paddingLeft:"2rem"}})]})]}),(0,en.jsxs)(Gx,{children:[(0,en.jsxs)(Yx,{children:[(0,en.jsxs)(Jx,{children:[(0,en.jsx)(_.g,{icon:C.jTw}),"JSON"]}),(0,en.jsxs)(qx,{children:[(0,en.jsx)(Xx,{type:"button",onClick:vn&&Wn.docx_mapping&&Object.keys(Wn.docx_mapping).length>0?async()=>{if(vn&&Wn.docx_mapping&&0!==Object.keys(Wn.docx_mapping).length)try{Fn(!0),await ce(vn,Wn.docx_mapping,Wn.nazev),g("\u2705 N\xe1hled otev\u0159en v nov\xe9 z\xe1lo\u017ece","success")}catch(n){console.error("\u274c Chyba p\u0159i generov\xe1n\xed n\xe1hledu:",n),g("Chyba p\u0159i generov\xe1n\xed n\xe1hledu: ".concat(n.message),"error")}finally{Fn(!1)}else g("\u26a0\ufe0f Pro n\xe1hled je pot\u0159eba DOCX soubor a definovan\xe9 mapov\xe1n\xed","warning")}:void 0,disabled:Rn||!vn||!Wn.docx_mapping||0===Object.keys(Wn.docx_mapping).length,title:Rn?"Generuje se n\xe1hled...":vn?Wn.docx_mapping&&0!==Object.keys(Wn.docx_mapping).length?"Zobrazit n\xe1hled dokumentu s vybran\xfdmi daty":"N\xe1hled nen\xed dostupn\xfd - chyb\xed mapov\xe1n\xed pol\xed":"N\xe1hled nen\xed dostupn\xfd - chyb\xed DOCX soubor",children:(0,en.jsx)(_.g,{icon:Rn?C.OtC:C.pS3,spin:Rn})}),(0,en.jsx)(Xx,{type:"button",onClick:async()=>{const n=Wn.mapovani_json||JSON.stringify(Wn.docx_mapping||{},null,2);try{await navigator.clipboard.writeText(n),zn(!0),setTimeout(()=>zn(!1),2e3),g("JSON mapov\xe1n\xed zkop\xedrov\xe1no","success")}catch(e){console.error("Chyba p\u0159i kop\xedrov\xe1n\xed:",e),g("Chyba p\u0159i kop\xedrov\xe1n\xed JSON","error")}},title:An?"JSON bylo zkop\xedrov\xe1no do schr\xe1nky!":"Kop\xedrovat JSON mapov\xe1n\xed do schr\xe1nky",children:(0,en.jsx)(_.g,{icon:An?C.e68:C.jPR})})]})]}),(0,en.jsx)(Qx,{children:(0,en.jsxs)(ef,{children:[(0,en.jsx)(of,{dangerouslySetInnerHTML:{__html:Jf(Wn.mapovani_json||JSON.stringify(Wn.docx_mapping||{},null,2))}}),(0,en.jsx)(nf,{value:Wn.mapovani_json||JSON.stringify(Wn.docx_mapping||{},null,2),onChange:n=>{Gn(e=>(0,T.A)((0,T.A)({},e),{},{mapovani_json:n.target.value}));try{const e=JSON.parse(n.target.value);Gn(n=>(0,T.A)((0,T.A)({},n),{},{docx_mapping:e}))}catch(e){}},onScroll:n=>{const e=n.target.parentElement.querySelector("pre");e&&(e.scrollTop=n.target.scrollTop,e.scrollLeft=n.target.scrollLeft)},placeholder:'{\n  "EVIDENCNI_CISLO": "cislo_objednavky",\n  "DNAZEV": "dodavatel_nazev + dodavatel_kontakt_jmeno",\n  "CENA_BEZDPH": "ev_cislo_objednavky"\n}',spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",style:{caretColor:"#1e293b"}})]})}),Vn&&(0,en.jsxs)(en.Fragment,{children:[Vn.totalFields>0&&(0,en.jsxs)(uf,{$valid:Vn.valid,children:[(0,en.jsx)("div",{children:Vn.valid?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#059669",marginRight:"0.5rem"}}),(0,en.jsx)("strong",{children:"Mapping je v po\u0159\xe1dku"})," - ",Vn.validFields,"/",Vn.totalFields," pol\xed validn\xedch"]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.s0Q,style:{color:"#dc2626",marginRight:"0.5rem"}}),(0,en.jsx)("strong",{children:"Nalezeny probl\xe9my"})," - ",Vn.errors.length," chyb, ",Vn.warnings.length," varov\xe1n\xed"]})}),!Vn.valid&&Vn.errors.some(n=>"deprecated"===n.type)&&(0,en.jsxs)(pf,{onClick:()=>{try{const n=function(n){const e=(0,T.A)({},n);return Object.entries(n).forEach(n=>{let[o,t]=n;tu[t]&&(e[o]=tu[t].newPath)}),e}(Wn.docx_mapping||JSON.parse(Wn.mapovani_json||"{}")),e=JSON.stringify(n,null,2);Gn(o=>(0,T.A)((0,T.A)({},o),{},{docx_mapping:n,mapovani_json:e})),g("\u2705 Mapping byl automaticky opraven","success")}catch(n){g("\u274c Chyba p\u0159i oprav\u011b mappingu: "+n.message,"error")}},children:[(0,en.jsx)(_.g,{icon:C.VNe}),"Automaticky opravit"]})]}),Vn.errors.length>0&&(0,en.jsxs)(tf,{$type:"error",children:[(0,en.jsxs)(rf,{$type:"error",children:[(0,en.jsx)(_.g,{icon:C.s0Q}),"Chyby v mappingu (",Vn.errors.length,")"]}),(0,en.jsx)(af,{children:Vn.errors.map((n,e)=>(0,en.jsxs)(lf,{$type:"error",children:[(0,en.jsx)(sf,{children:(0,en.jsxs)("span",{children:["Pole: ",(0,en.jsx)("code",{children:n.docxField})]})}),(0,en.jsxs)(df,{children:["deprecated"===n.type&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("div",{children:["\u274c Zastaral\xe1 cesta: ",(0,en.jsx)("code",{children:n.apiPath})]}),(0,en.jsxs)("div",{style:{marginTop:"0.25rem",color:"#374151"},children:["\ud83d\udca1 ",n.reason]}),n.suggestion&&(0,en.jsxs)(cf,{children:["\u2705 Pou\u017eijte: ",(0,en.jsx)("strong",{children:n.suggestion})]})]}),"invalid"===n.type&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("div",{children:["\u274c Neplatn\xe1 cesta: ",(0,en.jsx)("code",{children:n.apiPath})]}),(0,en.jsx)("div",{style:{marginTop:"0.25rem",color:"#374151"},children:"\ud83d\udca1 Toto pole neexistuje v enriched API struktu\u0159e"})]}),"parse"===n.type&&(0,en.jsxs)("div",{children:["\u274c ",n.message]})]})]},e))})]}),Vn.warnings.length>0&&(0,en.jsxs)(tf,{$type:"warning",children:[(0,en.jsxs)(rf,{$type:"warning",children:[(0,en.jsx)(_.g,{icon:C.iW_}),"Varov\xe1n\xed (",Vn.warnings.length,")"]}),(0,en.jsx)(af,{children:Vn.warnings.map((n,e)=>(0,en.jsxs)(lf,{$type:"warning",children:[(0,en.jsx)(sf,{children:(0,en.jsxs)("span",{children:["Pole: ",(0,en.jsx)("code",{children:n.docxField})]})}),(0,en.jsxs)(df,{children:["\u26a0\ufe0f ",n.message]})]},e))})]})]})]})]})]})}),(0,en.jsxs)(Ux,{$visible:!Q&&Wn.file&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===Wn.file.type||Q&&(vn||kn&&Object.keys(Wn.docx_mapping||{}).length>0),children:[!Q&&Wn.file&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===Wn.file.type&&(0,en.jsx)(xg,{file:Wn.file,mapping:Wn.docx_mapping||{},onMappingChange:ve,expanded:!0,onExpandChange:()=>{},style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},token:c,username:null===p||void 0===p?void 0:p.username,sampleOrderId:1,useDynamicFields:!0}),Q&&vn&&(0,en.jsx)(xg,{file:vn,mapping:Wn.docx_mapping||{},onMappingChange:ve,expanded:kn,onExpandChange:jn,style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},token:c,username:null===p||void 0===p?void 0:p.username,sampleOrderId:1,useDynamicFields:!0}),Q&&!vn&&kn&&Object.keys(Wn.docx_mapping||{}).length>0&&(0,en.jsxs)("div",{style:{padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f8fafc",flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",color:"#6b7280",fontSize:"0.9rem"},children:[(0,en.jsx)(_.g,{icon:C.iW_}),(0,en.jsx)("span",{children:"Existuj\xedc\xed mapov\xe1n\xed pol\xed (bez DOCX souboru pro anal\xfdzu)"})]}),(0,en.jsx)("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"6px",border:"1px solid #e5e7eb",flex:1,overflow:"auto"},children:(0,en.jsx)("pre",{style:{margin:0,fontSize:"0.8rem",color:"#374151",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(Wn.docx_mapping,null,2)})})]})]})]})}),(0,en.jsxs)(wf,{children:[(0,en.jsxs)(Cf,{children:[(0,en.jsx)(_.g,{icon:C.JmV}),"P\u0159ipraveno k nahr\xe1n\xed"]}),(0,en.jsxs)(Sf,{children:[(0,en.jsxs)(Pf,{type:"button",className:"cancel",onClick:()=>{nn(!1),tn(null),Dn(!1),Gn((0,T.A)({},Xf)),yn(null),jn(!1),_n(null),Mn(!1),Fn(!1),J(!1)},children:[(0,en.jsx)(_.g,{icon:C.GRI}),"Zru\u0161it"]}),(0,en.jsxs)(Pf,{type:"submit",className:"primary",disabled:!Wn.nazev||!Q&&!Wn.file||Q&&"error"===(null===(l=fn[null===on||void 0===on?void 0:on.id])||void 0===l?void 0:l.status)&&!Wn.file,children:[(0,en.jsx)(_.g,{icon:C.JmV}),Q?"Ulo\u017eit zm\u011bny":"Nahr\xe1t \u0161ablonu"]})]})]})]})]})}),document.body),(0,en.jsx)(Ri.A,{isOpen:rn,title:"Smazat \u0161ablonu \xfapln\u011b z disku",message:'Opravdu chcete \xdaPLN\u011a SMAZAT \u0161ablonu "'.concat(null===ln||void 0===ln?void 0:ln.nazev,'"?\n\n\u26a0\ufe0f POZOR: Tato akce je nevratn\xe1!\n\n\u2022 \u0160ablona bude odstran\u011bna z datab\xe1ze\n\u2022 Fyzick\xfd soubor bude smaz\xe1n z disku\n\u2022 V\u0161echny reference na tuto \u0161ablonu budou ztraceny\n\nPokra\u010dovat pouze pokud jste si jisti.'),confirmText:"Smazat \xfapln\u011b z disku",cancelText:"Zru\u0161it",onConfirm:async()=>{if(ln)try{console.log("\ud83d\uddd1\ufe0f DOCX Hard Delete Request:",{templateId:ln.id,templateName:ln.nazev,username:null===p||void 0===p?void 0:p.username,userRole:null===p||void 0===p?void 0:p.role});const n=await b.delete(c,ln.id);if(console.log("\ud83d\uddd1\ufe0f DOCX Hard Delete Result:",n),"ok"!==n.status)throw new Error(n.error||"Chyba p\u0159i maz\xe1n\xed");g("\u2705 \u0160ablona a soubor byly \xfasp\u011b\u0161n\u011b smaz\xe1ny z disku","success"),A()}catch(n){console.error("Delete error:",n),g(n.message||"Chyba p\u0159i maz\xe1n\xed \u0161ablony","error")}finally{an(!1),sn(null)}},onCancel:()=>{an(!1),sn(null)},variant:"danger"}),hn&&mn&&(0,en.jsx)(Ox,{onClick:()=>xn(!1),children:(0,en.jsxs)(Mx,{onClick:n=>n.stopPropagation(),children:[(0,en.jsxs)(Rx,{children:[(0,en.jsxs)(Tx,{children:[(0,en.jsx)(_.g,{icon:C.SGM}),"V\xfdsledky verifikace \u0161ablon"]}),(0,en.jsx)(Zx,{onClick:()=>xn(!1),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(Kx,{children:[(0,en.jsxs)(If,{children:[(0,en.jsxs)(Nf,{$status:mn.summary.integrity_ok?"success":"warning",children:[(0,en.jsx)(Ef,{children:"Celkov\xfd stav"}),(0,en.jsx)($f,{children:mn.summary.integrity_ok?"\u2705 V po\u0159\xe1dku":"\u26a0\ufe0f Probl\xe9my"})]}),(0,en.jsxs)(Nf,{children:[(0,en.jsx)(Ef,{children:"Celkem \u0161ablon"}),(0,en.jsx)($f,{children:mn.summary.total_templates})]}),(0,en.jsxs)(Nf,{$status:"success",children:[(0,en.jsx)(Ef,{children:"Platn\xe9 \u0161ablony"}),(0,en.jsx)($f,{children:mn.summary.valid_templates})]}),(0,en.jsxs)(Nf,{$status:mn.summary.missing_files>0?"error":"success",children:[(0,en.jsx)(Ef,{children:"Chyb\u011bj\xedc\xed soubory"}),(0,en.jsx)($f,{children:mn.summary.missing_files})]})]}),(0,en.jsxs)(Of,{children:[(0,en.jsxs)(Mf,{children:[(0,en.jsx)(Rf,{children:"\ud83d\udcc2 Upload adres\xe1\u0159"}),(0,en.jsx)(Ff,{children:mn.upload_directory}),(0,en.jsx)(Lf,{$ok:mn.directory_exists,children:mn.directory_exists?"\u2705 Existuje":"\u274c Neexistuje"}),(0,en.jsx)(Lf,{$ok:mn.directory_writable,children:mn.directory_writable?"\u2705 Zapisovateln\xfd":"\u274c Pouze \u010dten\xed"})]}),mn.summary.missing_files>0&&(0,en.jsxs)(Mf,{children:[(0,en.jsx)(Rf,{children:"\u26a0\ufe0f \u0160ablony s chyb\u011bj\xedc\xedmi soubory"}),null===(s=mn.templates)||void 0===s?void 0:s.filter(n=>!n.file_exists).map(n=>(0,en.jsxs)(Tf,{children:[(0,en.jsx)("strong",{children:n.nazev})," - chyb\xed soubor: ",n.cesta_souboru]},n.id))]}),(null===(d=mn.orphaned_files)||void 0===d?void 0:d.length)>0&&(0,en.jsxs)(Mf,{children:[(0,en.jsx)(Rf,{children:"\ud83d\uddc2\ufe0f Opu\u0161t\u011bn\xe9 soubory (nejsou v DB)"}),mn.orphaned_files.map((n,e)=>(0,en.jsx)(Tf,{children:n},e))]})]})]}),(0,en.jsx)(wf,{children:(0,en.jsx)(Pf,{type:"button",className:"primary",onClick:()=>xn(!1),children:"Zav\u0159\xedt"})})]})}),In&&(0,Y.createPortal)((0,en.jsx)("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"1020",padding:"1rem"},onClick:()=>Nn(!1),children:(0,en.jsxs)("div",{onClick:n=>n.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:"1021"},children:[(0,en.jsx)("h3",{style:{marginTop:0,marginBottom:"1rem",color:"#1f2937"},children:"Potvrdit v\xfdm\u011bnu souboru"}),(0,en.jsx)("p",{style:{marginBottom:"1.5rem",color:"#6b7280",lineHeight:"1.5"},children:"Nahr\xe1n\xedm nov\xe9ho souboru dojde k vyresetov\xe1n\xed sou\u010dasn\xe9ho mapov\xe1n\xed pol\xed. V\u0161echna nastaven\xe1 mapov\xe1n\xed mezi DOCX prom\u011bnn\xfdmi a datab\xe1zov\xfdmi poli budou ztracena."}),(0,en.jsx)("p",{style:{marginBottom:"1.5rem",color:"#6b7280",fontWeight:"500"},children:"P\u0159ejete si pokra\u010dovat?"}),(0,en.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,en.jsx)("button",{onClick:()=>{Nn(!1),$n(null)},style:{padding:"0.5rem 1rem",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",cursor:"pointer"},children:"Zru\u0161it"}),(0,en.jsx)("button",{onClick:()=>{var n;(Nn(!1),En)&&(null===(n=document.getElementById(En))||void 0===n||n.click(),$n(null))},style:{padding:"0.5rem 1rem",border:"none",borderRadius:"6px",background:"#dc2626",color:"white",cursor:"pointer"},children:"Pokra\u010dovat a resetovat mapov\xe1n\xed"})]})]})}),document.body),Ln&&(0,Y.createPortal)((0,en.jsx)(Ri.A,{isOpen:Ln,onConfirm:()=>{Tn(!1),(async n=>{try{console.log("\ud83d\uddd1\ufe0f Odstra\u0148uji soubor \u0161ablony:",n),await(0,G.nv)({token:c,username:(null===p||void 0===p?void 0:p.username)||"system",id:n.id}),await A()}catch(e){console.error("\u274c Chyba p\u0159i odstra\u0148ov\xe1n\xed souboru \u0161ablony:",e),g("Chyba p\u0159i odstra\u0148ov\xe1n\xed souboru: ".concat(e.message),"error")}})(on)},onCancel:()=>Tn(!1),title:"Odstranit soubor \u0161ablony",message:"Opravdu chcete odstranit aktu\xe1ln\xed soubor \u0161ablony? ".concat(Q?"Soubor bude smaz\xe1n i ze vzd\xe1len\xe9ho disku. ":"","V\u0161echna mapov\xe1n\xed budou ztracena a bude nutn\xe9 nahr\xe1t nov\xfd soubor."),confirmText:"Odstranit",cancelText:"Zru\u0161it",type:"danger"}),document.body)]})};var nb,eb,ob,tb,rb,ab,ib,lb,sb,db,cb,pb,ub,mb,gb,hb,xb,fb,bb,vb,yb,kb,jb,Ab,zb,wb,_b,Cb,Sb,Pb,Db,Ib,Nb,Eb,$b,Ob,Mb,Rb,Fb,Lb,Tb,Vb,Zb,Kb,Hb,Bb,Ub,Wb,Gb,Yb,Jb,qb,Xb,Qb,nv,ev,ov,tv,rv,av,iv,lv,sv,dv,cv,pv,uv,mv,gv,hv,xv=o(14459),fv=o(95680),bv=o(92382),vv=o(28646),yv=o(71360),kv=o(32575);const jv=(0,J.i7)(nb||(nb=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),Av=w.A.div(eb||(eb=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 2rem;\n  animation: fadeIn 0.15s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),zv=w.A.div(ob||(ob=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  width: 100%;\n  max-width: 1100px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow:\n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  animation: "," 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n  display: flex;\n  flex-direction: column;\n"])),jv),wv=w.A.div(tb||(tb=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n"]))),_v=w.A.h2(rb||(rb=(0,A.A)(["\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  letter-spacing: -0.01em;\n\n  svg {\n    width: 20px;\n    height: 20px;\n    opacity: 0.9;\n  }\n"]))),Cv=w.A.button(ab||(ab=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n"]))),Sv=w.A.div(ib||(ib=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 420px 1fr;\n  gap: 0;\n  flex: 1;\n  overflow: hidden;\n"]))),Pv=w.A.div(lb||(lb=(0,A.A)(["\n  padding: 2rem;\n  background: #f8fafc;\n  border-right: 1px solid #e2e8f0;\n  overflow-y: auto;\n"]))),Dv=w.A.div(sb||(sb=(0,A.A)(["\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  gap: 1rem;\n"]))),Iv=w.A.h3(db||(db=(0,A.A)(["\n  margin: 0 0 1.25rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #64748b;\n  }\n"]))),Nv=(w.A.div(cb||(cb=(0,A.A)(["\n  background: linear-gradient(135deg, #fef2f2 0%, #fff 100%);\n  border-left: 3px solid #ef4444;\n  border-radius: 8px;\n  padding: 0.875rem 1rem;\n  margin-bottom: 1.5rem;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n\n  svg {\n    width: 18px;\n    height: 18px;\n    color: #ef4444;\n    flex-shrink: 0;\n    margin-top: 0.125rem;\n  }\n"]))),w.A.div(pb||(pb=(0,A.A)(["\n  font-size: 0.8125rem;\n  color: #7f1d1d;\n  line-height: 1.5;\n\n  strong {\n    font-weight: 600;\n  }\n"]))),w.A.div(ub||(ub=(0,A.A)(["\n  margin-bottom: 1.5rem;\n"])))),Ev=w.A.div(mb||(mb=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n"]))),$v=w.A.label(gb||(gb=(0,A.A)(["\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  color: #1e293b;\n\n  svg {\n    width: 13px;\n    height: 13px;\n    color: #64748b;\n    margin-right: 0.375rem;\n    vertical-align: middle;\n  }\n"]))),Ov=w.A.input(hb||(hb=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    color: #94a3b8;\n    cursor: not-allowed;\n  }\n"])),n=>n.$error?"#f87171":"#e2e8f0"),Mv=w.A.textarea(xb||(xb=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n  resize: vertical;\n  min-height: 60px;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    color: #94a3b8;\n    cursor: not-allowed;\n  }\n"])),n=>n.$error?"#f87171":"#e2e8f0"),Rv=w.A.div(fb||(fb=(0,A.A)(["\n  flex: 1;\n  overflow-y: auto;\n  min-height: 200px;\n"]))),Fv=w.A.div(bb||(bb=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  margin-bottom: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover {\n    border-color: #cbd5e1;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Lv=w.A.div(vb||(vb=(0,A.A)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.875rem;\n  flex: 1;\n"]))),Tv=w.A.div(yb||(yb=(0,A.A)(["\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 600;\n  flex-shrink: 0;\n"]))),Vv=w.A.div(kb||(kb=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1;\n  min-width: 0;\n"]))),Zv=w.A.span(jb||(jb=(0,A.A)(["\n  font-weight: 600;\n  color: #0f172a;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Kv=w.A.span(Ab||(Ab=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;\n"]))),Hv=w.A.span(zb||(zb=(0,A.A)(["\n  padding: 0.25rem 0.625rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.02em;\n"]))),Bv=w.A.div(wb||(wb=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  flex-shrink: 0;\n"]))),Uv=(w.A.button(_b||(_b=(0,A.A)(["\n  background: ",";\n  border: 1px solid ",";\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.15s;\n  font-size: 0.75rem;\n  font-weight: 500;\n  white-space: nowrap;\n\n  &:hover {\n    border-color: ",";\n    transform: translateY(-1px);\n  }\n"])),n=>n.$isMain?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"white",n=>n.$isMain?"#10b981":"#e2e8f0",n=>n.$isMain?"white":"#64748b",n=>n.$isMain?"#059669":"#cbd5e1"),w.A.button(Cb||(Cb=(0,A.A)(["\n  background: white;\n  border: 1px solid #e2e8f0;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  color: #64748b;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n    border-color: #ef4444;\n    color: #ef4444;\n    transform: translateY(-1px);\n  }\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n"])))),Wv=w.A.button(Sb||(Sb=(0,A.A)(["\n  padding: 0.375rem 0.75rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  transition: all 0.15s;\n  white-space: nowrap;\n\n  &:hover {\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    border-color: #3b82f6;\n    color: #3b82f6;\n    transform: translateY(-1px);\n  }\n\n  svg {\n    width: 13px;\n    height: 13px;\n  }\n"]))),Gv=w.A.div(Pb||(Pb=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.625rem;\n"]))),Yv=w.A.div(Db||(Db=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n"]))),Jv=w.A.label(Ib||(Ib=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  font-weight: 500;\n  white-space: nowrap;\n"]))),qv=w.A.div(Nb||(Nb=(0,A.A)(["\n  min-width: 140px;\n\n  /* P\u0159epis styl\u016f DatePickeru pro men\u0161\xed velikost */\n  button {\n    padding: 0.375rem 0.5rem !important;\n    font-size: 0.75rem !important;\n    border-radius: 4px !important;\n  }\n"]))),Xv=w.A.div(Eb||(Eb=(0,A.A)(["\n  display: flex;\n  gap: 0.375rem;\n  justify-content: flex-end;\n  margin-top: 0.25rem;\n"]))),Qv=w.A.button($b||($b=(0,A.A)(["\n  padding: 0.375rem 0.75rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 2px 6px rgba(16, 185, 129, 0.25);\n  }\n"]))),ny=w.A.button(Ob||(Ob=(0,A.A)(["\n  padding: 0.375rem 0.75rem;\n  background: #f1f5f9;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #e2e8f0;\n  }\n"]))),ey=w.A.div(Mb||(Mb=(0,A.A)(["\n  padding: 1.25rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n"]))),oy=w.A.div(Rb||(Rb=(0,A.A)(["\n  display: flex;\n  gap: 0.625rem;\n  margin-bottom: 0.75rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),ty=w.A.label(Fb||(Fb=(0,A.A)(['\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  font-size: 0.8125rem;\n  color: #334155;\n  cursor: pointer;\n  user-select: none;\n\n  input[type="checkbox"] {\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    accent-color: #3b82f6;\n  }\n']))),ry=(w.A.select(Lb||(Lb=(0,A.A)(["\n  flex: 1;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n\n  &:hover {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n"]))),w.A.div(Tb||(Tb=(0,A.A)(["\n  position: relative;\n  width: 100%;\n"]))),w.A.div(Vb||(Vb=(0,A.A)(["\n  position: absolute;\n  right: 0.625rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #94a3b8;\n  pointer-events: none;\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n"]))),w.A.div(Zb||(Zb=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  margin-top: 0.5rem;\n  padding: 0.625rem 0.75rem;\n  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n  border: 1px solid #bfdbfe;\n  border-radius: 6px;\n  font-size: 0.8125rem;\n"])))),ay=w.A.span(Kb||(Kb=(0,A.A)(["\n  padding: 0.25rem 0.5rem;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 0.6875rem;\n  letter-spacing: 0.01em;\n"]))),iy=w.A.span(Hb||(Hb=(0,A.A)(["\n  color: #1e40af;\n  font-weight: 500;\n  flex: 1;\n"]))),ly=w.A.button(Bb||(Bb=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 1rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n"]))),sy=w.A.div(Ub||(Ub=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n  font-size: 0.875rem;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 0.75rem;\n    opacity: 0.3;\n  }\n"]))),dy=w.A.div(Wb||(Wb=(0,A.A)(["\n  padding: 1.25rem 2rem;\n  background: white;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  flex-shrink: 0;\n"]))),cy=w.A.button(Gb||(Gb=(0,A.A)(["\n  padding: 0.625rem 1.5rem;\n  border-radius: 6px;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n"]))),py=(0,w.A)(cy)(Yb||(Yb=(0,A.A)(["\n  background: white;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n\n  &:hover {\n    background: #f8fafc;\n    border-color: #cbd5e1;\n  }\n"]))),uy=(0,w.A)(cy)(Jb||(Jb=(0,A.A)(["\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),my=w.A.div(qb||(qb=(0,A.A)(["\n  background: #fef2f2;\n  color: #991b1b;\n  padding: 0.75rem 1rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    flex-shrink: 0;\n  }\n"]))),gy=w.A.div(Xb||(Xb=(0,A.A)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  z-index: 10001;\n  min-width: 400px;\n  max-width: 500px;\n"]))),hy=w.A.div(Qb||(Qb=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 10000;\n"]))),xy=w.A.h3(nv||(nv=(0,A.A)(["\n  margin: 0 0 1rem 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #dc2626;\n  }\n"]))),fy=w.A.p(ev||(ev=(0,A.A)(["\n  margin: 0 0 1.5rem 0;\n  color: #64748b;\n  line-height: 1.6;\n"]))),by=w.A.div(ov||(ov=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n"]))),vy=w.A.button(tv||(tv=(0,A.A)(["\n  padding: 0.625rem 1.25rem;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),yy=(0,w.A)(vy)(rv||(rv=(0,A.A)(["\n  background: white;\n  color: #64748b;\n  border: 2px solid #e2e8f0;\n\n  &:hover:not(:disabled) {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n  }\n"]))),ky=(0,w.A)(vy)(av||(av=(0,A.A)(["\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  color: white;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n  }\n"]))),jy=w.A.div(iv||(iv=(0,A.A)(["\n  position: relative;\n  width: 100%;\n"]))),Ay=w.A.div(lv||(lv=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 2.25rem 0.625rem ",";\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: ",";\n  cursor: ",";\n  color: ",";\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  ","\n\n  .icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n  }\n"])),n=>n.$hasIcon?"2.5rem":"0.75rem",n=>n.$error?"#f87171":"#e2e8f0",n=>n.disabled?"#f1f5f9":"white",n=>n.disabled?"not-allowed":"pointer",n=>n.$isEmpty?"#94a3b8":"#1e293b",n=>n.$isEmpty?"400":"600",n=>n.$isOpen&&"\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  "),zy=w.A.div(sv||(sv=(0,A.A)(["\n  position: fixed;\n  max-height: 280px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 999999;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),wy=w.A.div(dv||(dv=(0,A.A)(["\n  position: relative;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n\n  svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n    pointer-events: none;\n  }\n"]))),_y=w.A.input(cv||(cv=(0,A.A)(["\n  width: 100%;\n  padding: 0.75rem 2.5rem 0.75rem 2.5rem;\n  border: none;\n  font-size: 0.875rem;\n  outline: none;\n\n  &::placeholder {\n    color: #94a3b8;\n  }\n\n  &:focus {\n    background: #f8fafc;\n  }\n"]))),Cy=w.A.button(pv||(pv=(0,A.A)(["\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #475569;\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]))),Sy=w.A.button(uv||(uv=(0,A.A)(["\n  position: absolute;\n  right: 2.25rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n  z-index: 1;\n\n  &:hover {\n    color: #475569;\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]))),Py=w.A.div(mv||(mv=(0,A.A)(["\n  overflow-y: auto;\n  flex: 1;\n"]))),Dy=w.A.div(gv||(gv=(0,A.A)(["\n  padding: 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n\n  ","\n"])),n=>n.$selected&&"\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    color: #1e40af;\n    font-weight: 600;\n  "),Iy=w.A.div(hv||(hv=(0,A.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n"]))),Ny=n=>{let{value:e,onChange:o,options:t,placeholder:r,disabled:a,icon:i}=n;const[l,s]=(0,z.useState)(!1),[d,c]=(0,z.useState)(""),[p,u]=(0,z.useState)({top:0,left:0,width:0}),m=z.useRef(null),g=z.useRef(null),h=z.useRef(null),x=z.useRef(null);(0,z.useEffect)(()=>{const n=n=>{m.current&&!m.current.contains(n.target)&&h.current&&!h.current.contains(n.target)&&(s(!1),c(""))};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),(0,z.useEffect)(()=>{l&&x.current&&x.current.focus()},[l]),(0,z.useEffect)(()=>{if(l&&g.current){const n=g.current.getBoundingClientRect();u({top:n.bottom+4,left:n.left,width:n.width})}},[l]);const f=t.filter(n=>n.label.toLowerCase().includes(d.toLowerCase())),b=t.find(n=>n.value===e);return(0,en.jsxs)(jy,{ref:m,children:[(0,en.jsxs)(Ay,{ref:g,onClick:()=>{a||s(!l)},disabled:a,$isEmpty:!b,$isOpen:l,$hasIcon:!!i,children:[i&&(0,en.jsx)("span",{className:"icon",children:i}),(0,en.jsx)("span",{style:{flex:1},children:b?b.label:r}),b&&!a&&(0,en.jsx)(Sy,{onClick:n=>{n.stopPropagation(),o("")},children:(0,en.jsx)(q.A,{size:14})}),(0,en.jsx)(bv.A,{size:16,style:{color:"#94a3b8",transition:"transform 0.2s",transform:l?"rotate(180deg)":"none"}})]}),l&&Y.createPortal((0,en.jsxs)(zy,{ref:h,style:{position:"fixed",top:"".concat(p.top,"px"),left:"".concat(p.left,"px"),width:"".concat(p.width,"px")},children:[(0,en.jsxs)(wy,{children:[(0,en.jsx)(up.A,{size:16}),(0,en.jsx)(_y,{ref:x,type:"text",value:d,onChange:n=>c(n.target.value),placeholder:"Hledat..."}),d&&(0,en.jsx)(Cy,{onClick:()=>c(""),children:(0,en.jsx)(q.A,{size:14})})]}),(0,en.jsx)(Py,{children:f.length>0?f.map(n=>(0,en.jsx)(Dy,{$selected:n.value===e,onClick:()=>{return e=n.value,o(e),s(!1),void c("");var e},children:n.label},n.value)):(0,en.jsx)(Iy,{children:"\u017d\xe1dn\xe9 v\xfdsledky"})})]}),document.body)]})},Ey=n=>{let{isOpen:e,onClose:o,onSuccess:t,cashbox:r}=n;const{token:a,user:i}=(0,z.useContext)(K.cy),{showToast:l}=(0,z.useContext)(H.$o),[s,d]=(0,z.useState)({nazev:"",kod_pracoviste:"",nazev_pracoviste:"",ciselna_rada_vpd:"",vpd_od_cislo:1,ciselna_rada_ppd:"",ppd_od_cislo:1,poznamka:""}),[c,p]=(0,z.useState)([]),[u,m]=(0,z.useState)(null),[g,h]=(0,z.useState)([]),[x,f]=(0,z.useState)([]),[b,v]=(0,z.useState)(""),[y,k]=(0,z.useState)(!1),[j,A]=(0,z.useState)(!1),[w,_]=(0,z.useState)(!1),[C,S]=(0,z.useState)(!1),[P,D]=(0,z.useState)(""),[N,E]=(0,z.useState)({show:!1,assignmentId:null,userName:""}),[$,O]=(0,z.useState)(null),[M,R]=(0,z.useState)({platne_od:"",platne_do:""});(0,z.useEffect)(()=>{if(e&&r&&a&&null!==i&&void 0!==i&&i.username){d({nazev:r.nazev||"",kod_pracoviste:r.kod_pracoviste||"",nazev_pracoviste:r.nazev_pracoviste||"",ciselna_rada_vpd:r.ciselna_rada_vpd||"",vpd_od_cislo:r.vpd_od_cislo||1,ciselna_rada_ppd:r.ciselna_rada_ppd||"",ppd_od_cislo:r.ppd_od_cislo||1,poznamka:r.poznamka||""});const n=r.uzivatele||[],e=(new Date).toISOString().split("T")[0],o=n.filter(n=>!n.platne_do||n.platne_do>e);h(o),L(),F()}},[e,r,a,null===i||void 0===i?void 0:i.username]);const F=async()=>{if(a&&null!==i&&void 0!==i&&i.username)try{S(!0);const n=await(0,G.Ec)({token:a,username:i.username,show_inactive:!1});if(p(n||[]),null!==r&&void 0!==r&&r.kod_pracoviste&&n){const e=n.find(n=>n.usek_zkr===r.kod_pracoviste);e&&m(e)}}catch(n){}finally{S(!1)}},L=async()=>{if(null!==r&&void 0!==r&&r.id)try{_(!0);const n=await fv.default.getAvailableUsers(r.id);f(n.data.uzivatele||[])}catch(n){}finally{_(!1)}},V=(n,e)=>{d(o=>(0,T.A)((0,T.A)({},o),{},{[n]:e})),D("")},Z=()=>{O(null),R({platne_od:"",platne_do:""})},B=()=>{E({show:!1,assignmentId:null,userName:""})};return e?(0,en.jsxs)(en.Fragment,{children:[Y.createPortal((0,en.jsx)(Av,{onClick:n=>n.stopPropagation(),children:(0,en.jsxs)(zv,{onClick:n=>n.stopPropagation(),children:[(0,en.jsxs)(wv,{children:[(0,en.jsxs)(_v,{children:[(0,en.jsx)(I.A,{}),"\xdaprava pokladny ",null===r||void 0===r?void 0:r.cislo_pokladny]}),(0,en.jsx)(Cv,{onClick:o,children:(0,en.jsx)(q.A,{size:20})})]}),(0,en.jsxs)(Sv,{children:[(0,en.jsxs)(Pv,{children:[(0,en.jsxs)(Iv,{children:[(0,en.jsx)(gp.A,{}),"Parametry pokladny"]}),P&&(0,en.jsxs)(my,{children:[(0,en.jsx)(X.A,{}),P]}),(0,en.jsxs)(Nv,{children:[(0,en.jsxs)($v,{children:[(0,en.jsx)(gp.A,{}),"\u010c\xedslo pokladny"]}),(0,en.jsx)(Ov,{type:"number",value:(null===r||void 0===r?void 0:r.cislo_pokladny)||"",disabled:!0})]}),(0,en.jsxs)(Nv,{children:[(0,en.jsx)($v,{children:"N\xe1zev pokladny"}),(0,en.jsx)(Ov,{type:"text",value:s.nazev,onChange:n=>V("nazev",n.target.value),placeholder:"Pokladna IT odd\u011blen\xed..."})]}),(0,en.jsxs)(Nv,{children:[(0,en.jsxs)($v,{children:[(0,en.jsx)(I.A,{}),"\xdasek (zkratka)"]}),(0,en.jsx)(Ny,{value:(null===u||void 0===u?void 0:u.id)||"",onChange:n=>(n=>{if(!n)return m(null),d(n=>(0,T.A)((0,T.A)({},n),{},{kod_pracoviste:"",nazev_pracoviste:""})),void D("");const e=c.find(e=>String(e.id)===String(n));m(e||null),e&&d(n=>(0,T.A)((0,T.A)({},n),{},{kod_pracoviste:e.usek_zkr||"",nazev_pracoviste:e.usek_nazev||""})),D("")})(n),options:c.map(n=>({value:n.id,label:"".concat(n.usek_zkr," - ").concat(n.usek_nazev)})),placeholder:"Vyberte \xfasek...",disabled:C,icon:(0,en.jsx)(I.A,{size:16})}),u&&(0,en.jsxs)(ry,{children:[(0,en.jsx)(ay,{children:u.usek_zkr}),(0,en.jsx)(iy,{children:u.usek_nazev})]})]}),(0,en.jsxs)(Ev,{children:[(0,en.jsxs)(Nv,{style:{marginBottom:0},children:[(0,en.jsxs)($v,{children:[(0,en.jsx)(gp.A,{}),"VPD prefix *"]}),(0,en.jsx)(Ov,{type:"text",value:s.ciselna_rada_vpd,onChange:n=>V("ciselna_rada_vpd",n.target.value),placeholder:"599",$error:!s.ciselna_rada_vpd})]}),(0,en.jsxs)(Nv,{style:{marginBottom:0},children:[(0,en.jsx)($v,{children:"VPD od \u010d\xedsla"}),(0,en.jsx)(Ov,{type:"number",value:s.vpd_od_cislo,onChange:n=>V("vpd_od_cislo",parseInt(n.target.value)||1)})]})]}),(0,en.jsxs)(Ev,{children:[(0,en.jsxs)(Nv,{style:{marginBottom:0},children:[(0,en.jsxs)($v,{children:[(0,en.jsx)(gp.A,{}),"PPD prefix *"]}),(0,en.jsx)(Ov,{type:"text",value:s.ciselna_rada_ppd,onChange:n=>V("ciselna_rada_ppd",n.target.value),placeholder:"499",$error:!s.ciselna_rada_ppd})]}),(0,en.jsxs)(Nv,{style:{marginBottom:0},children:[(0,en.jsx)($v,{children:"PPD od \u010d\xedsla"}),(0,en.jsx)(Ov,{type:"number",value:s.ppd_od_cislo,onChange:n=>V("ppd_od_cislo",parseInt(n.target.value)||1)})]})]}),(0,en.jsxs)(Nv,{children:[(0,en.jsx)($v,{children:"Pozn\xe1mka"}),(0,en.jsx)(Mv,{value:s.poznamka,onChange:n=>V("poznamka",n.target.value),placeholder:"Voliteln\xe1 pozn\xe1mka...",rows:2})]})]}),(0,en.jsxs)(Dv,{children:[(0,en.jsxs)(Iv,{children:[(0,en.jsx)(xv.A,{}),"P\u0159i\u0159azen\xed u\u017eivatel\xe9 (",g.length,")"]}),(0,en.jsx)(Rv,{style:{marginBottom:0},children:0===g.length?(0,en.jsxs)(sy,{children:[(0,en.jsx)(xv.A,{size:48}),(0,en.jsx)("div",{children:"\u017d\xe1dn\xed p\u0159i\u0159azen\xed u\u017eivatel\xe9"})]}):g.map(n=>{const e=$===n.uzivatel_id;return(0,en.jsxs)(Fv,{children:[(0,en.jsxs)(Lv,{children:[(0,en.jsx)(Tv,{children:(0,en.jsx)(xv.A,{size:16})}),(0,en.jsxs)(Vv,{children:[(0,en.jsxs)(Zv,{children:[n.uzivatel_cele_jmeno,1===n.je_hlavni||"1"===n.je_hlavni?(0,en.jsx)(Hv,{children:"Hlavn\xed"}):(0,en.jsx)(Hv,{style:{background:"linear-gradient(135deg, #64748b 0%, #475569 100%)"},children:"Z\xe1stupce"})]}),e?(0,en.jsxs)(Gv,{children:[(0,en.jsxs)(Yv,{children:[(0,en.jsx)(Jv,{children:"P\u0159i\u0159azena od:"}),(0,en.jsx)(qv,{children:(0,en.jsx)(kv.A,{value:M.platne_od,onChange:n=>{R(e=>{const o=(0,T.A)((0,T.A)({},e),{},{platne_od:n});return o.platne_do&&n&&o.platne_do<n&&(o.platne_do=n),o})},placeholder:"Vyberte datum"})}),(0,en.jsx)(Jv,{children:"do:"}),(0,en.jsx)(qv,{children:(0,en.jsx)(kv.A,{value:M.platne_do,onChange:n=>{R(e=>n&&e.platne_od&&n<e.platne_od?(0,T.A)((0,T.A)({},e),{},{platne_do:e.platne_od}):(0,T.A)((0,T.A)({},e),{},{platne_do:n}))},placeholder:"Nevyplnit = nav\u017edy"})})]}),(0,en.jsxs)(Xv,{children:[(0,en.jsx)(Qv,{onClick:()=>{return e=n.uzivatel_id,console.log("\ud83d\udcbe Ukl\xe1d\xe1m platnost u\u017eivatele:",e,M),h(n=>n.map(n=>n.uzivatel_id===e?(0,T.A)((0,T.A)({},n),{},{platne_od:M.platne_od,platne_do:M.platne_do||null}):n)),O(null),R({platne_od:"",platne_do:""}),void l("Platnost p\u0159i\u0159azen\xed zm\u011bn\u011bna (ulo\u017ete dialog pro potvrzen\xed)","info");var e},children:"\u2713 Ulo\u017eit"}),(0,en.jsx)(ny,{onClick:Z,children:"\u2715 Zru\u0161it"})]})]}):(0,en.jsxs)(Kv,{children:[n.username,n.platne_od&&" \u2022 P\u0159i\u0159azena od: ".concat(n.platne_od),n.platne_do?" \u2022 do: ".concat(n.platne_do):" \u2022 nav\u017edy"]})]})]}),!e&&(0,en.jsxs)(Bv,{children:[(0,en.jsxs)(Wv,{onClick:()=>(n=>{console.log("\ud83d\udcdd Editace platnosti u\u017eivatele:",n),O(n.uzivatel_id),R({platne_od:n.platne_od||(new Date).toISOString().split("T")[0],platne_do:n.platne_do||""})})(n),title:"Editovat platnost p\u0159i\u0159azen\xed",children:[(0,en.jsx)(vv.A,{size:13}),"P\u0159i\u0159azen\xe1"]}),(0,en.jsx)(Uv,{onClick:()=>{return e=n.prirazeni_id,o=n.uzivatel_cele_jmeno,void E({show:!0,assignmentId:e,userName:o});var e,o},title:"Odebrat u\u017eivatele",children:(0,en.jsx)(Mn.A,{})})]})]},n.prirazeni_id||n.uzivatel_id)})}),(0,en.jsxs)(ey,{children:[(0,en.jsxs)(oy,{children:[(0,en.jsx)(Ny,{value:b,onChange:n=>v(n),options:x.map(n=>({value:n.id,label:"".concat(n.cele_jmeno," (").concat(n.username,")")})),placeholder:"Vyberte u\u017eivatele...",disabled:w,icon:(0,en.jsx)(xv.A,{size:16})}),(0,en.jsxs)(ly,{onClick:async()=>{if(b)try{const n=y?0:1;console.log("P\u0159id\xe1v\xe1m u\u017eivatele:",b,"checkbox z\xe1stupce:",y,"je_hlavni:",n);const e=await fv.default.assignUserToCashbox({pokladna_id:r.id,uzivatel_id:parseInt(b),je_hlavni:n,platne_od:(new Date).toISOString().split("T")[0],platne_do:null,poznamka:""});if("ok"===e.status){const n=(await fv.default.getCashboxList(!0,!0)).data.pokladny.find(n=>n.id===r.id);n&&h(n.uzivatele||[]),v(""),k(!1),await L();const e=x.find(n=>n.id===parseInt(b));l('U\u017eivatel "'.concat((null===e||void 0===e?void 0:e.name)||"U\u017eivatel",'" byl \xfasp\u011b\u0161n\u011b p\u0159i\u0159azen k pokladn\u011b'),"success")}else l(e.message||"Chyba p\u0159i p\u0159i\u0159azov\xe1n\xed u\u017eivatele","error")}catch(n){console.error("Chyba p\u0159i p\u0159id\xe1v\xe1n\xed u\u017eivatele:",n),l("Chyba p\u0159i p\u0159i\u0159azov\xe1n\xed u\u017eivatele k pokladn\u011b","error")}},disabled:!b||w,children:[(0,en.jsx)(yv.A,{}),"P\u0159idat"]})]}),(0,en.jsxs)(ty,{children:[(0,en.jsx)("input",{type:"checkbox",checked:y,onChange:n=>k(n.target.checked),disabled:w}),"Z\xe1stupce (v\xfdchoz\xed je hlavn\xed)"]})]})]})]}),(0,en.jsxs)(dy,{children:[(0,en.jsxs)(py,{onClick:o,children:[(0,en.jsx)(q.A,{}),"Zru\u0161it"]}),(0,en.jsxs)(uy,{onClick:async()=>{if(s.ciselna_rada_vpd)if(s.ciselna_rada_ppd)try{A(!0),D(""),await fv.default.updateCashbox(r.id,s);const n=g.map(n=>({uzivatel_id:n.uzivatel_id,je_hlavni:1===n.je_hlavni||"1"===n.je_hlavni?1:0,platne_od:n.platne_od||(new Date).toISOString().split("T")[0],platne_do:n.platne_do||null,poznamka:n.poznamka||""}));await fv.default.syncCashboxUsers(r.id,n),l("Pokladna a u\u017eivatel\xe9 \xfasp\u011b\u0161n\u011b ulo\u017eeni","success"),null===t||void 0===t||t(),o()}catch(a){var n,e;D((null===(n=a.response)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.error)||"Nepoda\u0159ilo se ulo\u017eit zm\u011bny"),l("Chyba p\u0159i ukl\xe1d\xe1n\xed pokladny","error")}finally{A(!1)}else D("Vypl\u0148te \u010d\xedselnou \u0159adu PPD");else D("Vypl\u0148te \u010d\xedselnou \u0159adu VPD")},disabled:j,children:[(0,en.jsx)(Q.A,{}),j?"Ukl\xe1d\xe1m...":"Ulo\u017eit zm\u011bny"]})]})]})}),document.body),N.show&&Y.createPortal((0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(hy,{onClick:B}),(0,en.jsxs)(gy,{children:[(0,en.jsxs)(xy,{children:[(0,en.jsx)(X.A,{size:24}),"Odebrat u\u017eivatele?"]}),(0,en.jsxs)(fy,{children:["Opravdu chcete odebrat u\u017eivatele ",(0,en.jsx)("strong",{children:N.userName})," z t\xe9to pokladny?"]}),(0,en.jsxs)(by,{children:[(0,en.jsx)(yy,{onClick:B,children:"Zru\u0161it"}),(0,en.jsxs)(ky,{onClick:async()=>{const{assignmentId:n,userName:e}=N;E({show:!1,assignmentId:null,userName:""}),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\uddd1\ufe0f  ODEBR\xc1N\xcd U\u017dIVATELE Z POKLADNY - START"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udccb Assignment ID:",n),console.log("\ud83d\udc64 U\u017eivatel:",e),console.log("\ud83c\udfe6 Pokladna ID:",null===r||void 0===r?void 0:r.id),console.log("\ud83c\udfe6 Pokladna \u010d\xedslo:",null===r||void 0===r?void 0:r.cislo_pokladny);try{var o;console.log("\ud83d\udce1 Vol\xe1m API: cashbookAPI.unassignUserFromCashbox()"),console.log("   Parametry:",{assignmentId:n});const r=await fv.default.unassignUserFromCashbox(n);if(console.log("\u2705 API Response:",JSON.stringify(r,null,2)),console.log("   Status:",null===r||void 0===r?void 0:r.status),console.log("   Message:",null===r||void 0===r?void 0:r.message),console.log("   Data:",null===r||void 0===r?void 0:r.data),console.log("   Affected rows:",null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.affected_rows),"ok"===r.status){var t;const o=null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.affected_rows;if(0===o||"0"===o)return console.warn("\u26a0\ufe0f  BE vr\xe1tilo affected_rows = 0 (\u017e\xe1dn\xe1 zm\u011bna v DB)"),console.warn("   Mo\u017en\xe9 d\u016fvody:"),console.warn("   1. Z\xe1znam s prirazeni_id =",n,"neexistuje"),console.warn("   2. Z\xe1znam u\u017e m\xe1 platne_do nastaven\xe9 na dne\u0161n\xed datum"),console.warn("   3. SQL WHERE podm\xednka je \u0161patn\u011b"),l('VAROV\xc1N\xcd: U\u017eivatel "'.concat(e,'" nebyl odebr\xe1n - z\xe1znam u\u017e neexistuje nebo byl ji\u017e deaktivov\xe1n'),"warning"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\u26a0\ufe0f  ODEBR\xc1N\xcd U\u017dIVATELE - WARNING (affected_rows = 0)"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udd04 Na\u010d\xedt\xe1m dostupn\xe9 u\u017eivatele..."),void await L();console.log("\u2705 BE potvrdilo \xfasp\u011b\u0161n\xe9 odebr\xe1n\xed (affected_rows:",o,")");const a=g.length;h(e=>{const o=e.filter(e=>e.prirazeni_id!==n);return console.log("\ud83d\udcca Po\u010det u\u017eivatel\u016f P\u0158ED:",a),console.log("\ud83d\udcca Po\u010det u\u017eivatel\u016f PO:",o.length),console.log("\ud83d\udcca Odebran\xfd u\u017eivatel byl:",e.find(e=>e.prirazeni_id===n)),console.log("\ud83d\udcca Z\u016fst\xe1vaj\xedc\xed u\u017eivatel\xe9:",o.map(n=>({id:n.prirazeni_id,name:n.uzivatel_cele_jmeno}))),o}),console.log("\ud83d\udd04 Na\u010d\xedt\xe1m dostupn\xe9 u\u017eivatele..."),await L(),l('U\u017eivatel "'.concat(e,'" byl \xfasp\u011b\u0161n\u011b odebr\xe1n z pokladny'),"success"),console.log("\u2705 Toast zobrazen"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\uddd1\ufe0f  ODEBR\xc1N\xcd U\u017dIVATELE - SUCCESS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}else console.error("\u274c BE vr\xe1tilo ne\xfasp\u011b\u0161n\xfd status"),console.error("   Status:",null===r||void 0===r?void 0:r.status),console.error("   Message:",null===r||void 0===r?void 0:r.message),l(r.message||"Chyba p\u0159i odeb\xedr\xe1n\xed u\u017eivatele","error"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\u274c ODEBR\xc1N\xcd U\u017dIVATELE - FAILED (BE status != ok)"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}catch(c){var a,i,s,d;console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("\u274c ODEBR\xc1N\xcd U\u017dIVATELE - ERROR"),console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("\u274c Chyba p\u0159i odeb\xedr\xe1n\xed:",c),console.error("   Message:",null===c||void 0===c?void 0:c.message),console.error("   Response:",null===c||void 0===c?void 0:c.response),console.error("   Response Data:",null===c||void 0===c||null===(a=c.response)||void 0===a?void 0:a.data),console.error("   Response Status:",null===c||void 0===c||null===(i=c.response)||void 0===i?void 0:i.status);const n=(null===c||void 0===c?void 0:c.message)||(null===c||void 0===c||null===(s=c.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"";n.includes("Integrity constraint violation")||n.includes("foreign key constraint fails")||n.includes("fk_knihy_prirazeni")?l('U\u017eivatel "'.concat(e,'" nelze odebrat - m\xe1 aktivn\xed pokladn\xed knihy. Nejprve je mus\xedte ukon\u010dit nebo p\u0159i\u0159adit jin\xe9mu u\u017eivateli.'),"error"):l("Chyba p\u0159i odeb\xedr\xe1n\xed u\u017eivatele z pokladny","error")}},children:[(0,en.jsx)(Mn.A,{size:16}),"Odebrat"]})]})]})]}),document.body)]}):null};var $y,Oy,My,Ry,Fy,Ly,Ty,Vy,Zy,Ky,Hy,By,Uy,Wy,Gy,Yy,Jy,qy=o(36210),Xy=o(77819);const Qy=(0,J.i7)($y||($y=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),nk=w.A.div(Oy||(Oy=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),ek=w.A.div(My||(My=(0,A.A)(["\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 480px;\n  overflow: hidden;\n  box-shadow:\n    0 25px 50px -12px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(255, 255, 255, 0.2);\n  animation: "," 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n"])),Qy),ok=w.A.div(Ry||(Ry=(0,A.A)(['\n  padding: 1.25rem 1.5rem 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #dc2626 0%, #ef4444 70%, #dc2626 100%);\n  color: white;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url(\'data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.05"><circle cx="30" cy="30" r="1"/></g></svg>\');\n    pointer-events: none;\n  }\n']))),tk=w.A.div(Fy||(Fy=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n  z-index: 1;\n"]))),rk=w.A.div(Ly||(Ly=(0,A.A)(["\n  flex: 1;\n"]))),ak=w.A.h2(Ty||(Ty=(0,A.A)(["\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 700;\n  line-height: 1.2;\n"]))),ik=w.A.p(Vy||(Vy=(0,A.A)(["\n  margin: 0.375rem 0 0 0;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.8125rem;\n  font-weight: 400;\n"]))),lk=w.A.button(Zy||(Zy=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  cursor: pointer;\n  padding: 0.625rem;\n  border-radius: 10px;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),sk=w.A.div(Ky||(Ky=(0,A.A)(["\n  padding: 1.5rem 1.5rem;\n  background: white;\n"]))),dk=w.A.div(Hy||(Hy=(0,A.A)(["\n  padding: 1rem;\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  border: 2px solid #fca5a5;\n  border-radius: 10px;\n  margin-bottom: 1.25rem;\n\n  .warning-header {\n    display: flex;\n    align-items: center;\n    gap: 0.625rem;\n    font-weight: 700;\n    color: #991b1b;\n    font-size: 0.9375rem;\n    margin-bottom: 0.625rem;\n  }\n\n  .warning-text {\n    font-size: 0.8125rem;\n    color: #7f1d1d;\n    line-height: 1.5;\n  }\n"]))),ck=w.A.div(By||(By=(0,A.A)(["\n  padding: 0.875rem 1rem;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  margin-bottom: 1.25rem;\n\n  .info-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.375rem 0;\n\n    &:not(:last-child) {\n      border-bottom: 1px solid #e2e8f0;\n    }\n  }\n\n  .info-label {\n    font-weight: 600;\n    color: #64748b;\n    font-size: 0.8125rem;\n  }\n\n  .info-value {\n    font-weight: 600;\n    color: #1e293b;\n    font-size: 0.8125rem;\n  }\n"]))),pk=w.A.div(Uy||(Uy=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #dcfce7;\n  border: 2px solid #86efac;\n  border-radius: 8px;\n  color: #166534;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  margin-bottom: 0.875rem;\n"]))),uk=w.A.div(Wy||(Wy=(0,A.A)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #fee2e2;\n  border: 2px solid #fca5a5;\n  border-radius: 8px;\n  color: #991b1b;\n  font-weight: 500;\n  margin-bottom: 0.875rem;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-size: 0.8125rem;\n"]))),mk=w.A.div(Gy||(Gy=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 0.875rem;\n"]))),gk=w.A.button(Yy||(Yy=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\n  &.cancel {\n    background: white;\n    color: #64748b;\n    border: 2px solid #e2e8f0;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #cbd5e1;\n    }\n  }\n\n  &.danger {\n    background: linear-gradient(135deg, #dc2626, #b91c1c);\n    color: white;\n    border: 2px solid transparent;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(220, 38, 38, 0.3);\n    }\n\n    &:disabled {\n      background: #e2e8f0;\n      color: #64748b;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n  }\n\n  &.success {\n    background: linear-gradient(135deg, #10b981, #059669) !important;\n    color: white;\n    border: 2px solid transparent;\n    animation: successPulse 0.5s ease-out;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);\n    }\n  }\n\n  @keyframes successPulse {\n    0% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.05);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n"]))),hk=w.A.div(Jy||(Jy=(0,A.A)(["\n  width: 18px;\n  height: 18px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top-color: white;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n"]))),xk=n=>{let{isOpen:e,onClose:o,assignment:t,onSuccess:r}=n;const[a,i]=(0,z.useState)(!1),[l,s]=(0,z.useState)(""),[d,c]=(0,z.useState)(""),[p,u]=(0,z.useState)(!1);(0,z.useEffect)(()=>{e&&(s(""),c(""),u(!1))},[e]),(0,z.useEffect)(()=>{const n=n=>{"Escape"===n.key&&e&&!a&&o()};return e&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow="unset"}},[e,a,o]);if(!e||!t)return null;const m=[t.uzivatel_jmeno,t.uzivatel_prijmeni].filter(Boolean).join(" ");return Y.createPortal((0,en.jsx)(nk,{onClick:a?void 0:o,children:(0,en.jsxs)(ek,{onClick:n=>n.stopPropagation(),children:[(0,en.jsx)(ok,{children:(0,en.jsxs)(tk,{children:[(0,en.jsxs)(rk,{children:[(0,en.jsx)(ak,{children:"Smazat p\u0159i\u0159azen\xed pokladny?"}),(0,en.jsx)(ik,{children:"Tato akce je nevratn\xe1"})]}),(0,en.jsx)(lk,{onClick:o,disabled:a,children:(0,en.jsx)(q.A,{size:20})})]})}),(0,en.jsxs)(sk,{children:[l&&(0,en.jsxs)(pk,{children:[(0,en.jsx)(qy.A,{size:20}),l]}),d&&(0,en.jsxs)(uk,{children:[(0,en.jsx)(Xy.A,{size:20}),(0,en.jsx)("div",{children:d})]}),!l&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(dk,{children:[(0,en.jsxs)("div",{className:"warning-header",children:[(0,en.jsx)(Xy.A,{size:20}),"Opravdu chcete smazat toto p\u0159i\u0159azen\xed?"]}),(0,en.jsx)("div",{className:"warning-text",children:"U\u017eivatel ztrat\xed p\u0159\xedstup k pokladn\u011b a nebude moci vytv\xe1\u0159et nov\xe9 doklady. Existuj\xedc\xed doklady z\u016fstanou zachov\xe1ny."})]}),(0,en.jsxs)(ck,{children:[(0,en.jsxs)("div",{className:"info-row",children:[(0,en.jsx)("span",{className:"info-label",children:"U\u017eivatel:"}),(0,en.jsx)("span",{className:"info-value",children:m})]}),(0,en.jsxs)("div",{className:"info-row",children:[(0,en.jsx)("span",{className:"info-label",children:"Pokladna:"}),(0,en.jsx)("span",{className:"info-value",children:t.cislo_pokladny})]}),(0,en.jsxs)("div",{className:"info-row",children:[(0,en.jsx)("span",{className:"info-label",children:"VPD:"}),(0,en.jsx)("span",{className:"info-value",children:t.vpd_cislo||"\u2013"})]}),(0,en.jsxs)("div",{className:"info-row",children:[(0,en.jsx)("span",{className:"info-label",children:"PPD:"}),(0,en.jsx)("span",{className:"info-value",children:t.ppd_cislo||"\u2013"})]})]})]})]}),(0,en.jsxs)(mk,{children:[(0,en.jsxs)(gk,{className:"cancel",onClick:o,disabled:a,children:[(0,en.jsx)(q.A,{size:16}),"Zru\u0161it"]}),(0,en.jsx)(gk,{className:l?"success":"danger",onClick:async()=>{i(!0),c(""),s("");try{const n=await fv.default.deleteAssignment(t.id);"ok"===n.status?(s("\u2713 P\u0159i\u0159azen\xed bylo \xfasp\u011b\u0161n\u011b smaz\xe1no"),u(!0),setTimeout(()=>{null===r||void 0===r||r(),o()},1500)):c(n.message||"Nepoda\u0159ilo se smazat p\u0159i\u0159azen\xed")}catch(n){console.error("\u274c Chyba p\u0159i maz\xe1n\xed p\u0159i\u0159azen\xed:",n),c(n.message||"Nepoda\u0159ilo se smazat p\u0159i\u0159azen\xed")}finally{p||i(!1)}},disabled:a||p,children:a?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(hk,{}),"Ma\u017eu..."]}):l?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(qy.A,{size:16}),"Smaz\xe1no!"]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(Mn.A,{size:16}),"Ano, smazat"]})})]})]})}),document.body)};var fk,bk,vk,yk,kk,jk,Ak,zk,wk,_k,Ck,Sk,Pk,Dk,Ik,Nk,Ek,$k,Ok,Mk,Rk,Fk,Lk,Tk,Vk,Zk,Kk,Hk,Bk,Uk,Wk,Gk,Yk,Jk,qk,Xk,Qk,nj,ej,oj,tj,rj,aj,ij,lj,sj,dj,cj,pj,uj=o(75949);const mj=(0,J.i7)(fk||(fk=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),gj=w.A.div(bk||(bk=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 2rem;\n  animation: fadeIn 0.15s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),hj=w.A.div(vk||(vk=(0,A.A)(["\n  background: white;\n  border-radius: 12px;\n  width: 100%;\n  max-width: 1100px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow:\n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  animation: "," 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n  display: flex;\n  flex-direction: column;\n"])),mj),xj=w.A.div(yk||(yk=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n"]))),fj=w.A.h2(kk||(kk=(0,A.A)(["\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  letter-spacing: -0.01em;\n\n  svg {\n    width: 20px;\n    height: 20px;\n    opacity: 0.9;\n  }\n"]))),bj=w.A.button(jk||(jk=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n"]))),vj=w.A.div(Ak||(Ak=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 420px 1fr;\n  gap: 0;\n  flex: 1;\n  overflow: hidden;\n"]))),yj=w.A.div(zk||(zk=(0,A.A)(["\n  padding: 2rem;\n  background: #f8fafc;\n  border-right: 1px solid #e2e8f0;\n  overflow-y: auto;\n"]))),kj=w.A.div(wk||(wk=(0,A.A)(["\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  gap: 1rem;\n"]))),jj=w.A.h3(_k||(_k=(0,A.A)(["\n  margin: 0 0 1.25rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #64748b;\n  }\n"]))),Aj=w.A.div(Ck||(Ck=(0,A.A)(["\n  margin-bottom: 1.25rem;\n"]))),zj=w.A.div(Sk||(Sk=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n"]))),wj=w.A.label(Pk||(Pk=(0,A.A)(["\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1e293b;\n\n  ","\n"])),n=>n.required&&"\n    &::after {\n      content: ' *';\n      color: #dc2626;\n    }\n  "),_j=w.A.input(Dk||(Dk=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 0.875rem;\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  background: white;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n"])),n=>n.hasError?"#ef4444":"#cbd5e1",n=>n.hasError?"#ef4444":"#3b82f6",n=>n.hasError?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),Cj=w.A.div(Ik||(Ik=(0,A.A)(["\n  color: #dc2626;\n  font-size: 0.75rem;\n  margin-top: 0.375rem;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  svg {\n    width: 12px;\n    height: 12px;\n    flex-shrink: 0;\n  }\n"]))),Sj=(w.A.div(Nk||(Nk=(0,A.A)(["\n  color: #64748b;\n  font-size: 0.75rem;\n  margin-top: 0.375rem;\n"]))),w.A.textarea(Ek||(Ek=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n  resize: vertical;\n  min-height: 60px;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n"])))),Pj=w.A.div($k||($k=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  flex: 1;\n"]))),Dj=w.A.div(Ok||(Ok=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.875rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  transition: all 0.15s;\n\n  &:hover {\n    border-color: ",";\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  }\n"])),n=>n.isMain?"#ecfdf5":"white",n=>n.isMain?"#10b981":"#e2e8f0",n=>n.isMain?"#059669":"#cbd5e1"),Ij=w.A.div(Mk||(Mk=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex: 1;\n"]))),Nj=w.A.div(Rk||(Rk=(0,A.A)(["\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.875rem;\n  flex-shrink: 0;\n"])),n=>n.isMain?"linear-gradient(135deg, #059669 0%, #10b981 100%)":"linear-gradient(135deg, #64748b 0%, #94a3b8 100%)"),Ej=w.A.div(Fk||(Fk=(0,A.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),$j=w.A.div(Lk||(Lk=(0,A.A)(["\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1e293b;\n  margin-bottom: 0.125rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Oj=w.A.span(Tk||(Tk=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  padding: 0.125rem 0.5rem;\n  background: #10b981;\n  color: white;\n  border-radius: 4px;\n  font-size: 0.625rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]))),Mj=w.A.div(Vk||(Vk=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n"]))),Rj=w.A.div(Zk||(Zk=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  flex-shrink: 0;\n"]))),Fj=w.A.button(Kk||(Kk=(0,A.A)(["\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 6px;\n  background: ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"])),n=>n.danger?"#fee2e2":"#f1f5f9",n=>n.danger?"#dc2626":"#64748b",n=>n.danger?"#fecaca":"#e2e8f0",n=>n.danger?"#b91c1c":"#475569"),Lj=w.A.div(Hk||(Hk=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  padding: 1rem;\n  background: #f8fafc;\n  border: 1px dashed #cbd5e1;\n  border-radius: 8px;\n"]))),Tj=w.A.div(Bk||(Bk=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 0.75rem;\n"]))),Vj=(w.A.select(Uk||(Uk=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 0.875rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),w.A.label(Wk||(Wk=(0,A.A)(['\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #475569;\n  cursor: pointer;\n\n  input[type="checkbox"] {\n    width: 18px;\n    height: 18px;\n    border-radius: 4px;\n    border: 1px solid #cbd5e1;\n    cursor: pointer;\n  }\n'])))),Zj=w.A.button(Gk||(Gk=(0,A.A)(["\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  transition: all 0.15s;\n\n  &.primary {\n    background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n    color: white;\n\n    &:hover:not(:disabled) {\n      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n      transform: translateY(-1px);\n    }\n  }\n\n  &.secondary {\n    background: #f1f5f9;\n    color: #475569;\n\n    &:hover:not(:disabled) {\n      background: #e2e8f0;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Kj=w.A.div(Yk||(Yk=(0,A.A)(["\n  padding: 1.25rem 2rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n"]))),Hj=w.A.div(Jk||(Jk=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #64748b;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #94a3b8;\n  }\n"]))),Bj=w.A.div(qk||(qk=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n"]))),Uj=w.A.div(Xk||(Xk=(0,A.A)(["\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 0.75rem;\n    opacity: 0.5;\n  }\n\n  p {\n    margin: 0;\n    font-size: 0.875rem;\n  }\n"]))),Wj=w.A.div(Qk||(Qk=(0,A.A)(["\n  position: relative;\n  width: 100%;\n"]))),Gj=w.A.div(nj||(nj=(0,A.A)(["\n  width: 100%;\n  padding: 0.625rem 2.25rem 0.625rem ",";\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: ",";\n  cursor: ",";\n  color: ",";\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  ","\n\n  .icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n  }\n"])),n=>n.$hasIcon?"2.5rem":"0.75rem",n=>n.disabled?"#f1f5f9":"white",n=>n.disabled?"not-allowed":"pointer",n=>n.$isEmpty?"#94a3b8":"#1e293b",n=>n.$isEmpty?"400":"600",n=>n.$isOpen&&"\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  "),Yj=w.A.div(ej||(ej=(0,A.A)(["\n  position: fixed;\n  max-height: 280px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 999999;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),Jj=w.A.div(oj||(oj=(0,A.A)(["\n  position: relative;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n\n  svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n    pointer-events: none;\n  }\n"]))),qj=w.A.input(tj||(tj=(0,A.A)(["\n  width: 100%;\n  padding: 0.75rem 2.5rem 0.75rem 2.5rem;\n  border: none;\n  font-size: 0.875rem;\n  outline: none;\n\n  &::placeholder {\n    color: #94a3b8;\n    font-weight: 400;\n  }\n\n  &:focus {\n    background: #f8fafc;\n  }\n"]))),Xj=w.A.button(rj||(rj=(0,A.A)(["\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #475569;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n"]))),Qj=w.A.button(aj||(aj=(0,A.A)(["\n  position: absolute;\n  right: 2.25rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    color: #64748b;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n"]))),nA=w.A.div(ij||(ij=(0,A.A)(["\n  overflow-y: auto;\n  flex: 1;\n"]))),eA=w.A.div(lj||(lj=(0,A.A)(["\n  padding: 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n\n  ","\n"])),n=>n.$selected&&"\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    color: #1e40af;\n    font-weight: 600;\n  "),oA=w.A.div(sj||(sj=(0,A.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n"]))),tA=w.A.div(dj||(dj=(0,A.A)(["\n  margin-top: 0.625rem;\n  padding: 0.5rem 0.75rem;\n  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n  border: 1px solid #86efac;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n"]))),rA=w.A.span(cj||(cj=(0,A.A)(["\n  padding: 0.25rem 0.5rem;\n  background: #059669;\n  color: white;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  letter-spacing: 0.025em;\n"]))),aA=w.A.span(pj||(pj=(0,A.A)(["\n  color: #065f46;\n  font-size: 0.875rem;\n  font-weight: 500;\n"]))),iA=n=>{let{value:e,onChange:o,options:t,placeholder:r,disabled:a,icon:i,searchPlaceholder:l="Hledat..."}=n;const[s,d]=(0,z.useState)(!1),[c,p]=(0,z.useState)(""),[u,m]=(0,z.useState)({top:0,left:0,width:0}),g=z.useRef(null),h=z.useRef(null),x=z.useRef(null),f=z.useRef(null);(0,z.useEffect)(()=>{const n=n=>{g.current&&!g.current.contains(n.target)&&x.current&&!x.current.contains(n.target)&&(d(!1),p(""))};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),(0,z.useEffect)(()=>{s&&f.current&&f.current.focus()},[s]),(0,z.useEffect)(()=>{if(s&&h.current){const n=h.current.getBoundingClientRect();m({top:n.bottom+4,left:n.left,width:n.width})}},[s]);const b=t.filter(n=>n.label.toLowerCase().includes(c.toLowerCase())),v=t.find(n=>n.value===e);return(0,en.jsxs)(Wj,{ref:g,children:[(0,en.jsxs)(Gj,{ref:h,onClick:()=>{a||d(!s)},disabled:a,$isEmpty:!v,$isOpen:s,$hasIcon:!!i,children:[i&&(0,en.jsx)("span",{className:"icon",children:i}),(0,en.jsx)("span",{style:{flex:1},children:v?v.label:r}),v&&!a&&(0,en.jsx)(Qj,{onClick:n=>{n.stopPropagation(),o("")},children:(0,en.jsx)(q.A,{size:14})}),(0,en.jsx)(bv.A,{size:16,style:{color:"#94a3b8",transition:"transform 0.2s",transform:s?"rotate(180deg)":"none"}})]}),s&&Y.createPortal((0,en.jsxs)(Yj,{ref:x,style:{position:"fixed",top:"".concat(u.top,"px"),left:"".concat(u.left,"px"),width:"".concat(u.width,"px")},children:[(0,en.jsxs)(Jj,{children:[(0,en.jsx)(up.A,{size:16}),(0,en.jsx)(qj,{ref:f,type:"text",value:c,onChange:n=>p(n.target.value),placeholder:l}),c&&(0,en.jsx)(Xj,{onClick:()=>p(""),children:(0,en.jsx)(q.A,{size:14})})]}),(0,en.jsx)(nA,{children:b.length>0?b.map(n=>(0,en.jsx)(eA,{$selected:n.value===e,onClick:()=>{return e=n.value,o(e),d(!1),void p("");var e},children:n.label},n.value)):(0,en.jsx)(oA,{children:"\u017d\xe1dn\xe9 v\xfdsledky"})})]}),document.body)]})},lA=n=>{let{isOpen:e,onClose:o,onSuccess:t}=n;const{userDetail:r,token:a,user:i}=(0,z.useContext)(K.cy),{showToast:l}=(0,z.useContext)(H.$o),[s,d]=(0,z.useState)({cislo_pokladny:"",nazev:"",kod_pracoviste:"",nazev_pracoviste:"",ciselna_rada_vpd:"",vpd_od_cislo:"1",ciselna_rada_ppd:"",ppd_od_cislo:"1",poznamka:""}),[c,p]=(0,z.useState)({}),[u,m]=(0,z.useState)(!1),[g,h]=(0,z.useState)([]),[x,f]=(0,z.useState)([]),[b,v]=(0,z.useState)(null),[y,k]=(0,z.useState)(!0),[j,A]=(0,z.useState)([]),[w,_]=(0,z.useState)({uzivatel_id:"",je_zastupce:!1,platne_od:(new Date).toISOString().split("T")[0],platne_do:""});(0,z.useEffect)(()=>{e?C():(d({cislo_pokladny:"",nazev:"",kod_pracoviste:"",nazev_pracoviste:"",ciselna_rada_vpd:"",vpd_od_cislo:"1",ciselna_rada_ppd:"",ppd_od_cislo:"1",poznamka:""}),p({}),v(null),A([]),_({uzivatel_id:"",je_zastupce:!1,platne_od:(new Date).toISOString().split("T")[0],platne_do:""}))},[e]);const C=async()=>{if(a&&null!==i&&void 0!==i&&i.username){k(!0);try{const[n,e]=await Promise.all([(0,uj.Ym)({token:a,username:i.username}),(0,G.Ec)({token:a,username:i.username,show_inactive:!1})]);h(n||[]),f(e||[])}catch(n){l("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat","error")}finally{k(!1)}}},S=(n,e)=>{d(o=>(0,T.A)((0,T.A)({},o),{},{[n]:e})),c[n]&&p(e=>(0,T.A)((0,T.A)({},e),{},{[n]:null}))};if(!e)return null;const P=g.filter(n=>!j.some(e=>e.uzivatel_id===n.id));return Y.createPortal((0,en.jsx)(gj,{onClick:o,children:(0,en.jsxs)(hj,{onClick:n=>n.stopPropagation(),children:[(0,en.jsxs)(xj,{children:[(0,en.jsxs)(fj,{children:[(0,en.jsx)(yv.A,{size:20}),"Vytvo\u0159it novou pokladnu"]}),(0,en.jsx)(bj,{onClick:o,children:(0,en.jsx)(q.A,{size:18})})]}),(0,en.jsxs)(vj,{children:[(0,en.jsxs)(yj,{children:[(0,en.jsxs)(jj,{children:[(0,en.jsx)(I.A,{size:16}),"Z\xe1kladn\xed informace"]}),(0,en.jsxs)(Aj,{children:[(0,en.jsx)(wj,{required:!0,children:"\u010c\xedslo pokladny"}),(0,en.jsx)(_j,{type:"text",value:s.cislo_pokladny,onChange:n=>S("cislo_pokladny",n.target.value),placeholder:"100",hasError:!!c.cislo_pokladny,disabled:u}),c.cislo_pokladny&&(0,en.jsxs)(Cj,{children:[(0,en.jsx)(X.A,{size:12}),c.cislo_pokladny]})]}),(0,en.jsxs)(Aj,{children:[(0,en.jsx)(wj,{required:!0,children:"N\xe1zev pokladny"}),(0,en.jsx)(_j,{type:"text",value:s.nazev,onChange:n=>S("nazev",n.target.value),placeholder:"Hlavn\xed pokladna",hasError:!!c.nazev,disabled:u}),c.nazev&&(0,en.jsxs)(Cj,{children:[(0,en.jsx)(X.A,{size:12}),c.nazev]})]}),(0,en.jsxs)(Aj,{children:[(0,en.jsxs)(wj,{children:[(0,en.jsx)(I.A,{size:14,style:{display:"inline",marginRight:"0.25rem"}}),"\xdasek (zkratka)"]}),(0,en.jsx)(iA,{value:(null===b||void 0===b?void 0:b.id)||"",onChange:n=>(n=>{if(!n)return v(null),void d(n=>(0,T.A)((0,T.A)({},n),{},{kod_pracoviste:"",nazev_pracoviste:""}));const e=x.find(e=>String(e.id)===String(n));v(e||null),e&&d(n=>(0,T.A)((0,T.A)({},n),{},{kod_pracoviste:e.usek_zkr||"",nazev_pracoviste:e.usek_nazev||""}))})(n),options:x.map(n=>({value:n.id,label:"".concat(n.usek_zkr," - ").concat(n.usek_nazev)})),placeholder:"Vyberte \xfasek...",searchPlaceholder:"Hledat \xfasek...",disabled:y,icon:(0,en.jsx)(I.A,{size:16})}),b&&(0,en.jsxs)(tA,{children:[(0,en.jsx)(rA,{children:b.usek_zkr}),(0,en.jsx)(aA,{children:b.usek_nazev})]})]}),(0,en.jsxs)(jj,{style:{marginTop:"2rem"},children:[(0,en.jsx)(gp.A,{size:16}),"\u010c\xedseln\xe9 \u0159ady doklad\u016f"]}),(0,en.jsxs)(zj,{children:[(0,en.jsxs)(Aj,{style:{marginBottom:0},children:[(0,en.jsxs)(wj,{children:[(0,en.jsx)(gp.A,{size:14,style:{display:"inline",marginRight:"0.25rem"}}),"VPD prefix *"]}),(0,en.jsx)(_j,{type:"text",value:s.ciselna_rada_vpd,onChange:n=>S("ciselna_rada_vpd",n.target.value),placeholder:"599",hasError:!!c.ciselna_rada_vpd,disabled:u})]}),(0,en.jsxs)(Aj,{style:{marginBottom:0},children:[(0,en.jsx)(wj,{children:"VPD od \u010d\xedsla"}),(0,en.jsx)(_j,{type:"number",min:"1",value:s.vpd_od_cislo,onChange:n=>S("vpd_od_cislo",n.target.value),placeholder:"1",hasError:!!c.vpd_od_cislo,disabled:u})]})]}),(0,en.jsxs)(zj,{children:[(0,en.jsxs)(Aj,{style:{marginBottom:0},children:[(0,en.jsxs)(wj,{children:[(0,en.jsx)(gp.A,{size:14,style:{display:"inline",marginRight:"0.25rem"}}),"PPD prefix *"]}),(0,en.jsx)(_j,{type:"text",value:s.ciselna_rada_ppd,onChange:n=>S("ciselna_rada_ppd",n.target.value),placeholder:"499",hasError:!!c.ciselna_rada_ppd,disabled:u})]}),(0,en.jsxs)(Aj,{style:{marginBottom:0},children:[(0,en.jsx)(wj,{children:"PPD od \u010d\xedsla"}),(0,en.jsx)(_j,{type:"number",min:"1",value:s.ppd_od_cislo,onChange:n=>S("ppd_od_cislo",n.target.value),placeholder:"1",hasError:!!c.ppd_od_cislo,disabled:u})]})]}),(0,en.jsxs)(Aj,{children:[(0,en.jsx)(wj,{children:"Pozn\xe1mka"}),(0,en.jsx)(Sj,{value:s.poznamka,onChange:n=>S("poznamka",n.target.value),placeholder:"Voliteln\xe1 pozn\xe1mka...",rows:2,disabled:u})]})]}),(0,en.jsxs)(kj,{children:[(0,en.jsxs)(jj,{children:[(0,en.jsx)(xv.A,{size:16}),"P\u0159i\u0159azen\xed u\u017eivatel\xe9 (",j.length,")"]}),(0,en.jsx)(Pj,{children:0===j.length?(0,en.jsxs)(Uj,{children:[(0,en.jsx)(xv.A,{size:48}),(0,en.jsx)("p",{children:"Zat\xedm nejsou p\u0159i\u0159azeni \u017e\xe1dn\xed u\u017eivatel\xe9"})]}):j.map(n=>(0,en.jsxs)(Dj,{isMain:n.je_hlavni,children:[(0,en.jsxs)(Ij,{children:[(0,en.jsx)(Nj,{isMain:n.je_hlavni,children:n.uzivatel_jmeno.substring(0,2).toUpperCase()}),(0,en.jsxs)(Ej,{children:[(0,en.jsxs)($j,{children:[n.uzivatel_jmeno,n.je_hlavni&&(0,en.jsx)(Oj,{children:"Hlavn\xed"})]}),(0,en.jsxs)(Mj,{children:[n.platne_od&&"Od: ".concat(n.platne_od),n.platne_do&&" | Do: ".concat(n.platne_do)]})]})]}),(0,en.jsxs)(Rj,{children:[!n.je_hlavni&&(0,en.jsx)(Fj,{onClick:()=>{return e=n.uzivatel_id,void A(n=>n.map(n=>(0,T.A)((0,T.A)({},n),{},{je_hlavni:n.uzivatel_id===e})));var e},title:"Nastavit jako hlavn\xedho",children:(0,en.jsx)(xv.A,{size:16})}),(0,en.jsx)(Fj,{danger:!0,onClick:()=>{return e=n.uzivatel_id,void A(n=>n.filter(n=>n.uzivatel_id!==e));var e},title:"Odebrat",children:(0,en.jsx)(Mn.A,{size:16})})]})]},n.uzivatel_id))}),(0,en.jsxs)(Lj,{children:[(0,en.jsxs)(jj,{style:{margin:0},children:[(0,en.jsx)(yv.A,{size:16}),"P\u0159idat u\u017eivatele"]}),(0,en.jsxs)(Aj,{children:[(0,en.jsx)(wj,{children:"U\u017eivatel"}),(0,en.jsx)(iA,{value:w.uzivatel_id,onChange:n=>_(e=>(0,T.A)((0,T.A)({},e),{},{uzivatel_id:n})),options:P.map(n=>({value:n.id,label:n.cele_jmeno||"".concat(n.prijmeni||""," ").concat(n.jmeno||"").trim()||n.username})),placeholder:"Vyberte u\u017eivatele...",searchPlaceholder:"Hledat u\u017eivatele...",disabled:u||y,icon:(0,en.jsx)(xv.A,{size:16})})]}),(0,en.jsxs)(Tj,{children:[(0,en.jsxs)("div",{children:[(0,en.jsx)(wj,{children:"Platn\xe9 od"}),(0,en.jsx)(kv.A,{value:w.platne_od,onChange:n=>_(e=>(0,T.A)((0,T.A)({},e),{},{platne_od:n})),placeholder:"Vyberte datum",disabled:u})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)(wj,{children:"Platn\xe9 do"}),(0,en.jsx)(kv.A,{value:w.platne_do,onChange:n=>_(e=>(0,T.A)((0,T.A)({},e),{},{platne_do:n})),placeholder:"Nevyplnit = nav\u017edy",disabled:u})]})]}),(0,en.jsxs)(Vj,{style:{marginBottom:"1rem"},children:[(0,en.jsx)("input",{type:"checkbox",checked:w.je_zastupce,onChange:n=>_(e=>(0,T.A)((0,T.A)({},e),{},{je_zastupce:n.target.checked})),disabled:u}),"Z\xe1stupce (pokud neza\u0161krtnuto, bude hlavn\xed pokladn\xedk)"]}),(0,en.jsxs)(Zj,{className:"secondary",onClick:()=>{if(!w.uzivatel_id)return void l("Vyberte u\u017eivatele","error");const n=String(w.uzivatel_id),e=g.find(e=>String(e.id)===n);if(!e)return void l("U\u017eivatel nenalezen","error");if(j.some(e=>String(e.uzivatel_id)===n))return void l("Tento u\u017eivatel u\u017e je p\u0159i\u0159azen","error");const o=!w.je_zastupce;o&&A(n=>n.map(n=>(0,T.A)((0,T.A)({},n),{},{je_hlavni:!1})));const t=e.cele_jmeno||"".concat(e.prijmeni||""," ").concat(e.jmeno||"").trim()||e.username||"U\u017eivatel",r={uzivatel_id:parseInt(n),uzivatel_jmeno:t,je_hlavni:o,platne_od:w.platne_od,platne_do:w.platne_do||null};A(n=>[...n,r]),_({uzivatel_id:"",je_zastupce:!1,platne_od:(new Date).toISOString().split("T")[0],platne_do:""})},disabled:u||!w.uzivatel_id,children:[(0,en.jsx)(yv.A,{size:16}),"P\u0159idat u\u017eivatele"]})]})]})]}),(0,en.jsxs)(Kj,{children:[(0,en.jsxs)(Hj,{children:[(0,en.jsx)(X.A,{size:16}),"V\u0161echna pole ozna\u010den\xe1 * jsou povinn\xe1"]}),(0,en.jsxs)(Bj,{children:[(0,en.jsxs)(Zj,{className:"secondary",onClick:o,disabled:u,children:[(0,en.jsx)(q.A,{size:16}),"Zru\u0161it"]}),(0,en.jsxs)(Zj,{className:"primary",onClick:async()=>{if((()=>{const n={};return s.cislo_pokladny&&""!==s.cislo_pokladny.trim()||(n.cislo_pokladny="\u010c\xedslo pokladny je povinn\xe9"),s.nazev&&""!==s.nazev.trim()||(n.nazev="N\xe1zev je povinn\xfd"),s.ciselna_rada_vpd&&""!==s.ciselna_rada_vpd.trim()||(n.ciselna_rada_vpd="\u010c\xedseln\xe1 \u0159ada VPD je povinn\xe1"),(!s.vpd_od_cislo||parseInt(s.vpd_od_cislo)<1)&&(n.vpd_od_cislo="VPD od \u010d\xedsla mus\xed b\xfdt >= 1"),s.ciselna_rada_ppd&&""!==s.ciselna_rada_ppd.trim()||(n.ciselna_rada_ppd="\u010c\xedseln\xe1 \u0159ada PPD je povinn\xe1"),(!s.ppd_od_cislo||parseInt(s.ppd_od_cislo)<1)&&(n.ppd_od_cislo="PPD od \u010d\xedsla mus\xed b\xfdt >= 1"),0===j.length&&(n.users="Mus\xedte p\u0159i\u0159adit alespo\u0148 jednoho u\u017eivatele",l("P\u0159idejte alespo\u0148 jednoho u\u017eivatele","error")),p(n),0===Object.keys(n).length})()){m(!0);try{var n;const e={cislo_pokladny:s.cislo_pokladny,nazev:s.nazev,kod_pracoviste:s.kod_pracoviste||null,nazev_pracoviste:s.nazev_pracoviste||null,ciselna_rada_vpd:s.ciselna_rada_vpd,vpd_od_cislo:parseInt(s.vpd_od_cislo),ciselna_rada_ppd:s.ciselna_rada_ppd,ppd_od_cislo:parseInt(s.ppd_od_cislo),poznamka:s.poznamka||null},r=await fv.default.createCashbox(e);if("ok"!==r.status)throw new Error(r.message||"Chyba p\u0159i vytv\xe1\u0159en\xed pokladny");const a=null===(n=r.data)||void 0===n?void 0:n.pokladna_id;if(!a)throw new Error("Backend nevr\xe1til ID nov\xe9 pokladny");for(const n of j){const e={pokladna_id:a,uzivatel_id:n.uzivatel_id,je_hlavni:n.je_hlavni?1:0,platne_od:n.platne_od,platne_do:n.platne_do||null,poznamka:null};await fv.default.assignUserToCashbox(e)}l("\u2713 Pokladna byla \xfasp\u011b\u0161n\u011b vytvo\u0159ena","success"),null===t||void 0===t||t(),o()}catch(e){l(e.message||"Chyba p\u0159i vytv\xe1\u0159en\xed pokladny","error")}finally{m(!1)}}},disabled:u||y,children:[(0,en.jsx)(Q.A,{size:16}),u?"Vytv\xe1\u0159\xedm...":"Vytvo\u0159it pokladnu"]})]})]})]})}),document.body)};var sA,dA,cA,pA,uA,mA,gA,hA,xA,fA,bA,vA,yA,kA,jA,AA,zA,wA,_A,CA,SA,PA,DA,IA,NA,EA,$A,OA,MA,RA,FA,LA,TA,VA,ZA;const KA=w.A.div(sA||(sA=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),HA=w.A.div(dA||(dA=(0,A.A)(["\n  background: white;\n  border-radius: 16px;\n  width: 90%;\n  max-width: 1000px;  /* \u2705 \u0160ir\u0161\xed dialog */\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: slideUp 0.3s ease-out;\n\n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n"]))),BA=w.A.div(cA||(cA=(0,A.A)(["\n  background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);\n  color: white;\n  padding: 1.5rem;\n  border-radius: 16px 16px 0 0;\n  position: relative;\n  text-align: center;\n\n  h2 {\n    margin: 0.5rem 0 0 0;\n    font-size: 1.5rem;\n  }\n"]))),UA=w.A.div(pA||(pA=(0,A.A)(["\n  font-size: 3rem;\n  color: #fbbf24;\n  animation: pulse 2s ease-in-out infinite;\n\n  @keyframes pulse {\n    0%, 100% {\n      transform: scale(1);\n      filter: drop-shadow(0 0 0 rgba(251, 191, 36, 0));\n    }\n    50% {\n      transform: scale(1.1);\n      filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.5));\n    }\n  }\n"]))),WA=w.A.button(uA||(uA=(0,A.A)(["\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 1.2rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: background 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),GA=w.A.div(mA||(mA=(0,A.A)(["\n  padding: 2rem;\n  display: grid;\n  grid-template-columns: 1fr 1fr;  /* \u2705 Dva sloupce */\n  gap: 2rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;  /* Na mobilu jeden sloupec */\n  }\n"]))),YA=w.A.div(gA||(gA=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]))),JA=w.A.div(hA||(hA=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]))),qA=w.A.div(xA||(xA=(0,A.A)(["\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  border: 2px solid #dc2626;\n  border-radius: 12px;\n  padding: 1rem 1.25rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.1);\n\n  h3 {\n    color: #991b1b;\n    margin: 0 0 0.5rem 0;\n    font-size: 1.1rem;\n  }\n\n  p {\n    margin: 0;\n    color: #7f1d1d;\n    line-height: 1.6;\n  }\n"]))),XA=w.A.div(fA||(fA=(0,A.A)(["\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 1.25rem;\n  margin-bottom: 1.5rem;\n\n  h4 {\n    margin: 0 0 1rem 0;\n    color: #374151;\n    font-size: 0.95rem;\n    font-weight: 600;\n  }\n"]))),QA=w.A.div(bA||(bA=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n"]))),nz=w.A.div(vA||(vA=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),ez=w.A.div(yA||(yA=(0,A.A)(["\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 80px;\n  font-size: 0.9rem;\n"]))),oz=w.A.div(kA||(kA=(0,A.A)(["\n  color: #111827;\n  font-family: 'Courier New', monospace;\n  font-weight: 500;\n\n  small {\n    color: #6b7280;\n    font-size: 0.85rem;\n    margin-left: 0.5rem;\n  }\n"]))),tz=w.A.div(jA||(jA=(0,A.A)(["\n  margin-bottom: 1.5rem;\n  background: #fffbeb;\n  border: 1px solid #fbbf24;\n  border-radius: 12px;\n  padding: 1.25rem;\n\n  h4 {\n    color: #dc2626;\n    margin: 0 0 0.75rem 0;\n    font-size: 0.95rem;\n    font-weight: 600;\n  }\n\n  ul {\n    margin: 0;\n    padding-left: 1.5rem;\n\n    li {\n      margin: 0.5rem 0;\n      color: #78350f;\n      line-height: 1.5;\n    }\n  }\n"]))),rz=w.A.div(AA||(AA=(0,A.A)(["\n  label {\n    display: block;\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n    color: #374151;\n    font-size: 0.95rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.75rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1.1rem;\n    font-family: 'Courier New', monospace;\n    font-weight: 600;\n    text-align: center;\n    transition: all 0.2s;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &:disabled {\n      background: #f3f4f6;\n      cursor: not-allowed;\n      opacity: 0.6;\n    }\n  }\n"]))),az=w.A.div(zA||(zA=(0,A.A)(["\n  margin-top: 1.5rem;\n  padding: 1.25rem;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 12px;\n  animation: fadeIn 0.3s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n"])),n=>n.$completed?"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)":"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",n=>n.$completed?"#10b981":"#3b82f6"),iz=w.A.div(wA||(wA=(0,A.A)(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.95rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n\n  svg {\n    color: ",";\n    font-size: 1.1rem;\n  }\n"])),n=>n.$completed?"#047857":"#1e40af",n=>n.$completed?"#10b981":"#3b82f6"),lz=w.A.div(_A||(_A=(0,A.A)(["\n  width: 100%;\n  height: 8px;\n  background: ",";\n  border-radius: 4px;\n  overflow: hidden;\n"])),n=>n.$completed?"rgba(16, 185, 129, 0.2)":"rgba(59, 130, 246, 0.2)"),sz=w.A.div(CA||(CA=(0,A.A)(["\n  height: 100%;\n  background: ",";\n  border-radius: 4px;\n  transition: width 0.3s ease;\n  box-shadow: ",";\n"])),n=>n.$completed?"linear-gradient(90deg, #10b981 0%, #059669 100%)":"linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)",n=>n.$completed?"0 0 10px rgba(16, 185, 129, 0.5)":"0 0 10px rgba(59, 130, 246, 0.5)"),dz=w.A.div(SA||(SA=(0,A.A)(["\n  margin-top: 1rem;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);\n  border: 2px solid #10b981;\n  border-radius: 8px;\n  animation: fadeIn 0.3s ease-in;\n"]))),cz=w.A.div(PA||(PA=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n\n  span {\n    font-size: 1.5rem;\n  }\n\n  h3 {\n    margin: 0;\n    font-size: 1.1rem;\n    color: #065f46;\n    font-weight: 600;\n  }\n"]))),pz=w.A.div(DA||(DA=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.75rem;\n"]))),uz=w.A.div(IA||(IA=(0,A.A)(["\n  padding: 0.75rem;\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n\n  ","\n"])),n=>n.$highlight&&"\n    grid-column: 1 / -1;\n    background: rgba(16, 185, 129, 0.15);\n    border: 1px solid #10b981;\n  "),mz=w.A.span(NA||(NA=(0,A.A)(["\n  font-size: 0.85rem;\n  color: #047857;\n  font-weight: 500;\n"]))),gz=w.A.span(EA||(EA=(0,A.A)(["\n  font-size: 1.1rem;\n  color: #065f46;\n  font-weight: 700;\n"]))),hz=w.A.div($A||($A=(0,A.A)(["\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #fef2f2;\n  border: 2px solid #ef4444;\n  border-radius: 8px;\n  color: #991b1b;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-weight: 500;\n\n  svg {\n    color: #dc2626;\n    font-size: 1.2rem;\n    flex-shrink: 0;\n  }\n"]))),xz=w.A.div(OA||(OA=(0,A.A)(["\n  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);\n  border: 2px dashed #9ca3af;\n  border-radius: 12px;\n  padding: 3rem 2rem;\n  text-align: center;\n  color: #6b7280;\n\n  p {\n    margin: 0.5rem 0 0 0;\n    font-size: 0.95rem;\n  }\n"]))),fz=w.A.div(MA||(MA=(0,A.A)(["\n  font-size: 3rem;\n  color: #9ca3af;\n  margin-bottom: 1rem;\n"]))),bz=w.A.div(RA||(RA=(0,A.A)(["\n  background: #1f2937;\n  border: 2px solid #374151;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n"]))),vz=w.A.div(FA||(FA=(0,A.A)(["\n  background: #374151;\n  color: #9ca3af;\n  padding: 0.75rem 1rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  border-bottom: 1px solid #4b5563;\n"]))),yz=w.A.div(LA||(LA=(0,A.A)(["\n  padding: 1rem;\n  max-height: 400px;\n  overflow-y: auto;\n\n  pre {\n    margin: 0;\n    color: #d1d5db;\n    font-family: 'Courier New', Courier, monospace;\n    font-size: 0.85rem;\n    line-height: 1.5;\n    white-space: pre-wrap;\n    word-break: break-word;\n  }\n\n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #111827;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #4b5563;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #6b7280;\n  }\n"]))),kz=w.A.div(TA||(TA=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-end;\n  background: #f9fafb;\n  border-radius: 0 0 16px 16px;\n"]))),jz=w.A.button(VA||(VA=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border: 2px solid #d1d5db;\n  background: white;\n  color: #374151;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 0.95rem;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Az=w.A.button(ZA||(ZA=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  border: none;\n  background: ",";\n  color: white;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.95rem;\n  box-shadow: ",";\n\n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: ",";\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>"success"===n.$variant?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",n=>"success"===n.$variant?"0 2px 8px rgba(16, 185, 129, 0.2)":"0 2px 8px rgba(220, 38, 38, 0.2)",n=>"success"===n.$variant?"0 4px 12px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(220, 38, 38, 0.3)"),zz=n=>{let{isOpen:e,onClose:o,assignment:t,onConfirm:r}=n;const[a,i]=(0,z.useState)((new Date).getFullYear()),[l,s]=(0,z.useState)(!1),[d,c]=(0,z.useState)(!1),[p,u]=(0,z.useState)(null),[m,g]=(0,z.useState)({current:0,total:0,phase:""}),[h,x]=(0,z.useState)(null),f=()=>{console.log("\ud83d\udeaa ZAV\xcdR\xc1M DIALOG - handleClose() vol\xe1n"),s(!1),c(!1),u(null),g({current:0,total:0,phase:""}),x(null),o()};return e?(0,en.jsx)(KA,{children:(0,en.jsxs)(HA,{onClick:n=>n.stopPropagation(),children:[(0,en.jsxs)(BA,{children:[(0,en.jsx)(UA,{children:(0,en.jsx)(_.g,{icon:C.zpE})}),(0,en.jsx)("h2",{children:"\u26a0\ufe0f FORCE P\u0158EPO\u010cET DOKLAD\u016e"}),(0,en.jsx)(WA,{onClick:f,disabled:l,children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(GA,{children:[(0,en.jsxs)(YA,{children:[(0,en.jsxs)(qA,{children:[(0,en.jsx)("h3",{children:"\ud83d\udea8 KRITICK\xc1 OPERACE"}),(0,en.jsxs)("p",{children:["Tato funkce ",(0,en.jsx)("strong",{children:"p\u0159e\u010d\xedsluje v\u0161echny doklady"})," v dan\xe9m roce v\u010detn\u011b ",(0,en.jsx)("strong",{children:"uzav\u0159en\xfdch a zam\u010den\xfdch m\u011bs\xedc\u016f"}),"!"]})]}),(0,en.jsxs)(XA,{children:[(0,en.jsx)("h4",{children:"\ud83d\udccb Pokladna:"}),(0,en.jsxs)(QA,{children:[(0,en.jsxs)(nz,{children:[(0,en.jsx)(ez,{children:"\u010c\xedslo:"}),(0,en.jsx)(oz,{children:t.cislo_pokladny})]}),(0,en.jsxs)(nz,{children:[(0,en.jsx)(ez,{children:"VPD \u0159ada:"}),(0,en.jsxs)(oz,{children:[t.ciselna_rada_vpd," ",(0,en.jsxs)("small",{children:["(od ",t.vpd_od_cislo||1,")"]})]})]}),(0,en.jsxs)(nz,{children:[(0,en.jsx)(ez,{children:"PPD \u0159ada:"}),(0,en.jsxs)(oz,{children:[t.ciselna_rada_ppd," ",(0,en.jsxs)("small",{children:["(od ",t.ppd_od_cislo||1,")"]})]})]})]})]}),(0,en.jsxs)(tz,{children:[(0,en.jsx)("h4",{children:"\u26a0\ufe0f D\u016fsledky:"}),(0,en.jsxs)("ul",{children:[(0,en.jsxs)("li",{children:["\ud83d\udd04 Zm\u011bn\xed se ",(0,en.jsx)("strong",{children:"v\u0161echna \u010d\xedsla doklad\u016f"})," v roce"]}),(0,en.jsx)("li",{children:"\ud83d\udd13 Ignoruje stav m\u011bs\xedc\u016f (aktivn\xed, uzav\u0159en\xe9, zam\u010den\xe9)"}),(0,en.jsxs)("li",{children:["\ud83d\udcdd PDF dokumenty budou m\xedt ",(0,en.jsx)("strong",{children:"jin\xe1 \u010d\xedsla ne\u017e DB"})]}),(0,en.jsxs)("li",{children:["\u23ea Operaci ",(0,en.jsx)("strong",{children:"nelze vr\xe1tit zp\u011bt"})]})]})]})]}),(0,en.jsxs)(JA,{children:[(0,en.jsxs)(rz,{children:[(0,en.jsx)("label",{children:"\ud83d\udcc5 Rok pro p\u0159epo\u010det:"}),(0,en.jsx)("input",{type:"number",min:"2020",max:"2030",value:a,onChange:n=>i(parseInt(n.target.value)),disabled:l||d})]}),(l||d)&&m.phase&&(0,en.jsxs)(az,{$completed:d,children:[(0,en.jsxs)(iz,{$completed:d,children:[d?(0,en.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2705"}):(0,en.jsx)(_.g,{icon:C.z1G,spin:!0}),m.phase]}),m.total>0&&(0,en.jsx)(lz,{children:(0,en.jsx)(sz,{$completed:d,style:{width:"".concat(m.current/m.total*100,"%")}})})]}),d&&h&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(dz,{children:[(0,en.jsxs)(cz,{children:[(0,en.jsx)("span",{children:"\u2705"}),(0,en.jsx)("h3",{children:"P\u0159epo\u010det dokon\u010den!"})]}),(0,en.jsxs)(pz,{children:[(0,en.jsxs)(uz,{$highlight:!0,children:[(0,en.jsx)(mz,{children:"Celkem p\u0159e\u010d\xedslov\xe1no:"}),(0,en.jsxs)(gz,{children:[h.total_renumbered," polo\u017eek"]})]}),(0,en.jsxs)(uz,{children:[(0,en.jsx)(mz,{children:"Rok:"}),(0,en.jsx)(gz,{children:h.year})]}),(0,en.jsxs)(uz,{children:[(0,en.jsx)(mz,{children:"\ud83d\udce4 V\xfddaje (VPD):"}),(0,en.jsxs)(gz,{children:[h.vpd_renumbered," polo\u017eek"]})]}),(0,en.jsxs)(uz,{children:[(0,en.jsx)(mz,{children:"\ud83d\udce5 P\u0159\xedjmy (PPD):"}),(0,en.jsxs)(gz,{children:[h.ppd_renumbered," polo\u017eek"]})]})]})]}),h.debug&&(0,en.jsxs)(bz,{children:[(0,en.jsx)(vz,{children:"\ud83d\udd0d Debug informace z backendu"}),(0,en.jsx)(yz,{children:(0,en.jsx)("pre",{children:JSON.stringify(h.debug,null,2)})})]})]}),p&&(0,en.jsxs)(hz,{children:[(0,en.jsx)(_.g,{icon:C.zpE}),p]}),!l&&!d&&!p&&(0,en.jsxs)(xz,{children:[(0,en.jsx)(fz,{children:(0,en.jsx)(_.g,{icon:C.yqK})}),(0,en.jsx)("p",{children:"V\xfdsledky p\u0159epo\u010dtu se zobraz\xed zde po spu\u0161t\u011bn\xed operace."})]})]})]}),(0,en.jsxs)(kz,{children:[!d&&(0,en.jsx)(jz,{onClick:f,disabled:l,type:"button",children:p?"Zav\u0159\xedt":"Zru\u0161it"}),d?(0,en.jsxs)(Az,{onClick:f,$variant:"success",type:"button",children:[(0,en.jsx)(_.g,{icon:C.yqK}),"Hotovo"]}):(0,en.jsx)(Az,{onClick:async n=>{console.log("\ud83d\udd18 KLIKNUTO NA PROV\xc9ST P\u0158EPO\u010cET - handleConfirm() vol\xe1n"),n&&(n.preventDefault(),n.stopPropagation(),console.log("\u2705 Event.preventDefault() a stopPropagation() zavol\xe1ny")),s(!0),c(!1),u(null),x(null),g({current:0,total:0,phase:"Inicializace..."});try{g({current:1,total:4,phase:"Na\u010d\xedt\xe1n\xed dat pokladny..."});const n=t.pokladna_id;console.log("\ud83d\udd27 Force p\u0159epo\u010det START:",{pokladnaId:n,year:a});const e=await r(n,a);if(console.log("\ud83d\udd27 Force p\u0159epo\u010det RESPONSE:",e),console.log("\ud83d\udd0d FULL RESPONSE (v\u010detn\u011b debug):",JSON.stringify(e,null,2)),e&&"ok"===e.status)g({current:4,total:4,phase:"Hotovo! P\u0159e\u010d\xedslov\xe1no ".concat(e.data.total_renumbered," polo\u017eek")}),x((0,T.A)((0,T.A)({},e.data),{},{debug:e.debug||null})),c(!0),s(!1);else{const n=(null===e||void 0===e?void 0:e.message)||"Backend endpoint /cashbook-force-renumber je\u0161t\u011b nen\xed implementov\xe1n";console.error("\u274c Force p\u0159epo\u010det ERROR:",n,e),u(n),g({current:0,total:0,phase:""}),s(!1)}}catch(p){var e,o,i,l,d;console.error("\u274c Force p\u0159epo\u010det EXCEPTION:",p),console.error("Error details:",{message:p.message,response:null===(e=p.response)||void 0===e?void 0:e.data,status:null===(o=p.response)||void 0===o?void 0:o.status});let n="Chyba p\u0159i komunikaci se serverem";404===(null===(i=p.response)||void 0===i?void 0:i.status)?n="Backend endpoint /cashbook-force-renumber je\u0161t\u011b nen\xed implementov\xe1n (404)":null!==(l=p.response)&&void 0!==l&&null!==(d=l.data)&&void 0!==d&&d.message?n=p.response.data.message:p.message&&(n=p.message),u(n),g({current:0,total:0,phase:""}),s(!1)}},disabled:l,type:"button",children:l?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.z1G,spin:!0}),"P\u0159epo\u010d\xedt\xe1v\xe1m..."]}):p?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.yqK}),"Zkusit znovu"]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.yqK}),"Prov\xe9st p\u0159epo\u010det"]})})]})]})}):null};var wz,_z,Cz,Sz,Pz,Dz,Iz,Nz,Ez,$z,Oz,Mz,Rz,Fz,Lz,Tz,Vz,Zz,Kz,Hz,Bz,Uz,Wz,Gz,Yz,Jz,qz,Xz,Qz,nw,ew,ow,tw,rw,aw,iw,lw,sw,dw,cw,pw,uw,mw,gw,hw,xw,fw,bw,vw,yw,kw,jw,Aw,zw,ww,_w,Cw;const Sw=w.A.div(wz||(wz=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),Pw=w.A.div(_z||(_z=(0,A.A)(["\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);\n"]))),Dw=w.A.h3(Cz||(Cz=(0,A.A)(["\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #1e40af;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n"]))),Iw=w.A.div(Sz||(Sz=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Nw=w.A.label(Pz||(Pz=(0,A.A)(['\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-weight: 500;\n  color: #0c4a6e;\n\n  input[type="checkbox"] {\n    width: 18px;\n    height: 18px;\n    cursor: pointer;\n  }\n']))),Ew=w.A.div(Dz||(Dz=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #475569;\n  margin-top: 0.5rem;\n  line-height: 1.4;\n"]))),$w=w.A.button(Iz||(Iz=(0,A.A)(["\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 1rem;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),Ow=w.A.div(Nz||(Nz=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),Mw=w.A.div(Ez||(Ez=(0,A.A)(["\n  position: relative;\n  flex: 1;\n  width: 100%;\n  max-width: 100%;\n"]))),Rw=(0,w.A)(_.g)($z||($z=(0,A.A)(["\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n  font-size: 1rem;\n"]))),Fw=w.A.button(Oz||(Oz=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Lw=w.A.input(Mz||(Mz=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n"]))),Tw=w.A.button(Rz||(Rz=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: ",";\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"])),n=>n.$primary?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"white",n=>n.$primary?"white":"#64748b",n=>n.$primary?"#3b82f6":"#e2e8f0",n=>n.$primary?"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)":"#f8fafc",n=>n.$primary?"#2563eb":"#cbd5e1"),Vw=w.A.div(Fz||(Fz=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e2e8f0;\n"]))),Zw=w.A.table(Lz||(Lz=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n\n  ","\n"])),"\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n"),Kw=w.A.thead(Tz||(Tz=(0,A.A)(["\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"]))),Hw=w.A.tr(Vz||(Vz=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),Bw=w.A.th(Zz||(Zz=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  color: white;\n  font-weight: 600;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: ",";\n  user-select: none;\n\n  &:hover {\n    background: ",";\n  }\n\n  &:first-of-type {\n    text-align: left;\n  }\n"])),n=>n.$sortable?"pointer":"default",n=>n.$sortable?"rgba(255, 255, 255, 0.1)":"transparent"),Uw=w.A.tbody(Kz||(Kz=(0,A.A)([""]))),Ww=w.A.td(Hz||(Hz=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  vertical-align: middle;\n  border-bottom: 1px solid #e2e8f0;\n\n  &:first-of-type {\n    text-align: left;\n  }\n"]))),Gw=w.A.tr(Bz||(Bz=(0,A.A)(["\n  transition: background 0.2s;\n\n  &:hover {\n    background: #f8fafc;\n  }\n\n  &:last-child td {\n    border-bottom: none;\n  }\n"]))),Yw=(w.A.div(Uz||(Uz=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 500;\n  color: #1e293b;\n"]))),w.A.div(Wz||(Wz=(0,A.A)(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  flex-shrink: 0;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"])),n=>n.$inactive?"#e2e8f0":"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"),w.A.span(Gz||(Gz=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.375rem 0.75rem;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),n=>"vpd"===n.$type?"#dcfce7":"#fef3c7",n=>"vpd"===n.$type?"#15803d":"#b45309",n=>"vpd"===n.$type?"#86efac":"#fde68a")),Jw=w.A.span(Yz||(Yz=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.375rem 0.75rem;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.75rem;\n\n  svg {\n    font-size: 0.875rem;\n  }\n"])),n=>n.$active?"#dcfce7":"#fee2e2",n=>n.$active?"#15803d":"#991b1b",n=>n.$active?"#86efac":"#fca5a5"),qw=w.A.div(Jz||(Jz=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  justify-content: center;\n  align-items: center;\n"]))),Xw=w.A.button(qz||(qz=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"])),n=>n.$warning?"#f59e0b":"#64748b",n=>n.$warning?"#fffbeb":"#f1f5f9",n=>n.$delete||n.$warning?"#dc2626":"#3b82f6"),Qw=w.A.div(Xz||(Xz=(0,A.A)(["\n  padding: 1.5rem 2rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  border-bottom: 1px solid #000;\n"]))),n_=w.A.h4(Qz||(Qz=(0,A.A)(["\n  margin: 0 0 1rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n"]))),e_=w.A.div(nw||(nw=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n"]))),o_=w.A.div(ew||(ew=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  transition: all 0.2s;\n\n  &:hover {\n    border-color: #3b82f6;\n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);\n  }\n"]))),t_=w.A.div(ow||(ow=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),r_=w.A.div(tw||(tw=(0,A.A)(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 0.875rem;\n"]))),a_=w.A.div(rw||(rw=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n"]))),i_=w.A.span(aw||(aw=(0,A.A)(["\n  font-weight: 600;\n  color: #1e293b;\n  font-size: 0.875rem;\n"]))),l_=w.A.span(iw||(iw=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n"]))),s_=w.A.div(lw||(lw=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),d_=w.A.span(sw||(sw=(0,A.A)(["\n  padding: 0.25rem 0.5rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 600;\n"]))),c_=w.A.button(dw||(dw=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 4px;\n  color: white;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\n    transform: translateY(-1px);\n  }\n"]))),p_=w.A.button(cw||(cw=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: white;\n  border: 2px dashed #cbd5e1;\n  border-radius: 6px;\n  color: #3b82f6;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    background: #eff6ff;\n    border-color: #3b82f6;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"]))),u_=w.A.div(pw||(pw=(0,A.A)(["\n  text-align: center;\n  padding: 2rem;\n  color: #94a3b8;\n  font-size: 0.875rem;\n"]))),m_=w.A.div(uw||(uw=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n"]))),g_=(w.A.div(mw||(mw=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),w.A.div(gw||(gw=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n"]))),w.A.button(hw||(hw=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),w.A.select(xw||(xw=(0,A.A)(["\n  padding: 0.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background: white;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n"])))),h_=w.A.button(fw||(fw=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n"]))),x_=w.A.div(bw||(bw=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),f_=w.A.div(vw||(vw=(0,A.A)(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n\n  svg {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n    opacity: 0.5;\n  }\n\n  p {\n    font-size: 1rem;\n    margin: 0;\n  }\n"]))),b_=w.A.div(yw||(yw=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 10000;\n  cursor: pointer;\n"]))),v_=w.A.div(kw||(kw=(0,A.A)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  min-width: 400px;\n  max-width: 500px;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  z-index: 10001;\n  cursor: default;\n"]))),y_=w.A.h3(jw||(jw=(0,A.A)(["\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  color: #dc2626;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),k_=w.A.p(Aw||(Aw=(0,A.A)(["\n  margin: 0 0 1.5rem 0;\n  color: #64748b;\n  font-size: 0.95rem;\n  line-height: 1.5;\n\n  strong {\n    color: #1e293b;\n    font-weight: 600;\n  }\n"]))),j_=w.A.div(zw||(zw=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n"]))),A_=w.A.button(ww||(ww=(0,A.A)(["\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),z_=(0,w.A)(A_)(_w||(_w=(0,A.A)(["\n  background: white;\n  color: #64748b;\n  border: 1px solid #cbd5e1;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n"]))),w_=(0,w.A)(A_)(Cw||(Cw=(0,A.A)(["\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  color: white;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\n    transform: translateY(-1px);\n  }\n"]))),__=()=>{const{user:n,hasPermission:e}=(0,z.useContext)(K.cy),{showToast:o}=(0,z.useContext)(H.$o),{invalidateCache:t}=(0,z.useContext)(B.y)||{},r=null===n||void 0===n?void 0:n.user_id,a=n=>{const e=r||"anon";return"".concat(n,"_").concat(e)},i=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const o=localStorage.getItem(a(n));return null!==o?JSON.parse(o):e}catch(o){return e}},l=(n,e)=>{try{localStorage.setItem(a(n),JSON.stringify(e))}catch(o){}},[s,d]=(0,z.useState)([]),[c,p]=(0,z.useState)(!0),[u,m]=(0,z.useState)(""),[g,h]=(0,z.useState)(!0),[x,f]=(0,z.useState)(!1),[b,v]=(0,z.useState)(()=>i("cashbook_pageSize",25)),[y,k]=(0,z.useState)(()=>i("cashbook_pageIndex",0)),[j,A]=(0,z.useState)(!1),[w,S]=(0,z.useState)(!1),[P,D]=(0,z.useState)(!1),[I,N]=(0,z.useState)(null),[E,$]=(0,z.useState)({show:!1,assignmentId:null,userName:""}),[O,M]=(0,z.useState)(!1),[R,F]=(0,z.useState)(null),L=e("CASH_BOOK_MANAGE");(0,z.useEffect)(()=>{l("cashbook_pageSize",b)},[b,r]),(0,z.useEffect)(()=>{l("cashbook_pageIndex",y)},[y,r]),(0,z.useEffect)(()=>{T()},[]),(0,z.useEffect)(()=>{void 0!==L&&T()},[L]);const T=async()=>{p(!0);try{const n=await fv.default.getCashboxList(!0,!0);if("ok"===n.status){const e=n.data.pokladny||[];d(e)}else null===o||void 0===o||o("Chyba p\u0159i na\u010d\xedt\xe1n\xed pokladen",{type:"error"});const e=await fv.default.getSettings("cashbook_use_prefix");if("ok"===e.status&&e.data){const n=e.data.value;h("1"===n||1===n)}}catch(n){null===o||void 0===o||o("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat",{type:"error"}),console.error("Error loading cashbook data:",n)}finally{p(!1)}};(0,z.useEffect)(()=>{if(j&&null!==I&&void 0!==I&&I.id&&s.length>0){const n=s.find(n=>n.id===I.id);n&&N(n)}},[s,j,null===I||void 0===I?void 0:I.id]);const V=(0,z.useCallback)(n=>{let{row:e}=n;const o=e.original,t=o.uzivatele||[],r=(new Date).toISOString().split("T")[0],a=t.filter(n=>!n.platne_do||n.platne_do>r);return L?(0,en.jsxs)(Qw,{children:[(0,en.jsxs)(n_,{children:[(0,en.jsx)(xv.A,{size:16}),"P\u0159i\u0159azen\xe1 (",a.length,")"]}),0===a.length?(0,en.jsx)(u_,{children:'\u017d\xe1dn\xe1 p\u0159i\u0159azen\xed. Klikn\u011bte na "+ P\u0159i\u0159adit u\u017eivatele" pro p\u0159id\xe1n\xed.'}):(0,en.jsx)(e_,{children:a.map(n=>(0,en.jsxs)(o_,{children:[(0,en.jsxs)(t_,{children:[(0,en.jsx)(r_,{children:(0,en.jsx)(xv.A,{size:16})}),(0,en.jsxs)(a_,{children:[(0,en.jsxs)(i_,{children:[n.uzivatel_cele_jmeno,1===n.je_hlavni||"1"===n.je_hlavni?(0,en.jsx)(d_,{style:{marginLeft:"0.5rem"},children:"Hlavn\xed"}):(0,en.jsx)(d_,{style:{marginLeft:"0.5rem",background:"linear-gradient(135deg, #64748b 0%, #475569 100%)"},children:"Z\xe1stupce"})]}),(0,en.jsxs)(l_,{children:[n.username,n.lokalita_nazev&&" | ".concat(n.lokalita_nazev),n.usek_nazev&&" | ".concat(n.usek_nazev),"\u2022 P\u0159i\u0159azena od: ",n.platne_od,n.platne_do?" \u2022 do: ".concat(n.platne_do):" \u2022 nav\u017edy",n.poznamka&&" \u2022 ".concat(n.poznamka)]})]})]}),(0,en.jsx)(s_,{children:(0,en.jsxs)(c_,{onClick:()=>G(n.prirazeni_id,n.uzivatel_cele_jmeno),title:"Odebrat u\u017eivatele z pokladny",children:[(0,en.jsx)(_.g,{icon:C.yLS}),"Odebrat"]})})]},n.prirazeni_id))}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:(0,en.jsxs)(p_,{onClick:()=>Z(o.id),children:[(0,en.jsx)(_.g,{icon:C.QLR}),"P\u0159i\u0159adit u\u017eivatele"]})})]}):null},[L]),Z=(0,z.useCallback)(n=>{o("Funkce p\u0159i\u0159azen\xed u\u017eivatele - p\u0159ipravena pro implementaci","info")},[o]),G=(0,z.useCallback)((n,e)=>{$({show:!0,assignmentId:n,userName:e})},[]),J=(0,z.useCallback)(async()=>{const{assignmentId:n,userName:e}=E;$({show:!1,assignmentId:null,userName:""}),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\uddd1\ufe0f  CASHBOOK TAB - ODEBR\xc1N\xcd U\u017dIVATELE Z POD\u0158\xc1DKU"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udccb Assignment ID:",n),console.log("\ud83d\udc64 U\u017eivatel:",e);try{var r;console.log("\ud83d\udce1 Vol\xe1m API: cashbookAPI.unassignUserFromCashbox()");const i=await fv.default.unassignUserFromCashbox(n);if(console.log("\u2705 API Response:",JSON.stringify(i,null,2)),console.log("   Status:",null===i||void 0===i?void 0:i.status),console.log("   Message:",null===i||void 0===i?void 0:i.message),console.log("   Affected rows:",null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.affected_rows),"ok"===i.status){var a;const r=null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.affected_rows;if(0===r||"0"===r)return console.warn("\u26a0\ufe0f  BE vr\xe1tilo affected_rows = 0 (\u017e\xe1dn\xe1 zm\u011bna v DB)"),console.warn("   Mo\u017en\xe9 d\u016fvody:"),console.warn("   1. Z\xe1znam s prirazeni_id =",n,"neexistuje"),console.warn("   2. Z\xe1znam u\u017e m\xe1 platne_do nastaven\xe9 na dne\u0161n\xed datum"),console.warn("   3. SQL WHERE podm\xednka je \u0161patn\u011b"),o('VAROV\xc1N\xcd: U\u017eivatel "'.concat(e,'" nebyl odebr\xe1n - z\xe1znam u\u017e neexistuje nebo byl ji\u017e deaktivov\xe1n'),"warning"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\u26a0\ufe0f  CASHBOOK TAB - WARNING (affected_rows = 0)"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\udd04 Vol\xe1m loadData() pro refresh..."),T(),void(null===t||void 0===t||t("cashbook"));console.log("\u2705 BE potvrdilo \xfasp\u011b\u0161n\xe9 odebr\xe1n\xed (affected_rows:",r,")"),o('U\u017eivatel "'.concat(e,'" byl \xfasp\u011b\u0161n\u011b odebr\xe1n z pokladny'),"success"),console.log("\ud83d\udd04 Vol\xe1m loadData() pro refresh..."),T(),null===t||void 0===t||t("cashbook"),console.log("\u2705 loadData() zavol\xe1no"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\ud83d\uddd1\ufe0f  CASHBOOK TAB - SUCCESS"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}else console.error("\u274c BE vr\xe1tilo ne\xfasp\u011b\u0161n\xfd status:",null===i||void 0===i?void 0:i.status),o(i.message||"Chyba p\u0159i odeb\xedr\xe1n\xed u\u017eivatele","error"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\u274c CASHBOOK TAB - FAILED"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}catch(l){var i;console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("\u274c CASHBOOK TAB - ERROR"),console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("Error:",l),console.error("Response:",null===l||void 0===l?void 0:l.response),console.error("Response Data:",null===l||void 0===l||null===(i=l.response)||void 0===i?void 0:i.data),o("Chyba p\u0159i odeb\xedr\xe1n\xed u\u017eivatele z pokladny","error")}},[E,o,t]),q=(0,z.useCallback)(()=>{$({show:!1,assignmentId:null,userName:""})},[]),X=(0,z.useMemo)(()=>[{id:"expander",header:n=>{let{table:e}=n;const o=e.getIsAllRowsExpanded();return(0,en.jsx)(Xw,{onClick:()=>e.toggleAllRowsExpanded(),title:o?"Sbalit v\u0161e":"Rozbalit v\u0161e",style:{color:"white"},onMouseEnter:n=>n.currentTarget.style.color="#3b82f6",onMouseLeave:n=>n.currentTarget.style.color="white",children:(0,en.jsx)(_.g,{icon:o?C.EZy:C.QLR})})},cell:n=>{let{row:e}=n;return 0===(e.original.pocet_uzivatelu||0)?null:(0,en.jsx)(Xw,{onClick:()=>e.toggleExpanded(),title:e.getIsExpanded()?"Zabalit u\u017eivatele":"Rozbalit u\u017eivatele",children:(0,en.jsx)(_.g,{icon:e.getIsExpanded()?C.EZy:C.QLR})})}},{accessorKey:"cislo_pokladny",header:"\u010c\xedslo",cell:n=>{let{row:e}=n;return(0,en.jsx)("div",{style:{fontWeight:600,fontSize:"1.125rem",color:"#1e40af"},children:e.original.cislo_pokladny})}},{accessorKey:"nazev",header:"N\xe1zev pokladny",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{children:[(0,en.jsx)("div",{style:{fontWeight:500},children:e.original.nazev||"Pokladna ".concat(e.original.cislo_pokladny)}),e.original.kod_pracoviste&&(0,en.jsxs)("div",{style:{fontSize:"0.75rem",color:"#94a3b8",marginTop:"0.125rem"},children:[e.original.kod_pracoviste," - ",e.original.nazev_pracoviste]})]})}},{accessorKey:"ciselna_rada_vpd",header:"VPD",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{children:[(0,en.jsxs)(Yw,{$type:"vpd",children:["V",e.original.ciselna_rada_vpd]}),(0,en.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["od ",e.original.vpd_od_cislo||1]})]})}},{accessorKey:"ciselna_rada_ppd",header:"PPD",cell:n=>{let{row:e}=n;return(0,en.jsxs)("div",{children:[(0,en.jsxs)(Yw,{$type:"ppd",children:["P",e.original.ciselna_rada_ppd]}),(0,en.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:["od ",e.original.ppd_od_cislo||1]})]})}},{accessorKey:"pocet_uzivatelu",header:"U\u017eivatel\u016f",cell:n=>{let{row:e}=n;const o=e.original.pocet_uzivatelu||0;return(0,en.jsxs)("div",{style:{fontSize:"0.875rem",color:o>0?"#059669":"#94a3b8",fontWeight:o>0?600:400},children:[(0,en.jsx)(xv.A,{style:{width:"14px",height:"14px",display:"inline",marginRight:"4px"}}),o," ",1===o?"u\u017eivatel":o<5?"u\u017eivatel\xe9":"u\u017eivatel\u016f"]})}},{accessorKey:"aktivni",header:"Status",cell:n=>{let{row:e}=n;return(0,en.jsxs)(Jw,{$active:e.original.aktivni,children:[(0,en.jsx)(_.g,{icon:e.original.aktivni?C.SGM:C.s0Q}),e.original.aktivni?"Aktivn\xed":"Neaktivn\xed"]})}},{id:"actions",header:()=>(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>{let{row:e}=n;return(0,en.jsxs)(qw,{children:[(0,en.jsx)(Xw,{onClick:()=>{return n=e.original,N(n),void A(!0);var n},disabled:!L,title:"Upravit pokladnu (VPD/PPD)",children:(0,en.jsx)(_.g,{icon:C.MT7})}),(0,en.jsx)(Xw,{onClick:()=>{return n=e.original,N(n),void S(!0);var n},disabled:!L,$delete:!0,title:"Smazat pokladnu",children:(0,en.jsx)(_.g,{icon:C.yLS})}),L&&(0,en.jsx)(Xw,{onClick:()=>(async n=>{console.log("\ud83d\udd27 FORCE RENUMBER - pokladna ID:",n.id);try{const e={pokladna_id:n.id,cislo_pokladny:n.cislo_pokladny,nazev:n.nazev,ciselna_rada_vpd:n.ciselna_rada_vpd,ciselna_rada_ppd:n.ciselna_rada_ppd};console.log("\ud83d\udd27 FORCE RENUMBER - pou\u017eiji pokladnu:",e),F(e),M(!0)}catch(e){console.error("Chyba p\u0159i p\u0159\xedprav\u011b force renumber:",e),null===o||void 0===o||o("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat pokladny",{type:"error"})}})(e.original),$warning:!0,title:"Force p\u0159epo\u010det po\u0159ad\xed doklad\u016f (ADMIN)",children:(0,en.jsx)(_.g,{icon:C.yqK})})]})}}],[L]),Q=(0,U.N4)({data:s,columns:X,getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)(),getFilteredRowModel:(0,W.hM)(),getPaginationRowModel:(0,W.kW)(),getExpandedRowModel:(0,W.D0)(),enableExpanding:!0,getRowCanExpand:()=>!0,initialState:{pagination:{pageSize:25,pageIndex:0}},state:{globalFilter:u,pagination:{pageSize:b,pageIndex:y}},onPaginationChange:n=>{const e="function"===typeof n?n({pageSize:b,pageIndex:y}):n;v(e.pageSize),k(e.pageIndex)},globalFilterFn:(n,e,o)=>{const t=String(o).toLowerCase();return[n.original.uzivatel_jmeno,n.original.uzivatel_prijmeni,n.original.uzivatel_id,n.original.cislo_pokladny,n.original.ciselna_rada_vpd,n.original.ciselna_rada_ppd].map(n=>String(n||"").toLowerCase()).some(n=>n.includes(t))},state:{globalFilter:u},onGlobalFilterChange:m});return c?(0,en.jsx)(Sw,{children:(0,en.jsxs)(f_,{children:[(0,en.jsx)(_.g,{icon:C.OtC,spin:!0}),(0,en.jsx)("p",{children:"Na\u010d\xedt\xe1n\xed..."})]})}):(0,en.jsxs)(Sw,{children:[L&&(0,en.jsxs)(Pw,{children:[(0,en.jsxs)(Dw,{children:[(0,en.jsx)(_.g,{icon:C.dB}),"Glob\xe1ln\xed nastaven\xed pokladny"]}),(0,en.jsx)(Iw,{children:(0,en.jsxs)(Nw,{children:[(0,en.jsx)("input",{type:"checkbox",checked:g,onChange:n=>h(n.target.checked)}),"Pou\u017e\xedt prefixovan\xe1 \u010d\xedsla doklad\u016f"]})}),(0,en.jsxs)(Ew,{children:["Pokud je zapnuto, \u010d\xedsla doklad\u016f budou zobrazena ve form\xe1tu ",(0,en.jsx)("strong",{children:"V599-001"})," m\xedsto ",(0,en.jsx)("strong",{children:"V001"}),".",(0,en.jsx)("br",{}),"Prefix je tvo\u0159en z \u010d\xedseln\xe9 \u0159ady VPD/PPD p\u0159i\u0159azen\xe9 u\u017eivateli."]}),(0,en.jsxs)($w,{onClick:async()=>{if(L){f(!0);try{const n=g?"1":"0";console.log("\ud83d\udd0d Saving cashbook_use_prefix:",n);const e=await fv.default.updateSetting("cashbook_use_prefix",n,"Pou\u017e\xedvat prefixovan\xe1 \u010d\xedsla doklad\u016f (V599-001)");console.log("\ud83d\udd0d Save result:",e),"ok"===e.status?(null===o||void 0===o||o("Nastaven\xed ulo\u017eeno",{type:"success"}),t&&t(["cashbook","settings"])):null===o||void 0===o||o("Chyba p\u0159i ukl\xe1d\xe1n\xed nastaven\xed",{type:"error"})}catch(n){null===o||void 0===o||o("Chyba p\u0159i ukl\xe1d\xe1n\xed nastaven\xed",{type:"error"}),console.error("Error saving settings:",n)}finally{f(!1)}}else null===o||void 0===o||o("Nem\xe1te opr\xe1vn\u011bn\xed pro spr\xe1vu nastaven\xed",{type:"error"})},disabled:x,children:[(0,en.jsx)(_.g,{icon:C.hSh}),x?"Ukl\xe1d\xe1m...":"Ulo\u017eit nastaven\xed"]})]}),(0,en.jsxs)(Ow,{children:[(0,en.jsxs)(Mw,{children:[(0,en.jsx)(Rw,{icon:C.MjD}),(0,en.jsx)(Lw,{type:"text",placeholder:"Hledat v p\u0159i\u0159azen\xedch...",value:u,onChange:n=>m(n.target.value)}),u&&(0,en.jsx)(Fw,{onClick:()=>m(""),title:"Vymazat vyhled\xe1v\xe1n\xed",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),L&&(0,en.jsxs)(Tw,{onClick:()=>{D(!0)},$primary:!0,children:[(0,en.jsx)(_.g,{icon:C.QLR}),"P\u0159idat pokladnu"]})]}),(0,en.jsx)(Vw,{children:0===Q.getRowModel().rows.length?(0,en.jsxs)(f_,{children:[(0,en.jsx)(_.g,{icon:C.yqK}),(0,en.jsx)("p",{children:"\u017d\xe1dn\xe1 p\u0159i\u0159azen\xed pokladen"})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(Zw,{children:[(0,en.jsx)(Kw,{children:Q.getHeaderGroups().map(n=>(0,en.jsx)(Hw,{children:n.headers.map(n=>{var e;return(0,en.jsxs)(Bw,{$sortable:n.column.getCanSort(),onClick:n.column.getToggleSortingHandler(),children:[(0,U.Kv)(n.column.columnDef.header,n.getContext()),null!==(e={asc:" \u2191",desc:" \u2193"}[n.column.getIsSorted()])&&void 0!==e?e:null]},n.id)})},n.id))}),(0,en.jsx)(Uw,{children:Q.getRowModel().rows.map(n=>(0,en.jsxs)(z.Fragment,{children:[(0,en.jsx)(Gw,{children:n.getVisibleCells().map(n=>(0,en.jsx)(Ww,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))}),n.getIsExpanded()&&(0,en.jsx)(Gw,{children:(0,en.jsx)(Ww,{colSpan:n.getVisibleCells().length,style:{padding:0},children:V({row:n})})})]},n.id))})]}),Q.getPageCount()>0&&(0,en.jsxs)(m_,{children:[(0,en.jsxs)(x_,{children:["Zobrazeno ",Math.min(y*b+1,Q.getFilteredRowModel().rows.length)," - ",Math.min((y+1)*b,Q.getFilteredRowModel().rows.length)," ","z ",Q.getFilteredRowModel().rows.length," pokladen"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{children:"Zobrazit:"}),(0,en.jsxs)(g_,{value:b,onChange:n=>{const e=Number(n.target.value);v(e),k(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(h_,{onClick:()=>k(0),disabled:0===y,children:"\xab\xab"}),(0,en.jsx)(h_,{onClick:()=>k(n=>Math.max(0,n-1)),disabled:0===y,children:"\u2039"}),(0,en.jsxs)("span",{style:{margin:"0 0.5rem"},children:["Str\xe1nka ",y+1," z ",Math.max(1,Q.getPageCount())]}),(0,en.jsx)(h_,{onClick:()=>k(n=>Math.min(Q.getPageCount()-1,n+1)),disabled:y>=Q.getPageCount()-1,children:"\u203a"}),(0,en.jsx)(h_,{onClick:()=>k(Q.getPageCount()-1),disabled:y>=Q.getPageCount()-1,children:"\xbb\xbb"})]})]})]})}),(0,en.jsx)(Ey,{isOpen:j,onClose:()=>{A(!1),N(null)},cashbox:I,onSuccess:()=>{T(),null===t||void 0===t||t("cashbook")}}),(0,en.jsx)(xk,{isOpen:w,onClose:()=>{S(!1),N(null)},assignment:I,onSuccess:()=>{T(),null===t||void 0===t||t("cashbook")}}),(0,en.jsx)(lA,{isOpen:P,onClose:()=>D(!1),onSuccess:()=>{T(),null===t||void 0===t||t("cashbook")}}),R&&(0,en.jsx)(zz,{isOpen:O,onClose:()=>{M(!1),F(null)},assignment:R,onConfirm:async(n,e)=>{try{const t=await fv.default.forceRenumberDocuments(n,e);if(t&&"ok"===t.status){console.log("\ud83d\uddd1\ufe0f FORCE RENUMBER \xdaSP\u011a\u0160N\xdd - ma\u017eu localStorage pro pokladnu:",n,"rok:",e);const r=[];for(let n=0;n<localStorage.length;n++){const o=localStorage.key(n);o&&o.startsWith("cashbook_")&&o.includes("_".concat(e,"_"))&&r.push(o)}console.log("\ud83d\uddd1\ufe0f Ma\u017eu localStorage kl\xed\u010de:",r),r.forEach(n=>localStorage.removeItem(n)),null===o||void 0===o||o("P\u0159e\u010d\xedslov\xe1no ".concat(t.data.total_renumbered," polo\u017eek. LocalStorage vymaz\xe1n - obnovte str\xe1nku pokladn\xed knihy (F5)."),{type:"success",timeout:8e3})}return t}catch(a){var t,r;return console.error("Chyba p\u0159i force p\u0159epo\u010dtu:",a),{status:"error",message:(null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||a.message||"Chyba p\u0159i komunikaci se serverem"}}}}),E.show&&Y.createPortal((0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(b_,{onClick:q}),(0,en.jsxs)(v_,{children:[(0,en.jsxs)(y_,{children:[(0,en.jsx)(_.g,{icon:C.zpE}),"Odebrat u\u017eivatele?"]}),(0,en.jsxs)(k_,{children:["Opravdu chcete odebrat u\u017eivatele ",(0,en.jsx)("strong",{children:E.userName})," z t\xe9to pokladny?"]}),(0,en.jsxs)(j_,{children:[(0,en.jsx)(z_,{onClick:q,children:"Zru\u0161it"}),(0,en.jsxs)(w_,{onClick:J,children:[(0,en.jsx)(_.g,{icon:C.yLS}),"Odebrat"]})]})]})]}),document.body)]})};var C_,S_,P_,D_,I_,N_,E_,$_,O_,M_,R_,F_,L_,T_,V_,Z_,K_,H_=o(77220);const B_=w.A.div(C_||(C_=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 0.5rem;\n"]))),U_=w.A.div(S_||(S_=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  height: 98vh;\n  max-width: 98vw;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n"]))),W_=w.A.div(P_||(P_=(0,A.A)(["\n  padding: 1.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),G_=w.A.h2(D_||(D_=(0,A.A)(["\n  margin: 0;\n  font-size: 1.5rem;\n  color: #1e293b;\n"]))),Y_=w.A.button(I_||(I_=(0,A.A)(["\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #dc2626;\n  }\n"]))),J_=w.A.div(N_||(N_=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n"]))),q_=w.A.div(E_||(E_=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1.25rem;\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),X_=w.A.div($_||($_=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  grid-column: ",";\n\n  @media (max-width: 1024px) {\n    grid-column: ",";\n  }\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n  }\n"])),n=>n.$fullWidth?"span 3":"span 1",n=>n.$fullWidth?"span 2":"span 1"),Q_=w.A.label(O_||(O_=(0,A.A)(["\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #475569;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  &.required::after {\n    content: '*';\n    color: #ef4444;\n    margin-left: 0.25rem;\n  }\n"]))),nC=w.A.input(M_||(M_=(0,A.A)(["\n  padding: 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n"])),n=>n.$error?"#ef4444":"#e5e7eb",n=>n.$error?"#ef4444":"#3b82f6",n=>n.$error?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),eC=w.A.select(R_||(R_=(0,A.A)(["\n  padding: 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n  padding-right: 2.5rem;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    background-color: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n"])),n=>n.$error?"#ef4444":"#e5e7eb",n=>n.$error?"#ef4444":"#3b82f6",n=>n.$error?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)"),oC=w.A.textarea(F_||(F_=(0,A.A)(["\n  padding: 0.75rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  min-height: 80px;\n  font-family: inherit;\n  resize: vertical;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),tC=w.A.label(L_||(L_=(0,A.A)(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.75rem;\n  cursor: pointer;\n  padding-top: 0.5rem;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: relative;\n    width: 56px;\n    height: 28px;\n    background-color: #cbd5e1;\n    border-radius: 28px;\n    transition: all 0.3s ease;\n    flex-shrink: 0;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      left: 4px;\n      bottom: 4px;\n      background-color: white;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n    }\n  }\n\n  input:checked + .slider {\n    background-color: #3b82f6;\n  }\n\n  input:checked + .slider::before {\n    transform: translateX(28px);\n  }\n\n  input:focus + .slider {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  .label-text {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #475569;\n  }\n"]))),rC=w.A.span(T_||(T_=(0,A.A)(["\n  font-size: 0.8rem;\n  color: #ef4444;\n"]))),aC=w.A.div(V_||(V_=(0,A.A)(["\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n"]))),iC=w.A.button(Z_||(Z_=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>"primary"===n.$variant?"#3b82f6":"#6b7280"),lC=w.A.div(K_||(K_=(0,A.A)(["\n  font-size: 0.85rem;\n  color: #64748b;\n  font-style: italic;\n  margin-top: 0.25rem;\n"]))),sC=n=>{var e,o;let{smlouva:t,useky:r,onClose:a}=n;const{user:i,token:l}=(0,z.useContext)(K.Ay),s=!!t,[d,c]=(0,z.useState)({cislo_smlouvy:(null===t||void 0===t?void 0:t.cislo_smlouvy)||"",usek_id:(null===t||void 0===t?void 0:t.usek_id)||"",druh_smlouvy:(null===t||void 0===t?void 0:t.druh_smlouvy)||"SLU\u017dBY",nazev_firmy:(null===t||void 0===t?void 0:t.nazev_firmy)||"",ico:(null===t||void 0===t?void 0:t.ico)||"",dic:(null===t||void 0===t?void 0:t.dic)||"",nazev_smlouvy:(null===t||void 0===t?void 0:t.nazev_smlouvy)||"",popis_smlouvy:(null===t||void 0===t?void 0:t.popis_smlouvy)||"",platnost_od:(null===t||void 0===t||null===(e=t.platnost_od)||void 0===e?void 0:e.substring(0,10))||"",platnost_do:(null===t||void 0===t||null===(o=t.platnost_do)||void 0===o?void 0:o.substring(0,10))||"",hodnota_bez_dph:(null===t||void 0===t?void 0:t.hodnota_bez_dph)||"",hodnota_s_dph:(null===t||void 0===t?void 0:t.hodnota_s_dph)||"",sazba_dph:(null===t||void 0===t?void 0:t.sazba_dph)||21,aktivni:void 0!==(null===t||void 0===t?void 0:t.aktivni)?t.aktivni:1,stav:(null===t||void 0===t?void 0:t.stav)||"AKTIVNI",poznamka:(null===t||void 0===t?void 0:t.poznamka)||"",cislo_dms:(null===t||void 0===t?void 0:t.cislo_dms)||"",kategorie:(null===t||void 0===t?void 0:t.kategorie)||""}),[p,u]=(0,z.useState)({}),[m,g]=(0,z.useState)(!1),h=(n,e)=>{c(o=>(0,T.A)((0,T.A)({},o),{},{[n]:e})),p[n]&&u(e=>{const o=(0,T.A)({},e);return delete o[n],o})};return Y.createPortal((0,en.jsx)(B_,{onClick:n=>n.target===n.currentTarget&&!m&&a(!1),children:(0,en.jsxs)(U_,{children:[(0,en.jsxs)(W_,{children:[(0,en.jsx)(G_,{children:s?"Upravit smlouvu":"Nov\xe1 smlouva"}),(0,en.jsx)(Y_,{onClick:()=>!m&&a(!1),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),p._global&&(0,en.jsxs)("div",{style:{padding:"1rem 1.5rem",background:"#fee2e2",borderLeft:"4px solid #dc2626",color:"#dc2626",fontWeight:600},children:["\u274c ",p._global]}),(0,en.jsx)(J_,{children:(0,en.jsxs)(q_,{children:[(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"\u010c\xedslo smlouvy"}),(0,en.jsx)(nC,{type:"text",value:d.cislo_smlouvy,onChange:n=>h("cislo_smlouvy",n.target.value),$error:p.cislo_smlouvy,placeholder:"nap\u0159. S-147/750309/26/23"}),p.cislo_smlouvy&&(0,en.jsx)(rC,{children:p.cislo_smlouvy})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"\xdasek"}),(0,en.jsxs)(eC,{value:d.usek_id,onChange:n=>h("usek_id",n.target.value),$error:p.usek_id,children:[(0,en.jsx)("option",{value:"",children:"Vyberte \xfasek"}),r.map(n=>(0,en.jsxs)("option",{value:n.id,children:[n.usek_zkr," - ",n.usek_nazev]},n.id))]}),p.usek_id&&(0,en.jsx)(rC,{children:p.usek_id})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"Druh smlouvy"}),(0,en.jsx)(eC,{value:d.druh_smlouvy,onChange:n=>h("druh_smlouvy",n.target.value),$error:p.druh_smlouvy,children:H_.vh.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))}),p.druh_smlouvy&&(0,en.jsx)(rC,{children:p.druh_smlouvy})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"Stav"}),(0,en.jsx)(eC,{value:d.stav,onChange:n=>h("stav",n.target.value),children:H_.aF.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))})]}),(0,en.jsxs)(X_,{$fullWidth:!0,children:[(0,en.jsx)(Q_,{className:"required",children:"N\xe1zev firmy"}),(0,en.jsx)(nC,{type:"text",value:d.nazev_firmy,onChange:n=>h("nazev_firmy",n.target.value),$error:p.nazev_firmy,placeholder:"nap\u0159. Alter Audit, s.r.o."}),p.nazev_firmy&&(0,en.jsx)(rC,{children:p.nazev_firmy})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"I\u010cO"}),(0,en.jsx)(nC,{type:"text",value:d.ico,onChange:n=>h("ico",n.target.value),$error:p.ico,placeholder:"8 \u010d\xedslic",maxLength:"8"}),p.ico&&(0,en.jsx)(rC,{children:p.ico})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"DI\u010c"}),(0,en.jsx)(nC,{type:"text",value:d.dic,onChange:n=>h("dic",n.target.value),placeholder:"nap\u0159. CZ12345678"})]}),(0,en.jsxs)(X_,{$fullWidth:!0,children:[(0,en.jsx)(Q_,{className:"required",children:"N\xe1zev smlouvy"}),(0,en.jsx)(nC,{type:"text",value:d.nazev_smlouvy,onChange:n=>h("nazev_smlouvy",n.target.value),$error:p.nazev_smlouvy,placeholder:"nap\u0159. Smlouva o poskytov\xe1n\xed poradensk\xfdch slu\u017eeb"}),p.nazev_smlouvy&&(0,en.jsx)(rC,{children:p.nazev_smlouvy})]}),(0,en.jsxs)(X_,{$fullWidth:!0,children:[(0,en.jsx)(Q_,{children:"Popis smlouvy"}),(0,en.jsx)(oC,{value:d.popis_smlouvy,onChange:n=>h("popis_smlouvy",n.target.value),placeholder:"Detailn\xed popis smlouvy..."})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"Platnost od"}),(0,en.jsx)(kv.A,{value:d.platnost_od,onChange:n=>h("platnost_od",n),placeholder:"Vyberte datum od",hasError:!!p.platnost_od}),p.platnost_od&&(0,en.jsx)(rC,{children:p.platnost_od})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"Platnost do"}),(0,en.jsx)(kv.A,{value:d.platnost_do,onChange:n=>h("platnost_do",n),placeholder:"Vyberte datum do",hasError:!!p.platnost_do}),p.platnost_do&&(0,en.jsx)(rC,{children:p.platnost_do})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"Sazba DPH (%)"}),(0,en.jsx)(eC,{value:d.sazba_dph,onChange:n=>(n=>{const e=parseFloat(n)||0,o=(parseFloat(d.hodnota_bez_dph)||0)*(1+e/100);c(e=>(0,T.A)((0,T.A)({},e),{},{sazba_dph:n,hodnota_s_dph:o.toFixed(2)}))})(n.target.value),children:H_.sw.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"Hodnota bez DPH (K\u010d)"}),(0,en.jsx)(nC,{type:"number",step:"0.01",value:d.hodnota_bez_dph,onChange:n=>(n=>{const e=(parseFloat(n)||0)*(1+(parseFloat(d.sazba_dph)||0)/100);c(o=>(0,T.A)((0,T.A)({},o),{},{hodnota_bez_dph:n,hodnota_s_dph:e.toFixed(2)}))})(n.target.value),placeholder:"0.00"}),(0,en.jsx)(lC,{children:"Hodnota s DPH bude vypo\u010d\xedt\xe1na automaticky"})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{className:"required",children:"Hodnota s DPH (K\u010d)"}),(0,en.jsx)(nC,{type:"number",step:"0.01",value:d.hodnota_s_dph,onChange:n=>(n=>{const e=(parseFloat(n)||0)/(1+(parseFloat(d.sazba_dph)||0)/100);c(o=>(0,T.A)((0,T.A)({},o),{},{hodnota_s_dph:n,hodnota_bez_dph:e.toFixed(2)}))})(n.target.value),$error:p.hodnota_s_dph,placeholder:"0.00"}),p.hodnota_s_dph&&(0,en.jsx)(rC,{children:p.hodnota_s_dph})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"\u010c\xedslo DMS"}),(0,en.jsx)(nC,{type:"text",value:d.cislo_dms,onChange:n=>h("cislo_dms",n.target.value),placeholder:"nap\u0159. DMS-2025-123"})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{children:"Kategorie"}),(0,en.jsx)(nC,{type:"text",value:d.kategorie,onChange:n=>h("kategorie",n.target.value),placeholder:"nap\u0159. IT, Poradenstv\xed"})]}),(0,en.jsxs)(X_,{$fullWidth:!0,children:[(0,en.jsx)(Q_,{children:"Intern\xed pozn\xe1mka"}),(0,en.jsx)(oC,{value:d.poznamka,onChange:n=>h("poznamka",n.target.value),placeholder:"Intern\xed pozn\xe1mka (nezobrazuje se ve\u0159ejn\u011b)..."})]}),(0,en.jsxs)(X_,{children:[(0,en.jsx)(Q_,{style:{marginBottom:"0"},children:"\xa0"}),(0,en.jsxs)(tC,{children:[(0,en.jsx)("input",{type:"checkbox",checked:1===d.aktivni,onChange:n=>h("aktivni",n.target.checked?1:0)}),(0,en.jsx)("span",{className:"slider"}),(0,en.jsx)("span",{className:"label-text",children:"Aktivn\xed"})]})]})]})}),(0,en.jsxs)(aC,{children:[(0,en.jsx)(iC,{onClick:()=>!m&&a(!1),disabled:m,children:"Zru\u0161it"}),(0,en.jsx)(iC,{$variant:"primary",onClick:async()=>{if((()=>{const n={};return d.cislo_smlouvy.trim()||(n.cislo_smlouvy="\u010c\xedslo smlouvy je povinn\xe9"),d.usek_id||(n.usek_id="\xdasek je povinn\xfd"),d.druh_smlouvy||(n.druh_smlouvy="Druh smlouvy je povinn\xfd"),d.nazev_firmy.trim()||(n.nazev_firmy="N\xe1zev firmy je povinn\xfd"),d.nazev_smlouvy.trim()||(n.nazev_smlouvy="N\xe1zev smlouvy je povinn\xfd"),d.platnost_od||(n.platnost_od="Platnost od je povinn\xe1"),d.platnost_do||(n.platnost_do="Platnost do je povinn\xe1"),d.platnost_od&&d.platnost_do&&new Date(d.platnost_do)<new Date(d.platnost_od)&&(n.platnost_do="Datum do mus\xed b\xfdt po datu od"),(!d.hodnota_s_dph||parseFloat(d.hodnota_s_dph)<=0)&&(n.hodnota_s_dph="Hodnota s DPH je povinn\xe1 a mus\xed b\xfdt kladn\xe1"),d.ico&&!/^\d{8}$/.test(d.ico)&&(n.ico="I\u010cO mus\xed obsahovat 8 \u010d\xedslic"),u(n),0===Object.keys(n).length})())try{g(!0),s?await(0,H_.pq)({token:l,username:i.username,id:t.id,smlouvaData:d}):await(0,H_.gy)({token:l,username:i.username,smlouvaData:d}),a(!0)}catch(n){u(e=>(0,T.A)((0,T.A)({},e),{},{_global:"Chyba p\u0159i ukl\xe1d\xe1n\xed: "+n.message}))}finally{g(!1)}},disabled:m,children:m?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.z1G,spin:!0}),"Ukl\xe1d\xe1m..."]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.hSh}),s?"Ulo\u017eit zm\u011bny":"Vytvo\u0159it smlouvu"]})})]})]})}),document.body)};var dC,cC,pC,uC,mC,gC,hC,xC,fC,bC,vC,yC,kC,jC,AC,zC,wC,_C,CC,SC,PC,DC,IC,NC,EC,$C,OC,MC,RC,FC,LC=o(91357),TC=o(90087),VC=o(89468);const ZC=w.A.div(dC||(dC=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 0.5rem;\n"]))),KC=w.A.div(cC||(cC=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  height: 98vh;\n  max-width: 98vw;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n"]))),HC=w.A.div(pC||(pC=(0,A.A)(["\n  padding: 0.875rem 1.25rem;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  border-radius: 8px 8px 0 0;\n"]))),BC=w.A.h2(uC||(uC=(0,A.A)(["\n  margin: 0;\n  font-size: 1.125rem;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),UC=w.A.div(mC||(mC=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n"]))),WC=w.A.button(gC||(gC=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    transform: translateY(-1px);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),GC=w.A.button(hC||(hC=(0,A.A)(["\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]))),YC=w.A.div(xC||(xC=(0,A.A)(["\n  padding: 0.875rem;\n  overflow-y: auto;\n  flex: 1;\n"]))),JC=w.A.div(fC||(fC=(0,A.A)(["\n  margin-bottom: 1rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),qC=w.A.h3(bC||(bC=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #1e293b;\n  margin-bottom: 0.625rem;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.5rem 0.625rem;\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  border-radius: 4px;\n  font-weight: 600;\n"]))),XC=w.A.div(vC||(vC=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.625rem;\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),QC=w.A.div(yC||(yC=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem 0.625rem;\n  background: #f8fafc;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n"]))),nS=w.A.span(kC||(kC=(0,A.A)(["\n  font-size: 0.7rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n"]))),eS=w.A.span(jC||(jC=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #1e293b;\n  font-weight: 500;\n"]))),oS=w.A.span(AC||(AC=(0,A.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ",";\n  color: white;\n  display: inline-block;\n"])),n=>n.$color||"#e2e8f0"),tS=w.A.div(zC||(zC=(0,A.A)(["\n  background: #f8fafc;\n  padding: 0.875rem;\n  border-radius: 6px;\n  margin-bottom: 0.875rem;\n  border: 2px solid #e2e8f0;\n"]))),rS=w.A.div(wC||(wC=(0,A.A)(["\n  font-size: 0.9rem;\n  color: #64748b;\n  margin-bottom: 0.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),aS=w.A.div(_C||(_C=(0,A.A)(["\n  width: 100%;\n  height: 20px;\n  background: #e2e8f0;\n  border-radius: 10px;\n  overflow: hidden;\n  position: relative;\n  margin-bottom: 0.625rem;\n"]))),iS=w.A.div(CC||(CC=(0,A.A)(["\n  height: 100%;\n  background: ",";\n  width: ","%;\n  transition: width 0.5s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.85rem;\n"])),n=>{const e=parseFloat(n.$percent)||0;return e>=90?"linear-gradient(to right, #dc2626, #ef4444)":e>=75?"linear-gradient(to right, #d97706, #f59e0b)":e>=50?"linear-gradient(to right, #2563eb, #3b82f6)":"linear-gradient(to right, #059669, #10b981)"},n=>Math.min(parseFloat(n.$percent)||0,100)),lS=w.A.div(SC||(SC=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.625rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),sS=w.A.div(PC||(PC=(0,A.A)(["\n  background: white;\n  padding: 0.625rem;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n  text-align: center;\n"]))),dS=w.A.div(DC||(DC=(0,A.A)(["\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 0.125rem;\n"])),n=>n.$color||"#1e293b"),cS=w.A.div(IC||(IC=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n"]))),pS=w.A.table(NC||(NC=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.9rem;\n"]))),uS=w.A.thead(EC||(EC=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),mS=w.A.th($C||($C=(0,A.A)(["\n  padding: 0.5rem 0.625rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),gS=w.A.tbody(OC||(OC=(0,A.A)([""]))),hS=w.A.tr(MC||(MC=(0,A.A)(["\n  border-bottom: 1px solid #e2e8f0;\n\n  &:hover {\n    background: #f8fafc;\n  }\n"]))),xS=w.A.td(RC||(RC=(0,A.A)(["\n  padding: 0.5rem 0.625rem;\n  font-size: 0.875rem;\n"]))),fS=w.A.div(FC||(FC=(0,A.A)(["\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.9rem;\n"]))),bS=n=>{let{smlouva:e,onClose:o,onEdit:t}=n;const{user:r,token:a,user_id:i}=(0,z.useContext)(K.Ay),l=(0,LC.Zp)(),[s,d]=(0,z.useState)(!1),[c,p]=(0,z.useState)(!1),[u,m]=(0,z.useState)(null),[g,h]=(0,z.useState)(null),[x,f]=(0,z.useState)(!1),[b,v]=(0,z.useState)(null),[y,k]=(0,z.useState)(null),{smlouva:j,objednavky:A,statistiky:w}=e,S=n=>{const e=parseFloat(n)||0;return new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},P=n=>{if(!n)return"-";return new Date(n).toLocaleDateString("cs-CZ")},D=n=>{if(!n)return"-";return new Date(n).toLocaleString("cs-CZ")};return Y.createPortal((0,en.jsxs)(ZC,{onClick:n=>n.target===n.currentTarget&&o(),children:[(0,en.jsxs)(KC,{children:[(0,en.jsxs)(HC,{children:[(0,en.jsxs)(BC,{children:[(0,en.jsx)(_.g,{icon:C.IJd}),"Detail smlouvy"]}),(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,en.jsxs)(UC,{children:[(0,en.jsxs)(WC,{onClick:t,children:[(0,en.jsx)(_.g,{icon:C.MT7}),"Upravit"]}),(0,en.jsxs)(WC,{onClick:()=>p(!0),disabled:s,children:[(0,en.jsx)(_.g,{icon:s?C.z1G:C.OtC,spin:s}),"P\u0159epo\u010d\xedtat \u010derp\xe1n\xed"]})]}),(0,en.jsx)(GC,{onClick:o,children:(0,en.jsx)(_.g,{icon:C.GRI})})]})]}),u&&(0,en.jsxs)("div",{style:{padding:"1rem 1.5rem",background:"#f0fdf4",borderLeft:"4px solid #10b981",color:"#047857",fontWeight:600},children:["\u2705 ",u]}),g&&(0,en.jsxs)("div",{style:{padding:"1rem 1.5rem",background:"#fee2e2",borderLeft:"4px solid #dc2626",color:"#dc2626",fontWeight:600},children:["\u274c ",g]}),(0,en.jsxs)(YC,{children:[(0,en.jsxs)(tS,{children:[(0,en.jsxs)(rS,{children:[(0,en.jsx)("span",{children:"\u010cerp\xe1n\xed smlouvy"}),(0,en.jsxs)("span",{style:{fontWeight:600,fontSize:"1rem"},children:[S(j.cerpano_celkem)," / ",S(j.hodnota_s_dph)]})]}),(0,en.jsx)(aS,{children:(0,en.jsxs)(iS,{$percent:j.procento_cerpani,children:[parseFloat(j.procento_cerpani||0).toFixed(1),"%"]})}),(0,en.jsxs)(lS,{children:[(0,en.jsxs)(sS,{children:[(0,en.jsx)(dS,{$color:"#3b82f6",children:S(j.cerpano_celkem)}),(0,en.jsx)(cS,{children:"\u010cerp\xe1no"})]}),(0,en.jsxs)(sS,{children:[(0,en.jsx)(dS,{$color:"#10b981",children:S(j.zbyva)}),(0,en.jsx)(cS,{children:"Zb\xfdv\xe1"})]}),(0,en.jsxs)(sS,{children:[(0,en.jsx)(dS,{children:(null===w||void 0===w?void 0:w.pocet_objednavek)||0}),(0,en.jsx)(cS,{children:"Objedn\xe1vek"})]})]})]}),(0,en.jsxs)(JC,{children:[(0,en.jsxs)(qC,{children:[(0,en.jsx)(_.g,{icon:C.IJd}),"Z\xe1kladn\xed \xfadaje"]}),(0,en.jsxs)(XC,{children:[(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"\u010c\xedslo smlouvy"}),(0,en.jsx)(eS,{children:(0,en.jsx)("strong",{children:j.cislo_smlouvy})})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"\xdasek"}),(0,en.jsx)(eS,{children:j.usek_zkr})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Druh smlouvy"}),(0,en.jsx)(eS,{children:j.druh_smlouvy})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Stav"}),(0,en.jsx)(eS,{children:(0,en.jsx)(oS,{$color:(n=>{switch(n){case"AKTIVNI":return"#10b981";case"UKONCENA":default:return"#6b7280";case"PRERUSENA":return"#f59e0b";case"PRIPRAVOVANA":return"#3b82f6"}})(j.stav),children:j.stav})})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"N\xe1zev smlouvy"}),(0,en.jsx)(eS,{children:j.nazev_smlouvy})]}),j.popis_smlouvy&&(0,en.jsxs)(QC,{style:{gridColumn:"1 / -1"},children:[(0,en.jsx)(nS,{children:"Popis"}),(0,en.jsx)(eS,{children:j.popis_smlouvy})]})]})]}),(0,en.jsxs)(JC,{children:[(0,en.jsxs)(qC,{children:[(0,en.jsx)(_.g,{icon:C.URI}),"Smluvn\xed strana"]}),(0,en.jsxs)(XC,{children:[(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"N\xe1zev firmy"}),(0,en.jsx)(eS,{children:j.nazev_firmy})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"I\u010cO"}),(0,en.jsx)(eS,{children:j.ico||"-"})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"DI\u010c"}),(0,en.jsx)(eS,{children:j.dic||"-"})]})]})]}),(0,en.jsxs)(JC,{children:[(0,en.jsxs)(qC,{children:[(0,en.jsx)(_.g,{icon:C.ymQ}),"Platnost a finance"]}),(0,en.jsxs)(XC,{children:[(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Platnost od"}),(0,en.jsx)(eS,{children:P(j.platnost_od)})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Platnost do"}),(0,en.jsx)(eS,{children:P(j.platnost_do)})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Sazba DPH"}),(0,en.jsxs)(eS,{children:[j.sazba_dph,"%"]})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Hodnota bez DPH"}),(0,en.jsx)(eS,{children:S(j.hodnota_bez_dph)})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Hodnota s DPH"}),(0,en.jsx)(eS,{children:(0,en.jsx)("strong",{children:S(j.hodnota_s_dph)})})]})]})]}),(j.cislo_dms||j.kategorie||j.poznamka)&&(0,en.jsxs)(JC,{children:[(0,en.jsx)(qC,{children:"Dodate\u010dn\xe9 informace"}),(0,en.jsxs)(XC,{children:[j.cislo_dms&&(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"\u010c\xedslo DMS"}),(0,en.jsx)(eS,{children:j.cislo_dms})]}),j.kategorie&&(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Kategorie"}),(0,en.jsx)(eS,{children:j.kategorie})]}),j.poznamka&&(0,en.jsxs)(QC,{style:{gridColumn:"1 / -1"},children:[(0,en.jsx)(nS,{children:"Pozn\xe1mka"}),(0,en.jsx)(eS,{children:j.poznamka})]})]})]}),w&&(0,en.jsxs)(JC,{children:[(0,en.jsxs)(qC,{children:[(0,en.jsx)(_.g,{icon:C.gK3}),"Statistiky objedn\xe1vek"]}),(0,en.jsxs)(XC,{children:[(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Pr\u016fm\u011brn\xe1 objedn\xe1vka"}),(0,en.jsx)(eS,{children:S(w.prumerna_objednavka)})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Nejv\u011bt\u0161\xed objedn\xe1vka"}),(0,en.jsx)(eS,{children:S(w.nejvetsi_objednavka)})]}),(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Nejmen\u0161\xed objedn\xe1vka"}),(0,en.jsx)(eS,{children:S(w.nejmensi_objednavka)})]})]})]}),(0,en.jsxs)(JC,{children:[(0,en.jsxs)(qC,{children:[(0,en.jsx)(_.g,{icon:C.IJd}),"Nav\xe1zan\xe9 objedn\xe1vky (",(null===A||void 0===A?void 0:A.length)||0,")"]}),A&&A.length>0?(0,en.jsxs)(pS,{children:[(0,en.jsx)(uS,{children:(0,en.jsxs)("tr",{children:[(0,en.jsx)(mS,{children:"Ev. \u010d\xedslo"}),(0,en.jsx)(mS,{children:"P\u0159edm\u011bt"}),(0,en.jsx)(mS,{style:{textAlign:"right"},children:"\u010c\xe1stka s DPH"}),(0,en.jsx)(mS,{style:{textAlign:"center"},children:"Datum p\u0159i\u0159azen\xed"}),(0,en.jsx)(mS,{style:{textAlign:"center"},children:"Stav"}),(0,en.jsx)(mS,{style:{textAlign:"center"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})})]})}),(0,en.jsx)(gS,{children:A.map((n,e)=>(0,en.jsxs)(hS,{style:{background:e%2===0?"#f8fafc":"white"},children:[(0,en.jsx)(xS,{children:(0,en.jsx)("strong",{children:n.ev_cislo})}),(0,en.jsx)(xS,{children:n.predmet}),(0,en.jsx)(xS,{style:{textAlign:"right",fontWeight:600},children:S(n.castka_s_dph)}),(0,en.jsx)(xS,{style:{textAlign:"center"},children:D(n.dt_prirazeni)}),(0,en.jsx)(xS,{style:{textAlign:"center"},children:(0,en.jsx)(oS,{$color:"#3b82f6",children:n.stav})}),(0,en.jsx)(xS,{children:(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,en.jsx)("button",{onClick:()=>(async n=>{TC.default.setCurrentUser(i);let e=!1,o=null,t=!1;if(await TC.default.hasDraft())try{var r;const a=await TC.default.loadDraft(),i=a.savedOrderId||(null===(r=a.formData)||void 0===r?void 0:r.id),l=n.id;if(i&&l&&String(i)===String(l))e=!1,t=!0;else{const n=(0,VC.V5)(a),t=(0,VC.NN)(a);e=n||t,e&&(o=a)}}catch(a){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed draft dat:",a),e=!1}if(!t)return e?(k(o),v(n),void f(!0)):void l("/order-form-25?edit=".concat(n.id));l("/order-form-25?edit=".concat(n.id))})(n),title:"Editovat objedn\xe1vku",style:{width:"1.75rem",height:"1.75rem",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"6px",background:"transparent",color:"#6b7280",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.color="#3b82f6",n.currentTarget.style.background="#eff6ff"},onMouseLeave:n=>{n.currentTarget.style.color="#6b7280",n.currentTarget.style.background="transparent"},children:(0,en.jsx)(_.g,{icon:C.MT7})})})})]},n.id))})]}):(0,en.jsx)(fS,{children:"\u017d\xe1dn\xe9 objedn\xe1vky nejsou k t\xe9to smlouv\u011b p\u0159i\u0159azeny"})]}),(0,en.jsxs)(JC,{children:[(0,en.jsx)(qC,{children:"Metadata"}),(0,en.jsxs)(XC,{children:[(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Vytvo\u0159eno"}),(0,en.jsx)(eS,{children:D(j.dt_vytvoreni)})]}),j.dt_aktualizace&&(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Aktualizov\xe1no"}),(0,en.jsx)(eS,{children:D(j.dt_aktualizace)})]}),j.posledni_prepocet&&(0,en.jsxs)(QC,{children:[(0,en.jsx)(nS,{children:"Posledn\xed p\u0159epo\u010det"}),(0,en.jsx)(eS,{children:D(j.posledni_prepocet)})]})]})]})]})]}),(0,en.jsxs)(Ri.A,{isOpen:c,title:"P\u0159epo\u010det \u010derp\xe1n\xed smlouvy",icon:C.zpE,variant:"warning",onConfirm:async()=>{p(!1);try{d(!0),m(null),h(null),await(0,H_.SJ)({token:a,username:r.username,cislo_smlouvy:j.cislo_smlouvy,usek_id:null}),m("\u010c\u0435\u0440p\xe1n\xed bylo \xfasp\u011b\u0161n\u011b p\u0159epo\u010d\xedt\xe1no. Pro zobrazen\xed aktualizovan\xfdch dat zav\u0159ete a znovu otev\u0159ete detail.")}catch(n){h("Chyba p\u0159i p\u0159epo\u010dtu: "+n.message)}finally{d(!1)}},onClose:()=>p(!1),children:[(0,en.jsx)("p",{children:"Opravdu chcete p\u0159epo\u010d\xedtat \u010derp\xe1n\xed t\xe9to smlouvy?"}),(0,en.jsx)("p",{style:{marginTop:"1rem",color:"#f59e0b",fontWeight:600},children:"\u23f1\ufe0f Operace m\u016f\u017ee trvat n\u011bkolik sekund."})]}),(0,en.jsx)(Ri.A,{isOpen:x,title:"Rozd\u011blan\xe1 objedn\xe1vka",icon:C.zpE,variant:"warning",onConfirm:()=>{f(!1),TC.default.setCurrentUser(i),TC.default.deleteDraft(),b&&l("/order-form-25?edit=".concat(b.id))},onClose:()=>{f(!1),v(null),k(null)},confirmText:"Ano, pokra\u010dovat",cancelText:"Ne, zru\u0161it",children:y&&(()=>{const n=y.formData||y,e=n.ev_cislo||n.cislo_objednavky||n.predmet||"\u2605 KONCEPT \u2605",o=(0,VC.V5)(y);return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{style:{background:"#fef3c7",padding:"0.75rem",borderRadius:"6px",border:"1px solid #f59e0b",margin:"0.5rem 0"},children:[(0,en.jsx)("strong",{children:"Pozor:"})," M\xe1te rozepracovanou ",o?"novou objedn\xe1vku":"editaci objedn\xe1vky"," ",(0,en.jsx)("strong",{children:e}),". P\u0159epnut\xedm na jinou objedn\xe1vku p\u0159ijdete o neulo\u017een\xe9 zm\u011bny!"]}),(0,en.jsx)("p",{style:{marginTop:"1rem",color:"#f59e0b",fontWeight:600},children:"\u26a0\ufe0f Pokud budete pokra\u010dovat, rozd\u011blan\xe1 objedn\xe1vka bude smaz\xe1na."}),(0,en.jsx)("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:"Chcete pokra\u010dovat a otev\u0159\xedt tuto objedn\xe1vku?"})]})})()})]}),document.body)};var vS,yS,kS,jS,AS,zS,wS,_S,CS,SS,PS,DS,IS,NS,ES,$S,OS,MS,RS,FS,LS,TS,VS,ZS,KS,HS,BS,US,WS,GS,YS,JS=o(11238);const qS=w.A.div(vS||(vS=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 0.5rem;\n"]))),XS=w.A.div(yS||(yS=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  height: 98vh;\n  max-width: 98vw;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n"]))),QS=w.A.div(kS||(kS=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  border-radius: 12px 12px 0 0;\n"]))),nP=w.A.h2(jS||(jS=(0,A.A)(["\n  margin: 0;\n  font-size: 1.5rem;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),eP=w.A.button(AS||(AS=(0,A.A)(["\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]))),oP=w.A.div(zS||(zS=(0,A.A)(["\n  padding: 1.25rem;\n  overflow-y: auto;\n  flex: 1;\n"]))),tP=w.A.div(wS||(wS=(0,A.A)(["\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n"]))),rP=w.A.button(_S||(_S=(0,A.A)(["\n  padding: 0.75rem 1.5rem;\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),n=>"primary"===n.$variant?"#3b82f6":"success"===n.$variant?"#10b981":"danger"===n.$variant?"#ef4444":"#6b7280"),aP=w.A.div(CS||(CS=(0,A.A)(["\n  border: 2px dashed ",";\n  border-radius: 8px;\n  padding: 3rem;\n  text-align: center;\n  background: ",";\n  transition: all 0.2s;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #eff6ff;\n  }\n"])),n=>n.$dragOver?"#3b82f6":"#cbd5e1",n=>n.$dragOver?"#eff6ff":"#f8fafc"),iP=w.A.div(SS||(SS=(0,A.A)(["\n  font-size: 3rem;\n  color: #94a3b8;\n  margin-bottom: 1rem;\n"]))),lP=w.A.div(PS||(PS=(0,A.A)(["\n  font-size: 1.1rem;\n  color: #475569;\n  margin-bottom: 0.5rem;\n"]))),sP=w.A.div(DS||(DS=(0,A.A)(["\n  font-size: 0.9rem;\n  color: #94a3b8;\n"]))),dP=w.A.input(IS||(IS=(0,A.A)(["\n  display: none;\n"]))),cP=w.A.div(NS||(NS=(0,A.A)(["\n  background: #eff6ff;\n  border: 1px solid #bfdbfe;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  color: #1e40af;\n  font-size: 0.9rem;\n"]))),pP=w.A.div(ES||(ES=(0,A.A)(["\n  margin-top: 1.5rem;\n"]))),uP=w.A.h3($S||($S=(0,A.A)(["\n  font-size: 1rem;\n  color: #1e293b;\n  margin-bottom: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 0.75rem;\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  border-radius: 6px;\n  font-weight: 600;\n"]))),mP=w.A.table(OS||(OS=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.85rem;\n  margin-bottom: 1rem;\n"]))),gP=w.A.thead(MS||(MS=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),hP=(w.A.th(RS||(RS=(0,A.A)(["\n  padding: 0.75rem 1rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),w.A.th(FS||(FS=(0,A.A)(["\n  padding: 0.75rem 1rem;\n  text-align: center;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"])))),xP=w.A.td(LS||(LS=(0,A.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e2e8f0;\n"]))),fP=w.A.tr(TS||(TS=(0,A.A)(["\n  &:nth-of-type(even) {\n    background: #f8fafc;\n  }\n"]))),bP=(w.A.div(VS||(VS=(0,A.A)(["\n  background: #fef3c7;\n  border: 1px solid #fcd34d;\n  border-radius: 6px;\n  padding: 0.75rem;\n  margin-top: 0.5rem;\n  color: #92400e;\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),w.A.div(ZS||(ZS=(0,A.A)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-top: 1rem;\n"])),n=>n.$success?"#d1fae5":"#fee2e2",n=>n.$success?"#6ee7b7":"#fca5a5")),vP=w.A.div(KS||(KS=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 0.875rem;\n  margin-bottom: 0.875rem;\n"]))),yP=w.A.div(HS||(HS=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n"]))),kP=w.A.span(BS||(BS=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n"]))),jP=w.A.span(US||(US=(0,A.A)(["\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ",";\n"])),n=>n.$color||"#1e293b"),AP=w.A.div(WS||(WS=(0,A.A)(["\n  max-height: 300px;\n  overflow-y: auto;\n  background: white;\n  border-radius: 6px;\n  padding: 1rem;\n"]))),zP=w.A.div(GS||(GS=(0,A.A)(["\n  padding: 0.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  font-size: 0.85rem;\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]))),wP=w.A.label(YS||(YS=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  color: #475569;\n  cursor: pointer;\n\n  input {\n    cursor: pointer;\n  }\n"]))),_P=n=>{let{useky:e,onClose:o}=n;const{user:t,token:r}=(0,z.useContext)(K.Ay),[a,i]=(0,z.useState)(!1),[l,s]=(0,z.useState)(null),[d,c]=(0,z.useState)([]),[p,u]=(0,z.useState)(!1),[m,g]=(0,z.useState)(null),[h,x]=(0,z.useState)(!1),[f,b]=(0,z.useState)(!1),[v,y]=(0,z.useState)(null),k=(0,z.useCallback)(n=>{if(!n)return;["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"].includes(n.type)||n.name.match(/\.(xlsx?|csv)$/i)?(s(n),y(null),j(n)):y("Pros\xedm vyberte Excel (.xlsx, .xls) nebo CSV soubor")},[]),j=(0,z.useCallback)(n=>{const e=new FileReader;e.onload=n=>{try{const e=new Uint8Array(n.target.result),o=JS.LF(e,{type:"array"}),t=o.Sheets[o.SheetNames[0]],r=JS.Wp.sheet_to_json(t,{defval:null}),a=n=>{if(!n)return null;if("string"===typeof n&&n.match(/^\d{4}-\d{2}-\d{2}/))return n.split("T")[0];if("number"===typeof n){const e=new Date(1899,11,30);return new Date(e.getTime()+864e5*n).toISOString().split("T")[0]}return null},i=r.map(n=>({cislo_smlouvy:n["\u010c\xedslo smlouvy"]||n.cislo_smlouvy||null,usek_zkr:n["\xdasek"]||n["\xdatvar"]||n.usek_zkr||null,druh_smlouvy:n["Druh smlouvy"]||n.druh_smlouvy||"SLU\u017dBY",nazev_firmy:n.Partner||n.Dodavatel||n["N\xe1zev firmy"]||n.nazev_firmy||null,ico:n["I\u010cO"]||n.ICO||n.ico||null,dic:n["DI\u010c"]||n.DIC||n.dic||null,nazev_smlouvy:n["N\xe1zev"]||n["P\u0159edm\u011bt smlouvy"]||n["N\xe1zev smlouvy"]||n.nazev_smlouvy||null,popis_smlouvy:n.Popis||n.popis_smlouvy||null,platnost_od:a(n["Platn\xe9 od"]||n["Platnost od"]||n.platnost_od),platnost_do:a(n["Platn\xe9 do"]||n["Platnost do"]||n.platnost_do),hodnota_bez_dph:n["ZB\xddV\xc1 bez DPH "]||n["ZB\xddV\xc1 bez DPH"]||n["Zbyva bez DPH"]||n["Hodnota bez DPH"]||n.hodnota_bez_dph||null,hodnota_s_dph:n["ZB\xddV\xc1 s DPH"]||n["Zbyva s DPH"]||n["Hodnota s DPH"]||n.hodnota_s_dph||null,sazba_dph:n["Sazba DPH"]||n.sazba_dph||21,hodnota_plneni_bez_dph:n["P\u0159edpokl\xe1dan\xe1 hodnota bez DPH"]||n["Predpokladana hodnota bez DPH"]||n.hodnota_plneni_bez_dph||null,hodnota_plneni_s_dph:n["P\u0159edpokl\xe1dan\xe1 hodnota s DPH "]||n["P\u0159edpokl\xe1dan\xe1 hodnota s DPH"]||n["Predpokladana hodnota s DPH"]||n.hodnota_plneni_s_dph||null,aktivni:n["Aktivn\xed"]||n.aktivni||1,poznamka:n["Pozn\xe1mka"]||n.poznamka||"Import z Excelu ".concat((new Date).toLocaleDateString("cs-CZ")),cislo_dms:n["\u010c\xedslo DMS"]||n.cislo_dms||null,kategorie:n.Kategorie||n.kategorie||null}));c(i),y(null)}catch(e){y("Chyba p\u0159i parsov\xe1n\xed souboru: "+e.message)}},e.readAsArrayBuffer(n)},[]),A=async()=>{b(!1);try{u(!0),y(null);const n=await(0,H_.pi)({token:r,username:t.username,data:d,overwrite_existing:h,nazev_souboru:l.name,typ_souboru:l.name.split(".").pop().toUpperCase(),velikost_souboru:l.size});g(n)}catch(n){y("Chyba p\u0159i importu: "+n.message)}finally{u(!1)}},w=n=>{if(!n)return"-";if("string"===typeof n&&n.match(/^\d{4}-\d{2}-\d{2}/)){return new Date(n).toLocaleDateString("cs-CZ")}if("number"===typeof n){const e=new Date(1899,11,30);return new Date(e.getTime()+864e5*n).toLocaleDateString("cs-CZ")}return n};return Y.createPortal((0,en.jsxs)(qS,{onClick:n=>n.target===n.currentTarget&&!p&&o(!1),children:[(0,en.jsxs)(XS,{children:[(0,en.jsxs)(QS,{children:[(0,en.jsxs)(nP,{children:[(0,en.jsx)(_.g,{icon:C.N72}),"Import smluv z Excel/CSV"]}),(0,en.jsx)(eP,{onClick:()=>!p&&o(null!==m),children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),v&&(0,en.jsxs)("div",{style:{padding:"1rem 1.5rem",background:"#fee2e2",borderLeft:"4px solid #dc2626",color:"#dc2626",fontWeight:600},children:["\u274c ",v]}),(0,en.jsx)(oP,{children:m?(0,en.jsxs)(bP,{$success:0===m.chyb,children:[(0,en.jsxs)(uP,{children:[(0,en.jsx)(_.g,{icon:0===m.chyb?C.SGM:C.zpE,style:{color:0===m.chyb?"#10b981":"#f59e0b"}}),"V\xfdsledky importu"]}),(0,en.jsxs)(vP,{children:[(0,en.jsxs)(yP,{children:[(0,en.jsx)(kP,{children:"Celkem \u0159\xe1dk\u016f"}),(0,en.jsx)(jP,{children:m.celkem_radku})]}),(0,en.jsxs)(yP,{children:[(0,en.jsx)(kP,{children:"\xdasp\u011b\u0161n\u011b"}),(0,en.jsx)(jP,{$color:"#10b981",children:m.uspesne_importovano})]}),(0,en.jsxs)(yP,{children:[(0,en.jsx)(kP,{children:"Aktualizov\xe1no"}),(0,en.jsx)(jP,{$color:"#3b82f6",children:m.aktualizovano})]}),(0,en.jsxs)(yP,{children:[(0,en.jsx)(kP,{children:"P\u0159esko\u010deno"}),(0,en.jsx)(jP,{$color:"#f59e0b",children:m.preskoceno_duplicit})]}),(0,en.jsxs)(yP,{children:[(0,en.jsx)(kP,{children:"Chyb"}),(0,en.jsx)(jP,{$color:"#ef4444",children:m.chyb})]})]}),m.chybove_zaznamy&&m.chybove_zaznamy.length>0&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("div",{style:{marginTop:"1rem",marginBottom:"0.5rem",fontWeight:600},children:"Chybov\xe9 z\xe1znamy:"}),(0,en.jsx)(AP,{children:m.chybove_zaznamy.map((n,e)=>(0,en.jsxs)(zP,{children:[(0,en.jsxs)("strong",{children:["\u0158\xe1dek ",n.row,":"]})," ",n.cislo_smlouvy||"(nezn\xe1m\xe9 \u010d\xedslo)",(0,en.jsx)("br",{}),(0,en.jsx)("span",{style:{color:"#dc2626"},children:n.error})]},e))})]}),(0,en.jsxs)("div",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#64748b"},children:["\u010cas importu: ",m.cas_importu_ms," ms"]})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(cP,{children:[(0,en.jsx)("strong",{children:"\ud83d\udccb Form\xe1t importu:"}),(0,en.jsxs)("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.5rem"},children:[(0,en.jsx)("li",{children:"Excel (.xlsx, .xls) nebo CSV soubor"}),(0,en.jsx)("li",{children:"Prvn\xed \u0159\xe1dek mus\xed obsahovat n\xe1zvy sloupc\u016f"}),(0,en.jsxs)("li",{children:[(0,en.jsx)("strong",{children:"Povinn\xe9 sloupce:"})," \u010c\xedslo smlouvy, \xdasek, Partner, N\xe1zev, Platn\xe9 do"]}),(0,en.jsxs)("li",{children:[(0,en.jsx)("strong",{children:"Voliteln\xe9:"})," I\u010cO, P\u0159edpokl\xe1dan\xe1 hodnota bez/s DPH, ZB\xddV\xc1 bez/s DPH"]}),(0,en.jsxs)("li",{children:[(0,en.jsx)("strong",{children:"D\u016eLE\u017dIT\xc9:"}),' "ZB\xddV\xc1 s DPH" = po\u010d\xe1te\u010dn\xed stav smlouvy, "P\u0159edpokl\xe1dan\xe1 hodnota s DPH" = maxim\xe1ln\xed pln\u011bn\xed']}),(0,en.jsx)("li",{children:"Datum se zad\xe1v\xe1 ve form\xe1tu Excel (automaticky se p\u0159evede)"})]})]}),(0,en.jsxs)(rP,{onClick:()=>{const n=JS.Wp.json_to_sheet([{"\u010c\xedslo smlouvy":"S-147/750309/26/23","\xdatvar":"KM","Druh smlouvy":"SLU\u017dBY",Dodavatel:"Nemocnice Na Homolce","I\u010cO":"12345678","DI\u010c":"CZ12345678","P\u0159edm\u011bt smlouvy":"Dod\xe1vka zdravotnick\xe9ho materi\xe1lu",Popis:"Detailn\xed popis smlouvy","Platnost od":"2025-01-01","Platnost do":"2025-12-31","ZB\xddV\xc1 bez DPH":413223.14,"ZB\xddV\xc1 s DPH":5e5,"Sazba DPH":21,"P\u0159edpokl\xe1dan\xe1 hodnota bez DPH":330578.51,"P\u0159edpokl\xe1dan\xe1 hodnota s DPH":4e5,"Aktivn\xed":1,"Pozn\xe1mka":"Test import","\u010c\xedslo DMS":"DMS-2025-001",Kategorie:"ZDRAVOTNICTVI"}]),e=JS.Wp.book_new();JS.Wp.book_append_sheet(e,n,"Smlouvy"),JS._h(e,"smlouvy_sablona.xlsx")},style:{marginBottom:"1rem"},children:[(0,en.jsx)(_.g,{icon:C.cbP}),"St\xe1hnout \u0161ablonu"]}),l?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(pP,{children:[(0,en.jsxs)(uP,{children:[(0,en.jsx)(_.g,{icon:C.SGM,style:{color:"#10b981"}}),"Soubor na\u010dten: ",l.name]}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:(0,en.jsxs)("strong",{children:["N\xe1hled dat (",d.length," \u0159\xe1dk\u016f):"]})}),(0,en.jsxs)(mP,{children:[(0,en.jsx)(gP,{children:(0,en.jsxs)("tr",{children:[(0,en.jsx)(hP,{children:"\u010c\xedslo smlouvy"}),(0,en.jsx)(hP,{children:"\xdasek"}),(0,en.jsx)(hP,{children:"N\xe1zev"}),(0,en.jsx)(hP,{children:"I\u010cO"}),(0,en.jsx)(hP,{children:"Partner"}),(0,en.jsx)(hP,{children:"P\u0159edpokl. bez DPH"}),(0,en.jsx)(hP,{children:"P\u0159edpokl. s DPH"}),(0,en.jsx)(hP,{children:"Platn\xe9 do"}),(0,en.jsx)(hP,{children:"ZB\xddV\xc1 bez DPH"}),(0,en.jsx)(hP,{children:"ZB\xddV\xc1 s DPH"})]})}),(0,en.jsx)("tbody",{children:d.slice(0,10).map((n,e)=>(0,en.jsxs)(fP,{children:[(0,en.jsx)(xP,{children:n.cislo_smlouvy||"-"}),(0,en.jsx)(xP,{children:n.usek_zkr||"-"}),(0,en.jsx)(xP,{children:n.nazev_smlouvy||"-"}),(0,en.jsx)(xP,{children:n.ico||"-"}),(0,en.jsx)(xP,{children:n.nazev_firmy||"-"}),(0,en.jsx)(xP,{children:n.hodnota_plneni_bez_dph||"-"}),(0,en.jsx)(xP,{children:n.hodnota_plneni_s_dph||"-"}),(0,en.jsx)(xP,{children:w(n.platnost_do)}),(0,en.jsx)(xP,{children:n.hodnota_bez_dph||"-"}),(0,en.jsx)(xP,{children:n.hodnota_s_dph||"-"})]},e))})]}),d.length>10&&(0,en.jsxs)("div",{style:{color:"#64748b",fontSize:"0.85rem"},children:["... zobrazeno prvn\xedch 10 z ",d.length," \u0159\xe1dk\u016f"]})]}),(0,en.jsx)("div",{style:{marginTop:"1rem"},children:(0,en.jsxs)(wP,{children:[(0,en.jsx)("input",{type:"checkbox",checked:h,onChange:n=>x(n.target.checked)}),"P\u0159epsat existuj\xedc\xed smlouvy (podle \u010d\xedsla smlouvy)"]})})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(aP,{$dragOver:a,onDragOver:n=>{n.preventDefault(),i(!0)},onDragLeave:()=>{i(!1)},onDrop:n=>{n.preventDefault(),i(!1);const e=n.dataTransfer.files[0];k(e)},onClick:()=>document.getElementById("file-input").click(),children:[(0,en.jsx)(iP,{children:(0,en.jsx)(_.g,{icon:C.N72})}),(0,en.jsx)(lP,{children:"P\u0159et\xe1hn\u011bte soubor sem nebo klikn\u011bte pro v\xfdb\u011br"}),(0,en.jsx)(sP,{children:"Excel (.xlsx, .xls) nebo CSV"})]}),(0,en.jsx)(dP,{id:"file-input",type:"file",accept:".xlsx,.xls,.csv",onChange:n=>k(n.target.files[0])})]})]})}),(0,en.jsxs)(tP,{children:[(0,en.jsx)("div",{children:p&&(0,en.jsxs)("span",{style:{color:"#64748b",fontSize:"0.9rem"},children:[(0,en.jsx)(_.g,{icon:C.z1G,spin:!0})," Prob\xedh\xe1 import..."]})}),(0,en.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:m?(0,en.jsx)(rP,{$variant:"primary",onClick:()=>o(!0),children:"Zav\u0159\xedt"}):(0,en.jsxs)(en.Fragment,{children:[l&&(0,en.jsx)(rP,{onClick:()=>{s(null),c([])},children:"Zru\u0161it"}),(0,en.jsx)(rP,{$variant:"success",onClick:A,disabled:!l||0===d.length||p,children:p?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.z1G,spin:!0}),"Importuji..."]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(_.g,{icon:C.SGM}),"Importovat (",d.length,")"]})})]})})]})]}),(0,en.jsxs)(Ri.A,{isOpen:f,title:"Potvrzen\xed importu smluv",icon:C.zpE,variant:h?"danger":"warning",onConfirm:A,onClose:()=>b(!1),children:[(0,en.jsxs)("p",{children:["Opravdu chcete importovat ",(0,en.jsxs)("strong",{children:[d.length," smluv"]}),"?"]}),h&&(0,en.jsxs)("p",{style:{marginTop:"1rem",color:"#dc2626",fontWeight:600},children:["\u26a0\ufe0f ",(0,en.jsx)("strong",{children:"POZOR:"})," Existuj\xedc\xed smlouvy budou p\u0159eps\xe1ny!"]})]})]}),document.body)};var CP,SP,PP,DP,IP,NP,EP,$P,OP,MP,RP,FP,LP,TP,VP,ZP,KP,HP,BP,UP,WP,GP,YP,JP,qP,XP,QP,nD,eD,oD,tD,rD,aD,iD,lD,sD,dD,cD,pD,uD,mD,gD,hD,xD;const fD=w.A.div(CP||(CP=(0,A.A)(["\n  padding: 1rem;\n"]))),bD=w.A.div(SP||(SP=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),vD=(w.A.div(PP||(PP=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n"]))),w.A.button(DP||(DP=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n"])),n=>"primary"===n.$variant?"#3b82f6":"success"===n.$variant?"#10b981":"warning"===n.$variant?"#f59e0b":"#3b82f6",n=>"primary"===n.$variant?"#3b82f6":"success"===n.$variant?"#10b981":"warning"===n.$variant?"#f59e0b":"white",n=>"primary"===n.$variant||"success"===n.$variant||"warning"===n.$variant?"white":"#3b82f6",n=>"primary"===n.$variant?"#2563eb":"success"===n.$variant?"#059669":"warning"===n.$variant?"#d97706":"#eff6ff",n=>"primary"===n.$variant?"#2563eb":"success"===n.$variant?"#059669":"warning"===n.$variant?"#d97706":"#2563eb")),yD=w.A.div(IP||(IP=(0,A.A)(["\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  display: ",";\n"])),n=>n.$visible?"block":"none"),kD=w.A.div(NP||(NP=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n"]))),jD=w.A.div(EP||(EP=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.3rem;\n"]))),AD=w.A.label($P||($P=(0,A.A)(["\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #475569;\n"]))),zD=(w.A.div(OP||(OP=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n"]))),w.A.select(MP||(MP=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: ",";\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  color: #1f2937;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  /* Custom dropdown arrow */\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n\n  /* Styling pro placeholder option */\n  option[value=\"\"] {\n    color: #9ca3af;\n    font-weight: 400;\n  }\n\n  option {\n    color: #1f2937;\n    font-weight: 500;\n    padding: 0.5rem;\n  }\n"])),n=>n.hasIcon?"0.75rem 1.75rem 0.75rem 2.5rem":"0.75rem 1.75rem 0.75rem 0.75rem")),wD=(w.A.input(RP||(RP=(0,A.A)(["\n  padding: 0.5rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 4px;\n  font-size: 0.9rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n"]))),w.A.label(FP||(FP=(0,A.A)(["\n  position: relative;\n  display: inline-block;\n  width: 56px;\n  height: 28px;\n  cursor: pointer;\n  flex-shrink: 0;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #cbd5e1;\n    border-radius: 28px;\n    transition: all 0.3s ease;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      left: 4px;\n      bottom: 4px;\n      background-color: white;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n    }\n  }\n\n  input:checked + span {\n    background-color: #3b82f6;\n  }\n\n  input:checked + span::before {\n    transform: translateX(28px);\n  }\n\n  input:focus + span {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])))),_D=w.A.div(LP||(LP=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n"]))),CD=w.A.button(TP||(TP=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),SD=w.A.div(VP||(VP=(0,A.A)(["\n  background: white;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  border: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),PD=w.A.div(ZP||(ZP=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.2rem;\n"]))),DD=w.A.span(KP||(KP=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n"]))),ID=w.A.span(HP||(HP=(0,A.A)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: ",";\n"])),n=>n.$color||"#1e293b"),ND=w.A.div(BP||(BP=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n"]))),ED=w.A.table(UP||(UP=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),$D=w.A.thead(WP||(WP=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),OD=w.A.th(GP||(GP=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: ",";\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: ",";\n  }\n"])),n=>n.$sortable?"pointer":"default",n=>n.$sortable?"rgba(255, 255, 255, 0.1)":"transparent"),MD=w.A.div(YP||(YP=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  user-select: none;\n"]))),RD=w.A.tr(JP||(JP=(0,A.A)(["\n  background: #f8f9fa;\n  border-top: 1px solid #e5e7eb;\n"]))),FD=w.A.th(qP||(qP=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e5e7eb;\n"]))),LD=w.A.div(XP||(XP=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  \n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 14px !important;\n    height: 14px !important;\n  }\n"]))),TD=w.A.input(QP||(QP=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 0.75rem 0.5rem 2.25rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n  \n  &::placeholder {\n    color: #9ca3af;\n  }\n"]))),VD=w.A.select(nD||(nD=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  background: white;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n"]))),ZD=w.A.tbody(eD||(eD=(0,A.A)([""]))),KD=w.A.tr(oD||(oD=(0,A.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),HD=w.A.td(tD||(tD=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n    white-space: nowrap;\n  }\n\n  &:nth-of-type(2),\n  &:nth-of-type(3),\n  &:nth-of-type(4),\n  &:nth-of-type(5) {\n    text-align: left;\n  }\n\n  &:nth-of-type(3) {\n    max-width: 200px;\n    word-wrap: break-word;\n    white-space: normal;\n  }\n\n  &:nth-of-type(4) {\n    max-width: 300px;\n    word-wrap: break-word;\n    white-space: normal;\n  }\n\n  &:nth-of-type(7) {\n    white-space: nowrap;\n    min-width: 150px;\n  }\n"]))),BD=w.A.span(rD||(rD=(0,A.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ",";\n  color: white;\n  display: inline-block;\n"])),n=>n.$color||"#e2e8f0"),UD=w.A.div(aD||(aD=(0,A.A)(["\n  width: 100%;\n  max-width: 150px;\n  height: 8px;\n  background: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n"]))),WD=w.A.div(iD||(iD=(0,A.A)(["\n  height: 100%;\n  background: ",";\n  width: ","%;\n  transition: width 0.3s;\n"])),n=>{const e=parseFloat(n.$percent)||0;return e>=90?"#ef4444":e>=75?"#f59e0b":e>=50?"#3b82f6":"#10b981"},n=>Math.min(parseFloat(n.$percent)||0,100)),GD=w.A.div(lD||(lD=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n"]))),YD=w.A.button(sD||(sD=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),JD=w.A.span(dD||(dD=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n"]))),qD=w.A.select(cD||(cD=(0,A.A)(["\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),XD=w.A.div(pD||(pD=(0,A.A)(["\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n"]))),QD=w.A.button(uD||(uD=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.view {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &.toggle-active {\n    &:hover {\n      color: #10b981;\n      background: #f0fdf4;\n    }\n  }\n\n  &.toggle-inactive {\n    &:hover {\n      color: #6b7280;\n      background: #f9fafb;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),nI=w.A.div(mD||(mD=(0,A.A)(["\n  padding: 3rem;\n  text-align: center;\n  color: #64748b;\n"]))),eI=w.A.div(gD||(gD=(0,A.A)(["\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.3;\n"]))),oI=w.A.div(hD||(hD=(0,A.A)(["\n  font-size: 1.1rem;\n  margin-bottom: 0.5rem;\n"]))),tI=w.A.div(xD||(xD=(0,A.A)(["\n  font-size: 0.9rem;\n  color: #94a3b8;\n"]))),rI="smlouvy_filters",aI="smlouvy_showFilters",iI=()=>{const{user:n,token:e}=(0,z.useContext)(K.Ay),[o,t]=(0,z.useState)([]),[r,a]=(0,z.useState)([]),[i,l]=(0,z.useState)(!0),[s,d]=(0,z.useState)(null),[c,p]=(0,z.useState)(()=>(()=>{try{return"true"===localStorage.getItem(aI)}catch(s){return!1}})()),[u,m]=(0,z.useState)(()=>{const n=(()=>{try{const n=localStorage.getItem(rI);if(n)return JSON.parse(n)}catch(s){console.warn("\u26a0\ufe0f Chyba p\u0159i na\u010d\xedt\xe1n\xed filtr\u016f smluv z localStorage:",s)}return null})();return n||{search:"",usek_id:"",druh_smlouvy:"",stav:"",platnost_od:"",platnost_do:"",show_inactive:!1}}),[g,h]=(0,z.useState)([]),[x,f]=(0,z.useState)({cislo_smlouvy:"",nazev_firmy:"",ico:"",nazev_smlouvy:"",usek_zkr:"",druh_smlouvy:"",stav:""}),[b,v]=(0,z.useState)(()=>{try{const n=localStorage.getItem("smlouvy_pageSize");return n?parseInt(n,10):25}catch(n){return 25}}),[y,k]=(0,z.useState)(0),[j,A]=(0,z.useState)(!1),[w,P]=(0,z.useState)(!1),[D,I]=(0,z.useState)(!1),[N,E]=(0,z.useState)(null),[$,O]=(0,z.useState)(null),[M,R]=(0,z.useState)({isOpen:!1,title:"",message:"",variant:"warning",onConfirm:null}),L=(0,z.useCallback)(async()=>{try{l(!0),d(null);const[o,r]=await Promise.all([(0,H_.iE)((0,T.A)({token:e,username:n.username},u)),(0,G.Ec)({token:e,username:n.username,show_inactive:!1})]);t(o.data),a(r)}catch(i){var o,r;console.error("[SMLOUVY] \u274c Error loading data:",i),console.error("[SMLOUVY] \u274c Error details:",{message:i.message,response:null===(o=i.response)||void 0===o?void 0:o.data,status:null===(r=i.response)||void 0===r?void 0:r.status}),d(i.message)}finally{l(!1)}},[n,u]);(0,z.useEffect)(()=>{L()},[L]),(0,z.useEffect)(()=>{(n=>{try{localStorage.setItem(rI,JSON.stringify(n))}catch(s){console.warn("\u26a0\ufe0f Chyba p\u0159i ukl\xe1d\xe1n\xed filtr\u016f smluv do localStorage:",s)}})(u)},[u]),(0,z.useEffect)(()=>{(n=>{try{localStorage.setItem(aI,n.toString())}catch(s){console.warn("\u26a0\ufe0f Chyba p\u0159i ukl\xe1d\xe1n\xed stavu filtr\u016f do localStorage:",s)}})(c)},[c]);const V=(0,z.useMemo)(()=>o.filter(n=>{if(!u.show_inactive&&1!==n.aktivni)return!1;if(u.search){const e=u.search.toLowerCase();if(!((n.cislo_smlouvy||"").toLowerCase().includes(e)||(n.nazev_smlouvy||"").toLowerCase().includes(e)||(n.nazev_firmy||"").toLowerCase().includes(e)||(n.popis_smlouvy||"").toLowerCase().includes(e)))return!1}if(u.usek_id&&n.usek_id!==parseInt(u.usek_id))return!1;if(u.druh_smlouvy&&n.druh_smlouvy!==u.druh_smlouvy)return!1;if(u.stav&&n.stav!==u.stav)return!1;if(u.platnost_od){const e=new Date(u.platnost_od),o=new Date(n.platnost_od),t=new Date(n.platnost_do);if(e<o||e>t)return!1}if(u.platnost_do){const e=new Date(u.platnost_do),o=new Date(n.platnost_od),t=new Date(n.platnost_do);if(e<o||e>t)return!1}return!(x.cislo_smlouvy&&!(n.cislo_smlouvy||"").toLowerCase().includes(x.cislo_smlouvy.toLowerCase()))&&(!(x.nazev_firmy&&!(n.nazev_firmy||"").toLowerCase().includes(x.nazev_firmy.toLowerCase()))&&(!(x.ico&&!(n.ico||"").toLowerCase().includes(x.ico.toLowerCase()))&&(!(x.nazev_smlouvy&&!(n.nazev_smlouvy||"").toLowerCase().includes(x.nazev_smlouvy.toLowerCase()))&&(!(x.usek_zkr&&!(n.usek_zkr||"").toLowerCase().includes(x.usek_zkr.toLowerCase()))&&((!x.druh_smlouvy||n.druh_smlouvy===x.druh_smlouvy)&&(!x.stav||n.stav===x.stav))))))}),[o,u,x]);(0,z.useEffect)(()=>{try{localStorage.setItem("smlouvy_pageSize",b.toString())}catch(s){console.warn("\u26a0\ufe0f Chyba p\u0159i ukl\xe1d\xe1n\xed pageSize:",s)}},[b]),(0,z.useEffect)(()=>{k(0)},[u]);const Z=(0,z.useMemo)(()=>{const n=V.filter(n=>1==n.aktivni||!0===n.aktivni),e=u.show_inactive?V:n,o=e.reduce((n,e)=>n+(parseFloat(e.cerpano_celkem)||0),0),t=e.reduce((n,e)=>n+(parseFloat(e.hodnota_s_dph)||0),0),r=t-o,a=e.reduce((n,e)=>n+(parseFloat(e.hodnota_plneni_s_dph)||0),0),i=n.length>0?n.reduce((n,e)=>{const o=parseFloat(e.hodnota_s_dph)||0,t=parseFloat(e.cerpano_celkem)||0;return n+(o>0?t/o*100:0)},0)/n.length:0;return{pocet_celkem:V.length,pocet_aktivnich:n.length,celkem_cerpano:o,celkem_limit:t,celkem_zbyva:r,celkem_plneni:a,prumerne_cerpani:i}},[V,u.show_inactive]),H=n=>{E(n),A(!0)},B=async o=>{try{const t=await(0,H_.hu)({token:e,username:n.username,id:o.id});O(t),P(!0)}catch(t){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed detailu:",t),d("Chyba p\u0159i na\u010d\xedt\xe1n\xed detailu: "+t.message)}},Y=async o=>{const t=1==o.aktivni||!0===o.aktivni,r=t?"deaktivovat":"aktivovat";R({isOpen:!0,title:t?"Deaktivace smlouvy":"Aktivace smlouvy",message:t?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{children:["Opravdu chcete deaktivovat smlouvu ",(0,en.jsx)("strong",{children:o.cislo_smlouvy}),"?"]}),(0,en.jsx)("p",{style:{marginTop:"1rem",color:"#dc2626",fontWeight:600},children:"\u26a0\ufe0f Smlouva se nebude nab\xedzet v objedn\xe1vk\xe1ch a nebude se po\u010d\xedtat do statistik \u010derp\xe1n\xed."})]}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{children:["Opravdu chcete aktivovat smlouvu ",(0,en.jsx)("strong",{children:o.cislo_smlouvy}),"?"]}),(0,en.jsx)("p",{style:{marginTop:"1rem",color:"#10b981",fontWeight:600},children:"\u2705 Smlouva se bude nab\xedzet v objedn\xe1vk\xe1ch a bude se po\u010d\xedtat do statistik \u010derp\xe1n\xed."})]}),variant:t?"warning":"success",onConfirm:async()=>{try{await(0,H_.pq)({token:e,username:n.username,id:o.id,smlouvaData:{aktivni:t?0:1}}),console.log("Smlouva byla ".concat(t?"deaktivov\xe1na":"aktivov\xe1na",":"),o.cislo_smlouvy),L(),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}catch(a){console.error("Chyba p\u0159i ".concat(r,":"),a),d("Chyba p\u0159i ".concat(r,": ")+a.message),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}}})},J=async o=>{R({isOpen:!0,title:"Smaz\xe1n\xed smlouvy",message:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{children:["Opravdu chcete trvale smazat smlouvu ",(0,en.jsx)("strong",{children:o.cislo_smlouvy}),"?"]}),(0,en.jsxs)("p",{style:{marginTop:"1rem",color:"#dc2626",fontWeight:600},children:["\u26a0\ufe0f Tato akce je ",(0,en.jsx)("strong",{children:"NEVRATN\xc1"}),"!"]}),(0,en.jsx)("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:"Tip: Pokud chcete smlouvu jen do\u010dasn\u011b skr\xfdt, pou\u017eijte rad\u011bji deaktivaci."})]}),variant:"danger",onConfirm:async()=>{try{await(0,H_.Fl)({token:e,username:n.username,id:o.id}),console.log("Smlouva byla smaz\xe1na:",o.cislo_smlouvy),L(),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}catch(t){console.error("Chyba p\u0159i maz\xe1n\xed:",t),d("Chyba p\u0159i maz\xe1n\xed: "+t.message),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}}})},q=(n,e)=>{m(o=>(0,T.A)((0,T.A)({},o),{},{[n]:e}))},X=(0,W.FB)(),Q=(0,z.useMemo)(()=>[X.accessor("cislo_smlouvy",{header:"\u010c\xedslo smlouvy",cell:n=>(0,en.jsx)("strong",{children:n.getValue()}),enableSorting:!0}),X.accessor("nazev_firmy",{header:"Firma",cell:n=>n.getValue(),enableSorting:!0}),X.accessor("ico",{header:"I\u010cO",cell:n=>n.getValue()||"---",enableSorting:!0}),X.accessor("nazev_smlouvy",{header:"N\xe1zev smlouvy",cell:n=>n.getValue(),enableSorting:!0}),X.accessor("usek_zkr",{header:"\xdasek",cell:n=>n.getValue(),enableSorting:!0}),X.accessor("platnost_od",{header:"Platnost",cell:n=>{const e=n.row.original;return(0,en.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.1rem",fontSize:"0.875rem",whiteSpace:"nowrap"},children:[e.platnost_od&&(0,en.jsxs)("div",{children:[(0,en.jsx)("strong",{children:"Od:"})," ",sn(e.platnost_od)]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("strong",{children:"Do:"})," ",sn(e.platnost_do)]})]})},enableSorting:!0,sortingFn:(n,e)=>(n.original.platnost_od?new Date(n.original.platnost_od).getTime():0)-(e.original.platnost_od?new Date(e.original.platnost_od).getTime():0)}),X.accessor("hodnota_s_dph",{header:"Po\u010d\xe1te\u010dn\xed stav s DPH",cell:n=>(0,en.jsx)("span",{style:{color:"#1e40af",fontWeight:"600"},children:ln(n.getValue())}),enableSorting:!0,sortingFn:(n,e)=>(parseFloat(n.original.hodnota_s_dph)||0)-(parseFloat(e.original.hodnota_s_dph)||0)}),X.accessor("cerpano_celkem",{header:"\u010cerp\xe1n\xed s DPH",cell:n=>{const e=n.row.original,o=parseFloat(e.hodnota_s_dph)||0,t=parseFloat(n.getValue())||0,r=o>0?t/o*100:0;return(0,en.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.3rem"},children:[(0,en.jsx)(UD,{children:(0,en.jsx)(WD,{$percent:r})}),(0,en.jsxs)("small",{children:[r.toFixed(1),"%"]}),(0,en.jsx)("strong",{children:ln(t)})]})},enableSorting:!0,sortingFn:(n,e)=>(parseFloat(n.original.cerpano_celkem)||0)-(parseFloat(e.original.cerpano_celkem)||0)}),X.accessor(n=>(parseFloat(n.hodnota_s_dph)||0)-(parseFloat(n.cerpano_celkem)||0),{id:"zbyva",header:"Zb\xfdv\xe1 s DPH",cell:n=>{const e=n.getValue();return(0,en.jsx)("span",{style:{color:e>=0?"#10b981":"#dc2626",fontWeight:"600"},children:ln(e)})},enableSorting:!0,sortingFn:(n,e)=>(parseFloat(n.original.hodnota_s_dph)||0)-(parseFloat(n.original.cerpano_celkem)||0)-((parseFloat(e.original.hodnota_s_dph)||0)-(parseFloat(e.original.cerpano_celkem)||0))}),X.accessor("stav",{header:"Stav",cell:n=>(0,en.jsx)(BD,{$color:(0,H_.Bn)(n.getValue()),children:(0,H_.oO)(n.getValue())}),enableSorting:!0}),X.display({id:"actions",header:()=>(0,en.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,en.jsx)(_.g,{icon:C.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:n=>(0,en.jsxs)(XD,{children:[(0,en.jsx)(F.z,{content:"Detail smlouvy",children:(0,en.jsx)(QD,{onClick:()=>B(n.row.original),className:"view",children:(0,en.jsx)(_.g,{icon:C.pS3})})}),(0,en.jsx)(F.z,{content:"Upravit smlouvu",children:(0,en.jsx)(QD,{onClick:()=>H(n.row.original),className:"edit",children:(0,en.jsx)(_.g,{icon:C.MT7})})}),(0,en.jsx)(F.z,{content:n.row.original.aktivni?"Deaktivovat":"Aktivovat",children:(0,en.jsx)(QD,{onClick:()=>Y(n.row.original),className:n.row.original.aktivni?"toggle-active":"toggle-inactive",children:(0,en.jsx)(_.g,{icon:n.row.original.aktivni?C.npb:C.tKC})})}),(0,en.jsx)(F.z,{content:"Smazat smlouvu",children:(0,en.jsx)(QD,{onClick:()=>J(n.row.original),className:"delete",children:(0,en.jsx)(_.g,{icon:C.yLS})})})]})})],[B,H,Y,J]),nn=(0,U.N4)({data:V,columns:Q,state:{sorting:g},onSortingChange:h,getCoreRowModel:(0,W.HT)(),getSortedRowModel:(0,W.h5)()}),on=nn.getSortedRowModel().rows,tn=(0,z.useMemo)(()=>{const n=y*b,e=n+b;return on.slice(n,e)},[on,y,b]),rn=Math.ceil(on.length/b),an=()=>{P(!1),O(null)},ln=n=>{const e=parseFloat(n)||0;return new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},sn=n=>{if(!n)return"-";return new Date(n).toLocaleDateString("cs-CZ")};return(0,en.jsxs)(fD,{children:[(0,en.jsxs)(bD,{children:[(0,en.jsxs)(_D,{children:[(0,en.jsx)(_.g,{icon:C.MjD,className:"search-icon"}),(0,en.jsx)("input",{type:"text",placeholder:"Hledat podle \u010d\xedsla, n\xe1zvu, firmy...",value:u.search,onChange:n=>q("search",n.target.value)}),u.search&&(0,en.jsx)(CD,{onClick:()=>q("search",""),title:"Vymazat",children:(0,en.jsx)(_.g,{icon:C.GRI})})]}),(0,en.jsxs)(vD,{onClick:()=>p(!c),children:[(0,en.jsx)(_.g,{icon:c?C.w2A:C.Jt$}),c?"Skr\xfdt filtry":"Roz\u0161\xed\u0159en\xfd filtr"]}),(0,en.jsxs)(vD,{$variant:"primary",onClick:()=>{E(null),A(!0)},children:[(0,en.jsx)(_.g,{icon:C.QLR}),"P\u0159idat smlouvu"]}),(0,en.jsxs)(vD,{$variant:"success",onClick:()=>I(!0),children:[(0,en.jsx)(_.g,{icon:C.$MS}),"Import z Excel"]}),(0,en.jsxs)(vD,{$variant:"warning",onClick:async()=>{R({isOpen:!0,title:"P\u0159epo\u010det \u010derp\xe1n\xed smluv",message:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("p",{children:["Opravdu chcete p\u0159epo\u010d\xedtat \u010derp\xe1n\xed ",(0,en.jsx)("strong",{children:"v\u0161ech smluv"}),"?"]}),(0,en.jsx)("p",{style:{marginTop:"1rem",color:"#f59e0b",fontWeight:600},children:"\u23f1\ufe0f Tato operace m\u016f\u017ee trvat n\u011bkolik sekund."}),(0,en.jsx)("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:"Syst\xe9m projde v\u0161echny objedn\xe1vky a aktualizuje \u010d\xe1stky na jednotliv\xfdch smlouv\xe1ch."})]}),variant:"warning",onConfirm:async()=>{try{const o=await(0,H_.SJ)({token:e,username:n.username,cislo_smlouvy:null,usek_id:null});console.log("P\u0159epo\u010det dokon\u010den:",o),L(),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}catch(o){console.error("Chyba p\u0159i p\u0159epo\u010dtu:",o),d("Chyba p\u0159i p\u0159epo\u010dtu: "+o.message),R((0,T.A)((0,T.A)({},M),{},{isOpen:!1}))}}})},children:[(0,en.jsx)(_.g,{icon:C.OtC}),"P\u0159epo\u010d\xedtat \u010derp\xe1n\xed"]})]}),(0,en.jsx)(yD,{$visible:c,children:(0,en.jsxs)(kD,{children:[(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{children:"\xdasek"}),(0,en.jsxs)(zD,{value:u.usek_id,onChange:n=>q("usek_id",n.target.value),children:[(0,en.jsx)("option",{value:"",children:"V\u0161echny \xfaseky"}),r.map(n=>(0,en.jsxs)("option",{value:n.id,children:[n.usek_zkr," - ",n.usek_nazev]},n.id))]})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{children:"Druh smlouvy"}),(0,en.jsxs)(zD,{value:u.druh_smlouvy,onChange:n=>q("druh_smlouvy",n.target.value),children:[(0,en.jsx)("option",{value:"",children:"V\u0161echny druhy"}),H_.vh.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))]})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{children:"Stav"}),(0,en.jsxs)(zD,{value:u.stav,onChange:n=>q("stav",n.target.value),children:[(0,en.jsx)("option",{value:"",children:"V\u0161echny stavy"}),H_.aF.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))]})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{children:"Platnost od"}),(0,en.jsx)(kv.A,{value:u.platnost_od,onChange:n=>q("platnost_od",n),placeholder:"Vyberte datum od"})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{children:"Platnost do"}),(0,en.jsx)(kv.A,{value:u.platnost_do,onChange:n=>q("platnost_do",n),placeholder:"Vyberte datum do"})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{style:{marginBottom:"0.3rem"},children:"\xa0"}),(0,en.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",height:"46px"},children:[(0,en.jsxs)(wD,{children:[(0,en.jsx)("input",{type:"checkbox",checked:u.show_inactive,onChange:n=>q("show_inactive",n.target.checked)}),(0,en.jsx)("span",{})]}),(0,en.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#475569"},children:"Zobrazit neaktivn\xed"})]})]}),(0,en.jsxs)(jD,{children:[(0,en.jsx)(AD,{style:{marginBottom:"0.3rem"},children:"\xa0"}),(0,en.jsx)(vD,{onClick:()=>{m({search:"",usek_id:"",druh_smlouvy:"",stav:"",platnost_od:"",platnost_do:"",show_inactive:!1})},style:{width:"100%",height:"46px"},children:"Vymazat filtry"})]})]})}),(0,en.jsxs)(SD,{children:[(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Smluv celkem"}),(0,en.jsx)(ID,{children:Z.pocet_celkem})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Aktivn\xedch"}),(0,en.jsx)(ID,{$color:"#10b981",children:Z.pocet_aktivnich})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Celkov\xfd limit"}),(0,en.jsx)(ID,{children:ln(Z.celkem_limit)})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Celkem \u010derp\xe1no"}),(0,en.jsx)(ID,{$color:"#3b82f6",children:ln(Z.celkem_cerpano)})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Zb\xfdv\xe1"}),(0,en.jsx)(ID,{$color:"#10b981",children:ln(Z.celkem_zbyva)})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Celkov\xe9 pln\u011bn\xed"}),(0,en.jsx)(ID,{$color:"#6b7280",children:ln(Z.celkem_plneni)})]}),(0,en.jsxs)(PD,{children:[(0,en.jsx)(DD,{children:"Pr\u016fm\u011brn\xe9 \u010derp\xe1n\xed"}),(0,en.jsxs)(ID,{children:[Z.prumerne_cerpani.toFixed(1),"%"]})]})]}),s&&(0,en.jsx)("div",{style:{padding:"1rem",background:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"1rem"},children:s}),(0,en.jsxs)(ND,{children:[(0,en.jsxs)(ED,{children:[(0,en.jsxs)($D,{children:[nn.getHeaderGroups().map(n=>(0,en.jsx)("tr",{children:n.headers.map(n=>(0,en.jsx)(OD,{$sortable:n.column.getCanSort(),onClick:n.column.getToggleSortingHandler(),children:n.isPlaceholder?null:(0,en.jsxs)(MD,{children:[(0,en.jsx)("span",{children:(0,U.Kv)(n.column.columnDef.header,n.getContext())}),n.column.getIsSorted()&&(0,en.jsx)(_.g,{icon:"asc"===n.column.getIsSorted()?C.w2A:C.Jt$,style:{fontSize:"0.75rem"}})]})},n.id))},n.id)),(0,en.jsxs)(RD,{children:[(0,en.jsx)(FD,{children:(0,en.jsxs)(LD,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(TD,{type:"text",placeholder:"Hledat \u010d\xedslo...",value:x.cislo_smlouvy,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{cislo_smlouvy:n.target.value}))})]})}),(0,en.jsx)(FD,{children:(0,en.jsxs)(LD,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(TD,{type:"text",placeholder:"Hledat firmu...",value:x.nazev_firmy,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{nazev_firmy:n.target.value}))})]})}),(0,en.jsx)(FD,{children:(0,en.jsxs)(LD,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(TD,{type:"text",placeholder:"Hledat I\u010cO...",value:x.ico,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{ico:n.target.value}))})]})}),(0,en.jsx)(FD,{children:(0,en.jsxs)(LD,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(TD,{type:"text",placeholder:"Hledat n\xe1zev...",value:x.nazev_smlouvy,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{nazev_smlouvy:n.target.value}))})]})}),(0,en.jsx)(FD,{children:(0,en.jsxs)(LD,{children:[(0,en.jsx)(_.g,{icon:C.MjD}),(0,en.jsx)(TD,{type:"text",placeholder:"Hledat \xfasek...",value:x.usek_zkr,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{usek_zkr:n.target.value}))})]})}),(0,en.jsx)(FD,{}),(0,en.jsx)(FD,{}),(0,en.jsx)(FD,{}),(0,en.jsx)(FD,{}),(0,en.jsx)(FD,{children:(0,en.jsxs)(VD,{value:x.stav,onChange:n=>f(e=>(0,T.A)((0,T.A)({},e),{},{stav:n.target.value})),children:[(0,en.jsx)("option",{value:"",children:"V\u0161echny"}),H_.aF.map(n=>(0,en.jsx)("option",{value:n.value,children:n.label},n.value))]})}),(0,en.jsx)(FD,{})]})]}),(0,en.jsx)(ZD,{children:i?(0,en.jsx)("tr",{children:(0,en.jsx)(HD,{colSpan:Q.length,style:{textAlign:"center",padding:"2rem"},children:"Na\u010d\xedt\xe1m smlouvy..."})}):0===tn.length?(0,en.jsx)("tr",{children:(0,en.jsx)(HD,{colSpan:Q.length,style:{textAlign:"center",padding:"2rem"},children:(0,en.jsxs)(nI,{children:[(0,en.jsx)(eI,{children:(0,en.jsx)(S.A,{size:48})}),(0,en.jsx)(oI,{children:0===o.length?"\u017d\xe1dn\xe9 smlouvy":"Nenalezeny \u017e\xe1dn\xe9 smlouvy"}),(0,en.jsx)(tI,{children:0===o.length?'Vytvo\u0159te novou smlouvu pomoc\xed tla\u010d\xedtka "P\u0159idat smlouvu"':"Zkuste zm\u011bnit vyhled\xe1v\xe1n\xed nebo filtry"})]})})}):tn.map((n,e)=>(0,en.jsx)(KD,{$isEven:e%2===0,children:n.getVisibleCells().map(n=>(0,en.jsx)(HD,{children:(0,U.Kv)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))})]}),(0,en.jsxs)(GD,{children:[(0,en.jsxs)(JD,{children:["Zobrazeno ",Math.min(y*b+1,on.length)," - ",Math.min((y+1)*b,on.length)," z ",on.length," smluv"]}),(0,en.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,en.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,en.jsxs)(qD,{value:b,onChange:n=>{const e=Number(n.target.value);v(e),k(0)},children:[(0,en.jsx)("option",{value:"10",children:"10"}),(0,en.jsx)("option",{value:"25",children:"25"}),(0,en.jsx)("option",{value:"50",children:"50"}),(0,en.jsx)("option",{value:"100",children:"100"}),(0,en.jsx)("option",{value:"250",children:"250"}),(0,en.jsx)("option",{value:"500",children:"500"})]}),(0,en.jsx)(YD,{onClick:()=>k(0),disabled:0===y,children:"\xab\xab"}),(0,en.jsx)(YD,{onClick:()=>k(n=>Math.max(0,n-1)),disabled:0===y,children:"\u2039"}),(0,en.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",y+1," z ",Math.max(1,rn)]}),(0,en.jsx)(YD,{onClick:()=>k(n=>Math.min(rn-1,n+1)),disabled:y>=rn-1,children:"\u203a"}),(0,en.jsx)(YD,{onClick:()=>k(rn-1),disabled:y>=rn-1,children:"\xbb\xbb"})]})]})]}),j&&(0,en.jsx)(sC,{smlouva:N,useky:r,onClose:n=>{A(!1),E(null),n&&L()}}),w&&$&&(0,en.jsx)(bS,{smlouva:$,onClose:an,onEdit:()=>{an(),H($.smlouva)}}),D&&(0,en.jsx)(_P,{useky:r,onClose:n=>{I(!1),n&&L()}}),(0,en.jsx)(Ri.A,{isOpen:M.isOpen,title:M.title,icon:C.zpE,variant:M.variant,onConfirm:M.onConfirm,onClose:()=>R((0,T.A)((0,T.A)({},M),{},{isOpen:!1})),children:M.message})]})};var lI,sI,dI,cI,pI,uI,mI,gI;const hI=w.A.div(lI||(lI=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),xI=w.A.div(sI||(sI=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n"]))),fI=w.A.h1(dI||(dI=(0,A.A)(["\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n"]))),bI=w.A.button(cI||(cI=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.5rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"]))),vI=(w.A.div(pI||(pI=(0,A.A)(["\n  height: 1px;\n  background: linear-gradient(to right, transparent, #e5e7eb 50%, transparent);\n  margin: 1rem 0;\n"]))),w.A.div(uI||(uI=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n"])))),yI=w.A.div(mI||(mI=(0,A.A)(["\n  display: flex;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n  overflow-x: auto;\n\n  /* Hide scrollbar ale zachovat funkcionalitu */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),kI=w.A.button(gI||(gI=(0,A.A)(["\n  flex: 0 0 auto;\n  min-width: 160px;\n  padding: 0.6rem 1.2rem;\n  background: ",";\n  border: none;\n  border-bottom: 3px solid ",";\n  color: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n"])),n=>n.$active?"white":"transparent",n=>n.$active?"#3b82f6":"transparent",n=>n.$active?"#3b82f6":"#64748b",n=>n.$active?"600":"500",n=>n.$active?"white":"#f1f5f9",n=>(n.$active,"#3b82f6")),jI=()=>{const[n,e]=(0,z.useState)(()=>{try{return localStorage.getItem("dictionaries_activeTab")||"docx"}catch(n){return"docx"}}),o=n=>{e(n);try{localStorage.setItem("dictionaries_activeTab",n)}catch(o){}},[t,r]=(0,z.useState)(0);return(0,en.jsxs)(hI,{children:[(0,en.jsxs)(xI,{children:[(0,en.jsxs)(fI,{children:[(0,en.jsx)(_.g,{icon:C.LBj}),"\u010c\xedseln\xedky - ",(a=n,{lokality:"Lokality",pozice:"Pozice",useky:"\xdaseky",organizace:"Organizace",stavy:"Stavy",role:"Role",prava:"Pr\xe1va",docx:"DOCX \u0160ablony",cashbook:"Pokladn\xed knihy",smlouvy:"Smlouvy"}[a]||"\u010c\xedseln\xedky")]}),(0,en.jsx)(F.z,{text:"Obnovit v\u0161echny \u010d\xedseln\xedky z datab\xe1ze (force reload)",icon:"warning",preferredPosition:"bottom",children:(0,en.jsx)(bI,{onClick:()=>{Object.keys(localStorage).forEach(n=>{if((n.includes("lokality_")||n.includes("pozice_")||n.includes("useky_")||n.includes("organizace_")||n.includes("stavy_")||n.includes("role_")||n.includes("prava_")||n.includes("docx_")||n.includes("cashbook_")||n.includes("smlouvy_"))&&"dictionaries_activeTab"!==n)try{localStorage.removeItem(n)}catch(e){}}),r(n=>n+1)},children:(0,en.jsx)(_.g,{icon:C.OtC})})})]}),(0,en.jsxs)(vI,{children:[(0,en.jsxs)(yI,{children:[(0,en.jsxs)(kI,{$active:"docx"===n,onClick:()=>o("docx"),children:[(0,en.jsx)(S.A,{size:18}),"DOCX \u0160ablony"]}),(0,en.jsxs)(kI,{$active:"cashbook"===n,onClick:()=>o("cashbook"),children:[(0,en.jsx)(P.A,{size:18}),"Pokladn\xed knihy"]}),(0,en.jsxs)(kI,{$active:"smlouvy"===n,onClick:()=>o("smlouvy"),children:[(0,en.jsx)(D.A,{size:18}),"Smlouvy"]}),(0,en.jsxs)(kI,{$active:"lokality"===n,onClick:()=>o("lokality"),children:[(0,en.jsx)(I.A,{size:18}),"Lokality"]}),(0,en.jsxs)(kI,{$active:"pozice"===n,onClick:()=>o("pozice"),children:[(0,en.jsx)(N.A,{size:18}),"Pozice"]}),(0,en.jsxs)(kI,{$active:"prava"===n,onClick:()=>o("prava"),children:[(0,en.jsx)(E.A,{size:18}),"Pr\xe1va"]}),(0,en.jsxs)(kI,{$active:"role"===n,onClick:()=>o("role"),children:[(0,en.jsx)($.A,{size:18}),"Role"]}),(0,en.jsxs)(kI,{$active:"stavy"===n,onClick:()=>o("stavy"),children:[(0,en.jsx)(O.A,{size:18}),"Stavy"]}),(0,en.jsxs)(kI,{$active:"useky"===n,onClick:()=>o("useky"),children:[(0,en.jsx)(M.A,{size:18}),"\xdaseky"]}),(0,en.jsxs)(kI,{$active:"organizace"===n,onClick:()=>o("organizace"),children:[(0,en.jsx)(R.A,{size:18}),"Organizace"]})]}),"docx"===n&&(0,en.jsx)(Qf,{},"docx-".concat(t)),"cashbook"===n&&(0,en.jsx)(__,{},"cashbook-".concat(t)),"smlouvy"===n&&(0,en.jsx)(iI,{},"smlouvy-".concat(t)),"lokality"===n&&(0,en.jsx)(ro,{},"lokality-".concat(t)),"pozice"===n&&(0,en.jsx)(dt,{},"pozice-".concat(t)),"prava"===n&&(0,en.jsx)(Ec,{},"prava-".concat(t)),"role"===n&&(0,en.jsx)(xd,{},"role-".concat(t)),"stavy"===n&&(0,en.jsx)(Mi,{},"stavy-".concat(t)),"useky"===n&&(0,en.jsx)(gr,{},"useky-".concat(t)),"organizace"===n&&(0,en.jsx)(Da,{},"organizace-".concat(t))]})]});var a}},74714:(n,e,o)=>{"use strict";o.d(e,{WL:()=>t});const t=n=>n?n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""},77220:(n,e,o)=>{"use strict";o.d(e,{Bn:()=>b,Fl:()=>p,SJ:()=>m,aF:()=>h,gy:()=>d,hu:()=>s,iE:()=>l,oO:()=>f,pi:()=>u,pq:()=>c,sw:()=>v,vh:()=>g});var t=o(89379);const r=o(56263).A.create({baseURL:"".concat("https://erdms.zachranka.cz/api.eeo/"),headers:{"Content-Type":"application/json"}}),a=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chyba serveru";if(!n.response)throw n.request?new Error("Server neodpov\xedd\xe1. Zkontrolujte p\u0159ipojen\xed."):new Error(n.message||e);{const{status:o,data:t}=n.response,r=(null===t||void 0===t?void 0:t.err)||(null===t||void 0===t?void 0:t.error)||(null===t||void 0===t?void 0:t.message)||e;switch(o){case 401:throw new Error("Neplatn\xfd token. P\u0159ihlaste se znovu.");case 403:throw new Error("Nem\xe1te opr\xe1vn\u011bn\xed k t\xe9to akci.");case 404:throw new Error("Z\xe1znam nebyl nalezen.");default:throw new Error(r)}}},i=function(n){var e,o,t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"operace";if(null!==(e=n.data)&&void 0!==e&&e.err)throw new Error(n.data.err);if("error"===(null===(o=n.data)||void 0===o?void 0:o.status))throw new Error(n.data.message||"".concat(r," se nezda\u0159ila"));if("ok"!==(null===(t=n.data)||void 0===t?void 0:t.status))throw new Error("".concat(r," se nezda\u0159ila - neplatn\xfd status"));return n.data};async function l(n){let{token:e,username:o,show_inactive:t=!1,usek_id:l=null,druh_smlouvy:s=null,stav:d=null,search:c=null,platnost_od:p=null,platnost_do:u=null,limit:m=1e3,offset:g=0}=n;try{const n={username:o,token:e,show_inactive:t,usek_id:l,druh_smlouvy:s,stav:d,search:c,platnost_od:p,platnost_do:u,limit:m,offset:g},a=await r.post("ciselniky/smlouvy/list",n);return i(a,"Na\u010d\xedt\xe1n\xed smluv")}catch(h){throw a(h,"Chyba p\u0159i na\u010d\xedt\xe1n\xed smluv"),h}}async function s(n){let{token:e,username:o,id:t}=n;try{const n=await r.post("ciselniky/smlouvy/detail",{username:o,token:e,id:t});return i(n,"Na\u010d\xedt\xe1n\xed detailu smlouvy").data||null}catch(l){throw a(l,"Chyba p\u0159i na\u010d\xedt\xe1n\xed detailu smlouvy"),l}}async function d(n){let{token:e,username:o,smlouvaData:l}=n;try{const n=await r.post("ciselniky/smlouvy/insert",(0,t.A)({username:o,token:e},l));return i(n,"Vytv\xe1\u0159en\xed smlouvy").data}catch(s){throw a(s,"Chyba p\u0159i vytv\xe1\u0159en\xed smlouvy"),s}}async function c(n){let{token:e,username:o,id:l,smlouvaData:s}=n;try{const n=await r.post("ciselniky/smlouvy/update",(0,t.A)({username:o,token:e,id:l},s));return i(n,"Aktualizace smlouvy").data}catch(d){throw a(d,"Chyba p\u0159i aktualizaci smlouvy"),d}}async function p(n){let{token:e,username:o,id:t}=n;try{const n=await r.post("ciselniky/smlouvy/delete",{username:o,token:e,id:t});return i(n,"Maz\xe1n\xed smlouvy").data}catch(l){throw a(l,"Chyba p\u0159i maz\xe1n\xed smlouvy"),l}}async function u(n){let{token:e,username:o,data:t,overwrite_existing:l=!1,nazev_souboru:s=null,typ_souboru:d=null,velikost_souboru:c=null}=n;try{const n=await r.post("ciselniky/smlouvy/bulk-import",{username:o,token:e,data:t,overwrite_existing:l,nazev_souboru:s,typ_souboru:d,velikost_souboru:c});return i(n,"Import smluv").data}catch(p){throw a(p,"Chyba p\u0159i importu smluv"),p}}async function m(n){let{token:e,username:o,cislo_smlouvy:t=null,usek_id:l=null}=n;try{const n=await r.post("ciselniky/smlouvy/prepocet-cerpani",{username:o,token:e,cislo_smlouvy:t,usek_id:l});return i(n,"P\u0159epo\u010det \u010derp\xe1n\xed").data}catch(s){throw a(s,"Chyba p\u0159i p\u0159epo\u010dtu \u010derp\xe1n\xed"),s}}const g=[{value:"SLU\u017dBY",label:"Smlouva o poskytov\xe1n\xed slu\u017eeb"},{value:"KUPN\xcd",label:"Kupn\xed smlouva"},{value:"R\xc1MCOV\xc1",label:"R\xe1mcov\xe1 smlouva"}],h=[{value:"AKTIVNI",label:"Platn\xe1",color:"#10b981",icon:"\u2705",popis:"Smlouva je v platnosti a lze ji pou\u017e\xedvat"},{value:"UKONCENA",label:"Vypr\u0161ela",color:"#dc2626",icon:"\u26d4",popis:"Smlouva p\u0159ekro\u010dila datum konce platnosti"},{value:"PRERUSENA",label:"P\u0159eru\u0161ena",color:"#f59e0b",icon:"\u23f8\ufe0f",popis:"Smlouva je do\u010dasn\u011b pozastavena"},{value:"PRIPRAVOVANA",label:"P\u0159ipraven\xe1",color:"#f97316",icon:"\u23f3",popis:"Smlouva \u010dek\xe1 na za\u010d\xe1tek platnosti"},{value:"NEAKTIVNI",label:"Neaktivn\xed",color:"#6b7280",icon:"\ud83d\udeab",popis:"Smlouva je deaktivov\xe1na (soft delete)"}],x=n=>h.find(e=>e.value===n)||{value:n,label:n,color:"#6b7280",icon:"\u2753"},f=n=>x(n).label,b=n=>x(n).color,v=[{value:0,label:"0% (osvobozeno)"},{value:12,label:"12% (sn\xed\u017een\xe1)"},{value:21,label:"21% (z\xe1kladn\xed)"}]},83686:()=>{},95162:(n,e,o)=>{"use strict";o.d(e,{h7:()=>a});const t=o(56263).A.create({baseURL:"https://erdms.zachranka.cz/api.eeo/",headers:{"Content-Type":"application/json"}});function r(n){var e,o,t,r,a,i,l;return null!==(e=n.response)&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.message?n.response.data.message:null!==(t=n.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.error?n.response.data.error:null!==(a=n.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.err?n.response.data.err:null!==(l=n.response)&&void 0!==l&&l.data?n.response.data:n.message?n.message:"Nezn\xe1m\xe1 chyba p\u0159i komunikaci se serverem"}async function a(n){let{token:e,username:o,objednavka_id:a}=n;if(!e||!o)throw new Error("Chyb\xed p\u0159\xedstupov\xfd token nebo u\u017eivatelsk\xe9 jm\xe9no. P\u0159ihlaste se pros\xedm znovu.");if(null===a||void 0===a)throw new Error("Chyb\xed ID objedn\xe1vky.");try{const n={token:e,username:o,objednavka_id:parseInt(a)},r=await t.post("sablona_docx/order-enriched-data",n,{timeout:1e4});if(200!==r.status)throw new Error("Neo\u010dek\xe1van\xfd k\xf3d odpov\u011bdi p\u0159i na\u010d\xedt\xe1n\xed enriched dat");const i=r.data;if(i.err)throw new Error(i.err);if("ok"===i.status&&i.data)return i.data;throw new Error("Neo\u010dek\xe1van\xe1 struktura odpov\u011bdi ze serveru")}catch(i){throw console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed DOCX enriched data:",i),new Error(r(i))}}t.interceptors.response.use(n=>n,n=>{var e,o,t;if((401===(null===(e=n.response)||void 0===e?void 0:e.status)||403===(null===(o=n.response)||void 0===o?void 0:o.status))&&"undefined"!==typeof window){const n=new CustomEvent("authError",{detail:{message:"Va\u0161e p\u0159ihl\xe1\u0161en\xed vypr\u0161elo. P\u0159ihlaste se pros\xedm znovu."}});window.dispatchEvent(n)}const r=(null===(t=n.response)||void 0===t?void 0:t.data)||"";if("string"===typeof r&&r.includes("<!doctype")&&"undefined"!==typeof window){const n=new CustomEvent("authError",{detail:{message:"Va\u0161e p\u0159ihl\xe1\u0161en\xed vypr\u0161elo. Obnovte str\xe1nku a p\u0159ihlaste se znovu."}});window.dispatchEvent(n)}return Promise.reject(n)})}}]);
//# sourceMappingURL=5349.b2c5fb27.chunk.js.map