"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[4675],{94675:(e,n,r)=>{r.r(n),r.d(n,{default:()=>Er});var t,o,a,i,s,d,l,c,u,g,p,h,m,b,v,f,y,x,k,j,w,_,A,z,C,S,E,F,O,D,K=r(89379),N=r(57528),P=r(65043),R=r(45903),I=r(83910),L=r(27837),T=r(97929),M=r(97950),V=r(58931),$=r(47111),Z=r(70579);const H=R.A.div(t||(t=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  overflow: hidden;\n  margin-top: 1rem;\n"]))),q=R.A.div(o||(o=(0,N.A)(["\n  overflow-x: auto;\n  overflow-y: visible;\n  width: 100%;\n  position: relative;\n  \n  /* Horizontal scrollbar styling */\n  &::-webkit-scrollbar {\n    height: 12px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 6px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, #3b82f6, #60a5fa);\n    border-radius: 6px;\n    border: 2px solid #f1f5f9;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, #2563eb, #3b82f6);\n  }\n  \n  /* Firefox scrollbar */\n  scrollbar-width: thin;\n  scrollbar-color: #3b82f6 #f1f5f9;\n"]))),U=R.A.table(a||(a=(0,N.A)(["\n  width: 100%;\n  min-width: 1200px;\n  border-collapse: collapse;\n  font-size: 0.875rem;\n"]))),B=R.A.thead(i||(i=(0,N.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"]))),G=R.A.tr(s||(s=(0,N.A)([""]))),Y=R.A.th(d||(d=(0,N.A)(["\n  padding: 1rem;\n  text-align: ",";\n  color: white;\n  font-weight: 600;\n  cursor: ",";\n  user-select: none;\n  white-space: nowrap;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  &:first-of-type {\n    border-top-left-radius: 12px;\n  }\n  \n  &:last-of-type {\n    border-top-right-radius: 12px;\n  }\n"])),e=>e.$align||"left",e=>e.$sortable?"pointer":"default",e=>e.$sortable?"rgba(255, 255, 255, 0.1)":"transparent"),J=R.A.div(l||(l=(0,N.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),X=R.A.span(c||(c=(0,N.A)(["\n  opacity: 0.7;\n  font-size: 0.75rem;\n"]))),Q=R.A.tr(u||(u=(0,N.A)(["\n  background: #f8fafc;\n"]))),W=R.A.th(g||(g=(0,N.A)(["\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid #e2e8f0;\n"]))),ee=R.A.input(p||(p=(0,N.A)(["\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  \n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n  \n  &::placeholder {\n    color: #94a3b8;\n  }\n"]))),ne=R.A.tbody(h||(h=(0,N.A)([""]))),re=R.A.tr(m||(m=(0,N.A)(["\n  border-bottom: 1px solid #f1f5f9;\n  transition: background-color 0.15s;\n  \n  /* Zebra striping */\n  &:nth-of-type(even) {\n    background-color: #fafbfc;\n  }\n  \n  &:hover {\n    background-color: #f0f9ff;\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n"]))),te=R.A.td(b||(b=(0,N.A)(["\n  padding: 0.875rem 1rem;\n  color: #1f2937;\n  vertical-align: middle;\n  white-space: nowrap;\n  text-align: ",";\n  \n  /* Prvn\xed sloupec (\u010d\xedslo objedn\xe1vky) - tu\u010dn\u011b */\n  &:first-of-type {\n    font-weight: 600;\n    color: #1e40af;\n  }\n"])),e=>e.$align||"left"),oe=R.A.div(v||(v=(0,N.A)(["\n  text-align: center;\n  padding: 4rem 2rem;\n  color: #6b7280;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 8px;\n  margin: 2rem;\n  border: 2px dashed #cbd5e1;\n  \n  p {\n    font-size: 1.125rem;\n    font-weight: 500;\n    margin: 0;\n  }\n"]))),ae=R.A.div(f||(f=(0,N.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n"]))),ie=R.A.div(y||(y=(0,N.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),se=R.A.div(x||(x=(0,N.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),de=R.A.button(k||(k=(0,N.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),le=R.A.select(j||(j=(0,N.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n"]))),ce=(R.A.div(w||(w=(0,N.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: white;\n  border-bottom: 1px solid #e5e7eb;\n"]))),R.A.h3(_||(_=(0,N.A)(["\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1f2937;\n  margin: 0;\n"]))),R.A.div(A||(A=(0,N.A)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 0.5rem 1rem;\n  background: white;\n"]))),R.A.button(z||(z=(0,N.A)(["\n  background: none;\n  border: none;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s;\n  font-size: 1.1rem;\n\n  &:hover {\n    color: #2563eb;\n    background: #f3f4f6;\n  }\n"]))),R.A.div(C||(C=(0,N.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.9);\n  z-index: 9999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem;\n"])))),ue=R.A.div(S||(S=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  width: 98vw;\n  height: 95vh;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),ge=R.A.div(E||(E=(0,N.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 2px solid #e5e7eb;\n  background: white;\n  flex-shrink: 0;\n"]))),pe=R.A.h2(F||(F=(0,N.A)(["\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),he=R.A.button(O||(O=(0,N.A)(["\n  background: #ef4444;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 0.75rem;\n  border-radius: 50%;\n  transition: all 0.2s;\n  font-size: 1.2rem;\n  width: 2.5rem;\n  height: 2.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: #dc2626;\n    transform: scale(1.05);\n  }\n"]))),me=R.A.div(D||(D=(0,N.A)(["\n  flex: 1;\n  overflow: auto;\n  background: white;\n  \n  /* Custom scrollbar for fullscreen */\n  &::-webkit-scrollbar {\n    width: 12px;\n    height: 12px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 6px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, #3b82f6, #60a5fa);\n    border-radius: 6px;\n    border: 2px solid #f1f5f9;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, #2563eb, #3b82f6);\n  }\n"]))),be=e=>{let{data:n=[],columns:r=[],title:t="",onExport:o=null,initialPageSize:a=10,fullscreenRef:i=null}=e;const[s,d]=P.useState([]),[l,c]=P.useState(""),[u,g]=P.useState({pageIndex:0,pageSize:a}),[p,h]=(0,P.useState)(!1),m=(0,P.useCallback)(()=>{h(!0)},[]),b=(0,P.useCallback)(()=>{h(!1)},[]);(0,P.useEffect)(()=>{i&&(i.current=m)},[i,m]),(0,P.useEffect)(()=>{const e=e=>{"Escape"===e.key&&p&&b()};return p&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[p,b]);const v=(0,V.N4)({data:n,columns:r,state:{sorting:s,globalFilter:l,pagination:u},onSortingChange:d,onGlobalFilterChange:c,onPaginationChange:g,getCoreRowModel:(0,$.HT)(),getSortedRowModel:(0,$.h5)(),getFilteredRowModel:(0,$.hM)(),getPaginationRowModel:(0,$.kW)()}),f=()=>(0,Z.jsx)(q,{children:(0,Z.jsxs)(U,{children:[(0,Z.jsxs)(B,{children:[v.getHeaderGroups().map(e=>(0,Z.jsx)(G,{children:e.headers.map(e=>{var n;const r=e.column.getCanSort(),t=e.column.getIsSorted();return(0,Z.jsx)(Y,{$sortable:r,$align:null===(n=e.column.columnDef.meta)||void 0===n?void 0:n.align,onClick:r?e.column.getToggleSortingHandler():void 0,children:(0,Z.jsxs)(J,{children:[(0,V.Kv)(e.column.columnDef.header,e.getContext()),r&&(0,Z.jsx)(X,{children:(0,Z.jsx)(I.g,{icon:"asc"===t?T.Dvs:"desc"===t?T.Ync:T.OM7})})]})},e.id)})},e.id)),(0,Z.jsx)(Q,{children:v.getHeaderGroups()[0].headers.map(e=>{var n;return(0,Z.jsx)(W,{children:e.column.getCanFilter()&&(0,Z.jsx)(ee,{type:"text",value:String(null!==(n=e.column.getFilterValue())&&void 0!==n?n:""),onChange:n=>e.column.setFilterValue(n.target.value),placeholder:"Hledat..."})},"search-".concat(e.id))})})]}),(0,Z.jsx)(ne,{children:0===v.getRowModel().rows.length?(0,Z.jsx)("tr",{children:(0,Z.jsx)(te,{colSpan:r.length,children:(0,Z.jsx)(oe,{children:"\u017d\xe1dn\xe1 data k zobrazen\xed"})})}):v.getRowModel().rows.map(e=>(0,Z.jsx)(re,{children:e.getVisibleCells().map(e=>{var n;return(0,Z.jsx)(te,{$align:null===(n=e.column.columnDef.meta)||void 0===n?void 0:n.align,children:(0,V.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id))})]})});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(H,{children:[f(),(0,Z.jsxs)(ae,{children:[(0,Z.jsxs)(ie,{children:["Zobrazeno ",v.getRowModel().rows.length," z ",v.getFilteredRowModel().rows.length," z\xe1znam\u016f",v.getFilteredRowModel().rows.length!==n.length&&(0,Z.jsxs)("span",{children:[" (filtrov\xe1no z ",n.length,")"]})]}),(0,Z.jsxs)(se,{children:[(0,Z.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,Z.jsxs)(le,{value:v.getState().pagination.pageSize,onChange:e=>v.setPageSize(Number(e.target.value)),children:[(0,Z.jsx)("option",{value:10,children:"10"}),(0,Z.jsx)("option",{value:25,children:"25"}),(0,Z.jsx)("option",{value:50,children:"50"}),(0,Z.jsx)("option",{value:100,children:"100"}),(0,Z.jsx)("option",{value:250,children:"250"})]}),(0,Z.jsx)(de,{onClick:()=>v.setPageIndex(0),disabled:!v.getCanPreviousPage(),children:"\xab\xab"}),(0,Z.jsx)(de,{onClick:()=>v.previousPage(),disabled:!v.getCanPreviousPage(),children:"\u2039"}),(0,Z.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",v.getState().pagination.pageIndex+1," z ",v.getPageCount()]}),(0,Z.jsx)(de,{onClick:()=>v.nextPage(),disabled:!v.getCanNextPage(),children:"\u203a"}),(0,Z.jsx)(de,{onClick:()=>v.setPageIndex(v.getPageCount()-1),disabled:!v.getCanNextPage(),children:"\xbb\xbb"})]})]})]}),p&&(0,M.createPortal)((0,Z.jsx)(ce,{onClick:b,children:(0,Z.jsxs)(ue,{onClick:e=>e.stopPropagation(),children:[(0,Z.jsxs)(ge,{children:[(0,Z.jsx)(pe,{children:t||"Report"}),(0,Z.jsx)(he,{onClick:b,children:(0,Z.jsx)(I.g,{icon:T.GRI})})]}),(0,Z.jsx)(me,{children:f()})]})}),document.body)]})};var ve=r(32575),fe=r(84856),ye=r(46696),xe=r(27203),ke=r(56263),je=r(44649);const we=ke.A.create({baseURL:"https://erdms.zachranka.cz/api.eeo/",headers:{"Content-Type":"application/json"}});we.interceptors.request.use(e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e},e=>Promise.reject(e));const _e=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;try{const t=await(0,je.cn)(e,n,r,!0,!0),o=(null===t||void 0===t?void 0:t.data)||[];return{success:!0,data:o,count:o.length}}catch(t){return console.error("\u274c [REPORTS API] Error fetching orders:",t),{success:!1,error:t.message||"Nezn\xe1m\xe1 chyba",data:[]}}},Ae=e=>{if(null!=e.polozky_celkova_cena_s_dph&&""!==e.polozky_celkova_cena_s_dph){const n=parseFloat(e.polozky_celkova_cena_s_dph);if(!isNaN(n))return n}if(e.polozky&&Array.isArray(e.polozky)&&e.polozky.length>0){return e.polozky.reduce((e,n)=>{const r=parseFloat(n.cena_s_dph||0);return e+(isNaN(r)?0:r)},0)}return 0},ze=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;try{const o=await _e(n,r,t);if(!o.success)return o;const a=o.data.filter(n=>{const r=Ae(n);return!(!r||0===r)&&r>e});return{success:!0,data:a,count:a.length,summary:{total_amount:a.reduce((e,n)=>e+Ae(n),0),threshold:e}}}catch(o){return console.error("Error in fetchOrdersAboveAmount:",o),{success:!1,error:o.message,data:[]}}},Ce=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;try{const o=await _e(n,r,t);if(!o.success)return o;const a=o.data.filter(n=>{const r=n.dodavatel_nazev||"",t=n.dodavatel_ico||"",o=e.toLowerCase();return r.toLowerCase().includes(o)||t.toLowerCase().includes(o)});return{success:!0,data:a,count:a.length,summary:{total_amount:a.reduce((e,n)=>e+Ae(n),0),supplier:e}}}catch(o){return console.error("Error in fetchOrdersBySupplier:",o),{success:!1,error:o.message,data:[]}}},Se=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;try{const o=await _e((0,K.A)((0,K.A)({},n),{},{stav_objednavky:e}),r,t);if(!o.success)return o;const a=o.data.filter(n=>{if((n.stav_objednavky||n.stav||"")===e)return!0;if(n.stav_workflow)if("object"===typeof n.stav_workflow){if((n.stav_workflow.kod_stavu||n.stav_workflow.nazev_stavu||"")===e)return!0}else if(n.stav_workflow===e)return!0;return!1});return{success:!0,data:a,count:a.length,summary:{total_amount:a.reduce((e,n)=>e+Ae(n),0),status:e}}}catch(o){return console.error("Error in fetchOrdersByStatus:",o),{success:!1,error:o.message,data:[]}}},Ee=async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;try{const a=await _e((0,K.A)((0,K.A)({},r),{},{datum_od:e,datum_do:n}),t,o);return a.success?{success:!0,data:a.data,count:a.data.length,summary:{total_amount:a.data.reduce((e,n)=>e+Ae(n),0),period_from:e,period_to:n}}:a}catch(a){return console.error("Error in fetchOrdersByPeriod:",a),{success:!1,error:a.message,data:[]}}},Fe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;try{const o="ODESLANA_KE_SCHVALENI",a=await _e((0,K.A)({},n),r,t);if(!a.success)return a;const i=new Date;i.setHours(0,0,0,0);const s=a.data.filter((n,r)=>{n.cislo_objednavky||"order-".concat(r);const t=n.stav_objednavky||n.stav||"",a=n.stav_workflow_kod||"";let s=!1;if((a&&a.includes(o)||t&&t.includes(o))&&(s=!0),!s)return!1;const d=n.datum_vytvoreni||n.dt_vytvoreni||n.dt_objednavky;if(!d)return!1;const l=new Date(d);l.setHours(0,0,0,0);return Math.floor((i-l)/864e5)>=e});return{success:!0,data:s,count:s.length,summary:{total_amount:s.reduce((e,n)=>e+Ae(n),0),days_threshold:e}}}catch(o){return console.error("Error in fetchPendingOrders:",o),{success:!1,error:o.message,data:[]}}},Oe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;try{const t=await _e(e,n,r);if(!t.success)return t;const o=t.data.filter(e=>{let n=!1;if(e.stav_workflow_kod){const r=String(e.stav_workflow_kod).toUpperCase();n=r.includes("ZKONTROLOVANA")||r.includes("DOKONCENA")}else if(e.stav){const r=String(e.stav).toUpperCase();n=r.includes("ZKONTROLOVANA")||r.includes("DOKONCENA")}if(!n)return!1;return""!==(e.vecna_spravnost_umisteni_majetku||e.umisteni_majetku||"").trim()});return{success:!0,data:o,count:o.length,summary:{total_amount:o.reduce((e,n)=>e+Ae(n),0)}}}catch(t){return console.error("Error in fetchAssetOrders:",t),{success:!1,error:t.message,data:[]}}},De=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;try{const t=await _e(e,n,r);if(!t.success)return t;const o=new Date;o.setHours(0,0,0,0);const a=t.data.filter(e=>{let n=!1;if(e.stav_workflow_kod)n=String(e.stav_workflow_kod).includes("DOKONCENA");else if(e.stav){const r=String(e.stav).toUpperCase();n=r.includes("DOKONCENA")||r.includes("ZRUSENA")}if(n)return!1;const r=e.faktury||[];if(r.length>0){return!!r.some(e=>{const n=e.fa_datum_splatnosti||e.fa_splatnost;if(!n)return!1;const r=new Date(n);return r.setHours(0,0,0,0),r<o})}if(!e.termin_dodani)return!1;const t=new Date(e.termin_dodani);t.setHours(0,0,0,0);const a=t<o;return a});return{success:!0,data:a,count:a.length,summary:{total_amount:a.reduce((e,n)=>e+Ae(n),0)}}}catch(t){return console.error("Error in fetchOverdueOrders:",t),{success:!1,error:t.message,data:[]}}},Ke=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;try{const o=await _e(n,r,t);if(!o.success)return o;const a=o.data.filter(n=>{var r;return null!==(r=n.druh_objednavky)&&void 0!==r&&r.kod?String(n.druh_objednavky.kod)===String(e):n.druh_objednavky_kod?String(n.druh_objednavky_kod)===String(e):!!n.druh_objednavky&&String(n.druh_objednavky)===String(e)});return{success:!0,data:a,count:a.length,summary:{total_amount:a.reduce((e,n)=>e+Ae(n),0),category:e}}}catch(o){return console.error("Error in fetchOrdersByCategory:",o),{success:!1,error:o.message,data:[]}}};var Ne,Pe,Re,Ie,Le,Te,Me,Ve,$e,Ze,He,qe,Ue,Be,Ge,Ye,Je,Xe,Qe,We,en,nn,rn,tn,on,an,sn,dn,ln,cn,un,gn,pn,hn,mn,bn,vn,fn,yn,xn,kn,jn,wn,_n,An,zn,Cn,Sn,En,Fn,On,Dn=r(75949),Kn=r(33637);const Nn=R.A.div(Ne||(Ne=(0,N.A)(["\n  width: 100%;\n  min-height: 100vh;\n  background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);\n  padding: 2rem 1rem;\n"]))),Pn=R.A.div(Pe||(Pe=(0,N.A)(["\n  max-width: 1400px;\n  margin: 0 auto;\n"]))),Rn=R.A.div(Re||(Re=(0,N.A)(["\n  margin-bottom: 2.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),In=R.A.h1(Ie||(Ie=(0,N.A)(["\n  font-size: 2.25rem;\n  font-weight: 700;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n\n  svg {\n    color: #2563eb;\n  }\n"]))),Ln=R.A.div(Le||(Le=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 0.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  display: flex;\n  gap: 0.5rem;\n"]))),Tn=R.A.button(Te||(Te=(0,N.A)(["\n  flex: 1;\n  padding: 0.875rem 1.5rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9375rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  background: ",";\n  color: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),e=>e.active?"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)":"transparent",e=>e.active?"white":"#6b7280",e=>e.active?"linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%)":"#f3f4f6",e=>e.active?"white":"#1f2937"),Mn=R.A.div(Me||(Me=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n"]))),Vn=R.A.div(Ve||(Ve=(0,N.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1.5rem;\n  cursor: pointer;\n  user-select: none;\n"]))),$n=R.A.h3($e||($e=(0,N.A)(["\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #2563eb;\n  }\n"]))),Zn=R.A.div(Ze||(Ze=(0,N.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.25rem;\n"]))),Hn=R.A.div(He||(He=(0,N.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),qn=R.A.div(qe||(qe=(0,N.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  grid-column: span 2;\n  \n  @media (max-width: 768px) {\n    grid-column: span 1;\n  }\n"]))),Un=R.A.div(Ue||(Ue=(0,N.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Bn=R.A.label(Be||(Be=(0,N.A)(["\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #374151;\n"]))),Gn=R.A.div(Ge||(Ge=(0,N.A)(["\n  position: relative;\n  width: 100%;\n"]))),Yn=R.A.div(Ye||(Ye=(0,N.A)(["\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1rem;\n  height: 1rem;\n  font-size: 0.875rem;\n"]))),Jn=R.A.input(Je||(Je=(0,N.A)(["\n  width: 100%;\n  padding: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  color: #1f2937;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n"])),e=>e.$hasIcon?"0.75rem 0.75rem 0.75rem 2.5rem":"0.75rem",e=>e.hasError?"#ef4444":"#e5e7eb",e=>e.hasError?"#dc2626":"#2563eb",e=>e.hasError?"rgba(239, 68, 68, 0.1)":"rgba(37, 99, 235, 0.1)"),Xn=R.A.div(Xe||(Xe=(0,N.A)(["\n  position: relative;\n  width: 100%;\n"]))),Qn=R.A.div(Qe||(Qe=(0,N.A)(["\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1rem;\n  height: 1rem;\n  font-size: 0.875rem;\n  z-index: 1;\n"]))),Wn=R.A.select(We||(We=(0,N.A)(["\n  width: 100%;\n  padding: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  color: #1f2937;\n  transition: all 0.2s;\n  cursor: pointer;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");\n  background-position: right 0.5rem center;\n  background-repeat: no-repeat;\n  background-size: 1.5rem;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  option {\n    padding: 0.5rem;\n  }\n"])),e=>e.$hasIcon?"0.75rem 2.5rem 0.75rem 2.5rem":"0.75rem",e=>e.hasError?"#ef4444":"#e5e7eb",e=>e.hasError?"#dc2626":"#2563eb",e=>e.hasError?"rgba(239, 68, 68, 0.1)":"rgba(37, 99, 235, 0.1)"),er=R.A.span(en||(en=(0,N.A)(["\n  font-size: 0.75rem;\n  color: #ef4444;\n  margin-top: 0.25rem;\n  display: block;\n"]))),nr=R.A.div(nn||(nn=(0,N.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n"]))),rr=R.A.div(rn||(rn=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s;\n  cursor: pointer;\n  border: 2px solid transparent;\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);\n    border-color: #2563eb;\n  }\n"]))),tr=R.A.div(tn||(tn=(0,N.A)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  margin-bottom: 1rem;\n"]))),or=R.A.div(on||(on=(0,N.A)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n  color: white;\n  flex-shrink: 0;\n"])),e=>e.color||"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)"),ar=R.A.div(an||(an=(0,N.A)(["\n  flex: 1;\n"]))),ir=R.A.h3(sn||(sn=(0,N.A)(["\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1f2937;\n  margin: 0 0 0.5rem 0;\n"]))),sr=R.A.p(dn||(dn=(0,N.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n  margin: 0;\n  line-height: 1.5;\n"]))),dr=R.A.div(ln||(ln=(0,N.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e5e7eb;\n"]))),lr=R.A.span(cn||(cn=(0,N.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ",";\n  color: ",";\n"])),e=>{switch(e.priority){case"high":return"#fee2e2";case"medium":return"#fef3c7";case"low":return"#dbeafe";default:return"#f3f4f6"}},e=>{switch(e.priority){case"high":return"#991b1b";case"medium":return"#92400e";case"low":return"#1e40af";default:return"#374151"}}),cr=R.A.span(un||(un=(0,N.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #d1fae5;\n  color: #065f46;\n"]))),ur=R.A.div(gn||(gn=(0,N.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-top: 2rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n"]))),gr=R.A.div(pn||(pn=(0,N.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #e5e7eb;\n"]))),pr=R.A.h2(hn||(hn=(0,N.A)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),hr=R.A.button(mn||(mn=(0,N.A)(["\n  background: none;\n  border: none;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s;\n  font-size: 1.1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    color: #2563eb;\n    background: #f3f4f6;\n  }\n"]))),mr=R.A.div(bn||(bn=(0,N.A)(["\n  display: flex;\n  gap: 0.75rem;\n"]))),br=R.A.button(vn||(vn=(0,N.A)(["\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n  color: white;\n\n  &:hover {\n    background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),vr=(0,R.A)(br)(fn||(fn=(0,N.A)(["\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover {\n    background: #e5e7eb;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n"]))),fr=(R.A.button(yn||(yn=(0,N.A)(["\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9375rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  ","\n"])),e=>"primary"===e.variant?"\n    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n    color: white;\n    &:hover {\n      background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);\n    }\n  ":"\n    background: #f3f4f6;\n    color: #374151;\n    &:hover {\n      background: #e5e7eb;\n    }\n  "),R.A.div(xn||(xn=(0,N.A)(["\n  position: fixed;\n  inset: 0;\n  background: rgba(255, 255, 255, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9998;\n"])))),yr=R.A.div(kn||(kn=(0,N.A)(["\n  width: 48px;\n  height: 48px;\n  border: 4px solid #e5e7eb;\n  border-top-color: #2563eb;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n"]))),xr=(R.A.div(jn||(jn=(0,N.A)(["\n  background: #fee2e2;\n  border: 1px solid #fecaca;\n  border-radius: 8px;\n  padding: 1rem 1.5rem;\n  margin-bottom: 2rem;\n  color: #991b1b;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),R.A.span(wn||(wn=(0,N.A)(["\n  color: #2563eb;\n  cursor: pointer;\n  font-weight: 600;\n  text-decoration: underline;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #1d4ed8;\n  }\n"])))),kr=R.A.div(_n||(_n=(0,N.A)(["\n  position: relative;\n  width: 100%;\n"]))),jr=R.A.div(An||(An=(0,N.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  margin-top: 4px;\n  max-height: 320px;\n  overflow-y: auto;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n"]))),wr=R.A.div(zn||(zn=(0,N.A)(["\n  padding: 0.75rem 1rem;\n  cursor: pointer;\n  transition: background 0.15s;\n  border-bottom: 1px solid #f3f4f6;\n  background: ",";\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: #f9fafb;\n  }\n\n  ","\n"])),e=>e.$selected?"#eff6ff":"white",e=>e.$selected&&"\n    background: #eff6ff;\n    border-left: 3px solid #2563eb;\n  "),_r=R.A.div(Cn||(Cn=(0,N.A)(["\n  font-weight: 600;\n  color: #1f2937;\n  font-size: 0.9375rem;\n  margin-bottom: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Ar=R.A.div(Sn||(Sn=(0,N.A)(["\n  font-size: 0.8125rem;\n  color: #6b7280;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  align-items: center;\n"]))),zr=R.A.span(En||(En=(0,N.A)(["\n  padding: 0.125rem 0.5rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #dbeafe;\n  color: #1e40af;\n"]))),Cr=R.A.div(Fn||(Fn=(0,N.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.875rem;\n"]))),Sr=R.A.div(On||(On=(0,N.A)(["\n  padding: 1rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n"]))),Er=()=>{const{user:e,token:n,username:r,user_id:t,userDetail:o}=(0,P.useContext)(L.cy),a=(0,P.useRef)(null),i=(0,P.useMemo)(()=>parseInt(t,10),[t]),s=e=>"".concat(e,"_user_").concat(i||"anon"),[d,l]=(0,P.useState)(0),[c,u]=(0,P.useState)(!1),[g,p]=(0,P.useState)(null),[h,m]=(0,P.useState)(!0),[b,v]=(0,P.useState)(null),[f,y]=(0,P.useState)([]),[x,k]=(0,P.useState)(""),[j,w]=(0,P.useState)({}),[_,A]=(0,P.useState)({amount:"100000",supplier:"",status:"SCHVALENO",dateFrom:"",dateTo:"",days:"5",category:"TECHNIKA"}),[z,C]=(0,P.useState)([]),[S,E]=(0,P.useState)([]),[F,O]=(0,P.useState)([]),[D,N]=(0,P.useState)(!0),[R,M]=(0,P.useState)(""),[V,$]=(0,P.useState)([]),[H,q]=(0,P.useState)(!1),[U,B]=(0,P.useState)(!1),[G,Y]=(0,P.useState)(-1),[J,X]=(0,P.useState)(!1),Q=(0,P.useRef)(null),W=(0,P.useRef)(null),[ee,ne]=(0,P.useState)(!1),[re,te]=(0,P.useState)(null);(0,P.useEffect)(()=>{if(i){const e=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=localStorage.getItem(s(e));return null!==r?JSON.parse(r):n}catch(r){return n}}("reports_filters");e&&(A(e),e.supplier&&M(e.supplier))}},[i]),(0,P.useEffect)(()=>{i&&_&&((e,n)=>{try{localStorage.setItem(s(e),JSON.stringify(n))}catch(r){}})("reports_filters",_)},[_,i]),(0,P.useEffect)(()=>{(async()=>{if(e&&n&&r)try{const a=(null===o||void 0===o?void 0:o.usek_zkr)||(null===e||void 0===e?void 0:e.usek_zkr)||"";N(!0);const i=await(0,Dn.qU)({token:n,username:r,user_id:t,usek_zkr:a});if(i.success&&i.data){const e=(i.data||[]).sort((e,n)=>{const r=(e.nazev||"").toLowerCase(),t=(n.nazev||"").toLowerCase();return r.localeCompare(t,"cs")});C(e.map(e=>({value:e.nazev,label:e.nazev})))}const s=(await(0,Dn.En)({token:n,username:r,typ:"OBJEDNAVKA"})||[]).sort((e,n)=>{const r=(e.nazev_stavu||e.nazev||"").toLowerCase(),t=(n.nazev_stavu||n.nazev||"").toLowerCase();return r.localeCompare(t,"cs")});E(s.map(e=>({value:e.nazev_stavu||e.nazev||e.kod_stavu,label:e.nazev_stavu||e.nazev||e.kod_stavu})));const d=(await(0,Kn.je)({token:n,username:r})||[]).sort((e,n)=>{const r=(e.nazev_stavu||e.nazev||"").toLowerCase(),t=(n.nazev_stavu||n.nazev||"").toLowerCase();return r.localeCompare(t,"cs")});O(d.map(e=>({value:e.kod_stavu,label:e.nazev_stavu||e.nazev||e.kod_stavu,kod:e.kod_stavu,nazev:e.nazev_stavu}))),N(!1)}catch(a){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed \u010d\xedseln\xedk\u016f:",a),N(!1)}})()},[e,n,r,o]),(0,P.useEffect)(()=>!R||R.length<3?($([]),void B(!1)):(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(async()=>{try{var e,n;q(!0),J&&B(!0);const r=await(0,fe.C)({query:R,categories:["suppliers_from_orders"],limit:10});"ok"===r.status&&null!==(e=r.categories)&&void 0!==e&&null!==(n=e.suppliers_from_orders)&&void 0!==n&&n.results?$(r.categories.suppliers_from_orders.results):$([])}catch(r){console.error("[ReportsPage] \u274c Supplier search error:",r),$([])}finally{q(!1)}},500),()=>{Q.current&&clearTimeout(Q.current)}),[R,n,r]),(0,P.useEffect)(()=>{const e=e=>{W.current&&!W.current.contains(e.target)&&B(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const oe=(e,n)=>{if(A((0,K.A)((0,K.A)({},_),{},{[e]:n})),j[e]){const n=(0,K.A)({},j);delete n[e],w(n)}},ae=e=>{const n=e.dodavatel_nazev||"";M(n),oe("supplier",n),B(!1),Y(-1)},ie=()=>{ne(!1),setTimeout(()=>{te(null)},300)},se={basic:[{id:"above-amount",title:"Objedn\xe1vky nad \u010d\xe1stku",description:"Zobraz\xed objedn\xe1vky p\u0159esahuj\xedc\xed zadanou \u010d\xe1stku",icon:T.ymQ,color:"linear-gradient(135deg, #10b981 0%, #059669 100%)",priority:"high",requiredFields:["amount"],handler:async()=>{const e=parseFloat(_.amount);return{data:(await ze(e,{},n,r)).data,title:"Objedn\xe1vky nad ".concat(de(e)," K\u010d")}}},{id:"by-supplier",title:"Objedn\xe1vky podle dodavatele",description:"Filtruje objedn\xe1vky podle vybran\xe9ho dodavatele",icon:T.URI,color:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",priority:"high",requiredFields:["supplier"],handler:async()=>({data:(await Ce(_.supplier,{},n,r)).data,title:"Objedn\xe1vky dodavatele: ".concat(_.supplier)})},{id:"by-status",title:"Objedn\xe1vky podle stavu",description:"Zobraz\xed objedn\xe1vky ve zvolen\xe9m stavu",icon:T.SGM,color:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",priority:"medium",requiredFields:["status"],handler:async()=>{var e;const t=await Se(_.status,{},n,r),o=(null===(e=S.find(e=>e.value===_.status))||void 0===e?void 0:e.label)||_.status;return{data:t.data,title:"Objedn\xe1vky ve stavu: ".concat(o)}}},{id:"by-period",title:"Objedn\xe1vky za obdob\xed",description:"Zobraz\xed objedn\xe1vky vytvo\u0159en\xe9 v zadan\xe9m obdob\xed",icon:T.BEE,color:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",priority:"medium",requiredFields:["dateFrom","dateTo"],handler:async()=>({data:(await Ee(_.dateFrom,_.dateTo,{},n,r)).data,title:"Objedn\xe1vky: ".concat(_.dateFrom," - ").concat(_.dateTo)})}],monitoring:[{id:"pending",title:"Neschv\xe1len\xe9 objedn\xe1vky",description:"Objedn\xe1vky \u010dekaj\xedc\xed na schv\xe1len\xed d\xe9le ne\u017e ".concat(_.days," dn\xed"),icon:T.zpE,color:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",priority:"high",requiredFields:["days"],handler:async()=>({data:(await Fe(parseInt(_.days),{},n,r)).data,title:"Neschv\xe1len\xe9 objedn\xe1vky (> ".concat(_.days," dn\xed)")})},{id:"overdue",title:"Objedn\xe1vky po term\xednu",description:"Objedn\xe1vky po term\xednu dod\xe1n\xed, kter\xe9 je\u0161t\u011b nejsou dokon\u010deny",icon:T.a$,color:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",priority:"high",requiredFields:[],handler:async()=>({data:(await De({},n,r)).data,title:"Objedn\xe1vky po term\xednu dod\xe1n\xed"})},{id:"asset",title:"Majetkov\xe9 objedn\xe1vky",description:"Zobraz\xed pouze majetkov\xe9 objedn\xe1vky a DHM",icon:T.p4e,color:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",priority:"medium",requiredFields:[],handler:async()=>({data:(await Oe({},n,r)).data,title:"Majetkov\xe9 objedn\xe1vky"})},{id:"by-category",title:"Objedn\xe1vky podle druhu",description:"Filtruje objedn\xe1vky podle druhu objedn\xe1vky",icon:T.DX_,color:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",priority:"low",requiredFields:["category"],handler:async()=>{var e;const t=await Ke(_.category,{},n,r),o=(null===(e=F.find(e=>e.value===_.category))||void 0===e?void 0:e.label)||_.category;return{data:t.data,title:"Objedn\xe1vky druhu: ".concat(o)}}}]},de=e=>{if(null===e||void 0===e)return"-";const n=parseFloat(e);return isNaN(n)?e:new Intl.NumberFormat("cs-CZ",{minimumFractionDigits:0,maximumFractionDigits:2}).format(n)},le=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("cs-CZ")}catch(n){return e}},ce=async e=>{const n=(e=>{const n={};return(e.requiredFields||[]).forEach(e=>{_[e]&&""!==_[e]||(n[e]="Povinn\xe9 pole")}),n})(e);if(Object.keys(n).length>0)w(n);else{w({}),u(!0),p(null),v(e);try{const n=await e.handler();if(!n.data||0===n.data.length)return p("\u017d\xe1dn\xe1 data nebyla nalezena pro zvolen\xe9 filtry."),y([]),k(""),void u(!1);y(n.data),k(n.title)}catch(r){console.error("Error generating report:",r),p("Chyba p\u0159i generov\xe1n\xed reportu: ".concat(r.message)),y([]),k("")}finally{u(!1)}}},ue=()=>{if(!f||0===f.length)return;const e="report_".concat(null===b||void 0===b?void 0:b.id,"_").concat((new Date).toISOString().split("T")[0],".csv");!function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"report.csv";if(!e||0===e.length)return void console.warn("No data to export");const r=Object.keys(e[0]);let t=r.join(";")+"\n";e.forEach(e=>{const n=r.map(n=>{const r=e[n];return r&&"string"===typeof r&&(r.includes(";")||r.includes(",")||r.includes("\n"))?'"'.concat(r.replace(/"/g,'""'),'"'):r||""});t+=n.join(";")+"\n"});const o=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),i=URL.createObjectURL(o);a.setAttribute("href",i),a.setAttribute("download",n),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(f,e)},ge=0===d?se.basic:se.monitoring;return(0,Z.jsxs)(Nn,{children:[(0,Z.jsxs)(Pn,{children:[(0,Z.jsx)(Rn,{children:(0,Z.jsxs)(In,{children:[(0,Z.jsx)(I.g,{icon:T.gK3}),"Reporty"]})}),(0,Z.jsxs)(Ln,{children:[(0,Z.jsx)(Tn,{active:0===d,onClick:()=>l(0),children:"Z\xe1kladn\xed reporty"}),(0,Z.jsx)(Tn,{active:1===d,onClick:()=>l(1),children:"Monitoring & Kontrola"})]}),(0,Z.jsxs)(Mn,{children:[(0,Z.jsxs)(Vn,{onClick:()=>m(!h),children:[(0,Z.jsxs)($n,{children:[(0,Z.jsx)(I.g,{icon:T.mRM}),"Filtry pro reporty"]}),(0,Z.jsx)(I.g,{icon:h?T.w2A:T.Jt$})]}),h&&(0,Z.jsxs)(Zn,{children:[(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"\u010c\xe1stka (K\u010d)"}),(0,Z.jsxs)(Gn,{children:[(0,Z.jsx)(Yn,{children:(0,Z.jsx)(I.g,{icon:T.ymQ})}),(0,Z.jsx)(Jn,{type:"number",value:_.amount,onChange:e=>oe("amount",e.target.value),placeholder:"100000",hasError:j.amount,$hasIcon:!0})]}),j.amount&&(0,Z.jsx)(er,{children:j.amount})]}),(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Dodavatel"}),(0,Z.jsxs)(kr,{ref:W,children:[(0,Z.jsxs)(Gn,{children:[(0,Z.jsx)(Yn,{children:(0,Z.jsx)(I.g,{icon:T.URI})}),(0,Z.jsx)(Jn,{type:"text",value:R,onChange:e=>{const n=e.target.value;M(n),oe("supplier",n),Y(-1),n.length>=3&&B(!0)},onKeyDown:e=>{if(!U)return;const n=V.length>0?V:z.filter(e=>e.value.toLowerCase().includes(R.toLowerCase())).slice(0,5).map(e=>({dodavatel_nazev:e.value,pocet_objednavek:0}));if(0!==n.length)switch(e.key){case"ArrowDown":e.preventDefault(),Y(e=>e<n.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),Y(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),G>=0&&n[G]&&ae(n[G]);break;case"Escape":e.preventDefault(),B(!1),Y(-1)}},onFocus:()=>{X(!0),R.length>=3&&V.length>0&&B(!0)},onBlur:()=>{X(!1),setTimeout(()=>B(!1),200)},placeholder:"Za\u010dn\u011bte ps\xe1t n\xe1zev dodavatele (min. 3 znaky)...",hasError:j.supplier,$hasIcon:!0})]}),U&&(0,Z.jsx)(jr,{children:H?(0,Z.jsxs)(Sr,{children:[(0,Z.jsx)(I.g,{icon:T.MjD,spin:!0}),"Hled\xe1m dodavatele..."]}):V.length>0?V.map((e,n)=>(0,Z.jsxs)(wr,{onClick:()=>ae(e),$selected:G===n,children:[(0,Z.jsxs)(_r,{children:[e.dodavatel_nazev,e.pocet_objednavek>0&&(0,Z.jsxs)(zr,{children:[e.pocet_objednavek," obj."]})]}),(0,Z.jsxs)(Ar,{children:[e.dodavatel_ico&&(0,Z.jsxs)("span",{children:["I\u010cO: ",e.dodavatel_ico]}),e.dodavatel_kontakt_email&&(0,Z.jsxs)("span",{children:["\u2022 ",e.dodavatel_kontakt_email]}),e.posledni_pouziti&&(0,Z.jsxs)("span",{children:["\u2022 Posledn\xed pou\u017eit\xed: ",new Date(e.posledni_pouziti).toLocaleDateString("cs-CZ")]})]})]},n)):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Cr,{children:['\u017d\xe1dn\xed dodavatel\xe9 z objedn\xe1vek pro "',R,'".']}),z.filter(e=>e.value.toLowerCase().includes(R.toLowerCase())).slice(0,5).map((e,n)=>(0,Z.jsx)(wr,{onClick:()=>ae({dodavatel_nazev:e.value,pocet_objednavek:0}),$selected:G===n,children:(0,Z.jsxs)(_r,{children:[e.value,(0,Z.jsx)(zr,{style:{background:"#f3f4f6",color:"#6b7280"},children:"z \u010d\xedseln\xedku"})]})},n))]})})]}),j.supplier&&(0,Z.jsx)(er,{children:j.supplier})]}),(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Druh objedn\xe1vky"}),(0,Z.jsxs)(Xn,{children:[(0,Z.jsx)(Qn,{children:(0,Z.jsx)(I.g,{icon:T.DX_})}),(0,Z.jsxs)(Wn,{value:_.category,onChange:e=>oe("category",e.target.value),disabled:D,hasError:j.category,$hasIcon:!0,children:[(0,Z.jsx)("option",{value:"",children:D?"Na\u010d\xedt\xe1m druhy...":"-- Vyberte druh --"}),F.map(e=>(0,Z.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),j.category&&(0,Z.jsx)(er,{children:j.category})]}),(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Stav objedn\xe1vky"}),(0,Z.jsxs)(Xn,{children:[(0,Z.jsx)(Qn,{children:(0,Z.jsx)(I.g,{icon:T.SGM})}),(0,Z.jsxs)(Wn,{value:_.status,onChange:e=>oe("status",e.target.value),disabled:D,hasError:j.status,$hasIcon:!0,children:[(0,Z.jsx)("option",{value:"",children:D?"Na\u010d\xedt\xe1m stavy...":"-- Vyberte stav --"}),S.map(e=>(0,Z.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),j.status&&(0,Z.jsx)(er,{children:j.status})]}),(0,Z.jsx)(qn,{children:(0,Z.jsxs)(Un,{children:[(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Datum od"}),(0,Z.jsx)(ve.A,{value:_.dateFrom,onChange:e=>oe("dateFrom",e),placeholder:"Vyberte datum od",hasError:j.dateFrom}),j.dateFrom&&(0,Z.jsx)(er,{children:j.dateFrom})]}),(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Datum do"}),(0,Z.jsx)(ve.A,{value:_.dateTo,onChange:e=>oe("dateTo",e),placeholder:"Vyberte datum do",hasError:j.dateTo}),j.dateTo&&(0,Z.jsx)(er,{children:j.dateTo})]})]})}),(0,Z.jsxs)(Hn,{children:[(0,Z.jsx)(Bn,{children:"Po\u010det dn\xed"}),(0,Z.jsxs)(Gn,{children:[(0,Z.jsx)(Yn,{children:(0,Z.jsx)(I.g,{icon:T.zpE})}),(0,Z.jsx)(Jn,{type:"number",value:_.days,onChange:e=>oe("days",e.target.value),hasError:j.days,placeholder:"5",$hasIcon:!0})]}),j.days&&(0,Z.jsx)(er,{children:j.days}),(0,Z.jsx)("small",{style:{color:"#6b7280",fontSize:"0.75rem",marginTop:"0.25rem",display:"block"},children:'Pro report "Neschv\xe1len\xe9 objedn\xe1vky": Objedn\xe1vky \u010dekaj\xedc\xed na schv\xe1len\xed d\xe9le ne\u017e X dn\xed'})]})]})]}),(0,Z.jsx)(nr,{children:ge.map(e=>(0,Z.jsxs)(rr,{onClick:()=>ce(e),children:[(0,Z.jsxs)(tr,{children:[(0,Z.jsx)(or,{color:e.color,children:(0,Z.jsx)(I.g,{icon:e.icon})}),(0,Z.jsxs)(ar,{children:[(0,Z.jsx)(ir,{children:e.title}),(0,Z.jsx)(sr,{children:e.description})]})]}),(0,Z.jsxs)(dr,{children:[(0,Z.jsx)(lr,{priority:e.priority,children:"high"===e.priority?"Vysok\xe1 priorita":"medium"===e.priority?"St\u0159edn\xed priorita":"N\xedzk\xe1 priorita"}),(0,Z.jsx)(cr,{children:"Hotovo"})]})]},e.id))}),c&&(0,Z.jsx)(fr,{children:(0,Z.jsx)(yr,{})}),f.length>0&&(0,Z.jsxs)(ur,{children:[(0,Z.jsxs)(gr,{children:[(0,Z.jsxs)(pr,{children:[x,(0,Z.jsx)(hr,{onClick:()=>{a.current&&a.current()},title:"Zobrazit tabulku na celou obrazovku",children:(0,Z.jsx)(I.g,{icon:T.oZK})})]}),(0,Z.jsxs)(mr,{children:[(0,Z.jsxs)(vr,{onClick:()=>{y([]),k(""),v(null),p(null)},children:[(0,Z.jsx)(I.g,{icon:T.GRI}),"Vymazat"]}),(0,Z.jsxs)(br,{onClick:ue,children:[(0,Z.jsx)(I.g,{icon:T.cbP}),"Exportovat CSV"]})]})]}),(0,Z.jsx)(be,{data:f,columns:(()=>{const e=[{accessorKey:"cislo_objednavky",header:"\u010c\xedslo objedn\xe1vky",cell:e=>{const n=e.getValue(),r=e.row.original;return n?(0,Z.jsx)(xr,{onClick:()=>(e=>{let n;n=!0===e.aktivni||"1"===e.aktivni||1===e.aktivni?"1":!1===e.aktivni||"0"===e.aktivni||0===e.aktivni?"0":"1";const r=(0,K.A)((0,K.A)({},e),{},{aktivni:n,id:e.id||e.objednavka_id});te(r),ne(!0)})(r),children:n}):"-"},enableSorting:!0,enableColumnFilter:!0},{accessorKey:"dt_vytvoreni",header:"Datum vytvo\u0159en\xed",cell:e=>le(e.getValue()||e.row.original.dt_objednavky),enableSorting:!0,enableColumnFilter:!0,meta:{align:"center"}},{accessorKey:"predmet",header:"P\u0159edm\u011bt",cell:e=>e.getValue()||"-",enableSorting:!0,enableColumnFilter:!0},{accessorKey:"dodavatel_nazev",header:"Dodavatel",cell:e=>e.getValue()||"-",enableSorting:!0,enableColumnFilter:!0},{accessorKey:"dodavatel_ico",header:"I\u010cO dodavatele",cell:e=>e.getValue()||"-",enableSorting:!0,enableColumnFilter:!0},{accessorKey:"stav_objednavky",header:"Stav",cell:e=>{const n=e.row.original;return n.stav_workflow?"object"===typeof n.stav_workflow?n.stav_workflow.nazev_stavu||n.stav_workflow.nazev||"Nezn\xe1m\xfd stav":String(n.stav_workflow):n.stav_objednavky||"-"},enableSorting:!0,enableColumnFilter:!0},{accessorKey:"cena_s_dph",header:"Cena s DPH",cell:e=>{const n=(e=>{if(null!=e.polozky_celkova_cena_s_dph&&""!==e.polozky_celkova_cena_s_dph){const n=parseFloat(e.polozky_celkova_cena_s_dph);if(!isNaN(n))return n}if(e.polozky&&Array.isArray(e.polozky)&&e.polozky.length>0)return e.polozky.reduce((e,n)=>{const r=parseFloat(n.cena_s_dph||0);return e+(isNaN(r)?0:r)},0);return 0})(e.row.original);return(e=>{if(null===e||void 0===e)return"-";const n=parseFloat(e);return isNaN(n)?"-":new Intl.NumberFormat("cs-CZ",{style:"currency",currency:"CZK",minimumFractionDigits:0,maximumFractionDigits:2}).format(n)})(n)},enableSorting:!0,enableColumnFilter:!0,meta:{align:"right"}},{accessorKey:"druh_objednavky",header:"Druh",cell:e=>{var n;const r=e.row.original;if(null!==(n=r.druh_objednavky)&&void 0!==n&&n.nazev)return r.druh_objednavky.nazev;if(r.druh_objednavky_nazev)return r.druh_objednavky_nazev;if(r.druh_objednavky_kod){const e=F.find(e=>e.kod===r.druh_objednavky_kod);return(null===e||void 0===e?void 0:e.nazev)||(null===e||void 0===e?void 0:e.label)||r.druh_objednavky_kod}if(r.druh_objednavky){const e=F.find(e=>e.kod===r.druh_objednavky||e.value===r.druh_objednavky);return(null===e||void 0===e?void 0:e.nazev)||(null===e||void 0===e?void 0:e.label)||r.druh_objednavky}return"-"},enableSorting:!0,enableColumnFilter:!0},{accessorKey:"objednatel",header:"Objednatel",cell:e=>{var n,r;const t=e.row.original;return null!==(n=t.objednatel_uzivatel)&&void 0!==n&&n.cele_jmeno?t.objednatel_uzivatel.cele_jmeno:null!==(r=t.objednatel)&&void 0!==r&&r.cele_jmeno?t.objednatel.cele_jmeno:"-"},enableSorting:!0,enableColumnFilter:!0},{accessorKey:"garant",header:"Garant",cell:e=>{var n,r;const t=e.row.original;return null!==(n=t.garant_uzivatel)&&void 0!==n&&n.cele_jmeno?t.garant_uzivatel.cele_jmeno:null!==(r=t.garant)&&void 0!==r&&r.cele_jmeno?t.garant.cele_jmeno:"-"},enableSorting:!0,enableColumnFilter:!0},{accessorKey:"termin_dodani",header:"Term\xedn dod\xe1n\xed",cell:e=>le(e.getValue()),enableSorting:!0,enableColumnFilter:!0,meta:{align:"center"}},{accessorKey:"faktury_splatnost",header:"Faktury splatnost",cell:e=>{const n=e.row.original.faktury||[];if(0===n.length)return"-";const r=n.map(e=>e.fa_datum_splatnosti||e.fa_splatnost).filter(Boolean).map(e=>le(e));return 0===r.length?"-":(0,Z.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:r.map((e,n)=>(0,Z.jsx)("div",{children:e},n))})},enableSorting:!1,enableColumnFilter:!1,meta:{align:"center"}},{accessorKey:"umisteni_majetku",header:"Um\xedst\u011bn\xed majetku",cell:e=>e.row.original.vecna_spravnost_umisteni_majetku||"-",enableSorting:!0,enableColumnFilter:!0}];let n=null;if(b)switch(b.id){case"above-amount":n=e.find(e=>"cena_s_dph"===e.accessorKey);break;case"by-supplier":n=[e.find(e=>"dodavatel_nazev"===e.accessorKey),e.find(e=>"dodavatel_ico"===e.accessorKey)];break;case"by-status":n=e.find(e=>"stav_objednavky"===e.accessorKey);break;case"by-period":n=e.find(e=>"dt_vytvoreni"===e.accessorKey);break;case"pending":n=[e.find(e=>"stav_objednavky"===e.accessorKey),{accessorKey:"days_pending",header:"Dn\xed",cell:e=>{const n=e.row.original,r=n.dt_vytvoreni||n.datum_vytvoreni||n.dt_objednavky;if(!r)return"-";const t=new Date(r),o=new Date;return Math.floor((o-t)/864e5)},enableSorting:!0,enableColumnFilter:!1,meta:{align:"center"}},e.find(e=>"dt_vytvoreni"===e.accessorKey)];break;case"overdue":n=[e.find(e=>"faktury_splatnost"===e.accessorKey),e.find(e=>"termin_dodani"===e.accessorKey),e.find(e=>"stav_objednavky"===e.accessorKey)];break;case"asset":n=[e.find(e=>"stav_objednavky"===e.accessorKey),e.find(e=>"umisteni_majetku"===e.accessorKey),e.find(e=>"druh_objednavky"===e.accessorKey)];break;case"by-category":n=e.find(e=>"druh_objednavky"===e.accessorKey)}if(n){const r=Array.isArray(n)?n:[n],t=r.map(e=>e.accessorKey),o=e.filter(e=>!t.includes(e.accessorKey));return[...r,...o]}return e})(),title:x,onExport:ue,fullscreenRef:a})]}),g&&!c&&0===f.length&&(0,Z.jsx)(ur,{children:(0,Z.jsx)("div",{style:{color:"#ef4444",textAlign:"center",padding:"2rem"},children:g})})]}),ee&&re&&(0,Z.jsx)(ye.A,{isOpen:ee,onClose:ie,title:"Detail objedn\xe1vky",children:(0,Z.jsx)(xe.td,{data:re,username:r,token:n,onCloseAll:ie})})]})}}}]);
//# sourceMappingURL=4675.7d0f8344.chunk.js.map