{"version":3,"file":"static/js/9351.3beaefe6.chunk.js","mappings":"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","sources":["styles/GlobalTooltip.js","components/ImportOldOrdersModal.js","pages/Orders.styles.js","forms/OrderFormTabs.js","components/Statistics.js","pages/Orders.js"],"sourcesContent":["import styled from '@emotion/styled';\n\n/**\n * Globln Tooltip komponenta pro jednotn vzhled nap celou aplikac\n * Pouit: Obalit element s touto komponentou a nastavit .tooltip child\n */\nexport const TooltipWrapper = styled.div`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n\n  /* Tooltip element */\n  .tooltip,\n  .cache-tooltip {\n    position: absolute;\n    top: calc(100% + 10px);\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.67);\n    color: white;\n    padding: 0.5rem 0.875rem;\n    border-radius: 8px;\n    border: 1px solid rgba(255, 255, 255, 0.4);\n    font-size: 0.85rem;\n    font-weight: 600;\n    white-space: nowrap;\n    box-shadow:\n      0 6px 20px rgba(0, 0, 0, 0.4),\n      0 2px 8px rgba(0, 0, 0, 0.25),\n      inset 0 1px 0 rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    /* Ikonka na zatku tooltip */\n    &::before {\n      content: '';\n      font-size: 1rem;\n      flex-shrink: 0;\n    }\n\n    /* Varianty ikon pomoc data-icon atributu */\n    &[data-icon=\"info\"]::before { content: ''; }\n    &[data-icon=\"success\"]::before { content: ''; }\n    &[data-icon=\"warning\"]::before { content: ''; }\n    &[data-icon=\"error\"]::before { content: ''; }\n    &[data-icon=\"database\"]::before { content: ''; }\n    &[data-icon=\"cache\"]::before { content: ''; }\n    &[data-icon=\"time\"]::before { content: ''; }\n    &[data-icon=\"calendar\"]::before { content: ''; }\n    &[data-icon=\"none\"]::before { content: none; }\n\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n    /* ipka nahoru */\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-bottom-color: rgba(0, 0, 0, 0.67);\n      filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n    }\n  }\n\n  /* Varianty pozicovn */\n  .tooltip-top,\n  .tooltip.top {\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-right,\n  .tooltip.right {\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-left,\n  .tooltip.left {\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  /* Multi-line tooltips */\n  .tooltip-multiline,\n  .tooltip.multiline {\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  }\n\n  /* Zobrazen pi hover */\n  &:hover .tooltip,\n  &:hover .cache-tooltip {\n    opacity: 1;\n  }\n`;\n\n/**\n * Samostatn Tooltip element (bez wrapperu)\n * Pouit: Pro custom pozicovn nebo kdy u mte vlastn wrapper\n */\nexport const Tooltip = styled.div`\n  position: absolute;\n  top: calc(100% + 10px);\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.67);\n  color: white;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  font-size: 0.85rem;\n  font-weight: 600;\n  white-space: nowrap;\n  box-shadow:\n    0 6px 20px rgba(0, 0, 0, 0.4),\n    0 2px 8px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  z-index: 999999;\n  line-height: 1.6;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 8px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.67);\n    filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n  }\n\n  ${props => props.$visible && `\n    opacity: 1;\n  `}\n\n  ${props => props.$position === 'top' && `\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$position === 'right' && `\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$position === 'left' && `\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$multiline && `\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  `}\n`;\n\n/**\n * Tooltip s malm paddingem (kompaktn verze)\n */\nexport const TooltipCompact = styled(Tooltip)`\n  padding: 0.375rem 0.625rem;\n  font-size: 0.8rem;\n`;\n\n/**\n * CSS Mixin pro tooltip styling (pouit v existujcch styled components)\n */\nexport const tooltipStyles = `\n  background: rgba(0, 0, 0, 0.67);\n  color: white;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  font-size: 0.85rem;\n  font-weight: 600;\n  white-space: nowrap;\n  box-shadow:\n    0 6px 20px rgba(0, 0, 0, 0.4),\n    0 2px 8px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n  z-index: 999999;\n  line-height: 1.6;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n`;\n\n/**\n * CSS pro tooltip ipku\n */\nexport const tooltipArrowStyles = (direction = 'bottom') => {\n  const arrowMap = {\n    bottom: `\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-bottom-color: rgba(0, 0, 0, 0.67);\n    `,\n    top: `\n      top: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    `,\n    right: `\n      top: 50%;\n      right: 100%;\n      transform: translateY(-50%);\n      border: 8px solid transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    `,\n    left: `\n      top: 50%;\n      left: 100%;\n      transform: translateY(-50%);\n      border: 8px solid transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    `\n  };\n\n  return `\n    content: '';\n    position: absolute;\n    ${arrowMap[direction] || arrowMap.bottom}\n    filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n  `;\n};\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faCheckCircle, faTimesCircle, faSpinner, faFileImport } from '@fortawesome/free-solid-svg-icons';\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(3px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n`;\n\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n  max-width: 700px;\n  width: 100%;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ModalHeader = styled.div`\n  padding: 1.5rem;\n  border-bottom: 2px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n`;\n\nconst ModalTitle = styled.h2`\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst CloseButton = styled.button`\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ModalBody = styled.div`\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst ProgressSection = styled.div`\n  margin-bottom: 1.5rem;\n`;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 32px;\n  background: #e5e7eb;\n  border-radius: 16px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst ProgressFill = styled.div`\n  height: 100%;\n  background: linear-gradient(90deg, #10b981 0%, #059669 100%);\n  transition: width 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.875rem;\n\n  ${props => props.error && `\n    background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);\n  `}\n`;\n\nconst ProgressText = styled.div`\n  margin-top: 0.5rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.875rem;\n`;\n\nconst SummaryBox = styled.div`\n  background: ${props => props.type === 'success' ? '#ecfdf5' : props.type === 'error' ? '#fef2f2' : '#f3f4f6'};\n  border: 2px solid ${props => props.type === 'success' ? '#10b981' : props.type === 'error' ? '#ef4444' : '#d1d5db'};\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst SummaryTitle = styled.div`\n  font-weight: 600;\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n  color: ${props => props.type === 'success' ? '#065f46' : props.type === 'error' ? '#991b1b' : '#374151'};\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst SummaryStats = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 0.75rem;\n  margin-top: 0.75rem;\n`;\n\nconst StatItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  font-size: 0.875rem;\n`;\n\nconst StatLabel = styled.span`\n  color: #6b7280;\n`;\n\nconst StatValue = styled.span`\n  font-weight: 600;\n  color: ${props =>\n    props.type === 'success' ? '#10b981' :\n    props.type === 'error' ? '#ef4444' :\n    props.type === 'info' ? '#3b82f6' :\n    '#374151'\n  };\n`;\n\nconst ResultsList = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n`;\n\nconst ResultItem = styled.div`\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: #f9fafb;\n  }\n`;\n\nconst SpinnerIcon = styled(FontAwesomeIcon)`\n  animation: spin 1s linear infinite;\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\nconst ModalFooter = styled.div`\n  padding: 1rem 1.5rem;\n  border-top: 2px solid #e5e7eb;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  background: #f9fafb;\n`;\n\nconst Button = styled.button`\n  padding: 0.625rem 1.25rem;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n\n  ${props => props.primary ? `\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n    }\n  ` : `\n    background: white;\n    color: #374151;\n    border: 2px solid #d1d5db;\n\n    &:hover:not(:disabled) {\n      border-color: #9ca3af;\n    }\n  `}\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n`;\n\nconst ImportOldOrdersModal = ({\n  isOpen,\n  onClose,\n  selectedOrderIds,\n  onImportComplete,\n  importFunction\n}) => {\n  const [importing, setImporting] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentOrder, setCurrentOrder] = useState(null);\n  const [currentOperation, setCurrentOperation] = useState(''); // 'reading', 'inserting', 'updating'\n  const [currentProcessedCount, setCurrentProcessedCount] = useState(0); // Poet zpracovanch objednvek bhem importu\n  const [totalToImport, setTotalToImport] = useState(0); // Celkov poet k importu\n  const [results, setResults] = useState(null);\n  const [error, setError] = useState(null);\n  const [expandedItems, setExpandedItems] = useState(new Set()); // Rozbalen poloky\n  const [searchTerm, setSearchTerm] = useState(''); // Vyhledvac term\n\n  // Reset state pi oteven\n  useEffect(() => {\n    if (isOpen) {\n      setImporting(false);\n      setProgress(0);\n      setCurrentOrder(null);\n      setCurrentOperation('');\n      setCurrentProcessedCount(0);\n      setTotalToImport(0);\n      setResults(null);\n      setError(null);\n      setExpandedItems(new Set());\n      setSearchTerm('');\n    }\n  }, [isOpen]);\n  const handleImport = async () => {\n    setImporting(true);\n    setProgress(0);\n    setError(null);\n    setResults(null);\n\n    // Inicializace progress trackingu\n    setTotalToImport(selectedOrderIds.length);\n    setCurrentProcessedCount(0);\n    setCurrentOperation('reading');\n    setCurrentOrder('Pipojovn k databzi...');\n\n    // Progress simulace pro klasick API (deklarace VN try bloku pro cleanup v catch)\n    let progressSimulation = null;\n\n    try {\n      setCurrentOrder('Odesln dat na server...');\n\n      // Fallback progress simulace pro klasick API (non-SSE)\n      const startSimulation = () => {\n        let simulatedProgress = 0;\n        const totalOrders = selectedOrderIds.length;\n\n        progressSimulation = setInterval(() => {\n          simulatedProgress = Math.min(simulatedProgress + 5, 90);\n          setProgress(simulatedProgress);\n\n          // Vypoti odhadovan poet zpracovanch objednvek\n          const estimatedProcessed = Math.floor((simulatedProgress / 100) * totalOrders);\n          setCurrentProcessedCount(estimatedProcessed);\n\n          if (simulatedProgress >= 90) {\n            setCurrentOperation('waiting');\n            setCurrentOrder('ekn na server...');\n          } else {\n            // Simuluj rzn operace\n            const operations = ['reading', 'inserting', 'updating'];\n            const randomOp = operations[Math.floor(Math.random() * operations.length)];\n            setCurrentOperation(randomOp);\n          }\n        }, 500);\n      };\n\n      // Vdy start simulace (backend nem SSE)\n      startSimulation();\n\n      const response = await importFunction(selectedOrderIds, {\n        // onProgress callback - vol se pouze pokud backend podporuje SSE\n        onProgress: (progressData) => {\n          // Zastav simulaci pokud dostaneme real data\n          if (progressSimulation) {\n            clearInterval(progressSimulation);\n            progressSimulation = null;\n          }\n\n          // Update progress bar\n          setProgress(progressData.percentage);\n\n          // Update potadla\n          setCurrentProcessedCount(progressData.current);\n          setTotalToImport(progressData.total);\n\n          // Update aktuln objednvky ze SSE dat\n          if (progressData.last_result) {\n            const result = progressData.last_result;\n\n            // Nastav operaci podle typu z backendu\n            if (result.operation === 'INSERT') {\n              setCurrentOperation('inserting');\n            } else if (result.operation === 'UPDATE') {\n              setCurrentOperation('updating');\n            } else {\n              setCurrentOperation('reading');\n            }\n\n            // Zobraz slo objednvky\n            setCurrentOrder(result.cislo_objednavky || `#${result.old_id}`);\n          }\n        },\n\n        // onComplete callback - vol se po dokonen importu\n        onComplete: (completeData) => {\n          setProgress(100);\n          setCurrentOperation('');\n          setCurrentOrder('Import dokonen!');\n        },\n\n        // onError callback - vol se pi chyb\n        onError: (error) => {\n          throw error; // Re-throw pro catch blok\n        }\n      });\n\n      // Zastav simulaci pokud b\n      if (progressSimulation) {\n        clearInterval(progressSimulation);\n        progressSimulation = null;\n      }\n\n      // Nastav finln progress\n      setProgress(100);\n      setCurrentOperation('');\n      setCurrentOrder('Import dokonen!');\n\n      // Validace odpovdi\n      if (response && response.results) {\n        setResults(response);\n      } else {\n        throw new Error(`Neplatn odpov ze serveru: ${JSON.stringify(response)}`);\n      }\n    } catch (err) {\n\n      //  Zastav simulaci pi chyb!\n      if (progressSimulation) {\n        clearInterval(progressSimulation);\n        progressSimulation = null;\n      }\n\n      // Detailnj error message podle typu chyby\n      let errorMessage = 'Neznm chyba pi importu';\n\n      // Timeout chyba\n      if (err.message && err.message.includes('Import timeout')) {\n        errorMessage = err.message;\n      }\n      // Network chyba\n      else if (err.message === 'Network Error') {\n        errorMessage = ' Chyba pipojen k serveru.\\n\\n' +\n                      'Mon piny:\\n' +\n                      ' Backend server neb nebo je nedostupn\\n' +\n                      ' Nesprvn API URL v konfiguraci\\n' +\n                      ' CORS problm (Access-Control-Allow-Origin)\\n' +\n                      ' Firewall blokuje spojen';\n      }\n      // Server odpovdl s HTTP error kdem\n      else if (err.response) {\n        const status = err.response.status;\n        const errorData = err.response.data;\n\n        // Validan chyby z backendu\n        if (status === 400 && errorData?.validation_errors) {\n          const validationErrors = errorData.validation_errors;\n          errorMessage = ' Validan chyba - nkter objednvky nelze importovat:\\n\\n';\n\n          Object.entries(validationErrors).forEach(([orderId, errors]) => {\n            errorMessage += `Objednvka ${orderId}:\\n`;\n            if (Array.isArray(errors)) {\n              errors.forEach(err => errorMessage += `   ${err}\\n`);\n            } else {\n              errorMessage += `   ${errors}\\n`;\n            }\n          });\n        }\n        // Obecn chyba z backendu\n        else {\n          errorMessage = errorData?.error ||\n                        errorData?.message ||\n                        errorData?.detail ||\n                        ` Server error (${status}): ${err.response.statusText}\\n\\n` +\n                        'Backend odmtl request. Zkontrolujte:\\n' +\n                        ' Formt poslanch dat\\n' +\n                        ' Oprvnn uivatele\\n' +\n                        ' Logy na backendu pro detaily';\n        }\n      }\n      // Request byl odesln, ale dn odpov\n      else if (err.request) {\n        errorMessage = ' Server neodpovdl na request.\\n\\n' +\n                      'Mon piny:\\n' +\n                      ' Backend server zamrzl bhem zpracovn\\n' +\n                      ' Import trv pli dlouho (peten server)\\n' +\n                      ' Sov timeout\\n\\n' +\n                      'Zkuste:\\n' +\n                      '1. Zkontrolovat zda backend b\\n' +\n                      '2. Importovat mn objednvek najednou\\n' +\n                      '3. Zkontrolovat logy backendu';\n      }\n      //  Ostatn chyby\n      else {\n        errorMessage = err.message || 'Neznm chyba pi importu';\n      }\n\n      setError(errorMessage);\n      setProgress(0);\n      setCurrentOperation('');\n      setCurrentOrder('');\n    } finally {\n      //  DLEIT: Vdy zastav simulaci pi ukonen\n      if (progressSimulation) {\n        clearInterval(progressSimulation);\n        progressSimulation = null;\n      }\n      setImporting(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (!importing) {\n      if (results && results.imported_count > 0 && onImportComplete) {\n        onImportComplete();\n      }\n      onClose();\n    }\n  };\n\n  // Toggle rozbalen/sbalen poloky\n  const toggleExpand = (index) => {\n    setExpandedItems(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(index)) {\n        newSet.delete(index);\n      } else {\n        newSet.add(index);\n      }\n      return newSet;\n    });\n  };\n\n  // Filtrovn vsledk podle vyhledvn\n  const filteredResults = results?.results?.filter(result => {\n    if (!searchTerm) return true;\n    const searchLower = searchTerm.toLowerCase();\n\n    // Vyhledvn v evidennm sle, statusu a chyb\n    if (result.cislo_objednavky?.toLowerCase().includes(searchLower)) return true;\n    if (result.status?.toLowerCase().includes(searchLower)) return true;\n    if (result.error?.toLowerCase().includes(searchLower)) return true;\n\n    // Vyhledvn v ID nov DB\n    if (result.new_id?.toString().includes(searchLower)) return true;\n\n    // Vyhledvn v potu poloek a ploh\n    if (result.polozky_count?.toString().includes(searchLower)) return true;\n    if (result.prilohy_count?.toString().includes(searchLower)) return true;\n\n    // Vyhledvn v detailech ploh (nzvy soubor a popisy)\n    if (result.prilohy_details && Array.isArray(result.prilohy_details)) {\n      for (const priloha of result.prilohy_details) {\n        if (priloha.soubor?.toLowerCase().includes(searchLower)) return true;\n        if (priloha.popis?.toLowerCase().includes(searchLower)) return true;\n        if (priloha.error?.toLowerCase().includes(searchLower)) return true;\n      }\n    }\n\n    return false;\n  }) || [];\n\n  if (!isOpen) return null;\n\n  const totalOrders = selectedOrderIds.length;\n  const processedCount = results?.results?.length || 0;\n  const importedCount = results?.imported_count || 0;  // Nov objednvky (INSERT)\n  const updatedCount = results?.updated_count || 0;    // Aktualizovan (UPDATE)\n  const failedCount = results?.failed_count || 0;\n\n  return ReactDOM.createPortal(\n    <ModalOverlay onClick={(e) => e.target === e.currentTarget && handleClose()}>\n      <ModalContent>\n        <ModalHeader>\n          <ModalTitle>\n            <FontAwesomeIcon icon={faFileImport} />\n            Import starch objednvek\n          </ModalTitle>\n          <CloseButton onClick={handleClose} disabled={importing}>\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </ModalHeader>\n\n        <ModalBody>\n          {/* Ped zahjenm importu */}\n          {!importing && !results && !error && (\n            <div>\n              <p style={{ marginBottom: '1rem', color: '#6b7280' }}>\n                Pipraveno k importu <strong>{totalOrders}</strong> objednvek ze star databze do novho systmu.\n              </p>\n              <SummaryBox>\n                <SummaryTitle>\n                   Co se bude dt:\n                </SummaryTitle>\n                <ul style={{ margin: '0.5rem 0 0 1.5rem', color: '#6b7280', fontSize: '0.875rem' }}>\n                  <li>Naten objednvek ze star DB: <strong style={{ color: '#2563eb', fontFamily: 'monospace' }}>{process.env.REACT_APP_DB_ORDER_KEY || 'DEMO_objednavky_2025'}</strong></li>\n                  <li>Naten ploh z tabulky: <strong style={{ color: '#2563eb', fontFamily: 'monospace' }}>{process.env.REACT_APP_DB_ATTACHMENT_KEY || 'DEMO_pripojene_odokumenty'}</strong></li>\n                  <li>Kontrola duplicit podle evidennho sla</li>\n                  <li>Vytvoen/aktualizace zznamu v nov DB (orders25)</li>\n                  <li>Import poloek a ploh s vazbou na objednvku</li>\n                  <li>Extrakce LP kd z poznmek</li>\n                </ul>\n              </SummaryBox>\n            </div>\n          )}\n\n          {/* Progress bar bhem importu */}\n          {importing && (\n            <ProgressSection>\n              <ProgressBar>\n                <ProgressFill style={{ width: `${progress}%` }}>\n                  {progress}%\n                </ProgressFill>\n              </ProgressBar>\n              <ProgressText>\n                <SpinnerIcon icon={faSpinner} /> Probh import objednvek...\n              </ProgressText>\n\n              {/*  Detailn info o aktulnm zpracovn */}\n              {currentOrder && (\n                <div style={{\n                  marginTop: '1rem',\n                  padding: '1rem',\n                  background: '#e0f2fe',\n                  borderRadius: '6px',\n                  border: '1px solid #0284c7',\n                  fontSize: '0.875rem'\n                }}>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>\n                    <strong style={{ color: '#075985' }}>\n                      {currentOperation === 'reading' && ' ten dat...'}\n                      {currentOperation === 'inserting' && ' Vkldn nov objednvky...'}\n                      {currentOperation === 'updating' && ' Aktualizace objednvky...'}\n                      {currentOperation === 'waiting' && ' ekn na server...'}\n                      {!currentOperation && ' Zpracovn...'}\n                    </strong>\n                  </div>\n                  <div style={{ color: '#0c4a6e' }}>\n                    <strong>{currentOperation === 'waiting' ? 'Status:' : 'Objednvka:'}</strong> {currentOrder}\n                  </div>\n                  {totalToImport > 0 && (\n                    <div style={{ color: '#0c4a6e', marginTop: '0.25rem' }}>\n                      <strong>Prbh:</strong> {currentProcessedCount} / {totalToImport} objednvek\n                    </div>\n                  )}\n                </div>\n              )}\n\n              <div style={{ marginTop: '0.75rem', padding: '0.75rem', background: '#fef3c7', borderRadius: '6px', border: '1px solid #f59e0b' }}>\n                <p style={{ margin: 0, fontSize: '0.875rem', color: '#92400e' }}>\n                   <strong>Import me trvat nkolik minut.</strong> Prosm neopoutjte tuto strnku a pokejte na dokonen.\n                  Systm zpracovv {selectedOrderIds.length} objednvek vetn ploh a poloek.\n                </p>\n              </div>\n            </ProgressSection>\n          )}\n\n          {/* Chybov zprva */}\n          {error && (\n            <SummaryBox type=\"error\">\n              <SummaryTitle type=\"error\">\n                <FontAwesomeIcon icon={faTimesCircle} />\n                Chyba pi importu\n              </SummaryTitle>\n              <div style={{ marginTop: '0.5rem', fontSize: '0.875rem' }}>\n                {error}\n              </div>\n            </SummaryBox>\n          )}\n\n          {/* Vsledky importu */}\n          {results && (\n            <>\n              <SummaryBox type={failedCount === 0 ? 'success' : 'error'}>\n                <SummaryTitle type={failedCount === 0 ? 'success' : 'error'}>\n                  <FontAwesomeIcon icon={failedCount === 0 ? faCheckCircle : faTimesCircle} />\n                  {failedCount === 0 ? 'Import dokonen spn' : 'Import dokonen s chybami'}\n                </SummaryTitle>\n                <SummaryStats>\n                  <StatItem>\n                    <StatLabel>Celkem:</StatLabel>\n                    <StatValue>{processedCount}</StatValue>\n                  </StatItem>\n                  <StatItem>\n                    <StatLabel>Novch:</StatLabel>\n                    <StatValue type=\"success\">{importedCount}</StatValue>\n                  </StatItem>\n                  <StatItem>\n                    <StatLabel>Aktualizovanch:</StatLabel>\n                    <StatValue type=\"info\">{updatedCount}</StatValue>\n                  </StatItem>\n                  <StatItem>\n                    <StatLabel>Selhalo:</StatLabel>\n                    <StatValue type=\"error\">{failedCount}</StatValue>\n                  </StatItem>\n                </SummaryStats>\n              </SummaryBox>\n\n              {results.results && results.results.length > 0 && (\n                <>\n                  <div style={{ marginBottom: '1rem' }}>\n                    <h3 style={{ fontSize: '1rem', fontWeight: 600, marginBottom: '0.5rem', color: '#374151' }}>\n                      Detail importovanch objednvek:\n                    </h3>\n\n                    {/* Fultext vyhledvn */}\n                    <div style={{ position: 'relative', marginTop: '0.75rem' }}>\n                      <input\n                        type=\"text\"\n                        placeholder=\" Vyhledat objednvku (slo, status, chyba)...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        style={{\n                          width: '100%',\n                          padding: '0.625rem 0.875rem',\n                          border: '1px solid #d1d5db',\n                          borderRadius: '6px',\n                          fontSize: '0.875rem',\n                          outline: 'none',\n                          transition: 'border-color 0.2s',\n                        }}\n                        onFocus={(e) => e.target.style.borderColor = '#3b82f6'}\n                        onBlur={(e) => e.target.style.borderColor = '#d1d5db'}\n                      />\n                      {searchTerm && (\n                        <button\n                          onClick={() => setSearchTerm('')}\n                          style={{\n                            position: 'absolute',\n                            right: '0.5rem',\n                            top: '50%',\n                            transform: 'translateY(-50%)',\n                            background: 'none',\n                            border: 'none',\n                            color: '#9ca3af',\n                            cursor: 'pointer',\n                            padding: '0.25rem',\n                            fontSize: '1rem'\n                          }}\n                          title=\"Vymazat vyhledvn\"\n                        >\n                          \n                        </button>\n                      )}\n                    </div>\n\n                    {searchTerm && (\n                      <div style={{ marginTop: '0.5rem', fontSize: '0.875rem', color: '#6b7280' }}>\n                        Nalezeno: <strong>{filteredResults.length}</strong> z {results.results.length}\n                      </div>\n                    )}\n                  </div>\n\n                  <ResultsList>\n                    {filteredResults.map((result, index) => {\n                      const isExpanded = expandedItems.has(index);\n                      const isSuccess = result.status === 'OK';\n                      const isNew = result.operation === 'INSERT';\n\n                      return (\n                  <ResultItem key={index}>\n                    <div style={{ width: '100%' }}>\n                    {/* Hlavn dek - jeden dek s vm */}\n                    <div\n                      onClick={() => toggleExpand(index)}\n                      style={{\n                        cursor: 'pointer',\n                        padding: '0.625rem 0.75rem',\n                        transition: 'all 0.2s',\n                        borderRadius: '6px',\n                        background: isExpanded ? '#f9fafb' : 'transparent',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.75rem'\n                      }}\n                      onMouseEnter={(e) => e.currentTarget.style.background = '#f9fafb'}\n                      onMouseLeave={(e) => e.currentTarget.style.background = isExpanded ? '#f9fafb' : 'transparent'}\n                    >\n                      {/* +/- tlatko */}\n                      <div style={{\n                        width: '20px',\n                        height: '20px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: '0.875rem',\n                        fontWeight: 'bold',\n                        color: '#6b7280',\n                        border: '1.5px solid #d1d5db',\n                        borderRadius: '3px',\n                        background: 'white',\n                        flexShrink: 0\n                      }}>\n                        {isExpanded ? '' : '+'}\n                      </div>\n\n                      {/* Ikona spch/chyba */}\n                      <div style={{\n                        fontSize: '1.125rem',\n                        flexShrink: 0,\n                        color: isSuccess ? '#10b981' : '#ef4444'\n                      }}>\n                        {isSuccess ? '' : ''}\n                      </div>\n\n                      {/* Evidenn slo */}\n                      <div style={{\n                        fontSize: '0.9375rem',\n                        fontWeight: 600,\n                        color: '#111827',\n                        minWidth: '200px'\n                      }}>\n                        {result.cislo_objednavky}\n                      </div>\n\n                      {/* Rozdlovac ra */}\n                      <div style={{\n                        width: '1px',\n                        height: '20px',\n                        background: '#d1d5db',\n                        flexShrink: 0\n                      }} />\n\n                      {/* Badge NOV/AKTUALIZACE */}\n                      {isSuccess && (\n                        <div style={{\n                          fontSize: '0.75rem',\n                          fontWeight: 600,\n                          padding: '0.125rem 0.5rem',\n                          borderRadius: '3px',\n                          backgroundColor: isNew ? '#d1fae5' : '#dbeafe',\n                          color: isNew ? '#065f46' : '#1e40af',\n                          whiteSpace: 'nowrap',\n                          flexShrink: 0\n                        }}>\n                          {isNew ? 'NOV' : 'AKTUALIZACE'}\n                        </div>\n                      )}\n\n                      {!isSuccess && (\n                        <div style={{\n                          fontSize: '0.75rem',\n                          fontWeight: 600,\n                          padding: '0.125rem 0.5rem',\n                          borderRadius: '3px',\n                          backgroundColor: '#fee2e2',\n                          color: '#991b1b',\n                          whiteSpace: 'nowrap',\n                          flexShrink: 0\n                        }}>\n                          CHYBA\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Detail - zobraz se pouze po rozkliknut */}\n                    {isExpanded && (\n                      <div style={{\n                        paddingLeft: '0.75rem',\n                        paddingRight: '0.75rem',\n                        paddingTop: '0.5rem',\n                        paddingBottom: '0.625rem',\n                        background: '#f9fafb'\n                      }}>\n                        {isSuccess ? (\n                          <>\n                            {/* Zkladn info */}\n                            <div style={{\n                              display: 'flex',\n                              gap: '1.25rem',\n                              fontSize: '0.8125rem',\n                              color: '#6b7280',\n                              flexWrap: 'wrap',\n                              marginBottom: '0.625rem',\n                              paddingLeft: '2.5rem'\n                            }}>\n                              <div>\n                                <span> Status: </span>\n                                <strong style={{ color: '#10b981' }}>spch</strong>\n                              </div>\n                              <div>\n                                <span>ID v nov DB: </span>\n                                <strong style={{ color: '#374151' }}>{result.new_id || 'N/A'}</strong>\n                              </div>\n                              <div>\n                                <span>Poloky: </span>\n                                <strong style={{ color: '#374151' }}>{result.polozky_count}</strong>\n                              </div>\n                              <div>\n                                <span>Plohy: </span>\n                                <strong style={{ color: '#374151' }}>{result.prilohy_count}</strong>\n                              </div>\n                            </div>\n\n                            {/* Detail ploh */}\n                            {result.prilohy_details && result.prilohy_details.length > 0 && (\n                              <div style={{\n                                marginTop: '0.625rem',\n                                paddingTop: '0.625rem',\n                                paddingLeft: '2.5rem',\n                                borderTop: '1px dashed #d1d5db'\n                              }}>\n                                <div style={{\n                                  fontSize: '0.8125rem',\n                                  fontWeight: 600,\n                                  color: '#374151',\n                                  marginBottom: '0.375rem'\n                                }}>\n                                   Plohy:\n                                </div>\n                                <div style={{\n                                  paddingLeft: '1.25rem',\n                                  fontSize: '0.75rem',\n                                  color: '#6b7280'\n                                }}>\n                                  {result.prilohy_details.map((priloha, pIdx) => (\n                                    <div key={pIdx} style={{\n                                      marginBottom: '0.25rem',\n                                      display: 'flex',\n                                      alignItems: 'center',\n                                      gap: '0.5rem'\n                                    }}>\n                                      <span style={{\n                                        color: priloha.status === 'OK' ? '#10b981' : '#ef4444',\n                                        fontSize: '0.875rem'\n                                      }}>\n                                        {priloha.status === 'OK' ? '' : ''}\n                                      </span>\n                                      <span style={{ color: '#374151' }}>{priloha.soubor}</span>\n                                      {priloha.popis && (\n                                        <span style={{ color: '#9ca3af' }}>({priloha.popis})</span>\n                                      )}\n                                      {priloha.error && (\n                                        <span style={{ color: '#ef4444' }}>\n                                          - {priloha.error}\n                                        </span>\n                                      )}\n                                    </div>\n                                  ))}\n                                </div>\n                              </div>\n                            )}\n                          </>\n                        ) : (\n                          <div style={{\n                            fontSize: '0.8125rem',\n                            color: '#dc2626',\n                            padding: '0.5rem',\n                            background: '#fee2e2',\n                            borderRadius: '4px',\n                            borderLeft: '3px solid #ef4444'\n                          }}>\n                            <div style={{ fontWeight: 600, marginBottom: '0.25rem' }}>\n                               Chyba pi importu:\n                            </div>\n                            <div>{result.error || 'Neznm chyba'}</div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                    </div>\n                  </ResultItem>\n                      );\n                    })}\n              </ResultsList>\n                </>\n              )}\n            </>\n          )}\n        </ModalBody>\n\n        <ModalFooter>\n          {!results && !error && (\n            <>\n              <Button onClick={handleClose} disabled={importing}>\n                Zruit\n              </Button>\n              <Button primary onClick={handleImport} disabled={importing}>\n                {importing ? (\n                  <>\n                    <SpinnerIcon icon={faSpinner} /> Importuji...\n                  </>\n                ) : (\n                  `Importovat (${totalOrders})`\n                )}\n              </Button>\n            </>\n          )}\n          {(results || error) && (\n            <Button primary onClick={handleClose}>\n              Zavt\n            </Button>\n          )}\n        </ModalFooter>\n      </ModalContent>\n    </ModalOverlay>,\n    document.body\n  );\n};\n\nexport default ImportOldOrdersModal;\n","import React from 'react';\nimport { Global, css } from '@emotion/react';\n\nconst styles = css`\n  :root {\n    --app-primary: #202d65; /* canonical header blue */\n    --app-primary-dark: #162248; /* slightly darker for hover states */\n  }\n\n  .orders-page {\n    padding: 1rem;\n  }\n\n  /* Generic highlight styling for search matches within Orders pages */\n  .orders-page mark {\n    background: #ffe78f;\n    color: inherit;\n    padding: 0 0px; /* keep text height consistent */\n    border-radius: 2px;\n    font-weight: 600;\n  }\n\n  .orders-table,\n  .orders-header,\n  .filter-box,\n  .summary-boxes,\n  .stats-box,\n  input,\n  select,\n  textarea,\n  button {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  .orders-table {\n    padding: 1rem;\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n    overflow-x: auto;\n    display: block;\n  }\n\n  /* modern card-like table container */\n  .orders-table {\n    background: #ffffff;\n    border-radius: 10px;\n    box-shadow: 0 8px 24px rgba(16,24,64,0.06);\n    padding: 12px;\n  }\n\n  .orders-table table {\n    width: 100%;\n    border-collapse: collapse;\n  }\n\n  .orders-table th,\n  .orders-table td {\n    border: 1px solid #ddd;\n    padding: 10px;\n    text-align: left;\n    word-wrap: break-word;\n    font-size: 19.32px;\n  }\n\n  .orders-table thead {\n    background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  }\n\n  .orders-table th {\n    background: transparent;\n    color: #fff;\n    font-weight: 700;\n    text-align: center;\n    font-size: 13px;\n    padding: 14px 12px;\n    text-transform: uppercase;\n    letter-spacing: 0.6px;\n    cursor: pointer;\n    transition: all .12s ease;\n  }\n\n  /* Odstranno problematick thead:hover pravidlo kter zpsobovalo blen zhlav */\n\n  /* Table styling dle OrdersListNew.js */\n  .orders-table table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: auto;\n  }\n\n  /* Sticky header styling jako v OrdersListNew */\n  .orders-table thead tr:first-of-type {\n    background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  }\n\n  .orders-table thead tr:first-of-type th {\n    position: sticky;\n    top: 0;\n    z-index: 3;\n    background: transparent;\n    color: #fff;\n    padding: 12px 8px;\n    text-align: center;\n    vertical-align: middle;\n    font-weight: 700;\n    border-bottom: 1px solid #e6eef8;\n    box-shadow: 0 1px 0 0 rgba(255,255,255,0.12) inset;\n  }\n\n  /* Zru nedouc hover efekt jako v OrdersListNew */\n  .orders-table thead th:hover {\n    background-color: transparent !important;\n    background: transparent !important;\n  }\n\n  /* Apply zebra and hover only when row highlighting (status colors) is OFF.\n     We toggle via a class on the page root: .orders-page.colors-on/.colors-off */\n  .orders-page:not(.colors-on) .orders-table tr:nth-of-type(even) {\n    background-color: #fbfcff;\n  }\n\n  .orders-page:not(.colors-on) .orders-table tr:hover {\n    background-color: #f6f7ff;\n  }\n\n  /* When colors are ON, make sure no generic hover/zebra leaks through from elsewhere */\n  .orders-page.colors-on .orders-table tr:nth-of-type(even) { background-color: transparent !important; }\n  .orders-page.colors-on .orders-table tr:hover { background-color: inherit !important; }\n\n  .orders-table td {\n    font-size: 15px;\n    padding: 12px 14px;\n  }\n\n  /* Dashboard tiles active state */\n  .summary-boxes .summary-box {\n    cursor: pointer;\n    transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease;\n    border: 1px solid rgba(2,6,23,0.06);\n  }\n  .summary-boxes .summary-box:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 18px rgba(2,6,23,0.08);\n  }\n  .summary-boxes .summary-box.active {\n    outline: 2px solid #3b82f6;\n    outline-offset: -2px;\n    box-shadow: 0 10px 22px rgba(59,130,246,0.18);\n    border-color: rgba(59,130,246,0.45);\n  }\n\n  /* Make the first (expander) column narrow and visually lighter */\n  .orders-table td:first-of-type, .orders-table th:first-of-type {\n    width: 48px;\n    text-align: center;\n    padding: 6px;\n  }\n\n  /* header expander button - subtle white */\n  .orders-table th .header-expander {\n    background: transparent;\n    border: none !important;\n    box-shadow: none !important;\n    color: #fff;\n    width: auto;\n    height: auto;\n    padding: 0;\n    line-height: 1;\n    display:inline-flex; align-items:center; justify-content:center;\n    font-size:14px;\n  }\n  /* Ensure SVG icons inside the header expander are white and small */\n  .orders-table th .header-expander svg {\n    color: #fff !important;\n    fill: #fff !important;\n    stroke: #fff !important;\n    width: 14px;\n    height: 14px;\n  }\n  /* ensure internal paths also white */\n  .orders-table th .header-expander svg path,\n  .orders-table th .header-expander svg rect,\n  .orders-table th .header-expander svg line {\n    fill: #fff !important;\n    stroke: #fff !important;\n  }\n  /* force button text/icon color */\n  .orders-table th .header-expander {\n    color: #fff !important;\n  }\n  /* legacy Orders page header expander support */\n  .orders-page .header-expander {\n    background: transparent;\n    border: none !important;\n    box-shadow: none !important;\n    color: #fff !important;\n    font-size: 14px;\n    padding: 0;\n    line-height: 1;\n  }\n\n  /* row expander - small circular, subtle border */\n  .orders-table .expander-btn {\n    background: transparent;\n    border: none !important;\n    width: auto;\n    height: auto;\n    padding: 0 4px;\n    font-size: 14px;\n    line-height: 1;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n  }\n  .orders-table .expander-btn:hover { opacity: 0.85; }\n\n  /* Softer cell borders and slightly smaller font for a modern look */\n  .orders-table th, .orders-table td {\n    border-color: #eef0f6;\n    font-size: 15px;\n  }\n\n  /* Checkbox styling */\n  .orders-table input[type=\"checkbox\"] {\n    width: 15px;\n    height: 15px;\n    cursor: pointer;\n    margin: 0;\n    accent-color: var(--app-primary);\n  }\n\n  .orders-table th input[type=\"checkbox\"] {\n    transform: scale(1.05);\n  }\n\n  /* Action button look inside table */\n  .orders-table .action-button, .orders-table button[title] {\n    background: transparent;\n    border: 1px solid #e6e6f0;\n    padding: 6px 8px;\n    border-radius: 8px;\n    color: #170d79;\n    cursor: pointer;\n  }\n  .orders-table .action-button:hover, .orders-table button[title]:hover { background:#f3f4ff; transform: translateY(-1px); }\n\n  /* Subrow panel visual improvements */\n  .subrow-column {\n    background-color: #fff;\n    border: 1px solid #f1f3fb;\n    box-shadow: 0 1px 2px rgba(18,24,48,0.04);\n    padding: 14px;\n  }\n\n  .orders-table td.centered {\n    text-align: center;\n  }\n\n  .orders-table td.right-aligned {\n    text-align: right;\n    font-weight: bold;\n  }\n\n  .orders-table td.centered-cell {\n    text-align: center;\n    font-weight: bold;\n  }\n\n  .orders-table td.right-aligned-cell {\n    text-align: right;\n    font-weight: bold;\n  }\n\n  .orders2025 .orders-header.orders2025-header {\n    padding: 0.5em 0 0 !important;\n  }\n\n  .orders2025 .filter-box {\n    margin-top: 0 !important;\n  }\n\n  .orders-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0.5em 0 0.75em;\n  }\n\n  .orders-header .page-title {\n    display: inline-flex;\n    align-items: center;\n    gap: 10px;\n    margin: 0;\n  }\n\n  .total-orders {\n    font-size: 18px;\n    color: #666;\n    text-align: right;\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 5px;\n    margin-top: 20px;\n    position: relative;\n  }\n\n  .rows-per-page {\n    position: absolute;\n    right: 0;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 14px;\n    color: #170d79;\n  }\n\n  .rows-per-page label {\n    font-weight: bold;\n    color: #170d79;\n    font-size: 18px;\n  }\n\n  .rows-per-page select {\n    padding: 8px 12px;\n    border: 1px solid #dfe6fb;\n    border-radius: 6px;\n    font-size: 14px;\n    background-color: white;\n    color: #170d79;\n    cursor: pointer;\n    transition: background-color 0.18s ease, color 0.18s ease, border-color 0.18s ease;\n  }\n\n  .rows-per-page select:hover {\n    background-color: #f0f0f0;\n  }\n\n  .rows-per-page select:focus {\n    outline: none;\n    border-color: #2e2766;\n  }\n\n  .pagination-button {\n    padding: 8px 12px;\n    background-color: var(--app-primary);\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 15px;\n    box-shadow: 0 6px 14px rgba(16,24,64,0.08);\n  }\n\n  .pagination-button:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n\n  .pagination-button:hover:not(:disabled) {\n    background-color: var(--app-primary-dark);\n  }\n\n  .pagination-number {\n    padding: 8px 12px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #fff;\n    color: #202d65;\n    font-size: 16px;\n    cursor: pointer;\n    line-height: 1;\n    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;\n  }\n\n  .pagination-number.active {\n    background-color: var(--app-primary);\n    color: #fff;\n    border-color: var(--app-primary);\n  }\n\n  .pagination-number:hover {\n    background-color: #f3f4f6;\n  }\n\n  .pagination-number.active {\n    background-color: var(--app-primary);\n    color: #fff;\n    border-color: var(--app-primary);\n  }\n\n  .pagination-ellipsis {\n    color: #666;\n    padding: 0 4px;\n  }\n\n  .error-message {\n    color: red;\n    font-weight: bold;\n    margin-top: 20px;\n  }\n\n  .subrow-group {\n    margin-bottom: 10px;\n  }\n\n  .subrow-group h4 {\n    margin: 0;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n  }\n\n  .subrow-details {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    margin-top: 5px;\n  }\n\n  .subrow-item {\n    flex: 1 1 calc(33.333% - 20px);\n    min-width: 200px;\n  }\n\n  .subrow-item.zverejneno-invalid {\n    background-color: lightcoral;\n  }\n\n  .subrow-grid {\n    display: flex;\n    gap: 20px;\n    margin-top: 10px;\n  }\n\n  .subrow-column {\n    flex: 1;\n    background-color: #fff;\n    padding: 12px;\n    border: 1px solid #f1f3fb;\n    border-radius: 8px;\n    box-sizing: border-box;\n  }\n\n  .subrow-column h4 {\n    margin: 0 0 10px;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n  }\n\n  .subrow-item {\n    margin-bottom: 8px;\n    font-size: 14px;\n    color: #222;\n  }\n\n  .subrow-box {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #f9f9f9;\n    margin-top: 10px;\n    text-align: left; /* ensure default left alignment inside subrow area */\n  }\n\n  .subrow-item h4 {\n    margin: 0 0 10px;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n    text-align: left; /* left-align subrow section titles */\n  }\n\n  .subrow-item p {\n    margin: 5px 0;\n    font-size: 14px;\n    color: #333;\n    text-align: left; /* left-align subrow paragraph content */\n  }\n\n  .filter-box {\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    padding: 15px;\n    margin-bottom: 20px;\n    background-color: #f9f9f9;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    box-sizing: border-box;\n  }\n\n  .filter-input-wrapper {\n    position: relative;\n    flex: 1;\n    margin-right: 12px; /* smaller gap so input stretches to selects */\n  }\n\n  .filter-input {\n    width: 100%;\n    padding: 10px 10px 10px 36px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 19.32px;\n    box-sizing: border-box;\n  }\n\n  .search-icon {\n    position: absolute;\n    left: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 16px;\n  }\n\n  .clear-filter-button {\n    position: absolute;\n    right: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: none;\n    border: none;\n    font-size: 16px;\n    color: #666;\n    cursor: pointer;\n    padding: 0;\n  }\n\n  .clear-filter-button:hover {\n    color: #000;\n  }\n\n  .filter-group {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex-shrink: 0;\n  }\n\n  .filter-select {\n    padding: 8px 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 16px;\n    line-height: 1.2;\n    white-space: nowrap;\n    text-align: right;\n    text-align-last: right;\n  }\n\n  .filter-select option {\n    text-align: left;\n  }\n\n  .filter-buttons {\n    display: flex;\n    gap: 10px;\n    margin-right: 20px;\n  }\n\n  .filter-button {\n    padding: 10px 15px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    color: #333;\n    font-size: 14px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, color 0.3s ease;\n  }\n\n  .filter-button:hover {\n    background-color: #e0e0e0;\n  }\n\n  .filter-button.active {\n    background-color: #202d65;\n    color: white;\n    border-color: #170d79;\n  }\n\n  .orders-boxes {\n    display: flex;\n    flex-wrap: nowrap;\n    gap: 12px;\n    margin-bottom: 16px;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    box-sizing: border-box;\n  }\n\n  .orders-box {\n    flex: 1;\n    min-width: 300px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #fff;\n    font-size: 16px;\n    font-weight: bold;\n    text-align: center;\n    box-sizing: border-box;\n    box-shadow: none;\n  }\n\n  .orders-box.stats-box {\n    flex: 0 0 63%;\n    margin-right: 1px;\n  }\n  .orders-box.overview-box {\n    flex: 1 1 auto;\n  }\n\n  .overview-box {\n    background-color: #fff;\n  }\n\n  .stats-box {\n    position: relative;\n    padding: 12px;\n    border: none;\n    border-radius: 10px;\n    background-color: #fff;\n    box-shadow: none;\n    min-height: 210px;\n  }\n\n  .stats-box canvas,\n  .stats-box table {\n    border: none;\n    box-shadow: none;\n  }\n\n  @media (max-width: 768px) {\n    .orders-box {\n      flex: 1 1 100%;\n    }\n  }\n\n  .collapse-line {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 20px;\n    color: #888;\n    font-weight: normal;\n    position: relative;\n  }\n\n  .dashboard-label {\n    font-size: 14px;\n    color: #aaa;\n    font-weight: normal;\n  }\n\n  .collapse-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 16px;\n    color: #aaa;\n    display: flex;\n    align-items: center;\n    transition: color 0.3s ease;\n    position: relative;\n    z-index: 2;\n    pointer-events: auto;\n    padding: 6px 10px; /* bigger hit area */\n    border-radius: 6px;\n  }\n\n  .collapse-button.caret {\n    transition: color .25s ease, transform .25s ease;\n  }\n  .collapse-button.caret svg {\n    transition: transform .25s ease;\n  }\n  /* rotate chevron when expanded (we rely on DOM state replacement, so no extra class; left for potential future) */\n  .collapse-button.caret[title*='Sbalit'] svg {\n    transform: translateY(-1px);\n  }\n\n  .collapse-button:hover {\n    color: #666;\n    background: rgba(0,0,0,0.03);\n  }\n\n  .collapse-button:focus-visible {\n    outline: 2px solid #94a3b8;\n    outline-offset: 2px;\n  }\n\n  .divider-line {\n    flex-grow: 1;\n    border: none;\n    border-top: 1px solid #ddd;\n    margin: 0 10px;\n    pointer-events: none; /* do not block the caret click */\n  }\n\n  .action-icons {\n    display: flex;\n    gap: 5px;\n    justify-content: flex-start; /* align left as requested */\n  }\n\n  .action-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #170d79;\n    font-size: 16px;\n    transition: color 0.3s ease;\n  }\n\n  .action-button:hover {\n    color: #2e2766;\n  }\n\n  .action-button:focus {\n    outline: none;\n  }\n\n  .action-icons button {\n    padding: 0px;\n    margin: 0 1px;\n    border: none;\n    background: none;\n    cursor: pointer;\n  }\n\n  .action-icons button:hover {\n    background-color: #f0f0f0;\n    border-radius: 4px;\n  }\n\n  .action-icons svg {\n    width: 16px;\n    height: 16px;\n    margin: 0;\n    vertical-align: middle;\n  }\n\n  /* View-only mode (disabled actions) revamped */\n  .orders-page.view-only .action-icons.view-only-disabled {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 2px;\n    opacity: 0.55;\n  }\n  .orders-page.view-only .action-icons.view-only-disabled .view-only-text {\n    font-size: 9px;\n    font-weight: 600;\n    letter-spacing: 0.5px;\n    text-transform: uppercase;\n    color: #402080;\n    line-height: 1;\n    pointer-events: none;\n    user-select: none;\n  }\n  .orders-page.view-only .action-icons.view-only-disabled .icons-row {\n    display: flex;\n    gap: 5px;\n    justify-content: center;\n    pointer-events: none; /* block interactions */\n  }\n  .orders-page.view-only .action-icons.view-only-disabled button,\n  .orders-page.view-only .action-icons.view-only-disabled button * {\n    cursor: not-allowed !important;\n  }\n\n  .stats-box h3 {\n    margin-bottom: 20px;\n    font-size: 18px;\n    color: #333;\n    text-align: center;\n  }\n\n  .stats-box canvas {\n    max-width: 100%;\n    height: auto;\n    margin: 0 auto;\n  }\n\n  .chart-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n  }\n\n  .chart-legend {\n    flex: 1;\n    max-width: 200px;\n  }\n\n  .chart-legend ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .chart-legend li {\n    margin-bottom: 10px;\n    font-size: 14px;\n    color: #333;\n  }\n\n  .chart-wrapper {\n    flex: 1 1 520px;\n    max-width: 312px;\n    max-height: 312px;\n    height: 500px;\n    overflow: hidden;\n  }\n\n  .chart-wrapper canvas {\n    max-width: 100%;\n    max-height: 100%;\n    height: 500px;\n  }\n\n  .chart-legend-above {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 10px;\n  }\n\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n\n  .legend-color {\n    width: 15px;\n    height: 15px;\n    border-radius: 3px;\n    display: inline-block;\n    background-color: var(--app-primary);\n  }\n\n  .legend-text {\n    font-size: 18px;\n    font-weight: normal;\n    color: #333;\n    white-space: nowrap;\n  }\n\n  .legend-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    padding: 10px;\n    font-size: 14px;\n    color: #333;\n    margin-top: 20px;\n    align-items: flex-start;\n  }\n\n  .stats-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 20px;\n  }\n\n  .stats-icon {\n    font-size: 24px;\n    color: #170d79;\n  }\n\n  .header-with-icon {\n    display: flex;\n    align-items: center;\n    gap: 20px;\n    margin-bottom: 20px;\n  }\n\n  .header-icon-large {\n    font-size: 28px;\n    color: #170d79;\n  }\n\n  .header-with-icon h1 {\n    font-size: 20px;\n    color: #333;\n    margin: 0;\n  }\n\n  .summary-boxes {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    width: 100%;\n    margin-top: 10px;\n    gap: 12px; /* uniform gap between tiles */\n    align-items: stretch;\n  }\n  /* Make tiles flow left-to-right with consistent sizing; adjust base tile size by screen */\n  @media (min-width: 1400px) {\n    .summary-boxes { gap: 14px; }\n  }\n  @media (max-width: 640px) {\n    .summary-boxes { gap: 10px; }\n  }\n  .summary-box {\n    padding: 14px 16px 16px;\n    border: 1px solid #e3e6ef;\n    border-radius: 10px;\n    background: linear-gradient(180deg,#fafbff 0%, #f3f5fa 100%);\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 12px;\n    text-align: left;\n    position: relative;\n    min-height: 86px;\n    box-shadow: 0 1px 2px rgba(20,24,40,0.05), 0 0 0 1px #e6eaf2;\n    transition: box-shadow .18s ease, transform .18s ease;\n    flex: 1 1 160px; /* allow tiles to grow, shrink, and have a sensible base width */\n    max-width: 1fr; /* let flex determine width; keep consistent flow */\n    box-sizing: border-box;\n  }\n  .summary-box:hover {\n    box-shadow: 0 4px 12px rgba(20,24,40,0.12), 0 0 0 1px #d3d9e4;\n    transform: translateY(-2px);\n  }\n  .summary-box .summary-icon {\n    font-size: 36px; /* slightly reduced for a cleaner look */\n    line-height: 1;\n    margin: 0;\n    flex-shrink: 0;\n    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.08));\n  }\n  /* Vnitn textov blok  dodaten padding aby text nepsobil namakan */\n  .summary-box .summary-icon + div {\n    padding: 2px 0 0;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    flex: 1;\n  }\n  .summary-box h3 {\n    margin: 0;\n    font-size: 11px;\n    letter-spacing: .55px;\n    font-weight: 600;\n    text-transform: uppercase;\n    color: #4a4f5e;\n    line-height: 1.15;\n    white-space: nowrap;\n  }\n  .summary-box p {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 700;\n    color: #12141a;\n    line-height: 1.1;\n    letter-spacing: .25px;\n  }\n  /* Make the total price tile visually prominent but not overly wide */\n  .summary-box.total-price {\n    /* align with flex tiles: slightly larger growth so it becomes a bit more prominent */\n    flex: 1.5 1 220px; /* grow more than others but still respect shrinking */\n    max-width: 520px;\n    min-width: 200px;\n    justify-content: center; /* center icon + text horizontally for nicer look */\n    gap: 14px;\n  }\n  /* Only allow spanning multiple columns on very wide screens where there's room */\n  @media (min-width: 1400px) {\n    .summary-box.total-price { grid-column: span 2; }\n  }\n  @media (max-width: 900px) {\n    .summary-box.total-price { max-width: none; min-width: 140px; justify-content: flex-start; }\n  }\n  /* Prevent price overflow: allow wrapping and scale long numbers */\n  .summary-box.total-price p {\n    white-space: normal; /* allow wrap */\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: block;\n    font-size: 18px; /* base */\n    text-align: center;\n  }\n  /* If the number becomes very long, reduce font-size slightly to keep it in the tile */\n  .summary-box.total-price p.long-number {\n    font-size: 15px;\n    line-height: 1.05;\n  }\n  .summary-box small { display:block; font-size:11px; color:#6b7280; margin-top:2px; }\n\n  .floating-add-button {\n    position: fixed;\n    bottom: 60px;\n    right: 20px;\n    background-color: rgba(63, 61, 158, 0.6);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    font-size: 24px;\n    z-index: 1000;\n    transition: background-color 0.3s ease;\n  }\n\n  .floating-add-button:hover {\n    background-color: rgba(63, 61, 158, 0.8);\n  }\n\n  .floating-add-button::after {\n    position: absolute;\n    bottom: 70px;\n    right: 50%;\n    transform: translateX(50%);\n    background-color: #333;\n    color: white;\n    padding: 5px 10px;\n    border-radius: 5px;\n    font-size: 12px;\n    white-space: nowrap;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 0.3s ease, visibility 0.3s ease;\n  }\n\n  .floating-add-button:hover::after {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  .tabs {\n    display: flex;\n    justify-content: flex-start;\n    gap: 10px;\n    margin-bottom: 20px;\n  }\n\n  .tab-button {\n    padding: 7px 15px; /* ~25% mn */\n    border: 1px solid #ddd;\n    border-radius: 5px 5px 0 0;\n    background-color: #f9f9f9;\n    color: #333;\n    cursor: pointer;\n    font-size: 15px; /* z 20px na 15px (-25%) */\n    line-height: 1.25;\n    transition: background-color 0.25s ease, color 0.25s ease;\n  }\n\n  .tab-button.active {\n    background-color: #202d65;\n    color: white;\n    border-bottom: none;\n  }\n\n  .tab-button:hover:not(.active) {\n    background-color: #e0e0e0;\n  }\n\n  .tab-content {\n    padding: 20px;\n    border-radius: 0 5px 5px 5px;\n    background-color: #fff;\n  }\n\n  .empty-tab-content {\n    text-align: center;\n    color: #666;\n    font-size: 14px;\n  }\n\n  .legend-chart-container {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    align-items: flex-start;\n  }\n\n  @media (max-width: 768px) {\n    .legend-chart-container {\n      flex-direction: column;\n      align-items: center;\n    }\n\n    .chart-wrapper {\n      max-width: 300px;\n      max-height: 300px;\n    }\n  }\n\n  input,\n  select,\n  textarea {\n    height: 40px;\n    font-size: 16px;\n    box-sizing: border-box;\n  }\n\n  input[type=\"date\"],\n  input[type=\"text\"] {\n    height: 40px;\n    font-size: 16px;\n    box-sizing: border-box;\n  }\n\n  .refresh-icon {\n    margin-left: 10px;\n    color: #4caf50;\n    cursor: pointer;\n    transition: transform 0.3s ease, color 0.3s ease;\n  }\n\n  .refresh-icon:hover {\n    color: #388e3c;\n    transform: rotate(360deg);\n  }\n\n  .modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: rgba(0, 0, 0, 0.4);\n    z-index: 1000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .modal-content {\n    background: #fff;\n    max-width: 1100px;\n    width: 95vw;\n    min-width: 350px;\n    max-height: 95vh;\n    overflow: auto;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    box-shadow: 0 2px 24px rgba(0, 0, 0, 0.25);\n  }\n\n  .floating-add-button {\n    position: fixed;\n    bottom: 32px;\n    right: 32px;\n    background: #4f46e5;\n    color: #fff;\n    border: none;\n    border-radius: 50%;\n    width: 56px;\n    height: 56px;\n    font-size: 2rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    cursor: pointer;\n    transition: background 0.2s;\n    z-index: 1100;\n  }\n  .floating-add-button:hover {\n    background: #3730a3;\n  }\n\n  .modal-content button[title=\"Zavt\"] {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    background: transparent;\n    border: none;\n    font-size: 2rem;\n    color: #666;\n    cursor: pointer;\n    transition: color 0.2s;\n  }\n  .modal-content button[title=\"Zavt\"]:hover {\n    color: #222;\n  }\n\n  .progress-bar-container {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  .progress-bar-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 5px;\n    background-color: #e0e0e0;\n    z-index: 1000;\n  }\n\n  .progress-bar {\n    height: 100%;\n    background-color: #4caf50;\n    transition: width 0.3s ease-in-out;\n  }\n\n  .statistics-container table {\n    width: 100%;\n    border-collapse: separate;\n    border-spacing: 0 6px; /* space between rows for card effect */\n  }\n  .statistics-container thead th {\n    background: #f4f6f9;\n    font-weight: 600;\n    font-size: 12px;\n    text-transform: uppercase;\n    letter-spacing: .5px;\n    padding: 8px 10px;\n    color: #334155;\n    position: sticky;\n    top: 0;\n    z-index: 2;\n    border-bottom: 1px solid #e2e8f0;\n  }\n  .statistics-container tbody tr {\n    background: #ffffff;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.05), 0 0 0 1px #e5e7eb;\n    transition: box-shadow .15s ease, transform .15s ease;\n  }\n  .statistics-container tbody tr:hover {\n    box-shadow: 0 4px 10px rgba(0,0,0,0.08), 0 0 0 1px #cbd5e1;\n  }\n  .statistics-container tbody td {\n    padding: 6px 10px;\n    font-size: 14px;\n    border-top: 1px solid #f1f5f9;\n  }\n  .statistics-container tbody td:first-of-type {\n    /* remove left accent for cleaner look */\n    border-left: none;\n    border-radius: 4px 0 0 4px;\n  }\n  .statistics-container tbody td:last-of-type {\n    border-radius: 0 4px 4px 0;\n  }\n  .statistics-container tbody tr + tr td:first-of-type {\n    border-top: 1px solid #f1f5f9;\n  }\n  .statistics-container .sub-table-wrapper {\n    background: #fafafa;\n    margin: 2px 0 4px 0;\n    padding: 6px 8px 8px 18px; /* reduced left indent */\n    border-left: none; /* removed blue bar */\n    border-radius: 4px;\n  }\n  .statistics-container .sub-table-wrapper table {\n    border-spacing: 0;\n    width: 100%;\n  }\n  .statistics-container .sub-table-wrapper td {\n    background: transparent;\n    box-shadow: none;\n    padding: 4px 6px;\n    font-size: 13px;\n  }\n  .statistics-container .sub-table-wrapper tr td:first-of-type {\n    padding-left: calc(150px + 10px); /* align with LP column under main header (Pkazce ~150px + gap) */\n  }\n  .statistics-container .value-positive { color: #059669; font-weight: 600; }\n  .statistics-container .value-negative { color: #dc2626; font-weight: 600; }\n  .statistics-container .lp-code { font-weight: 600; color: #334155; }\n  .statistics-container .lp-account { color: #64748b; font-size: 11px; }\n  .statistics-container .lp-sub-first {\n    padding-left: calc(150px + 30px); /* align under LP column (expander ~30 + Pkazce 150) */\n    text-align: left;\n  }\n  .statistics-container .lp-sub-row td { background: #ffffff; font-size: 13px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty { background: #f5f7fa; width: 30px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty + td.lp-sub-empty { width:150px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty + td.lp-sub-empty + td.lp-sub-empty { width:100px; }\n  .statistics-container .lp-sub-row td.lp-sub-lp { font-weight: 600; color: #334155; background:#ffffff; }\n`;\n\nexport const OrdersPageStyles = () => <Global styles={styles} />;\n","import React, { useState, useEffect, useContext, useCallback, useRef } from 'react'; // Import useContext\nimport { getOrderById, getOrderTypes, getGarants, getAttachments } from '../services/apiv2'; // Import getAttachments function\nimport { getErrorCodeCZ } from '../services/api2auth';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUpload, faCalculator } from '@fortawesome/free-solid-svg-icons';\nimport { css } from '@emotion/react';\nimport { AuthContext } from '../context/AuthContext'; // Import AuthContext\n\nconst OrderFormTabs = ({ orderId, onClose }) => {\n  const { token, fullName } = useContext(AuthContext); // Retrieve token and fullName from global context\n  const [activeTab, setActiveTab] = useState('order');\n  const [formData, setFormData] = useState({}); // Initialize as an empty object to avoid null errors\n  const [error, setError] = useState(null);\n  const [orderTypes, setOrderTypes] = useState([]);\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [garants, setGarants] = useState([]);\n  const [attachments, setAttachments] = useState([]);\n  const [attachmentsLoading, setAttachmentsLoading] = useState(false);\n  const [attachmentsError, setAttachmentsError] = useState(null);\n  const memoryCache = useRef({}); // Memory cache for fetched data\n\n  const formatFileSize = (size) => {\n    if (size < 1024) return `${size} B`;\n    if (size < 1024 * 1024) return `${(size / 1024).toFixed(2)} KB`;\n    return `${(size / (1024 * 1024)).toFixed(2)} MB`;\n  };\n\n  const generateSafeFilename = (originalName) => {\n    const timestamp = Date.now(); // Add a timestamp for uniqueness\n    const normalized = originalName\n      .toLowerCase()\n      .normalize('NFD') // Decompose diacritics\n      .replace(/[\\u0300-\\u036f]/g, '') // Remove diacritic marks\n      .replace(/[^a-z0-9.]/g, '-') // Replace non-alphanumeric characters with hyphens\n      .replace(/-+/g, '-') // Replace multiple hyphens with a single hyphen\n      .replace(/^-|-$/g, ''); // Remove leading or trailing hyphens\n    const extension = originalName.split('.').pop(); // Extract file extension\n    return `${normalized}-${timestamp}.${extension}`;\n  };\n\n  const handleFileUpload = (e) => {\n    const files = Array.from(e.target.files);\n    const newFiles = files.map((file) => {\n      const safeFilename = generateSafeFilename(file.name);\n  // debug: filename mapping omitted in production\n      return { file, description: file.name, safeFilename };\n    });\n    setUploadedFiles((prevFiles) => [...prevFiles, ...newFiles]);\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.dataTransfer.dropEffect = 'copy';\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const files = Array.from(e.dataTransfer.files);\n    const newFiles = files.map((file) => {\n      const safeFilename = generateSafeFilename(file.name);\n  // debug: filename mapping omitted in production\n      return { file, description: file.name, safeFilename };\n    });\n    setUploadedFiles((prevFiles) => [...prevFiles, ...newFiles]);\n  };\n\n  const handleDescriptionChange = (index, value) => {\n    setUploadedFiles((prevFiles) =>\n      prevFiles.map((file, i) =>\n        i === index ? { ...file, description: value } : file\n      )\n    );\n  };\n\n  const handleRemoveFile = (index) => {\n    setUploadedFiles((prevFiles) => prevFiles.filter((_, i) => i !== index));\n  };\n\n  const handleFileClick = (file) => {\n    const fileURL = URL.createObjectURL(file);\n    window.open(fileURL, '_blank');\n  };\n\n  const handlePriceChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({ ...prevData, [name]: value })); // Directly set the value without formatting\n  };\n\n  const calculatePriceWithVAT = (priceWithoutVAT) => {\n    const numericValue = parseFloat(priceWithoutVAT.replace(',', '.')) || 0; // Convert to a number\n    const priceWithVAT = Math.round(numericValue * 1.21); // Multiply by 1.21 and round to the nearest integer\n    return priceWithVAT.toString().replace('.', ','); // Return as a string\n  };\n\n  const calculatePriceWithoutVAT = (priceWithVAT) => {\n    const numericValue = parseFloat(priceWithVAT.replace(',', '.')) || 0; // Convert to a number\n    const priceWithoutVAT = Math.round(numericValue / 1.21); // Divide by 1.21 and round to the nearest integer\n    return priceWithoutVAT.toString().replace('.', ','); // Return as a string\n  };\n\n  const handleCalculatePriceWithVAT = () => {\n    const updatedPriceWithVAT = calculatePriceWithVAT(formData.cena);\n    setFormData((prevData) => ({ ...prevData, cena_rok: updatedPriceWithVAT }));\n  };\n\n  const handleCalculatePriceWithoutVAT = () => {\n    const updatedPriceWithoutVAT = calculatePriceWithoutVAT(formData.cena_rok);\n    setFormData((prevData) => ({ ...prevData, cena: updatedPriceWithoutVAT }));\n  };\n\n  const formatDateForInput = (dateString) => {\n    if (!dateString || dateString === '00.00.0000') return ''; // Handle invalid or empty dates\n    const [day, month, year] = dateString.split('.');\n    return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`; // Format as YYYY-MM-DD\n  };\n\n  useEffect(() => {\n    const fetchOrderData = async () => {\n      try {\n        // Check if the order data is already in the memory cache\n        if (memoryCache.current[orderId]) { setFormData(memoryCache.current[orderId]); return; }\n\n        const data = orderId\n          ? await getOrderById({ id: orderId, token }) // Use token from context\n          : {};\n\n  // fetched order data (debug log removed)\n\n        // Access data[0] and format the fields\n        const formattedData = {\n          partner_nazev: data[0]?.partner_nazev || '', // Populate only partner fields\n          partner_adresa: data[0]?.partner_adresa || '',\n          partner_ic: data[0]?.partner_ic || '',\n          poznamka: data[0]?.evidencni_c ? `Evidenn slo: ${data[0].evidencni_c}` : '', // Move evidencni_c to poznamka\n          datum_p: formatDateForInput(data[0]?.datum_p),\n          cena: data[0]?.cena || '0',\n          cena_rok: data[0]?.cena_rok || '0',\n          druh_sml: data[0]?.druh_sml || '', // Ensure druh_sml name is set correctly\n          obsah: data[0]?.obsah || '',\n          tt_vyrc: data[0]?.tt_vyrc || '',\n          tt_dinfo: data[0]?.tt_dinfo || '',\n          zverejnit: data[0]?.zverejnit === 'Ano', // Convert to boolean for checkbox\n          dt_zverejneni: formatDateForInput(data[0]?.dt_zverejneni),\n          idds: data[0]?.idds || '',\n          garant: data[0]?.garant || '', // Ensure garant name is set correctly\n          evidencni_c: data[0]?.evidencni_c || '', // Add evidenn slo\n          userCreator: data[0]?.userCreator || 'Neznm uivatel', // Add creator's name\n          faktura: data[0]?.faktura === 'Ano', // Convert to boolean for checkbox\n          pokladni_dok: data[0]?.pokladni_dok === 'Ano', // Convert to boolean for checkbox\n        };\n\n        memoryCache.current[orderId] = formattedData; // Cache the fetched data\n  // cached order data (debug log removed)\n        setFormData(formattedData);\n\n        if (orderId) {\n          localStorage.setItem('orderData', JSON.stringify(data));\n        }\n\n  // saved order data to localStorage (debug log removed)\n      } catch (err) {\n        // Normalize server errors to a consistent Czech message, otherwise show a local fallback\n        try {\n          const code = getErrorCodeCZ(err) || '';\n          if (code === 'chyba_serveru' || code === 'server_error') {\n            setError('Chyba na serveru. Zkuste to prosm pozdji.');\n          } else {\n            setError('Nepodailo se nast data objednvky.');\n          }\n        } catch (e) {\n          setError('Nepodailo se nast data objednvky.');\n        }\n      }\n    };\n\n  fetchOrderData();\n\n    const fetchOrderTypes = async () => {\n      try {\n        const types = await getOrderTypes({ token }); // Use token from context\n        if (Array.isArray(types)) {\n          setOrderTypes(types);\n        } else {\n          setOrderTypes([]);\n        }\n      } catch (err) {\n        setOrderTypes([]);\n      }\n    };\n\n    const fetchGarants = async () => {\n      try {\n        const data = await getGarants({ token }); // Use token from context\n        setGarants(data || []);\n      } catch (error) {\n        try {\n          const code = getErrorCodeCZ(error) || '';\n          if (code === 'chyba_serveru' || code === 'server_error') {\n            setError('Chyba na serveru. Zkuste to prosm pozdji.');\n          } else {\n            setError('Nepodailo se nast garanty.');\n          }\n        } catch (e) {\n          setError('Nepodailo se nast garanty.');\n        }\n      }\n    };\n\n    fetchOrderTypes(); // Fetch order types on component mount\n    fetchGarants(); // Fetch garants on component mount\n  }, [orderId, token, formData]); // Add token as a dependency\n\n  const fetchRemoteFileSize = useCallback(async (url) => {\n    try {\n      const response = await fetch(url, { method: 'HEAD' });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const contentLength = response.headers.get('Content-Length');\n      return contentLength ? parseInt(contentLength, 10) : 0; // Return size in bytes or 0 if unavailable\n    } catch (error) {\n      return 0; // Return 0 in case of an error\n    }\n  }, []);\n\n  const getAttachmentUrl = useCallback((filename) => {\n    // Pro star objednvky ped 2026 pouvme pvodn eeo.zachranka.cz URL\n    const baseUrl = process.env.REACT_APP_LEGACY_ATTACHMENTS_BASE_URL || 'https://eeo.zachranka.cz/prilohy/';\n    return `${baseUrl}${filename}`;\n  }, []);\n\n  const updateAttachmentSizes = useCallback(async () => {\n    const updatedAttachments = await Promise.all(\n      attachments.map(async (attachment) => {\n        const url = getAttachmentUrl(attachment.soubor);\n        const size = await fetchRemoteFileSize(url);\n        return { ...attachment, size };\n      })\n    );\n    setAttachments(updatedAttachments);\n  }, [attachments, getAttachmentUrl, fetchRemoteFileSize]);\n\n  useEffect(() => {\n    const fetchAttachments = async () => {\n      if (!orderId) return; // Skip fetching if no orderId is provided\n      setAttachmentsLoading(true);\n      setAttachmentsError(null);\n      try {\n        const data = await getAttachments({ id: orderId, token });\n        setAttachments(data || []);\n      } catch (error) {\n        setAttachmentsError('Nepodailo se nast plohy.');\n      } finally {\n        setAttachmentsLoading(false);\n      }\n    };\n\n    fetchAttachments();\n  }, [orderId, token]); // Fetch attachments when orderId or token changes\n\n  useEffect(() => {\n    if (attachments.length > 0) {\n      updateAttachmentSizes();\n    }\n  }, [attachments, updateAttachmentSizes]);\n\n  useEffect(() => {\n    if (orderId == null) { // Explicitly check for null or undefined\n      const currentDate = new Date();\n      const formattedDate = currentDate.toISOString().split('T')[0]; // Format as YYYY-MM-DD for date input\n      setFormData((prevData) => ({\n        ...prevData,\n        datum_p: formattedDate,\n        cena: '0', // Ensure default value for new orders\n        cena_rok: '0', // Ensure default value for new orders\n        userCreator: fullName || 'Neznm uivatel', // Use fullName from context\n      }));\n    }\n  }, [orderId, fullName]); // Add fullName as a dependency\n\n  useEffect(() => { // Fix typo: useEfect -> useEffect\n    if (orderId) {\n      setFormData((prevData) => ({\n        ...prevData,\n        cena: prevData.cena || '0', // Default to 0\n        cena_rok: prevData.cena_rok || '0', // Default to 0\n      }));\n    }\n  }, [orderId]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({ ...prevData, [name]: value }));\n  };\n\n  const handleCheckboxChange = (e) => {\n    const { name, checked } = e.target;\n    setFormData((prevData) => ({ ...prevData, [name]: checked ? 'Ano' : 'Ne' }));\n  };\n\n  const handleSelectChange = (e) => {\n    const selectedName = e.target.value;\n    setFormData((prevData) => ({ ...prevData, druh_sml: selectedName })); // Update druh_sml name in formData\n  };\n\n  const handleGarantChange = (e) => {\n    const selectedName = e.target.value;\n    setFormData((prevData) => ({ ...prevData, garant: selectedName })); // Update garant name in formData\n  };\n\n  const handleTabChange = (tab) => {\n    setActiveTab(tab);\n  };\n\n  const handleRemoveFetchedAttachment = (attachmentId) => {\n    setAttachments((prevAttachments) =>\n      prevAttachments.map((attachment) =>\n        attachment.id === attachmentId\n          ? { ...attachment, markedForDeletion: !attachment.markedForDeletion }\n          : attachment\n      )\n    );\n  };\n\n  const handleFetchedDescriptionChange = (attachmentId, value) => {\n    setAttachments((prevAttachments) =>\n      prevAttachments.map((attachment) =>\n        attachment.id === attachmentId ? { ...attachment, popis: value } : attachment\n      )\n    );\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const attachmentsToDelete = attachments\n      .filter((attachment) => attachment.markedForDeletion)\n      .map((attachment) => attachment.id);\n  // debug: attachments deletion and submit events (logs removed)\n    // Add logic to save the form data and handle removed attachments\n    onClose();\n  };\n\n  if (error) {\n    return <div className=\"error-message\">{error}</div>;\n  }\n\n  // Emotion styles migrated from OrderFormTabs.css\n  const modalOverlay = css`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n  `;\n  const modalContent = css`\n    background-color: #fff;\n    border-radius: 10px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    width: 70%;\n    max-width: 900px;\n    max-height: 90%;\n    overflow-y: auto;\n    padding: 20px;\n    position: relative;\n    /* Posun pod fixn hlaviku (+ menu). Pouij globln promnnou, fallback ~96+48 = 144px */\n  /* Posun zvten o ~3em aby hlavika formule nebyla v kolizi s menu */\n  /* Posun zvten jet o +1em (pvodn +3em) na dost: vce prostoru pod fixn hlavikou */\n  margin-top: calc(var(--app-fixed-offset, 144px) + 4em);\n  `;\n  const modalHeader = css`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n    position: relative;\n    h2 {\n      margin: 0;\n      color: #3f3688;\n      font-size: 18px;\n    }\n  `;\n  const closeButton = css`\n    background: none;\n    border: none;\n    font-size: 20px;\n    cursor: pointer;\n    color: #f44336;\n    &:hover {\n      color: #d32f2f;\n    }\n  `;\n  const tabs = css`\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 20px;\n  `;\n  const tabButton = css`\n    flex: 1;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    cursor: pointer;\n    text-align: center;\n    transition: background-color 0.3s ease;\n    font-size: 16px;\n    &.active {\n      background-color: #3f3688;\n      color: #fff;\n    }\n  `;\n  const tabContent = css`\n    margin-bottom: 20px;\n  `;\n  const blockTitle = css`\n    font-size: 18px;\n    font-weight: bold;\n    color: #3f3688;\n    margin-bottom: 10px;\n    text-align: left;\n  `;\n  const formBlock = css`\n    margin-bottom: 20px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #f9f9f9;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  `;\n  const flexRow = css`\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n  `;\n  const flexItem = css`\n    flex: 1 1 auto;\n    min-width: 150px;\n    &.narrow {\n      flex: 1 1 30%;\n      min-width: 150px;\n    }\n  `;\n  const modernLabel = css`\n    display: block;\n    margin-bottom: 15px;\n    font-size: 16px;\n    font-weight: bold;\n    color: #333;\n  `;\n  const modernInput = css`\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 14px;\n    box-sizing: border-box;\n    background-color: #fff;\n    transition: border-color 0.3s ease, box-shadow 0.3s ease;\n    &:focus {\n      outline: none;\n      border-color: #3f3688;\n      box-shadow: 0 0 5px rgba(63, 54, 136, 0.5);\n    }\n  `;\n  const priceInput = css`\n    text-align: right;\n  `;\n  const formActions = css`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 1%;\n  `;\n  const actionButtons = css`\n    display: flex;\n    gap: 1%;\n  `;\n  const creatorInfo = css`\n    font-size: 14px;\n    color: #666;\n  `;\n  const dragDropArea = css`\n    border: 2px dashed #ddd;\n    border-radius: 5px;\n    padding: 20px;\n    text-align: center;\n    color: #666;\n    background-color: #f9f9f9;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n    &:hover {\n      background-color: #e0e0e0;\n    }\n    &:active {\n      background-color: #d0d0d0;\n    }\n  `;\n  const uploadedFilesStyle = css`\n    margin-top: 20px;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    h4 {\n      margin-bottom: 10px;\n      font-size: 16px;\n      color: #3f3688;\n    }\n  `;\n  const fileItem = css`\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 10px;\n    &.marked-for-deletion {\n      background-color: #ffe6e6;\n      border: 1px solid #ffcccc;\n      .file-name {\n        color: gray;\n        text-decoration: line-through;\n      }\n      .remove-file-button {\n        background-color: green;\n        color: white;\n        &:hover {\n          background-color: #006400;\n        }\n      }\n    }\n  `;\n  const fileStatusIcon = css`\n    font-size: 16px;\n    font-weight: bold;\n  `;\n  const fileName = css`\n    flex: 1;\n    font-size: 14px;\n    color: #333;\n    &.clickable {\n      color: #3f3688;\n      text-decoration: underline;\n      cursor: pointer;\n      &:hover {\n        color: #2e2766;\n      }\n    }\n  `;\n  const fileSize = css`\n    font-size: 12px;\n    color: #666;\n    margin-left: 5px;\n  `;\n  const fileDescriptionInput = css`\n    flex: 2;\n    padding: 8px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 14px;\n  `;\n  const removeFileButton = css`\n    padding: 5px 10px;\n    background-color: #f44336;\n    color: #fff;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 14px;\n    &:hover {\n      background-color: #d32f2f;\n    }\n  `;\n  const fileUploadButton = css`\n    display: inline-flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 20px;\n    background-color: #3f3688;\n    color: #fff;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n    font-weight: bold;\n    transition: background-color 0.3s ease, box-shadow 0.3s ease;\n    position: relative;\n    overflow: hidden;\n    &:hover {\n      background-color: #2e2766;\n      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    }\n    .upload-icon {\n      font-size: 18px;\n    }\n    .file-input {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n      cursor: pointer;\n    }\n  `;\n  const fileUploadWrapper = css`\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 10px;\n  `;\n  return (\n    <div css={modalOverlay}>\n      <div css={modalContent}>\n        <div css={modalHeader}>\n          <h2>{orderId ? 'Editace objednvky' : 'Pidat objednvku'}</h2>\n          {formData.evidencni_c && (\n            <span css={css`color: green; font-size: 1.2em; font-weight: bold; margin-left: auto;`}>\n              {formData.evidencni_c}\n            </span>\n          )}\n          <button css={closeButton} onClick={onClose}></button>\n        </div>\n        <div css={tabs}>\n          <button\n            css={[tabButton, activeTab === 'order' && css`.active`]}\n            className={activeTab === 'order' ? 'active' : ''}\n            onClick={() => handleTabChange('order')}\n          >\n            Objednvka\n          </button>\n          <button\n            css={[tabButton, activeTab === 'technical' && css`.active`]}\n            className={activeTab === 'technical' ? 'active' : ''}\n            onClick={() => handleTabChange('technical')}\n          >\n            Ostatn informace\n          </button>\n          <button\n            css={[tabButton, activeTab === 'attachments' && css`.active`]}\n            className={activeTab === 'attachments' ? 'active' : ''}\n            onClick={() => handleTabChange('attachments')}\n          >\n            Plohy\n          </button>\n        </div>\n        <form onSubmit={handleSubmit}>\n          {activeTab === 'order' && (\n            <div css={tabContent}>\n              <div css={formBlock}>\n                <h4 css={blockTitle}>Objednvka</h4>\n                <div css={flexRow}>\n                  <label css={[flexItem, css`.narrow`]}>Datum:\n                    <input\n                      type=\"date\"\n                      name=\"datum_p\"\n                      value={formData.datum_p || ''}\n                      onChange={handleInputChange}\n                      css={modernInput}\n                    />\n                  </label>\n                  <label css={[flexItem, css`.narrow`]}>Cena bez DPH:\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1%' }}>\n                      <input\n                        type=\"text\"\n                        name=\"cena\"\n                        value={formData.cena || ''}\n                        onChange={handlePriceChange}\n                        css={[modernInput, priceInput]}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={handleCalculatePriceWithVAT}\n                        style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#3f3688' }}\n                        title=\"Vypotat cenu s DPH\"\n                      >\n                        <FontAwesomeIcon icon={faCalculator} />\n                      </button>\n                    </div>\n                  </label>\n                  <label css={[flexItem, css`.narrow`]}>Cena s DPH:\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '1%' }}>\n                      <input\n                        type=\"text\"\n                        name=\"cena_rok\"\n                        value={formData.cena_rok || ''}\n                        onChange={handlePriceChange}\n                        css={[modernInput, priceInput]}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={handleCalculatePriceWithoutVAT}\n                        style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#3f3688' }}\n                        title=\"Vypotat cenu bez DPH\"\n                      >\n                        <FontAwesomeIcon icon={faCalculator} />\n                      </button>\n                    </div>\n                  </label>\n                </div>\n                <div css={flexRow}>\n                  {/* Faktura */}\n                  <div css={[flexItem, css`.narrow`]}>\n                    <label htmlFor=\"faktura\">Faktura</label>\n                    <input\n                      type=\"checkbox\"\n                      id=\"faktura\"\n                      name=\"faktura\"\n                      checked={formData.faktura|| false}\n                      onChange={handleCheckboxChange}\n                    />\n                  </div>\n                  {/* Pokladn doklad */}\n                  <div css={[flexItem, css`.narrow`]}>\n                    <label htmlFor=\"pokladni_dok\">Pokl.doklad</label>\n                    <input\n                      type=\"checkbox\"\n                      id=\"pokladni_dok\"\n                      name=\"pokladni_dok\"\n                      checked={formData.pokladni_dok|| false}\n                      onChange={handleCheckboxChange}\n                    />\n                  </div>\n                  {/* Garant */}\n                  <div css={[flexItem, css`.narrow`]}>\n                    <label htmlFor=\"garant\">Garant</label>\n                    <select\n                      id=\"garant\"\n                      name=\"garant\"\n                      value={formData.garant || ''}\n                      onChange={handleGarantChange}\n                      css={modernInput}\n                      className=\"select-with-arrow\"\n                      style={{ width: '250px', paddingRight: '1.75rem' }}\n                    >\n                      <option value=\"\">Vyberte garanta</option>\n                      {garants.map((garant) => (\n                        <option key={garant.id} value={garant.garant}>\n                          {garant.garant}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n              <div css={formBlock}>\n                <h4 css={blockTitle}>Informace o partnerovi</h4>\n                <label css={modernLabel}>Obchodn jmno:\n                  <input\n                    type=\"text\"\n                    name=\"partner_nazev\"\n                    value={formData.partner_nazev || ''}\n                    onChange={handleInputChange}\n                    css={modernInput}\n                  />\n                </label>\n                <label css={modernLabel}>Adresa:\n                  <input\n                    type=\"text\"\n                    name=\"partner_adresa\"\n                    value={formData.partner_adresa || ''}\n                    onChange={handleInputChange}\n                    css={modernInput}\n                  />\n                </label>\n                <label css={modernLabel}>I:\n                  <input\n                    type=\"text\"\n                    name=\"partner_ic\"\n                    value={formData.partner_ic || ''}\n                    onChange={handleInputChange}\n                    css={modernInput}\n                  />\n                </label>\n              </div>\n              <div css={formBlock}>\n                <h4 css={blockTitle}>Registr smluv</h4>\n                <div css={css`display: flex; flex-wrap: wrap; gap: 20px;`}>\n                  <label css={css`display: flex; align-items: center; gap: 10px; font-size: 16px;`}>Zveejnit:\n                    <input\n                      type=\"checkbox\"\n                      name=\"zverejnit\"\n                      checked={formData.zverejnit || false}\n                      onChange={handleCheckboxChange}\n                      css={modernInput}\n                    />\n                  </label>\n                  <label>Datum zveejnn:\n                    <input\n                      type=\"date\"\n                      name=\"dt_zverejneni\"\n                      value={formData.dt_zverejneni || ''}\n                      onChange={handleInputChange}\n                      css={modernInput}\n                    />\n                  </label>\n                  <label>Identifiktor:\n                    <input\n                      type=\"text\"\n                      name=\"idds\"\n                      value={formData.idds || ''}\n                      onChange={handleInputChange}\n                      css={modernInput}\n                    />\n                  </label>\n                </div>\n              </div>\n            </div>\n          )}\n          {activeTab === 'technical' && (\n            <div css={tabContent}>\n              <h3>Ostatn informace</h3>\n              <div css={formBlock}>\n                <label css={modernLabel}>Druh:\n                  <select\n                    name=\"druh_sml\"\n                    value={formData.druh_sml || ''}\n                    onChange={handleSelectChange}\n                    css={modernInput}\n                    className=\"select-with-arrow\"\n                    style={{ paddingRight: '1.75rem' }}\n                  >\n                    <option value=\"\">Vyberte druh</option>\n                    {orderTypes.map((type) => (\n                      <option key={type.id} value={type.druh}>\n                        {type.druh}\n                      </option>\n                    ))}\n                  </select>\n                </label>\n                <label css={modernLabel}>Obsah:\n                  <textarea\n                    name=\"obsah\"\n                    value={formData.obsah || ''}\n                    onChange={handleInputChange}\n                    rows=\"2\"\n                    css={css`\n                      font-size: 14px;\n                      line-height: 1.5;\n                      resize: vertical;\n                      background-color: #fff;\n                      height: auto;\n                      width: 100%;\n                      padding: 8px;\n                      border: 1px solid #ddd;\n                      border-radius: 5px;\n                    `}\n                  />\n                </label>\n                <label css={modernLabel}>Poznmka:\n                  <textarea\n                    name=\"poznamka\"\n                    value={formData.poznamka || ''}\n                    onChange={handleInputChange}\n                    rows=\"2\"\n                    css={css`\n                      font-size: 14px;\n                      line-height: 1.5;\n                      resize: vertical;\n                      background-color: #fff;\n                      height: auto;\n                      width: 100%;\n                      padding: 8px;\n                      border: 1px solid #ddd;\n                      border-radius: 5px;\n                    `}\n                  />\n                </label>\n              </div>\n              <div css={formBlock}>\n                <h4 css={blockTitle}>Transportn technika</h4>\n                <div css={flexRow}>\n                  <label css={[flexItem, css`.narrow`, modernLabel]}>Vrobn slo:\n                    <input\n                      type=\"text\"\n                      name=\"tt_vyrc\"\n                      value={formData.tt_vyrc || ''}\n                      onChange={handleInputChange}\n                      css={modernInput}\n                    />\n                  </label>\n                  <label css={[flexItem, css`.narrow`, modernLabel]}>Dodaten informace:\n                    <input\n                      type=\"text\"\n                      name=\"tt_dinfo\"\n                      value={formData.tt_dinfo || ''}\n                      onChange={handleInputChange}\n                      css={modernInput}\n                    />\n                  </label>\n                </div>\n              </div>\n            </div>\n          )}\n          {activeTab === 'attachments' && (\n            <div css={tabContent}>\n              <h3>Plohy</h3>\n              <div css={formBlock}>\n                <div\n                  css={dragDropArea}\n                  onDragOver={handleDragOver}\n                  onDrop={handleDrop}\n                >\n                  Pethnte soubory sem\n                </div>\n                <div css={fileUploadWrapper}>\n                  <button css={fileUploadButton}>\n                    <FontAwesomeIcon icon={faUpload} className=\"upload-icon\" />\n                    Vyberte soubor\n                    <input\n                      type=\"file\"\n                      multiple\n                      onChange={handleFileUpload}\n                      className=\"file-input\"\n                    />\n                  </button>\n                </div>\n                {uploadedFiles.length > 0 && (\n                  <div css={uploadedFilesStyle}>\n                    <h4>Seznam nov pipojench ploh</h4>\n                    {uploadedFiles.map((fileObj, index) => (\n                      <div key={index} css={fileItem}>\n                        <span\n                          css={[fileName, css`.clickable`]}\n                          onClick={() => handleFileClick(fileObj.file)}\n                          title=\"Kliknte pro oteven\"\n                        >\n                          {fileObj.file.name}\n                        </span>\n                        <span css={fileSize}>({formatFileSize(fileObj.file.size)})</span>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Popis souboru\"\n                          value={fileObj.description}\n                          onChange={(e) => handleDescriptionChange(index, e.target.value)}\n                          css={fileDescriptionInput}\n                        />\n                        <button\n                          type=\"button\"\n                          css={removeFileButton}\n                          onClick={() => handleRemoveFile(index)}\n                        >\n                          Odebrat\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                {attachmentsLoading ? (\n                  <div style={{display:'none'}}></div>\n                ) : attachmentsError ? (\n                  <p css={css`color: #f44336; font-weight: bold;`}>{attachmentsError}</p>\n                ) : attachments.length > 0 && (\n                  <div css={uploadedFilesStyle}>\n                    <h4>Seznam ji pipojench ploh</h4>\n                    {attachments.map((attachment) => (\n                      <div\n                        key={attachment.id}\n                        css={[fileItem, attachment.markedForDeletion && css`.marked-for-deletion`]}\n                        style={{\n                          opacity: attachment.markedForDeletion ? 0.6 : 1,\n                          transition: 'opacity 0.2s ease-in-out',\n                        }}\n                      >\n                        <span\n                          css={fileStatusIcon}\n                          style={{\n                            color: attachment.markedForDeletion ? 'red' : 'green',\n                            marginRight: '10px',\n                          }}\n                          title={attachment.markedForDeletion ? 'Oznaeno k odstrann' : 'Aktivn'}\n                        >\n                          {attachment.markedForDeletion ? '' : ''}\n                        </span>\n                        <a\n                          href={getAttachmentUrl(attachment.soubor)}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          css={[fileName, css`.clickable`]}\n                          title=\"Kliknte pro oteven\"\n                          style={{\n                            textDecoration: attachment.markedForDeletion\n                              ? 'line-through'\n                              : 'none',\n                            color: attachment.markedForDeletion ? 'gray' : '#3f3d9e',\n                          }}\n                        >\n                          {attachment.soubor}\n                        </a>\n                        <span css={fileSize}>\n                          ({attachment.size ? formatFileSize(attachment.size) : ''})\n                        </span>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Popis souboru\"\n                          value={attachment.popis || ''}\n                          onChange={(e) => handleFetchedDescriptionChange(attachment.id, e.target.value)}\n                          css={fileDescriptionInput}\n                          disabled={attachment.markedForDeletion}\n                        />\n                        <button\n                          type=\"button\"\n                          css={removeFileButton}\n                          style={{\n                            backgroundColor: attachment.markedForDeletion ? 'green' : 'red',\n                            color: 'white',\n                          }}\n                          onClick={() => handleRemoveFetchedAttachment(attachment.id)}\n                        >\n                          {attachment.markedForDeletion ? 'Obnovit' : 'Odebrat'}\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n          <div css={formActions}>\n            <div css={creatorInfo}>\n              {formData.userCreator && (\n                <p>\n                  Vytvoil: <strong>{formData.userCreator}</strong>\n                </p>\n              )}\n            </div>\n            <div css={actionButtons}>\n              <button type=\"submit\">\n                {orderId ? 'Aktualizuj' : 'Pidat'}\n              </button>\n              <button type=\"button\" onClick={onClose}>\n                Zru\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default OrderFormTabs;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { Pie } from 'react-chartjs-2';\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getExpandedRowModel,\n  flexRender,\n} from '@tanstack/react-table';\n\nChartJS.register(ArcElement, Tooltip, Legend, ChartDataLabels);\n\nconst Statistics = ({ filteredOrders, selectedYear, lpsData }) => {\n  const year = useMemo(() => {\n    // Use the selectedYear prop or fallback to the value from localStorage\n    return selectedYear || localStorage.getItem('orders_yearFilter') || \"Vechny roky\";\n  }, [selectedYear]);\n\n  const [activeTab, setActiveTab] = useState(() => {\n    // Load the active tab from localStorage or default to 'overview'\n    return localStorage.getItem('statistics_activeTab') || 'overview';\n  });\n\n  // Save the active tab to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('statistics_activeTab', activeTab);\n  }, [activeTab]);\n\n  // Calculate the total price of all orders\n  const totalPrice = useMemo(() => {\n    return filteredOrders.reduce((sum, order) => sum + (parseFloat(order.cena_rok) || 0), 0);\n  }, [filteredOrders]);\n\n  // Process data for the \"Pehled dle sek\" tab\n  const sectionData = useMemo(() => {\n    const sectionMap = filteredOrders.reduce((acc, order) => {\n      const section = order.garant || 'neuvedeno';\n      if (!acc[section]) {\n        acc[section] = { count: 0, totalPrice: 0 };\n      }\n      acc[section].count += 1;\n      acc[section].totalPrice += parseFloat(order.cena_rok) || 0;\n      return acc;\n    }, {});\n\n    return Object.entries(sectionMap).map(([section, data]) => ({\n      section,\n      count: data.count,\n      totalPrice: data.totalPrice,\n      percentage: ((data.totalPrice / totalPrice) * 100).toFixed(2), // Calculate percentage\n    }));\n  }, [filteredOrders, totalPrice]);\n\n  // Prepare data for the pie chart\n  const pieChartData = useMemo(() => {\n    const labels = sectionData.map((item) => item.section);\n    const data = sectionData.map((item) => item.totalPrice);\n    const backgroundColors = [\n      '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#C9CBCF', '#8DD3C7',\n    ];\n\n    return {\n      labels,\n      datasets: [\n        {\n          data,\n          backgroundColor: backgroundColors.slice(0, labels.length),\n        },\n      ],\n    };\n  }, [sectionData]);\n\n  const pieChartOptions = useMemo(() => ({\n    plugins: {\n      legend: {\n        display: false, // Disable the native legend\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => {\n            const value = context.raw;\n            const percentage = ((value / totalPrice) * 100).toFixed(2);\n            const formattedValue = value.toLocaleString('cs-CZ'); // Format the value as currency\n            return `${percentage}% (${formattedValue} K)`; // Display percentage and total price\n          },\n        },\n      },\n      datalabels: {\n        display: (context) => {\n          const value = context.dataset.data[context.dataIndex]; // Access the correct value\n          const percentage = (value / totalPrice) * 100;\n          return percentage >= 6; // Only display labels for percentages >= 6%\n        },\n        formatter: (value, context) => {\n          const percentage = ((value / totalPrice) * 100).toFixed(2);\n          return `${percentage}%`; // Display percentage on the slice\n        },\n        color: '#fff',\n        font: {\n          weight: 'bold',\n          size: 14, // Adjust font size for better visibility\n        },\n\n        align: 'end', // Align labels towards the edge\n        offset: 12, // Offset labels from the edge\n\n      },\n    },\n  }), [totalPrice]);\n\n  // Process data for the table\n  const tableData = useMemo(() => {\n    if (!lpsData.length) return [];\n\n    // Determine the year interval based on the selected year\n    const yearStart = year === \"Vechny roky\" ? new Date(\"2000-01-01\") : new Date(`${year}-01-01`);\n    const yearEnd = year === \"Vechny roky\" ? new Date(\"2099-12-31\") : new Date(`${year}-12-31`);\n\n    const lpMap = {};\n\n    // Helper function to parse dates from \"dd.mm.yyyy\" format\n    const parseDate = (dateString) => {\n      if (!dateString) return null;\n      const [day, month, year] = dateString.split('.').map(Number);\n      return new Date(year, month - 1, day); // Month is 0-indexed in JavaScript Date\n    };\n\n    // Group API data by category\n    lpsData.forEach((lp) => {\n      const platneOd = parseDate(lp.platne_od); // Parse `platne_od`\n      const platneDo = parseDate(lp.platne_do); // Parse `platne_do`\n\n      // Filter LPs based on the interval\n      if (\n        (!platneOd || platneOd >= yearStart) &&\n        (!platneDo || platneDo <= yearEnd)\n      ) {\n        const category = lp.kategorie || 'neuvedeno';\n        if (!lpMap[category]) {\n          lpMap[category] = {\n            jmeno: lp.jmeno || 'neuvedeno',\n            garant: lp.garant_id || 'neuvedeno',\n            kategorie: category,\n            budget: 0,\n            ordersCount: 0,\n            ordersPrice: 0,\n            subRows: [],\n          };\n        }\n\n        // Prepare sub-row data\n        const subRow = {\n          cisloLP: lp.cislo_lp || 'neuvedeno',\n          cisloUctu: lp.cislo_uctu || '',\n          nazevUctu: lp.nazev_uctu || '',\n          budget: parseFloat(lp.vyse_financniho_kryti) || 0,\n          ordersCount: 0,\n          ordersPrice: 0,\n        };\n\n        // Calculate sub-row data based on filtered orders\n        filteredOrders.forEach((order) => {\n          if (order.cislo_lp === lp.cislo_lp) {\n            subRow.ordersCount += 1;\n            subRow.ordersPrice += parseFloat(order.cena_rok) || 0;\n          }\n        });\n\n        // Check if the sub-row with the same `cisloLP` already exists\n        const existingSubRow = lpMap[category].subRows.find((row) => row.cisloLP === subRow.cisloLP);\n        if (existingSubRow) {\n          // If it exists, aggregate only the budget (avoid duplicating ordersCount and ordersPrice)\n          existingSubRow.budget += subRow.budget;\n        } else {\n          lpMap[category].subRows.push(subRow);\n        }\n      }\n    });\n\n    // Aggregate main row data from sub-rows\n    Object.values(lpMap).forEach((mainRow) => {\n      mainRow.budget = mainRow.subRows.reduce((sum, subRow) => sum + subRow.budget, 0); // Aggregate budget\n      mainRow.ordersCount = mainRow.subRows.reduce((sum, subRow) => sum + subRow.ordersCount, 0);\n      mainRow.ordersPrice = mainRow.subRows.reduce((sum, subRow) => sum + subRow.ordersPrice, 0);\n    });\n\n    return Object.values(lpMap);\n  }, [lpsData, filteredOrders, year]);\n\n  // Define columns for the table\n  const columns = useMemo(() => [\n    {\n      id: 'expander',\n      header: ({ table }) => {\n        const isAllExpanded = table.getIsAllRowsExpanded();\n        return (\n          <button\n            onClick={() => table.toggleAllRowsExpanded()}\n            style={{\n              cursor: 'pointer',\n              background: 'none',\n              border: 'none',\n              fontSize: '16px',\n              padding: '0', // Remove padding\n              display: 'flex',\n              alignItems: 'center', // Center vertically\n              justifyContent: 'center', // Center horizontally\n            }}\n            title={isAllExpanded ? 'Sbalit ve' : 'Rozbalit ve'}\n          >\n            {isAllExpanded ? '' : '+'}\n          </button>\n        );\n      },\n      size: 30, // Minimized width for the expander column\n      cell: ({ row }) => (\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            row.toggleExpanded();\n          }}\n          style={{\n            cursor: 'pointer',\n            background: 'none',\n            border: 'none',\n            fontSize: '16px',\n            padding: '0', // Remove padding\n            display: 'flex',\n            alignItems: 'center', // Center vertically\n            justifyContent: 'center', // Center horizontally\n          }}\n        >\n          {row.getIsExpanded() ? '' : '+'}\n        </button>\n      ),\n    },\n    { accessorKey: 'jmeno', header: 'Pkazce', size: 150 },\n    {\n      accessorKey: 'garant',\n      header: 'sek',\n      size: 100,\n      cell: (info) => (\n        <div style={{ textAlign: 'center' }}>{info.getValue()}</div>\n      ),\n    },\n    { accessorKey: 'kategorie', header: 'LP', size: 80 },\n    {\n      accessorKey: 'budget',\n      header: 'Budget',\n      size: 120,\n      cell: (info) => (\n        <div style={{ textAlign: 'right', padding: '0 5px' }}>\n          {info.getValue().toLocaleString('cs-CZ')} K\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'ordersCount',\n      header: 'OBJ (KS)',\n      size: 80,\n      cell: (info) => (\n        <div style={{ textAlign: 'center', padding: '0 5px' }}>\n          {info.getValue()}\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'ordersPrice',\n      header: 'Cena s DPH (OBJ)',\n      size: 120,\n      cell: (info) => (\n        <div style={{ textAlign: 'right', padding: '0 5px' }}>\n          {info.getValue().toLocaleString('cs-CZ')} K\n        </div>\n      ),\n    },\n    {\n      id: 'difference',\n      header: 'Zbv',\n      size: 120,\n      cell: ({ row }) => {\n        const difference = row.original.budget - row.original.ordersPrice;\n        const color = difference > 0 ? 'green' : 'red';\n        return (\n          <div style={{ textAlign: 'right', color, padding: '0 5px' }}>\n            {difference.toLocaleString('cs-CZ')} K\n          </div>\n        );\n      },\n    },\n  ], []);\n\n  const table = useReactTable({\n    data: activeTab === 'limitedPromises' ? tableData : [],\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getExpandedRowModel: getExpandedRowModel(),\n    getRowCanExpand: (row) => row.original.subRows?.length > 0,\n  });\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'overview':\n        return (\n          <div className=\"legend-chart-container\">\n            <div className=\"legend-container\">\n              {sectionData.map((item, index) => (\n                <div key={index} className=\"legend-item\">\n                  <span\n                    className=\"legend-color\"\n                    style={{ backgroundColor: pieChartData.datasets[0].backgroundColor[index] }}\n                  ></span>\n                  <span className=\"legend-text\">\n                    {item.section}: {item.count} Ks : {item.totalPrice.toLocaleString('cs-CZ')} K ({item.percentage}%)\n                  </span>\n                </div>\n              ))}\n            </div>\n            <div className=\"chart-wrapper\">\n              <Pie data={pieChartData} options={pieChartOptions} />\n            </div>\n          </div>\n        );\n      case 'limitedPromises':\n        return (\n          <div className=\"limited-promises-table-wrapper\">\n            <table className=\"limited-promises-table\">\n              <thead>\n                {table.getHeaderGroups().map((headerGroup) => (\n                  <tr key={headerGroup.id}>\n                    {headerGroup.headers.map((header) => (\n                      <th\n                        key={header.id}\n                      >\n                        {flexRender(header.column.columnDef.header, header.getContext())}\n                      </th>\n                    ))}\n                  </tr>\n                ))}\n              </thead>\n              <tbody>\n                {table.getRowModel().rows.map((row) => (\n                  <React.Fragment key={row.id}>\n                    <tr className=\"lp-main-row\">\n                      {row.getVisibleCells().map((cell) => (\n                        <td key={cell.id}>{flexRender(cell.column.columnDef.cell, cell.getContext())}</td>\n                      ))}\n                    </tr>\n                    {row.getIsExpanded() && (\n                      <>\n                        {row.original.subRows.map((subRow, index) => {\n                          const diff = subRow.budget - subRow.ordersPrice;\n                          return (\n                            <tr className=\"lp-sub-row\" key={index}>\n                              {/* expander placeholder */}\n                              <td className=\"lp-sub-empty\" />\n                              {/* Pkazce placeholder */}\n                              <td className=\"lp-sub-empty\" />\n                              {/* sek placeholder */}\n                              <td className=\"lp-sub-empty\" />\n                              {/* LP column actual content */}\n                              <td className=\"lp-sub-lp\">\n                                <span className=\"lp-code\">{subRow.cisloLP}</span>{' '}\n                                <span className=\"lp-account\">({subRow.cisloUctu})</span>\n                                <br />\n                                <span className=\"lp-account\">{subRow.nazevUctu}</span>\n                              </td>\n                              <td style={{ textAlign: 'right' }}>{subRow.budget.toLocaleString('cs-CZ')} K</td>\n                              <td style={{ textAlign: 'center' }}>{subRow.ordersCount}</td>\n                              <td style={{ textAlign: 'right' }}>{subRow.ordersPrice.toLocaleString('cs-CZ')} K</td>\n                              <td style={{ textAlign: 'right' }}>\n                                <span className={diff > 0 ? 'value-positive' : 'value-negative'}>\n                                  {diff.toLocaleString('cs-CZ')} K\n                                </span>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </>\n                    )}\n                  </React.Fragment>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        );\n      default:\n        return <p>Obsah zatm nen k dispozici.</p>;\n    }\n  };\n\n  return (\n    <div className=\"statistics-container\">\n      <div className=\"tabs\">\n        <button\n          className={`tab-button ${activeTab === 'overview' ? 'active' : ''}`}\n          onClick={() => setActiveTab('overview')}\n        >\n          Pehled dle sek\n        </button>\n        <button\n          className={`tab-button ${activeTab === 'limitedPromises' ? 'active' : ''}`}\n          onClick={() => setActiveTab('limitedPromises')}\n        >\n          Limitovan psliby\n        </button>\n      </div>\n      <div className=\"tab-content\">\n        {renderTabContent()}\n      </div>\n    </div>\n  );\n};\n\nexport default Statistics;\n","import React, { useEffect, useState, useMemo, useContext, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { ProgressContext } from '../context/ProgressContext';\nimport { fetchOldOrders, fetchAllLps, getUserErrorMessage, getErrorCodeCZ } from '../services/api2auth'; // New API functions\n// Use legacy API for attachments listing on Orders page (matches expected shape and no token needed)\nimport { fetchOrderAttachmentsOld } from '../services/api2auth';\nimport { importOldOrders25, importOldOrders25Streaming } from '../services/api25orders'; // Import service (classic + streaming)\nimport ImportOldOrdersModal from '../components/ImportOldOrdersModal'; // Import modal component\nimport ordersCacheService from '../services/ordersCacheService'; //  CACHE: Cache service pro star objednvky\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getPaginationRowModel,\n  getExpandedRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js'; // Ensure correct import\nimport ChartDataLabels from 'chartjs-plugin-datalabels'; // Ensure correct import\nimport { OrdersPageStyles } from './Orders.styles';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronUp, faChevronDown, faEdit, faCopy, faFileAlt, faTrash, faFileInvoice, faChartPie, faMoneyBillWave, faFileInvoiceDollar, faCashRegister, faGlobe, faCheckCircle, faTimesCircle, faPaperclip, faSyncAlt, faDownload, faSearch, faArrowRight, faDatabase, faBoltLightning, faCalendarAlt, faPlus, faMinus, faChevronLeft, faChevronRight } from '@fortawesome/free-solid-svg-icons';\n// CSS moved to CSS-in-JS GlobalStyle\nimport OrderFormTabs from '../forms/OrderFormTabs'; // Updated path after moving to forms/\nimport Statistics from '../components/Statistics'; // Ensure correct import\nimport { AuthContext } from '../context/AuthContext'; // Ensure correct import\nimport { ToastContext } from '../context/ToastContext'; // Toast notifications\nimport { TooltipWrapper } from '../styles/GlobalTooltip';\nimport styled from '@emotion/styled';\n\nChartJS.register(ArcElement, Tooltip, Legend, ChartDataLabels); // Ensure correct registration\n\n// Year Filter Panel (prominent position above main header) - podle vzoru Orders25List\nconst YearFilterPanel = styled.div`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  color: white;\n`;\n\nconst PageDivider = styled.div`\n  border-bottom: 3px solid #e5e7eb;\n  margin-bottom: 2rem;\n`;\n\nconst YearFilterTitle = styled.h2`\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-left: auto;\n`;\n\nconst YearFilterLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst YearFilterLabel = styled.label`\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst MonthFilterLabel = styled.label`\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-left: 1rem;\n`;\n\nconst MonthDropdownContainer = styled.div`\n  position: relative;\n  width: auto;\n  min-width: 240px;\n  z-index: 10000;\n`;\n\nconst YearDropdownContainer = styled.div`\n  position: relative;\n  width: auto;\n  min-width: 150px;\n  z-index: 10000;\n`;\n\nconst YearDropdownButton = styled.button`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n`;\n\nconst YearDropdownMenu = styled.div`\n  position: absolute;\n  top: calc(100% + 0.5rem);\n  left: 0;\n  right: 0;\n  background: rgba(30, 64, 175, 0.98);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  backdrop-filter: blur(12px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 10001;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: rgba(59, 130, 246, 0.8);\n    border-radius: 4px;\n  }\n`;\n\nconst YearDropdownItem = styled.div`\n  padding: 0.75rem 1rem;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.15s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  &:first-of-type {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n  }\n\n  &:last-of-type {\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n  }\n`;\n\nconst MonthDropdownButton = styled.button`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: 100%;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n`;\n\nconst MonthDropdownMenu = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 0.5rem;\n  background: #1e40af;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n  max-height: 400px;\n  overflow-y: auto;\n  z-index: 10001;\n  backdrop-filter: blur(8px);\n\n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 12px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 6px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(96, 165, 250, 0.9));\n    border-radius: 6px;\n    border: 2px solid rgba(30, 64, 175, 0.3);\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 1), rgba(96, 165, 250, 1));\n  }\n\n  /* Firefox scrollbar */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(59, 130, 246, 0.8) rgba(30, 64, 175, 0.3);\n`;\n\nconst MonthDropdownItem = styled.div`\n  padding: 0.75rem 1rem;\n  color: white;\n  cursor: ${props => props.disabled ? 'default' : 'pointer'};\n  font-size: 0.95rem;\n  transition: background 0.15s ease;\n  pointer-events: ${props => props.disabled ? 'none' : 'auto'};\n\n  ${props => props.separator && `\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    padding: 0.5rem 1rem;\n    text-align: center;\n    color: rgba(255, 255, 255, 0.7);\n  `}\n\n  ${props => props.action && `\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.9);\n  `}\n\n  ${props => !props.disabled && !props.separator && `\n    &:hover {\n      background: #2563eb;\n    }\n  `}\n`;\n\nconst HeaderActions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst HeaderActionButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.5rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  transition: all 0.2s;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: ${props => props.disabled ? 0.5 : 1};\n\n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\n// Loading overlay komponenty (stejn jako OrderForm25)\nconst LoadingOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(248, 250, 252, 0.95);\n  backdrop-filter: blur(${props => props.$visible ? '8px' : '0px'});\n  -webkit-backdrop-filter: blur(${props => props.$visible ? '8px' : '0px'});\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: opacity 0.5s ease-in-out, backdrop-filter 0.6s ease-in-out;\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n`;\n\nconst LoadingSpinner = styled.div`\n  width: 64px;\n  height: 64px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #f59e0b;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1.5rem;\n  transform: scale(${props => props.$visible ? 1 : 0.8});\n  transition: transform 0.5s ease-in-out;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg) scale(1); }\n    100% { transform: rotate(360deg) scale(1); }\n  }\n`;\n\nconst LoadingMessage = styled.div`\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #374151;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  transform: translateY(${props => props.$visible ? '0' : '10px'});\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: transform 0.5s ease-in-out 0.1s, opacity 0.5s ease-in-out 0.1s;\n`;\n\nconst LoadingSubtext = styled.div`\n  font-size: 0.875rem;\n  color: #6b7280;\n  text-align: center;\n  transform: translateY(${props => props.$visible ? '0' : '10px'});\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: transform 0.5s ease-in-out 0.15s, opacity 0.5s ease-in-out 0.15s;\n`;\n\n// Pagination\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationControls = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n`;\n\nconst PageContent = styled.div`\n  filter: blur(${props => props.$blurred ? '3px' : '0px'});\n  transition: filter 0.6s ease-in-out;\n  pointer-events: ${props => props.$blurred ? 'none' : 'auto'};\n`;\n\n//  CACHE: Status indicator komponenty\nconst CacheStatusIconWrapper = styled(TooltipWrapper)`\n  margin-left: 0.75rem;\n`;\n\nconst CacheStatusIcon = styled.span`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background: ${props => props.fromCache\n    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n    : 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'\n  };\n  color: white;\n  font-size: 0.8rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\n  }\n\n  svg {\n    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n  }\n`;\n\n// Dashboard Panel podle Orders25List\nconst DashboardPanel = styled.div`\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n`;\n\nconst DashboardGrid = styled.div`\n  display: grid;\n  grid-template-columns: minmax(350px, 400px) repeat(auto-fit, minmax(180px, 220px));\n  gap: clamp(0.8rem, 1.5vw, 1.65rem);\n  margin-bottom: 1.5rem;\n  align-items: start;\n  justify-content: start;\n  overflow-x: auto;\n\n  @media (max-width: 1400px) {\n    grid-template-columns: minmax(320px, 350px) repeat(auto-fit, minmax(160px, 200px));\n    gap: clamp(0.7rem, 1.3vw, 1.4rem);\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: minmax(300px, 330px) repeat(auto-fit, minmax(150px, 180px));\n    gap: clamp(0.6rem, 1.2vw, 1.3rem);\n  }\n\n  @media (max-width: 900px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.2rem);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.15rem);\n  }\n\n  @media (max-width: 600px) {\n    grid-template-columns: 1fr;\n    gap: clamp(0.6rem, 2vw, 0.9rem);\n  }\n\n  @media (min-width: 1600px) {\n    grid-template-columns: minmax(400px, 450px) repeat(auto-fit, minmax(200px, 250px));\n    gap: clamp(1.2rem, 1.8vw, 2rem);\n  }\n`;\n\nconst LargeStatCard = styled.div`\n  background: linear-gradient(145deg, #ffffff, #f9fafb);\n  border-radius: 16px;\n  padding: clamp(1.25rem, 1.5vw, 1.75rem);\n  border-left: 6px solid ${props => props.$color || '#3b82f6'};\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 2px 4px rgba(0, 0, 0, 0.06);\n\n  transition: all 0.3s ease;\n  grid-row: span 2;\n  grid-column: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: fit-content;\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 8px 20px rgba(0, 0, 0, 0.12),\n      0 4px 8px rgba(0, 0, 0, 0.08);\n  }\n\n  @media (max-width: 1200px) {\n    grid-row: span 1;\n    grid-column: span 2;\n    min-height: clamp(140px, 15vh, 180px);\n  }\n\n  @media (max-width: 900px) {\n    grid-column: span 1;\n    min-height: clamp(120px, 14vh, 160px);\n    padding: clamp(1rem, 1.2vw, 1.5rem);\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(110px, 13vh, 150px);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(100px, 12vh, 130px);\n    padding: clamp(0.8rem, 1vw, 1.25rem);\n  }\n`;\n\nconst StatCard = styled.div`\n  background: ${props => props.$isActive ?\n    `linear-gradient(145deg, ${props.$color || '#3b82f6'}20, ${props.$color || '#3b82f6'}10)` :\n    'linear-gradient(145deg, #ffffff, #f9fafb)'};\n  border-radius: 12px;\n  padding: clamp(0.8rem, 1vw, 1rem);\n  border-left: 4px solid ${props => props.$color || '#3b82f6'};\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n\n  transition: all 0.25s ease;\n  min-height: clamp(90px, 10vh, 120px);\n  min-width: clamp(160px, 18vw, 220px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: relative;\n  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n  width: 100%;\n  box-sizing: border-box;\n\n  &:hover {\n    transform: ${props => props.$clickable ? 'translateY(-2px)' : 'translateY(-1px)'};\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n    ${props => props.$clickable && `\n      background: linear-gradient(145deg, ${props.$color || '#3b82f6'}25, ${props.$color || '#3b82f6'}15);\n    `}\n  }\n\n  ${props => props.$isActive && `\n    border-left-width: 6px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ${props.$color || '#3b82f6'}40;\n  `}\n\n  @media (max-width: 1400px) {\n    min-height: clamp(85px, 9vh, 110px);\n    min-width: clamp(150px, 16vw, 200px);\n  }\n\n  @media (max-width: 1200px) {\n    min-height: clamp(80px, 8vh, 105px);\n    min-width: clamp(140px, 15vw, 190px);\n  }\n\n  @media (max-width: 900px) {\n    min-height: clamp(75px, 8vh, 100px);\n    min-width: 100%;\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(70px, 7vh, 95px);\n    padding: clamp(0.7rem, 0.8vw, 0.9rem);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(65px, 6vh, 85px);\n    padding: clamp(0.6rem, 0.7vw, 0.8rem);\n  }\n`;\n\nconst StatHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n`;\n\nconst StatIcon = styled.div`\n  color: ${props => props.$color || '#64748b'};\n  font-size: 1.25rem;\n  opacity: 0.7;\n`;\n\nconst StatLabel = styled.div`\n  font-size: clamp(0.75rem, 1.2vw, 0.875rem);\n  color: #64748b;\n  font-weight: 500;\n  text-align: left;\n  line-height: 1.4;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  @media (max-width: 1200px) {\n    white-space: normal;\n    line-height: 1.3;\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(0.7rem, 1.1vw, 0.825rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(0.65rem, 1vw, 0.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.6rem, 0.9vw, 0.75rem);\n  }\n`;\n\nconst StatValue = styled.div`\n  font-size: clamp(1.25rem, 2.5vw, 1.875rem);\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1.2;\n  text-align: left;\n\n  @media (max-width: 1400px) {\n    font-size: clamp(1.2rem, 2.3vw, 1.75rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.15rem, 2.2vw, 1.65rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.1rem, 2.1vw, 1.6rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1rem, 2vw, 1.5rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.95rem, 1.8vw, 1.3rem);\n  }\n`;\n\nconst LargeStatValue = styled.div`\n  font-size: clamp(1.25rem, 2.5vw, 1.75rem);\n  font-weight: 700;\n  color: #1e293b;\n  text-align: center;\n  line-height: 1.1;\n  margin-bottom: 0.5rem;\n\n  @media (max-width: 1400px) {\n    font-size: clamp(1.15rem, 2.3vw, 1.6rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.3rem, 2.6vw, 2rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.2rem, 2.4vw, 1.9rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1.1rem, 2.2vw, 1.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(1rem, 2vw, 1.6rem);\n  }\n`;\n\nconst LargeStatLabel = styled.div`\n  font-size: 1rem;\n  color: #64748b;\n  font-weight: 600;\n  text-align: center;\n  margin-bottom: 1rem;\n\n  @media (max-width: 480px) {\n    font-size: 0.875rem;\n  }\n`;\n\nconst SummaryRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  margin-top: auto;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n`;\n\nconst SummaryItem = styled.div`\n  flex: 1;\n  padding: 0.75rem;\n  border-radius: 8px;\n  border-left: 3px solid ${props => props.$color || '#d1d5db'};\n  background: ${props => props.$bg || 'rgba(0, 0, 0, 0.02)'};\n`;\n\nconst SummaryLabel = styled.div`\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ${props => props.$color || '#6b7280'};\n  margin-bottom: 0.25rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n`;\n\nconst SummaryValue = styled.div`\n  font-size: 0.875rem;\n  font-weight: 700;\n  color: #1f2937;\n`;\n\n// ============================================================================\n// TABLE COMPONENTS - s podporou horizontlnho scrollovn\n// ============================================================================\n// Wrapper pro tabulku s shadow indiktory\nconst TableScrollWrapper = styled.div`\n  position: relative;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-top: 1em;\n\n  /* Shadow indiktory na okrajch kdy je mon scrollovat */\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 40px;\n    pointer-events: none;\n    z-index: 10;\n    transition: opacity 0.3s ease;\n  }\n\n  /* Lev shadow - kdy nen na zatku */\n  &::before {\n    left: 0;\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ${props => props.$showLeftShadow ? 1 : 0};\n    border-radius: 8px 0 0 8px;\n  }\n\n  /* Prav shadow - kdy nen na konci */\n  &::after {\n    right: 0;\n    background: linear-gradient(to left, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ${props => props.$showRightShadow ? 1 : 0};\n    border-radius: 0 8px 8px 0;\n  }\n`;\n\nconst TableContainer = styled.div`\n  /* Horizontln scrollovn kdy se tabulka nevejde */\n  overflow-x: auto;\n  overflow-y: visible;\n  position: relative;\n\n  /* Smooth scrolling pro lep UX */\n  scroll-behavior: smooth;\n\n  /* Skryt scrollbar - mme ipky pro navigaci */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Firefox - skryt scrollbar */\n  scrollbar-width: none;\n`;\n\n// Scroll ipka - lev - FIXED position (pohybuje se s vertiklnm scrollem)\nconst ScrollArrowLeft = styled.button`\n  position: fixed;\n  left: 50px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 9999;\n\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  border: 2px solid #e5e7eb;\n  background: ${props => {\n    // Pln bl JEN kdy je hover pmo NAD IPKOU\n    if (props.$arrowHovered) {\n      return 'rgba(255, 255, 255, 0.98)';\n    }\n    return 'rgba(255, 255, 255, 0.25)'; // 75% prhledn (zobrazuje se kdy je hover nad tabulkou)\n  }};\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  /* Zobrazit kdy: 1) je poteba scrollovat A 2) je hover nad tabulkou NEBO nad ipkou */\n  opacity: ${props => (props.$visible && (props.$tableHovered || props.$arrowHovered)) ? 1 : 0};\n  pointer-events: ${props => (props.$visible && (props.$tableHovered || props.$arrowHovered)) ? 'auto' : 'none'};\n  transform: translateY(-50%); /* Vdy stejn velikost, dn scale */\n\n  &:hover:not(:disabled) {\n    background: rgba(248, 250, 252, 0.98);\n    border-color: #3b82f6;\n    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(-50%) scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  svg {\n    width: 22px;\n    height: 22px;\n    color: #3b82f6;\n  }\n`;\n\n// Scroll ipka - prav - FIXED position\nconst ScrollArrowRight = styled(ScrollArrowLeft)`\n  left: auto;\n  right: 50px;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n`;\n\nconst TableHeader = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n`;\n\nconst ExpandButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #3b82f6;\n  font-size: 1.25rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n`;\n\n// Expanded Row Components - podle Orders25List\nconst ExpandedContent = styled.div`\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-top: 2px solid #e5e7eb;\n  border-bottom: 2px solid #000000;\n`;\n\nconst ExpandedGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));\n  gap: 1rem;\n\n  @media (max-width: 1600px) {\n    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  }\n`;\n\nconst InfoCard = styled.div`\n  background: white;\n  border-radius: 8px;\n  padding: 1.25rem;\n  border-left: 4px solid #3b82f6;\n  box-shadow:\n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\n    inset 0 1px 0 rgba(255, 255, 255, 0.6);\n\n  position: relative;\n  transform: translateZ(0);\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\n      0 4px 6px -2px rgba(0, 0, 0, 0.05),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.02) 100%);\n    border-radius: 8px;\n    pointer-events: none;\n  }\n\n  ${props => props.$fullWidth && `\n    grid-column: 1 / -1;\n  `}\n`;\n\nconst InfoCardTitle = styled.h4`\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #0a0a0a;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n`;\n\nconst InfoRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 1.5rem;\n  padding: 0.45rem 0;\n  border-bottom: 1px dashed #e5e7eb;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst InfoLabel = styled.span`\n  font-weight: 600;\n  color: #0a0a0a;\n  flex-shrink: 0;\n  white-space: nowrap;\n  max-width: 45%;\n`;\n\nconst InfoValue = styled.span`\n  color: #0a0a0a;\n  text-align: right;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  flex: 1;\n  min-width: 0;\n  line-height: 1.5;\n`;\n\nconst Orders = () => {\n  const { token, user, userDetail, hasPermission } = useContext(AuthContext); // Get the token, user, userDetail and hasPermission from AuthContext\n  const username = user?.username; // Derive username from user object\n  const { showToast } = useContext(ToastContext); // Toast notifications\n\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [lpsData, setLpsData] = useState([]); // State to store LPS data\n\n  //  CACHE: State pro tracking cache info\n  const [lastLoadSource, setLastLoadSource] = useState(null); // 'cache' | 'database' | null\n  const [lastLoadTime, setLastLoadTime] = useState(null);\n  const [lastLoadDuration, setLastLoadDuration] = useState(null); // Jak dlouho trvalo naten (ms)\n\n  // State for checkbox selection\n  const [selectedOrders, setSelectedOrders] = useState(new Set());\n\n  // Helper functions for user-specific localStorage\n  const user_id = userDetail?.user_id || user?.id; // Fallback na user.id pokud userDetail nen k dispozici\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      // Uloit do user-specific kle\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n\n      // Pro 'orders_dbSource' uloit TAK do zkladnho kle pro Layout.js\n      if (baseKey === 'orders_dbSource') {\n        localStorage.setItem(baseKey, value); // Uloit bez JSON.stringify pro Layout\n      }\n    } catch (error) {\n    }\n  };\n\n  // Retrieve initial states from user-specific localStorage or set defaults\n  const [globalFilter, setGlobalFilter] = useState(() => getUserStorage('orders_globalFilter', ''));\n  const [garantFilter, setGarantFilter] = useState(() => getUserStorage('orders_garantFilter', ''));\n  const [druhFilter, setDruhFilter] = useState(() => getUserStorage('orders_druhFilter', ''));\n  const [isCollapsed, setIsCollapsed] = useState(() => getUserStorage('orders_isCollapsed', false));\n  const [isStatsCollapsed, setIsStatsCollapsed] = useState(() => getUserStorage('orders_isStatsCollapsed', true));\n  const [isFilterCollapsed, setIsFilterCollapsed] = useState(() => getUserStorage('orders_isFilterCollapsed', false));\n\n  // Table sorting - load from user-specific localStorage\n  const [sorting, setSorting] = useState(() => getUserStorage('orders_sorting', [{ id: 'datum_p', desc: true }]));\n\n  // Expanded rows state - zachovn rozbalench dk pi refresh\n  const [expanded, setExpanded] = useState({});\n\n  const { setProgress: setGlobalProgress, start: startGlobalProgress, done: doneGlobalProgress, reset: resetGlobalProgress } = useContext(ProgressContext);\n  const [isModalOpen, setIsModalOpen] = useState(false); // Ensure default is false\n  const [selectedOrderId, setSelectedOrderId] = useState(null); // State to track the selected order ID\n  const [isImportModalOpen, setIsImportModalOpen] = useState(false); // State for import modal\n\n  // States for button filters\n  const [fakturaFilter, setFakturaFilter] = useState(false);\n  const [pokladniDokFilter, setPokladniDokFilter] = useState(false);\n  const [zverejnitFilter, setZverejnitFilter] = useState(false);\n\n  const toggleFakturaFilter = () => setFakturaFilter((prev) => !prev);\n  const togglePokladniDokFilter = () => setPokladniDokFilter((prev) => !prev);\n  const toggleZverejnitFilter = () => setZverejnitFilter((prev) => !prev);\n\n  // Get the current year\n  const currentYear = new Date().getFullYear();\n\n  // Retrieve initial year filter or set to the current year\n  const [yearFilter, setYearFilter] = useState(() => getUserStorage('orders_yearFilter', currentYear.toString()));\n\n  // Month filter - load from localStorage with user isolation or use \"last-quarter\" (posledn kvartl) jako vchoz\n  const [selectedMonth, setSelectedMonth] = useState(() => {\n    return getUserStorage('orders_selectedMonth', 'last-quarter'); // all, last-month, last-quarter, last-half, nebo \"1-3\" (konkrtn msce)\n  });\n\n  // Show expanded month options\n  const [showExpandedMonths, setShowExpandedMonths] = useState(() => {\n    const saved = getUserStorage('orders_selectedMonth', 'last-quarter');\n    // Pokud je uloen hodnota mimo zkladn 4, zobraz rozen monosti\n    return saved && !['all', 'last-month', 'last-quarter', 'last-half'].includes(saved);\n  });\n\n  // Table pagination - load from localStorage\n  const [pageSize, setPageSize] = useState(() => {\n    const saved = getUserStorage('orders_pageSize', null);\n    return saved ? parseInt(saved, 10) : 25;\n  });\n\n  const [currentPageIndex, setCurrentPageIndex] = useState(() => {\n    const saved = getUserStorage('orders_pageIndex', null);\n    return saved ? parseInt(saved, 10) : 0;\n  });\n\n  // Save pageSize to localStorage when it changes\n  useEffect(() => {\n    setUserStorage('orders_pageSize', pageSize.toString());\n  }, [pageSize]);\n\n  // Save currentPageIndex to localStorage when it changes\n  useEffect(() => {\n    setUserStorage('orders_pageIndex', currentPageIndex.toString());\n  }, [currentPageIndex]);\n\n  // Database source selection\n  const [selectedDbSource, setSelectedDbSource] = useState(() =>\n    getUserStorage('orders_dbSource', process.env.REACT_APP_DB_ORDER_KEY || 'objednavky0123')\n  );\n\n  //  State a ref pro scroll ipky a shadow efekty\n  const [showLeftArrow, setShowLeftArrow] = useState(false);\n  const [showRightArrow, setShowRightArrow] = useState(false);\n  const [showLeftShadow, setShowLeftShadow] = useState(false);\n  const [showRightShadow, setShowRightShadow] = useState(false);\n  const [isTableHovered, setIsTableHovered] = useState(false); // Hover nad CELOU tabulkou (wrapper)\n  const [isArrowHovered, setIsArrowHovered] = useState(false); // Hover nad ipkou (aby nezmizel kdy na ni najede)\n  const tableContainerRef = useRef(null);\n  const tableWrapperRef = useRef(null); // Pro wrapper s shadow efekty\n\n  // Callback ref pro TableScrollWrapper - detekuje hover nad CELOU tabulkou\n  const setTableWrapperRef = useCallback((node) => {\n    tableWrapperRef.current = node;\n\n    if (node) {\n      const handleMouseEnter = () => {\n        setIsTableHovered(true);\n      };\n\n      const handleMouseLeave = () => {\n        setIsTableHovered(false);\n        // NERESTUJI isArrowHovered - to a si d ipka sama!\n      };\n\n      node.addEventListener('mouseenter', handleMouseEnter);\n      node.addEventListener('mouseleave', handleMouseLeave);\n\n      return () => {\n        node.removeEventListener('mouseenter', handleMouseEnter);\n        node.removeEventListener('mouseleave', handleMouseLeave);\n      };\n    }\n  }, []);\n\n  // Callback ref pro TableContainer s automatickou detekc scrollovn\n  const setTableContainerRef = useCallback((node) => {\n    tableContainerRef.current = node;\n\n    if (node) {\n      // Funkce pro update ipek a shadow\n      const updateScrollIndicators = () => {\n        const scrollLeft = node.scrollLeft;\n        const maxScroll = node.scrollWidth - node.clientWidth;\n\n        // ipky - zobrazit kdy nen na kraji (tolerance 5px)\n        const leftVisible = scrollLeft > 5;\n        const rightVisible = scrollLeft < maxScroll - 5;\n\n        setShowLeftArrow(leftVisible);\n        setShowRightArrow(rightVisible);\n\n        // Shadow efekty - plynulej (tolerance 1px)\n        setShowLeftShadow(scrollLeft > 1);\n        setShowRightShadow(scrollLeft < maxScroll - 1);\n      };\n\n      // Iniciln update po krtkm timeoutu (aby se tabulka stihla vyrenderovat)\n      setTimeout(updateScrollIndicators, 100);\n\n      // Event listenery\n      const handleScroll = () => {\n        updateScrollIndicators();\n      };\n\n      node.addEventListener('scroll', handleScroll, { passive: true });\n      window.addEventListener('resize', updateScrollIndicators);\n\n      // Cleanup\n      return () => {\n        node.removeEventListener('scroll', handleScroll);\n        window.removeEventListener('resize', updateScrollIndicators);\n      };\n    }\n  }, []);\n\n  //  Handler pro scroll ipky - scrolluj o ku viewportu\n  const handleScrollLeft = () => {\n    const tableContainer = tableContainerRef.current;\n    if (!tableContainer) return;\n\n    // Scrolluj o 80% ky containeru doleva\n    const scrollAmount = tableContainer.clientWidth * 0.8;\n    tableContainer.scrollBy({\n      left: -scrollAmount,\n      behavior: 'smooth'\n    });\n  };\n\n  const handleScrollRight = () => {\n    const tableContainer = tableContainerRef.current;\n    if (!tableContainer) return;\n\n    // Scrolluj o 80% ky containeru doprava\n    const scrollAmount = tableContainer.clientWidth * 0.8;\n    tableContainer.scrollBy({\n      left: scrollAmount,\n      behavior: 'smooth'\n    });\n  };\n\n  // Propagate initial selectedDbSource to basic localStorage key for Layout.js\n  useEffect(() => {\n    try {\n      localStorage.setItem('orders_dbSource', selectedDbSource);\n    } catch (error) {\n    }\n  }, []); // Run only on mount\n\n  // Available database sources from env\n  const availableDbSources = useMemo(() => {\n    const sources = process.env.REACT_APP_DB_AVAILABLE_SOURCES || 'objednavky,objednavky0103,objednavky0121,objednavky0123';\n    return sources.split(',').map(s => s.trim());\n  }, []);\n\n  // Helper function to map order table to attachment table\n  const getAttachmentTableName = useCallback((orderTableName) => {\n    if (orderTableName === 'objednavky') {\n      return 'pripojene_dokumenty';\n    }\n    // Pattern: objednavkyXXXX -> pripojene_odokumentyXXXX\n    const match = orderTableName.match(/^objednavky(\\d+.*)$/);\n    if (match) {\n      return `pripojene_odokumenty${match[1]}`;\n    }\n    return 'pripojene_odokumenty0123'; // fallback\n  }, []);\n\n  // Year dropdown state\n  const [isYearDropdownOpen, setIsYearDropdownOpen] = useState(false);\n  const yearSelectRef = useRef(null);\n\n  // Month dropdown state\n  const [isMonthDropdownOpen, setIsMonthDropdownOpen] = useState(false);\n  const monthSelectRef = useRef(null);\n\n  // Generate year options from 2016 to current year (DESC - od nejnovjho k nejstarmu)\n  const yearOptions = useMemo(() => {\n    const years = []; // Zani bez \"Vechny roky\"\n    for (let year = currentYear; year >= 2016; year--) {\n      years.push(year.toString());\n    }\n    years.push('Vechny roky'); // Pidej \"Vechny roky\" a na konec\n    return years;\n  }, [currentYear]);\n\n  // Function to detect if any filters are active\n  const hasActiveFilters = useMemo(() => {\n    return globalFilter !== '' ||\n           garantFilter !== '' ||\n           druhFilter !== '' ||\n           yearFilter !== currentYear.toString() ||\n           fakturaFilter ||\n           pokladniDokFilter ||\n           zverejnitFilter;\n  }, [globalFilter, garantFilter, druhFilter, yearFilter, currentYear, fakturaFilter, pokladniDokFilter, zverejnitFilter]);\n\n  // Enhanced clear all filters function\n  const clearAllFilters = () => {\n    setGlobalFilter('');\n    setGarantFilter('');\n    setDruhFilter('');\n    setYearFilter(currentYear.toString()); // Reset to current year\n    setFakturaFilter(false);\n    setPokladniDokFilter(false);\n    setZverejnitFilter(false);\n\n    // Clear from user-specific localStorage\n    setUserStorage('orders_globalFilter', '');\n    setUserStorage('orders_garantFilter', '');\n    setUserStorage('orders_druhFilter', '');\n    setUserStorage('orders_yearFilter', currentYear.toString());\n\n    // Also clear calendar-related localStorage keys that might affect OrdersListNew\n    try {\n      const sid = user?.id || 'anon';\n      localStorage.removeItem(`orders_quick_date_filter_${sid}`);\n      localStorage.removeItem(`orders_quick_column_filters_${sid}`);\n      localStorage.removeItem(`orders_quick_date_filter_updated_${sid}`);\n      localStorage.removeItem(`orders_quick_column_filters_updated_${sid}`);\n    } catch(_) {}\n  };\n\n  const handleGlobalFilterChange = (value) => {\n    setGlobalFilter(value);\n    setUserStorage('orders_globalFilter', value);\n  };\n\n  // Database source selection handlers\n  const [isDbSourceDropdownOpen, setIsDbSourceDropdownOpen] = useState(false);\n  const dbSourceSelectRef = useRef(null);\n\n  const toggleDbSourceDropdown = () => {\n    setIsDbSourceDropdownOpen(prev => !prev);\n  };\n\n  const handleDbSourceChange = async (dbSource) => {\n    // Kontrola autentizace HNED\n    if (!token || !username) {\n      showToast('Nejste pihleni', { type: 'error' });\n      return;\n    }\n\n    // Vyistit cache ped zmnou\n    try {\n      ordersCacheService.clear();\n\n      // Vyistit tak localStorage pro tento kl\n      if (user_id) {\n        const storageKey = `orders_cache_${user_id}_${dbSource}`;\n        localStorage.removeItem(storageKey);\n      }\n    } catch (err) {\n    }\n\n    // Nastavit novou databzi\n    setSelectedDbSource(dbSource);\n    setUserStorage('orders_dbSource', dbSource);\n    setIsDbSourceDropdownOpen(false);\n\n    // Okamit zobrazit toast o natn\n    showToast(` Pepnm na databzi ${dbSource}...`, { type: 'info', duration: 2000 });\n\n    //  Safety timeout - pokud se nco zasekne, killni to po 30s\n    const timeoutId = setTimeout(() => {\n      setLoading(false);\n      doneGlobalProgress();\n      showToast(' Natn trv pli dlouho, zkuste to znovu', { type: 'error' });\n    }, 30000);\n\n    const loadStartTime = performance.now();\n\n    try {\n      setLoading(true);\n      startGlobalProgress();\n      setGlobalProgress(10);\n\n      const { yearFrom, yearTo } = calculateDateRange(yearFilter);\n      const tabulkaObj = dbSource;\n      const tabulkaOpriloh = getAttachmentTableName(tabulkaObj);\n\n      setGlobalProgress(20);\n\n      // Force refresh z databze (VYNUCEN naten, IGNOROVAT CACHE!)\n      let data;\n\n      data = await fetchOldOrders({ yearFrom, yearTo, token, username, tabulkaObj, tabulkaOpriloh });\n\n      const loadEndTime = performance.now();\n      const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n      setLastLoadSource('database');\n      setLastLoadTime(new Date());\n      setLastLoadDuration(loadDuration);\n\n      setGlobalProgress(60);\n\n        setGlobalProgress(70);\n\n        if (data && Array.isArray(data)) {\n\n          const processedData = processOrders(data).map((order) => ({\n            ...order,\n            prilohy: parseInt(order.prilohy, 10) || 0,\n            cislo_lp: order.cislo_lp,\n            subRows: [\n              {\n                Partner: [\n                  `<strong>Partner: ${order.partner_nazev || 'neuvedeno'}</strong>`,\n                  `Adresa: ${order.partner_adresa || 'neuvedeno'}`,\n                  `I: ${order.partner_ic || 'neuvedeno'}`,\n                ],\n                \"Transportn technika\": [\n                  `Transportn: ${order.tt_vyrc || 'neuvedeno'}`,\n                  `Doplujc info: ${order.tt_dinfo || 'neuvedeno'}`,\n                ],\n              },\n              {\n                \"Zveejnno v registru\": {\n                  title: `Zveejnno v registru${order.zverejnit === 'Ano' ? ' ' : ''}`,\n                  details: [\n                    `<strong>Datum zveejnn:</strong> ${order.dt_zverejneni || 'neuvedeno'}`,\n                    `<strong>IDRS:</strong> ${order.idds || 'neuvedeno'}`,\n                  ],\n                  background: order.zverejnit === 'Ano' && order.dt_zverejneni === '00.00.0000' ? 'lightcoral' : '',\n                },\n                Autoi: [\n                  `<strong>Vytvoil:</strong> ${order.userCreator || 'neuvedeno'} dne ${order.dt_pridani}`,\n                  `<strong>Aktualizoval:</strong> ${order.userUpdater || 'neuvedeno'} dne ${order.dt_modifikace}`,\n                ],\n              },\n              {\n                \"Obsah a poznmka\": [\n                  `Obsah: ${order.obsah || 'neuvedeno'}`,\n                  `Poznmka: ${order.poznamka || 'neuvedeno'}`,\n                ],\n              },\n            ],\n          }));\n\n          setGlobalProgress(80);\n\n          setOrders(processedData);\n\n          setGlobalProgress(90);\n\n          // Wait for UI to update\n          await new Promise(resolve => setTimeout(resolve, 600));\n\n          setLoading(false);\n          doneGlobalProgress();\n\n          showToast(` Nateno ${data.length} objednvek z databze ${tabulkaObj}`, {\n            type: 'success',\n            duration: 4000\n          });\n        } else {\n          setOrders([]);\n          setLoading(false);\n          doneGlobalProgress();\n          showToast(` Databze ${tabulkaObj} neobsahuje dn data`, { type: 'warning' });\n        }\n\n      } catch (err) {\n        clearTimeout(timeoutId);\n        setError(getUserErrorMessage(err) || 'Nepodailo se nast data z vybran databze.');\n        setLoading(false);\n        doneGlobalProgress();\n        showToast(' Chyba pi natn dat', { type: 'error' });\n      } finally {\n        clearTimeout(timeoutId);\n      }\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dbSourceSelectRef.current && !dbSourceSelectRef.current.contains(event.target)) {\n        setIsDbSourceDropdownOpen(false);\n      }\n    };\n    if (isDbSourceDropdownOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isDbSourceDropdownOpen]);\n\n  // Load LPS data once token+username are ready\n  useEffect(() => {\n    const loadLps = async () => {\n      if (!token || !username) return;\n      try {\n        const data = await fetchAllLps({ token, username });\n        setLpsData(Array.isArray(data) ? data : []);\n      } catch (e) {\n      }\n    };\n    loadLps();\n  }, [token, username]);\n\n  // Toggle year dropdown\n  const toggleYearDropdown = () => {\n    setIsYearDropdownOpen(prev => !prev);\n  };\n\n  // Toggle month dropdown\n  const toggleMonthDropdown = () => {\n    setIsMonthDropdownOpen(prev => !prev);\n  };\n\n  // Close year dropdown when clicking outside\n  useEffect(() => {\n    if (!isYearDropdownOpen) return;\n\n    const handleClickOutside = (event) => {\n      if (yearSelectRef.current && !yearSelectRef.current.contains(event.target)) {\n        setIsYearDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isYearDropdownOpen]);\n\n  // Close month dropdown when clicking outside\n  useEffect(() => {\n    if (!isMonthDropdownOpen) return;\n\n    const handleClickOutside = (event) => {\n      if (monthSelectRef.current && !monthSelectRef.current.contains(event.target)) {\n        setIsMonthDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isMonthDropdownOpen]);\n\n  // Close database source dropdown when clicking outside\n  useEffect(() => {\n    if (!isDbSourceDropdownOpen) return;\n\n    const handleClickOutside = (event) => {\n      if (dbSourceSelectRef.current && !dbSourceSelectRef.current.contains(event.target)) {\n        setIsDbSourceDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isDbSourceDropdownOpen]);\n\n  // Handle month filter change\n  const handleMonthChange = (newMonth) => {\n    // Pokud uivatel vybere \"show-more\", jen zobraz dal monosti a nechej dropdown oteven\n    if (newMonth === 'show-more') {\n      setShowExpandedMonths(true);\n      return;\n    }\n\n    // Pokud uivatel vybere \"show-less\", sbal zpt na zkladn monosti\n    if (newMonth === 'show-less') {\n      setShowExpandedMonths(false);\n      return;\n    }\n\n    // Invalidovat cache pi zmn msce\n    if (user_id) {\n      ordersCacheService.clear();\n    }\n\n    // Pro skuten vbr msce - zaveme dropdown\n    setSelectedMonth(newMonth);\n    setUserStorage('orders_selectedMonth', newMonth);\n    setIsMonthDropdownOpen(false);\n  };\n\n  // Helper funkce pro zskn nzvu msce\n  const getMonthLabel = (value) => {\n    const labels = {\n      'all': 'Vechny msce',\n      'last-month': 'Posledn msc',\n      'last-quarter': 'Posledn kvartl',\n      'last-half': 'Posledn plrok',\n      '1': 'Leden',\n      '2': 'nor',\n      '3': 'Bezen',\n      '4': 'Duben',\n      '5': 'Kvten',\n      '6': 'erven',\n      '7': 'ervenec',\n      '8': 'Srpen',\n      '9': 'Z',\n      '10': 'jen',\n      '11': 'Listopad',\n      '12': 'Prosinec',\n      '1-3': 'Q1 (Leden-Bezen)',\n      '4-6': 'Q2 (Duben-erven)',\n      '7-9': 'Q3 (ervenec-Z)',\n      '10-12': 'Q4 (jen-Prosinec)'\n    };\n    return labels[value] || value;\n  };\n\n  const handleYearFilterChange = async (value) => {\n    //  CACHE: Start men doby natn\n    const loadStartTime = performance.now();\n\n    try {\n      setYearFilter(value);\n      setUserStorage('orders_yearFilter', value); // Save year filter to user-specific localStorage\n      setIsYearDropdownOpen(false); // Close dropdown\n\n      setLoading(true);\n      startGlobalProgress();\n      setGlobalProgress(20);\n\n      const yearFrom = value === 'Vechny roky' ? '2016-01-01' : `${value}-01-01`; // \"Vechny roky\" = 2016 a souasnost\n      const yearTo = value === 'Vechny roky' ? '2099-12-31' : `${value}-12-31`;   // Include full end date\n\n      // Piprav nzvy tabulek\n      const tabulkaObj = selectedDbSource || process.env.REACT_APP_DB_ORDER_KEY;\n      const tabulkaOpriloh = getAttachmentTableName(tabulkaObj);\n\n      //  CACHE: Nast z cache nebo DB (pouze pokud mme user_id)\n      let data;\n      if (user_id) {\n        const cacheResult = await ordersCacheService.getOrders(\n          user_id,\n          async () => await fetchOldOrders({ yearFrom, yearTo, token, username, tabulkaObj, tabulkaOpriloh }),\n          { yearFrom, yearTo, type: 'old-orders', dbSource: tabulkaObj }\n        );\n        data = cacheResult.data;\n\n        //  CACHE: Zm dobu natn\n        const loadEndTime = performance.now();\n        const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n        setLastLoadSource(cacheResult.fromCache ? 'cache' : 'database');\n        setLastLoadTime(new Date());\n        setLastLoadDuration(loadDuration);\n      } else {\n        // Fallback bez cache pokud nen user_id\n        data = await fetchOldOrders({ yearFrom, yearTo, token, username, tabulkaObj, tabulkaOpriloh });\n\n        //  CACHE: Zm dobu natn\n        const loadEndTime = performance.now();\n        const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n        setLastLoadSource('database');\n        setLastLoadTime(new Date());\n        setLastLoadDuration(loadDuration);\n      }\n\n      setGlobalProgress(60);\n  // (debug logs removed)\n\n      const processedData = Array.isArray(data)\n        ? processOrders(data).map((order) => ({\n            ...order,\n            prilohy: parseInt(order.prilohy, 10) || 0,\n            cislo_lp: order.cislo_lp,\n            subRows: [\n              {\n                Partner: [\n                  `<strong>Partner: ${order.partner_nazev || 'neuvedeno'}</strong>`,\n                  `Adresa: ${order.partner_adresa || 'neuvedeno'}`,\n                  `I: ${order.partner_ic || 'neuvedeno'}`,\n                ],\n                \"Transportn technika\": [\n                  `Transportn: ${order.tt_vyrc || 'neuvedeno'}`,\n                  `Doplujc info: ${order.tt_dinfo || 'neuvedeno'}`,\n                ],\n              },\n              {\n                \"Zveejnno v registru\": {\n                  title: `Zveejnno v registru${order.zverejnit === 'Ano' ? ' ' : ''}`,\n                  details: [\n                    `<strong>Datum zveejnn:</strong> ${order.dt_zverejneni || 'neuvedeno'}`,\n                    `<strong>IDRS:</strong> ${order.idds || 'neuvedeno'}`,\n                  ],\n                  background: order.zverejnit === 'Ano' && order.dt_zverejneni === '00.00.0000' ? 'lightcoral' : '',\n                },\n                Autoi: [\n                  `<strong>Vytvoil:</strong> ${order.userCreator || 'neuvedeno'} dne ${order.dt_pridani}`,\n                  `<strong>Aktualizoval:</strong> ${order.userUpdater || 'neuvedeno'} dne ${order.dt_modifikace}`,\n                ],\n              },\n              {\n                \"Obsah a poznmka\": [\n                  `Obsah: ${order.obsah || 'neuvedeno'}`,\n                  `Poznmka: ${order.poznamka || 'neuvedeno'}`,\n                ],\n              },\n            ],\n          }))\n        : [];\n\n      setGlobalProgress(80);\n      setOrders(processedData);\n      setGlobalProgress(90);\n\n      //  Pokej chvli aby se splash stihl zobrazit\n      await new Promise(resolve => setTimeout(resolve, 600));\n\n      //  TEPRVE TE VYPNU LOADING - data jsou v tabulce!\n      setLoading(false);\n      doneGlobalProgress();\n\n    } catch (err) {\n  setError('Nepodailo se nast data.');\n  setLoading(false);\n  doneGlobalProgress();\n    } finally {\n      //  U TADY NIC NEDLM - loading je vypnut ve!\n    }\n  };\n\n  const toggleCollapse = () => {\n    const newState = !isCollapsed;\n    setIsCollapsed(newState);\n    setUserStorage('orders_isCollapsed', newState);\n  };\n\n  const toggleStatsCollapse = () => {\n    const newState = !isStatsCollapsed;\n    setIsStatsCollapsed(newState);\n    setUserStorage('orders_isStatsCollapsed', newState);\n  };\n\n  const toggleFilterCollapse = () => {\n    const newState = !isFilterCollapsed;\n    setIsFilterCollapsed(newState);\n    setUserStorage('orders_isFilterCollapsed', newState);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false); // Close the modal\n    setSelectedOrderId(null); // Clear the selected order ID\n  };\n\n  const handleGarantFilterChange = (value) => {\n    setGarantFilter(value);\n    setUserStorage('orders_garantFilter', value);\n  };\n\n  const handleDruhFilterChange = (value) => {\n    setDruhFilter(value);\n    setUserStorage('orders_druhFilter', value);\n  };\n\n  const normalizeString = useCallback((str) => {\n    if (!str || typeof str !== 'string') return ''; // Ensure input is a non-null string\n    return str\n      .toLowerCase()\n      .normalize('NFD') // Normalize to decompose diacritics\n      .replace(/[\\u0300-\\u036f]/g, ''); // Remove diacritic marks\n  }, []);\n\n  const extractCisloLp = useCallback((text) => {\n    if (!text || typeof text !== 'string') return 'neuvedeno';\n\n    const lpRegex = /\\b(LPPT|LPZOS|LPIA|LPL|LPN|LPR|LPP|LPT|LPIT)\\s*\\d+(?:\\/\\d+)?\\b/i; // Match patterns like LPPT3, LPIT3/2025, etc.\n    const match = text.match(lpRegex);\n\n    if (match) {\n      return match[0]\n        .split('/')[0] // Extract only the part before the slash\n        .replace(/\\s+/g, '') // Remove spaces\n        .replace(/(\\D)0+(\\d)/, '$1$2'); // Remove leading zeros in the numeric part\n    }\n\n    return 'neuvedeno'; // Return 'neuvedeno' if no match is found\n  }, []);\n\n  const filterRows = useCallback((rows, filter, garantFilter, druhFilter, fakturaFilter, pokladniDokFilter, zverejnitFilter) => {\n    return rows.filter((row) => {\n      const matchesRow = Object.values(row).some((value) =>\n        normalizeString(String(value)).includes(normalizeString(filter))\n      );\n\n      const matchesSubRows = row.subRows?.some((subRow) =>\n        Object.values(subRow).some((value) =>\n          normalizeString(String(value)).includes(normalizeString(filter))\n        )\n      );\n\n      const matchesGarantFilter = garantFilter\n        ? normalizeString(row.garant) === normalizeString(garantFilter)\n        : true;\n\n      const matchesDruhFilter = druhFilter\n        ? normalizeString(row.druh_sml) === normalizeString(druhFilter)\n        : true;\n\n      const matchesFakturaFilter = fakturaFilter ? row.faktura === 'Ano' : true;\n      const matchesPokladniDokFilter = pokladniDokFilter ? row.pokladni_dok === 'Ano' : true;\n      const matchesZverejnitFilter = zverejnitFilter ? row.zverejnit === 'Ano' : true;\n\n      return (\n        (matchesRow || matchesSubRows) &&\n        matchesGarantFilter &&\n        matchesDruhFilter &&\n        matchesFakturaFilter &&\n        matchesPokladniDokFilter &&\n        matchesZverejnitFilter\n      );\n    });\n  }, [normalizeString]);\n\n  const filteredData = useMemo(() => {\n    return filterRows(\n      orders,\n      globalFilter,\n      garantFilter,\n      druhFilter,\n      fakturaFilter,\n      pokladniDokFilter,\n      zverejnitFilter\n    );\n  }, [orders, globalFilter, garantFilter, druhFilter, fakturaFilter, pokladniDokFilter, zverejnitFilter, filterRows]);\n\n  const filteredTotalPrice = useMemo(() => {\n    return filteredData.reduce((sum, order) => sum + (parseFloat(order.cena_rok) || 0), 0);\n  }, [filteredData]);\n\n  const filteredTotalOrders = useMemo(() => filteredData.length, [filteredData]);\n\n  const filteredWithInvoice = useMemo(() => {\n    return filteredData.filter((order) => order.faktura === 'Ano').length;\n  }, [filteredData]);\n\n  const filteredWithCashDocument = useMemo(() => {\n    return filteredData.filter((order) => order.pokladni_dok === 'Ano').length;\n  }, [filteredData]);\n\n  const filteredPublished = useMemo(() => {\n    return filteredData.filter((order) => order.zverejnit === 'Ano').length;\n  }, [filteredData]);\n\n  const totalAttachments = useMemo(() => {\n    return filteredData.reduce((sum, order) => sum + (parseInt(order.prilohy, 10) || 0), 0);\n  }, [filteredData]);\n\n  // Celkov cena a poet objednvek z DB (nezvisle na filtrech)\n  const totalPriceFromDB = useMemo(() => {\n    return orders.reduce((sum, order) => sum + (parseFloat(order.cena_rok) || 0), 0);\n  }, [orders]);\n\n  const totalOrdersFromDB = useMemo(() => orders.length, [orders]);\n\n  // Celkov cena za vybran objednvky (checkboxy)\n  const selectedOrdersTotalPrice = useMemo(() => {\n    if (selectedOrders.size === 0) return 0;\n    return filteredData\n      .filter(order => selectedOrders.has(order.id))\n      .reduce((sum, order) => sum + (parseFloat(order.cena_rok) || 0), 0);\n  }, [filteredData, selectedOrders]);\n\n  const resolvedOrders = 0; // Placeholder value\n  const unresolvedOrders = 0; // Placeholder value\n\n  // Checkbox handlers\n  const handleSelectAll = useCallback((checked) => {\n    if (checked) {\n      const allOrderIds = new Set(filteredData.map(order => order.id));\n      setSelectedOrders(allOrderIds);\n    } else {\n      setSelectedOrders(new Set());\n    }\n  }, [filteredData]);\n\n  const handleSelectOrder = useCallback((orderId, checked) => {\n    setSelectedOrders(prev => {\n      const newSet = new Set(prev);\n      if (checked) {\n        newSet.add(orderId);\n      } else {\n        newSet.delete(orderId);\n      }\n      return newSet;\n    });\n  }, []);\n\n  const processOrders = useCallback((orders) => {\n    return orders.map((order) => {\n      let cisloLp = 'neuvedeno';\n\n      if (order.objMetaData && order.objMetaData.trim() !== '') {\n        try {\n          const metaData = JSON.parse(order.objMetaData);\n          cisloLp = metaData.cislo_lp || 'neuvedeno';\n        } catch (e) {\n        }\n      }\n\n      if (cisloLp === 'neuvedeno' && order.poznamka) {\n        cisloLp = extractCisloLp(order.poznamka);\n      }\n\n      // Removed per-item progress updates (avoid setState in render)\n\n      return {\n        ...order,\n        garant: order.garant || 'neuvedeno', // Ensure \"sek\" is \"neuvedeno\" if empty\n        druh_sml: order.druh_sml || 'neuvedeno', // Ensure \"Druh\" is \"neuvedeno\" if empty\n        cislo_lp: cisloLp,\n      };\n    });\n  }, [extractCisloLp]);\n\n  // Funkce pro vpoet rozsahu dat podle roku a msce\n  const calculateDateRange = useCallback((year, month) => {\n    const currentYear = year === 'Vechny roky' ? new Date().getFullYear() : parseInt(year, 10);\n\n    // Vechny roky\n    if (year === 'Vechny roky') {\n      if (month === 'all') {\n        return { yearFrom: '2016-01-01', yearTo: '2099-12-31' };\n      }\n      // Pro \"Vechny roky\" s konkrtnm mscem/obdobm nem smysl - vrtme cel rok\n      return { yearFrom: '2016-01-01', yearTo: '2099-12-31' };\n    }\n\n    // Jednotliv msce (1-12)\n    if (month >= '1' && month <= '12') {\n      const monthNum = parseInt(month, 10);\n      const lastDay = new Date(currentYear, monthNum, 0).getDate();\n      return {\n        yearFrom: `${currentYear}-${String(monthNum).padStart(2, '0')}-01`,\n        yearTo: `${currentYear}-${String(monthNum).padStart(2, '0')}-${lastDay}`\n      };\n    }\n\n    // Kvartly\n    if (month === '1-3') {\n      return { yearFrom: `${currentYear}-01-01`, yearTo: `${currentYear}-03-31` };\n    }\n    if (month === '4-6') {\n      return { yearFrom: `${currentYear}-04-01`, yearTo: `${currentYear}-06-30` };\n    }\n    if (month === '7-9') {\n      return { yearFrom: `${currentYear}-07-01`, yearTo: `${currentYear}-09-30` };\n    }\n    if (month === '10-12') {\n      return { yearFrom: `${currentYear}-10-01`, yearTo: `${currentYear}-12-31` };\n    }\n\n    // Dynamick obdob\n    const now = new Date();\n\n    if (month === 'last-month') {\n      const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n      const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0);\n      return {\n        yearFrom: `${lastMonth.getFullYear()}-${String(lastMonth.getMonth() + 1).padStart(2, '0')}-${String(lastMonth.getDate()).padStart(2, '0')}`,\n        yearTo: `${lastMonthEnd.getFullYear()}-${String(lastMonthEnd.getMonth() + 1).padStart(2, '0')}-${String(lastMonthEnd.getDate()).padStart(2, '0')}`\n      };\n    }\n\n    if (month === 'last-quarter') {\n      const threeMonthsAgo = new Date(now.getFullYear(), now.getMonth() - 3, 1);\n      return {\n        yearFrom: `${threeMonthsAgo.getFullYear()}-${String(threeMonthsAgo.getMonth() + 1).padStart(2, '0')}-${String(threeMonthsAgo.getDate()).padStart(2, '0')}`,\n        yearTo: `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`\n      };\n    }\n\n    if (month === 'last-half') {\n      const sixMonthsAgo = new Date(now.getFullYear(), now.getMonth() - 6, 1);\n      return {\n        yearFrom: `${sixMonthsAgo.getFullYear()}-${String(sixMonthsAgo.getMonth() + 1).padStart(2, '0')}-${String(sixMonthsAgo.getDate()).padStart(2, '0')}`,\n        yearTo: `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`\n      };\n    }\n\n    // Default - cel rok\n    return {\n      yearFrom: `${currentYear}-01-01`,\n      yearTo: `${currentYear}-12-31`\n    };\n  }, []);\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      // Skip if no token or username\n      if (!token || !username) return;\n\n      //  CACHE: Start men doby natn\n      const loadStartTime = performance.now();\n\n      try {\n        setLoading(true);\n  startGlobalProgress();\n  setGlobalProgress(20);\n\n        // Vypotej rozsah dat podle roku a msce\n        const { yearFrom, yearTo } = calculateDateRange(yearFilter, selectedMonth);\n\n        // Piprav nzvy tabulek\n        const tabulkaObj = selectedDbSource || process.env.REACT_APP_DB_ORDER_KEY;\n        const tabulkaOpriloh = getAttachmentTableName(tabulkaObj);\n\n        //  CACHE: Nast z cache nebo DB (pouze pokud mme user_id)\n        let data;\n        if (user_id) {\n          const cacheResult = await ordersCacheService.getOrders(\n            user_id,\n            async () => await fetchOldOrders({ yearFrom, yearTo, token, username, tabulkaObj, tabulkaOpriloh }),\n            { yearFrom, yearTo, type: 'old-orders', dbSource: tabulkaObj }\n          );\n          data = cacheResult.data;\n\n          //  CACHE: Zm dobu natn\n          const loadEndTime = performance.now();\n          const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n          setLastLoadSource(cacheResult.fromCache ? 'cache' : 'database');\n          setLastLoadTime(new Date());\n          setLastLoadDuration(loadDuration);\n        } else {\n          // Fallback bez cache pokud nen user_id\n          data = await fetchOldOrders({ yearFrom, yearTo, token, username, tabulkaObj, tabulkaOpriloh });\n\n          //  CACHE: Zm dobu natn\n          const loadEndTime = performance.now();\n          const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n          setLastLoadSource('database');\n          setLastLoadTime(new Date());\n          setLastLoadDuration(loadDuration);\n        }\n\n  // (debug logs removed)\n\n       // console.log('Orders data received:', data); // Log the received data\n\n  setGlobalProgress(60);\n        const processedData = Array.isArray(data)\n          ? processOrders(data).map((order) => ({\n              ...order,\n              prilohy: parseInt(order.prilohy, 10) || 0,\n              cislo_lp: order.cislo_lp,\n              subRows: [\n                {\n                  Partner: [\n                    `<strong>Partner: ${order.partner_nazev || 'neuvedeno'}</strong>`,\n                    `Adresa: ${order.partner_adresa || 'neuvedeno'}`,\n                    `I: ${order.partner_ic || 'neuvedeno'}`,\n                  ],\n                  \"Transportn technika\": [\n                    `Transportn: ${order.tt_vyrc || 'neuvedeno'}`,\n                    `Doplujc info: ${order.tt_dinfo || 'neuvedeno'}`,\n                  ],\n                },\n                {\n                  \"Zveejnno v registru\": {\n                    title: `Zveejnno v registru${order.zverejnit === 'Ano' ? ' ' : ''}`,\n                    details: [\n                      `<strong>Datum zveejnn:</strong> ${order.dt_zverejneni || 'neuvedeno'}`,\n                      `<strong>IDRS:</strong> ${order.idds || 'neuvedeno'}`,\n                    ],\n                    background: order.zverejnit === 'Ano' && order.dt_zverejneni === '00.00.0000' ? 'lightcoral' : '',\n                  },\n                  Autoi: [\n                    `<strong>Vytvoil:</strong> ${order.userCreator || 'neuvedeno'} dne ${order.dt_pridani}`,\n                    `<strong>Aktualizoval:</strong> ${order.userUpdater || 'neuvedeno'} dne ${order.dt_modifikace}`,\n                  ],\n                },\n                {\n                  \"Obsah a poznmka\": [\n                    `Obsah: ${order.obsah || 'neuvedeno'}`,\n                    `Poznmka: ${order.poznamka || 'neuvedeno'}`,\n                  ],\n                },\n              ],\n            }))\n          : [];\n\n        setGlobalProgress(80);\n        setOrders(processedData);\n        setGlobalProgress(90);\n\n        //  Pokej chvli aby se splash stihl zobrazit\n        await new Promise(resolve => setTimeout(resolve, 600));\n\n        //  TEPRVE TE VYPNU LOADING - data jsou v tabulce!\n        setLoading(false);\n        doneGlobalProgress();\n\n      } catch (err) {\n  try { const code = getErrorCodeCZ(err) || ''; if (code === 'chyba_serveru' || code === 'server_error') { setError('Chyba na serveru. Zkuste to prosm pozdji.'); } else { setError(getUserErrorMessage(err) || 'Nepodailo se nast data.'); } } catch(e) { setError(getUserErrorMessage(err) || 'Nepodailo se nast data.'); }\n  try { const code = getErrorCodeCZ(err) || ''; if (code === 'chyba_serveru' || code === 'server_error') { try { setTimeout(() => { resetGlobalProgress && resetGlobalProgress(); }, 2200); } catch(e) {} } } catch(e) {}\n  setLoading(false);\n  doneGlobalProgress();\n      } finally {\n        //  U TADY NIC NEDLM - loading je vypnut ve!\n      }\n    };\n\n    fetchOrders();\n  }, [yearFilter, selectedMonth, doneGlobalProgress, processOrders, setGlobalProgress, startGlobalProgress, token, username, user_id, getAttachmentTableName, selectedDbSource, calculateDateRange]);\n\n  // Save sorting to localStorage when it changes\n  useEffect(() => {\n    setUserStorage('orders_sorting', sorting);\n  }, [sorting]);\n\n  const formatPrice = (price) => {\n    if (isNaN(price)) return 'neuvedeno';\n    return `${Number(price).toLocaleString('cs-CZ')},- K`;\n  };\n\n  const highlightText = useCallback((text, searchTerm) => {\n    if (!searchTerm) return text;\n    const regex = new RegExp(`(${searchTerm})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  }, []);\n\n  const renderCellWithHighlight = useCallback((value, searchTerm) => {\n    if (typeof value !== 'string') return value;\n    return <span dangerouslySetInnerHTML={{ __html: highlightText(value, searchTerm) }} />;\n  }, [highlightText]);\n\n  const handleEditClick = (orderId) => {\n    // console.log('Editing order with ID:', orderId); // Debug log to verify the orderId\n    setSelectedOrderId(orderId); // Set the selected order ID\n    setIsModalOpen(true); // Open the modal\n  };\n\n  const handleMigrateOrders = async () => {\n    if (selectedOrders.size === 0) {\n      showToast('Nevybrali jste dn objednvky k pevodu', { type: 'warning' });\n      return;\n    }\n\n    // Otevt import modal\n    setIsImportModalOpen(true);\n  };\n\n  // Funkce pro voln API importu\n  const handleImportOldOrders = async (orderIds, { onProgress, onComplete, onError } = {}) => {\n    const orderTable = selectedDbSource || process.env.REACT_APP_DB_ORDER_KEY || 'objednavky0123';\n    const attachmentTable = getAttachmentTableName(orderTable);\n\n    // Validace ped volnm API\n    if (!token || !username || !user?.id) {\n      const error = new Error('Chyb pihlaovac daje! Token/username/userId nejsou nastaveny.');\n      if (onError) onError(error);\n      throw error;\n    }\n\n    try {\n      // Zkus SSE streaming endpoint (pokud backend podporuje)\n      try {\n        return await importOldOrders25Streaming({\n          token,\n          username,\n          userId: user?.id,\n          oldOrderIds: orderIds,\n          tabulkaObj: orderTable,\n          tabulkaOpriloh: attachmentTable,\n          onProgress,\n          onComplete,\n          onError\n        });\n      } catch (sseError) {\n        // Pokud SSE sele (404, nen implementovno), spadni na klasick API\n\n        const response = await importOldOrders25({\n          token,\n          username,\n          userId: user?.id,\n          oldOrderIds: orderIds,\n          tabulkaObj: orderTable,\n          tabulkaOpriloh: attachmentTable\n        });\n\n        // Simuluj onComplete callback pro kompatibilitu\n        if (onComplete) {\n          onComplete({\n            imported_count: response.imported_count,\n            updated_count: response.updated_count,\n            failed_count: response.failed_count,\n            total_count: response.total_count\n          });\n        }\n\n        return response;\n      }\n    } catch (error) {\n      if (onError) onError(error);\n      throw error;\n    }\n  };\n\n  // Callback po dokonen importu\n  const handleImportComplete = () => {\n    // Refresh seznam objednvek - force reload z aktuln databze\n    handleDbSourceChange(selectedDbSource);\n    // Vyistit vbr\n    setSelectedOrders(new Set());\n    showToast('Import byl spn dokonen', { type: 'success' });\n  };\n\n  // Handler pro zaven import dialogu - vyist checkboxy\n  const handleImportModalClose = () => {\n    setIsImportModalOpen(false);\n    // Vyistit vbr po zaven (i kdy import nebyl dokonen)\n    setSelectedOrders(new Set());\n  };\n\n  const [attachments, setAttachments] = useState({});\n  const [attachmentsLoading, setAttachmentsLoading] = useState({});\n\n  const fetchAttachments = async (orderId) => {\n    try {\n      setAttachmentsLoading((prev) => ({ ...prev, [orderId]: true })); // Set loading state for the specific order ID\n\n  // New API2-auth wrapper to call old_endpoints.php with action 'react-attachment-id'\n  const data = await fetchOrderAttachmentsOld({ id: orderId, token, username });\n\n      if (Array.isArray(data)) {\n        setAttachments((prev) => ({ ...prev, [orderId]: data })); // Update the attachments state\n      } else {\n        setAttachments((prev) => ({ ...prev, [orderId]: [] })); // Set empty array if format is invalid\n      }\n    } catch (err) {\n      setAttachments((prev) => ({ ...prev, [orderId]: [] })); // Set empty array on error\n    } finally {\n      setAttachmentsLoading((prev) => ({ ...prev, [orderId]: false })); // Reset loading state\n    }\n  };\n\n  // Pro star objednvky ped 2026 pouvme pvodn eeo.zachranka.cz URL\n  const attachmentBaseUrl = process.env.REACT_APP_LEGACY_ATTACHMENTS_BASE_URL || 'https://eeo.zachranka.cz/prilohy/';\n\n  const handleOrderUpdated = () => {\n    // Force reload z aktuln databze po update objednvky\n    handleDbSourceChange(selectedDbSource);\n  };\n\n  const columns = useMemo(() => [\n    {\n      id: 'select',\n      header: ({ table }) => {\n        const allRowIds = filteredData.map(order => order.id);\n        const isAllSelected = allRowIds.length > 0 && allRowIds.every(id => selectedOrders.has(id));\n        const isSomeSelected = allRowIds.some(id => selectedOrders.has(id));\n        return (\n          <input\n            type=\"checkbox\"\n            checked={isAllSelected}\n            ref={input => {\n              if (input) input.indeterminate = isSomeSelected && !isAllSelected;\n            }}\n            onChange={(e) => handleSelectAll(e.target.checked)}\n            title=\"Vybrat ve\"\n            style={{ cursor: 'pointer' }}\n          />\n        );\n      },\n      size: 50,\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n          <input\n            type=\"checkbox\"\n            checked={selectedOrders.has(row.original.id)}\n            onChange={(e) => {\n              e.stopPropagation();\n              handleSelectOrder(row.original.id, e.target.checked);\n            }}\n            onClick={(e) => e.stopPropagation()}\n            style={{ cursor: 'pointer' }}\n          />\n        </div>\n      ),\n    },\n    {\n      id: 'expander',\n      header: ({ table }) => {\n        const isAllExpanded = table.getIsAllRowsExpanded();\n        return (\n          <ExpandButton\n            onClick={() => table.toggleAllRowsExpanded()}\n            title={isAllExpanded ? 'SBALIT VE' : 'ROZBALIT VE'}\n          >\n            <FontAwesomeIcon icon={isAllExpanded ? faMinus : faPlus} />\n          </ExpandButton>\n        );\n      },\n      size: 50,\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n          <ExpandButton\n            onClick={(e) => { e.stopPropagation(); row.toggleExpanded(); }}\n            title={row.getIsExpanded() ? 'SBALIT' : 'ROZBALIT'}\n          >\n            <FontAwesomeIcon icon={row.getIsExpanded() ? faMinus : faPlus} />\n          </ExpandButton>\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'datum_p',\n      header: 'DATUM',\n      cell: (info) => info.getValue(),\n      sortingFn: (rowA, rowB) => {\n        const [dayA, monthA, yearA] = rowA.original.datum_p.split('.').map(Number);\n        const [dayB, monthB, yearB] = rowB.original.datum_p.split('.').map(Number);\n        return new Date(yearA, monthA - 1, dayA) - new Date(yearB, monthB - 1, dayB);\n      },\n    },\n    { accessorKey: 'faktura', header: <span title=\"Faktura\">F</span>, size: 50, cell: (info) => <div className=\"centered-cell\">{info.getValue() === \"Ano\" ? '' : ''}</div> },\n    { accessorKey: 'pokladni_dok', header: <span title=\"Pokladn doklad\">P</span>, size: 50, cell: (info) => <div className=\"centered-cell\">{info.getValue() === \"Ano\" ? '' : ''}</div> },\n    { accessorKey: 'zverejnit', header: <span title=\"Zveejnno v registru\">R</span>, size: 50, cell: (info) => <div className=\"centered-cell\">{info.getValue() === \"Ano\" ? '' : ''}</div> },\n    { accessorKey: 'evidencni_c', header: 'EV.SLO', cell: (info) => renderCellWithHighlight(info.getValue(), globalFilter) },\n  // Align left: plain text value for section (SEK)\n  { accessorKey: 'garant', header: 'SEK', cell: (info) => info.getValue() },\n    { accessorKey: 'userCreator', header: 'VYTVOIL', cell: (info) => renderCellWithHighlight(info.getValue(), globalFilter) },\n  // Align left: plain text value for contract type (DRUH)\n  { accessorKey: 'druh_sml', header: 'DRUH', cell: (info) => info.getValue() },\n    { accessorKey: 'partner_nazev', header: 'PARTNER', cell: (info) => renderCellWithHighlight(info.getValue(), globalFilter) },\n    {\n      accessorKey: 'cena',\n      header: 'CENA',\n      cell: (info) => <div style={{textAlign:\"right\"}}>{formatPrice(info.getValue())}</div>\n    },\n    {\n      accessorKey: 'cena_rok',\n      header: 'CENA S DPH',\n      cell: (info) => <div style={{textAlign:\"right\"}}>{formatPrice(info.getValue())}</div>\n    },\n    {\n      accessorKey: 'cislo_lp',\n      header: 'LP',\n      cell: (info) => <div className=\"centered-cell\">{info.getValue()}</div>\n    },\n    {\n      accessorKey: 'prilohy',\n      header: (\n        <FontAwesomeIcon icon={faPaperclip} title=\"Plohy\" />\n      ),\n      size: 50,\n      cell: ({ row }) => (\n        <div className=\"centered-cell\">\n          {row.original.prilohy}\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'actions',\n      header: 'AKCE',\n      size: 90,\n      cell: ({ row }) => {\n        const viewOnly = true; // static for Orders page\n        if (viewOnly) {\n          return (\n            <div className=\"action-icons view-only-disabled\" title=\"Pouze nhled\">\n              <div className=\"view-only-text\">VIEW ONLY</div>\n              <div className=\"icons-row\">\n                <button className=\"action-button\" disabled><FontAwesomeIcon icon={faEdit} /></button>\n                <button className=\"action-button\" disabled><FontAwesomeIcon icon={faCopy} /></button>\n                <button className=\"action-button\" disabled><FontAwesomeIcon icon={faFileAlt} /></button>\n                <button className=\"action-button\" disabled><FontAwesomeIcon icon={faTrash} /></button>\n              </div>\n            </div>\n          );\n        }\n        return (\n          <div className=\"action-icons\">\n            <button\n              className=\"action-button\"\n              title=\"Editace objednvky\"\n              onClick={() => handleEditClick(row.original.id)}\n            >\n              <FontAwesomeIcon icon={faEdit} />\n            </button>\n            <button className=\"action-button\" title=\"Kopie objednvky\">\n              <FontAwesomeIcon icon={faCopy} />\n            </button>\n            <button className=\"action-button\" title=\"Vytvoit ablonu z objednvky\">\n              <FontAwesomeIcon icon={faFileAlt} />\n            </button>\n            <button className=\"action-button\" title=\"Smazat objednvku\">\n              <FontAwesomeIcon icon={faTrash} />\n            </button>\n          </div>\n        );\n      },\n    },\n  ], [renderCellWithHighlight, globalFilter, selectedOrders, handleSelectAll, handleSelectOrder]);\n\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    state: {\n      globalFilter,\n      sorting,\n      expanded, //  Pidn kontrolovan state pro rozbalen dky\n      pagination: {\n        pageIndex: currentPageIndex,\n        pageSize: pageSize,\n      },\n    },\n    onGlobalFilterChange: setGlobalFilter,\n    onSortingChange: setSorting,\n    onExpandedChange: setExpanded, //  Handler pro zmnu expanded state\n    onPaginationChange: (updater) => {\n      if (typeof updater === 'function') {\n        const newPagination = updater({ pageIndex: currentPageIndex, pageSize: pageSize });\n        setCurrentPageIndex(newPagination.pageIndex);\n        setPageSize(newPagination.pageSize);\n      }\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getExpandedRowModel: getExpandedRowModel(),\n    getRowCanExpand: (row) => row.original.subRows?.length > 0,\n    manualPagination: false,\n  });\n\n  const handleCellClick = (value) => {\n    if (value) {\n      navigator.clipboard.writeText(value).catch((err) => { console.error('Nepodailo se zkoprovat text: ', err); });\n    }\n  };\n\n  const renderPageNumbers = () => {\n    const totalPages = table.getPageCount();\n    const currentPage = table.getState().pagination.pageIndex;\n\n    if (totalPages <= 5) {\n      return Array.from({ length: totalPages }, (_, index) => (\n        <button\n          key={index}\n          onClick={() => table.setPageIndex(index)}\n          className={`pagination-number ${\n            currentPage === index ? 'active' : ''\n          }`}\n        >\n          {index + 1}\n        </button>\n      ));\n    }\n\n    const startPage = Math.max(1, currentPage - 1);\n    const endPage = Math.min(totalPages - 2, currentPage + 1);\n\n    return (\n      <>\n        <button\n          onClick={() => table.setPageIndex(0)}\n          className={`pagination-number ${currentPage === 0 ? 'active' : ''}`}\n        >\n          1\n        </button>\n        {startPage > 1 && <span className=\"pagination-ellipsis\">...</span>}\n        {Array.from({ length: endPage - startPage + 1 }, (_, index) => {\n          const pageIndex = startPage + index;\n          return (\n            <button\n            key={pageIndex}\n            onClick={() => table.setPageIndex(pageIndex)}\n            className={`pagination-number ${\n              currentPage === pageIndex ? 'active' : ''\n            }`}\n          >\n            {pageIndex + 1}\n          </button>\n        );\n      })}\n      {endPage < totalPages - 2 && <span className=\"pagination-ellipsis\">...</span>}\n      <button\n        onClick={() => table.setPageIndex(totalPages - 1)}\n        className={`pagination-number ${\n          currentPage === totalPages - 1 ? 'active' : ''\n        }`}\n      >\n        {totalPages}\n      </button>\n    </>\n  );\n};\nconst renderSubRows = (row) => {\n  return (\n    <tr>\n      <td colSpan={columns.length} style={{ padding: 0 }}>\n        <ExpandedContent>\n          <ExpandedGrid>\n            {row.original.subRows?.map((subRow, index) => (\n              <React.Fragment key={`${row.id}-subrow-${index}`}>\n                {Object.entries(subRow).map(([group, details]) => {\n                  const isFullWidth = group === 'Obsah a poznmka';\n\n                  if (group === 'Zveejnno v registru') {\n                    return (\n                      <InfoCard key={group}>\n                        <InfoCardTitle>{details.title}</InfoCardTitle>\n                        {details.details.map((detail, i) => (\n                          <InfoRow key={i}>\n                            <InfoValue\n                              style={{ textAlign: 'left', width: '100%' }}\n                              dangerouslySetInnerHTML={{ __html: highlightText(detail, globalFilter) }}\n                            />\n                          </InfoRow>\n                        ))}\n                      </InfoCard>\n                    );\n                  }\n\n                  return (\n                    <InfoCard key={group} $fullWidth={isFullWidth}>\n                      <InfoCardTitle>{group}</InfoCardTitle>\n                      {details.map((detail, i) => (\n                        <InfoRow key={i}>\n                          <InfoValue\n                            style={{ textAlign: 'left', width: '100%' }}\n                            dangerouslySetInnerHTML={{ __html: highlightText(detail, globalFilter) }}\n                          />\n                        </InfoRow>\n                      ))}\n                    </InfoCard>\n                  );\n                })}\n              </React.Fragment>\n            ))}\n\n            {/* Plohy sekce */}\n            <InfoCard $fullWidth>\n              <InfoCardTitle>\n                <span>Plohy ({row.original.prilohy})</span>\n                {row.original.prilohy > 0 && (\n                  <button\n                    onClick={() => fetchAttachments(row.original.id)}\n                    disabled={attachmentsLoading[row.original.id]}\n                    title=\"Nast plohy\"\n                    style={{\n                      padding: '4px',\n                      backgroundColor: 'transparent',\n                      color: '#3b82f6',\n                      border: 'none',\n                      cursor: 'pointer',\n                      fontSize: '1.125rem',\n                    }}\n                  >\n                    <FontAwesomeIcon icon={faDownload} />\n                  </button>\n                )}\n              </InfoCardTitle>\n              {attachments[row.original.id] && attachments[row.original.id].length > 0 ? (\n                <div>\n                  {attachments[row.original.id].map((attachment, index) => {\n                    // Detekce ppony pro rozhodnut, zda otevt v prohlei nebo sthnout\n                    const fileName = attachment.soubor || '';\n                    const ext = fileName.split('.').pop()?.toLowerCase();\n                    const previewableExtensions = [\n                      'pdf', 'jpg', 'jpeg', 'png', 'gif', 'svg', 'webp', 'bmp',\n                      'txt', 'html', 'htm', 'xml', 'json', 'csv',\n                      'mp4', 'webm', 'ogg', 'mp3', 'wav'\n                    ];\n                    const shouldPreview = previewableExtensions.includes(ext);\n\n                    return (\n                      <InfoRow key={index}>\n                        <InfoValue style={{ textAlign: 'left', width: '100%' }}>\n                          <a\n                            href={`${attachmentBaseUrl}${attachment.soubor}`}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            {...(!shouldPreview && { download: fileName })}\n                            style={{ color: '#3b82f6', textDecoration: 'underline', fontWeight: 600 }}\n                          >\n                            {attachment.soubor}\n                          </a>\n                          {attachment.popis && <span style={{ color: '#64748b', marginLeft: '0.5rem' }}>: {attachment.popis}</span>}\n                        </InfoValue>\n                      </InfoRow>\n                    );\n                  })}\n                </div>\n              ) : (\n                <InfoRow>\n                  <InfoValue style={{ textAlign: 'left', color: '#9ca3af' }}>\n                    {attachments[row.original.id] ? 'dn plohy' : 'Plohy nebyly nateny'}\n                  </InfoValue>\n                </InfoRow>\n              )}\n            </InfoCard>\n          </ExpandedGrid>\n        </ExpandedContent>\n      </td>\n    </tr>\n  );\n};\n\n// Loading: nechme strnku vykreslenou, data se dopln a po fetchi (progress bar indikuje prbh)\n\nif (error) {\n  return (\n    <>\n      <OrdersPageStyles />\n      <div className=\"error-message\">{error}</div>\n    </>\n  );\n}\n\n  // TODO: replace viewOnly constant with real permission logic\n  const viewOnly = true; // temporary flag\n\nreturn (\n  <div className={`orders-page ${viewOnly ? 'view-only' : ''}`} style={{ position: 'relative' }}>\n    <OrdersPageStyles />\n    {/* Loading overlay with blur and fade effects */}\n    <LoadingOverlay $visible={loading}>\n      <LoadingSpinner $visible={loading} />\n      <LoadingMessage $visible={loading}>Natn objednvek</LoadingMessage>\n      <LoadingSubtext $visible={loading}>Zpracovvm data z databze...</LoadingSubtext>\n    </LoadingOverlay>\n\n    <PageContent $blurred={loading}>\n\n    {/* Pvodn dimming overlay pro jemn loading stavy */}\n    {false && (\n      <div style={{\n        position: 'absolute',\n        inset: 0,\n        background: 'rgba(255, 255, 255, 0.75)',\n        zIndex: 10,\n        pointerEvents: 'none',\n        transition: 'opacity 0.3s ease',\n        borderRadius: 'inherit'\n      }} />\n    )}\n\n    {/* Header Panel podle vzoru Orders25List - NAD dashboardem */}\n    <YearFilterPanel>\n      <YearFilterLeft>\n        <YearFilterLabel>\n          <FontAwesomeIcon icon={faCalendarAlt} />\n          Rok:\n        </YearFilterLabel>\n        <YearDropdownContainer ref={yearSelectRef}>\n          <YearDropdownButton onClick={toggleYearDropdown}>\n            <span>{yearFilter}</span>\n            <FontAwesomeIcon icon={isYearDropdownOpen ? faChevronUp : faChevronDown} />\n          </YearDropdownButton>\n          {isYearDropdownOpen && (\n            <YearDropdownMenu>\n              {yearOptions.map(year => (\n                <YearDropdownItem key={year} onClick={() => handleYearFilterChange(year)}>\n                  {year}\n                </YearDropdownItem>\n              ))}\n            </YearDropdownMenu>\n          )}\n        </YearDropdownContainer>\n\n        <MonthFilterLabel>\n          <FontAwesomeIcon icon={faCalendarAlt} />\n          Obdob:\n        </MonthFilterLabel>\n        <MonthDropdownContainer ref={monthSelectRef}>\n          <MonthDropdownButton onClick={toggleMonthDropdown}>\n            <span>{getMonthLabel(selectedMonth)}</span>\n            <FontAwesomeIcon icon={isMonthDropdownOpen ? faChevronUp : faChevronDown} />\n          </MonthDropdownButton>\n          {isMonthDropdownOpen && (\n            <MonthDropdownMenu>\n              <MonthDropdownItem onClick={() => handleMonthChange('all')}>\n                Vechny msce\n              </MonthDropdownItem>\n              <MonthDropdownItem onClick={() => handleMonthChange('last-month')}>\n                Posledn msc\n              </MonthDropdownItem>\n              <MonthDropdownItem onClick={() => handleMonthChange('last-quarter')}>\n                Posledn kvartl\n              </MonthDropdownItem>\n              <MonthDropdownItem onClick={() => handleMonthChange('last-half')}>\n                Posledn plrok\n              </MonthDropdownItem>\n\n              {!showExpandedMonths ? (\n                <>\n                  <MonthDropdownItem separator disabled>\n                    \n                  </MonthDropdownItem>\n                  <MonthDropdownItem action onClick={() => handleMonthChange('show-more')}>\n                     Zobrazit dal...\n                  </MonthDropdownItem>\n                </>\n              ) : (\n                <>\n                  <MonthDropdownItem separator disabled>\n                    \n                  </MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('1')}>Leden</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('2')}>nor</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('3')}>Bezen</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('4')}>Duben</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('5')}>Kvten</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('6')}>erven</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('7')}>ervenec</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('8')}>Srpen</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('9')}>Z</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('10')}>jen</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('11')}>Listopad</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('12')}>Prosinec</MonthDropdownItem>\n                  <MonthDropdownItem separator disabled>\n                    \n                  </MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('1-3')}>Q1 (Leden-Bezen)</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('4-6')}>Q2 (Duben-erven)</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('7-9')}>Q3 (ervenec-Z)</MonthDropdownItem>\n                  <MonthDropdownItem onClick={() => handleMonthChange('10-12')}>Q4 (jen-Prosinec)</MonthDropdownItem>\n                  <MonthDropdownItem separator disabled>\n                    \n                  </MonthDropdownItem>\n                  <MonthDropdownItem action onClick={() => handleMonthChange('show-less')}>\n                     Zobrazit mn\n                  </MonthDropdownItem>\n                </>\n              )}\n            </MonthDropdownMenu>\n          )}\n        </MonthDropdownContainer>\n\n        <YearFilterLabel style={{ marginLeft: '2rem' }}>\n          <FontAwesomeIcon icon={faDatabase} />\n          Databze:\n        </YearFilterLabel>\n        <YearDropdownContainer ref={dbSourceSelectRef}>\n          <YearDropdownButton onClick={toggleDbSourceDropdown}>\n            <span style={{ fontFamily: 'monospace', fontSize: '0.9rem' }}>{selectedDbSource}</span>\n            <FontAwesomeIcon icon={isDbSourceDropdownOpen ? faChevronUp : faChevronDown} />\n          </YearDropdownButton>\n          {isDbSourceDropdownOpen && (\n            <YearDropdownMenu>\n              {availableDbSources.map(dbSource => (\n                <YearDropdownItem\n                  key={dbSource}\n                  onClick={() => handleDbSourceChange(dbSource)}\n                  style={{\n                    fontFamily: 'monospace',\n                    fontSize: '0.9rem',\n                    background: dbSource === selectedDbSource ? 'rgba(255, 255, 255, 0.2)' : 'transparent'\n                  }}\n                >\n                  {dbSource}\n                  {dbSource === selectedDbSource && ' '}\n                </YearDropdownItem>\n              ))}\n            </YearDropdownMenu>\n          )}\n        </YearDropdownContainer>\n\n        <HeaderActions>\n          <HeaderActionButton\n            onClick={() => handleDbSourceChange(selectedDbSource)}\n            title=\"Aktualizovat seznam objednvek (force reload z databze)\"\n            disabled={loading}\n          >\n            <FontAwesomeIcon\n              icon={faSyncAlt}\n              spin={loading}\n            />\n          </HeaderActionButton>\n\n          {/* Import tlatko - pouze pro uivatele s oprvnnm ORDER_MANAGE nebo ORDER_IMPORT */}\n          {hasPermission && (hasPermission('ORDER_MANAGE') || hasPermission('ORDER_IMPORT')) && (\n            <HeaderActionButton\n              onClick={handleMigrateOrders}\n              disabled={selectedOrders.size === 0}\n              title={selectedOrders.size === 0 ? 'Vyberte objednvky k pevodu' : `Pevst ${selectedOrders.size} vybranch objednvek do nov DB`}\n            >\n              <FontAwesomeIcon icon={faArrowRight} />\n            </HeaderActionButton>\n          )}\n        </HeaderActions>\n      </YearFilterLeft>\n\n      <YearFilterTitle>\n        {lastLoadSource && (\n          <CacheStatusIconWrapper>\n            <CacheStatusIcon fromCache={lastLoadSource === 'cache'}>\n              <FontAwesomeIcon icon={lastLoadSource === 'cache' ? faBoltLightning : faDatabase} />\n            </CacheStatusIcon>\n            <div className=\"tooltip top\" data-icon=\"none\">\n              {lastLoadSource === 'cache'\n                ? ' Nateno z cache (pamti) - rychl zobrazen bez dotazu na databzi'\n                : ' Nateno z databze - aktuln data pmo ze serveru'\n              }\n              {lastLoadTime && (\n                <div style={{ fontSize: '0.75rem', marginTop: '0.25rem', opacity: 0.8 }}>\n                   {new Date(lastLoadTime).toLocaleTimeString('cs-CZ')}\n                  {lastLoadDuration !== null && (\n                    <span style={{ marginLeft: '0.5rem' }}>\n                       {lastLoadDuration}ms\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n          </CacheStatusIconWrapper>\n        )}\n        Seznam objednvek\n        <FontAwesomeIcon icon={faFileInvoice} />\n      </YearFilterTitle>\n    </YearFilterPanel>\n\n    <PageDivider />\n\n    <div style={{\n      opacity: loading ? 0.6 : 1,\n      transition: 'opacity 0.3s ease'\n    }}>\n\n    {/* Dashboard - dladice */}\n    {!isCollapsed && (\n      <DashboardPanel>\n        <DashboardGrid>\n          <LargeStatCard $color=\"#4caf50\">\n            <div>\n              <LargeStatValue>\n                {Math.round(totalPriceFromDB).toLocaleString('cs-CZ')}&nbsp;K\n              </LargeStatValue>\n              <LargeStatLabel>\n                Celkov cena s DPH za obdob\n              </LargeStatLabel>\n              <div style={{\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                color: '#64748b',\n                textAlign: 'center',\n                marginBottom: '1rem'\n              }}>\n                Celkem: {totalOrdersFromDB} {totalOrdersFromDB === 1 ? 'objednvka' : 'objednvek'} za obdob\n              </div>\n              {(() => {\n                // Priorita: vybran checkboxy > aktivn filtry\n                if (selectedOrders.size > 0) {\n                  return (\n                    <div style={{\n                      marginTop: '0.75rem',\n                      paddingTop: '0.75rem',\n                      borderTop: '1px solid rgba(100, 116, 139, 0.2)'\n                    }}>\n                      <div style={{\n                        fontSize: '1.25rem',\n                        fontWeight: '700',\n                        color: '#3b82f6',\n                        textAlign: 'center',\n                        marginBottom: '0.25rem'\n                      }}>\n                        {Math.round(selectedOrdersTotalPrice).toLocaleString('cs-CZ')}&nbsp;K\n                      </div>\n                      <div style={{\n                        fontSize: '0.75rem',\n                        fontWeight: '600',\n                        color: '#3b82f6',\n                        textAlign: 'center'\n                      }}>\n                        Celkov cena za vybran ({selectedOrders.size})\n                      </div>\n                    </div>\n                  );\n                }\n\n                const hasActiveFilters =\n                  globalFilter ||\n                  garantFilter ||\n                  druhFilter ||\n                  fakturaFilter ||\n                  pokladniDokFilter ||\n                  zverejnitFilter;\n\n                if (hasActiveFilters && filteredData.length < orders.length) {\n                  return (\n                    <div style={{\n                      marginTop: '0.75rem',\n                      paddingTop: '0.75rem',\n                      borderTop: '1px solid rgba(100, 116, 139, 0.2)'\n                    }}>\n                      <div style={{\n                        fontSize: '1.25rem',\n                        fontWeight: '700',\n                        color: '#f59e0b',\n                        textAlign: 'center',\n                        marginBottom: '0.25rem'\n                      }}>\n                        {Math.round(filteredTotalPrice).toLocaleString('cs-CZ')}&nbsp;K\n                      </div>\n                      <div style={{\n                        fontSize: '0.75rem',\n                        fontWeight: '600',\n                        color: '#f59e0b',\n                        textAlign: 'center'\n                      }}>\n                        Celkov cena za vybran ({filteredData.length})\n                      </div>\n                    </div>\n                  );\n                }\n                return null;\n              })()}\n            </div>\n\n            <SummaryRow>\n              <SummaryItem\n                $color=\"#ff5722\"\n                $bg=\"rgba(255, 87, 34, 0.08)\"\n              >\n                <SummaryLabel $color=\"#bf360c\">Plohy</SummaryLabel>\n                <SummaryValue>{totalAttachments}</SummaryValue>\n              </SummaryItem>\n\n              <SummaryItem\n                $color=\"#ff9800\"\n                $bg=\"rgba(255, 152, 0, 0.08)\"\n              >\n                <SummaryLabel $color=\"#e65100\">S fakturou</SummaryLabel>\n                <SummaryValue>{filteredWithInvoice}</SummaryValue>\n              </SummaryItem>\n            </SummaryRow>\n          </LargeStatCard>\n\n          <StatCard $color=\"#2196f3\">\n            <StatHeader>\n              <StatValue>{filteredTotalOrders}</StatValue>\n              <StatIcon $color=\"#2196f3\">\n                <FontAwesomeIcon icon={faFileInvoice} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>Celkov poet za obdob</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#ff5722\">\n            <StatHeader>\n              <StatValue>{totalAttachments}</StatValue>\n              <StatIcon $color=\"#ff5722\">\n                <FontAwesomeIcon icon={faPaperclip} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>Pipojen plohy za obdob</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#ff9800\">\n            <StatHeader>\n              <StatValue>{filteredWithInvoice}</StatValue>\n              <StatIcon $color=\"#ff9800\">\n                <FontAwesomeIcon icon={faFileInvoiceDollar} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>S fakturou za obdob</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#9c27b0\">\n            <StatHeader>\n              <StatValue>{filteredWithCashDocument}</StatValue>\n              <StatIcon $color=\"#9c27b0\">\n                <FontAwesomeIcon icon={faCashRegister} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>S pokladnm dokladem za obdob</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#3f51b5\">\n            <StatHeader>\n              <StatValue>{filteredPublished}</StatValue>\n              <StatIcon $color=\"#3f51b5\">\n                <FontAwesomeIcon icon={faGlobe} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>Zveejnn v registru za obdob</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#4caf50\">\n            <StatHeader>\n              <StatValue>{resolvedOrders}</StatValue>\n              <StatIcon $color=\"#4caf50\">\n                <FontAwesomeIcon icon={faCheckCircle} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>Vyzen</StatLabel>\n          </StatCard>\n\n          <StatCard $color=\"#f44336\">\n            <StatHeader>\n              <StatValue>{unresolvedOrders}</StatValue>\n              <StatIcon $color=\"#f44336\">\n                <FontAwesomeIcon icon={faTimesCircle} />\n              </StatIcon>\n            </StatHeader>\n            <StatLabel>Nevyzen</StatLabel>\n          </StatCard>\n        </DashboardGrid>\n      </DashboardPanel>\n    )}\n\n    <div className=\"collapse-line\" style={{ marginTop: '0.5rem', marginBottom: '2.5rem' }}>\n      <span className=\"dashboard-label\">Dashboard - pehled</span>\n      <hr className=\"divider-line\" />\n      <button className=\"collapse-button\" onClick={toggleCollapse}>\n        <FontAwesomeIcon icon={isCollapsed ? faChevronDown : faChevronUp} />\n      </button>\n    </div>\n\n    {/* Grafy - statistiky */}\n    {!isStatsCollapsed && (\n      <div className=\"orders-boxes\">\n        <div className=\"orders-box stats-box\" style={{ flex: '1 1 100%' }}>\n          <div className=\"header-with-icon\">\n            <FontAwesomeIcon icon={faChartPie} className=\"header-icon-large\" />\n            <h1 className=\"page-title\">Statistika objednvek</h1>\n          </div>\n          <Statistics filteredOrders={filteredData} selectedYear={yearFilter} lpsData={lpsData} />\n        </div>\n      </div>\n    )}\n\n    <div className=\"collapse-line\" style={{ marginTop: '0.5rem', marginBottom: '2.5rem' }}>\n      <span className=\"dashboard-label\">Grafy a statistiky</span>\n      <hr className=\"divider-line\" />\n      <button className=\"collapse-button\" onClick={toggleStatsCollapse}>\n        <FontAwesomeIcon icon={isStatsCollapsed ? faChevronDown : faChevronUp} />\n      </button>\n    </div>\n    </div>\n\n    {selectedOrders.size > 0 && (\n      <div className=\"total-orders\">\n        <span style={{ color: '#f59e0b', fontWeight: 'bold' }}>\n          Vybrno: {selectedOrders.size}\n        </span>\n      </div>\n    )}\n\n    <div className=\"filter-box\" style={{ display: isFilterCollapsed ? 'none' : 'flex' }}>\n      <div className=\"filter-buttons\">\n        <button\n          className={`filter-button ${fakturaFilter ? 'active' : ''}`}\n          onClick={toggleFakturaFilter}\n          title=\"Faktura\"\n        >\n          F\n        </button>\n        <button\n          className={`filter-button ${pokladniDokFilter ? 'active' : ''}`}\n          onClick={togglePokladniDokFilter}\n          title=\"Pokladn doklad\"\n        >\n          P\n        </button>\n        <button\n          className={`filter-button ${zverejnitFilter ? 'active' : ''}`}\n          onClick={toggleZverejnitFilter}\n          title=\"Zveejnit v registru\"\n        >\n          R\n        </button>\n      </div>\n      <div className=\"filter-input-wrapper\">\n        <div className=\"search-icon\"><FontAwesomeIcon icon={faSearch} /></div>\n        <input\n          type=\"text\"\n          placeholder=\"Rychl filtr...\"\n          value={globalFilter}\n          onChange={(e) => handleGlobalFilterChange(e.target.value)}\n          className=\"filter-input\"\n        />\n        {globalFilter && <button className=\"clear-filter-button\" onClick={() => handleGlobalFilterChange('')} aria-label=\"Vyistit\"></button>}\n      </div>\n      <div className=\"filter-group\">\n        <select\n          value={garantFilter}\n          onChange={(e) => handleGarantFilterChange(e.target.value)}\n          className=\"filter-select select-with-arrow\"\n        >\n          <option value=\"\">Vechny seky</option>\n          {[...new Set(orders.map((order) => order.garant))].map((garant) => (\n            <option key={garant} value={garant}>\n              {garant}\n            </option>\n          ))}\n        </select>\n        <select\n          value={druhFilter}\n          onChange={(e) => handleDruhFilterChange(e.target.value)}\n          className=\"filter-select select-with-arrow\"\n        >\n          <option value=\"\">Vechny druhy</option>\n          {[...new Set(orders.map((order) => order.druh_sml))].map((druh) => (\n            <option key={druh} value={druh}>\n              {druh}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n    <div className=\"collapse-line\" style={{ marginTop: '0.5rem', marginBottom: '2.5rem' }}>\n      <span className=\"dashboard-label\">Filter objednvek</span>\n      <hr className=\"divider-line\" />\n      <button className=\"collapse-button\" onClick={toggleFilterCollapse}>\n        <FontAwesomeIcon icon={isFilterCollapsed ? faChevronDown : faChevronUp} />\n      </button>\n    </div>\n\n    {/* Table with Scroll Controls */}\n    <TableScrollWrapper\n      ref={setTableWrapperRef}\n      $showLeftShadow={showLeftShadow}\n      $showRightShadow={showRightShadow}\n    >\n      <TableContainer ref={setTableContainerRef}>\n      <Table>\n        <TableHead>\n          {table.getHeaderGroups().map((headerGroup) => (\n            <tr key={headerGroup.id}>\n              {headerGroup.headers.map((header) => {\n                const canSort = header.column.getCanSort && header.column.getCanSort();\n                const sorted = header.column.getIsSorted && header.column.getIsSorted();\n                let caret = null;\n                if (sorted === 'asc') caret = <span style={{marginLeft:6, opacity:0.95}}><FontAwesomeIcon icon={faChevronUp} style={{fontSize:'12px', color:'#fff'}} /></span>;\n                else if (sorted === 'desc') caret = <span style={{marginLeft:6, opacity:0.95}}><FontAwesomeIcon icon={faChevronDown} style={{fontSize:'12px', color:'#fff'}} /></span>;\n                return (\n                  <TableHeader\n                    key={header.id}\n                    style={{\n                      width: header.column.getSize ? header.column.getSize() : undefined\n                    }}\n                    onClick={canSort ? header.column.getToggleSortingHandler() : undefined}\n                    title={canSort ? (sorted === 'asc' ? 'azeno vzestupn  klik pro sestupn' : sorted === 'desc' ? 'azeno sestupn  klik pro zruen' : 'Klik pro azen') : undefined}\n                  >\n                    {header.isPlaceholder ? null : (\n                      <div style={{display:'inline-flex', alignItems:'center', justifyContent:'center', width:'100%'}}>\n                        {flexRender(header.column.columnDef.header, header.getContext())}\n                        {caret}\n                      </div>\n                    )}\n                  </TableHeader>\n                );\n              })}\n            </tr>\n          ))}\n        </TableHead>\n        <tbody>\n          {table.getRowModel().rows.map((row, index) => (\n            <React.Fragment key={row.id}>\n              <TableRow\n                $isEven={index % 2 === 0}\n                onDoubleClick={() => row.toggleExpanded()}\n                style={{ cursor: 'pointer' }}\n              >\n                {row.getVisibleCells().map((cell) => (\n                  <TableCell\n                    key={cell.id}\n                    onClick={() => handleCellClick(cell.getValue())}\n                    style={{ cursor: 'copy' }}\n                  >\n                    {renderCellWithHighlight(\n                      flexRender(cell.column.columnDef.cell, cell.getContext()),\n                      globalFilter\n                    )}\n                  </TableCell>\n                ))}\n              </TableRow>\n              {row.getIsExpanded() && renderSubRows(row)}\n            </React.Fragment>\n          ))}\n        </tbody>\n      </Table>\n\n      {/* Pagination */}\n      <PaginationContainer>\n      <PaginationInfo>\n        Zobrazeno {table.getRowModel().rows.length} z {filteredData.length} objednvek\n        {filteredData.length !== orders.length && (\n          <span> (filtrovno z {orders.length})</span>\n        )}\n      </PaginationInfo>\n\n      <PaginationControls>\n        <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n          Zobrazit:\n        </span>\n        <PageSizeSelect\n          value={pageSize}\n          onChange={(e) => {\n            const newSize = parseInt(e.target.value);\n            setPageSize(newSize);\n            // Resetuj na prvn strnku pi zmn velikosti strnky\n            setCurrentPageIndex(0);\n          }}\n        >\n          <option value={10}>10</option>\n          <option value={25}>25</option>\n          <option value={50}>50</option>\n          <option value={100}>100</option>\n          <option value={250}>250</option>\n        </PageSizeSelect>\n\n        <PageButton\n          onClick={() => {\n            setCurrentPageIndex(0);\n          }}\n          disabled={!table.getCanPreviousPage()}\n        >\n          \n        </PageButton>\n        <PageButton\n          onClick={() => {\n            setCurrentPageIndex(prev => Math.max(0, prev - 1));\n          }}\n          disabled={!table.getCanPreviousPage()}\n        >\n          \n        </PageButton>\n\n        <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n          Strnka {table.getState().pagination.pageIndex + 1} z {table.getPageCount()}\n        </span>\n\n        <PageButton\n          onClick={() => {\n            setCurrentPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n          }}\n          disabled={!table.getCanNextPage()}\n        >\n          \n        </PageButton>\n        <PageButton\n          onClick={() => {\n            setCurrentPageIndex(table.getPageCount() - 1);\n          }}\n          disabled={!table.getCanNextPage()}\n        >\n          \n        </PageButton>\n      </PaginationControls>\n    </PaginationContainer>\n    </TableContainer>\n    </TableScrollWrapper>\n\n    {/* Floating Scroll ipky - React Portal (FIXED position, mimo DOM tabulky) */}\n    {createPortal(\n      <>\n        <ScrollArrowLeft\n          $visible={showLeftArrow}\n          $tableHovered={isTableHovered}\n          $arrowHovered={isArrowHovered}\n          onClick={handleScrollLeft}\n          onMouseEnter={() => setIsArrowHovered(true)}\n          onMouseLeave={() => setIsArrowHovered(false)}\n          disabled={!showLeftArrow}\n          aria-label=\"Scrollovat doleva\"\n        >\n          <FontAwesomeIcon icon={faChevronLeft} />\n        </ScrollArrowLeft>\n\n        <ScrollArrowRight\n          $visible={showRightArrow}\n          $tableHovered={isTableHovered}\n          $arrowHovered={isArrowHovered}\n          onClick={handleScrollRight}\n          onMouseEnter={() => setIsArrowHovered(true)}\n          onMouseLeave={() => setIsArrowHovered(false)}\n          disabled={!showRightArrow}\n          aria-label=\"Scrollovat doprava\"\n        >\n          <FontAwesomeIcon icon={faChevronRight} />\n        </ScrollArrowRight>\n      </>,\n      document.body\n    )}\n\n    {/* Modals */}\n    <>\n      {isModalOpen && (\n        <OrderFormTabs\n          orderId={selectedOrderId} // Pass the selected order ID\n          onClose={handleCloseModal}\n          onOrderUpdated={handleOrderUpdated} // Pass the callback to refresh orders\n        />\n      )}\n    </>\n    </PageContent>\n\n    {/* Import Modal - MIMO PageContent, aby nebyl ovlivnn blur filterem */}\n    <ImportOldOrdersModal\n      isOpen={isImportModalOpen}\n      onClose={handleImportModalClose}\n      selectedOrderIds={Array.from(selectedOrders)}\n      onImportComplete={handleImportComplete}\n      importFunction={handleImportOldOrders}\n    />\n  </div>\n);\n};\n\nexport default Orders;\n"],"names":["TooltipWrapper","styled","div","_templateObject","_taggedTemplateLiteral","Tooltip","_templateObject2","props","$visible","$position","$multiline","_templateObject3","ModalOverlay","ModalContent","ModalHeader","ModalTitle","h2","_templateObject4","CloseButton","button","_templateObject5","ModalBody","_templateObject6","ProgressSection","_templateObject7","ProgressBar","_templateObject8","ProgressFill","_templateObject9","error","ProgressText","_templateObject0","SummaryBox","_templateObject1","type","SummaryTitle","_templateObject10","SummaryStats","_templateObject11","StatItem","_templateObject12","StatLabel","span","_templateObject13","StatValue","_templateObject14","ResultsList","_templateObject15","ResultItem","_templateObject16","SpinnerIcon","FontAwesomeIcon","_templateObject17","ModalFooter","_templateObject18","Button","_templateObject19","primary","_ref","_results$results","_results$results2","isOpen","onClose","selectedOrderIds","onImportComplete","importFunction","importing","setImporting","useState","progress","setProgress","currentOrder","setCurrentOrder","currentOperation","setCurrentOperation","currentProcessedCount","setCurrentProcessedCount","totalToImport","setTotalToImport","results","setResults","setError","expandedItems","setExpandedItems","Set","searchTerm","setSearchTerm","useEffect","handleClose","imported_count","filteredResults","filter","result","_result$cislo_objedna","_result$status","_result$error","_result$new_id","_result$polozky_count","_result$prilohy_count","searchLower","toLowerCase","cislo_objednavky","includes","status","new_id","toString","polozky_count","prilohy_count","prilohy_details","Array","isArray","priloha","_priloha$soubor","_priloha$popis","_priloha$error","soubor","popis","totalOrders","length","processedCount","importedCount","updatedCount","updated_count","failedCount","failed_count","ReactDOM","_jsx","onClick","e","target","currentTarget","children","_jsxs","icon","faFileImport","disabled","faTimes","style","marginBottom","color","margin","fontSize","fontFamily","process","width","concat","faSpinner","marginTop","padding","background","borderRadius","border","display","alignItems","gap","faTimesCircle","_Fragment","faCheckCircle","fontWeight","position","placeholder","value","onChange","outline","transition","onFocus","borderColor","onBlur","right","top","transform","cursor","title","map","index","isExpanded","has","isSuccess","isNew","operation","prev","newSet","delete","add","toggleExpand","onMouseEnter","onMouseLeave","height","justifyContent","flexShrink","minWidth","backgroundColor","whiteSpace","paddingLeft","paddingRight","paddingTop","paddingBottom","flexWrap","borderTop","pIdx","borderLeft","async","progressSimulation","startSimulation","simulatedProgress","setInterval","Math","min","estimatedProcessed","floor","operations","randomOp","random","response","onProgress","progressData","clearInterval","percentage","current","total","last_result","old_id","onComplete","completeData","onError","Error","JSON","stringify","err","errorMessage","message","errorData","data","validation_errors","validationErrors","Object","entries","forEach","_ref2","orderId","errors","detail","statusText","request","document","body","styles","css","OrdersPageStyles","Global","token","fullName","useContext","AuthContext","activeTab","setActiveTab","formData","setFormData","orderTypes","setOrderTypes","uploadedFiles","setUploadedFiles","garants","setGarants","attachments","setAttachments","attachmentsLoading","setAttachmentsLoading","attachmentsError","setAttachmentsError","memoryCache","useRef","formatFileSize","size","toFixed","generateSafeFilename","originalName","timestamp","Date","now","normalized","normalize","replace","extension","split","pop","handlePriceChange","name","prevData","_objectSpread","formatDateForInput","dateString","day","month","year","padStart","_data$","_data$2","_data$3","_data$4","_data$5","_data$6","_data$7","_data$8","_data$9","_data$0","_data$1","_data$10","_data$11","_data$12","_data$13","_data$14","_data$15","_data$16","_data$17","getOrderById","id","formattedData","partner_nazev","partner_adresa","partner_ic","poznamka","evidencni_c","datum_p","cena","cena_rok","druh_sml","obsah","tt_vyrc","tt_dinfo","zverejnit","dt_zverejneni","idds","garant","userCreator","faktura","pokladni_dok","localStorage","setItem","code","getErrorCodeCZ","fetchOrderData","types","getOrderTypes","fetchOrderTypes","getGarants","fetchGarants","fetchRemoteFileSize","useCallback","fetch","url","method","ok","contentLength","headers","get","parseInt","getAttachmentUrl","filename","updateAttachmentSizes","updatedAttachments","Promise","all","attachment","getAttachments","fetchAttachments","formattedDate","toISOString","handleInputChange","handleCheckboxChange","checked","handleTabChange","tab","className","modalOverlay","modalContent","modalHeader","closeButton","tabs","tabButton","tabContent","blockTitle","formBlock","flexRow","flexItem","modernLabel","modernInput","priceInput","formActions","actionButtons","creatorInfo","dragDropArea","uploadedFilesStyle","fileItem","fileStatusIcon","fileName","_templateObject20","fileSize","_templateObject21","fileDescriptionInput","_templateObject22","removeFileButton","_templateObject23","fileUploadButton","_templateObject24","fileUploadWrapper","_templateObject25","_templateObject26","_templateObject27","_templateObject28","_templateObject29","onSubmit","preventDefault","markedForDeletion","_templateObject30","_templateObject31","handleCalculatePriceWithVAT","updatedPriceWithVAT","priceWithoutVAT","numericValue","parseFloat","round","calculatePriceWithVAT","faCalculator","_templateObject32","handleCalculatePriceWithoutVAT","updatedPriceWithoutVAT","priceWithVAT","calculatePriceWithoutVAT","_templateObject33","htmlFor","_templateObject34","_templateObject35","selectedName","_templateObject36","_templateObject37","druh","rows","_templateObject38","_templateObject39","_templateObject40","_templateObject41","onDragOver","stopPropagation","dataTransfer","dropEffect","onDrop","newFiles","from","files","file","safeFilename","description","prevFiles","faUpload","multiple","fileObj","_templateObject42","fileURL","URL","createObjectURL","window","open","handleFileClick","handleDescriptionChange","i","_","handleRemoveFile","_templateObject43","_templateObject44","opacity","marginRight","href","rel","_templateObject45","textDecoration","handleFetchedDescriptionChange","attachmentId","prevAttachments","handleRemoveFetchedAttachment","ChartJS","register","ArcElement","Legend","ChartDataLabels","filteredOrders","selectedYear","lpsData","useMemo","getItem","totalPrice","reduce","sum","order","sectionData","sectionMap","acc","section","count","pieChartData","labels","item","datasets","slice","pieChartOptions","plugins","legend","tooltip","callbacks","label","context","raw","formattedValue","toLocaleString","datalabels","dataset","dataIndex","formatter","font","weight","align","offset","tableData","yearStart","yearEnd","lpMap","parseDate","Number","lp","platneOd","platne_od","platneDo","platne_do","category","kategorie","jmeno","garant_id","budget","ordersCount","ordersPrice","subRows","subRow","cisloLP","cislo_lp","cisloUctu","cislo_uctu","nazevUctu","nazev_uctu","vyse_financniho_kryti","existingSubRow","find","row","push","values","mainRow","columns","header","_ref3","table","isAllExpanded","getIsAllRowsExpanded","toggleAllRowsExpanded","cell","_ref4","toggleExpanded","getIsExpanded","accessorKey","info","textAlign","getValue","_ref5","difference","original","useReactTable","getCoreRowModel","getExpandedRowModel","getRowCanExpand","_row$original$subRows","renderTabContent","Pie","options","getHeaderGroups","headerGroup","flexRender","column","columnDef","getContext","getRowModel","React","getVisibleCells","diff","YearFilterPanel","PageDivider","YearFilterTitle","YearFilterLeft","YearFilterLabel","MonthFilterLabel","MonthDropdownContainer","YearDropdownContainer","YearDropdownButton","YearDropdownMenu","YearDropdownItem","MonthDropdownButton","MonthDropdownMenu","MonthDropdownItem","separator","action","HeaderActions","HeaderActionButton","LoadingOverlay","LoadingSpinner","LoadingMessage","LoadingSubtext","PaginationContainer","PaginationInfo","PaginationControls","PageButton","PageSizeSelect","select","PageContent","$blurred","CacheStatusIconWrapper","CacheStatusIcon","fromCache","DashboardPanel","DashboardGrid","LargeStatCard","$color","StatCard","$isActive","$clickable","StatHeader","StatIcon","LargeStatValue","LargeStatLabel","SummaryRow","SummaryItem","$bg","SummaryLabel","SummaryValue","TableScrollWrapper","$showLeftShadow","$showRightShadow","TableContainer","ScrollArrowLeft","$arrowHovered","$tableHovered","ScrollArrowRight","Table","TableHead","thead","_templateObject46","TableRow","tr","_templateObject47","$isEven","TableHeader","th","_templateObject48","TableCell","td","_templateObject49","ExpandButton","_templateObject50","ExpandedContent","_templateObject51","ExpandedGrid","_templateObject52","InfoCard","_templateObject53","$fullWidth","InfoCardTitle","h4","_templateObject54","InfoRow","_templateObject55","InfoValue","_templateObject56","_templateObject57","Orders","user","userDetail","hasPermission","username","showToast","ToastContext","orders","setOrders","loading","setLoading","setLpsData","lastLoadSource","setLastLoadSource","lastLoadTime","setLastLoadTime","lastLoadDuration","setLastLoadDuration","selectedOrders","setSelectedOrders","user_id","getUserKey","baseKey","sid","getUserStorage","defaultValue","arguments","undefined","parse","setUserStorage","globalFilter","setGlobalFilter","garantFilter","setGarantFilter","druhFilter","setDruhFilter","isCollapsed","setIsCollapsed","isStatsCollapsed","setIsStatsCollapsed","isFilterCollapsed","setIsFilterCollapsed","sorting","setSorting","desc","expanded","setExpanded","setGlobalProgress","start","startGlobalProgress","done","doneGlobalProgress","reset","resetGlobalProgress","ProgressContext","isModalOpen","setIsModalOpen","selectedOrderId","setSelectedOrderId","isImportModalOpen","setIsImportModalOpen","fakturaFilter","setFakturaFilter","pokladniDokFilter","setPokladniDokFilter","zverejnitFilter","setZverejnitFilter","currentYear","getFullYear","yearFilter","setYearFilter","selectedMonth","setSelectedMonth","showExpandedMonths","setShowExpandedMonths","saved","pageSize","setPageSize","currentPageIndex","setCurrentPageIndex","selectedDbSource","setSelectedDbSource","showLeftArrow","setShowLeftArrow","showRightArrow","setShowRightArrow","showLeftShadow","setShowLeftShadow","showRightShadow","setShowRightShadow","isTableHovered","setIsTableHovered","isArrowHovered","setIsArrowHovered","tableContainerRef","tableWrapperRef","setTableWrapperRef","node","handleMouseEnter","handleMouseLeave","addEventListener","removeEventListener","setTableContainerRef","updateScrollIndicators","scrollLeft","maxScroll","scrollWidth","clientWidth","rightVisible","setTimeout","handleScroll","passive","availableDbSources","s","trim","getAttachmentTableName","orderTableName","match","isYearDropdownOpen","setIsYearDropdownOpen","yearSelectRef","isMonthDropdownOpen","setIsMonthDropdownOpen","monthSelectRef","yearOptions","years","handleGlobalFilterChange","isDbSourceDropdownOpen","setIsDbSourceDropdownOpen","dbSourceSelectRef","handleDbSourceChange","ordersCacheService","clear","storageKey","dbSource","removeItem","duration","timeoutId","loadStartTime","performance","yearFrom","yearTo","calculateDateRange","tabulkaObj","tabulkaOpriloh","fetchOldOrders","loadEndTime","loadDuration","processedData","processOrders","prilohy","Partner","details","Autoi","dt_pridani","userUpdater","dt_modifikace","resolve","clearTimeout","getUserErrorMessage","handleClickOutside","event","contains","fetchAllLps","loadLps","handleMonthChange","newMonth","normalizeString","str","extractCisloLp","text","filterRows","_row$subRows","matchesRow","some","String","matchesSubRows","matchesGarantFilter","matchesDruhFilter","matchesFakturaFilter","matchesPokladniDokFilter","matchesZverejnitFilter","filteredData","filteredTotalPrice","filteredTotalOrders","filteredWithInvoice","filteredWithCashDocument","filteredPublished","totalAttachments","totalPriceFromDB","totalOrdersFromDB","selectedOrdersTotalPrice","handleSelectAll","allOrderIds","handleSelectOrder","cisloLp","objMetaData","monthNum","lastDay","getDate","lastMonth","getMonth","lastMonthEnd","threeMonthsAgo","sixMonthsAgo","cacheResult","getOrders","fetchOrders","formatPrice","price","isNaN","highlightText","regex","RegExp","renderCellWithHighlight","dangerouslySetInnerHTML","__html","allRowIds","isAllSelected","every","isSomeSelected","ref","input","indeterminate","faMinus","faPlus","sortingFn","rowA","rowB","dayA","monthA","yearA","dayB","monthB","yearB","faPaperclip","_ref6","faEdit","faCopy","faFileAlt","faTrash","state","pagination","pageIndex","onGlobalFilterChange","onSortingChange","onExpandedChange","onPaginationChange","updater","newPagination","getSortedRowModel","getPaginationRowModel","manualPagination","renderSubRows","_row$original$subRows2","colSpan","_ref7","group","isFullWidth","fetchOrderAttachmentsOld","faDownload","_fileName$split$pop","ext","shouldPreview","download","marginLeft","faCalendarAlt","toggleYearDropdown","faChevronUp","faChevronDown","handleYearFilterChange","toggleMonthDropdown","faDatabase","toggleDbSourceDropdown","faSyncAlt","spin","faArrowRight","faBoltLightning","toLocaleTimeString","faFileInvoice","faFileInvoiceDollar","faCashRegister","faGlobe","toggleCollapse","newState","flex","faChartPie","Statistics","toggleStatsCollapse","toggleFakturaFilter","togglePokladniDokFilter","toggleZverejnitFilter","faSearch","handleGarantFilterChange","handleDruhFilterChange","toggleFilterCollapse","canSort","getCanSort","sorted","getIsSorted","caret","getSize","getToggleSortingHandler","isPlaceholder","onDoubleClick","navigator","clipboard","writeText","catch","console","handleCellClick","newSize","getCanPreviousPage","max","getState","getPageCount","getCanNextPage","createPortal","handleScrollLeft","tableContainer","scrollAmount","scrollBy","left","behavior","faChevronLeft","handleScrollRight","faChevronRight","OrderFormTabs","handleCloseModal","onOrderUpdated","handleOrderUpdated","ImportOldOrdersModal","handleImportModalClose","handleImportComplete","orderIds","orderTable","attachmentTable","importOldOrders25Streaming","userId","oldOrderIds","sseError","importOldOrders25","total_count"],"sourceRoot":""}