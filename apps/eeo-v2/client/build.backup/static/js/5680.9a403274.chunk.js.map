{"version":3,"file":"static/js/5680.9a403274.chunk.js","mappings":"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","sources":["services/cashbookService.js"],"sourcesContent":["/**\n * ğŸ¦ CASHBOOK API SERVICE\n *\n * Service vrstva pro komunikaci s backend API pokladnÃ­ knihy.\n * Obsahuje vÅ¡ech 18 endpointÅ¯ (11 pÅ¯vodnÃ­ch + 7 novÃ½ch).\n *\n * @author FE Team\n * @date 8. listopadu 2025\n * @version 2.0\n */\n\nimport axios from 'axios';\nimport { loadAuthData } from '../utils/authStorage';\n\n// ğŸŒ PouÅ¾Ã­t stejnÃ½ base URL jako Order V2 API\n// UjistÃ­me se Å¾e konÄÃ­ lomÃ­tkem pro sprÃ¡vnÃ© sestavenÃ­ URL\nconst API_BASE_RAW = process.env.REACT_APP_API2_BASE_URL || 'https://erdms.zachranka.cz/api.eeo/';\nconst API_BASE = API_BASE_RAW.endsWith('/') ? API_BASE_RAW.slice(0, -1) : API_BASE_RAW;\n\n/**\n * Helper funkce pro zÃ­skÃ¡nÃ­ autentizaÄnÃ­ch dat\n * NaÄte username a token z authStorage (Å¡ifrovanÃ½ localStorage)\n */\nconst getAuthData = async () => {\n  try {\n    const user = await loadAuthData.user();\n    const token = await loadAuthData.token();\n\n    if (!user || !token) {\n      throw new Error('UÅ¾ivatel nenÃ­ pÅ™ihlÃ¡Å¡en');\n    }\n\n    return {\n      username: user.username,\n      token: token,\n      user_id: user.id // ğŸ†• Pro vytvoril/upravil pole v DB\n    };\n  } catch (error) {\n    console.error('âŒ Chyba pÅ™i naÄÃ­tÃ¡nÃ­ autentizace:', error);\n    throw new Error('Autentizace selhala');\n  }\n};\n\n/**\n * Helper funkce pro zpracovÃ¡nÃ­ API chyb\n */\nconst handleApiError = (error, operation) => {\n  console.error(`âŒ Chyba pÅ™i ${operation}:`, error);\n\n  if (error.response) {\n    // Server odpovÄ›dÄ›l s chybovÃ½m kÃ³dem\n    const status = error.response.status;\n    const data = error.response.data;\n\n    if (status === 401 || status === 403) {\n      throw new Error('NemÃ¡te oprÃ¡vnÄ›nÃ­ k tÃ©to operaci');\n    }\n\n    if (data && data.message) {\n      throw new Error(data.message);\n    }\n\n    throw new Error(`Chyba serveru: ${status}`);\n  } else if (error.request) {\n    // Request byl odeslÃ¡n, ale Å¾Ã¡dnÃ¡ odpovÄ›Ä\n    throw new Error('Server neodpovÃ­dÃ¡. Zkontrolujte pÅ™ipojenÃ­.');\n  } else {\n    // NÄ›co se pokazilo pÅ™i sestavovÃ¡nÃ­ requestu\n    throw new Error(error.message || 'NeznÃ¡mÃ¡ chyba');\n  }\n};\n\n/**\n * ğŸ¦ CASHBOOK API\n *\n * Objekt obsahujÃ­cÃ­ vÅ¡echny API metody pro prÃ¡ci s pokladnÃ­ knihou.\n * VÅ¡echny metody jsou async a vracejÃ­ Promise.\n */\nconst cashbookAPI = {\n\n  // ========================================================================\n  // ğŸ“š PÅ®VODNÃ ENDPOINTY (11)\n  // ========================================================================\n\n  /**\n   * 1ï¸âƒ£ ZÃ­skÃ¡nÃ­ seznamu knih pro uÅ¾ivatele\n   * @param {number} userId - ID uÅ¾ivatele\n   * @param {number} rok - Rok (napÅ™. 2025)\n   * @param {number} mesic - MÄ›sÃ­c (1-12)\n   * @returns {Promise<Object>} Response s polem books\n   */\n  listBooks: async (userId, rok = null, mesic = null) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-list`, {\n        ...auth,\n        uzivatel_id: userId,\n        rok,\n        mesic\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ seznamu knih');\n    }\n  },\n\n  /**\n   * 2ï¸âƒ£ ZÃ­skÃ¡nÃ­ detailu knihy vÄetnÄ› poloÅ¾ek\n   * @param {number} bookId - ID knihy\n   * @param {boolean} forceRecalc - Vynutit pÅ™epoÄet pÅ™evodu z pÅ™edchozÃ­ho mÄ›sÃ­ce\n   * @returns {Promise<Object>} Response s objektem book a polem entries\n   */\n  getBook: async (bookId, forceRecalc = true) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-get`, {\n        ...auth,\n        book_id: bookId,\n        force_recalc: forceRecalc ? 1 : 0  // âœ… Å˜Ã­ct backendu, aby pÅ™epoÄÃ­tal pÅ™evod\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ detailu knihy');\n    }\n  },\n\n  /**\n   * 3ï¸âƒ£ VytvoÅ™enÃ­ novÃ© knihy\n   * @param {number} prirazeniPokladnyId - ID pÅ™iÅ™azenÃ­ pokladny (FK)\n   * @param {number} rok - Rok (napÅ™. 2025)\n   * @param {number} mesic - MÄ›sÃ­c (1-12)\n   * @param {number} uzivatelId - ID uÅ¾ivatele (majitel knihy)\n   * @returns {Promise<Object>} Response s vytvoÅ™enou knihou\n   */\n  createBook: async (prirazeniPokladnyId, rok, mesic, uzivatelId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-create`, {\n        ...auth,\n        prirazeni_id: prirazeniPokladnyId,  // âœ… OPRAVA: Backend oÄekÃ¡vÃ¡ 'prirazeni_id', NE 'prirazeni_pokladny_id'\n        rok,\n        mesic,\n        uzivatel_id: uzivatelId\n      });\n      return response.data;\n    } catch (error) {\n      // âœ… VrÃ¡tit error response mÃ­sto throw, aby frontend mÄ›l vÃ­c info\n      if (error.response?.data) {\n        return error.response.data;\n      }\n      handleApiError(error, 'vytvÃ¡Å™enÃ­ knihy');\n    }\n  },\n\n  /**\n   * 4ï¸âƒ£ Ãšprava knihy\n   * @param {number} bookId - ID knihy\n   * @param {Object} updates - Objekt s poli k aktualizaci\n   * @returns {Promise<Object>} Response s aktualizovanou knihou\n   */\n  updateBook: async (bookId, updates) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-update`, {\n        ...auth,\n        book_id: bookId,\n        ...updates\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'aktualizace knihy');\n    }\n  },\n\n  /**\n   * 5ï¸âƒ£ UzavÅ™enÃ­ mÄ›sÃ­ce (uÅ¾ivatel)\n   * Stav: aktivni â†’ uzavrena_uzivatelem\n   * @param {number} bookId - ID knihy\n   * @returns {Promise<Object>} Response s message\n   */\n  closeMonth: async (bookId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-close`, {\n        ...auth,\n        book_id: bookId,\n        akce: 'uzavrit_mesic'\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'uzavÃ­rÃ¡nÃ­ mÄ›sÃ­ce');\n    }\n  },\n\n  /**\n   * 6ï¸âƒ£ ZnovuotevÅ™enÃ­ knihy (sprÃ¡vce)\n   * Stav: uzavrena_uzivatelem/zamknuta_spravcem â†’ aktivni\n   * @param {number} bookId - ID knihy\n   * @returns {Promise<Object>} Response s message\n   */\n  reopenBook: async (bookId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-reopen`, {\n        ...auth,\n        book_id: bookId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'odemykÃ¡nÃ­ knihy');\n    }\n  },\n\n  /**\n   * 7ï¸âƒ£ VytvoÅ™enÃ­ novÃ© poloÅ¾ky\n   * @param {Object} entryData - Data poloÅ¾ky (book_id, datum_zapisu, obsah_zapisu, castka_vydaj/prijem)\n   * @returns {Promise<Object>} Response s vytvoÅ™enou poloÅ¾kou (vÄetnÄ› cislo_dokladu)\n   */\n  createEntry: async (entryData) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-entry-create`, {\n        ...auth,\n        ...entryData\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'vytvÃ¡Å™enÃ­ poloÅ¾ky');\n    }\n  },\n\n  /**\n   * 8ï¸âƒ£ Ãšprava poloÅ¾ky\n   * @param {number} entryId - ID poloÅ¾ky\n   * @param {Object} updates - Objekt s poli k aktualizaci\n   * @returns {Promise<Object>} Response s aktualizovanou poloÅ¾kou\n   */\n  updateEntry: async (entryId, updates) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-entry-update`, {\n        ...auth,\n        entry_id: entryId,\n        ...updates\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'aktualizace poloÅ¾ky');\n    }\n  },\n\n  /**\n   * 9ï¸âƒ£ SmazÃ¡nÃ­ poloÅ¾ky (soft delete)\n   * @param {number} entryId - ID poloÅ¾ky\n   * @returns {Promise<Object>} Response s message\n   */\n  deleteEntry: async (entryId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-entry-delete`, {\n        ...auth,\n        entry_id: entryId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'mazÃ¡nÃ­ poloÅ¾ky');\n    }\n  },\n\n  /**\n   * ğŸ”Ÿ ObnovenÃ­ smazanÃ© poloÅ¾ky\n   * @param {number} entryId - ID poloÅ¾ky\n   * @returns {Promise<Object>} Response s obnovenou poloÅ¾kou\n   */\n  restoreEntry: async (entryId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-entry-restore`, {\n        ...auth,\n        entry_id: entryId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'obnovenÃ­ poloÅ¾ky');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£1ï¸âƒ£ ZÃ­skÃ¡nÃ­ audit logu pro knihu\n   * @param {number} bookId - ID knihy\n   * @returns {Promise<Object>} Response s polem audit_log\n   */\n  getAuditLog: async (bookId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-audit-log`, {\n        ...auth,\n        book_id: bookId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ audit logu');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ†• NOVÃ‰ ENDPOINTY - PÅ˜IÅ˜AZENÃ POKLADEN (4)\n  // ========================================================================\n\n  /**\n   * 1ï¸âƒ£2ï¸âƒ£ ZÃ­skÃ¡nÃ­ seznamu pÅ™iÅ™azenÃ­ pokladen\n   * @param {number|null} userId - ID uÅ¾ivatele (0 = vÅ¡echna pro admina, null = jen aktuÃ¡lnÃ­ uÅ¾ivatel)\n   * @param {boolean} activeOnly - Pouze aktivnÃ­ pÅ™iÅ™azenÃ­ (default: true)\n   * @returns {Promise<Object>} Response s polem assignments\n   */\n  listAssignments: async (userId, activeOnly = true) => {\n    try {\n      const auth = await getAuthData();\n      const payload = {\n        ...auth,\n        active_only: activeOnly,\n        uzivatel_id: userId  // null = vÅ¡echna pÅ™iÅ™azenÃ­\n      };\n\n      const response = await axios.post(`${API_BASE}/cashbox-assignments-list`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ pÅ™iÅ™azenÃ­ pokladen');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£2ï¸âƒ£-A ZÃ­skÃ¡nÃ­ VÅ ECH pÅ™iÅ™azenÃ­ pokladen (pouze pro ADMINY)\n   * VracÃ­ vÅ¡echny pokladny vÅ¡ech uÅ¾ivatelÅ¯ vÄetnÄ› statistik\n   * @returns {Promise<Object>} Response s polem vÅ¡ech assignments\n   */\n  listAllAssignments: async () => {\n    try {\n      // PouÅ¾ijeme existujÃ­cÃ­ cashbox-list endpoint, kterÃ½ vracÃ­ vÅ¡echny pokladny\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-list`, {\n        ...auth,\n        active_only: true,   // âœ… JEN AKTIVNÃ pokladny\n        include_users: true  // VrÃ¡tit i pÅ™iÅ™azenÃ© uÅ¾ivatele\n      });\n\n      // Transformovat vÃ½stup z cashbox-list na formÃ¡t assignments\n      if (response.data && response.data.status === 'ok' && response.data.data) {\n        const pokladny = response.data.data.pokladny || [];\n\n        // PÅ™evÃ©st pokladny na assignments formÃ¡t\n        const assignments = pokladny.flatMap(pokladna => {\n          const uzivatele = pokladna.uzivatele || [];\n\n          // Pokud pokladna nemÃ¡ uÅ¾ivatele, vrÃ¡tit ji samu\n          if (uzivatele.length === 0) {\n            return [{\n              id: parseInt(pokladna.id, 10),\n              cislo_pokladny: parseInt(pokladna.cislo_pokladny, 10),\n              nazev: pokladna.nazev,\n              nazev_pracoviste: pokladna.nazev_pracoviste,\n              kod_pracoviste: pokladna.kod_pracoviste,\n              ciselna_rada_vpd: pokladna.ciselna_rada_vpd,\n              ciselna_rada_ppd: pokladna.ciselna_rada_ppd,\n              aktivni: parseInt(pokladna.aktivni, 10),\n              je_hlavni: 0, // Pokud nenÃ­ uÅ¾ivatel, nenÃ­ to hlavnÃ­ assignment\n              uzivatel_id: null,\n              uzivatel_cele_jmeno: null\n            }];\n          }\n\n          // Pro kaÅ¾dÃ©ho uÅ¾ivatele vytvoÅ™it assignment\n          return uzivatele.map(uz => ({\n            id: parseInt(uz.prirazeni_id, 10), // âœ… ID pÅ™iÅ™azenÃ­, ne pokladny\n            pokladna_id: parseInt(pokladna.id, 10),\n            cislo_pokladny: parseInt(pokladna.cislo_pokladny, 10),\n            nazev: pokladna.nazev,\n            nazev_pracoviste: pokladna.nazev_pracoviste,\n            kod_pracoviste: pokladna.kod_pracoviste,\n            ciselna_rada_vpd: pokladna.ciselna_rada_vpd,\n            ciselna_rada_ppd: pokladna.ciselna_rada_ppd,\n            aktivni: parseInt(pokladna.aktivni, 10),\n            uzivatel_id: parseInt(uz.uzivatel_id, 10),\n            uzivatel_cele_jmeno: uz.uzivatel_cele_jmeno,\n            uzivatel_jmeno: uz.uzivatel_jmeno || null,\n            uzivatel_prijmeni: uz.uzivatel_prijmeni || null,\n            je_hlavni: parseInt(uz.je_hlavni || 0, 10),\n            platne_od: uz.platne_od,\n            platne_do: uz.platne_do\n          }));\n        });\n\n        return {\n          status: 'success',\n          data: assignments\n        };\n      }\n\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ vÅ¡ech pÅ™iÅ™azenÃ­ pokladen (admin)');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£3ï¸âƒ£ VytvoÅ™enÃ­ novÃ©ho pÅ™iÅ™azenÃ­ pokladny\n   * @param {Object} assignmentData - Data pÅ™iÅ™azenÃ­\n   * @returns {Promise<Object>} Response s vytvoÅ™enÃ½m pÅ™iÅ™azenÃ­m\n   */\n  createAssignment: async (assignmentData) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-assignment-create`, {\n        ...auth,\n        ...assignmentData\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'vytvÃ¡Å™enÃ­ pÅ™iÅ™azenÃ­ pokladny');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£4ï¸âƒ£ Ãšprava pÅ™iÅ™azenÃ­ pokladny\n   * âš ï¸ POZOR: Tabulka `25a_pokladny_uzivatele` obsahuje pouze:\n   *    - platne_od, platne_do (datumy platnosti)\n   *    - je_hlavni (boolean)\n   *    - poznamka (text)\n   * âš ï¸ VPD/PPD ÄÃ­sla jsou v tabulce `25a_pokladny` (master) - pouÅ¾ij updateCashbox()!\n   *\n   * @param {number} assignmentId - ID pÅ™iÅ™azenÃ­\n   * @param {Object} updates - Data k aktualizaci\n   * @param {string} updates.platne_od - Datum platnosti od (YYYY-MM-DD)\n   * @param {string|null} updates.platne_do - Datum platnosti do (YYYY-MM-DD, null=aktivnÃ­)\n   * @param {boolean} updates.je_hlavni - HlavnÃ­ pokladna? (0/1)\n   * @param {string} updates.poznamka - PoznÃ¡mka\n   * @returns {Promise<Object>} Response s aktualizovanÃ½m pÅ™iÅ™azenÃ­m\n   */\n  updateAssignment: async (assignmentId, updates) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-assignment-update`, {\n        ...auth,\n        assignment_id: assignmentId,\n        ...updates\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'aktualizace pÅ™iÅ™azenÃ­ pokladny');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£5ï¸âƒ£ SmazÃ¡nÃ­ pÅ™iÅ™azenÃ­ pokladny\n   * @param {number} assignmentId - ID pÅ™iÅ™azenÃ­\n   * @returns {Promise<Object>} Response s message\n   */\n  deleteAssignment: async (assignmentId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-assignment-delete`, {\n        ...auth,\n        assignment_id: assignmentId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'mazÃ¡nÃ­ pÅ™iÅ™azenÃ­ pokladny');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ†• NOVÃ‰ ENDPOINTY - GLOBÃLNÃ NASTAVENÃ (2)\n  // ========================================================================\n\n  /**\n   * 1ï¸âƒ£6ï¸âƒ£ ZÃ­skÃ¡nÃ­ globÃ¡lnÃ­ch nastavenÃ­\n   * @param {string|null} key - KlÃ­Ä nastavenÃ­ (null = vÅ¡echna nastavenÃ­)\n   * @returns {Promise<Object>} Response s objektem nastavenÃ­\n   */\n  getSettings: async (key = null) => {\n    try {\n      const auth = await getAuthData();\n      const payload = { ...auth };\n      if (key) {\n        payload.key = key;\n      }\n      const response = await axios.post(`${API_BASE}/cashbox-settings-get`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ nastavenÃ­');\n    }\n  },\n\n  /**\n   * 1ï¸âƒ£7ï¸âƒ£ Ãšprava globÃ¡lnÃ­ho nastavenÃ­ (pouze admin)\n   * @param {string} key - KlÃ­Ä nastavenÃ­\n   * @param {string} value - Hodnota\n   * @param {string|null} description - Popis nastavenÃ­\n   * @returns {Promise<Object>} Response s message\n   */\n  updateSetting: async (key, value, description = null) => {\n    try {\n      const auth = await getAuthData();\n      const payload = {\n        ...auth,\n        key,\n        value\n      };\n      if (description) {\n        payload.description = description;\n      }\n      const response = await axios.post(`${API_BASE}/cashbox-settings-update`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'aktualizace nastavenÃ­');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ†• NOVÃ‰ ENDPOINTY - ZAMYKÃNÃ (1)\n  // ========================================================================\n\n  /**\n   * 1ï¸âƒ£8ï¸âƒ£ ZamknutÃ­ knihy sprÃ¡vcem\n   * Stav: uzavrena_uzivatelem â†’ zamknuta_spravcem\n   * Pouze pro CASH_BOOK_MANAGE oprÃ¡vnÄ›nÃ­\n   * @param {number} bookId - ID knihy\n   * @returns {Promise<Object>} Response s message\n   */\n  lockBook: async (bookId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-lock`, {\n        ...auth,\n        book_id: bookId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'zamykÃ¡nÃ­ knihy');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ†• NOVÃ‰ ENDPOINTY PRO NORMALIZOVANOU STRUKTURU (6)\n  // ========================================================================\n\n  /**\n   * ğŸ†• Seznam vÅ¡ech pokladen + pÅ™iÅ™azenÃ­ uÅ¾ivatelÃ©\n   * @param {boolean} activeOnly - Jen aktivnÃ­ pokladny (default: true)\n   * @param {boolean} includeUsers - NaÄÃ­st i uÅ¾ivatele (default: true)\n   * @returns {Promise<Object>} Response s polem pokladny (kaÅ¾dÃ¡ mÃ¡ pole uzivatele)\n   */\n  getCashboxList: async (activeOnly = true, includeUsers = true) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-list`, {\n        ...auth,\n        active_only: activeOnly,\n        include_users: includeUsers\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ seznamu pokladen');\n    }\n  },\n\n  /**\n   * ğŸ†• Seznam pokladen s knihami v danÃ©m mÄ›sÃ­ci/roce\n   * VrÃ¡tÃ­ jen ty pokladny, kterÃ© majÃ­ vytvoÅ™enou knihu v danÃ©m obdobÃ­\n   * @param {number} rok - Rok (napÅ™. 2025)\n   * @param {number} mesic - MÄ›sÃ­c 1-12\n   * @param {boolean} activeOnly - Jen aktivnÃ­ pokladny\n   * @param {boolean} includeUsers - Zahrnout info o uÅ¾ivatelÃ­ch\n   * @returns {Promise<Object>} Response s polem pokladny\n   */\n  getCashboxListByPeriod: async (rok, mesic, activeOnly = true, includeUsers = true) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-list-by-period`, {\n        ...auth,\n        rok,\n        mesic,\n        active_only: activeOnly,\n        include_users: includeUsers\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ pokladen podle obdobÃ­');\n    }\n  },\n\n  /**\n   * ğŸ†• VytvoÅ™it novou pokladnu\n   * @param {Object} cashboxData - Data pokladny\n   * @param {number} cashboxData.cislo_pokladny - ÄŒÃ­slo pokladny (napÅ™. 103)\n   * @param {string} cashboxData.nazev - NÃ¡zev pokladny\n   * @param {string} cashboxData.kod_pracoviste - KÃ³d pracoviÅ¡tÄ› (napÅ™. IT)\n   * @param {string} cashboxData.nazev_pracoviste - NÃ¡zev pracoviÅ¡tÄ›\n   * @param {string} cashboxData.ciselna_rada_vpd - VPD prefix (napÅ™. 597)\n   * @param {number} cashboxData.vpd_od_cislo - VPD od ÄÃ­sla (default: 1)\n   * @param {string} cashboxData.ciselna_rada_ppd - PPD prefix (napÅ™. 497)\n   * @param {number} cashboxData.ppd_od_cislo - PPD od ÄÃ­sla (default: 1)\n   * @param {string} cashboxData.poznamka - PoznÃ¡mka\n   * @returns {Promise<Object>} Response s pokladna_id\n   */\n  createCashbox: async (cashboxData) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-create`, {\n        ...auth,\n        ...cashboxData\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'vytvÃ¡Å™enÃ­ pokladny');\n    }\n  },\n\n  /**\n   * ğŸ†• Upravit parametry pokladny (VPD/PPD, nÃ¡zev, pracoviÅ¡tÄ›)\n   * âš ï¸ POZOR: OvlivnÃ­ vÅ¡echny uÅ¾ivatele pÅ™iÅ™azenÃ© k tÃ©to pokladnÄ›!\n   * @param {number} pokladnaId - ID pokladny\n   * @param {Object} updates - Objekt s poli k aktualizaci\n   * @param {string} updates.nazev - NovÃ½ nÃ¡zev\n   * @param {string} updates.ciselna_rada_vpd - NovÃ½ VPD prefix\n   * @param {number} updates.vpd_od_cislo - NovÃ½ VPD od\n   * @param {string} updates.ciselna_rada_ppd - NovÃ½ PPD prefix\n   * @param {number} updates.ppd_od_cislo - NovÃ½ PPD od\n   * @param {string} updates.kod_pracoviste - NovÃ½ kÃ³d pracoviÅ¡tÄ›\n   * @param {string} updates.nazev_pracoviste - NovÃ½ nÃ¡zev pracoviÅ¡tÄ›\n   * @param {string} updates.poznamka - PoznÃ¡mka\n   * @returns {Promise<Object>} Response s affected_users (poÄet ovlivnÄ›nÃ½ch uÅ¾ivatelÅ¯)\n   */\n  updateCashbox: async (pokladnaId, updates) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-update`, {\n        ...auth,\n        pokladna_id: pokladnaId,\n        ...updates\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'Ãºpravy pokladny');\n    }\n  },\n\n  /**\n   * ğŸ†• Smazat pokladnu (pouze pokud nemÃ¡ pÅ™iÅ™azenÃ© uÅ¾ivatele nebo knihy)\n   * @param {number} pokladnaId - ID pokladny\n   * @returns {Promise<Object>} Response s message\n   */\n  deleteCashbox: async (pokladnaId) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-delete`, {\n        ...auth,\n        pokladna_id: pokladnaId\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'mazÃ¡nÃ­ pokladny');\n    }\n  },\n\n  /**\n   * ğŸ†• PÅ™iÅ™adit uÅ¾ivatele k pokladnÄ›\n   * @param {Object} assignmentData - Data pÅ™iÅ™azenÃ­\n   * @param {number} assignmentData.pokladna_id - ID pokladny\n   * @param {number} assignmentData.uzivatel_id - ID uÅ¾ivatele\n   * @param {boolean} assignmentData.je_hlavni - HlavnÃ­ pokladna? (default: false)\n   * @param {string} assignmentData.platne_od - Datum platnosti od (YYYY-MM-DD)\n   * @param {string} assignmentData.platne_do - Datum platnosti do (nullable)\n   * @param {string} assignmentData.poznamka - PoznÃ¡mka\n   * @returns {Promise<Object>} Response s prirazeni_id\n   */\n  assignUserToCashbox: async (assignmentData) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-assign-user`, {\n        ...auth,\n        ...assignmentData\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'pÅ™iÅ™azovÃ¡nÃ­ uÅ¾ivatele k pokladnÄ›');\n    }\n  },\n\n  /**\n   * ğŸ†• Odebrat uÅ¾ivatele z pokladny (ukonÄit platnost pÅ™iÅ™azenÃ­)\n   * @param {number} prirazeniId - ID pÅ™iÅ™azenÃ­ (25a_pokladny_uzivatele.id)\n   * @param {string} platne_do - Datum ukonÄenÃ­ platnosti (YYYY-MM-DD)\n   * @returns {Promise<Object>} Response s message\n   */\n  unassignUserFromCashbox: async (prirazeniId, platneDo = null) => {\n    try {\n      const auth = await getAuthData();\n      const today = platneDo || new Date().toISOString().split('T')[0];\n\n      const payload = {\n        ...auth,\n        prirazeni_id: prirazeniId,\n        platne_do: today\n      };\n\n      const response = await axios.post(`${API_BASE}/cashbox-unassign-user`, payload);\n\n      return response.data;\n    } catch (error) {\n      console.error('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n      console.error('âŒ API ERROR: unassignUserFromCashbox()');\n      console.error('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n      console.error('Error:', error);\n      console.error('Response:', error?.response);\n      console.error('Response Data:', error?.response?.data);\n      console.error('Response Status:', error?.response?.status);\n      console.error('Response Headers:', error?.response?.headers);\n      handleApiError(error, 'odebÃ­rÃ¡nÃ­ uÅ¾ivatele z pokladny');\n    }\n  },\n\n  /**\n   * ğŸ†• Seznam uÅ¾ivatelÅ¯, kteÅ™Ã­ nejsou pÅ™iÅ™azeni k danÃ© pokladnÄ›\n   * (Helper pro dropdown pÅ™i pÅ™iÅ™azovÃ¡nÃ­)\n   * @param {number} pokladnaId - ID pokladny\n   * @param {string} search - VyhledÃ¡vacÃ­ text (volitelnÃ©)\n   * @returns {Promise<Object>} Response s polem uzivatele\n   */\n  getAvailableUsers: async (pokladnaId, search = '') => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbox-available-users`, {\n        ...auth,\n        pokladna_id: pokladnaId,\n        search\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ dostupnÃ½ch uÅ¾ivatelÅ¯');\n    }\n  },\n\n  /**\n   * ğŸ†• ZmÄ›nit status je_hlavni u pÅ™iÅ™azenÃ­ uÅ¾ivatele\n   * @param {number} prirazeniId - ID pÅ™iÅ™azenÃ­ (25a_pokladny_uzivatele.id)\n   * @param {number} jeHlavni - 1 = hlavnÃ­, 0 = zÃ¡stupce\n   * @returns {Promise<Object>} Response s message\n   */\n  updateUserMainStatus: async (prirazeniId, jeHlavni) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-assignment-update`, {\n        ...auth,\n        assignment_id: prirazeniId,\n        je_hlavni: jeHlavni\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'zmÄ›ny statusu hlavnÃ­ho uÅ¾ivatele');\n    }\n  },\n\n  /**\n   * ğŸ†• Synchronizovat uÅ¾ivatele pokladny (batch operace)\n   * SmaÅ¾e vÅ¡echny stÃ¡vajÃ­cÃ­ pÅ™iÅ™azenÃ­ a vytvoÅ™Ã­ novÃ¡ dle poskytnutÃ©ho seznamu\n   * @param {number} pokladnaId - ID pokladny\n   * @param {Array} uzivatele - Array objektÅ¯ {uzivatel_id, je_hlavni, platne_od, platne_do?, poznamka?}\n   * @returns {Promise<Object>} Response s poÄtem smazanÃ½ch a pÅ™idanÃ½ch\n   */\n  syncCashboxUsers: async (pokladnaId, uzivatele) => {\n    try {\n      const auth = await getAuthData();\n      const payload = {\n        ...auth,\n        pokladna_id: pokladnaId,\n        uzivatele: uzivatele\n      };\n\n      const response = await axios.post(`${API_BASE}/cashbox-sync-users`, payload);\n\n      return response.data;\n    } catch (error) {\n      console.error('âŒ API ERROR: syncCashboxUsers()');\n      console.error('Error:', error);\n      console.error('Response:', error?.response?.data);\n      handleApiError(error, 'synchronizace uÅ¾ivatelÅ¯ pokladny');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ”’ STAV UZAMÄŒENÃ POKLADNÃ KNIHY (1)\n  // ========================================================================\n\n  /**\n   * 2ï¸âƒ£1ï¸âƒ£ ZmÄ›na stavu uzamÄenÃ­ pokladnÃ­ knihy\n   * @param {number} bookId - ID pokladnÃ­ knihy\n   * @param {string} newStatus - NovÃ½ stav (open | closed | locked)\n   * @returns {Promise<Object>} Response s informacemi o zmÄ›nÄ›\n   */\n  changeLockStatus: async (bookId, newStatus) => {\n    try {\n      const auth = await getAuthData();\n      const response = await axios.post(`${API_BASE}/cashbook-change-lock-status`, {\n        ...auth,\n        book_id: bookId,\n        new_status: newStatus\n      });\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'zmÄ›ny stavu uzamÄenÃ­ pokladnÃ­ knihy');\n    }\n  },\n\n  // ========================================================================\n  // ğŸ”§ ADMIN FUNKCE: FORCE PÅ˜EPOÄŒET (1)\n  // ========================================================================\n\n  /**\n   * 2ï¸âƒ£2ï¸âƒ£ ADMIN: Force pÅ™epoÄet poÅ™adÃ­ dokladÅ¯ v roce\n   * âš ï¸ NEBEZPEÄŒNÃ OPERACE - pÅ™epoÄÃ­tÃ¡ vÅ¡echny doklady vÄetnÄ› uzavÅ™enÃ½ch/zamÄenÃ½ch\n   * Pouze admin s CASH_BOOK_MANAGE oprÃ¡vnÄ›nÃ­m\n   *\n   * âœ… PO ZMÄšNÄš (commit 945cc8e): PouÅ¾Ã­vÃ¡ pokladna_id mÃ­sto assignment_id\n   *\n   * @param {number} pokladnaId - ID pokladny (25a_pokladny)\n   * @param {number} year - Rok pro pÅ™epoÄet (napÅ™. 2025)\n   * @returns {Promise<Object>} Response s poÄtem pÅ™eÄÃ­slovanÃ½ch poloÅ¾ek\n   *\n   * @example\n   * const result = await cashbookAPI.forceRenumberDocuments(3, 2025);\n   * console.log(`PÅ™eÄÃ­slovÃ¡no ${result.data.total_renumbered} poloÅ¾ek`);\n   */\n  forceRenumberDocuments: async (pokladnaId, year) => {\n    try {\n      const auth = await getAuthData();\n      const payload = {\n        ...auth,\n        pokladna_id: pokladnaId,  // âœ… ZMÄšNÄšNO: pokladna_id mÃ­sto assignment_id\n        year: year\n      };\n\n      const response = await axios.post(`${API_BASE}/cashbook-force-renumber`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'force pÅ™epoÄtu dokladÅ¯');\n    }\n  },\n\n  /**\n   * ğŸ“Š ZÃ­skat pÅ™ehled ÄerpÃ¡nÃ­ LP kÃ³dÅ¯\n   * Agreguje vÃ½daje podle LP kÃ³dÅ¯ vÄetnÄ› multi-LP poloÅ¾ek\n   * \n   * @param {number} userId - ID uÅ¾ivatele (volitelnÃ©, default = pÅ™ihlÃ¡Å¡enÃ½)\n   * @param {number} year - Rok (volitelnÃ©, default = aktuÃ¡lnÃ­)\n   * @returns {Promise} Response s LP summary\n   */\n  getLPSummary: async (userId = null, year = null) => {\n    try {\n      const auth = await getAuthData();\n      \n      const payload = {\n        username: auth.username,\n        token: auth.token\n      };\n      \n      if (userId) payload.user_id = userId;\n      if (year) payload.year = year;\n      \n      const response = await axios.post(`${API_BASE}/cashbook-lp-summary`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ LP summary');\n      throw error;\n    }\n  },\n\n  /**\n   * ğŸ“‹ ZÃ­skat detailnÃ­ rozpis ÄerpÃ¡nÃ­ LP kÃ³du\n   * VrÃ¡tÃ­ vÅ¡echny doklady kterÃ© Äerpaly danÃ½ LP kÃ³d\n   * \n   * @param {string} lpCode - LP kÃ³d\n   * @param {number} userId - ID uÅ¾ivatele (volitelnÃ©)\n   * @param {number} year - Rok (volitelnÃ©)\n   * @returns {Promise} Response s detailem ÄerpÃ¡nÃ­\n   */\n  getLPDetail: async (lpCode, userId = null, year = null) => {\n    try {\n      const auth = await getAuthData();\n      \n      const payload = {\n        username: auth.username,\n        token: auth.token,\n        lp_kod: lpCode\n      };\n      \n      if (userId) payload.user_id = userId;\n      if (year) payload.year = year;\n      \n      const response = await axios.post(`${API_BASE}/cashbook-lp-detail`, payload);\n      return response.data;\n    } catch (error) {\n      handleApiError(error, 'naÄÃ­tÃ¡nÃ­ LP detailu');\n      throw error;\n    }\n  }\n};\n\n// ========================================================================\n// ğŸ“¤ EXPORT\n// ========================================================================\n\nexport default cashbookAPI;\n\n/**\n * ğŸ“– DOKUMENTACE - POUÅ½ITÃ\n *\n * Import:\n *   import cashbookAPI from '../services/cashbookService';\n *\n * PÅ™Ã­klady pouÅ¾itÃ­:\n *\n * 1. NaÄÃ­st knihy uÅ¾ivatele:\n *    const result = await cashbookAPI.listBooks(userId, 2025, 11);\n *    if (result.status === 'ok') {\n *      console.log(result.data.books);\n *    }\n *\n * 2. VytvoÅ™it knihu:\n *    const result = await cashbookAPI.createBook(assignmentId, 2025, 11, userId);\n *\n * 3. VytvoÅ™it poloÅ¾ku:\n *    const entryData = {\n *      book_id: 1,\n *      datum_zapisu: '2025-11-08',\n *      obsah_zapisu: 'Test vÃ½daj',\n *      castka_vydaj: 100,\n *      castka_prijem: null\n *    };\n *    const result = await cashbookAPI.createEntry(entryData);\n *    console.log(result.data.cislo_dokladu); // V599-001\n *\n * 4. UzavÅ™Ã­t mÄ›sÃ­c:\n *    const result = await cashbookAPI.closeMonth(bookId);\n *\n * 5. Zamknout knihu (admin):\n *    const result = await cashbookAPI.lockBook(bookId);\n *\n * 6. NaÄÃ­st pÅ™iÅ™azenÃ­:\n *    const result = await cashbookAPI.listAssignments(userId, true);\n *    const mainAssignment = result.data.find(a => a.je_hlavni === 1);\n *\n * Error handling:\n *   try {\n *     const result = await cashbookAPI.createEntry(data);\n *   } catch (error) {\n *     alert('Chyba: ' + error.message);\n *   }\n */\n"],"names":["API_BASE_RAW","process","API_BASE","endsWith","slice","getAuthData","async","user","loadAuthData","token","Error","username","user_id","id","error","console","handleApiError","operation","concat","response","status","data","message","request","listBooks","userId","rok","arguments","length","undefined","mesic","auth","axios","post","_objectSpread","uzivatel_id","getBook","bookId","forceRecalc","book_id","force_recalc","createBook","prirazeniPokladnyId","uzivatelId","prirazeni_id","_error$response","updateBook","updates","closeMonth","akce","reopenBook","createEntry","entryData","updateEntry","entryId","entry_id","deleteEntry","restoreEntry","getAuditLog","listAssignments","activeOnly","payload","active_only","listAllAssignments","include_users","pokladny","flatMap","pokladna","uzivatele","parseInt","cislo_pokladny","nazev","nazev_pracoviste","kod_pracoviste","ciselna_rada_vpd","ciselna_rada_ppd","aktivni","je_hlavni","uzivatel_cele_jmeno","map","uz","pokladna_id","uzivatel_jmeno","uzivatel_prijmeni","platne_od","platne_do","createAssignment","assignmentData","updateAssignment","assignmentId","assignment_id","deleteAssignment","getSettings","key","updateSetting","value","description","lockBook","getCashboxList","includeUsers","getCashboxListByPeriod","createCashbox","cashboxData","updateCashbox","pokladnaId","deleteCashbox","assignUserToCashbox","unassignUserFromCashbox","prirazeniId","platneDo","today","Date","toISOString","split","_error$response2","_error$response3","_error$response4","headers","getAvailableUsers","search","updateUserMainStatus","jeHlavni","syncCashboxUsers","_error$response5","changeLockStatus","newStatus","new_status","forceRenumberDocuments","year","getLPSummary","getLPDetail","lpCode","lp_kod"],"sourceRoot":""}