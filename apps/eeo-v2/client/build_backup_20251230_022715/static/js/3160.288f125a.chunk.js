"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[3160],{83160:(e,n,t)=>{t.r(n),t.d(n,{NotificationsPage:()=>vn,default:()=>mn});var o=t(53986),a=t(89379),r=t(57528),i=t(65043),l=t(45903),d=t(83290),s=t(83910),c=t(97929),p=t(53683),f=t(37087),h=t(43548),u=t(91357),g=t(51833),x=t(89468),v=t(90087),m=t(27837),b=t(44649),j=t(25328),k=t(70579);const y=["sortDate"];var _,z,A,S,C,w,$,O,N,U,I,D,P,E,R,T,L,F,B,Z,W,M,J,V,H,K,Y,G,X,Q,q,ee,ne,te,oe,ae,re,ie,le,de,se,ce,pe,fe,he,ue,ge,xe,ve,me,be,je,ke;(0,d.i7)(_||(_=(0,r.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"])));const ye=(0,d.i7)(z||(z=(0,r.A)(["\n  from {\n    opacity: 0;\n    transform: translateX(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n"]))),_e=l.A.div(A||(A=(0,r.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n"]))),ze=l.A.div(S||(S=(0,r.A)(["\n  width: 100%;\n  max-width: none;\n  margin: 0 auto;\n"]))),Ae=l.A.div(C||(C=(0,r.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n"]))),Se=l.A.div(w||(w=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),Ce=(l.A.div($||($=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n"]))),l.A.button(O||(O=(0,r.A)(["\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  width: 42px;\n  height: 42px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.4);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])))),we=l.A.div(N||(N=(0,r.A)(["\n  border-bottom: 3px solid #e5e7eb;\n  margin-bottom: 2rem;\n"]))),$e=l.A.h1(U||(U=(0,r.A)(["\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n"]))),Oe=(l.A.div(I||(I=(0,r.A)(["\n  margin-bottom: 32px;\n"]))),l.A.p(D||(D=(0,r.A)(["\n  font-size: 15px;\n  color: #6b7280;\n  margin: 0;\n"]))),l.A.div(P||(P=(0,r.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"])))),Ne=l.A.div(E||(E=(0,r.A)(["\n  width: 100%;\n  position: relative;\n"]))),Ue=l.A.input(R||(R=(0,r.A)(["\n  width: 100%;\n  padding: 10px 40px 10px 40px;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.15s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),Ie=l.A.div(T||(T=(0,r.A)(["\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n"]))),De=l.A.button(L||(L=(0,r.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 14px !important;\n    height: 14px !important;\n  }\n"]))),Pe=l.A.div(F||(F=(0,r.A)(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  align-items: center;\n  width: 100%;\n"]))),Ee=(l.A.div(B||(B=(0,r.A)(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  width: 100%;\n"]))),l.A.button(Z||(Z=(0,r.A)(["\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  white-space: nowrap;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n"])))),Re=l.A.button(W||(W=(0,r.A)(["\n  padding: 0.5rem 1rem;\n  border: 2px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    border-color: #3b82f6;\n    color: #1d4ed8;\n  }\n"])),e=>e.$active?"#3b82f6":"#e2e8f0",e=>e.$active?"#eff6ff":"white",e=>e.$active?"#1d4ed8":"#64748b"),Te=l.A.button(M||(M=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid ",";\n  background: white;\n  color: ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n"])),e=>"danger"===e.$variant?"#ef4444":"success"===e.$variant?"#10b981":"warning"===e.$variant?"#f59e0b":"#6b7280",e=>"danger"===e.$variant?"#991b1b":"success"===e.$variant?"#065f46":"warning"===e.$variant?"#92400e":"#6b7280",e=>"danger"===e.$variant?"#fee2e2":"success"===e.$variant?"#d1fae5":"warning"===e.$variant?"#fef3c7":"#f8fafc",e=>"danger"===e.$variant?"#ef4444":"success"===e.$variant?"#10b981":"warning"===e.$variant?"#f59e0b":"#cbd5e1"),Le=l.A.div(J||(J=(0,r.A)(["\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n"]))),Fe=l.A.div(V||(V=(0,r.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 1.5rem 0 1rem 0;\n  color: #94a3b8;\n  font-weight: 500;\n  position: relative;\n"]))),Be=l.A.span(H||(H=(0,r.A)(["\n  font-size: 14px;\n  color: #94a3b8;\n  font-weight: 500;\n  padding-right: 1rem;\n  background: white;\n  position: relative;\n  z-index: 1;\n"]))),Ze=l.A.hr(K||(K=(0,r.A)(["\n  flex: 1;\n  border: none;\n  border-top: 1px solid #e5e7eb;\n  margin: 0;\n"]))),We=l.A.button(Y||(Y=(0,r.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  color: #94a3b8;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s ease;\n  position: relative;\n  z-index: 2;\n  padding: 0.25rem 0.5rem;\n  margin-left: 0.5rem;\n\n  &:hover {\n    color: #3b82f6;\n  }\n"]))),Me=l.A.div(G||(G=(0,r.A)(["\n  background: ",";\n  border-radius: 12px;\n  padding: 16px;\n  border-left: "," solid ",";\n  box-shadow: ",";\n  flex: 1;\n  min-width: 140px;\n  max-width: 200px;\n  cursor: ",";\n  transition: all 0.25s ease;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n\n  &:hover {\n    transform: ",";\n    box-shadow: ",";\n    ","\n  }\n"])),e=>e.$isActive?"linear-gradient(145deg, ".concat(e.$color||"#3b82f6","20, ").concat(e.$color||"#3b82f6","10)"):"linear-gradient(145deg, #ffffff, #f9fafb)",e=>e.$isActive?"6px":"4px",e=>e.$color||"#3b82f6",e=>e.$isActive?"0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ".concat(e.$color||"#3b82f6","40"):"0 1px 3px rgba(0, 0, 0, 0.05)",e=>e.$clickable?"pointer":"default",e=>e.$clickable?"translateY(-2px)":"translateY(-1px)",e=>e.$clickable?"0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.06)":"0 2px 4px rgba(0, 0, 0, 0.08)",e=>e.$clickable&&"\n      background: linear-gradient(145deg, ".concat(e.$color||"#3b82f6","25, ").concat(e.$color||"#3b82f6","15);\n    ")),Je=l.A.div(X||(X=(0,r.A)(["\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1;\n"]))),Ve=l.A.div(Q||(Q=(0,r.A)(["\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  font-size: 1.75rem;\n  opacity: 0.7;\n"]))),He=l.A.div(q||(q=(0,r.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n  font-weight: 500;\n  line-height: 1.3;\n  margin-top: auto;\n"]))),Ke=l.A.div(ee||(ee=(0,r.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n"]))),Ye=l.A.div(ne||(ne=(0,r.A)(["\n  padding: 14px 18px;\n  border-bottom: 1px solid #f3f4f6;\n  display: flex;\n  gap: 14px;\n  align-items: center;\n  transition: all 0.15s ease;\n  cursor: pointer;\n  animation: "," 0.3s ease-out;\n  animation-delay: ","s;\n  animation-fill-mode: backwards;\n\n  /* Unread styling */\n  background: ",";\n  border-left: ",";\n\n  /* Priority coloring */\n  ","\n\n  ","\n\n  &:hover {\n    background: ",";\n    ","\n    ","\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n"])),ye,e=>.03*e.$index,e=>e.$isUnread?"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)":"transparent",e=>e.$isUnread?"4px solid #3b82f6":"4px solid transparent",e=>"high"===e.$priority&&"\n    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n    border-left-color: #ef4444;\n  ",e=>"urgent"===e.$priority&&"\n    background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);\n    border-left-color: #dc2626;\n  ",e=>e.$isUnread?"#dbeafe":"#f9fafb",e=>"high"===e.$priority&&"background: #fee2e2;",e=>"urgent"===e.$priority&&"background: #fecaca;"),Ge=l.A.div(te||(te=(0,r.A)(["\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  flex-shrink: 0;\n  border-radius: 50%;\n  background: ",";\n  color: ",";\n"])),e=>{const n=(e.$priority||"INFO").toUpperCase();return"EXCEPTIONAL"===n||"URGENT"===n?"#fef2f2":"APPROVAL"===n||"HIGH"===n?"#fffbeb":"#eff6ff"},e=>{const n=(e.$priority||"INFO").toUpperCase();return"EXCEPTIONAL"===n||"URGENT"===n?"#dc2626":"APPROVAL"===n||"HIGH"===n?"#f59e0b":"#3b82f6"}),Xe=l.A.div(oe||(oe=(0,r.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),Qe=l.A.div(ae||(ae=(0,r.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: start;\n  margin-bottom: 10px;\n"]))),qe=l.A.div(re||(re=(0,r.A)(["\n  font-weight: ",";\n  color: ",";\n  font-size: 15px;\n  line-height: 1.5;\n"])),e=>e.$isUnread?700:600,e=>e.$isUnread?"#111827":"#374151"),en=l.A.div(ie||(ie=(0,r.A)(["\n  font-size: 14px;\n  color: #6b7280;\n  line-height: 1.6;\n  margin-bottom: 12px;\n"]))),nn=l.A.div(le||(le=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  font-size: 13px;\n  color: #9ca3af;\n  flex-wrap: wrap;\n  margin-top: 8px;\n"]))),tn=l.A.span(de||(de=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n"]))),on=l.A.span(se||(se=(0,r.A)(["\n  background: ",";\n  color: ",";\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n"])),e=>"order"===e.$type?"#dbeafe":"TODO_ALARM"===e.$type?"#fef3c7":"system"===e.$type?"#e5e7eb":"#f3f4f6",e=>"order"===e.$type?"#1e40af":"TODO_ALARM"===e.$type?"#92400e":"system"===e.$type?"#374151":"#6b7280"),an=l.A.div(ce||(ce=(0,r.A)(["\n  display: flex;\n  gap: 8px;\n  flex-shrink: 0;\n"]))),rn=l.A.button(pe||(pe=(0,r.A)(["\n  background: transparent;\n  border: 1px solid transparent;\n  color: #6b7280;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  font-size: 14px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n    color: #111827;\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n"]))),ln=l.A.div(fe||(fe=(0,r.A)(["\n  padding: 80px 20px;\n  text-align: center;\n  color: #9ca3af;\n"]))),dn=l.A.div(he||(he=(0,r.A)(["\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.5;\n"]))),sn=l.A.div(ue||(ue=(0,r.A)(["\n  font-size: 18px;\n  font-weight: 600;\n  color: #6b7280;\n  margin-bottom: 8px;\n"]))),cn=l.A.div(ge||(ge=(0,r.A)(["\n  font-size: 14px;\n  color: #9ca3af;\n"]))),pn=l.A.div(xe||(xe=(0,r.A)(["\n  padding: 60px 20px;\n  text-align: center;\n  color: #9ca3af;\n  font-size: 15px;\n"]))),fn=l.A.div(ve||(ve=(0,r.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n  margin-top: auto;\n"]))),hn=l.A.div(me||(me=(0,r.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),un=l.A.div(be||(be=(0,r.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),gn=l.A.button(je||(je=(0,r.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),xn=l.A.select(ke||(ke=(0,r.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n"]))),vn=()=>{const e=(0,p.M4)(),n=(0,u.Zp)(),{userDetail:t}=i.useContext(m.cy),[r,l]=(0,i.useState)([]),[d,_]=(0,i.useState)(!0),[z,A]=(0,i.useState)(!1),[S,C]=(0,i.useState)(()=>localStorage.getItem("notifications_searchQuery")||""),[w,$]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showUnread");return null!==e&&JSON.parse(e)}),[O,N]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showRead");return null!==e&&JSON.parse(e)}),[U,I]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showUrgent");return null!==e&&JSON.parse(e)}),[D,P]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showHigh");return null!==e&&JSON.parse(e)}),[E,R]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_showNormal");return null!==e&&JSON.parse(e)}),[T,L]=(0,i.useState)(()=>localStorage.getItem("notifications_activeStatFilter")||null),[F,B]=(0,i.useState)(null),[Z,W]=(0,i.useState)({isOpen:!1}),[M,J]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_threadMode");return null===e||JSON.parse(e)}),[V,H]=(0,i.useState)(new Set),[K,Y]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_detailMode");return null===e||JSON.parse(e)}),[G,X]=(0,i.useState)(()=>{const e=localStorage.getItem("notifications_dashboardCollapsed");return null!==e&&JSON.parse(e)}),[Q,q]=(0,i.useState)(!1),[ee,ne]=(0,i.useState)(null),[te,oe]=(0,i.useState)(null),[ae,re]=(0,i.useState)(!1),[ie,le]=(0,i.useState)(null),[de,se]=(0,i.useState)(null),[ce,pe]=(0,i.useState)(0),[fe,he]=(0,i.useState)(25);(0,i.useEffect)(()=>{ge()},[]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_searchQuery",S)},[S]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showUnread",JSON.stringify(w))},[w]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showRead",JSON.stringify(O))},[O]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showUrgent",JSON.stringify(U))},[U]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showHigh",JSON.stringify(D))},[D]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_showNormal",JSON.stringify(E))},[E]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_activeStatFilter",T||"")},[T]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_threadMode",JSON.stringify(M))},[M]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_detailMode",JSON.stringify(K))},[K]),(0,i.useEffect)(()=>{localStorage.setItem("notifications_dashboardCollapsed",JSON.stringify(G))},[G]),(0,i.useEffect)(()=>{if(null!==e&&void 0!==e&&e.registerNewNotificationsCallback){const n=(e,n)=>{ge()};return e.registerNewNotificationsCallback(n),()=>{e.registerNewNotificationsCallback(null)}}},[e]);const ue=e=>({orders:"Objedn\xe1vky",todo:"TODO \xfakoly",system:"Syst\xe9m",mentions:"Zm\xednky",reminders:"P\u0159ipom\xednky"}[e]||e),ge=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?A(!0):_(!0),B(null);try{const e=await(0,h.D$)({limit:100,offset:0,unread_only:!1,include_dismissed:!0}),n=(e.data||[]).map(e=>{const n=h.nv[e.typ]||{};return(0,a.A)((0,a.A)({},e),{},{icon:n.icon||"\ud83d\udd14",color:n.color||"#3b82f6",category:n.category||"system",priority:e.priorita||n.priority||"normal"})});l(n)}catch(F){B("Nepoda\u0159ilo se na\u010d\xedst notifikace. Zkontroluj konzoli pro detaily."),l([])}finally{_(!1),A(!1)}},xe=e=>{if("total"===e)return L(null),$(!1),N(!1),I(!1),P(!1),R(!1),void C("");T===e?(L(null),$(!1),N(!1),I(!1),P(!1),R(!1)):(L(e),$(!1),N(!1),I(!1),P(!1),R(!1),"unread"===e?$(!0):"urgent"===e?I(!0):"high"===e&&P(!0))},ve=r.filter(e=>{if(S){var n,t;const o=S.toLowerCase();if(!((null===(n=e.nadpis)||void 0===n?void 0:n.toLowerCase().includes(o))||(null===(t=e.zprava)||void 0===t?void 0:t.toLowerCase().includes(o))))return!1}if(T&&!["total","unread","urgent","high"].includes(T)){const n={nova:"order_status_nova",keSchvaleni:"order_status_ke_schvaleni",schvalena:"order_status_schvalena",zamitnuta:"order_status_zamitnuta",cekaSe:"order_status_ceka_se",odeslana:"order_status_odeslana",potvrzena:"order_status_potvrzena",cekaKontrola:"order_status_kontrola_ceka",vecnaSpravnost:"order_status_kontrola_potvrzena",registrZverejnena:"order_status_registr_zverejnena",dokoncena:"order_status_dokoncena",zrusena:"order_status_zrusena"}[T];if(n&&e.typ!==n)return!1}if(w||O){const n=!e.precteno||0===e.precteno;if(!(w&&n||O&&!n))return!1}if(U||D||E){const n=e.priorita||"normal";if(!(U&&"urgent"===n||D&&"high"===n||E&&"normal"===n))return!1}return!0}),me=(e=>{if(!M)return e.map(e=>({isThread:!1,notification:e}));const n=new Map,t=[];e.forEach((e,o)=>{var a,r;let i=null;try{const n=e.data||{};i=null===n||void 0===n?void 0:n.order_id,null!==i&&void 0!==i&&(i=String(i))}catch(s){}const l=null===(a=e.typ)||void 0===a?void 0:a.includes("order"),d=null===(r=e.typ)||void 0===r?void 0:r.includes("todo_alarm");(l||d)&&i?(n.has(i)||n.set(i,[]),n.get(i).push(e)):t.push(e)});return[...Array.from(n.entries()).map(e=>{var n,t;let[o,a]=e;const r=[...a].sort((e,n)=>{const t=new Date(e.dt_created||e.created_at||0);return new Date(n.dt_created||n.created_at||0)-t});return{orderId:o,notifications:r,newestDate:(null===(n=r[0])||void 0===n?void 0:n.dt_created)||(null===(t=r[0])||void 0===t?void 0:t.created_at)}}).sort((e,n)=>{const t=new Date(e.newestDate||0);return new Date(n.newestDate||0)-t}).map(e=>{var n,t;let{orderId:o,notifications:a}=e;return{isThread:!0,orderId:o,notifications:a,mainNotification:a[0],olderNotifications:a.slice(1),sortDate:new Date((null===(n=a[0])||void 0===n?void 0:n.dt_created)||(null===(t=a[0])||void 0===t?void 0:t.created_at)||0)}}),...t.map(e=>({isThread:!1,notification:e,sortDate:new Date(e.dt_created||e.created_at||0)}))].sort((e,n)=>n.sortDate-e.sortDate).map(e=>{const{sortDate:n}=e;return(0,o.A)(e,y)})})(ve),be={total:r.length,nova:r.filter(e=>"order_status_nova"===e.type).length,keSchvaleni:r.filter(e=>"order_status_ke_schvaleni"===e.type).length,schvalena:r.filter(e=>"order_status_schvalena"===e.type).length,zamitnuta:r.filter(e=>"order_status_zamitnuta"===e.type).length,cekaSe:r.filter(e=>"order_status_ceka_se"===e.type).length,odeslana:r.filter(e=>"order_status_odeslana"===e.type).length,potvrzena:r.filter(e=>"order_status_potvrzena"===e.type).length,cekaKontrola:r.filter(e=>"order_status_kontrola_ceka"===e.type).length,vecnaSpravnost:r.filter(e=>"order_status_kontrola_potvrzena"===e.type).length,registrZverejnena:r.filter(e=>"order_status_registr_zverejnena"===e.type).length,dokoncena:r.filter(e=>"order_status_dokoncena"===e.type).length,zrusena:r.filter(e=>"order_status_zrusena"===e.type).length},je=Math.ceil(me.length/fe),ke=ce*fe,ye=ke+fe,vn=me.slice(ke,ye),mn=ce>0,bn=ce<je-1;(0,i.useEffect)(()=>{pe(0)},[S,w,O,U,D,E,M]);const jn=()=>{q(!1),ne(null),oe(null)},kn=async e=>{(!e.precteno||0===e.precteno)&&await yn(e.id);try{const f=e.data||{},h="edit",u=f.order_id||e.objekt_id;if(e.typ&&e.typ.includes("order")&&u){const e=parseInt(u);if("edit"===h){const n=null===t||void 0===t?void 0:t.token,s=null===t||void 0===t?void 0:t.username;if(n&&s)try{var o,a,r;const c=await(0,b.getOrderV2)(e,n,s,!0);if(!c)return void(0,j.Xo)("error","Nepoda\u0159ilo se na\u010d\xedst objedn\xe1vku z datab\xe1ze");if(!0===(null===(o=c.lock_info)||void 0===o?void 0:o.locked)&&(null===(a=c.lock_info)||void 0===a||!a.is_owned_by_me)&&(null===(r=c.lock_info)||void 0===r||!r.is_expired)){var i,l,d;const n=c.lock_info,o=n.locked_by_user_fullname||"u\u017eivatel #".concat(n.locked_by_user_id),a=null===t||void 0===t||null===(i=t.roles)||void 0===i?void 0:i.some(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role);return ne({lockedByUserName:o,lockedByUserEmail:n.locked_by_user_email||null,lockedByUserTelefon:n.locked_by_user_telefon||null,lockedAt:n.locked_at||null,lockAgeMinutes:n.lock_age_minutes||null,canForceUnlock:a,orderId:e,userRoleName:(null===t||void 0===t||null===(l=t.roles)||void 0===l||null===(d=l.find(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role))||void 0===d?void 0:d.nazev_role)||"administr\xe1tor"}),oe({objednavka_id:e}),void q(!0)}}catch(F){return console.error("Chyba p\u0159i kontrole zam\u010den\xed:",F),void(0,j.Xo)("error","Chyba p\u0159i kontrole dostupnosti objedn\xe1vky")}}const p=(null===t||void 0===t?void 0:t.uzivatel_id)||(null===t||void 0===t?void 0:t.user_id);if(p){v.default.setCurrentUser(p);const t=await v.default.hasDraft();let o=!1,a=null,r=!1;if(t)try{var s,c;const n=await v.default.loadDraft(),t=n.savedOrderId||(null===(s=n.formData)||void 0===s?void 0:s.id),i=e;if(console.log("\ud83d\udd0d NotificationsPage - DEBUG POROVN\xc1N\xcd ID:",{draftOrderId:t,currentOrderId:i,"draftData.savedOrderId":n.savedOrderId,"draftData.formData?.id":null===(c=n.formData)||void 0===c?void 0:c.id,targetOrderId:e,"String(draftOrderId)":String(t),"String(currentOrderId)":String(i),"jsou stejn\xe9?":String(t)===String(i),"cel\xfd draftData":n}),t&&i&&String(t)===String(i))console.log("\u2705 Draft pat\u0159\xed k T\xc9TO objedn\xe1vce - naviguju bez ptan\xed"),o=!1,r=!0;else{console.log("\u274c Draft pat\u0159\xed k JIN\xc9 objedn\xe1vce - kontroluji zm\u011bny");const e=(0,x.V5)(n),t=(0,x.NN)(n);console.log("\ud83d\udcca Zm\u011bny v draftu:",{hasNewConcept:e,hasDbChanges:t}),o=e||t,o?(console.log("\u26a0\ufe0f ZOBRAZUJI CONFIRM DIALOG"),a=n):console.log("\u2705 \u017d\xe1dn\xe9 zm\u011bny - naviguju bez ptan\xed")}}catch(F){console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed draftu:",F),o=!1}if(r)return void n("/order-form-25?edit=".concat(e));if(o&&a)return le(a),se(e),void re(!0)}n("/order-form-25?edit=".concat(u))}else if(e.typ&&e.typ.includes("alarm_todo")&&f.order_id){const e=parseInt(f.order_id),o=null===t||void 0===t?void 0:t.user_id;if(o){v.default.setCurrentUser(o);const t=await v.default.hasDraft();let a=!1,r=null,i=!1;if(t)try{var p;const n=await v.default.loadDraft(),t=n.savedOrderId||(null===(p=n.formData)||void 0===p?void 0:p.id),o=e;if(t&&o&&String(t)===String(o))a=!1,i=!0;else{const e=(0,x.V5)(n),t=(0,x.NN)(n);a=e||t,a&&(r=n)}}catch(F){a=!1}if(i)return void n("/order-form-25?edit=".concat(e));if(a&&r)return le(r),se(e),void re(!0)}n("/order-form-25?edit=".concat(f.order_id))}}catch(F){}},yn=async(n,t)=>{null===t||void 0===t||t.stopPropagation();try{if(await(0,h.bA)(n),l(e=>e.map(e=>e.id===n?(0,a.A)((0,a.A)({},e),{},{is_read:1}):e)),null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(F){alert("Nepoda\u0159ilo se ozna\u010dit notifikaci jako p\u0159e\u010dtenou.")}},_n=async(n,t)=>{null===t||void 0===t||t.stopPropagation();try{await(0,h.yk)(n),l(e=>e.map(e=>e.id===n?(0,a.A)((0,a.A)({},e),{},{is_dismissed:1}):e));const t=r.find(e=>e.id===n);if(t&&(!t.precteno||0===t.precteno)&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(F){alert("Nepoda\u0159ilo se smazat notifikaci.")}},zn=async(e,n)=>{null===n||void 0===n||n.stopPropagation();try{await(0,h.WL)(e),l(n=>n.map(n=>n.id===e?(0,a.A)((0,a.A)({},n),{},{is_dismissed:0}):n))}catch(F){alert("Nepoda\u0159ilo se obnovit notifikaci.")}},An=n=>{W({isOpen:!0,title:"Smazat notifikaci",message:"Opravdu chcete trvale smazat tuto notifikaci z datab\xe1ze?\n\nTato akce je NEVRATN\xc1!",icon:c.yLS,variant:"danger",onConfirm:async()=>{W({isOpen:!1});try{await(0,h.fP)(n),l(e=>e.filter(e=>e.id!==n));const t=r.find(e=>e.id===n);if(t&&(!t.precteno||0===t.precteno)&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;n>0&&e.handleUnreadCountChange(n-1)}}catch(F){W({isOpen:!0,title:"Chyba",message:"Nepoda\u0159ilo se smazat notifikaci.\n\nZkuste to pros\xedm znovu.",icon:c.tUE,variant:"danger",onConfirm:()=>W({isOpen:!1}),onCancel:()=>W({isOpen:!1})})}},onCancel:()=>W({isOpen:!1})})},Sn=()=>{const n=S||w||O||U||D||E,t=n?ve:r,o=t.length;W({isOpen:!0,title:n?"Smazat zobrazen\xe9 notifikace":"Smazat v\u0161echny notifikace",message:"Opravdu chcete trvale smazat ".concat(n?"zobrazen\xe9":"V\u0160ECHNY"," notifikace (").concat(o," ks) z datab\xe1ze?\n\nTato akce je NEVRATN\xc1 a nelze ji vr\xe1tit zp\u011bt!"),icon:c.zpE,variant:"danger",onConfirm:async()=>{W({isOpen:!1});try{let o;if(n){const n=t.map(e=>(0,h.fP)(e.id));await Promise.all(n),o={deleted_count:t.length};const a=new Set(t.map(e=>e.id));l(e=>e.filter(e=>!a.has(e.id)));const r=t.filter(e=>!e.precteno||0===e.precteno).length;if(r>0&&null!==e&&void 0!==e&&e.handleUnreadCountChange){const n=e.unreadNotificationsCount||0;e.handleUnreadCountChange(Math.max(0,n-r))}}else o=await(0,h.L6)(),l([]),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(F){W({isOpen:!0,title:"Chyba",message:"Nepoda\u0159ilo se smazat notifikace.\n\nZkuste to pros\xedm znovu.",icon:c.tUE,variant:"danger",onConfirm:()=>W({isOpen:!1}),onCancel:()=>W({isOpen:!1})})}},onCancel:()=>W({isOpen:!1})})},Cn=e=>{if(!e)return"";const n=new Date(e),t=new Date-n,o=Math.floor(t/6e4);if(o<1)return"Pr\xe1v\u011b te\u010f";if(o<60)return"P\u0159ed ".concat(o," min");const a=Math.floor(o/60);if(a<24)return"P\u0159ed ".concat(a," h");const r=Math.floor(a/24);return r<7?"P\u0159ed ".concat(r," d"):n.toLocaleDateString("cs-CZ",{day:"numeric",month:"long",year:"numeric"})},wn=e=>{switch((e||"INFO").toUpperCase()){case"EXCEPTIONAL":case"URGENT":return(0,k.jsx)(s.g,{icon:c.zm_});case"APPROVAL":case"HIGH":return(0,k.jsx)(s.g,{icon:c.bxP});default:return(0,k.jsx)(s.g,{icon:c.iW_})}};return(0,k.jsxs)(_e,{children:[(0,k.jsxs)(ze,{children:[(0,k.jsxs)(Ae,{children:[(0,k.jsxs)(Se,{children:[(0,k.jsx)(f.z,{text:"Obnovit data z datab\xe1ze (force reload)",icon:"warning",preferredPosition:"bottom",children:(0,k.jsx)(Ce,{onClick:()=>{ge(!0)},children:(0,k.jsx)(s.g,{icon:c.OtC})})}),(0,k.jsx)(f.z,{text:M?"Zobrazit v\u0161echny notifikace samostatn\u011b":"Seskupit notifikace objedn\xe1vek do vl\xe1ken",icon:"info",preferredPosition:"bottom",children:(0,k.jsx)(Ce,{onClick:()=>J(!M),style:{background:M?"rgba(34, 197, 94, 0.25)":"rgba(255, 255, 255, 0.15)",borderColor:M?"rgba(34, 197, 94, 0.5)":"rgba(255, 255, 255, 0.3)"},children:(0,k.jsx)(s.g,{icon:M?c.qIE:c.ITF})})}),be.unread>0&&(0,k.jsxs)(Ee,{onClick:async()=>{try{await(0,h.he)(),l(e=>e.map(e=>(0,a.A)((0,a.A)({},e),{},{is_read:1}))),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(F){alert("Nepoda\u0159ilo se ozna\u010dit v\u0161echny notifikace jako p\u0159e\u010dten\xe9.")}},title:"Ozna\u010dit v\u0161echny notifikace jako p\u0159e\u010dten\xe9",children:[(0,k.jsx)(s.g,{icon:c.FK2}),"Ozna\u010dit v\u0161e jako p\u0159e\u010dten\xe9"]}),r.length>0&&(0,k.jsxs)(Ee,{onClick:async()=>{try{const n=r.map(e=>(0,h.yk)(e.id));await Promise.all(n),l(e=>e.map(e=>(0,a.A)((0,a.A)({},e),{},{is_dismissed:1}))),null!==e&&void 0!==e&&e.handleUnreadCountChange&&e.handleUnreadCountChange(0)}catch(F){alert("Nepoda\u0159ilo se smazat v\u0161echny notifikace. N\u011bkter\xe9 mohly b\xfdt smaz\xe1ny."),ge()}},title:"Skr\xfdt v\u0161echny notifikace ze zvone\u010dku",children:[(0,k.jsx)(s.g,{icon:c.k6j}),"Skr\xfdt v\u0161e ze zvone\u010dku"]}),r.length>0&&(()=>{const e=S||w||O||U||D||E,n=e?ve.length:r.length,t=e?"Smazat zobrazen\xe9 (".concat(n,")"):"Smazat v\u0161e trvale";return(0,k.jsxs)(Ee,{onClick:Sn,title:e?"Sma\u017ee ".concat(n," zobrazen\xfdch notifikac\xed"):"Sma\u017ee v\u0161echny notifikace (".concat(n," ks)"),children:[(0,k.jsx)(s.g,{icon:c.yLS}),t]})})(),(0,k.jsxs)(Ee,{onClick:()=>Y(!K),title:K?"Skr\xfdt detaily (p\u0159edm\u011bt, cena, tagy)":"Zobrazit detaily (p\u0159edm\u011bt, cena, tagy)",style:{marginRight:"auto"},children:[(0,k.jsx)(s.g,{icon:K?c.pS3:c.k6j}),"Detailn\xed re\u017eim"]})]}),(0,k.jsxs)($e,{children:["Spr\xe1va a p\u0159ehled notifikac\xed",(0,k.jsx)(s.g,{icon:c.z$e})]})]}),(0,k.jsx)(we,{}),(0,k.jsxs)(Fe,{children:[(0,k.jsx)(Be,{children:"Dashboard - p\u0159ehled notifikac\xed"}),(0,k.jsx)(Ze,{}),(0,k.jsx)(We,{onClick:()=>X(!G),children:(0,k.jsx)(s.g,{icon:G?c.Jt$:c.w2A})})]}),!G&&(0,k.jsxs)(Le,{children:[(0,k.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:!S&&!T,onClick:()=>xe("total"),title:"Kliknut\xedm zru\u0161\xedte v\u0161echny filtry",children:[(0,k.jsx)(Je,{children:be.total}),(0,k.jsx)(Ve,{children:"\ud83d\udcca"}),(0,k.jsx)(He,{children:"Celkem notifikac\xed"})]}),(0,k.jsxs)(Me,{$color:"#64748b",$clickable:!0,$isActive:"nova"===T,onClick:()=>xe("nova"),title:"Filtrovat: Objedn\xe1vka vytvo\u0159ena",children:[(0,k.jsx)(Je,{children:be.nova}),(0,k.jsx)(Ve,{children:"\ud83d\udcdd"}),(0,k.jsx)(He,{children:"Nov\xe1"})]}),(0,k.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:"keSchvaleni"===T,onClick:()=>xe("keSchvaleni"),title:"Filtrovat: Objedn\xe1vka ke schv\xe1len\xed",children:[(0,k.jsx)(Je,{children:be.keSchvaleni}),(0,k.jsx)(Ve,{children:"\ud83d\udccb"}),(0,k.jsx)(He,{children:"Ke schv\xe1len\xed"})]}),(0,k.jsxs)(Me,{$color:"#16a34a",$clickable:!0,$isActive:"schvalena"===T,onClick:()=>xe("schvalena"),title:"Filtrovat: Objedn\xe1vka schv\xe1lena",children:[(0,k.jsx)(Je,{children:be.schvalena}),(0,k.jsx)(Ve,{children:"\ud83d\udc4d"}),(0,k.jsx)(He,{children:"Schv\xe1len\xe1"})]}),(0,k.jsxs)(Me,{$color:"#dc2626",$clickable:!0,$isActive:"zamitnuta"===T,onClick:()=>xe("zamitnuta"),title:"Filtrovat: Objedn\xe1vka zam\xedtnuta",children:[(0,k.jsx)(Je,{children:be.zamitnuta}),(0,k.jsx)(Ve,{children:"\u274c"}),(0,k.jsx)(He,{children:"Zam\xedtnut\xe1"})]}),(0,k.jsxs)(Me,{$color:"#f59e0b",$clickable:!0,$isActive:"cekaSe"===T,onClick:()=>xe("cekaSe"),title:"Filtrovat: Objedn\xe1vka \u010dek\xe1",children:[(0,k.jsx)(Je,{children:be.cekaSe}),(0,k.jsx)(Ve,{children:"\u23f8\ufe0f"}),(0,k.jsx)(He,{children:"\u010cek\xe1 se"})]}),(0,k.jsxs)(Me,{$color:"#3b82f6",$clickable:!0,$isActive:"odeslana"===T,onClick:()=>xe("odeslana"),title:"Filtrovat: Objedn\xe1vka odesl\xe1na dodavateli",children:[(0,k.jsx)(Je,{children:be.odeslana}),(0,k.jsx)(Ve,{children:"\ud83d\udce4"}),(0,k.jsx)(He,{children:"Odesl\xe1na dodavateli"})]}),(0,k.jsxs)(Me,{$color:"#8b5cf6",$clickable:!0,$isActive:"potvrzena"===T,onClick:()=>xe("potvrzena"),title:"Filtrovat: Objedn\xe1vka potvrzena dodavatelem",children:[(0,k.jsx)(Je,{children:be.potvrzena}),(0,k.jsx)(Ve,{children:"\u2714\ufe0f"}),(0,k.jsx)(He,{children:"Potvrzena dodavatelem"})]}),(0,k.jsxs)(Me,{$color:"#f59e0b",$clickable:!0,$isActive:"cekaKontrola"===T,onClick:()=>xe("cekaKontrola"),title:"Filtrovat: \u010cek\xe1 na kontrolu",children:[(0,k.jsx)(Je,{children:be.cekaKontrola}),(0,k.jsx)(Ve,{children:"\ud83d\udd0d"}),(0,k.jsx)(He,{children:"\u010cek\xe1 na kontrolu"})]}),(0,k.jsxs)(Me,{$color:"#10b981",$clickable:!0,$isActive:"vecnaSpravnost"===T,onClick:()=>xe("vecnaSpravnost"),title:"Filtrovat: V\u011bcn\xe1 spr\xe1vnost potvrzena",children:[(0,k.jsx)(Je,{children:be.vecnaSpravnost}),(0,k.jsx)(Ve,{children:"\u2705"}),(0,k.jsx)(He,{children:"V\u011bcn\xe1 spr\xe1vnost"})]}),(0,k.jsxs)(Me,{$color:"#10b981",$clickable:!0,$isActive:"registrZverejnena"===T,onClick:()=>xe("registrZverejnena"),title:"Filtrovat: Zve\u0159ejn\u011bna v registru smluv",children:[(0,k.jsx)(Je,{children:be.registrZverejnena}),(0,k.jsx)(Ve,{children:"\ud83d\udce2"}),(0,k.jsx)(He,{children:"Zve\u0159ejn\u011bna v registru"})]}),(0,k.jsxs)(Me,{$color:"#059669",$clickable:!0,$isActive:"dokoncena"===T,onClick:()=>xe("dokoncena"),title:"Filtrovat: Objedn\xe1vka dokon\u010dena",children:[(0,k.jsx)(Je,{children:be.dokoncena}),(0,k.jsx)(Ve,{children:"\ud83c\udfaf"}),(0,k.jsx)(He,{children:"Dokon\u010den\xe1"})]}),(0,k.jsxs)(Me,{$color:"#6b7280",$clickable:!0,$isActive:"zrusena"===T,onClick:()=>xe("zrusena"),title:"Filtrovat: Objedn\xe1vka zru\u0161ena",children:[(0,k.jsx)(Je,{children:be.zrusena}),(0,k.jsx)(Ve,{children:"\ud83d\udeab"}),(0,k.jsx)(He,{children:"Zru\u0161en\xe1"})]})]}),(0,k.jsxs)(Oe,{children:[(0,k.jsxs)(Ne,{children:[(0,k.jsx)(Ie,{children:(0,k.jsx)(s.g,{icon:c.MjD})}),(0,k.jsx)(Ue,{type:"text",placeholder:"Hledat v notifikac\xedch...",value:S,onChange:e=>C(e.target.value)}),S&&(0,k.jsx)(De,{onClick:()=>C(""),title:"Vymazat",children:(0,k.jsx)(s.g,{icon:c.GRI})})]}),(0,k.jsxs)(Pe,{children:[(0,k.jsx)(Re,{$active:!w&&!O,onClick:()=>{$(!1),N(!1)},children:"V\u0161echny"}),(0,k.jsxs)(Re,{$active:w,onClick:()=>{$(!w),w||N(!1)},children:[(0,k.jsx)(s.g,{icon:c.z$e}),"Nep\u0159e\u010dten\xe9"]}),(0,k.jsxs)(Re,{$active:O,onClick:()=>{N(!O),O||$(!1)},children:[(0,k.jsx)(s.g,{icon:c.FK2}),"P\u0159e\u010dten\xe9"]}),(0,k.jsxs)(Re,{$active:U,onClick:()=>I(!U),children:[(0,k.jsx)(s.g,{icon:c.tUE}),"Urgentn\xed"]}),(0,k.jsxs)(Re,{$active:D,onClick:()=>P(!D),children:[(0,k.jsx)(s.g,{icon:c.a$}),"Vysok\xe1"]}),(0,k.jsxs)(Re,{$active:E,onClick:()=>R(!E),children:[(0,k.jsx)(s.g,{icon:c.iW_}),"Norm\xe1ln\xed"]}),M&&me.some(e=>e.isThread&&e.olderNotifications.length>0)&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[(0,k.jsxs)(Re,{onClick:()=>{const e=me.filter(e=>e.isThread&&e.olderNotifications.length>0).map(e=>e.orderId);H(new Set(e))},title:"Rozbalit v\u0161echna vl\xe1kna",style:{borderColor:"#10b981",color:"#10b981"},children:[(0,k.jsx)(s.g,{icon:c.vQu}),"Rozbalit v\u0161e"]}),(0,k.jsxs)(Re,{onClick:()=>{H(new Set)},title:"Sbalit v\u0161echna vl\xe1kna",style:{borderColor:"#6366f1",color:"#6366f1"},children:[(0,k.jsx)(s.g,{icon:c.rMD}),"Sbalit v\u0161e"]})]})})]})]}),(0,k.jsx)(Ke,{children:F?(0,k.jsxs)(ln,{children:[(0,k.jsx)(dn,{children:"\u274c"}),(0,k.jsx)(sn,{children:"Chyba p\u0159i na\u010d\xedt\xe1n\xed"}),(0,k.jsx)(cn,{children:F}),(0,k.jsx)(Te,{style:{marginTop:"16px"},onClick:ge,children:"Zkusit znovu"})]}):d?(0,k.jsxs)(pn,{children:[(0,k.jsx)("div",{style:{fontSize:"32px",marginBottom:"16px"},children:"\u23f3"}),"Na\u010d\xedt\xe1n\xed notifikac\xed..."]}):0===ve.length?(0,k.jsxs)(ln,{children:[(0,k.jsx)(dn,{children:"\ud83d\udd14"}),(0,k.jsx)(sn,{children:S||w||O||U||D||E?"\u017d\xe1dn\xe9 notifikace neodpov\xeddaj\xed filtr\u016fm":"\u017d\xe1dn\xe9 notifikace"}),(0,k.jsx)(cn,{children:S||w||O||U||D||E?"Zkuste zm\u011bnit filtry nebo vyhled\xe1v\xe1n\xed":"Budete informov\xe1ni o nov\xfdch ud\xe1lostech"})]}):vn.map((e,n)=>{var t,o,a,r,l,d,p;if(e.isThread){var f,h,u,g,x,v,m,b;const{orderId:t,mainNotification:o,olderNotifications:a}=e,r=V.has(t),l=a.length,d="thread-".concat(t,"-").concat(o.id),p=!o.precteno||0===o.precteno||!1===o.precteno,j=1===o.skryto||!0===o.skryto,y=o.priorita||"normal",_=o.data||{};return o.data=_,(0,k.jsxs)(i.Fragment,{children:[(0,k.jsxs)(Ye,{$index:n,$isUnread:p,$priority:y,onClick:()=>kn(o),style:{borderLeft:l>0?"4px solid #3b82f6":void 0},children:[(0,k.jsx)(Ge,{$priority:y,children:wn(y)}),(0,k.jsxs)(Xe,{children:[(0,k.jsx)(Qe,{children:(0,k.jsxs)(qe,{$isUnread:p,children:[((e,n,t,a)=>{if(null!==(e=o.typ)&&void 0!==e&&e.includes("order")&&null!==(n=o.data)&&void 0!==n&&n.order_id&&o.nadpis){const e=o.nadpis.match(/(O-[^\s:]+)/);if(e){var r,i;const n=e[1],t=o.nadpis.substring(0,e.index),a=o.nadpis.substring(e.index+n.length);return(0,k.jsxs)(k.Fragment,{children:[t,(0,k.jsxs)("a",{href:"/order-form-25?edit=".concat(o.data.order_id,"&archivovano=1"),onClick:async e=>{e.preventDefault(),e.stopPropagation(),await kn(o)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[n,(0,k.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",o.data.order_id]})]}),a,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),Cn(o.dt_created||o.created_at),(null===(r=o.data)||void 0===r||null===(i=r.placeholders)||void 0===i?void 0:i.action_performed_by)&&" | ".concat(o.data.placeholders.action_performed_by),o.from_user_name&&" | Od: ".concat(o.from_user_name)]})]})}}return(0,k.jsxs)(k.Fragment,{children:[o.nadpis,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),Cn(o.dt_created||o.created_at),(null===(t=o.data)||void 0===t||null===(a=t.placeholders)||void 0===a?void 0:a.action_performed_by)&&" | ".concat(o.data.placeholders.action_performed_by),o.from_user_name&&" | Od: ".concat(o.from_user_name)]})]})})(),l>0&&(0,k.jsxs)("span",{style:{background:"#dbeafe",color:"#1e40af",fontSize:"0.85em",marginLeft:"0.75em",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap",padding:"3px 8px",borderRadius:"6px"},onClick:e=>{e.stopPropagation(),H(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})},title:r?"Skr\xfdt star\u0161\xed notifikace":"Zobrazit star\u0161\xed notifikace",children:[(0,k.jsx)(s.g,{icon:r?c.Jt$:c.qIE,style:{marginRight:"4px"}}),l," ",1===l||l<5?"star\u0161\xed":"star\u0161\xedch"]})]})}),null!==(f=o.typ)&&void 0!==f&&f.includes("order")&&null!==(h=o.data)&&void 0!==h&&h.placeholders?(0,k.jsxs)(en,{children:[(0,k.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",o.data.placeholders.order_subject||o.data.placeholders.predmet||"N/A"," | ",(0,k.jsx)("strong",{children:"Cena:"})," ",o.data.placeholders.max_price_with_dph||o.data.placeholders.amount||"N/A"," | ",(0,k.jsx)("strong",{children:"Objednatel:"})," ",o.data.placeholders.creator_name||o.data.placeholders.objednatel_name||"N/A"," | ",(0,k.jsx)("strong",{children:"Garant:"})," ",o.data.placeholders.garant_name||"N/A"," | ",(0,k.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",o.data.placeholders.prikazce_name||o.data.placeholders.schvalovatel_name||"N/A"]}):o.zprava||o.message?(0,k.jsx)(en,{children:o.zprava||o.message}):null,K&&(null===(u=o.data)||void 0===u||null===(g=u.placeholders)||void 0===g?void 0:g.note)&&(0,k.jsxs)("div",{style:{fontSize:"0.85rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.625rem 0.75rem",background:"#f8fafc",borderLeft:"3px solid #cbd5e1",borderRadius:"4px"},children:[(0,k.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",o.data.placeholders.note]}),(0,k.jsxs)(nn,{children:[o.category&&(0,k.jsx)(on,{$type:o.category,children:ue(o.category)}),(null===(x=o.data)||void 0===x||null===(v=x.placeholders)||void 0===v?void 0:v.action_date)&&(0,k.jsxs)(on,{style:{background:"#dbeafe",color:"#1e40af"},children:["\ud83d\udcc5 ",o.data.placeholders.action_date]}),(null===(m=o.data)||void 0===m||null===(b=m.placeholders)||void 0===b?void 0:b.action_performed_by)&&(0,k.jsxs)(on,{style:{background:"#f3e8ff",color:"#6b21a8",fontWeight:600},children:["\ud83d\udc64 ",o.data.placeholders.action_performed_by]})]})]}),(0,k.jsxs)(an,{children:[a.length>0&&(0,k.jsx)(rn,{onClick:e=>{e.stopPropagation();const n=new Set(V);r?n.delete(t):n.add(t),H(n)},title:r?"Sbalit vl\xe1kno":"Rozbalit vl\xe1kno",style:{color:r?"#6366f1":"#10b981"},children:(0,k.jsx)(s.g,{icon:r?c.Jt$:c.XkK})}),p&&(0,k.jsx)(rn,{onClick:e=>yn(o.id,e),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",children:(0,k.jsx)(s.g,{icon:c.e68})}),j?(0,k.jsx)(rn,{onClick:e=>zn(o.id,e),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a"},children:(0,k.jsx)(s.g,{icon:c.U23})}):(0,k.jsx)(rn,{onClick:e=>_n(o.id,e),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",children:(0,k.jsx)(s.g,{icon:c.k6j})}),(0,k.jsx)(rn,{onClick:e=>{e.stopPropagation(),An(o.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626"},children:(0,k.jsx)(s.g,{icon:c.yLS})})]})]}),r&&a.map((e,t)=>{var o,a,r,i,l,p,f;const h=!e.precteno||0===e.precteno,u=1===e.skryto,g=e.priority||"normal",x=e.data||{};return e.data=x,(0,k.jsxs)(Ye,{$index:n+t+1,$isUnread:h,$priority:g,onClick:()=>kn(e),style:{marginLeft:"3rem",borderLeft:"3px solid #cbd5e1",background:"#f9fafb",opacity:.85,padding:"10px 14px"},children:[(0,k.jsxs)(Xe,{style:{marginLeft:"0"},children:[(0,k.jsx)(Qe,{style:{marginBottom:"6px"},children:(0,k.jsx)(qe,{$isUnread:h,style:{fontSize:"13.5px",lineHeight:"1.4"},children:((n,t,o,a)=>{if(null!==(n=e.type)&&void 0!==n&&n.includes("order")&&null!==(t=e.data)&&void 0!==t&&t.order_id&&e.title){const n=e.title.match(/(O-[^\s:]+)/);if(n){var r,i;const t=n[1],o=e.title.substring(0,n.index),a=e.title.substring(n.index+t.length);return(0,k.jsxs)(k.Fragment,{children:[o,(0,k.jsxs)("a",{href:"/order-form-25?edit=".concat(e.data.order_id,"&archivovano=1"),onClick:async n=>{n.preventDefault(),n.stopPropagation(),await kn(e)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[t,(0,k.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",e.data.order_id]})]}),a,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.85em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"10px",marginRight:"4px"}}),Cn(e.dt_created||e.created_at),(null===(r=e.data)||void 0===r||null===(i=r.placeholders)||void 0===i?void 0:i.action_performed_by)&&" | ".concat(e.data.placeholders.action_performed_by),e.from_user_name&&" | Od: ".concat(e.from_user_name)]})]})}}return(0,k.jsxs)(k.Fragment,{children:[e.title,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.85em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"10px",marginRight:"4px"}}),Cn(e.dt_created||e.created_at),(null===(o=e.data)||void 0===o||null===(a=o.placeholders)||void 0===a?void 0:a.action_performed_by)&&" | ".concat(e.data.placeholders.action_performed_by),e.from_user_name&&" | Od: ".concat(e.from_user_name)]})]})})()})}),null!==(o=e.typ)&&void 0!==o&&o.includes("order")&&e.data?(0,k.jsxs)(en,{style:{fontSize:"13px",lineHeight:"1.5",marginBottom:"6px"},children:[(0,k.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",e.data.order_subject||"N/A"," | ",(0,k.jsx)("strong",{children:"Cena:"})," ",e.data.max_price_with_dph||e.data.max_price||"N/A"," K\u010d | ",(0,k.jsx)("strong",{children:"Objednatel:"})," ",e.data.creator_name||"N/A"," | ",(0,k.jsx)("strong",{children:"Garant:"})," ",e.data.garant_name||"N/A"," | ",(0,k.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",e.data.prikazce_name||"N/A"]}):e.zprava||e.message?(0,k.jsx)(en,{style:{fontSize:"13px",lineHeight:"1.5",marginBottom:"6px"},children:e.zprava||e.message}):null,K&&(null===(a=e.data)||void 0===a||null===(r=a.placeholders)||void 0===r?void 0:r.note)&&(0,k.jsxs)("div",{style:{fontSize:"0.8rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.5rem 0.625rem",background:"#f8fafc",borderLeft:"2px solid #cbd5e1",borderRadius:"3px",lineHeight:"1.4"},children:[(0,k.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",e.data.placeholders.note]}),(0,k.jsxs)(nn,{style:{gap:"10px",marginTop:"6px"},children:[e.category&&(0,k.jsx)(on,{$type:e.category,style:{fontSize:"10px",padding:"2px 6px"},children:ue(e.category)}),(null===(i=e.data)||void 0===i||null===(l=i.placeholders)||void 0===l?void 0:l.action_date)&&(0,k.jsxs)(on,{style:{background:"#dbeafe",color:"#1e40af",fontSize:"10px",padding:"2px 6px"},children:["\ud83d\udcc5 ",e.data.placeholders.action_date]}),(null===(p=e.data)||void 0===p||null===(f=p.placeholders)||void 0===f?void 0:f.action_performed_by)&&(0,k.jsxs)(on,{style:{background:"#f3e8ff",color:"#6b21a8",fontSize:"10px",padding:"2px 6px",fontWeight:600},children:["\ud83d\udc64 ",e.data.placeholders.action_performed_by]}),u&&(0,k.jsx)(on,{style:{background:"#fee2e2",color:"#991b1b",fontWeight:700,fontSize:"10px",padding:"2px 6px"},children:"\ufffd Nezobrazuje se ve zvone\u010dku"})]})]}),(0,k.jsxs)(an,{children:[h&&(0,k.jsx)(rn,{onClick:n=>yn(e.id,n),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",style:{width:"28px",height:"28px"},children:(0,k.jsx)(s.g,{icon:c.e68})}),u?(0,k.jsx)(rn,{onClick:n=>zn(e.id,n),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a",width:"28px",height:"28px"},children:(0,k.jsx)(s.g,{icon:c.U23})}):(0,k.jsx)(rn,{onClick:n=>_n(e.id,n),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",style:{width:"28px",height:"28px"},children:(0,k.jsx)(s.g,{icon:c.k6j})}),(0,k.jsx)(rn,{onClick:n=>{n.stopPropagation(),An(e.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626",width:"28px",height:"28px"},children:(0,k.jsx)(s.g,{icon:c.yLS})})]})]},"".concat(d,"-older-").concat(e.id))})]},d)}const j=e.notification||e,y=!j.precteno||0===j.precteno||!1===j.precteno,_=1===j.skryto||!0===j.skryto,z=j.priorita||"normal",A=j.data||{};j.data=A;const S="notification-".concat(j.id);return(0,k.jsxs)(Ye,{$index:n,$isUnread:y,$priority:z,onClick:()=>kn(j),children:[K&&(0,k.jsx)(Ge,{$priority:z,children:wn(z)}),(0,k.jsxs)(Xe,{style:K?void 0:{marginLeft:"0"},children:[(0,k.jsx)(Qe,{children:(0,k.jsx)(qe,{$isUnread:y,children:((e,n,t,o)=>{if(null!==(e=j.typ)&&void 0!==e&&e.includes("order")&&null!==(n=j.data)&&void 0!==n&&n.order_id&&j.nadpis){const e=j.nadpis.match(/(O-[^\s:]+)/);if(e){var a,r;const n=e[1],t=j.nadpis.substring(0,e.index),o=j.nadpis.substring(e.index+n.length);return(0,k.jsxs)(k.Fragment,{children:[t,(0,k.jsxs)("a",{href:"/order-form-25?edit=".concat(j.data.order_id,"&archivovano=1"),onClick:async e=>{e.preventDefault(),e.stopPropagation(),await kn(j)},style:{color:"#3b82f6",textDecoration:"none",fontWeight:"700"},title:"Editovat objedn\xe1vku",children:[n,(0,k.jsxs)("sup",{style:{fontSize:"0.6em",fontWeight:"400",marginLeft:"0.2em",color:"#64748b"},children:["#",j.data.order_id]})]}),o,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),Cn(j.dt_created||j.created_at),(null===(a=j.data)||void 0===a||null===(r=a.placeholders)||void 0===r?void 0:r.action_performed_by)&&" | ".concat(j.data.placeholders.action_performed_by),j.from_user_name&&" | Od: ".concat(j.from_user_name)]})]})}}return(0,k.jsxs)(k.Fragment,{children:[j.nadpis,!K&&(0,k.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"400",fontSize:"0.9em",marginLeft:"0.5em"},children:["| ",(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"11px",marginRight:"4px"}}),Cn(j.dt_created||j.created_at),(null===(t=j.data)||void 0===t||null===(o=t.placeholders)||void 0===o?void 0:o.action_performed_by)&&" | ".concat(j.data.placeholders.action_performed_by),j.from_user_name&&" | Od: ".concat(j.from_user_name)]})]})})()})}),K&&null!==(t=j.typ)&&void 0!==t&&t.includes("order")&&j.data?(0,k.jsxs)(en,{children:[(0,k.jsx)("strong",{children:"P\u0159edm\u011bt:"})," ",j.data.order_subject||"N/A"," | ",(0,k.jsx)("strong",{children:"Cena:"})," ",j.data.max_price?"".concat(j.data.max_price," K\u010d"):"N/A"," | ",(0,k.jsx)("strong",{children:"Objednatel:"})," ",j.data.creator_name||"N/A"," | ",(0,k.jsx)("strong",{children:"Garant:"})," ",j.data.garant_name||"N/A"," | ",(0,k.jsx)("strong",{children:"P\u0159\xedkazce:"})," ",j.data.prikazce_name||"N/A"]}):K&&j.zprava?(0,k.jsx)(en,{children:j.zprava}):null,K&&(null===(o=j.data)||void 0===o||null===(a=o.placeholders)||void 0===a?void 0:a.note)&&(0,k.jsxs)("div",{style:{fontSize:"0.85rem",color:"#475569",fontStyle:"italic",marginTop:"0.5rem",padding:"0.625rem 0.75rem",background:"#f8fafc",borderLeft:"3px solid #cbd5e1",borderRadius:"4px"},children:[(0,k.jsx)("strong",{style:{fontStyle:"normal",color:"#64748b"},children:"\ud83d\udcdd Pozn\xe1mka:"})," ",j.data.placeholders.note]}),(0,k.jsxs)(nn,{children:[K&&(0,k.jsxs)(tn,{children:[(0,k.jsx)(s.g,{icon:c.a$,style:{fontSize:"12px"}}),Cn(j.dt_created||j.created_at)]}),K&&j.kategorie&&(0,k.jsx)(on,{$type:j.kategorie,children:ue(j.kategorie)}),K&&(null===(r=j.data)||void 0===r||null===(l=r.placeholders)||void 0===l?void 0:l.action_date)&&(0,k.jsxs)(on,{style:{background:"#dbeafe",color:"#1e40af"},children:["\ud83d\udcc5 ",j.data.placeholders.action_date]}),K&&(null===(d=j.data)||void 0===d||null===(p=d.placeholders)||void 0===p?void 0:p.action_performed_by)&&(0,k.jsxs)(on,{style:{background:"#f3e8ff",color:"#6b21a8",fontWeight:600},children:["\ud83d\udc64 ",j.data.placeholders.action_performed_by]})]})]}),(0,k.jsxs)(an,{children:[y&&(0,k.jsx)(rn,{onClick:e=>yn(j.id,e),title:"Ozna\u010dit jako p\u0159e\u010dten\xe9",children:(0,k.jsx)(s.g,{icon:c.e68})}),_?(0,k.jsx)(rn,{onClick:e=>zn(j.id,e),title:"Zobrazit zp\u011bt ve zvone\u010dku",style:{color:"#16a34a"},children:(0,k.jsx)(s.g,{icon:c.U23})}):(0,k.jsx)(rn,{onClick:e=>_n(j.id,e),title:"Skr\xfdt ze zvone\u010dku (z\u016fstane zde v historii)",children:(0,k.jsx)(s.g,{icon:c.k6j})}),(0,k.jsx)(rn,{onClick:e=>{e.stopPropagation(),An(j.id)},title:"Smazat trvale z datab\xe1ze",style:{color:"#dc2626"},children:(0,k.jsx)(s.g,{icon:c.yLS})})]})]},S)})}),!d&&!F&&ve.length>0&&(0,k.jsxs)(fn,{children:[(0,k.jsxs)(hn,{children:["Zobrazeno ",vn.length," z ",me.length," notifikac\xed",me.length!==r.length&&(0,k.jsxs)("span",{children:[" (filtrov\xe1no z ",r.length,")"]})]}),(0,k.jsxs)(un,{children:[(0,k.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,k.jsxs)(xn,{value:fe,onChange:e=>{const n=parseInt(e.target.value);he(n),pe(0)},children:[(0,k.jsx)("option",{value:10,children:"10"}),(0,k.jsx)("option",{value:25,children:"25"}),(0,k.jsx)("option",{value:50,children:"50"}),(0,k.jsx)("option",{value:100,children:"100"}),(0,k.jsx)("option",{value:250,children:"250"})]}),(0,k.jsx)(gn,{onClick:()=>{pe(0)},disabled:!mn,children:"\xab\xab"}),(0,k.jsx)(gn,{onClick:()=>{pe(e=>Math.max(0,e-1))},disabled:!mn,children:"\u2039"}),(0,k.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",ce+1," z ",je||1]}),(0,k.jsx)(gn,{onClick:()=>{pe(e=>Math.min(je-1,e+1))},disabled:!bn,children:"\u203a"}),(0,k.jsx)(gn,{onClick:()=>{pe(je-1)},disabled:!bn,children:"\xbb\xbb"})]})]})]}),ee&&(0,k.jsx)(g.A,{isOpen:Q,onClose:jn,onConfirm:ee.canForceUnlock?()=>{null!==te&&void 0!==te&&te.objednavka_id&&(q(!1),n("/order-form-25?edit=".concat(te.objednavka_id,"&force=1")))}:jn,title:ee.canForceUnlock?"Objedn\xe1vka je zam\u010den\xe1":"Objedn\xe1vka nen\xed dostupn\xe1",icon:"\ud83d\udd12",variant:"warning",confirmText:ee.canForceUnlock?"Odemknout a p\u0159evz\xedt":"Zav\u0159\xedt",cancelText:"Zru\u0161it",showCancel:ee.canForceUnlock,children:ee.canForceUnlock?(0,k.jsxs)("div",{style:{padding:"1rem 0"},children:[(0,k.jsx)("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"\u26a0\ufe0f Objedn\xe1vka je aktu\xe1ln\u011b editov\xe1na u\u017eivatelem:"}),(0,k.jsx)("div",{style:{padding:"1rem",background:"#f8fafc",borderLeft:"4px solid #3b82f6",borderRadius:"4px",marginBottom:"1rem"},children:(0,k.jsx)("strong",{style:{fontSize:"1.1rem"},children:ee.lockedByUserName})}),(ee.lockedByUserEmail||ee.lockedByUserTelefon)&&(0,k.jsxs)("div",{style:{padding:"1rem",background:"#f0f9ff",border:"1px solid #bfdbfe",borderRadius:"8px",marginBottom:"1rem"},children:[(0,k.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#1e40af"},children:"Kontaktn\xed \xfadaje:"}),ee.lockedByUserEmail&&(0,k.jsxs)("div",{style:{padding:"0.5rem 0",color:"#1e40af"},children:["\ud83d\udce7 ",ee.lockedByUserEmail]}),ee.lockedByUserTelefon&&(0,k.jsxs)("div",{style:{padding:"0.5rem 0",color:"#1e40af"},children:["\ud83d\udcde ",ee.lockedByUserTelefon]})]}),(0,k.jsxs)("p",{style:{color:"#64748b",lineHeight:"1.6",marginBottom:"1rem"},children:["Jako ",(0,k.jsx)("strong",{children:ee.userRoleName})," m\xe1te pr\xe1vo objedn\xe1vku odemknout a p\u0159evz\xedt ji na sebe. Tato akce upozorn\xed p\u016fvodn\xedho u\u017eivatele, \u017ee mu byla objedn\xe1vka odebr\xe1na."]}),(0,k.jsx)("p",{style:{color:"#dc2626",fontWeight:"600"},children:"Opravdu chcete p\u0159evz\xedt editaci t\xe9to objedn\xe1vky?"})]}):(0,k.jsxs)("div",{style:{padding:"1rem 0"},children:[(0,k.jsx)("p",{style:{color:"#dc2626",fontWeight:"600",marginBottom:"1rem"},children:"\u274c Objedn\xe1vka je aktu\xe1ln\u011b editov\xe1na jin\xfdm u\u017eivatelem:"}),(0,k.jsx)("div",{style:{padding:"1rem",background:"#f8fafc",borderLeft:"4px solid #dc2626",borderRadius:"4px",marginBottom:"1rem"},children:(0,k.jsx)("strong",{style:{fontSize:"1.1rem"},children:ee.lockedByUserName})}),(ee.lockedByUserEmail||ee.lockedByUserTelefon)&&(0,k.jsxs)("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",marginBottom:"1rem"},children:[(0,k.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#991b1b"},children:"Kontaktujte u\u017eivatele:"}),ee.lockedByUserEmail&&(0,k.jsxs)("div",{style:{padding:"0.5rem 0",color:"#991b1b"},children:["\ud83d\udce7 ",ee.lockedByUserEmail]}),ee.lockedByUserTelefon&&(0,k.jsxs)("div",{style:{padding:"0.5rem 0",color:"#991b1b"},children:["\ud83d\udcde ",ee.lockedByUserTelefon]})]}),(0,k.jsx)("p",{style:{color:"#64748b",lineHeight:"1.6"},children:"Pokud je to nezbytn\xe9, kontaktujte administr\xe1tora, kter\xfd m\xe1 pr\xe1vo objedn\xe1vku odemknout."})]})}),(0,k.jsx)(g.A,{isOpen:Z.isOpen,title:Z.title,icon:Z.icon,variant:Z.variant,onConfirm:Z.onConfirm,onClose:Z.onCancel,children:Z.message}),(0,k.jsxs)(g.A,{isOpen:ae,onClose:()=>{re(!1),le(null),se(null)},onConfirm:async()=>{re(!1);const e=(null===t||void 0===t?void 0:t.uzivatel_id)||(null===t||void 0===t?void 0:t.user_id);e&&(v.default.setCurrentUser(e),await v.default.deleteAllDraftKeys()),de&&n("/order-form-25?edit=".concat(de)),le(null),se(null)},title:"Potvrzen\xed editace objedn\xe1vky",icon:c.zpE,variant:"warning",confirmText:"Ano, pokra\u010dovat",cancelText:"Ne, zru\u0161it",children:[(0,k.jsx)("p",{children:"Chyst\xe1te se editovat objedn\xe1vku z notifikace."}),(()=>{if(!ie)return null;try{const e=ie.formData||ie,n=e.ev_cislo||e.cislo_objednavky||e.predmet||"\u2605 KONCEPT \u2605",t=(0,x.V5)(ie);return(0,k.jsxs)("p",{style:{background:"#fef3c7",padding:"0.75rem",borderRadius:"6px",border:"1px solid #f59e0b",margin:"0.5rem 0"},children:[(0,k.jsx)("strong",{children:"Pozor:"})," M\xe1te rozepracovanou ",t?"novou objedn\xe1vku":"editaci objedn\xe1vky"," ",(0,k.jsx)("strong",{children:n}),". P\u0159epnut\xedm na jinou objedn\xe1vku p\u0159ijdete o neulo\u017een\xe9 zm\u011bny!"]})}catch(F){return null}})(),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"Varov\xe1n\xed:"})," T\xedmto budou zru\u0161eny v\u0161echny p\u0159\xedpadn\xe9 neulo\u017een\xe9 zm\u011bny v jin\xfdch objedn\xe1vk\xe1ch a m\u016f\u017ee doj\xedt ke ztr\xe1t\u011b dat."]}),(0,k.jsx)("p",{children:"Chcete pokra\u010dovat v editaci?"})]})]})},mn=vn}}]);
//# sourceMappingURL=3160.288f125a.chunk.js.map