{"version":3,"file":"static/js/4696.31b6b2c9.chunk.js","mappings":"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","sources":["pages/OrganizationHierarchy.js"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef, useContext } from 'react';\nimport styled from '@emotion/styled';\nimport ReactFlow, {\n  MiniMap,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  MarkerType,\n  Panel,\n  Handle,\n  Position,\n  useReactFlow,\n  getSmoothStepPath\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { CustomSelect } from '../components/CustomSelect';\nimport dagre from 'dagre';\nimport { graphlib } from 'dagre';\nimport { loadAuthData } from '../utils/authStorage';\nimport { ToastContext } from '../context/ToastContext';\nimport { \n  faSitemap, \n  faUsers, \n  faMapMarkerAlt, \n  faBell, \n  faKey,\n  faSearch,\n  faPlus,\n  faTimes,\n  faChevronDown,\n  faChevronRight,\n  faUserTie,\n  faUserShield,\n  faBuilding,\n  faEnvelope,\n  faSave,\n  faTrash,\n  faEdit,\n  faEye,\n  faEyeSlash,\n  faLayerGroup,\n  faInfoCircle,\n  faExpand\n} from '@fortawesome/free-solid-svg-icons';\n\n// API Configuration\nconst API_BASE_URL = (process.env.REACT_APP_API2_BASE_URL || '/api.eeo').replace(/\\/$/, '');\n\n// Potlait nekodnou ResizeObserver chybu (bn u ReactFlow)\nconst resizeObserverErr = window.console.error;\nwindow.console.error = (...args) => {\n  const errorMsg = typeof args[0] === 'string' ? args[0] : args[0]?.message || '';\n  if (errorMsg.includes('ResizeObserver loop completed') || \n      errorMsg.includes('ResizeObserver loop limit exceeded')) {\n    return; // Ignorovat tuto konkrtn chybu\n  }\n  resizeObserverErr(...args);\n};\n\n// Potlait ResizeObserver error i v error handleru\nwindow.addEventListener('error', (e) => {\n  if (e.message?.includes?.('ResizeObserver loop completed') ||\n      e.message?.includes?.('ResizeObserver loop limit exceeded') ||\n      e.message?.includes?.('undelivered notifications')) {\n    e.stopImmediatePropagation();\n    e.preventDefault();\n  }\n}, true);\n\n// Styled Components\nconst Container = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: #f5f7fa;\n  margin-top: -1em; /* Kompenzace padding-top z Layout Content */\n  user-select: none;\n  -webkit-user-select: none;\n`;\n\nconst Header = styled.div`\n  padding: 16px 24px;\n  background: white;\n  border-bottom: 1px solid #e0e6ed;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n  flex-shrink: 0;\n  user-select: none;\n`;\n\nconst Title = styled.h1`\n  color: #2c3e50;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 1.5rem;\n`;\n\nconst HeaderActions = styled.div`\n  display: flex;\n  gap: 12px;\n`;\n\nconst Button = styled.button`\n  padding: 8px 16px;\n  background: ${props => props.primary ? '#3b82f6' : 'white'};\n  color: ${props => props.primary ? '#fff' : '#2c3e50'};\n  border: 1px solid ${props => props.primary ? '#3b82f6' : '#e0e6ed'};\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n  transition: all 0.2s;\n  font-weight: 500;\n\n  &:hover {\n    background: ${props => props.primary ? '#2563eb' : '#f8fafc'};\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: fadeIn 0.2s ease-in-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  max-width: 500px;\n  width: 90%;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: slideUp 0.3s ease-out;\n\n  @keyframes slideUp {\n    from {\n      transform: translateY(20px);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n`;\n\nconst ModalHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  color: #dc2626;\n  font-size: 1.25rem;\n  font-weight: 700;\n`;\n\nconst ModalBody = styled.div`\n  color: #475569;\n  font-size: 1rem;\n  line-height: 1.6;\n  margin-bottom: 24px;\n`;\n\nconst ModalActions = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst ModalButton = styled.button`\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 0.95rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n\n  ${props => props.variant === 'danger' ? `\n    background: #dc2626;\n    color: white;\n    &:hover {\n      background: #b91c1c;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\n    }\n  ` : `\n    background: #f1f5f9;\n    color: #475569;\n    &:hover {\n      background: #e2e8f0;\n    }\n  `}\n`;\n\n\nconst MainContent = styled.div`\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n`;\n\nconst Sidebar = styled.div`\n  width: 400px;\n  background: white;\n  border-right: 1px solid #e0e6ed;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n  user-select: none;\n`;\n\nconst SidebarHeader = styled.div`\n  padding: 16px;\n  border-bottom: 1px solid #e0e6ed;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n`;\n\nconst SidebarTitle = styled.h3`\n  margin: 0;\n  color: white;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst SearchBox = styled.div`\n  padding: 12px 16px;\n  border-bottom: 1px solid #e0e6ed;\n  position: relative;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 8px 32px 8px 36px;\n  border: 1px solid #e0e6ed;\n  border-radius: 8px;\n  background: #f8fafc;\n  color: #2c3e50;\n  font-size: 0.9rem;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst SearchIcon = styled.div`\n  position: absolute;\n  left: 28px;\n  top: 22px;\n  color: #94a3b8;\n`;\n\nconst SearchClearButton = styled.button`\n  position: absolute;\n  right: 24px;\n  top: 20px;\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  border-radius: 4px;\n  transition: all 0.2s;\n  \n  &:hover {\n    background: #e2e8f0;\n    color: #475569;\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n`;\n\nconst SidebarContent = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n  padding-bottom: 190px; /* Prostor pro ob fixn tlatka (Pidat vybran + Resetovat plochu) */\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 3px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #94a3b8;\n  }\n`;\n\nconst CollapsibleSection = styled.div`\n  margin-bottom: 8px;\n`;\n\nconst SectionHeader = styled.div`\n  padding: 10px 12px;\n  background: ${props => props.expanded ? '#f1f5f9' : 'transparent'};\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #475569;\n  font-weight: 600;\n  font-size: 0.85rem;\n  transition: all 0.2s;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n\n  svg:first-of-type {\n    width: 12px;\n  }\n`;\n\nconst SectionContent = styled.div`\n  margin-top: 4px;\n  padding-left: 8px;\n  display: ${props => props.expanded ? 'block' : 'none'};\n`;\n\nconst UserItem = styled.div`\n  padding: 10px 12px;\n  margin-bottom: 6px;\n  background: ${props => props.isDragging ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'white'};\n  border: 2px solid ${props => props.isDragging ? '#667eea' : '#e0e6ed'};\n  border-radius: 8px;\n  cursor: grab;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  transition: all 0.2s;\n  color: ${props => props.isDragging ? '#fff' : '#2c3e50'};\n  box-shadow: ${props => props.isDragging ? '0 8px 24px rgba(102, 126, 234, 0.3)' : '0 1px 3px rgba(0,0,0,0.05)'};\n\n  &:hover {\n    border-color: #3b82f6;\n    transform: translateX(4px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);\n  }\n\n  &:active {\n    cursor: grabbing;\n  }\n`;\n\nconst UserAvatar = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 0.85rem;\n  flex-shrink: 0;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n`;\n\nconst UserInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst UserName = styled.div`\n  font-weight: 600;\n  font-size: 0.9rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 2px;\n`;\n\nconst UserMeta = styled.div`\n  font-size: 0.75rem;\n  color: #64748b;\n  display: flex;\n  gap: 6px;\n  align-items: center;\n`;\n\nconst LocationItem = styled(UserItem)`\n  cursor: ${props => props.isDragging ? 'grabbing' : 'grab'};\n  opacity: ${props => props.isDragging ? 0.8 : 1};\n  transform: ${props => props.isDragging ? 'rotate(2deg) scale(1.05)' : 'none'};\n  \n  &:hover {\n    transform: ${props => props.isDragging ? 'rotate(2deg) scale(1.05)' : 'translateX(4px)'};\n  }\n`;\n\nconst LocationIcon = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #92400e 0%, #78350f 100%);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  flex-shrink: 0;\n  box-shadow: 0 2px 8px rgba(146, 64, 14, 0.3);\n`;\n\nconst DepartmentIcon = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #059669 0%, #047857 100%);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  flex-shrink: 0;\n  box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);\n`;\n\nconst CanvasArea = styled.div`\n  flex: 1;\n  position: relative;\n  background: #f5f7fa;\n  user-select: none; /* Zakzat vbr textu v cel canvas oblasti */\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  /* Animace pro rkovanou ru */\n  @keyframes dashdraw {\n    to {\n      stroke-dashoffset: -10;\n    }\n  }\n  \n  /* Pointer kurzor pi hover nad nodem nebo edge */\n  .react-flow__node,\n  .react-flow__edge {\n    cursor: pointer !important;\n  }\n  \n  /* Crosshair pi SHIFT (selection mode) - NEJVY PRIORITA */\n  &.selection-mode .react-flow__pane,\n  &.selection-mode .react-flow__pane:hover,\n  &.selection-mode .react-flow__pane:active,\n  &.selection-mode .react-flow__pane:focus {\n    cursor: crosshair !important;\n  }\n  \n  /* Vchoz grab kurzor pro pan - JEN pokud NEN selection mode */\n  &:not(.selection-mode) .react-flow__pane {\n    cursor: grab !important;\n  }\n  \n  /* Grabbing kurzor pi aktivnm panovn - JEN pokud NEN selection mode */\n  &:not(.selection-mode) .react-flow__pane:active {\n    cursor: grabbing !important;\n  }\n  \n  /* Styl pro vbrov obdlnk (box-select) */\n  .react-flow__selection {\n    background: rgba(102, 126, 234, 0.08) !important;\n    border: 2px dashed #667eea !important;\n    border-radius: 8px !important;\n  }\n  \n  .react-flow__nodesselection {\n    background: transparent !important;\n    border: none !important;\n  }\n`;\n\nconst DetailPanel = styled.div`\n  width: 380px;\n  background: white;\n  border-left: 1px solid #e0e6ed;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-shadow: -2px 0 8px rgba(0,0,0,0.05);\n`;\n\nconst DetailHeader = styled.div`\n  padding: 16px;\n  border-bottom: 1px solid #e0e6ed;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n`;\n\nconst DetailHeaderTitle = styled.h3`\n  margin: 0;\n  color: white;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255,255,255,0.2);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(255,255,255,0.3);\n  }\n`;\n\nconst InfoButton = styled.button`\n  background: rgba(255,255,255,0.15);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  margin-left: auto;\n  margin-right: 8px;\n  font-size: 16px;\n\n  &:hover {\n    background: rgba(255,255,255,0.3);\n  }\n`;\n\nconst DetailContent = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 3px;\n  }\n  \n  /* Scrollbar pro email preview */\n  .email-preview-body {\n    &::-webkit-scrollbar {\n      width: 8px;\n    }\n    \n    &::-webkit-scrollbar-track {\n      background: #f1f5f9;\n      border-radius: 4px;\n    }\n    \n    &::-webkit-scrollbar-thumb {\n      background: #cbd5e1;\n      border-radius: 4px;\n      \n      &:hover {\n        background: #94a3b8;\n      }\n    }\n  }\n`;\n\nconst DetailSection = styled.div`\n  margin-bottom: 28px;\n`;\n\nconst DetailSectionTitle = styled.h4`\n  margin: 0 0 16px 0;\n  color: #475569;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 700;\n`;\n\nconst FormGroup = styled.div`\n  margin-bottom: 16px;\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: #475569;\n  font-size: 0.85rem;\n  font-weight: 600;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px 12px;\n  border: 1px solid #e0e6ed;\n  border-radius: 8px;\n  background: #f8fafc;\n  color: #2c3e50;\n  font-size: 0.9rem;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &:read-only {\n    background: #e2e8f0;\n    cursor: not-allowed;\n  }\n`;\n\nconst ProfileSelectWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n  background: white;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 2px;\n  transition: all 0.2s;\n  \n  &:focus-within {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n  \n  &:hover {\n    border-color: #d1d5db;\n  }\n`;\n\nconst ProfileSelect = styled.select`\n  flex: 1;\n  padding: 8px 12px;\n  border: none;\n  background: transparent;\n  color: #111827;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  outline: none;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");\n  background-position: right 8px center;\n  background-repeat: no-repeat;\n  background-size: 20px;\n  padding-right: 36px;\n  \n  option {\n    padding: 10px;\n    font-size: 0.875rem;\n  }\n`;\n\nconst ProfileSelectArrow = styled.div`\n  display: none;\n`;\n\nconst ProfileDeleteButton = styled.button`\n  padding: 4px 8px;\n  background: transparent;\n  border: 1px solid #e5e7eb;\n  color: ${props => props.disabled ? '#d1d5db' : '#6b7280'};\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n  border-radius: 6px;\n  min-width: 32px;\n  height: 32px;\n  \n  &:hover:not(:disabled) {\n    background: #f9fafb;\n    border-color: #d1d5db;\n  }\n  \n  &:active:not(:disabled) {\n    background: #f3f4f6;\n  }\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 8px 16px;\n  border: 1px solid #e0e6ed;\n  border-radius: 6px;\n  background: white;\n  color: #2c3e50;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  box-sizing: border-box;\n  height: 40px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst CheckboxGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nconst CheckboxLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: #2c3e50;\n  font-size: 0.9rem;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 6px;\n  transition: background 0.2s;\n\n  &:hover {\n    background: #f8fafc;\n  }\n\n  input[type=\"checkbox\"] {\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    accent-color: #667eea;\n  }\n`;\n\nconst TagList = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 8px;\n`;\n\nconst Tag = styled.div`\n  padding: 6px 12px;\n  background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);\n  color: #667eea;\n  border-radius: 6px;\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 500;\n  border: 1px solid #667eea30;\n\n  button {\n    background: none;\n    border: none;\n    color: inherit;\n    cursor: pointer;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    opacity: 0.6;\n    transition: opacity 0.2s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst Divider = styled.div`\n  height: 1px;\n  background: #e0e6ed;\n  margin: 20px 0;\n`;\n\nconst CombinationTable = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 12px;\n  font-size: 0.9rem;\n\n  th {\n    background: #f8f9fa;\n    padding: 8px;\n    text-align: left;\n    font-weight: 600;\n    color: #495057;\n    border-bottom: 2px solid #dee2e6;\n  }\n\n  td {\n    padding: 8px;\n    border-bottom: 1px solid #e9ecef;\n  }\n\n  tr:hover {\n    background: #f8f9fa;\n  }\n\n  button {\n    background: none;\n    border: none;\n    color: #dc3545;\n    cursor: pointer;\n    padding: 4px;\n    display: flex;\n    align-items: center;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n`;\n\nconst CombinationAddRow = styled.div`\n  display: flex;\n  gap: 8px;\n  align-items: flex-end;\n  margin-top: 12px;\n\n  > div {\n    flex: 1;\n  }\n\n  button {\n    padding: 8px 16px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-weight: 500;\n    transition: transform 0.2s, box-shadow 0.2s;\n    white-space: nowrap;\n\n    &:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n    }\n\n    &:active {\n      transform: translateY(0);\n    }\n  }\n`;\n\n// Custom Dialog Components\nconst DialogOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: fadeIn 0.2s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst DialogBox = styled.div`\n  background: white;\n  border-radius: 16px;\n  padding: 32px;\n  max-width: 500px;\n  width: 90%;\n  box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n  animation: slideUp 0.3s ease;\n\n  @keyframes slideUp {\n    from {\n      transform: translateY(20px);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n`;\n\nconst DialogIcon = styled.div`\n  font-size: 3rem;\n  text-align: center;\n  margin-bottom: 16px;\n`;\n\nconst DialogTitle = styled.h2`\n  margin: 0 0 12px 0;\n  color: #2c3e50;\n  font-size: 1.5rem;\n  text-align: center;\n`;\n\nconst DialogMessage = styled.div`\n  color: #64748b;\n  font-size: 0.95rem;\n  line-height: 1.6;\n  margin-bottom: 24px;\n  white-space: pre-line;\n`;\n\nconst DialogActions = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst DialogButton = styled.button`\n  padding: 10px 24px;\n  border-radius: 8px;\n  font-size: 0.95rem;\n  font-weight: 600;\n  cursor: pointer;\n  border: none;\n  transition: all 0.2s;\n  \n  ${props => props.primary ? `\n    background: #667eea;\n    color: white;\n    &:hover {\n      background: #5568d3;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n    }\n  ` : `\n    background: #e0e6ed;\n    color: #64748b;\n    &:hover {\n      background: #cbd5e1;\n    }\n  `}\n`;\n\nconst DialogStats = styled.div`\n  background: #f8fafc;\n  border: 1px solid #e0e6ed;\n  border-radius: 8px;\n  padding: 16px;\n  margin: 16px 0;\n  \n  div {\n    display: flex;\n    justify-content: space-between;\n    padding: 8px 0;\n    font-size: 0.9rem;\n    \n    &:not(:last-child) {\n      border-bottom: 1px solid #e0e6ed;\n    }\n    \n    strong {\n      color: #2c3e50;\n      font-weight: 600;\n    }\n    \n    span {\n      color: #667eea;\n      font-weight: 700;\n    }\n  }\n`;\n\nconst HelpModalContent = styled.div`\n  max-height: 80vh;\n  overflow-y: auto;\n  padding: 0 4px;\n`;\n\nconst HelpSection = styled.div`\n  margin-bottom: 24px;\n  \n  h3 {\n    color: #2c3e50;\n    font-size: 1.1rem;\n    margin: 0 0 12px 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  p {\n    color: #64748b;\n    font-size: 0.9rem;\n    line-height: 1.6;\n    margin: 0 0 8px 0;\n  }\n  \n  code {\n    background: #f1f5f9;\n    padding: 2px 6px;\n    border-radius: 4px;\n    font-family: 'Courier New', monospace;\n    font-size: 0.85rem;\n    color: #667eea;\n  }\n`;\n\nconst HelpExample = styled.div`\n  background: #f8fafc;\n  border-left: 3px solid #667eea;\n  padding: 12px;\n  border-radius: 4px;\n  margin: 8px 0;\n  font-size: 0.9rem;\n  \n  strong {\n    color: #2c3e50;\n    display: block;\n    margin-bottom: 4px;\n  }\n  \n  span {\n    color: #64748b;\n  }\n`;\n\n// Custom Node Component\nconst CustomNode = ({ data, selected }) => {\n  // Rozliit typ node (user, location, department, template, role, genericRecipient)\n  const isTemplate = data.type === 'template';\n  const isRole = data.type === 'role';\n  const isLocation = data.type === 'location';\n  const isDepartment = data.type === 'department';\n  const isUser = !isLocation && !isDepartment && !isTemplate && !isRole;\n  \n  // Pro template nodes - jen zelen vstupn bod\n  if (isTemplate) {\n    return (\n      <div style={{\n        padding: '12px 16px',\n        borderRadius: '8px',\n        background: selected \n          ? 'linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%)'\n          : 'white',\n        border: `3px solid ${selected ? '#f59e0b' : '#f59e0b'}`,\n        minWidth: '200px',\n        boxShadow: selected \n          ? '0 6px 16px rgba(245, 158, 11, 0.4)'\n          : '0 2px 8px rgba(245, 158, 11, 0.15)',\n        transition: 'all 0.2s',\n        position: 'relative',\n        transform: selected ? 'scale(1.05)' : 'scale(1)',\n      }}>\n        {/* Jen zelen source handle - ablona vysl notifikace */}\n        <Handle\n          type=\"source\"\n          position={Position.Right}\n          style={{\n            width: '16px',\n            height: '16px',\n            background: '#10b981',\n            border: '3px solid white',\n            boxShadow: '0 2px 8px rgba(16, 185, 129, 0.5)',\n            cursor: 'crosshair',\n            right: '-10px'\n          }}\n        />\n        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n          <div style={{\n            width: '40px',\n            height: '40px',\n            borderRadius: '50%',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '1.3rem',\n            boxShadow: '0 2px 8px rgba(102, 126, 234, 0.3)'\n          }}>\n            \n          </div>\n          <div style={{ flex: 1 }}>\n            <div style={{ \n              fontWeight: 700, \n              color: '#78350f',\n              fontSize: '0.85rem',\n              marginBottom: '2px'\n            }}>\n              {data.name}\n            </div>\n            <div style={{ \n              fontSize: '0.7rem', \n              color: '#92400e',\n              fontWeight: 500\n            }}>\n              {data.position}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Pro role nodes - fialov node s target handle\n  if (isRole) {\n    return (\n      <div style={{\n        padding: '12px 16px',\n        borderRadius: '8px',\n        background: selected \n          ? 'linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)'\n          : 'white',\n        border: `3px solid ${selected ? '#8b5cf6' : '#8b5cf6'}`,\n        minWidth: '200px',\n        boxShadow: selected \n          ? '0 6px 16px rgba(139, 92, 246, 0.4)'\n          : '0 2px 8px rgba(139, 92, 246, 0.15)',\n        transition: 'all 0.2s',\n        position: 'relative',\n        transform: selected ? 'scale(1.05)' : 'scale(1)',\n      }}>\n        {/* Source handle - role me vyslat notifikace/prva */}\n        <Handle\n          type=\"source\"\n          position={Position.Right}\n          style={{\n            width: '16px',\n            height: '16px',\n            background: '#10b981',\n            border: '3px solid white',\n            boxShadow: '0 2px 8px rgba(16, 185, 129, 0.5)',\n            cursor: 'crosshair',\n            right: '-10px'\n          }}\n        />\n        {/* Target handle - role pijm uivatele */}\n        <Handle\n          type=\"target\"\n          position={Position.Left}\n          style={{\n            width: '16px',\n            height: '16px',\n            background: '#ef4444',\n            border: '3px solid white',\n            boxShadow: '0 2px 8px rgba(239, 68, 68, 0.5)',\n            cursor: 'crosshair',\n            left: '-10px'\n          }}\n        />\n        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n          <div style={{\n            width: '40px',\n            height: '40px',\n            borderRadius: '50%',\n            background: 'linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '1.3rem',\n            boxShadow: '0 2px 8px rgba(139, 92, 246, 0.3)',\n            color: 'white'\n          }}>\n            \n          </div>\n          <div style={{ flex: 1 }}>\n            <div style={{ \n              fontWeight: 700, \n              color: '#6d28d9',\n              fontSize: '0.85rem',\n              marginBottom: '2px'\n            }}>\n              {data.name}\n            </div>\n            <div style={{ \n              fontSize: '0.7rem', \n              color: '#8b5cf6',\n              fontWeight: 500\n            }}>\n              {data.metadata?.userCount ? ` ${data.metadata.userCount} uivatel` : 'Role'}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Pro location/department nodes - zjednoduen vizualizace\n  if (isLocation || isDepartment) {\n    return (\n      <div style={{\n        padding: '12px 16px',\n        borderRadius: '8px',\n        background: selected \n          ? (isLocation ? 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)' : 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)')\n          : 'white',\n        border: `3px solid ${selected ? (isLocation ? '#92400e' : '#059669') : (isLocation ? '#92400e' : '#059669')}`,\n        minWidth: '160px',\n        boxShadow: selected \n          ? `0 6px 16px ${isLocation ? 'rgba(146, 64, 14, 0.4)' : 'rgba(5, 150, 105, 0.4)'}`\n          : `0 2px 8px ${isLocation ? 'rgba(146, 64, 14, 0.15)' : 'rgba(5, 150, 105, 0.15)'}`,\n        transition: 'all 0.2s',\n        position: 'relative',\n        transform: selected ? 'scale(1.05)' : 'scale(1)',\n        textAlign: 'center'\n      }}>\n        <Handle\n          type=\"target\"\n          position={Position.Top}\n          style={{\n            width: '14px',\n            height: '14px',\n            background: isLocation ? '#92400e' : '#059669',\n            border: '2px solid white',\n            boxShadow: `0 2px 6px ${isLocation ? 'rgba(146, 64, 14, 0.4)' : 'rgba(5, 150, 105, 0.4)'}`,\n            cursor: 'crosshair'\n          }}\n        />\n        <Handle\n          type=\"source\"\n          position={Position.Bottom}\n          style={{\n            width: '14px',\n            height: '14px',\n            background: isLocation ? '#92400e' : '#059669',\n            border: '2px solid white',\n            boxShadow: `0 2px 6px ${isLocation ? 'rgba(146, 64, 14, 0.4)' : 'rgba(5, 150, 105, 0.4)'}`,\n            cursor: 'crosshair'\n          }}\n        />\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px' }}>\n          <FontAwesomeIcon \n            icon={isLocation ? faMapMarkerAlt : faUserTie} \n            style={{ \n              color: isLocation ? '#92400e' : '#059669',\n              fontSize: '1.1rem'\n            }} \n          />\n          <div style={{ \n            fontWeight: 700, \n            color: '#2c3e50',\n            fontSize: '0.9rem'\n          }}>\n            {data.name}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  // User node - pvodn vizualizace\n  return (\n    <div style={{\n      padding: '14px',\n      borderRadius: '12px',\n      background: selected ? 'linear-gradient(135deg, #dbeafe 0%, #e0f2fe 100%)' : 'white',\n      border: `3px solid ${selected ? '#3b82f6' : '#3b82f6'}`,\n      minWidth: '220px',\n      boxShadow: selected \n        ? '0 8px 24px rgba(59, 130, 246, 0.5), 0 0 0 2px #93c5fd' \n        : '0 4px 12px rgba(59, 130, 246, 0.15)',\n      transition: 'all 0.2s',\n      position: 'relative',\n      transform: selected ? 'scale(1.02)' : 'scale(1)'\n    }}>\n      {/* Target handle - kam pijdou ipky (nahoe) */}\n      <Handle\n        type=\"target\"\n        position={Position.Top}\n        style={{\n          width: '16px',\n          height: '16px',\n          background: '#3b82f6',\n          border: '3px solid white',\n          boxShadow: '0 2px 8px rgba(59, 130, 246, 0.4)',\n          cursor: 'crosshair'\n        }}\n      />\n      \n      {/* Source handle - odkud thneme ipky (dole) */}\n      <Handle\n        type=\"source\"\n        position={Position.Bottom}\n        style={{\n          width: '16px',\n          height: '16px',\n          background: '#10b981',\n          border: '3px solid white',\n          boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n          cursor: 'crosshair'\n        }}\n      />\n\n      {/* Notification badges - prav horn roh */}\n      {data.notifications && (data.notifications.hasEmail || data.notifications.hasInApp) && (\n        <div style={{\n          position: 'absolute',\n          top: '8px',\n          right: '8px',\n          display: 'flex',\n          gap: '4px',\n          alignItems: 'center'\n        }}>\n          {data.notifications.hasEmail && (\n            <div style={{\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              borderRadius: '50%',\n              width: '24px',\n              height: '24px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              boxShadow: '0 2px 6px rgba(102, 126, 234, 0.4)',\n              cursor: 'help'\n            }} title=\"Email notifikace aktivn\">\n              <FontAwesomeIcon icon={faEnvelope} style={{ color: 'white', fontSize: '0.7rem' }} />\n            </div>\n          )}\n          {data.notifications.hasInApp && (\n            <div style={{\n              background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n              borderRadius: '50%',\n              width: '24px',\n              height: '24px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              boxShadow: '0 2px 6px rgba(245, 87, 108, 0.4)',\n              cursor: 'help'\n            }} title=\"In-app notifikace aktivn\">\n              <FontAwesomeIcon icon={faBell} style={{ color: 'white', fontSize: '0.7rem' }} />\n            </div>\n          )}\n        </div>\n      )}\n      \n      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '10px' }}>\n        <UserAvatar>{data.initials}</UserAvatar>\n        <div style={{ flex: 1 }}>\n          <div style={{ fontWeight: 700, color: '#2c3e50', fontSize: '0.95rem', marginBottom: '2px' }}>\n            {data.name}\n          </div>\n          <div style={{ fontSize: '0.8rem', color: '#64748b', fontWeight: 500 }}>\n            {data.position}\n          </div>\n        </div>\n      </div>\n      {data.metadata && (\n        <div style={{ \n          fontSize: '0.75rem', \n          color: '#64748b', \n          paddingTop: '10px', \n          borderTop: '1px solid #e0e6ed',\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '4px'\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n            <FontAwesomeIcon icon={faMapMarkerAlt} style={{ color: '#f5576c' }} />\n            {data.metadata.location}\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n            <FontAwesomeIcon icon={faUserTie} style={{ color: '#00f2fe' }} />\n            {data.metadata.department}\n          </div>\n          {data.notifications && data.notifications.types && data.notifications.types.length > 0 && (\n            <div style={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: '6px',\n              marginTop: '4px',\n              paddingTop: '6px',\n              borderTop: '1px dashed #e0e6ed'\n            }}>\n              <FontAwesomeIcon icon={faBell} style={{ color: '#667eea' }} />\n              <span style={{ fontSize: '0.7rem', color: '#667eea', fontWeight: 600 }}>\n                {data.notifications.types.length} typ{data.notifications.types.length > 1 ? 'y' : ''} notifikac\n              </span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Custom Edge Component with dashed animated smoothstep line (lomen pravohl ra)\nconst CustomEdge = ({ \n  id,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  style = {},\n  markerEnd,\n  data,\n  source\n}) => {\n  const { getNode } = useReactFlow();\n  \n  const [edgePath] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n  });\n  \n  // Zskej zdrojov node a jeho barvu\n  const sourceNode = getNode(source);\n  let strokeColor = '#94a3b8'; // Default ed\n  \n  if (sourceNode?.data?.type === 'template') {\n    strokeColor = '#f59e0b'; // Oranov pro ablony\n  } else if (sourceNode?.data?.type === 'location') {\n    strokeColor = '#92400e'; // Tmav hnd pro lokality\n  } else if (sourceNode?.data?.type === 'department') {\n    strokeColor = '#059669'; // Tmav zelen pro tvary\n  } else if (sourceNode?.type === 'custom') {\n    strokeColor = '#3b82f6'; // Modr pro uivatele\n  }\n  \n  return (\n    <>\n      {/* Neviditeln ir klikac plocha */}\n      <path\n        d={edgePath}\n        fill=\"none\"\n        stroke=\"transparent\"\n        strokeWidth={20}\n        className=\"react-flow__edge-interaction\"\n      />\n      {/* Viditeln ra */}\n      <path\n        id={id}\n        style={{\n          ...style,\n          stroke: strokeColor,\n          strokeWidth: 2.5,\n          strokeDasharray: '8, 4',\n          animation: 'dashdraw 0.5s linear infinite',\n        }}\n        className=\"react-flow__edge-path\"\n        d={edgePath}\n        markerEnd={markerEnd}\n      />\n    </>\n  );\n};\n\nconst nodeTypes = {\n  custom: CustomNode,\n};\n\nconst edgeTypes = {\n  custom: CustomEdge,\n};\n\n// Main Component with error boundary for hot-reload issues\nconst OrganizationHierarchy = () => {\n  const reactFlowWrapper = useRef(null);\n  const { showToast } = useContext(ToastContext);\n  const [hasError, setHasError] = useState(false);\n  \n  // Catch ReactFlow hot-reload errors\n  useEffect(() => {\n    const handleError = (event) => {\n      if (event.message?.includes('useNodesState') || event.message?.includes('useEdgesState')) {\n        console.warn('ReactFlow HMR error - refresh needed');\n        setHasError(true);\n      }\n    };\n    window.addEventListener('error', handleError);\n    return () => window.removeEventListener('error', handleError);\n  }, []);\n  \n  // Search terms pro kadou sekci (nast z LS)\n  const [searchUsers, setSearchUsers] = useState(() => localStorage.getItem('hierarchy_search_users') || '');\n  const [searchRoles, setSearchRoles] = useState(() => localStorage.getItem('hierarchy_search_roles') || '');\n  const [searchLocations, setSearchLocations] = useState(() => localStorage.getItem('hierarchy_search_locations') || '');\n  const [searchDepartments, setSearchDepartments] = useState(() => localStorage.getItem('hierarchy_search_departments') || '');\n  const [searchTemplates, setSearchTemplates] = useState(() => localStorage.getItem('hierarchy_search_templates') || '');\n  \n  const [expandedSections, setExpandedSections] = useState(() => {\n    const saved = localStorage.getItem('hierarchy_expanded_sections');\n    return saved ? JSON.parse(saved) : {\n      users: true,\n      roles: false,\n      locations: false,\n      departments: false,\n      genericRecipients: false,\n      notificationTemplates: false\n    };\n  });\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [selectedEdge, setSelectedEdge] = useState(null);\n  const [showDetailPanel, setShowDetailPanel] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // React Flow state\n  const [nodes, setNodes, onNodesChange] = useNodesState([]);\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n\n  // Data from API\n  const [allUsers, setAllUsers] = useState([]);\n  const [allRoles, setAllRoles] = useState([]);\n  const [allLocations, setAllLocations] = useState([]);\n  const [allDepartments, setAllDepartments] = useState([]);\n  const [notificationTypes, setNotificationTypes] = useState([]);\n  const [allNotificationTemplates, setAllNotificationTemplates] = useState([]);\n  const [notificationEventTypes, setNotificationEventTypes] = useState([]); // Event Types pro Notification Center\n  \n  // Detail panel data - rozsirene lokality a notifikace pro vybrany vztah\n  const [selectedExtendedLocations, setSelectedExtendedLocations] = useState([]);\n  const [selectedNotificationTypes, setSelectedNotificationTypes] = useState([]);\n  const [selectedNotificationEventTypes, setSelectedNotificationEventTypes] = useState([]); // Vybran event types pro edge\n\n  // Detail panel data - EDGE notifikace (stejn logika jako u NODE)\n  const [edgeScopeFilter, setEdgeScopeFilter] = useState('NONE');\n  const [edgeSendEmail, setEdgeSendEmail] = useState(false);\n  const [edgeSendInApp, setEdgeSendInApp] = useState(true);\n  const [edgeRecipientRole, setEdgeRecipientRole] = useState('APPROVAL');\n  \n  // Source INFO recipients configuration\n  const [sourceInfoEnabled, setSourceInfoEnabled] = useState(true);\n  const [sourceInfoFields, setSourceInfoFields] = useState(['uzivatel_id', 'garant_uzivatel_id', 'objednatel_id']);\n  \n  // Detail panel data - druh vztahu a scope\n  const [relationshipType, setRelationshipType] = useState('prime'); // prime, zastupovani, delegovani, rozsirene\n  const [relationshipScope, setRelationshipScope] = useState('OWN'); // OWN, TEAM, LOCATION, ALL\n  \n  // Detail panel data - template varianty\n  const [templateNormalVariant, setTemplateNormalVariant] = useState('');\n  const [templateUrgentVariant, setTemplateUrgentVariant] = useState('');\n  const [templateInfoVariant, setTemplateInfoVariant] = useState('');\n  const [templatePreviewVariant, setTemplatePreviewVariant] = useState('');\n  const [templateEventTypes, setTemplateEventTypes] = useState([]); // Event types pro template NODE\n  \n  // Detail panel data - rove prv pro nadzenho\n  const [permissionLevel, setPermissionLevel] = useState({\n    orders: 'READ_ONLY',       // READ_ONLY, READ_WRITE, READ_WRITE_DELETE, INHERIT\n    invoices: 'READ_ONLY',\n    contracts: 'READ_ONLY',\n    cashbook: 'READ_ONLY'\n  });\n  \n  // Detail panel data - viditelnost modulu\n  const [moduleVisibility, setModuleVisibility] = useState({\n    orders: true,\n    invoices: true,\n    contracts: false,\n    cashbook: true,\n    cashbookReadonly: true\n  });\n  \n  // Sledovn Shift klvesy pro zmnu kurzoru\n  const [isShiftPressed, setIsShiftPressed] = useState(false);\n  \n  // Helper funkce pro CustomSelect\n  const toggleSelect = useCallback((fieldName) => {\n    setSelectStates(prev => ({\n      ...prev,\n      [fieldName]: !prev[fieldName]\n    }));\n  }, []);\n  \n  const closeAllSelects = useCallback(() => {\n    setSelectStates({});\n  }, []);\n  \n  const filterOptions = useCallback((options, searchTerm, fieldName) => {\n    if (!searchTerm) return options;\n    const normalized = searchTerm.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n    return options.filter(option => {\n      const label = option.name || option.label || option.nazev || String(option);\n      const normalizedLabel = label.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n      return normalizedLabel.includes(normalized);\n    });\n  }, []);\n  \n  const getOptionLabel = useCallback((option, fieldName) => {\n    if (fieldName === 'extendedLocations' || fieldName === 'extendedDepartments') {\n      return option.name + (option.code ? ` (${option.code})` : '');\n    }\n    if (fieldName === 'notificationTypes') {\n      return option.name || option.label || String(option);\n    }\n    return option.name || option.label || option.nazev || String(option);\n  }, []);\n  \n  // Detail panel data - rozsirene useky\n  const [selectedExtendedDepartments, setSelectedExtendedDepartments] = useState([]);\n  \n  // Detail panel data - kombinace lokalita+utvar\n  const [selectedCombinations, setSelectedCombinations] = useState([]);\n  \n  // State management pro CustomSelect komponenty (multiselect)\n  const [selectStates, setSelectStates] = useState({});\n  const [searchStates, setSearchStates] = useState({});\n  const [touchedSelectFields, setTouchedSelectFields] = useState({});\n  \n  // Profily organizacnich radu\n  const [profiles, setProfiles] = useState([]);\n  const [currentProfile, setCurrentProfile] = useState(null);\n  const [showProfileDialog, setShowProfileDialog] = useState(false);\n  const [profileDialogMode, setProfileDialogMode] = useState('save'); // 'save' or 'saveAs'\n  \n  // Auto-save rozsirenych lokalit, useku, kombinaci, event types, typu vztahu, scope, modulu a permission level do edge\n  React.useEffect(() => {\n    if (selectedEdge) {\n      setEdges((eds) =>\n        eds.map((e) => {\n          if (e.id === selectedEdge.id) {\n            return {\n              ...e,\n              data: {\n                ...e.data,\n                // Druh vztahu a scope (pro DB)\n                relationshipType: relationshipType,\n                druh_vztahu: relationshipType, // alias pro DB\n                scope: relationshipScope,\n                // Viditelnost modulu (pro DB)\n                modules: moduleVisibility,\n                // rove prv pro kad modul (pro DB)\n                permissionLevel: permissionLevel,\n                // Rozsirene lokality/useky/kombinace\n                extended: {\n                  locations: selectedExtendedLocations,\n                  departments: selectedExtendedDepartments,\n                  combinations: selectedCombinations\n                },\n                // Notifikace - jen event types (email/inapp/recipientRole se ukldaj pmo v onChange)\n                notifications: {\n                  ...(e.data?.notifications || {}),\n                  types: selectedNotificationEventTypes\n                }\n              }\n            };\n          }\n          return e;\n        })\n      );\n    }\n  }, [\n    selectedExtendedLocations, \n    selectedExtendedDepartments, \n    selectedCombinations, \n    selectedNotificationEventTypes,\n    relationshipType,\n    relationshipScope,\n    moduleVisibility,\n    permissionLevel,\n    selectedEdge\n  ]);\n\n  // Auto-save EDGE notification settings (stejn logika jako u NODE template variant)\n  const prevSelectedEdgeId = React.useRef(null);\n  React.useEffect(() => {\n    if (selectedEdge) {\n      // Pokud se zmnil vybran edge, jen ulo jeho ID a NEUKLDEJ data\n      if (prevSelectedEdgeId.current !== selectedEdge.id) {\n        prevSelectedEdgeId.current = selectedEdge.id;\n        return;\n      }\n      \n      // Ulo data jen pokud editujeme STEJN edge\n      setEdges((eds) =>\n        eds.map((e) => {\n          if (e.id === selectedEdge.id) {\n            return {\n              ...e,\n              data: {\n                ...e.data,\n                scope_filter: edgeScopeFilter,\n                sendEmail: edgeSendEmail,\n                sendInApp: edgeSendInApp,\n                recipientRole: edgeRecipientRole,\n                source_info_recipients: {\n                  enabled: sourceInfoEnabled,\n                  fields: sourceInfoFields\n                }\n              }\n            };\n          }\n          return e;\n        })\n      );\n    } else {\n      prevSelectedEdgeId.current = null;\n    }\n  }, [edgeScopeFilter, edgeSendEmail, edgeSendInApp, edgeRecipientRole, sourceInfoEnabled, sourceInfoFields, selectedEdge]);\n  \n  // Auto-save template variant do node\n  React.useEffect(() => {\n    if (selectedNode && selectedNode.data?.type === 'template') {\n      setNodes((nds) =>\n        nds.map((n) => {\n          if (n.id === selectedNode.id) {\n            return {\n              ...n,\n              data: {\n                ...n.data,\n                normalVariant: templateNormalVariant,\n                urgentVariant: templateUrgentVariant,\n                infoVariant: templateInfoVariant,\n                previewVariant: templatePreviewVariant,\n                eventTypes: templateEventTypes // Uloit event types do node data\n              }\n            };\n          }\n          return n;\n        })\n      );\n    }\n  }, [templateNormalVariant, templateUrgentVariant, templateInfoVariant, templatePreviewVariant, templateEventTypes, selectedNode]);\n  \n  // Selection state pro levy panel (checkboxy)\n  const [selectedUsers, setSelectedUsers] = useState(new Set());\n  const [selectedRoles, setSelectedRoles] = useState(new Set());\n  const [selectedLocations, setSelectedLocations] = useState(new Set());\n  const [selectedDepartments, setSelectedDepartments] = useState(new Set());\n  const [selectedNotificationTemplates, setSelectedNotificationTemplates] = useState(new Set());\n  \n  // Confirm dialog state\n  const [confirmDialog, setConfirmDialog] = useState({\n    isOpen: false,\n    title: '',\n    message: '',\n    onConfirm: null\n  });\n  \n  // UI state\n  const [showHelp, setShowHelp] = useState(() => {\n    const saved = localStorage.getItem('hierarchy_help_collapsed');\n    return saved ? saved === 'false' : true; // Default: zobrazit\n  });\n  \n  const [showDetailHelpModal, setShowDetailHelpModal] = useState(false);\n  const [showFullscreenEmailModal, setShowFullscreenEmailModal] = useState(false);\n  const [fullscreenEmailData, setFullscreenEmailData] = useState(null);\n  \n  // Custom dialog state\n  const [dialog, setDialog] = useState({\n    show: false,\n    type: 'confirm', // 'confirm' | 'alert' | 'success'\n    icon: '',\n    title: '',\n    message: '',\n    onConfirm: null,\n    onCancel: null,\n    confirmText: 'Pokraovat',\n    cancelText: 'Zruit',\n    stats: null\n  });\n\n  // LocalStorage keys pro persistenci\n  const LS_NODES_KEY = 'hierarchy_draft_nodes';\n  const LS_EDGES_KEY = 'hierarchy_draft_edges';\n  const LS_TIMESTAMP_KEY = 'hierarchy_draft_timestamp';\n  const LS_PROFILE_KEY = 'hierarchy_selected_profile';\n  const LS_SEARCH_USERS = 'hierarchy_search_users';\n  const LS_SEARCH_LOCATIONS = 'hierarchy_search_locations';\n  const LS_SEARCH_DEPARTMENTS = 'hierarchy_search_departments';\n  const LS_SEARCH_TEMPLATES = 'hierarchy_search_templates';\n  const LS_EXPANDED_SECTIONS = 'hierarchy_expanded_sections';\n\n  // State pro sledovn, zda byl draft naten\n  const [hasDraft, setHasDraft] = useState(false);\n\n  // Auto-save search terms do localStorage\n  useEffect(() => {\n    localStorage.setItem('hierarchy_search_users', searchUsers);\n  }, [searchUsers]);\n  \n  useEffect(() => {\n    localStorage.setItem('hierarchy_search_locations', searchLocations);\n  }, [searchLocations]);\n  \n  useEffect(() => {\n    localStorage.setItem('hierarchy_search_departments', searchDepartments);\n  }, [searchDepartments]);\n  \n  useEffect(() => {\n    localStorage.setItem('hierarchy_search_templates', searchTemplates);\n  }, [searchTemplates]);\n  \n  // Auto-save expanded sections do localStorage\n  useEffect(() => {\n    localStorage.setItem('hierarchy_expanded_sections', JSON.stringify(expandedSections));\n  }, [expandedSections]);\n\n  // Auto-save do localStorage pi zmn nodes/edges\n  useEffect(() => {\n    if (nodes.length > 0 || edges.length > 0) {\n      try {\n        localStorage.setItem(LS_NODES_KEY, JSON.stringify(nodes));\n        localStorage.setItem(LS_EDGES_KEY, JSON.stringify(edges));\n        localStorage.setItem(LS_TIMESTAMP_KEY, new Date().toISOString());\n      } catch (err) {\n        console.warn('Failed to save draft:', err);\n      }\n    }\n  }, [nodes, edges]);\n\n  // Handler pro smazn vybranch nodes/edges pomoc DELETE klvesy\n  const handleDeleteSelected = useCallback(() => {\n    const selectedNodes = nodes.filter(n => n.selected);\n    const selectedEdges = edges.filter(e => e.selected);\n    \n    if (selectedNodes.length === 0 && selectedEdges.length === 0) {\n      return; // Nic nen vybrno\n    }\n\n    // Zobrazit custom confirm dialog\n    setDialog({\n      show: true,\n      type: 'confirm',\n      icon: '',\n      title: 'Smazat vybran prvky?',\n      message: `Opravdu chcete smazat ${selectedNodes.length} uzl a ${selectedEdges.length} vztah?`,\n      confirmText: 'Smazat',\n      cancelText: 'Zruit',\n      onConfirm: () => {\n        // Smazat vybran nodes\n        if (selectedNodes.length > 0) {\n          const nodeIdsToDelete = selectedNodes.map(n => n.id);\n          setNodes(nds => nds.filter(n => !nodeIdsToDelete.includes(n.id)));\n          // Smazat i edges spojen s tmito nodes\n          setEdges(eds => eds.filter(e => \n            !nodeIdsToDelete.includes(e.source) && \n            !nodeIdsToDelete.includes(e.target)\n          ));\n        }\n        \n        // Smazat vybran edges\n        if (selectedEdges.length > 0) {\n          const edgeIdsToDelete = selectedEdges.map(e => e.id);\n          setEdges(eds => eds.filter(e => !edgeIdsToDelete.includes(e.id)));\n        }\n        \n        setDialog({ ...dialog, show: false });\n        console.log(` Deleted ${selectedNodes.length} nodes and ${selectedEdges.length} edges`);\n      },\n      onCancel: () => {\n        setDialog({ ...dialog, show: false });\n      }\n    });\n  }, [nodes, edges, setNodes, setEdges, dialog]);\n\n  // Keyboard listener pro DELETE klvesu\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      // Delete nebo Backspace (na Macu)\n      if (event.key === 'Delete' || (event.key === 'Backspace' && event.metaKey)) {\n        event.preventDefault();\n        handleDeleteSelected();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handleDeleteSelected]);\n\n  // Shift key listener pro zmnu kurzoru na crosshair pi selection mode\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.key === 'Shift' && !isShiftPressed) {\n        setIsShiftPressed(true);\n      }\n    };\n\n    const handleKeyUp = (event) => {\n      if (event.key === 'Shift') {\n        setIsShiftPressed(false);\n      }\n    };\n\n    // Reset pi ztrt focusu (nap. ALT+TAB)\n    const handleBlur = () => {\n      setIsShiftPressed(false);\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    window.addEventListener('blur', handleBlur);\n    \n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      window.removeEventListener('blur', handleBlur);\n    };\n  }, [isShiftPressed]);\n\n  // Load data from API\n  useEffect(() => {\n    const loadHierarchyData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // 1. NEJDVE zkontrolovat localStorage draft\n        let draftLoaded = false;\n        try {\n          const savedNodes = localStorage.getItem(LS_NODES_KEY);\n          const savedEdges = localStorage.getItem(LS_EDGES_KEY);\n          const savedTimestamp = localStorage.getItem(LS_TIMESTAMP_KEY);\n          \n          if (savedNodes && savedEdges && savedTimestamp) {\n            const timestamp = new Date(savedTimestamp);\n            const hoursSince = (Date.now() - timestamp.getTime()) / (1000 * 60 * 60);\n            \n            // Nast pouze pokud je draft mlad ne 24 hodin\n            if (hoursSince < 24) {\n              const parsedNodes = JSON.parse(savedNodes);\n              const parsedEdges = JSON.parse(savedEdges);\n              \n              if (parsedNodes.length > 0 || parsedEdges.length > 0) {\n                draftLoaded = true;\n                setHasDraft(true);\n                setNodes(parsedNodes);\n                setEdges(parsedEdges);\n              }\n            } else {\n              localStorage.removeItem(LS_NODES_KEY);\n              localStorage.removeItem(LS_EDGES_KEY);\n              localStorage.removeItem(LS_TIMESTAMP_KEY);\n            }\n          }\n        } catch (err) {\n          console.warn('Failed to restore draft:', err);\n        }\n\n        // 2. Nast token a user data\n        const token = await loadAuthData.token();\n        const userData = await loadAuthData.user();\n        const username = userData?.username || localStorage.getItem('username');\n\n        const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n\n        // POST requesty pro PHP API\n        const fetchData = async (endpoint) => {\n          const response = await fetch(`${apiBase}/${endpoint}`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ token, username })\n          });\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${endpoint}`);\n          }\n          return response.json();\n        };\n\n        // 3. Paraleln naten dat (BEZ struktury - tu nateme a po zjitn profilu)\n        const [usersData, rolesData, locationsData, departmentsData, profilesData, notifTypesData, templatesData, eventTypesData] = await Promise.all([\n          fetchData('hierarchy/users'),\n          fetchData('ciselniky/role/list'),\n          fetchData('hierarchy/locations'),\n          fetchData('hierarchy/departments'),\n          fetchData('hierarchy/profiles/list'),\n          fetchData('hierarchy/notification-types'),\n          fetchData('notifications/templates/list'),\n          fetchData('notifications/event-types/list')\n        ]);\n\n        const users = usersData.data || [];\n        const roles = rolesData.data || [];\n        \n        // Spotat poet uivatel pro kadou roli (z pole user.roles)\n        const rolesWithUserCount = roles.map(role => {\n          const userCount = users.filter(user => {\n            // Kontrola, jestli uivatel m tuto roli piazenou (user.roles je pole ID)\n            return user.roles && Array.isArray(user.roles) && user.roles.includes(role.id);\n          }).length;\n          \n          return {\n            ...role,\n            userCount: userCount\n          };\n        });\n        \n        setAllUsers(users);\n        setAllRoles(rolesWithUserCount);\n        setAllLocations(locationsData.data || []);\n        setAllDepartments(departmentsData.data || []);\n        setNotificationTypes(notifTypesData.data || []);\n        setAllNotificationTemplates(templatesData.data || []);\n        setNotificationEventTypes(eventTypesData.data || []);\n        \n        // Nastavit profily a najt aktivn\n        const profilesList = profilesData.data || [];\n        setProfiles(profilesList);\n        \n        //  PRIORITA natn profilu:\n        // 1. localStorage (posledn vybran uivatelem)\n        // 2. Global Settings (DB default)\n        // 3. Fallback: aktivn profil nebo prvn\n        let selectedProfile = null;\n        \n        // 1. Zkusit nast z localStorage (posledn volba uivatele)\n        const savedProfileId = localStorage.getItem(LS_PROFILE_KEY);\n        if (savedProfileId) {\n          selectedProfile = profilesList.find(p => p.id === parseInt(savedProfileId));\n          if (selectedProfile) {\n            console.log(' Loaded profile from localStorage:', selectedProfile.name);\n          }\n        }\n        \n        // 2. Pokud nen v localStorage, zkus Global Settings API\n        if (!selectedProfile) {\n          try {\n            const { getGlobalSettings } = await import('../services/globalSettingsApi');\n            const globalSettings = await getGlobalSettings(token, username);\n            \n            if (globalSettings.hierarchy_profile_id) {\n              selectedProfile = profilesList.find(p => p.id === parseInt(globalSettings.hierarchy_profile_id));\n              if (selectedProfile) {\n                console.log(' Loaded profile from Global Settings:', selectedProfile.name);\n              }\n            }\n          } catch (err) {\n            console.warn(' Failed to load profile from Global Settings:', err);\n          }\n        }\n        \n        // 3. Fallback: Pout aktivn profil\n        if (!selectedProfile) {\n          selectedProfile = profilesList.find(p => p.isActive) || profilesList[0];\n          console.log(' Using fallback profile (active or first):', selectedProfile?.name);\n        }\n        \n        setCurrentProfile(selectedProfile || null);\n        \n        \n        //  TE nast strukturu z structure_json (nov API)\n        let structureData = { success: true, data: { nodes: [], edges: [] } };\n        if (selectedProfile) {\n          structureData = await fetch(`${API_BASE_URL}/hierarchy/profiles/load-structure`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ token, username, profile_id: selectedProfile.id })\n          }).then(r => r.json());\n        }\n        \n        console.log(' Loaded structure from DB:', structureData);\n        \n        // Preferovat API data ped draftem z localStorage\n        const shouldLoadFromApi = structureData.success && structureData.data && (\n          (structureData.data.nodes && structureData.data.nodes.length > 0) ||\n          (structureData.data.edges && structureData.data.edges.length > 0)\n        );\n        \n        console.log(' Should load from API?', shouldLoadFromApi, {\n          nodes: structureData.data?.nodes?.length || 0,\n          edges: structureData.data?.edges?.length || 0\n        });\n\n        // 4. Nastavit hierarchickou strukturu z API (preferovat API ped draftem)\n        if (shouldLoadFromApi) {\n          console.log(' Loading structure from API...');\n          console.log(' Structure data.data.nodes:', structureData?.data?.nodes);\n          console.log(' Structure data.data.edges:', structureData?.data?.edges);\n          \n          // Nov API vrac { nodes, edges } pmo ze structure_json\n          const apiNodes = Array.isArray(structureData?.data?.nodes) ? structureData.data.nodes : [];\n          const apiEdges = Array.isArray(structureData?.data?.edges) ? structureData.data.edges : [];\n          \n          \n          if (apiNodes.length === 0 && apiEdges.length === 0) {\n            console.warn(' Empty structure data from API - will load empty canvas');\n            setNodes([]);\n            setEdges([]);\n            setLoading(false);\n            return;\n          }\n\n          console.log(` Converting ${apiNodes.length} nodes and ${apiEdges.length} edges from API`);\n          \n          // API nodes jsou u ve sprvnm formtu (id, typ, pozice, data)\n          const flowNodes = apiNodes.map(node => ({\n            id: node.id,\n            type: 'custom',\n            position: node.pozice || { x: 100, y: 100 },\n            data: node.data || {}\n          }));\n          \n          // API edges jsou u ve sprvnm formtu (id, source, target, typ, data)\n          const flowEdges = apiEdges.map(edge => ({\n            id: edge.id,\n            source: edge.source,\n            target: edge.target,\n            type: 'custom',\n            animated: false,\n            data: edge.data || {}\n          }));\n          \n          console.log(' Loaded from API:', {\n            nodes: flowNodes.length,\n            edges: flowEdges.length\n          });\n          \n          setNodes(flowNodes);\n          setEdges(flowEdges);\n          setHasDraft(false);\n          \n          // Smazat localStorage draft\n          localStorage.removeItem(LS_NODES_KEY);\n          localStorage.removeItem(LS_EDGES_KEY);\n          localStorage.removeItem(LS_TIMESTAMP_KEY);\n          \n        } else {\n          // Fallback: Nast draft z localStorage\n          console.log(' No API data, checking localStorage draft...');\n          \n          const savedNodes = localStorage.getItem(LS_NODES_KEY);\n          const savedEdges = localStorage.getItem(LS_EDGES_KEY);\n          \n          if (savedNodes && savedEdges) {\n            console.log(' Loading draft from localStorage');\n            setNodes(JSON.parse(savedNodes));\n            setEdges(JSON.parse(savedEdges));\n            setHasDraft(true);\n          } else {\n            console.log(' No draft found - empty canvas');\n            setNodes([]);\n            setEdges([]);\n            setHasDraft(false);\n          }\n        }\n        \n        setLoading(false);\n        \n      } catch (error) {\n        console.error(' Error loading initial data:', error);\n        setLoading(false);\n      }\n    };\n\n    loadHierarchyData();\n  }, []); // Empty deps - run once on mount\n\n  // Effect: Auto-save nodes/edges to localStorage (draft system)\n  useEffect(() => {\n    if (nodes.length > 0 || edges.length > 0) {\n      localStorage.setItem(LS_NODES_KEY, JSON.stringify(nodes));\n      localStorage.setItem(LS_EDGES_KEY, JSON.stringify(edges));\n      localStorage.setItem(LS_TIMESTAMP_KEY, Date.now().toString());\n    }\n  }, [nodes, edges]);\n\n  // Effect: Profile change handler\n  useEffect(() => {\n    if (currentProfile && currentProfile.id) {\n      // Reload by triggering the main load - just clear nodes/edges\n      // Main useEffect will reload on mount\n      setNodes([]);\n      setEdges([]);\n      setLoading(true);\n      \n      // Note: Actual reload happens in main useEffect on []\n      // This just signals UI that we're loading\n      setTimeout(() => setLoading(false), 500);\n    }\n  }, [currentProfile?.id]);\n\n  // Auto-fit graf po naten nodes\n  useEffect(() => {\n    if (nodes.length > 0 && reactFlowInstance) {\n      // Pokat na render a pak fitView\n      setTimeout(() => {\n        reactFlowInstance.fitView({ padding: 0.2, duration: 400 });\n      }, 100);\n    }\n  }, [nodes.length, reactFlowInstance]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // TODO: Keyboard shortcuts implementation\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const onConnect = useCallback((params) => {\n    // Urit typ vztahu a barvu podle source a target nodes\n    const sourceNode = nodes.find(n => n.id === params.source);\n    const targetNode = nodes.find(n => n.id === params.target);\n    \n    let relationType = 'user-user';\n    if (sourceNode && targetNode) {\n      const sourceType = sourceNode.data?.type || 'user';\n      const targetType = targetNode.data?.type || 'user';\n      relationType = `${sourceType}-${targetType}`;\n    }\n    \n    // Urit barvu podle typu (podle legendy)\n    let edgeColor = '#3b82f6'; // vchoz modr\n    if (relationType.includes('template')) {\n      edgeColor = '#f59e0b'; // Oranov pro notifikace (podle legendy)\n    } else if (relationType.includes('role')) {\n      edgeColor = '#8b5cf6'; // Fialov pro role (podle legendy)\n    } else if (relationType.includes('location')) {\n      edgeColor = '#92400e'; // Tmav hnd pro lokality (podle legendy)\n    } else if (relationType.includes('department')) {\n      edgeColor = '#059669'; // Tmav zelen pro seky (podle legendy)\n    } else if (relationType === 'user-user') {\n      edgeColor = '#3b82f6'; // Modr pro uivatel-uivatel (podle legendy)\n    }\n    \n    setEdges((eds) => addEdge({\n      ...params,\n      type: 'smoothstep',\n      animated: true,\n      markerEnd: { \n        type: MarkerType.ArrowClosed,\n        color: edgeColor \n      },\n      style: { \n        stroke: edgeColor, \n        strokeWidth: 3 \n      },\n      data: {\n        type: relationType\n      }\n    }, eds));\n  }, [nodes]);\n\n  // Aktualizovat poty uivatel u rol, lokalit a sek po zmn edges\n  useEffect(() => {\n    setNodes((nds) =>\n      nds.map((node) => {\n        const nodeType = node.data?.type;\n        \n        // Potat pouze pro role, lokality a seky\n        if (nodeType === 'role' || nodeType === 'location' || nodeType === 'department') {\n          // Najt vechny edges smujc k tomuto nodu (target)\n          const connectedEdges = edges.filter(e => e.target === node.id);\n          \n          // Spotat uniktn uivatele pipojen k tomuto nodu\n          const connectedUserNodes = connectedEdges\n            .map(e => nodes.find(n => n.id === e.source))\n            .filter(n => n?.data?.type === 'user');\n          \n          const userCount = connectedUserNodes.length;\n          \n          // Aktualizovat metadata s potem\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              metadata: {\n                ...node.data.metadata,\n                userCount: userCount\n              }\n            }\n          };\n        }\n        \n        return node;\n      }));\n  }, [edges, nodes.length]); // Zvislost na edges a potu nodes (ne na nodes samotnch, aby se zabrnilo nekonen smyce)\n\n  const onNodeClick = useCallback((event, node) => {\n    // Pokud nen CTRL/CMD, zobrazit detail panel (single selection)\n    if (!event.ctrlKey && !event.metaKey) {\n      setSelectedNode(node);\n      setSelectedEdge(null);\n      setShowDetailPanel(true);\n      \n      // Nast template varianty pokud je to template node\n      if (node.data?.type === 'template') {\n        setTemplateNormalVariant(node.data.normalVariant || '');\n        setTemplateUrgentVariant(node.data.urgentVariant || '');\n        setTemplateInfoVariant(node.data.infoVariant || '');\n        setTemplatePreviewVariant(node.data.previewVariant || node.data.normalVariant || '');\n        setTemplateEventTypes(node.data.eventTypes || []); // Nast event types\n      }\n    } else {\n      // Multi-select - skrt detail panel\n      setShowDetailPanel(false);\n      setSelectedNode(null);\n      setSelectedEdge(null);\n    }\n  }, []);\n\n  const onEdgeClick = useCallback((event, edge) => {\n    setSelectedEdge(edge);\n    setSelectedNode(null);\n    setShowDetailPanel(true);\n    \n    // Najit source a target nodes pro zobrazeni jmen\n    const sourceNode = nodes.find(n => n.id === edge.source);\n    const targetNode = nodes.find(n => n.id === edge.target);\n    \n    // Nacist rozsirene lokality z edge data\n    const extendedLocs = edge.data?.extended?.locations || edge.data?.permissions?.extended?.locations || [];\n    setSelectedExtendedLocations(extendedLocs);\n    \n    // Nacist rozsirene useky z edge data\n    const extendedDepts = edge.data?.extended?.departments || edge.data?.permissions?.extended?.departments || [];\n    setSelectedExtendedDepartments(extendedDepts);\n    \n    // Nacist notifikacni nastaveni z edge data (STEJN LOGIKA JAKO U NODE)\n    setEdgeScopeFilter(edge.data?.scope_filter || 'NONE');\n    setEdgeSendEmail(edge.data?.sendEmail || false);\n    setEdgeSendInApp(edge.data?.sendInApp !== false);\n    setEdgeRecipientRole(edge.data?.recipientRole || 'APPROVAL');\n    setSelectedNotificationEventTypes(edge.data?.notifications?.types || []); // Nast vybran event types\n    setRelationshipType(edge.data?.relationshipType || edge.data?.druh_vztahu || 'prime');\n    setRelationshipScope(edge.data?.scope || 'OWN');\n    \n    // Nast source INFO recipients konfiguraci\n    setSourceInfoEnabled(edge.data?.source_info_recipients?.enabled !== false); // Default true\n    setSourceInfoFields(edge.data?.source_info_recipients?.fields || ['uzivatel_id', 'garant_uzivatel_id', 'objednatel_id']);\n    \n    // Nacist viditelnost modulu z edge data (zkontrolovat modules i visibility)\n    setModuleVisibility({\n      orders: edge.data?.modules?.orders ?? edge.data?.visibility?.objednavky ?? false,\n      invoices: edge.data?.modules?.invoices ?? edge.data?.visibility?.faktury ?? false,\n      contracts: edge.data?.modules?.contracts ?? edge.data?.visibility?.smlouvy ?? false,\n      cashbook: edge.data?.modules?.cashbook ?? edge.data?.visibility?.pokladna ?? false,\n      cashbookReadonly: edge.data?.modules?.cashbookReadonly ?? false,\n      users: edge.data?.modules?.users ?? edge.data?.visibility?.uzivatele ?? false,\n      lp: edge.data?.modules?.lp ?? edge.data?.visibility?.lp ?? false\n    });\n    \n    // Nacist uroven prav z edge data\n    setPermissionLevel({\n      orders: edge.data?.permissionLevel?.orders || 'READ_ONLY',\n      invoices: edge.data?.permissionLevel?.invoices || 'READ_ONLY',\n      contracts: edge.data?.permissionLevel?.contracts || 'READ_ONLY',\n      cashbook: edge.data?.permissionLevel?.cashbook || 'READ_ONLY'\n    });\n    \n    // Nacist kombinace lokalita+utvar z edge data\n    const combos = edge.data?.extended?.combinations || edge.data?.permissions?.extended?.combinations || [];\n    setSelectedCombinations(combos);\n    \n    // Nacist typy notifikaci z edge data\n    const notifTypes = edge.data?.notifications?.types || edge.data?.permissions?.notifications?.types || [];\n    setSelectedNotificationTypes(notifTypes);\n    \n    // Pridat metadata k edge pro zobrazeni\n    setSelectedEdge({\n      ...edge,\n      metadata: {\n        sourceName: sourceNode?.data?.name || 'Neznamy',\n        targetName: targetNode?.data?.name || 'Neznamy',\n        sourceType: sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user',\n        targetType: targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user'\n      }\n    });\n  }, [nodes]);\n  \n  // Helper funkce pro uren typu vztahu\n  const getRelationshipTypeInfo = useCallback((sourceType, targetType) => {\n    const types = {\n      'user-user': {\n        label: 'Uivatel  Uivatel',\n        icon: '',\n        description: 'Klasick nadzen-podzen vztah',\n        sourceLabel: 'Nadzen (zskv prva)',\n        targetLabel: 'Podzen (sdl data)',\n        showScope: true,\n        showExtended: true,\n        showModules: true,\n        explanation: (source, target) => `${source} zsk prva vidt data od ${target} podle nastaven rozsahu a modul.`\n      },\n      'location-user': {\n        label: 'Lokalita  Uivatel',\n        icon: '',\n        description: 'Vichni uivatel z lokality sdl data nadzenmu',\n        sourceLabel: 'Lokalita (zdroj dat)',\n        targetLabel: 'Nadzen uivatel (zskv data)',\n        showScope: false, // Scope je implicitn LOCATION\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `${target} zsk prva vidt data od VECH uivatel v lokalit ${source}.`\n      },\n      'user-location': {\n        label: 'Uivatel  Lokalita',\n        icon: '',\n        description: 'Nadzen vid vechny uivatele v lokalit',\n        sourceLabel: 'Nadzen uivatel (zskv prva)',\n        targetLabel: 'Lokalita (zdroj dat)',\n        showScope: false, // Scope je implicitn LOCATION\n        showExtended: true,\n        showModules: true,\n        explanation: (source, target) => `${source} zsk prva vidt data od VECH uivatel v lokalit ${target}.`\n      },\n      'department-user': {\n        label: 'sek  Uivatel',\n        icon: '',\n        description: 'Vichni uivatel z seku sdl data nadzenmu',\n        sourceLabel: 'sek (zdroj dat)',\n        targetLabel: 'Nadzen uivatel (zskv data)',\n        showScope: false, // Scope je implicitn TEAM\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `${target} zsk prva vidt data od VECH uivatel v seku ${source}.`\n      },\n      'user-department': {\n        label: 'Uivatel  sek',\n        icon: '',\n        description: 'Nadzen vid vechny uivatele v seku',\n        sourceLabel: 'Nadzen uivatel (zskv prva)',\n        targetLabel: 'sek (zdroj dat)',\n        showScope: false, // Scope je implicitn TEAM\n        showExtended: true,\n        showModules: true,\n        explanation: (source, target) => `${source} zsk prva vidt data od VECH uivatel v seku ${target}.`\n      },\n      'template-user': {\n        label: 'Notifikan ablona  Uivatel',\n        icon: '',\n        description: 'Uivatel bude dostvat notifikace z tto ablony',\n        sourceLabel: 'Notifikan ablona',\n        targetLabel: 'Pjemce (uivatel)',\n        showScope: false,\n        showExtended: false,\n        showModules: false,\n        explanation: (source, target) => `${target} bude dostvat notifikace typu \"${source}\".`\n      },\n      'template-location': {\n        label: 'Notifikan ablona  Lokalita',\n        icon: '',\n        description: 'Vichni uivatel v lokalit budou dostvat notifikace',\n        sourceLabel: 'Notifikan ablona',\n        targetLabel: 'Pjemci (lokalita)',\n        showScope: false,\n        showExtended: false,\n        showModules: false,\n        explanation: (source, target) => `VICHNI uivatel v lokalit ${target} budou dostvat notifikace typu \"${source}\".`\n      },\n      'template-department': {\n        label: 'Notifikan ablona  sek',\n        icon: '',\n        description: 'Vichni uivatel v seku budou dostvat notifikace',\n        sourceLabel: 'Notifikan ablona',\n        targetLabel: 'Pjemci (sek)',\n        showScope: false,\n        showExtended: false,\n        showModules: false,\n        explanation: (source, target) => `VICHNI uivatel v seku ${target} budou dostvat notifikace typu \"${source}\".`\n      },\n      'user-role': {\n        label: 'Uivatel  Role',\n        icon: '',\n        description: 'Uivatel zskv oprvnn z role',\n        sourceLabel: 'Uivatel (pjemce prv)',\n        targetLabel: 'Role (zdroj oprvnn)',\n        showScope: false,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `${source} m piazenou roli ${target} a zskv z n oprvnn pro moduly.`\n      },\n      'role-user': {\n        label: 'Role  Uivatel',\n        icon: '',\n        description: 'Role piazuje oprvnn uivateli',\n        sourceLabel: 'Role (zdroj oprvnn)',\n        targetLabel: 'Uivatel (pjemce prv)',\n        showScope: false,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `Role ${source} piazuje oprvnn uivateli ${target}.`\n      },\n      'template-role': {\n        label: 'Notifikan ablona  Role',\n        icon: '',\n        description: 'Vichni uivatel s rol budou dostvat notifikace',\n        sourceLabel: 'Notifikan ablona',\n        targetLabel: 'Pjemci (role)',\n        showScope: false,\n        showExtended: false,\n        showModules: false,\n        explanation: (source, target) => `VICHNI uivatel s rol ${target} budou dostvat notifikace typu \"${source}\".`\n      },\n      'department-role': {\n        label: 'sek  Role',\n        icon: '',\n        description: 'Uivatel s danou rol v seku zskvaj viditelnost dat',\n        sourceLabel: 'sek (zdroj dat)',\n        targetLabel: 'Role (zskv prva)',\n        showScope: true,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `Vichni uivatel s rol ${target} zskaj prva vidt data z seku ${source}.`\n      },\n      'role-department': {\n        label: 'Role  sek',\n        icon: '',\n        description: 'Role zskv viditelnost dat z seku',\n        sourceLabel: 'Role (zskv prva)',\n        targetLabel: 'sek (zdroj dat)',\n        showScope: true,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `Uivatel s rol ${source} zskaj prva vidt data z seku ${target}.`\n      },\n      'location-role': {\n        label: 'Lokalita  Role',\n        icon: '',\n        description: 'Uivatel s danou rol v lokalit zskvaj viditelnost dat',\n        sourceLabel: 'Lokalita (zdroj dat)',\n        targetLabel: 'Role (zskv prva)',\n        showScope: true,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `Vichni uivatel s rol ${target} zskaj prva vidt data z lokality ${source}.`\n      },\n      'role-location': {\n        label: 'Role  Lokalita',\n        icon: '',\n        description: 'Role zskv viditelnost dat z lokality',\n        sourceLabel: 'Role (zskv prva)',\n        targetLabel: 'Lokalita (zdroj dat)',\n        showScope: true,\n        showExtended: false,\n        showModules: true,\n        explanation: (source, target) => `Uivatel s rol ${source} zskaj prva vidt data z lokality ${target}.`\n      },\n      'role-role': {\n        label: 'Role  Role',\n        icon: '',\n        description: 'Hierarchick vztah mezi rolemi (nadzen  podzen)',\n        sourceLabel: 'Nadzen role (zskv prva)',\n        targetLabel: 'Podzen role (sdl data)',\n        showScope: true,\n        showExtended: true,\n        showModules: true,\n        explanation: (source, target) => `${source} zsk prva vidt data od uivatel s rol ${target}. Rozsah a Moduly uruj, co pesn uvid (objednvky/faktury/pokladnu).`\n      }\n    };\n    \n    const key = `${sourceType}-${targetType}`;\n    return types[key] || types['user-user']; // Fallback na user-user\n  }, []);\n\n  // Handler pro automatick uloen layout pozic po petaen uzlu\n  const onNodeDragStop = useCallback(async (event, node) => {\n    console.log(' Node drag stopped:', node.id, 'Position:', node.position);\n    \n    // Aktualizovat pozici uzlu v state (u je hotovo pes onNodesChange)\n    // Nyn jen zalogovat pro debug\n    const updatedNode = nodes.find(n => n.id === node.id);\n    if (updatedNode) {\n      console.log(' Updated node position saved to local state:', {\n        id: updatedNode.id,\n        userId: updatedNode.data?.userId,\n        position: updatedNode.position\n      });\n    }\n  }, [nodes]);\n\n  const toggleSection = (section) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [section]: !prev[section]\n    }));\n  };\n\n  // === SELECTION HANDLERS PRO LEV PANEL ===\n  \n  const toggleUserSelection = (userId) => {\n    setSelectedUsers(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(userId)) {\n        newSet.delete(userId);\n      } else {\n        newSet.add(userId);\n      }\n      return newSet;\n    });\n  };\n\n  const toggleLocationSelection = (locationId) => {\n    setSelectedLocations(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(locationId)) {\n        newSet.delete(locationId);\n      } else {\n        newSet.add(locationId);\n      }\n      return newSet;\n    });\n  };\n\n  const toggleDepartmentSelection = (deptId) => {\n    setSelectedDepartments(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(deptId)) {\n        newSet.delete(deptId);\n      } else {\n        newSet.add(deptId);\n      }\n      return newSet;\n    });\n  };\n\n  const toggleRoleSelection = (roleId) => {\n    setSelectedRoles(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(roleId)) {\n        newSet.delete(roleId);\n      } else {\n        newSet.add(roleId);\n      }\n      return newSet;\n    });\n  };\n\n  const selectAllUsers = () => {\n    setSelectedUsers(new Set(filteredUsers.map(u => u.id)));\n  };\n\n  const deselectAllUsers = () => {\n    setSelectedUsers(new Set());\n  };\n\n  const selectAllLocations = () => {\n    setSelectedLocations(new Set(filteredLocations.map(l => l.id)));\n  };\n\n  const deselectAllLocations = () => {\n    setSelectedLocations(new Set());\n  };\n\n  const selectAllDepartments = () => {\n    setSelectedDepartments(new Set(filteredDepartments.map(d => d.id)));\n  };\n\n  const deselectAllDepartments = () => {\n    setSelectedDepartments(new Set());\n  };\n\n  const toggleNotificationTemplateSelection = (templateId) => {\n    setSelectedNotificationTemplates(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(templateId)) {\n        newSet.delete(templateId);\n      } else {\n        newSet.add(templateId);\n      }\n      return newSet;\n    });\n  };\n\n  const selectAllNotificationTemplates = () => {\n    setSelectedNotificationTemplates(new Set(filteredNotificationTemplates.map(t => t.id)));\n  };\n\n  const deselectAllNotificationTemplates = () => {\n    setSelectedNotificationTemplates(new Set());\n  };\n\n  // Pidat vybran poloky na plochu\n  const addSelectedToCanvas = () => {\n    const newNodes = [];\n    let index = nodes.length;\n    const timestamp = Date.now();\n\n    // Pidat vybran uivatele (povolujeme duplicity)\n    selectedUsers.forEach((userId, userIndex) => {\n      const user = allUsers.find(u => u.id === userId);\n      if (user) {\n        newNodes.push({\n          id: `user-${userId}-${timestamp}-${userIndex}`,\n          type: 'custom',\n          position: {\n            x: 100 + (index % 5) * 250,\n            y: 100 + Math.floor(index / 5) * 180\n          },\n          data: {\n            userId: userId, // Pvodn user ID\n            name: user.name,\n            position: user.position,\n            initials: user.initials,\n            metadata: {\n              location: user.location,\n              department: user.department\n            }\n          }\n        });\n        index++;\n      }\n    });\n\n    // Pidat vybran lokality jako samostatn nodes\n    selectedLocations.forEach((locationId, locIndex) => {\n      const location = allLocations.find(l => l.id === locationId);\n      if (location) {\n        newNodes.push({\n          id: `location-${locationId}-${timestamp}-${locIndex}`,\n          type: 'custom',\n          position: {\n            x: 100 + (index % 5) * 250,\n            y: 100 + Math.floor(index / 5) * 180\n          },\n          data: {\n            type: 'location',\n            locationId: locationId,\n            name: location.name\n          }\n        });\n        index++;\n      }\n    });\n\n    // Pidat vybran tvary jako samostatn nodes\n    selectedDepartments.forEach((deptId, deptIndex) => {\n      const department = allDepartments.find(d => d.id === deptId);\n      if (department) {\n        newNodes.push({\n          id: `department-${deptId}-${timestamp}-${deptIndex}`,\n          type: 'custom',\n          position: {\n            x: 100 + (index % 5) * 250,\n            y: 100 + Math.floor(index / 5) * 180\n          },\n          data: {\n            type: 'department',\n            departmentId: deptId,\n            name: department.name\n          }\n        });\n        index++;\n      }\n    });\n\n    // Pidat vybran notifikan ablony jako samostatn nodes\n    selectedNotificationTemplates.forEach((templateId, tplIndex) => {\n      const template = allNotificationTemplates.find(t => t.id === templateId);\n      if (template) {\n        newNodes.push({\n          id: `template-${templateId}-${timestamp}-${tplIndex}`,\n          type: 'custom',\n          position: {\n            x: 100 + (index % 5) * 250,\n            y: 100 + Math.floor(index / 5) * 180\n          },\n          data: {\n            type: 'template',\n            templateId: templateId,\n            name: template.nazev || template.name,\n            position: 'Notifikan ablona',\n            initials: '',\n            metadata: {\n              type: 'template',\n              template: template.nazev || template.name\n            }\n          }\n        });\n        index++;\n      }\n    });\n\n    if (newNodes.length > 0) {\n      setNodes(prevNodes => [...prevNodes, ...newNodes]);\n      console.log(` Added ${newNodes.length} nodes to canvas`);\n      \n      // Vymazat vbr\n      setSelectedUsers(new Set());\n      setSelectedLocations(new Set());\n      setSelectedDepartments(new Set());\n    }\n  };\n\n  // Store dragged item info for HTML5 drag & drop\n  const [draggedItem, setDraggedItem] = React.useState(null);\n\n  const onReactFlowDrop = (event) => {\n    event.preventDefault();\n    \n    if (!draggedItem) {\n      console.log(' No dragged item');\n      return;\n    }\n    \n    if (!reactFlowInstance) {\n      console.log(' ReactFlow instance not ready');\n      return;\n    }\n    \n    const dragId = draggedItem;\n    \n    // Najdi ReactFlow wrapper (.react-flow) a zskej jeho pozici\n    const reactFlowElement = event.currentTarget.querySelector('.react-flow');\n    if (!reactFlowElement) {\n      console.error(' ReactFlow element not found');\n      return;\n    }\n    \n    const reactFlowBounds = reactFlowElement.getBoundingClientRect();\n    \n    // Vypotej pozici pomoc screenToFlowPosition (ReactFlow 11.x)\n    // Odeti polovinu ky/vky nodu, aby kurzor byl piblin ve stedu karty\n    const nodeWidth = 220;  // Piblin ka custom node\n    const nodeHeight = 80;  // Piblin vka custom node\n    \n    const position = reactFlowInstance.screenToFlowPosition({\n      x: event.clientX - nodeWidth / 2,\n      y: event.clientY - nodeHeight / 2,\n    });\n    \n    console.log(' Drop:', { \n      dragId, \n      position, \n      clientX: event.clientX, \n      clientY: event.clientY,\n      bounds: { left: reactFlowBounds.left, top: reactFlowBounds.top },\n      viewport: reactFlowInstance.getViewport()\n    });\n    \n    // Zpracovn notifikan ablony - pidat jako node\n    if (dragId.startsWith('notif-')) {\n      const notifId = parseInt(dragId.replace('notif-', ''), 10);\n      const template = allNotificationTemplates.find(t => t.id === notifId);\n      \n      if (template) {\n        const nodeId = `template-${notifId}-${Date.now()}`;\n        \n        const newNode = {\n          id: nodeId,\n          type: 'custom',\n          position,\n          data: {\n            type: 'template',\n            templateId: notifId,\n            name: template.nazev || template.name,\n            position: 'Notifikan ablona',\n            initials: '',\n            metadata: {\n              type: 'template',\n              template: template.nazev || template.name\n            }\n          }\n        };\n        \n        setNodes((nds) => [...nds, newNode]);\n        console.log(` Added notification template node: ${template.nazev || template.name}`);\n      }\n      return;\n    }\n    \n    // Zpracovn role - pidat jako node\n    if (dragId.startsWith('role-')) {\n      const roleId = parseInt(dragId.replace('role-', ''), 10);\n      const role = allRoles.find(r => r.id === roleId);\n      \n      if (role) {\n        const nodeId = `role-${roleId}-${Date.now()}`;\n        \n        const newNode = {\n          id: nodeId,\n          type: 'custom',\n          position,\n          data: {\n            type: 'role',\n            roleId: roleId,\n            name: role.nazev_role,\n            label: role.nazev_role,\n            metadata: {\n              type: 'role',\n              popis: role.popis || '',\n              orders: role.orders || 0,\n              invoices: role.invoices || 0,\n              cashbook: role.cashbook || 0\n            }\n          }\n        };\n        \n        setNodes((nds) => [...nds, newNode]);\n        console.log(` Added role node: ${role.nazev_role}`, newNode);\n      }\n      return;\n    }\n    \n    // Zpracovn uivatele\n    if (!dragId.startsWith('loc-') && !dragId.startsWith('dept-') && !dragId.startsWith('role-')) {\n      const user = allUsers.find(u => u.id === dragId);\n      \n      if (user) {\n        // Generuj uniktn ID pro node (povoluje duplicity stejnho uivatele)\n        const nodeId = `user-${dragId}-${Date.now()}`;\n        \n        const newNode = {\n          id: nodeId,\n          type: 'custom',\n          position,\n          data: {\n            type: 'user',\n            userId: dragId, // Pvodn user ID pro propojen s DB\n            name: user.name,\n            position: user.position,\n            initials: user.initials,\n            metadata: {\n              location: user.location,\n              department: user.department\n            }\n          }\n        };\n        \n        setNodes((nds) => [...nds, newNode]);\n      }\n      return;\n    }\n    \n    // Zpracovani lokality - prida samotnou lokalitu jako node\n    if (dragId.startsWith('loc-')) {\n      const locationId = dragId.replace('loc-', '');\n      console.log(' LOCATION DROP - ID:', locationId);\n      const location = allLocations.find(l => l.id === locationId);\n      \n      if (!location) {\n        console.error(' Location not found:', locationId);\n        return;\n      }\n      \n      const nodeId = `location-${locationId}-${Date.now()}`;\n      \n      const newNode = {\n        id: nodeId,\n        type: 'custom',\n        position,\n        data: {\n          type: 'location',\n          locationId: locationId,\n          name: location.name,\n          position: 'Lokalita',\n          initials: location.name.substring(0, 2).toUpperCase(),\n          metadata: {\n            type: 'location',\n            location: location.name\n          }\n        }\n      };\n      \n      setNodes((nds) => [...nds, newNode]);\n      console.log(` Added location node: ${location.name}`);\n      return;\n    }\n    \n    // Zpracovani utvaru - prida samotny utvar jako node\n    if (dragId.startsWith('dept-')) {\n      const deptId = dragId.replace('dept-', '');\n      console.log(' DEPARTMENT DROP - ID:', deptId);\n      const department = allDepartments.find(d => d.id === deptId);\n      \n      if (!department) {\n        console.error(' Department not found:', deptId);\n        return;\n      }\n      \n      const nodeId = `department-${deptId}-${Date.now()}`;\n      \n      const newNode = {\n        id: nodeId,\n        type: 'custom',\n        position,\n        data: {\n          type: 'department',\n          departmentId: deptId,\n          name: department.name,\n          position: 'Utvar',\n          initials: department.name.substring(0, 2).toUpperCase(),\n          metadata: {\n            type: 'department',\n            department: department.name\n          }\n        }\n      };\n      \n      setNodes((nds) => [...nds, newNode]);\n      console.log(` Added department node: ${department.name}`);\n      return;\n    }\n  };\n\n  const onReactFlowDragOver = (event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleAutoGenerateHierarchy = () => {\n    // Kontrola zda jsou vybran nody na ploe\n    const selectedNodes = nodes.filter(n => n.selected);\n    \n    if (selectedNodes.length === 0) {\n      setDialog({\n        show: true,\n        type: 'alert',\n        icon: '',\n        title: 'dn poloky nevybrny na ploe',\n        message: 'Pro vytvoen AI hierarchie muste nejprve vybrat nody na ploe.\\n\\nPouijte:\\n Thnte my pro vbr oblasti (crosshair kurzor)\\n CTRL+klik pro individuln vbr\\n SHIFT+klik pro rozsah',\n        onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n        confirmText: 'OK',\n        cancelText: null\n      });\n      return;\n    }\n\n    // Generovat hierarchii pouze z vybranch nod na ploe\n    generateHierarchyFromSelectedNodes(selectedNodes);\n  };\n\n  // Automatick rozloen grafu pomoc dagre\n  const getLayoutedElements = (nodes, edges, direction = 'TB') => {\n    const dagreGraph = new graphlib.Graph();\n    dagreGraph.setDefaultEdgeLabel(() => ({}));\n    \n    const nodeWidth = 200;\n    const nodeHeight = 120;\n    \n    dagreGraph.setGraph({ \n      rankdir: direction,\n      nodesep: 80,      // Horizontln mezera mezi uzly\n      ranksep: 120,     // Vertikln mezera mezi rovnmi\n      marginx: 50,\n      marginy: 50\n    });\n\n    nodes.forEach((node) => {\n      dagreGraph.setNode(node.id, { width: nodeWidth, height: nodeHeight });\n    });\n\n    edges.forEach((edge) => {\n      dagreGraph.setEdge(edge.source, edge.target);\n    });\n\n    dagre.layout(dagreGraph);\n\n    const layoutedNodes = nodes.map((node) => {\n      const nodeWithPosition = dagreGraph.node(node.id);\n      return {\n        ...node,\n        position: {\n          x: nodeWithPosition.x - nodeWidth / 2,\n          y: nodeWithPosition.y - nodeHeight / 2,\n        },\n      };\n    });\n\n    return { nodes: layoutedNodes, edges };\n  };\n\n  // Pomocn funkce pro vpoet skre shody mezi dvma zkratkami tvar\n  // Vrac slo 0-100, m vy tm lep shoda\n  const getDepartmentMatchScore = (code1, code2) => {\n    if (!code1 || !code2) return 0;\n    \n    const c1 = code1.trim().toUpperCase();\n    const c2 = code2.trim().toUpperCase();\n    \n    if (c1 === c2) return 100; // Pesn shoda\n    \n    // Rozdlit na sti (nap. \"PTN BN\" -> [\"PTN\", \"BN\"])\n    const parts1 = c1.split(/\\s+/);\n    const parts2 = c2.split(/\\s+/);\n    \n    // Poet spolench st\n    let commonParts = 0;\n    parts1.forEach(p1 => {\n      if (parts2.includes(p1)) commonParts++;\n    });\n    \n    if (commonParts === 0) return 0;\n    \n    // Skre = (poet spolench st / vt poet st) * 80\n    const maxParts = Math.max(parts1.length, parts2.length);\n    return Math.floor((commonParts / maxParts) * 80);\n  };\n  \n  // Najde nejlepho nadzenho ze seznamu podle shody tvaru\n  const findBestDepartmentMatch = (user, candidates) => {\n    if (!candidates || candidates.length === 0) return null;\n    if (!user?.departmentCode) return candidates[0]; // Fallback na prvnho\n    \n    let bestMatch = null;\n    let bestScore = 0;\n    \n    candidates.forEach(candidate => {\n      const score = getDepartmentMatchScore(user.departmentCode, candidate.departmentCode);\n      if (score > bestScore) {\n        bestScore = score;\n        bestMatch = candidate;\n      }\n    });\n    \n    // Vrtit pouze pokud je skre > 0 (aspo njak shoda)\n    return bestScore > 0 ? bestMatch : null;\n  };\n\n  const generateHierarchyFromSelected = () => {\n    console.log(' AI: Generating hierarchy from SELECTED items only...');\n\n    // Zskat vechny vybran uivatele\n    let selectedUsersList = [];\n    \n    // Pidat pmo vybran uivatele\n    selectedUsers.forEach(userId => {\n      const user = allUsers.find(u => u.id === userId);\n      if (user) selectedUsersList.push(user);\n    });\n    \n    // Pidat uivatele z vybranch lokalit\n    selectedLocations.forEach(locationId => {\n      const location = allLocations.find(l => l.id === locationId);\n      if (location) {\n        const usersInLocation = allUsers.filter(u => u.location === location.name);\n        usersInLocation.forEach(user => {\n          if (!selectedUsersList.find(u => u.id === user.id)) {\n            selectedUsersList.push(user);\n          }\n        });\n      }\n    });\n    \n    // Pidat uivatele z vybranch tvar\n    selectedDepartments.forEach(deptId => {\n      const department = allDepartments.find(d => d.id === deptId);\n      if (department) {\n        const usersInDept = allUsers.filter(u => u.department === department.name);\n        usersInDept.forEach(user => {\n          if (!selectedUsersList.find(u => u.id === user.id)) {\n            selectedUsersList.push(user);\n          }\n        });\n      }\n    });\n\n    if (selectedUsersList.length === 0) {\n      setDialog({\n        show: true,\n        type: 'alert',\n        icon: '',\n        title: 'dn uivatel',\n        message: 'Ve vybranch polokch nejsou dn uivatel.',\n        onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n        confirmText: 'OK',\n        cancelText: null\n      });\n      return;\n    }\n\n    console.log(` AI: Working with ${selectedUsersList.length} selected users`);\n\n    // Analyzovat role z vybranch uivatel\n    const director = selectedUsersList.find(u => {\n      const pos = u.position?.toLowerCase() || '';\n      return pos === 'editel' || pos === 'editelka';\n    });\n    \n    const deputies = selectedUsersList.filter(u => \n      u.position?.toLowerCase().includes('nmstek')\n    );\n    \n    const directorHeads = selectedUsersList.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      const dept = u.department?.toLowerCase() || '';\n      return pos.includes('vedouc') && (dept.includes('editel') || pos.includes('editel'));\n    });\n    \n    const heads = selectedUsersList.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      const dept = u.department?.toLowerCase() || '';\n      return pos.includes('vedouc') && !dept.includes('editel') && !pos.includes('editel');\n    });\n    \n    const others = selectedUsersList.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      return !pos.includes('editel') &&\n             !pos.includes('nmstek') &&\n             !pos.includes('vedouc');\n    });\n\n    // Vytvoit nodes a edges\n    const newNodes = [];\n    const newEdges = [];\n    const timestamp = Date.now();\n\n    // editel\n    if (director) {\n      newNodes.push({\n        id: `user-${director.id}-${timestamp}-0`,\n        type: 'custom',\n        position: { x: 0, y: 0 },\n        data: {\n          userId: director.id,\n          name: director.name,\n          position: director.position,\n          initials: director.initials,\n          metadata: {\n            location: director.location,\n            department: director.department\n          }\n        }\n      });\n    }\n\n    // Nmstci\n    deputies.forEach((deputy, i) => {\n      const nodeId = `user-${deputy.id}-${timestamp}-${i + 1}`;\n      newNodes.push({\n        id: nodeId,\n        type: 'custom',\n        position: { x: 0, y: 0 },\n        data: {\n          userId: deputy.id,\n          name: deputy.name,\n          position: deputy.position,\n          initials: deputy.initials,\n          metadata: {\n            location: deputy.location,\n            department: deputy.department\n          }\n        }\n      });\n\n      if (director) {\n        newEdges.push({\n          id: `e-${newNodes[0].id}-${nodeId}`,\n          source: newNodes[0].id,\n          target: nodeId,\n          type: 'smoothstep',\n          animated: true,\n          markerEnd: { type: MarkerType.ArrowClosed },\n          style: { stroke: '#667eea', strokeWidth: 3 }\n        });\n      }\n    });\n\n    // Vedouc seku editele\n    let nodeIndex = 1 + deputies.length;\n    directorHeads.forEach((head, i) => {\n      const nodeId = `user-${head.id}-${timestamp}-${nodeIndex + i}`;\n      newNodes.push({\n        id: nodeId,\n        type: 'custom',\n        position: { x: 0, y: 0 },\n        data: {\n          userId: head.id,\n          name: head.name,\n          position: head.position,\n          initials: head.initials,\n          metadata: {\n            location: head.location,\n            department: head.department\n          }\n        }\n      });\n\n      if (director) {\n        newEdges.push({\n          id: `e-${newNodes[0].id}-${nodeId}`,\n          source: newNodes[0].id,\n          target: nodeId,\n          type: 'smoothstep',\n          animated: true,\n          markerEnd: { type: MarkerType.ArrowClosed },\n          style: { stroke: '#667eea', strokeWidth: 3 }\n        });\n      }\n    });\n\n    // Ostatn vedouc\n    nodeIndex += directorHeads.length;\n    heads.forEach((head, i) => {\n      const nodeId = `user-${head.id}-${timestamp}-${nodeIndex + i}`;\n      newNodes.push({\n        id: nodeId,\n        type: 'custom',\n        position: { x: 0, y: 0 },\n        data: {\n          userId: head.id,\n          name: head.name,\n          position: head.position,\n          initials: head.initials,\n          metadata: {\n            location: head.location,\n            department: head.department\n          }\n        }\n      });\n\n      // Pipojit k nmstkovi se stejnm tvarem\n      const deputyWithSameDept = deputies.find(d => d.department === head.department);\n      if (deputyWithSameDept) {\n        const deputyNode = newNodes.find(n => n.data.userId === deputyWithSameDept.id);\n        if (deputyNode) {\n          newEdges.push({\n            id: `e-${deputyNode.id}-${nodeId}`,\n            source: deputyNode.id,\n            target: nodeId,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      } else if (director) {\n        // Fallback na editele\n        newEdges.push({\n          id: `e-${newNodes[0].id}-${nodeId}`,\n          source: newNodes[0].id,\n          target: nodeId,\n          type: 'smoothstep',\n          animated: true,\n          markerEnd: { type: MarkerType.ArrowClosed },\n          style: { stroke: '#667eea', strokeWidth: 3 }\n        });\n      }\n    });\n\n    // Ostatn zamstnanci\n    nodeIndex += heads.length;\n    others.forEach((user, i) => {\n      const nodeId = `user-${user.id}-${timestamp}-${nodeIndex + i}`;\n      newNodes.push({\n        id: nodeId,\n        type: 'custom',\n        position: { x: 0, y: 0 },\n        data: {\n          userId: user.id,\n          name: user.name,\n          position: user.position,\n          initials: user.initials,\n          metadata: {\n            location: user.location,\n            department: user.department\n          }\n        }\n      });\n\n      // Pipojit k vedoucmu stejnho tvaru\n      const headWithSameDept = heads.find(h => h.department === user.department);\n      if (headWithSameDept) {\n        const headNode = newNodes.find(n => n.data.userId === headWithSameDept.id);\n        if (headNode) {\n          newEdges.push({\n            id: `e-${headNode.id}-${nodeId}`,\n            source: headNode.id,\n            target: nodeId,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      }\n    });\n\n    // Aplikovat layout\n    const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(newNodes, newEdges, 'TB');\n    \n    setNodes(layoutedNodes);\n    setEdges(layoutedEdges);\n\n    // Vyistit vbr\n    setSelectedUsers(new Set());\n    setSelectedLocations(new Set());\n    setSelectedDepartments(new Set());\n\n    setDialog({\n      show: true,\n      type: 'success',\n      icon: '',\n      title: 'AI Hierarchie vytvoena!',\n      message: 'Hierarchie byla automaticky vygenerovana z vybranych polozek.\\nZkontrolujte strukturu a pripadne upravte.\\nNezapomente ulozit!',\n      stats: {\n        'editel': director ? '1' : '0',\n        'Nmstci': deputies.length,\n        'Vedouc seku editele': directorHeads.length,\n        'Vedouc ostatnch sek': heads.length,\n        'Ostatn': others.length,\n        '': '',\n        'Celkem uzl': layoutedNodes.length,\n        'Celkem vztah': layoutedEdges.length\n      },\n      onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n      confirmText: 'OK',\n      cancelText: null\n    });\n  };\n\n  // Nov funkce pro prci s vybranmi nody na ploe\n  const generateHierarchyFromSelectedNodes = (selectedNodes) => {\n    console.log(' AI: Reorganizing hierarchy from SELECTED NODES on canvas...', selectedNodes.length);\n\n    if (selectedNodes.length === 0) return;\n\n    // Analyzovat role z vybranch nod\n    const director = selectedNodes.find(n => {\n      const pos = n.data.position?.toLowerCase() || '';\n      return pos === 'editel' || pos === 'editelka';\n    });\n    \n    const deputies = selectedNodes.filter(n => \n      n.data.position?.toLowerCase().includes('nmstek')\n    );\n    \n    const heads = selectedNodes.filter(n => \n      n.data.position?.toLowerCase().includes('vedouc')\n    );\n    \n    const others = selectedNodes.filter(n => \n      !n.data.position?.toLowerCase().includes('editel') &&\n      !n.data.position?.toLowerCase().includes('nmstek') &&\n      !n.data.position?.toLowerCase().includes('vedouc')\n    );\n\n    // Vytvo\\u0159 nov edges podle hierarchie\n    const newEdges = [];\n    const timestamp = Date.now();\n\n    // Nmstci -> editel\n    if (director) {\n      deputies.forEach(deputy => {\n        newEdges.push({\n          id: `e-${director.id}-${deputy.id}-${timestamp}`,\n          source: director.id,\n          target: deputy.id,\n          type: 'smoothstep',\n          animated: true,\n          markerEnd: { type: MarkerType.ArrowClosed },\n          style: { stroke: '#667eea', strokeWidth: 3 }\n        });\n      });\n\n      // Vedouc -> editel nebo Nmstek (podle tvaru)\n      heads.forEach(head => {\n        const deputyWithSameDept = deputies.find(d => \n          d.data.metadata?.department === head.data.metadata?.department\n        );\n        \n        const sourceNode = deputyWithSameDept || director;\n        newEdges.push({\n          id: `e-${sourceNode.id}-${head.id}-${timestamp}`,\n          source: sourceNode.id,\n          target: head.id,\n          type: 'smoothstep',\n          animated: true,\n          markerEnd: { type: MarkerType.ArrowClosed },\n          style: { stroke: '#667eea', strokeWidth: 3 }\n        });\n      });\n    }\n\n    // Odstranit star edges mezi vybranmi nody\n    const selectedNodeIds = new Set(selectedNodes.map(n => n.id));\n    const filteredEdges = edges.filter(e => \n      !selectedNodeIds.has(e.source) || !selectedNodeIds.has(e.target)\n    );\n\n    // Pidat nov edges\n    const updatedEdges = [...filteredEdges, ...newEdges];\n    \n    // Aplikovat layout\n    const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(nodes, updatedEdges, 'TB');\n    \n    setNodes(layoutedNodes);\n    setEdges(layoutedEdges);\n\n    setDialog({\n      show: true,\n      type: 'success',\n      icon: '',\n      title: 'Hierarchie reorganizovna!',\n      message: `Vybran nody (${selectedNodes.length}) byly reorganizovny podle rol.\\nZkontrolujte strukturu a ppadn upravte.`,\n      stats: {\n        'editel': director ? '1' : '0',\n        'Nmstci': deputies.length,\n        'Vedouc': heads.length,\n        'Ostatn': others.length,\n        '': '',\n        'Nov vztahy': newEdges.length\n      },\n      onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n      confirmText: 'OK',\n      cancelText: null\n    });\n  };\n\n  const generateHierarchy = () => {\n\n    console.log(' AI: Generating hierarchy from positions...');\n\n    // Pokud u existuj vztahy (naten z DB), pout je a jen aplikovat layout\n    if (edges.length > 0) {\n      console.log(' Using existing relationships from DB:', edges.length);\n      \n      // Vytvoit nodes ze vech uivatel\n      const existingNodes = allUsers.map((user) => ({\n        id: user.id,\n        type: 'custom',\n        position: { x: 0, y: 0 }, // Bude pepotno dagre\n        data: {\n          name: user.name,\n          position: user.position,\n          initials: user.initials,\n          metadata: {\n            location: user.location,\n            department: user.department\n          }\n        }\n      }));\n\n      // Aplikovat dagre layout na existujc strukturu\n      const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(existingNodes, edges, 'TB');\n      \n      setNodes(layoutedNodes);\n      setEdges(layoutedEdges);\n\n      setDialog({\n        show: true,\n        type: 'success',\n        icon: '',\n        title: 'Layout aplikovn!',\n        message: 'Pouzity existujici vztahy z databaze.\\nAplikovano prehledne automaticke rozlozeni.',\n        stats: {\n          'Celkem uzl': layoutedNodes.length,\n          'Vztah z DB': layoutedEdges.length\n        },\n        onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n        confirmText: 'OK',\n        cancelText: null\n      });\n      return;\n    }\n\n    // Pokud neexistuj vztahy, vygenerovat nov ze STVAJCCH PIAZEN v DB\n    console.log(' No existing relationships, generating from DB assignments...');\n\n    // 1. Seskupen podle tvar a pozic (pouvme RELN piazen z 25_uzivatele)\n    // editel = pesn \"editel\" (ne vedouc, ne nmstek)\n    const director = allUsers.find(u => {\n      const pos = u.position?.toLowerCase() || '';\n      return pos === 'editel' || pos === 'editelka';\n    });\n    \n    // Nmstci - seskupeni podle jejich tvar (department/departmentCode)\n    const deputies = allUsers.filter(u => \n      u.position?.toLowerCase().includes('nmstek')\n    );\n    \n    // Vedouc seku editele - jdou PMO pod editele\n    const directorHeads = allUsers.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      const dept = u.department?.toLowerCase() || '';\n      return pos.includes('vedouc') && (dept.includes('editel') || pos.includes('editel'));\n    });\n    \n    // Ostatn vedouc (ne editelskho seku) - BUDOU nadzeni svmu tvaru\n    const heads = allUsers.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      const dept = u.department?.toLowerCase() || '';\n      return pos.includes('vedouc') && !dept.includes('editel') && !pos.includes('editel');\n    });\n    \n    // Ostatn zamstnanci - piazeni podle svho tvaru (department)\n    const others = allUsers.filter(u => {\n      const pos = u.position?.toLowerCase() || '';\n      return !pos.includes('editel') &&\n             !pos.includes('nmstek') &&\n             !pos.includes('vedouc');\n    });\n\n    console.log(' AI: Structure from DB assignments:', { \n      director: director ? `${director.name} (${director.department}, ${director.location})` : 'None',\n      deputies: deputies.map(d => ({ name: d.name, dept: d.department, code: d.departmentCode })),\n      directorHeads: directorHeads.map(h => ({ name: h.name, dept: h.department })),\n      heads: heads.map(h => ({ name: h.name, dept: h.department, code: h.departmentCode })),\n      others: `${others.length} users`\n    });\n\n    // 2. Vytvoen nodes (pozice budou pepotny dagre)\n    const newNodes = [];\n    const newEdges = [];\n    let yPos = 100;\n    const xSpacing = 280;\n    const ySpacing = 180;\n\n    // editel nahoe (sted)\n    if (director) {\n      newNodes.push({\n        id: director.id,\n        type: 'custom',\n        position: { x: 500, y: yPos },\n        data: {\n          name: director.name,\n          position: director.position,\n          initials: director.initials,\n          metadata: {\n            location: director.location,\n            department: director.department\n          }\n        }\n      });\n      yPos += ySpacing;\n    }\n\n    // Nmstci pod editelem\n    if (deputies.length > 0) {\n      const startX = 500 - ((deputies.length - 1) * xSpacing) / 2;\n      deputies.forEach((deputy, i) => {\n        newNodes.push({\n          id: deputy.id,\n          type: 'custom',\n          position: { x: startX + (i * xSpacing), y: yPos },\n          data: {\n            name: deputy.name,\n            position: deputy.position,\n            initials: deputy.initials,\n            metadata: {\n              location: deputy.location,\n              department: deputy.department\n            }\n          }\n        });\n\n        // Spojit s editelem\n        if (director) {\n          newEdges.push({\n            id: `e-${director.id}-${deputy.id}`,\n            source: director.id,\n            target: deputy.id,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      });\n      yPos += ySpacing;\n    }\n\n    // Vedouc seku editele - PMO pod editele (ne pes nmstky!)\n    if (directorHeads.length > 0) {\n      const startX = 200;\n      directorHeads.forEach((head, i) => {\n        newNodes.push({\n          id: head.id,\n          type: 'custom',\n          position: { x: startX + (i * 250), y: yPos },\n          data: {\n            name: head.name,\n            position: head.position,\n            initials: head.initials,\n            metadata: {\n              location: head.location,\n              department: head.department\n            }\n          }\n        });\n\n        // Vedouc editelskho seku jde PMO na editele\n        if (director) {\n          newEdges.push({\n            id: `e-${director.id}-${head.id}`,\n            source: director.id,\n            target: head.id,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      });\n      yPos += ySpacing;\n    }\n\n    // Ostatn vedouc - pod nmstky (podle tvaru)\n    if (heads.length > 0) {\n      const startX = 200;\n      heads.forEach((head, i) => {\n        newNodes.push({\n          id: head.id,\n          type: 'custom',\n          position: { x: startX + (i * 250), y: yPos },\n          data: {\n            name: head.name,\n            position: head.position,\n            initials: head.initials,\n            metadata: {\n              location: head.location,\n              department: head.department\n            }\n          }\n        });\n\n        // Najt nmstka s nejlep shodou tvaru (podle zkratky), nebo editele\n        const sameDepDeputy = findBestDepartmentMatch(head, deputies);\n        const parent = sameDepDeputy || (deputies.length > 0 ? deputies[0] : director);\n        \n        if (parent) {\n          newEdges.push({\n            id: `e-${parent.id}-${head.id}`,\n            source: parent.id,\n            target: head.id,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      });\n      yPos += ySpacing;\n    }\n\n    // Ostatn zamstnanci\n    if (others.length > 0) {\n      const startX = 100;\n      const maxPerRow = 5;\n      others.forEach((user, i) => {\n        const row = Math.floor(i / maxPerRow);\n        const col = i % maxPerRow;\n        \n        newNodes.push({\n          id: user.id,\n          type: 'custom',\n          position: { x: startX + (col * 220), y: yPos + (row * ySpacing) },\n          data: {\n            name: user.name,\n            position: user.position,\n            initials: user.initials,\n            metadata: {\n              location: user.location,\n              department: user.department\n            }\n          }\n        });\n\n        // Najt nadzenho s nejlep shodou tvaru - porovnat vechny monosti\n        const allPossibleParents = [...heads, ...directorHeads, ...deputies];\n        const bestMatch = findBestDepartmentMatch(user, allPossibleParents);\n        const parent = bestMatch || (deputies.length > 0 ? deputies[0] : director);\n        \n        // Debug: zobrazit skre shody\n        if (bestMatch) {\n          const score = getDepartmentMatchScore(user.departmentCode, bestMatch.departmentCode);\n          console.log(` ${user.name} (${user.departmentCode})  ${bestMatch.name} (${bestMatch.departmentCode}) [score: ${score}]`);\n        }\n        \n        if (parent) {\n          newEdges.push({\n            id: `e-${parent.id}-${user.id}`,\n            source: parent.id,\n            target: user.id,\n            type: 'smoothstep',\n            animated: true,\n            markerEnd: { type: MarkerType.ArrowClosed },\n            style: { stroke: '#667eea', strokeWidth: 3 }\n          });\n        }\n      });\n    }\n\n    // Aplikovat automatick rozloen pomoc dagre\n    const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(newNodes, newEdges, 'TB');\n    \n    // Nastavit nov nodes a edges s optimlnm layoutem\n    setNodes(layoutedNodes);\n    setEdges(layoutedEdges);\n\n    console.log(' AI: Generated hierarchy with auto-layout:', {\n      nodes: layoutedNodes.length,\n      edges: layoutedEdges.length\n    });\n\n    setDialog({\n      show: true,\n      type: 'success',\n      icon: '',\n      title: 'Hierarchie automaticky vytvorena!',\n      message: 'Zkontrolujte strukturu a ppadn upravte.\\nNezapomete uloit!',\n      stats: {\n        'editel': director ? '1' : '0',\n        'Nmstci': deputies.length,\n        'Vedouc seku editele': directorHeads.length,\n        'Vedouc ostatnch sek': heads.length,\n        'Ostatn': others.length,\n        '': '',\n        'Celkem uzl': layoutedNodes.length,\n        'Celkem vztah': layoutedEdges.length\n      },\n      onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n      confirmText: 'OK',\n      cancelText: null\n    });\n  };\n\n  // ============ PROFILE MANAGEMENT ============\n  \n  const loadProfiles = async () => {\n    try {\n      const token = await loadAuthData.token();\n      const userData = await loadAuthData.user();\n      const username = userData?.username || localStorage.getItem('username');\n      const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n      \n      const response = await fetch(`${apiBase}/hierarchy/profiles/list`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token, username })\n      });\n      \n      const result = await response.json();\n      if (result.success) {\n        setProfiles(result.data || []);\n        const activeProfile = result.data.find(p => p.isActive) || result.data[0];\n        setCurrentProfile(activeProfile || null);\n      }\n    } catch (err) {\n      console.error('Failed to load profiles:', err);\n    }\n  };\n\n  const handleDeleteProfile = async () => {\n    if (!currentProfile || profiles.length <= 1) {\n      return;\n    }\n\n    const relationshipsText = currentProfile.relationshipsCount > 0 \n      ? `\\n\\n Profil obsahuje ${currentProfile.relationshipsCount} vztah, kter budou tak smazny!`\n      : '';\n\n    setDialog({\n      show: true,\n      type: 'confirm',\n      icon: '',\n      title: 'Smazat profil?',\n      message: `Opravdu chcete smazat profil \"${currentProfile.name}\"?${relationshipsText}\\n\\nTato akce je nevratn!`,\n      onConfirm: async () => {\n        try {\n          const token = await loadAuthData.token();\n          const userData = await loadAuthData.user();\n          const username = userData?.username || localStorage.getItem('username');\n          const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n\n          const response = await fetch(`${apiBase}/hierarchy/profiles/delete`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ \n              token, \n              username, \n              profile_id: currentProfile.id \n            })\n          });\n\n          const result = await response.json();\n          \n          if (result.success) {\n            setDialog({\n              show: true,\n              type: 'success',\n              icon: '',\n              title: 'Profil smazn',\n              message: `Profil \"${currentProfile.name}\" byl spn smazn.`,\n              onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n              confirmText: 'OK',\n              cancelText: null\n            });\n\n            // Obnovit seznam profil a vybrat prvn dostupn\n            await loadProfiles();\n            \n            // Vyistit canvas\n            setNodes([]);\n            setEdges([]);\n          } else {\n            throw new Error(result.error || 'Chyba pi mazn profilu');\n          }\n        } catch (err) {\n          console.error('Delete profile error:', err);\n          setDialog({\n            show: true,\n            type: 'alert',\n            icon: '',\n            title: 'Chyba pi mazn',\n            message: err.message,\n            onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n            confirmText: 'OK',\n            cancelText: null\n          });\n        }\n      },\n      onCancel: () => setDialog(prev => ({ ...prev, show: false })),\n      confirmText: 'Smazat',\n      cancelText: 'Zruit'\n    });\n  };\n  \n  const handleToggleProfileActive = async () => {\n    if (!currentProfile) return;\n    \n    const newActiveState = !currentProfile.isActive;\n    const action = newActiveState ? 'aktivovat' : 'deaktivovat';\n    \n    try {\n      const token = await loadAuthData.token();\n      const userData = await loadAuthData.user();\n      const username = userData?.username || localStorage.getItem('username');\n      \n      const { setProfileActive } = await import('../services/hierarchyProfilesApi');\n      await setProfileActive(token, username, currentProfile.id, newActiveState);\n      \n      // Aktualizovat lokln stav\n      setProfiles(profiles.map(p => \n        p.id === currentProfile.id ? { ...p, isActive: newActiveState } : p\n      ));\n      setCurrentProfile({ ...currentProfile, isActive: newActiveState });\n      \n      const statusText = newActiveState ? 'aktivovn (viditeln v AppSettings)' : 'deaktivovn (skryt v AppSettings)';\n      console.log(` Profil \"${currentProfile.name}\" byl ${statusText}`);\n    } catch (error) {\n      console.error(`Chyba pi pokusu ${action} profil:`, error);\n      alert(`Nepodailo se ${action} profil: ${error.message}`);\n    }\n  };\n  \n  const handleProfileChange = async (profileId) => {\n    console.log(' handleProfileChange called with profileId:', profileId);\n    const profile = profiles.find(p => p.id === parseInt(profileId));\n    console.log(' Found profile:', profile);\n    if (!profile) {\n      console.log(' Profile not found!');\n      return;\n    }\n    \n    // Pokud ma draft, zeptat se zda chce prepisat\n    if (hasDraft && (nodes.length > 0 || edges.length > 0)) {\n      if (!window.confirm(`Mte neuloen zmny v auto-draftu.\\n\\nChcete nast profil \"${profile.name}\"?\\n\\nNeuloen zmny budou ztraceny.`)) {\n        return;\n      }\n    }\n    \n    setCurrentProfile(profile);\n    \n    // Uloit vybran profil do LocalStorage\n    localStorage.setItem(LS_PROFILE_KEY, profileId.toString());\n    \n    console.log(' Loading profile:', profile.name, 'ID:', profileId);\n    \n    // Nacist strukturu pro vybrany profil (NOV API)\n    try {\n      const token = await loadAuthData.token();\n      const userData = await loadAuthData.user();\n      const username = userData?.username || localStorage.getItem('username');\n      const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n      \n      const response = await fetch(`${apiBase}/hierarchy/profiles/load-structure`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token, username, profile_id: profileId })\n      });\n      \n      const result = await response.json();\n      console.log(' Profile structure response:', result);\n      \n      if (result.success && result.data) {\n        // API vrac structure_json formt s nodes a edges\n        const apiNodes = result.data.nodes || [];\n        const apiEdges = result.data.edges || [];\n        \n        if (apiNodes.length === 0 && apiEdges.length === 0) {\n          setNodes([]);\n          setEdges([]);\n          console.log(' Empty profile loaded');\n        } else {\n          console.log(' Received nodes:', apiNodes.length, 'edges:', apiEdges.length);\n          \n          // Zajistit, e vechny nodes maj position\n          const validNodes = apiNodes.map((node, index) => ({\n            ...node,\n            position: node.position || { x: 100 + (index % 5) * 200, y: 100 + Math.floor(index / 5) * 150 }\n          }));\n          \n          setNodes(validNodes);\n          setEdges(apiEdges);\n          \n          console.log(' Profile loaded:', validNodes.length, 'nodes,', apiEdges.length, 'edges');\n          \n          //  FORCE RE-RENDER: Po naten profilu znovu vyfituj viewport\n          // Mal zpodn aby se ReactFlow stihl inicializovat\n          setTimeout(() => {\n            if (reactFlowInstance) {\n              reactFlowInstance.fitView({ padding: 0.2, duration: 800 });\n              console.log(' ReactFlow viewport refitted after profile load');\n            }\n          }, 100);\n        }\n        \n        // Vymazat draft pri nacitani profilu\n        localStorage.removeItem(LS_NODES_KEY);\n        localStorage.removeItem(LS_EDGES_KEY);\n        localStorage.removeItem(LS_TIMESTAMP_KEY);\n        setHasDraft(false);\n      }\n    } catch (err) {\n      console.error('Failed to load profile structure:', err);\n    }\n  };\n  \n  const handleSaveAs = () => {\n    setProfileDialogMode('saveAs');\n    setShowProfileDialog(true);\n  };\n  \n  const handleProfileSaveConfirm = async (profileName, profileDescription) => {\n    try {\n      const token = await loadAuthData.token();\n      const userData = await loadAuthData.user();\n      const username = userData?.username || localStorage.getItem('username');\n      const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n      \n      // Nejdrive vytvorit profil\n      const createResponse = await fetch(`${apiBase}/hierarchy/profiles/create`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          token, \n          username,\n          name: profileName,\n          description: profileDescription,\n          set_active: false\n        })\n      });\n      \n      const createResult = await createResponse.json();\n      \n      if (createResult.code === 'PROFILE_EXISTS') {\n        // Profil existuje - zobrazit confirm dialog\n        return { exists: true, profileName };\n      }\n      \n      if (!createResult.success) {\n        throw new Error(createResult.error || 'Chyba pri vytvareni profilu');\n      }\n      \n      const newProfileId = createResult.profile_id;\n      \n      // Ulozit hierarchii do noveho profilu\n      await handleSave(newProfileId);\n      \n      // Obnovit seznam profilu\n      await loadProfiles();\n      \n      setShowProfileDialog(false);\n      \n      return { success: true };\n      \n    } catch (err) {\n      console.error('Profile save error:', err);\n      return { error: err.message };\n    }\n  };\n\n  const handleSave = async (targetProfileId = null) => {\n    try {\n      const token = await loadAuthData.token();\n      const userData = await loadAuthData.user();\n      const username = userData?.username || localStorage.getItem('username');\n      const apiBase = process.env.REACT_APP_API2_BASE_URL || '/api.eeo';\n      \n      const profileId = targetProfileId || currentProfile?.id || 1;\n      \n      console.log(' HIERARCHY SAVE START - Current state:', {\n        profileId,\n        totalNodes: nodes.length,\n        totalEdges: edges.length\n      });\n      \n      // NOV SYSTM: Uloit nodes a edges jako JSON do structure_json\n      const payload = {\n        token,\n        username,\n        profile_id: profileId,\n        nodes: nodes.map(n => ({\n          id: n.id,\n          typ: n.data?.type || (n.data?.userId ? 'user' : n.data?.locationId ? 'location' : n.data?.departmentId ? 'department' : n.data?.templateId ? 'template' : n.data?.roleId ? 'role' : 'user'),\n          pozice: n.position,\n          data: n.data\n        })),\n        edges: edges.map(e => ({\n          id: e.id,\n          source: e.source,\n          target: e.target,\n          typ: e.data?.typ || (e.data?.notifications ? 'notification' : 'relation'),\n          data: e.data || {}\n        }))\n      };\n      \n      console.log(' HIERARCHY SAVE - Payload:', JSON.stringify(payload, null, 2));\n      \n      const response = await fetch(`${apiBase}/hierarchy/profiles/save-structure`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      console.log(' SAVE Response status:', response.status, response.statusText);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error(' SAVE Error response:', errorText);\n        throw new Error('Chyba pri ukladani');\n      }\n\n      const result = await response.json();\n      console.log(' SAVE Result:', result);\n      if (result.success) {\n        localStorage.removeItem(LS_NODES_KEY);\n        localStorage.removeItem(LS_EDGES_KEY);\n        localStorage.removeItem(LS_TIMESTAMP_KEY);\n        setHasDraft(false);\n        \n        // Automaticky pepnout na uloen profil a uloit do LocalStorage\n        if (result.profile_id && result.profile_id !== currentProfile?.id) {\n          const savedProfile = profiles.find(p => p.id === result.profile_id);\n          if (savedProfile) {\n            setCurrentProfile(savedProfile);\n            localStorage.setItem(LS_PROFILE_KEY, savedProfile.id.toString());\n            console.log(' Automaticky pepnuto na profil:', savedProfile.name);\n          }\n        }\n        \n        // Zobrazit toast notifikaci msto dialogu\n        showToast(\n          ` Hierarchie spn uloena! Uloeno ${nodes.length} uzl a ${edges.length} vztah.`,\n          { type: 'success', timeout: 5000 }\n        );\n      } else {\n        console.error(' SAVE Failed:', result.error, result.details);\n        throw new Error(result.error || 'Neznama chyba');\n      }\n    } catch (err) {\n      console.error(' SAVE Exception:', err);\n      setDialog({\n        show: true,\n        type: 'alert',\n        icon: '',\n        title: 'Chyba pri ukladani',\n        message: err.message,\n        onConfirm: () => setDialog(prev => ({ ...prev, show: false })),\n        confirmText: 'OK',\n        cancelText: null\n      });\n    }\n  };\n\n  const handleDeleteNode = async () => {\n    if (selectedNode) {\n      console.log(' Deleting node:', selectedNode.id);\n      \n      // Odstranit node a vechny souvisejc hrany z UI (optimistic update)\n      setNodes((nds) => nds.filter(n => n.id !== selectedNode.id));\n      setEdges((eds) => eds.filter(e => e.source !== selectedNode.id && e.target !== selectedNode.id));\n      setSelectedNode(null);\n      setShowDetailPanel(false);\n      \n      // Poznmka: Skuten mazn z DB probhne pi dalm uloen (handleSave)\n      // V2 systm ukld celou hierarchii najednou, ne jednotliv nodes\n      console.log(' Node removed from UI (will be deleted from DB on next save)');\n    }\n  };\n\n  const handleDeleteEdge = async () => {\n    if (selectedEdge) {\n      console.log(' Deleting edge:', selectedEdge);\n      \n      // Odstranit z UI okamit (optimistic update)\n      setEdges((eds) => eds.filter(e => e.id !== selectedEdge.id));\n      setSelectedEdge(null);\n      setShowDetailPanel(false);\n      \n      // Poznmka: Skuten mazn z DB probhne pi dalm uloen (handleSave)\n      // V2 systm ukld celou hierarchii najednou, ne jednotliv vztahy\n      console.log(' Edge removed from UI (will be deleted from DB on next save)');\n    }\n  };\n\n  const filteredUsers = allUsers.filter(u => \n    u.name?.toLowerCase().includes(searchUsers.toLowerCase()) ||\n    u.position?.toLowerCase().includes(searchUsers.toLowerCase()) ||\n    u.location?.toLowerCase().includes(searchUsers.toLowerCase())\n  );\n\n  const filteredRoles = allRoles.filter(role =>\n    role.nazev_role?.toLowerCase().includes(searchRoles.toLowerCase()) ||\n    (role.popis && role.popis.toLowerCase().includes(searchRoles.toLowerCase()))\n  );\n\n  const filteredLocations = allLocations.filter(loc =>\n    loc.name?.toLowerCase().includes(searchLocations.toLowerCase()) ||\n    loc.code?.toLowerCase().includes(searchLocations.toLowerCase())\n  );\n\n  const filteredDepartments = allDepartments.filter(dept =>\n    dept.name?.toLowerCase().includes(searchDepartments.toLowerCase()) ||\n    dept.code?.toLowerCase().includes(searchDepartments.toLowerCase())\n  );\n\n  const filteredNotificationTemplates = allNotificationTemplates.filter(template =>\n    (template.nazev || template.name)?.toLowerCase().includes(searchTemplates.toLowerCase()) ||\n    (template.typ || template.type)?.toLowerCase().includes(searchTemplates.toLowerCase()) ||\n    (template.description && template.description.toLowerCase().includes(searchTemplates.toLowerCase()))\n  );\n\n  // Hot-reload error fallback\n  if (hasError) {\n    return (\n      <Container>\n        <Header>\n          <Title>\n            <FontAwesomeIcon icon={faSitemap} />\n            Systm workflow a notifikac\n          </Title>\n        </Header>\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          height: '100%',\n          color: '#f59e0b',\n          fontSize: '1.1rem'\n        }}>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}></div>\n            <div style={{ marginBottom: '1rem' }}>Hot-reload chyba detekovna</div>\n            <button \n              onClick={() => window.location.reload()} \n              style={{\n                padding: '12px 24px',\n                background: '#3b82f6',\n                color: 'white',\n                border: 'none',\n                borderRadius: '8px',\n                cursor: 'pointer',\n                fontSize: '1rem',\n                fontWeight: '600'\n              }}\n            >\n              Obnovit strnku (F5)\n            </button>\n          </div>\n        </div>\n      </Container>\n    );\n  }\n\n  if (loading) {\n    return (\n      <Container>\n        <Header>\n          <Title>\n            <FontAwesomeIcon icon={faSitemap} />\n            Systm workflow a notifikac\n          </Title>\n        </Header>\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          height: '100%',\n          color: '#64748b',\n          fontSize: '1.1rem'\n        }}>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}></div>\n            <div>Natn hierarchie...</div>\n          </div>\n        </div>\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container>\n        <Header>\n          <Title>\n            <FontAwesomeIcon icon={faSitemap} />\n            Systm workflow a notifikac\n          </Title>\n        </Header>\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          height: '100%',\n          color: '#ef4444',\n          fontSize: '1.1rem'\n        }}>\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}></div>\n            <div>Chyba pi natn: {error}</div>\n          </div>\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <>\n      <style>{`\n        .email-preview-body::-webkit-scrollbar {\n          width: 8px;\n        }\n        .email-preview-body::-webkit-scrollbar-track {\n          background: #f9fafb;\n        }\n        .email-preview-body::-webkit-scrollbar-thumb {\n          background: #d1d5db;\n          border-radius: 4px;\n        }\n        .email-preview-body::-webkit-scrollbar-thumb:hover {\n          background: #9ca3af;\n        }\n      `}</style>\n      <Container>\n        <Header>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\n            <Title>\n              <FontAwesomeIcon icon={faSitemap} />\n              Systm workflow a notifikac\n            </Title>\n            {(nodes.length > 0 || edges.length > 0) && (\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              padding: '8px 12px',\n              background: hasDraft ? '#dbeafe' : '#fef3c7',\n              border: `1px solid ${hasDraft ? '#60a5fa' : '#fbbf24'}`,\n              borderRadius: '6px',\n              fontSize: '0.85rem',\n              color: hasDraft ? '#1e3a8a' : '#92400e'\n            }}>\n              <span style={{ fontSize: '1.2rem' }}>{hasDraft ? '' : ''}</span>\n              <span>\n                <strong>{nodes.length}</strong> uzl, <strong>{edges.length}</strong> vztah\n                <br/>\n                <span style={{ fontSize: '0.75rem', opacity: 0.8 }}>\n                  {hasDraft ? 'Nacteno z auto-draftu' : 'Neulozeno (auto-draft)'}\n                </span>\n              </span>\n            </div>\n            )}\n          </div>\n          <HeaderActions>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', minWidth: '320px' }}>\n            <label style={{ fontSize: '0.85rem', fontWeight: 600, color: '#6b7280', whiteSpace: 'nowrap' }}>\n              Profil:\n            </label>\n            <ProfileSelectWrapper>\n              <ProfileSelect\n                value={currentProfile?.id || ''}\n                onChange={(e) => handleProfileChange(e.target.value)}\n              >\n                {profiles.map(profile => (\n                  <option key={profile.id} value={profile.id}>\n                    {profile.name}\n                    {profile.isActive ? ' ' : ' '}\n                    {profile.relationshipsCount > 0 ? ` (${profile.relationshipsCount})` : ''}\n                  </option>\n                ))}\n              </ProfileSelect>\n              <ProfileSelectArrow></ProfileSelectArrow>\n              <ProfileDeleteButton\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleToggleProfileActive();\n                }}\n                disabled={!currentProfile}\n                title={currentProfile?.isActive ? 'Deaktivovat profil (skryje se v AppSettings)' : 'Aktivovat profil (zobraz se v AppSettings)'}\n                style={{ \n                  background: currentProfile?.isActive ? '#10b981' : '#6b7280',\n                  marginRight: '4px',\n                  fontSize: '0.85rem',\n                  padding: '4px 8px'\n                }}\n              >\n                {currentProfile?.isActive ? '' : ''}\n              </ProfileDeleteButton>\n              <ProfileDeleteButton\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDeleteProfile();\n                }}\n                disabled={!currentProfile || profiles.length <= 1}\n                title={profiles.length <= 1 ? 'Nelze smazat posledn profil' : 'Smazat aktuln profil'}\n              >\n                \n              </ProfileDeleteButton>\n            </ProfileSelectWrapper>\n          </div>\n          <Button onClick={handleAutoGenerateHierarchy} disabled={loading || allUsers.length === 0}>\n            <span style={{ fontSize: '1.1rem', marginRight: '4px' }}></span>\n            AI Asistent\n          </Button>\n          <Button \n            onClick={() => {\n              if (nodes.length > 0) {\n                const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(nodes, edges, 'TB');\n                setNodes(layoutedNodes);\n                setEdges(layoutedEdges);\n                console.log(' Manual layout applied');\n              }\n            }}\n            disabled={nodes.length === 0}\n            title=\"Automaticky prerovnat existujici strukturu\"\n          >\n            <span style={{ fontSize: '1.1rem', marginRight: '4px' }}></span>\n            Perovnat\n          </Button>\n          <Button>\n            <FontAwesomeIcon icon={faEye} />\n            Nhled\n          </Button>\n          <Button primary onClick={() => handleSave()} disabled={loading || (nodes.length === 0 && edges.length === 0)}>\n            <FontAwesomeIcon icon={faSave} />\n            Uloit\n          </Button>\n          <Button onClick={handleSaveAs} disabled={loading || (nodes.length === 0 && edges.length === 0)}>\n            <FontAwesomeIcon icon={faSave} />\n            Uloit jako...\n          </Button>\n          </HeaderActions>\n        </Header>\n\n        <div style={{\n          padding: '8px 16px',\n          background: 'linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)',\n          borderBottom: '2px solid #e0e6ed',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '20px',\n          fontSize: '0.8rem',\n          flexWrap: 'wrap'\n        }}>\n        <span style={{ fontWeight: 700, color: '#475569' }}>Legenda vztah:</span>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '30px', height: '3px', background: '#3b82f6', borderRadius: '2px' }}></div>\n          <span style={{ color: '#1e40af' }}>Uivatel</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '30px', height: '3px', background: '#92400e', borderRadius: '2px' }}></div>\n          <span style={{ color: '#78350f' }}>Lokalita</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '30px', height: '3px', background: '#059669', borderRadius: '2px' }}></div>\n          <span style={{ color: '#065f46' }}>sek</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '30px', height: '3px', background: '#f59e0b', borderRadius: '2px' }}></div>\n          <span style={{ color: '#d97706' }}>Notifikace</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n          <div style={{ width: '30px', height: '3px', background: '#8b5cf6', borderRadius: '2px' }}></div>\n          <span style={{ color: '#6d28d9' }}>Role</span>\n        </div>\n      </div>\n\n      <MainContent>\n        <Sidebar>\n            <SidebarHeader>\n              <SidebarTitle>\n                <FontAwesomeIcon icon={faLayerGroup} />\n                Pehled poloek workflow\n              </SidebarTitle>\n            </SidebarHeader>\n\n            {/* Globln search box - vyhledv ve vech sekcch najednou */}\n            <SearchBox>\n              <SearchIcon>\n                <FontAwesomeIcon icon={faSearch} />\n              </SearchIcon>\n              <SearchInput\n                placeholder=\"Hledat ve vech sekcch...\"\n                value={searchUsers}\n                onChange={(e) => {\n                  const value = e.target.value;\n                  setSearchUsers(value);\n                  setSearchLocations(value);\n                  setSearchDepartments(value);\n                  setSearchTemplates(value);\n                }}\n              />\n              {searchUsers && (\n                <SearchClearButton\n                  onClick={() => {\n                    setSearchUsers('');\n                    setSearchLocations('');\n                    setSearchDepartments('');\n                    setSearchTemplates('');\n                  }}\n                  title=\"Vymazat vyhledvn ve vech sekcch\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </SearchClearButton>\n              )}\n            </SearchBox>\n\n            <SidebarContent>\n              <CollapsibleSection>\n                <SectionHeader \n                  expanded={expandedSections.users}\n                  onClick={() => toggleSection('users')}\n                >\n                  <FontAwesomeIcon icon={expandedSections.users ? faChevronDown : faChevronRight} />\n                  <FontAwesomeIcon icon={faUsers} />\n                  UIVATEL ({filteredUsers.length})\n                  {selectedUsers.size > 0 && (\n                    <span style={{ marginLeft: 'auto', fontSize: '0.8rem', color: '#667eea', fontWeight: 'bold' }}>\n                      {selectedUsers.size} vybrno\n                    </span>\n                  )}\n                </SectionHeader>\n                <SectionContent expanded={expandedSections.users}>\n                  {/* Search box pro uivatele */}\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed' }}>\n                    <SearchBox style={{ margin: 0 }}>\n                      <SearchIcon>\n                        <FontAwesomeIcon icon={faSearch} />\n                      </SearchIcon>\n                      <SearchInput\n                        placeholder=\"Hledat uivatele...\"\n                        value={searchUsers}\n                        onChange={(e) => setSearchUsers(e.target.value)}\n                        style={{ fontSize: '0.85rem', padding: '8px 32px' }}\n                      />\n                      {searchUsers && (\n                        <SearchClearButton\n                          onClick={() => setSearchUsers('')}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </SearchClearButton>\n                      )}\n                    </SearchBox>\n                  </div>\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed', display: 'flex', gap: '8px' }}>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (selectedUsers.size === filteredUsers.length) {\n                          deselectAllUsers();\n                        } else {\n                          selectAllUsers();\n                        }\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '6px 12px',\n                        background: '#f8fafc',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        fontSize: '0.8rem',\n                        fontWeight: '600',\n                        color: '#475569',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = '#e2e8f0'}\n                      onMouseLeave={(e) => e.target.style.background = '#f8fafc'}\n                    >\n                      {selectedUsers.size === filteredUsers.length ? ' Zruit ve' : ' Vybrat ve'}\n                    </button>\n                  </div>\n                  <div>\n                    {filteredUsers.map((user) => (\n                      <UserItem\n                        key={user.id}\n                        draggable\n                        onDragStart={(e) => {\n                          e.dataTransfer.effectAllowed = 'move';\n                          e.dataTransfer.setData('application/reactflow', user.id);\n                          setDraggedItem(user.id);\n                          console.log(' Drag start:', user.id, user.name);\n                        }}\n                        onDragEnd={() => {\n                          setDraggedItem(null);\n                          console.log(' Drag end');\n                        }}\n                        style={{\n                          background: selectedUsers.has(user.id) ? '#ede9fe' : 'white',\n                          borderColor: selectedUsers.has(user.id) ? '#8b5cf6' : '#e0e6ed',\n                          cursor: 'grab'\n                        }}\n                      >\n                                <input\n                                  type=\"checkbox\"\n                                  checked={selectedUsers.has(user.id)}\n                                  onChange={(e) => {\n                                    e.stopPropagation();\n                                    toggleUserSelection(user.id);\n                                  }}\n                                  onClick={(e) => e.stopPropagation()}\n                                  style={{\n                                    width: '18px',\n                                    height: '18px',\n                                    cursor: 'pointer',\n                                    accentColor: '#8b5cf6',\n                                    flexShrink: 0\n                                  }}\n                                />\n                                <UserAvatar>{user.initials}</UserAvatar>\n                                <UserInfo>\n                                  <UserName>{user.name}</UserName>\n                                  <UserMeta>\n                                    {user.position}  {user.location}\n                                  </UserMeta>\n                        </UserInfo>\n                      </UserItem>\n                    ))}\n                  </div>\n                </SectionContent>\n              </CollapsibleSection>\n\n              {/* SEKCE: ROLE */}\n              <CollapsibleSection>\n                <SectionHeader \n                  expanded={expandedSections.roles}\n                  onClick={() => toggleSection('roles')}\n                >\n                  <FontAwesomeIcon icon={expandedSections.roles ? faChevronDown : faChevronRight} />\n                  <FontAwesomeIcon icon={faUserShield} />\n                  ROLE ({filteredRoles.length})\n                </SectionHeader>\n                <SectionContent expanded={expandedSections.roles}>\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed' }}>\n                    <SearchBox style={{ margin: 0 }}>\n                      <SearchIcon>\n                        <FontAwesomeIcon icon={faSearch} />\n                      </SearchIcon>\n                      <SearchInput\n                        placeholder=\"Hledat roli...\"\n                        value={searchRoles}\n                        onChange={(e) => setSearchRoles(e.target.value)}\n                        style={{ fontSize: '0.85rem', padding: '8px 32px' }}\n                      />\n                      {searchRoles && (\n                        <SearchClearButton\n                          onClick={() => setSearchRoles('')}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </SearchClearButton>\n                      )}\n                    </SearchBox>\n                    <button\n                      onClick={() => {\n                        if (selectedRoles.size === filteredRoles.length) {\n                          setSelectedRoles(new Set());\n                        } else {\n                          setSelectedRoles(new Set(filteredRoles.map(r => r.id)));\n                        }\n                      }}\n                      style={{\n                        width: '100%',\n                        marginTop: '8px',\n                        padding: '6px 12px',\n                        background: '#f8fafc',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        fontSize: '0.8rem',\n                        fontWeight: '600',\n                        color: '#475569',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = '#e2e8f0'}\n                      onMouseLeave={(e) => e.target.style.background = '#f8fafc'}\n                    >\n                      {selectedRoles.size === filteredRoles.length ? ' Zruit ve' : ' Vybrat ve'}\n                    </button>\n                  </div>\n                  <div>\n                    {filteredRoles.map((role) => (\n                      <UserItem\n                        key={`role-${role.id}`}\n                        draggable\n                        onDragStart={(e) => {\n                          e.dataTransfer.effectAllowed = 'move';\n                          e.dataTransfer.setData('application/reactflow', `role-${role.id}`);\n                          setDraggedItem(`role-${role.id}`);\n                        }}\n                        onDragEnd={() => setDraggedItem(null)}\n                        style={{\n                          background: selectedRoles.has(role.id) ? '#f5f3ff' : 'white',\n                          borderColor: selectedRoles.has(role.id) ? '#8b5cf6' : '#e0e6ed',\n                          cursor: 'grab'\n                        }}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedRoles.has(role.id)}\n                          onChange={(e) => {\n                            e.stopPropagation();\n                            toggleRoleSelection(role.id);\n                          }}\n                          onClick={(e) => e.stopPropagation()}\n                          style={{\n                            width: '18px',\n                            height: '18px',\n                            cursor: 'pointer',\n                            accentColor: '#8b5cf6',\n                            flexShrink: 0\n                          }}\n                        />\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', flex: 1 }}>\n                          <FontAwesomeIcon icon={faUserShield} style={{ color: '#8b5cf6', fontSize: '1.1rem' }} />\n                          <div style={{ flex: 1 }}>\n                            <div style={{ fontWeight: '600', fontSize: '0.85rem', color: '#6d28d9' }}>\n                              {role.nazev_role}\n                            </div>\n                            <div style={{ fontSize: '0.7rem', color: '#8b5cf6', marginTop: '2px' }}>\n                              {role.userCount || 0} uivatel{role.popis ? `  ${role.popis}` : ''}\n                            </div>\n                          </div>\n                        </div>\n                      </UserItem>\n                    ))}\n                  </div>\n                </SectionContent>\n              </CollapsibleSection>\n\n              <CollapsibleSection>\n                <SectionHeader \n                  expanded={expandedSections.locations}\n                  onClick={() => toggleSection('locations')}\n                >\n                  <FontAwesomeIcon icon={expandedSections.locations ? faChevronDown : faChevronRight} />\n                  <FontAwesomeIcon icon={faMapMarkerAlt} />\n                  LOKALITY ({filteredLocations.length})\n                  {selectedLocations.size > 0 && (\n                    <span style={{ marginLeft: 'auto', fontSize: '0.8rem', color: '#f5576c', fontWeight: 'bold' }}>\n                      {selectedLocations.size} vybrno\n                    </span>\n                  )}\n                </SectionHeader>\n                <SectionContent expanded={expandedSections.locations}>\n                  {/* Search box pro lokality */}\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed' }}>\n                    <SearchBox style={{ margin: 0 }}>\n                      <SearchIcon>\n                        <FontAwesomeIcon icon={faSearch} />\n                      </SearchIcon>\n                      <SearchInput\n                        placeholder=\"Hledat lokalitu...\"\n                        value={searchLocations}\n                        onChange={(e) => setSearchLocations(e.target.value)}\n                        style={{ fontSize: '0.85rem', padding: '8px 32px' }}\n                      />\n                      {searchLocations && (\n                        <SearchClearButton\n                          onClick={() => setSearchLocations('')}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </SearchClearButton>\n                      )}\n                    </SearchBox>\n                  </div>\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed', display: 'flex', gap: '8px' }}>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (selectedLocations.size === filteredLocations.length) {\n                          deselectAllLocations();\n                        } else {\n                          selectAllLocations();\n                        }\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '6px 12px',\n                        background: '#f8fafc',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        fontSize: '0.8rem',\n                        fontWeight: '600',\n                        color: '#475569',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = '#e2e8f0'}\n                      onMouseLeave={(e) => e.target.style.background = '#f8fafc'}\n                    >\n                      {selectedLocations.size === filteredLocations.length ? ' Zruit ve' : ' Vybrat ve'}\n                    </button>\n                  </div>\n                  <div>\n                    {filteredLocations.map((loc) => (\n                      <LocationItem\n                        key={loc.id}\n                        draggable\n                        onDragStart={(e) => {\n                          e.dataTransfer.effectAllowed = 'move';\n                          e.dataTransfer.setData('application/reactflow', `loc-${loc.id}`);\n                          setDraggedItem(`loc-${loc.id}`);\n                          console.log(' Drag start location:', loc.id, loc.name);\n                        }}\n                        onDragEnd={() => {\n                          setDraggedItem(null);\n                          console.log(' Drag end');\n                        }}\n                        style={{\n                          background: selectedLocations.has(loc.id) ? '#fef3c7' : 'white',\n                          borderColor: selectedLocations.has(loc.id) ? '#fbbf24' : '#e0e6ed',\n                          cursor: 'grab'\n                        }}\n                      >\n                                <input\n                                  type=\"checkbox\"\n                                  checked={selectedLocations.has(loc.id)}\n                                  onChange={(e) => {\n                                    e.stopPropagation();\n                                    toggleLocationSelection(loc.id);\n                                  }}\n                                  onClick={(e) => e.stopPropagation()}\n                                  style={{\n                                    width: '18px',\n                                    height: '18px',\n                                    cursor: 'pointer',\n                                    accentColor: '#f59e0b',\n                                    flexShrink: 0\n                                  }}\n                                />\n                                <LocationIcon>\n                                  <FontAwesomeIcon icon={faBuilding} />\n                                </LocationIcon>\n                        <UserInfo>\n                          <UserName>{loc.name}</UserName>\n                          <UserMeta>{loc.userCount} uivatel  {loc.code}</UserMeta>\n                        </UserInfo>\n                      </LocationItem>\n                    ))}\n                  </div>\n                </SectionContent>\n              </CollapsibleSection>\n\n              <CollapsibleSection>\n                <SectionHeader \n                  expanded={expandedSections.departments}\n                  onClick={() => toggleSection('departments')}\n                >\n                  <FontAwesomeIcon icon={expandedSections.departments ? faChevronDown : faChevronRight} />\n                  <FontAwesomeIcon icon={faUserTie} />\n                  SEKY ({filteredDepartments.length})\n                  {selectedDepartments.size > 0 && (\n                    <span style={{ marginLeft: 'auto', fontSize: '0.8rem', color: '#00f2fe', fontWeight: 'bold' }}>\n                      {selectedDepartments.size} vybrno\n                    </span>\n                  )}\n                </SectionHeader>\n                <SectionContent expanded={expandedSections.departments}>\n                  {/* Search box pro tvary */}\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed' }}>\n                    <SearchBox style={{ margin: 0 }}>\n                      <SearchIcon>\n                        <FontAwesomeIcon icon={faSearch} />\n                      </SearchIcon>\n                      <SearchInput\n                        placeholder=\"Hledat tvar...\"\n                        value={searchDepartments}\n                        onChange={(e) => setSearchDepartments(e.target.value)}\n                        style={{ fontSize: '0.85rem', padding: '8px 32px' }}\n                      />\n                      {searchDepartments && (\n                        <SearchClearButton\n                          onClick={() => setSearchDepartments('')}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </SearchClearButton>\n                      )}\n                    </SearchBox>\n                  </div>\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed', display: 'flex', gap: '8px' }}>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (selectedDepartments.size === filteredDepartments.length) {\n                          deselectAllDepartments();\n                        } else {\n                          selectAllDepartments();\n                        }\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '6px 12px',\n                        background: '#f8fafc',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        fontSize: '0.8rem',\n                        fontWeight: '600',\n                        color: '#475569',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = '#e2e8f0'}\n                      onMouseLeave={(e) => e.target.style.background = '#f8fafc'}\n                    >\n                      {selectedDepartments.size === filteredDepartments.length ? ' Zruit ve' : ' Vybrat ve'}\n                    </button>\n                  </div>\n                  <div>\n                    {filteredDepartments.map((dept) => (\n                      <LocationItem\n                        key={dept.id}\n                        draggable\n                        onDragStart={(e) => {\n                          e.dataTransfer.effectAllowed = 'move';\n                          e.dataTransfer.setData('application/reactflow', `dept-${dept.id}`);\n                          setDraggedItem(`dept-${dept.id}`);\n                          console.log(' Drag start department:', dept.id, dept.name);\n                        }}\n                        onDragEnd={() => {\n                          setDraggedItem(null);\n                          console.log(' Drag end');\n                        }}\n                        style={{\n                          background: selectedDepartments.has(dept.id) ? '#dbeafe' : 'white',\n                          borderColor: selectedDepartments.has(dept.id) ? '#60a5fa' : '#e0e6ed',\n                          cursor: 'grab'\n                        }}\n                      >\n                                <input\n                                  type=\"checkbox\"\n                                  checked={selectedDepartments.has(dept.id)}\n                                  onChange={(e) => {\n                                    e.stopPropagation();\n                                    toggleDepartmentSelection(dept.id);\n                                  }}\n                                  onClick={(e) => e.stopPropagation()}\n                                  style={{\n                                    width: '18px',\n                                    height: '18px',\n                                    cursor: 'pointer',\n                                    accentColor: '#3b82f6',\n                                    flexShrink: 0\n                                  }}\n                                />\n                                <DepartmentIcon>\n                                  <FontAwesomeIcon icon={faUserTie} />\n                                </DepartmentIcon>\n                        <UserInfo>\n                          <UserName>{dept.name}</UserName>\n                          <UserMeta>{dept.userCount} uivatel  {dept.code}</UserMeta>\n                        </UserInfo>\n                      </LocationItem>\n                    ))}\n                  </div>\n                </SectionContent>\n              </CollapsibleSection>\n\n              {/* NOTIFIKAN ABLONY - Nov sekce */}\n              <CollapsibleSection>\n                <SectionHeader\n                  expanded={expandedSections.notificationTemplates}\n                  onClick={() => toggleSection('notificationTemplates')}\n                >\n                  <FontAwesomeIcon icon={expandedSections.notificationTemplates ? faChevronDown : faChevronRight} />\n                  <FontAwesomeIcon icon={faBell} />\n                  NOTIFIKAN ABLONY ({filteredNotificationTemplates.length})\n                  {selectedNotificationTemplates.size > 0 && (\n                    <span style={{ marginLeft: 'auto', fontSize: '0.8rem', color: '#f59e0b', fontWeight: 'bold' }}>\n                      {selectedNotificationTemplates.size} vybrno\n                    </span>\n                  )}\n                </SectionHeader>\n                <SectionContent expanded={expandedSections.notificationTemplates}>\n                  {/* Search box pro notifikan ablony */}\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed' }}>\n                    <SearchBox style={{ margin: 0 }}>\n                      <SearchIcon>\n                        <FontAwesomeIcon icon={faSearch} />\n                      </SearchIcon>\n                      <SearchInput\n                        placeholder=\"Hledat ablonu...\"\n                        value={searchTemplates}\n                        onChange={(e) => setSearchTemplates(e.target.value)}\n                        style={{ fontSize: '0.85rem', padding: '8px 32px' }}\n                      />\n                      {searchTemplates && (\n                        <SearchClearButton\n                          onClick={() => setSearchTemplates('')}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </SearchClearButton>\n                      )}\n                    </SearchBox>\n                  </div>\n                  <div style={{ padding: '8px 12px', borderBottom: '1px solid #e0e6ed', display: 'flex', gap: '8px' }}>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        if (selectedNotificationTemplates.size === filteredNotificationTemplates.length) {\n                          deselectAllNotificationTemplates();\n                        } else {\n                          selectAllNotificationTemplates();\n                        }\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '6px 12px',\n                        background: '#f8fafc',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        fontSize: '0.8rem',\n                        fontWeight: '600',\n                        color: '#475569',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = '#e2e8f0'}\n                      onMouseLeave={(e) => e.target.style.background = '#f8fafc'}\n                    >\n                      {selectedNotificationTemplates.size === filteredNotificationTemplates.length ? ' Zruit ve' : ' Vybrat ve'}\n                    </button>\n                  </div>\n                  <div>\n                    {filteredNotificationTemplates.map((template) => (\n                      <div\n                        key={template.id}\n                        draggable\n                        onDragStart={(e) => {\n                          e.dataTransfer.effectAllowed = 'move';\n                          e.dataTransfer.setData('application/reactflow', `notif-${template.id}`);\n                          setDraggedItem(`notif-${template.id}`);\n                          console.log(' Drag start notification template:', template.id, template.nazev || template.name);\n                        }}\n                        onDragEnd={() => {\n                          setDraggedItem(null);\n                          console.log(' Drag end');\n                        }}\n                        style={{\n                          padding: '12px',\n                          borderBottom: '1px solid #e0e6ed',\n                          display: 'flex',\n                          alignItems: 'flex-start',\n                          gap: '10px',\n                          cursor: 'grab',\n                          background: selectedNotificationTemplates.has(template.id) ? '#fef3c7' : 'white',\n                          transition: 'all 0.2s'\n                        }}\n                        onClick={() => toggleNotificationTemplateSelection(template.id)}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedNotificationTemplates.has(template.id)}\n                          onChange={() => toggleNotificationTemplateSelection(template.id)}\n                          onClick={(e) => e.stopPropagation()}\n                          style={{\n                            width: '18px',\n                            height: '18px',\n                            cursor: 'pointer',\n                            accentColor: '#f59e0b',\n                            flexShrink: 0,\n                            marginTop: '2px'\n                          }}\n                        />\n                        <div style={{\n                          width: '36px',\n                          height: '36px',\n                          borderRadius: '8px',\n                          background: 'linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)',\n                          color: '#fff',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          fontSize: '1rem',\n                          flexShrink: 0,\n                          boxShadow: '0 2px 8px rgba(245, 158, 11, 0.3)'\n                        }}>\n                          <FontAwesomeIcon icon={faBell} />\n                        </div>\n                        <div style={{ flex: 1 }}>\n                          <div style={{ \n                            fontWeight: '600', \n                            color: '#2c3e50', \n                            fontSize: '0.9rem',\n                            marginBottom: '4px'\n                          }}>\n                            {template.nazev || template.name}\n                          </div>\n                          <div style={{ \n                            fontSize: '0.75rem', \n                            color: '#64748b',\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: '8px'\n                          }}>\n                            <code style={{ \n                              background: '#f1f5f9', \n                              padding: '2px 6px', \n                              borderRadius: '4px',\n                              fontSize: '0.7rem'\n                            }}>\n                              {template.typ || template.type}\n                            </code>\n                            {template.email?.sendByDefault && (\n                              <span style={{ color: '#3b82f6' }}>\n                                <FontAwesomeIcon icon={faEnvelope} /> Email\n                              </span>\n                            )}\n                            <span style={{ \n                              color: template.priorityDefault === 'urgent' ? '#dc2626' : \n                                     template.priorityDefault === 'high' ? '#f59e0b' : '#64748b',\n                              fontWeight: '600'\n                            }}>\n                              {template.priorityDefault}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </SectionContent>\n              </CollapsibleSection>\n            </SidebarContent>\n\n            {/* Akn tlatka - Pidat vybran (nad fixn patikou) */}\n            {(selectedUsers.size > 0 || selectedLocations.size > 0 || selectedDepartments.size > 0 || selectedNotificationTemplates.size > 0) && (\n              <div style={{\n                position: 'absolute',\n                bottom: '66px',\n                left: 0,\n                right: 0,\n                padding: '16px',\n                borderTop: '2px solid #e0e6ed',\n                background: 'linear-gradient(180deg, #f8fafc 0%, white 100%)',\n                boxShadow: '0 -4px 12px rgba(0,0,0,0.05)',\n                zIndex: 9\n              }}>\n                <button\n                  onClick={addSelectedToCanvas}\n                    style={{\n                      width: '100%',\n                      padding: '12px 16px',\n                      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '8px',\n                      cursor: 'pointer',\n                      fontSize: '0.95rem',\n                      fontWeight: '700',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: '10px',\n                      boxShadow: '0 4px 12px rgba(102, 126, 234, 0.4)',\n                      transition: 'all 0.2s'\n                    }}\n                    onMouseEnter={(e) => {\n                      e.target.style.transform = 'translateY(-2px)';\n                      e.target.style.boxShadow = '0 6px 16px rgba(102, 126, 234, 0.5)';\n                    }}\n                    onMouseLeave={(e) => {\n                      e.target.style.transform = 'translateY(0)';\n                      e.target.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.4)';\n                    }}\n                  >\n                    <FontAwesomeIcon icon={faPlus} />\n                  <span>\n                    Pidat vybran ({selectedUsers.size + selectedLocations.size + selectedDepartments.size + selectedNotificationTemplates.size})\n                  </span>\n                </button>\n                <div style={{\n                  marginTop: '8px',\n                  fontSize: '0.75rem',\n                  color: '#64748b',\n                  textAlign: 'center'\n                }}>\n                  {selectedUsers.size > 0 && `${selectedUsers.size} uivatel`}\n                  {selectedUsers.size > 0 && (selectedLocations.size > 0 || selectedDepartments.size > 0 || selectedNotificationTemplates.size > 0) && '  '}\n                  {selectedLocations.size > 0 && `${selectedLocations.size} lokalit`}\n                  {selectedLocations.size > 0 && (selectedDepartments.size > 0 || selectedNotificationTemplates.size > 0) && '  '}\n                  {selectedDepartments.size > 0 && `${selectedDepartments.size} tvar`}\n                  {selectedDepartments.size > 0 && selectedNotificationTemplates.size > 0 && '  '}\n                  {selectedNotificationTemplates.size > 0 && `${selectedNotificationTemplates.size} ablon`}\n                </div>\n              </div>\n            )}\n\n            {/* Fixn patika - Reset plochy (vdy viditeln) */}\n            <div style={{\n              position: 'absolute',\n              bottom: 0,\n              left: 0,\n              right: 0,\n              padding: '12px 16px',\n              background: 'white',\n              borderTop: '2px solid #e0e6ed',\n              boxShadow: '0 -4px 12px rgba(0,0,0,0.05)',\n              zIndex: 10\n            }}>\n              <button\n                onClick={() => {\n                  setConfirmDialog({\n                    isOpen: true,\n                    title: 'Resetovat plochu',\n                    message: 'Opravdu chcete smazat celou plochu a zat znovu od zatku? Tato akce je nevratn.',\n                    onConfirm: () => {\n                      setNodes([]);\n                      setEdges([]);\n                      localStorage.removeItem('hierarchy_draft_nodes');\n                      localStorage.removeItem('hierarchy_draft_edges');\n                      localStorage.removeItem('hierarchy_draft_timestamp');\n                      setHasDraft(false);\n                      setConfirmDialog({ isOpen: false, title: '', message: '', onConfirm: null });\n                    }\n                  });\n                }}\n                disabled={nodes.length === 0}\n                style={{\n                  width: '100%',\n                  padding: '10px 16px',\n                  background: nodes.length === 0 ? '#f1f5f9' : 'white',\n                  color: nodes.length === 0 ? '#94a3b8' : '#dc2626',\n                  border: `2px solid ${nodes.length === 0 ? '#e2e8f0' : '#fecaca'}`,\n                  borderRadius: '8px',\n                  cursor: nodes.length === 0 ? 'not-allowed' : 'pointer',\n                  fontSize: '0.9rem',\n                  fontWeight: '600',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '8px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseEnter={(e) => {\n                  if (nodes.length > 0) {\n                    e.target.style.background = '#fef2f2';\n                    e.target.style.borderColor = '#dc2626';\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  if (nodes.length > 0) {\n                    e.target.style.background = 'white';\n                    e.target.style.borderColor = '#fecaca';\n                  }\n                }}\n              >\n                <FontAwesomeIcon icon={faTrash} />\n                <span>Resetovat plochu</span>\n              </button>\n            </div>\n          </Sidebar>\n\n          <CanvasArea\n            onDrop={onReactFlowDrop}\n            onDragOver={onReactFlowDragOver}\n            className={isShiftPressed ? 'selection-mode' : ''}\n          >\n            <ReactFlow\n              nodes={nodes}\n              edges={edges}\n              onNodesChange={onNodesChange}\n              onEdgesChange={onEdgesChange}\n              onConnect={onConnect}\n              onNodeClick={onNodeClick}\n              onEdgeClick={onEdgeClick}\n              onNodeDragStop={onNodeDragStop}\n              onInit={(instance) => {\n                setReactFlowInstance(instance);\n                //  Fit view hned po inicializaci (oprav zobrazen po F5)\n                setTimeout(() => {\n                  instance.fitView({ padding: 0.2, duration: 800 });\n                  console.log(' ReactFlow fitted on init');\n                }, 100);\n              }}\n              nodeTypes={nodeTypes}\n              edgeTypes={edgeTypes}\n              fitView\n              attributionPosition=\"bottom-left\"\n              selectionOnDrag\n              panOnDrag\n              panOnScroll={true}\n              zoomOnScroll={true}\n              zoomOnDoubleClick={false}\n              selectionMode=\"partial\"\n              selectionKeyCode=\"Shift\"\n              multiSelectionKeyCode=\"Control\"\n              selectNodesOnDrag={false}\n              onSelectionChange={(params) => {\n                const selectedNodesCount = params.nodes.length;\n                const selectedEdgesCount = params.edges.length;\n                const totalSelected = selectedNodesCount + selectedEdgesCount;\n                \n                // Zobrazit detail panel jen kdy je vybrn prv 1 prvek\n                if (totalSelected === 1) {\n                  if (selectedNodesCount === 1) {\n                    setSelectedNode(params.nodes[0]);\n                    setSelectedEdge(null);\n                    setShowDetailPanel(true);\n                  } else if (selectedEdgesCount === 1) {\n                    setSelectedEdge(params.edges[0]);\n                    setSelectedNode(null);\n                    setShowDetailPanel(true);\n                  }\n                } else if (totalSelected > 1) {\n                  // Multi-select - skrt panel\n                  setShowDetailPanel(false);\n                  setSelectedNode(null);\n                  setSelectedEdge(null);\n                } else {\n                  // Nic nen vybrno\n                  setShowDetailPanel(false);\n                  setSelectedNode(null);\n                  setSelectedEdge(null);\n                }\n              }}\n            >\n                    <Background color=\"#cbd5e1\" gap={20} size={1} />\n                    <Controls />\n                    <MiniMap \n                      nodeColor={(node) => {\n                        if (node.data?.type === 'template') return '#f59e0b'; // Oranov pro ablony\n                        if (node.data?.type === 'location') return '#92400e'; // Tmav hnd pro lokality\n                        if (node.data?.type === 'department') return '#059669'; // Tmav zelen pro tvary\n                        return '#3b82f6'; // Modr pro uivatele\n                      }}\n                      maskColor=\"rgba(245, 247, 250, 0.8)\"\n                      pannable={true}\n                      zoomable={true}\n                      style={{\n                        background: 'white',\n                        border: '1px solid #e0e6ed',\n                        borderRadius: '8px',\n                        cursor: 'pointer'\n                      }}\n                    />\n                    {showHelp ? (\n                      <Panel position=\"top-left\" style={{\n                        background: 'white',\n                        borderRadius: '12px',\n                        border: '1px solid #e0e6ed',\n                        boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n                        padding: '16px',\n                        width: '360px',\n                        maxHeight: 'calc(100vh - 120px)',\n                        display: 'flex',\n                        flexDirection: 'column'\n                      }}>\n                        <div style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'space-between',\n                          marginBottom: '12px',\n                          paddingBottom: '10px',\n                          borderBottom: '1px solid #e0e6ed'\n                        }}>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            <span style={{ fontSize: '1.4rem' }}></span>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.95rem' }}>Npovda</strong>\n                          </div>\n                          <button\n                            onClick={() => {\n                              setShowHelp(false);\n                              localStorage.setItem('hierarchy_help_collapsed', 'true');\n                            }}\n                            style={{\n                              background: 'transparent',\n                              border: 'none',\n                              cursor: 'pointer',\n                              fontSize: '1.3rem',\n                              color: '#94a3b8',\n                              padding: '4px 8px',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              borderRadius: '6px',\n                              transition: 'all 0.2s'\n                            }}\n                            onMouseEnter={(e) => {\n                              e.currentTarget.style.background = '#f1f5f9';\n                              e.currentTarget.style.color = '#64748b';\n                            }}\n                            onMouseLeave={(e) => {\n                              e.currentTarget.style.background = 'transparent';\n                              e.currentTarget.style.color = '#94a3b8';\n                            }}\n                            title=\"Skrt npovdu\"\n                          >\n                            \n                          </button>\n                        </div>\n                        <div style={{\n                          overflowY: 'auto',\n                          overflowX: 'hidden',\n                          color: '#64748b',\n                          fontSize: '0.82rem',\n                          lineHeight: '1.5',\n                          paddingRight: '8px'\n                        }}>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              1. Ovldn pltna:\n                            </strong>\n                             <strong>Posun:</strong> Thnte my (bez klvesy)<br/>\n                             <strong>SHIFT + taen:</strong> Vbr vce nod najednou<br/>\n                             <strong>CTRL + klik:</strong> Pidat/odebrat node do vbru\n                          </div>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              2. Pidejte uivatele:\n                            </strong>\n                             Pethnte z levho panelu<br/>\n                             Nebo pouijte  AI Struktura\n                          </div>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              3. Vytvote vztah (ipku):\n                            </strong>\n                             Najdte  zelen krouek DOLE u nadzenho<br/>\n                             Drte a thnte my<br/>\n                             Puste na  modr krouek NAHOE u podzenho\n                          </div>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              4. Perovnn:\n                            </strong>\n                             Tlacitko  Prerovnat = automaticky layout<br/>\n                             Nebo petahujte uzly run\n                          </div>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#2c3e50', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              5. Detail vztahu:\n                            </strong>\n                             Kliknte na ipku  oteve se prav panel<br/>\n                             Nastavte prva a lokality\n                          </div>\n                          <div style={{ marginBottom: '12px' }}>\n                            <strong style={{ color: '#f5576c', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                              6. Ulozeni:\n                            </strong>\n                             Tlatko \"Uloit do DB\" vpravo nahoe\n                          </div>\n                          <div style={{ padding: '10px', background: '#f0fdf4', borderRadius: '8px', border: '1px solid #86efac' }}>\n                            <strong style={{ color: '#10b981', fontSize: '0.85rem', display: 'block', marginBottom: '4px' }}>\n                               Auto-save:\n                            </strong>\n                            <span style={{ fontSize: '0.8rem' }}>\n                              Pozice uzlu se ukladaji automaticky do localStorage a obnovi se po refreshi. Draft se vymaze po ulozeni do DB.\n                            </span>\n                          </div>\n                        </div>\n                      </Panel>\n                    ) : (\n                      <Panel position=\"top-left\" style={{\n                        background: 'white',\n                        borderRadius: '12px',\n                        border: '1px solid #e0e6ed',\n                        boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n                        width: '52px',\n                        height: '52px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        cursor: 'pointer',\n                        transition: 'all 0.2s'\n                      }}\n                      onClick={() => {\n                        setShowHelp(true);\n                        localStorage.setItem('hierarchy_help_collapsed', 'false');\n                      }}>\n                        <span \n                          style={{ fontSize: '1.7rem', transition: 'transform 0.2s' }}\n                          onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.2)'}\n                          onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\n                          title=\"Zobrazit npovdu\"\n                        >\n                          \n                        </span>\n                      </Panel>\n                    )}\n            </ReactFlow>\n          </CanvasArea>\n\n        {showDetailPanel && (selectedNode || selectedEdge) && (\n          <DetailPanel>\n            <DetailHeader>\n              <DetailHeaderTitle>\n                <FontAwesomeIcon icon={faEdit} />\n                {selectedNode ? 'Detail uzlu' : 'Detail vztahu'}\n              </DetailHeaderTitle>\n              <InfoButton onClick={() => setShowDetailHelpModal(true)}>\n                <FontAwesomeIcon icon={faInfoCircle} />\n              </InfoButton>\n              <CloseButton onClick={() => {\n                setShowDetailPanel(false);\n                setSelectedNode(null);\n                setSelectedEdge(null);\n                setNodes((nds) =>\n                  nds.map((n) => ({\n                    ...n,\n                    data: { ...n.data, isSelected: false }\n                  }))\n                );\n              }}>\n                <FontAwesomeIcon icon={faTimes} />\n              </CloseButton>\n            </DetailHeader>\n\n            <DetailContent>\n              <DetailSection>\n                <DetailSectionTitle>\n                  <FontAwesomeIcon icon={faUserTie} />\n                  Zkladn informace\n                </DetailSectionTitle>\n                \n                {/* NOTIFIKAN ABLONA */}\n                {selectedNode && selectedNode.data.type === 'template' && (\n                  <>\n                    <FormGroup>\n                      <Label>Nzev ablony</Label>\n                      <Input value={selectedNode.data.label || selectedNode.data.name} readOnly />\n                    </FormGroup>\n                    \n                    {/* INFO BOX - JAK FUNGUJE NOV SYSTM */}\n                    <div style={{\n                      padding: '14px',\n                      background: 'linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%)',\n                      border: '2px solid #3b82f6',\n                      borderRadius: '8px',\n                      marginBottom: '16px'\n                    }}>\n                      <div style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#1e40af', marginBottom: '8px' }}>\n                         Jak funguje nov notifikan systm\n                      </div>\n                      <div style={{ fontSize: '0.8rem', color: '#1e3a8a', lineHeight: '1.6' }}>\n                        <strong>1 ablona obsahuje text a design emailu</strong><br/>\n                        <strong>2 Propojte ablonu se ipkou na pjemce:</strong>\n                        <ul style={{ margin: '4px 0 4px 20px', padding: 0 }}>\n                          <li><strong> Konkrtn uivatel</strong> - nap. Jan Novk</li>\n                          <li><strong> Role</strong> - nap. vichni s rol \"Schvalovatel\"</li>\n                          <li><strong> Dynamick pjemce</strong> - nap. Spout akce, Objednatel, Pkazce</li>\n                        </ul>\n                        <strong>3 Na ipce nastavte:</strong>\n                        <ul style={{ margin: '4px 0 4px 20px', padding: 0 }}>\n                          <li><strong>Scope Filter</strong> - koho zahrnout (vichni/jen astnci entity...)</li>\n                          <li><strong>Event Types</strong> - kdy poslat (ORDER_SENT_FOR_APPROVAL...)</li>\n                        </ul>\n                        <div style={{ \n                          marginTop: '8px', \n                          paddingTop: '8px', \n                          borderTop: '1px solid #93c5fd',\n                          fontStyle: 'italic',\n                          fontSize: '0.75rem'\n                        }}>\n                           <strong>Tip:</strong> Kliknte na <strong>ipku</strong> pro nastaven routingu, nebo skrolujte dol pro pehled vech pipojench pjemc\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* NASTAVEN HTML ABLON PRO NORMLN A MIMODN STAV */}\n                    {(() => {\n                      const template = allNotificationTemplates.find(t => t.id === selectedNode.data.templateId);\n                      if (!template) return null;\n                      \n                      // Parser vech variant z email_body podle <!-- RECIPIENT: TYPE -->\n                      //  FZE 1 UPGRADE - Podporuje RECIPIENT i APPROVER_NORMAL\n                      const parseAllVariants = (emailBody) => {\n                        if (!emailBody) return [];\n                        \n                        const variants = [];\n                        \n                        // Definice vech monch variant\n                        const variantTypes = [\n                          //  NOV FORMT (Fze 1: order_status_schvalena, zamitnuta, ceka_se)\n                          { type: 'RECIPIENT', icon: '', name: 'Pjemce (oranov - normln)' },\n                          \n                          //  STAR FORMT (order_status_ke_schvaleni)\n                          { type: 'APPROVER_NORMAL', icon: '', name: 'Schvalovatel (oranov - normln)' },\n                          { type: 'APPROVER_URGENT', icon: '', name: 'Schvalovatel (erven - urgentn)' },\n                          \n                          //  SPOLEN VARIANTA (info/submitter)\n                          { type: 'SUBMITTER', icon: '', name: 'Autor objednvky (zelen - info)' }\n                        ];\n                        \n                        variantTypes.forEach(variantDef => {\n                          const marker = `<!-- RECIPIENT: ${variantDef.type} -->`;\n                          if (emailBody.includes(marker)) {\n                            variants.push({\n                              type: variantDef.type,\n                              icon: variantDef.icon,\n                              name: variantDef.name\n                            });\n                          }\n                        });\n                        \n                        return variants;\n                      };\n                      \n                      const availableVariants = parseAllVariants(template.email_telo || template.email_body);\n                      \n                      // Uren vchozch hodnot\n                      const defaultVariant = availableVariants.length > 0 ? availableVariants[0].type : '';\n                      \n                      if (availableVariants.length === 0) {\n                        return (\n                          <div style={{\n                            padding: '12px',\n                            background: '#fef2f2',\n                            border: '1px solid #fecaca',\n                            borderRadius: '6px',\n                            color: '#991b1b',\n                            fontSize: '0.85rem'\n                          }}>\n                             <strong>Varovn:</strong> Email ablona neobsahuje dn varianty\n                          </div>\n                        );\n                      }\n                      \n                      return (\n                        <>\n                          {/* VBR HTML ABLONY PRO NORMLN STAV */}\n                          <FormGroup>\n                            <Label>\n                               Barva emailu pro BN ppady\n                              <span style={{ color: '#f59e0b', marginLeft: '4px' }}>*</span>\n                            </Label>\n                            <select\n                              value={templateNormalVariant || defaultVariant}\n                              onChange={(e) => setTemplateNormalVariant(e.target.value)}\n                              style={{\n                                width: '100%',\n                                padding: '10px 12px',\n                                border: '2px solid #e0e6ed',\n                                borderRadius: '6px',\n                                fontSize: '0.9rem',\n                                background: 'white',\n                                cursor: 'pointer',\n                                fontWeight: '500'\n                              }}\n                            >\n                              {availableVariants.map(variant => (\n                                <option key={variant.type} value={variant.type}>\n                                  {variant.icon} {variant.name}\n                                </option>\n                              ))}\n                            </select>\n                            <div style={{ \n                              fontSize: '0.75rem', \n                              color: '#64748b', \n                              marginTop: '4px',\n                              lineHeight: '1.4'\n                            }}>\n                               Bn ppady = standardn schvalovn, zmna stavu apod.<br/>\n                              Doporueno: <strong> oranov</strong> varianta\n                            </div>\n                          </FormGroup>\n                          \n                          {/* VBR HTML ABLONY PRO MIMODN STAV */}\n                          <FormGroup>\n                            <Label>\n                               Barva emailu pro URGENTN ppady\n                              <span style={{ color: '#f59e0b', marginLeft: '4px' }}>*</span>\n                            </Label>\n                            <select\n                              value={templateUrgentVariant || defaultVariant}\n                              onChange={(e) => setTemplateUrgentVariant(e.target.value)}\n                              style={{\n                                width: '100%',\n                                padding: '10px 12px',\n                                border: '2px solid #e0e6ed',\n                                borderRadius: '6px',\n                                fontSize: '0.9rem',\n                                background: 'white',\n                                cursor: 'pointer',\n                                fontWeight: '500'\n                              }}\n                            >\n                              {availableVariants.map(variant => (\n                                <option key={variant.type} value={variant.type}>\n                                  {variant.icon} {variant.name}\n                                </option>\n                              ))}\n                            </select>\n                            <div style={{ \n                              fontSize: '0.75rem', \n                              color: '#64748b', \n                              marginTop: '4px',\n                              lineHeight: '1.4'\n                            }}>\n                               Urgentn ppady = kritick schvalovn, upozornn na problm apod.<br/>\n                              Doporueno: <strong> erven</strong> varianta\n                            </div>\n                          </FormGroup>\n                          \n                          {/* VBR HTML ABLONY PRO INFORMAN OZNMEN */}\n                          <FormGroup>\n                            <Label>\n                               Barva emailu pro INFORMAN zprvy\n                              <span style={{ color: '#f59e0b', marginLeft: '4px' }}>*</span>\n                            </Label>\n                            <select\n                              value={templateInfoVariant || defaultVariant}\n                              onChange={(e) => setTemplateInfoVariant(e.target.value)}\n                              style={{\n                                width: '100%',\n                                padding: '10px 12px',\n                                border: '2px solid #e0e6ed',\n                                borderRadius: '6px',\n                                fontSize: '0.9rem',\n                                background: 'white',\n                                cursor: 'pointer',\n                                fontWeight: '500'\n                              }}\n                            >\n                              {availableVariants.map(variant => (\n                                <option key={variant.type} value={variant.type}>\n                                  {variant.icon} {variant.name}\n                                </option>\n                              ))}\n                            </select>\n                            <div style={{ \n                              fontSize: '0.75rem', \n                              color: '#64748b', \n                              marginTop: '4px',\n                              lineHeight: '1.4'\n                            }}>\n                               Informan zprvy = potvrzen dokonen, FYI, \"jen pro vdom\" apod.<br/>\n                              Doporueno: <strong> zelen</strong> varianta\n                            </div>\n                          </FormGroup>\n                          \n                          {/* INFO BOX */}\n                          <div style={{\n                            padding: '12px',\n                            background: '#f0fdf4',\n                            border: '2px solid #10b981',\n                            borderRadius: '6px',\n                            fontSize: '0.8rem',\n                            color: '#065f46',\n                            marginTop: '8px'\n                          }}>\n                            <strong> Jak barvy email funguj:</strong>\n                            <ul style={{ margin: '6px 0 0 0', paddingLeft: '18px', lineHeight: '1.6' }}>\n                              <li><strong>ablona = obsah emailu</strong> (text, placeholdery, design)</li>\n                              <li><strong>Barva = priorita/nlada</strong> emailu ( normln,  urgentn,  info)</li>\n                              <li><strong>Backend automaticky vybere barvu</strong> podle typu udlosti a pjemce</li>\n                              <li><strong>Pjemce urte ipkou</strong> - propojte ablonu s uivatelem/rol/Generic Recipient</li>\n                            </ul>\n                          </div>\n                          \n                          {/* VBR PRO NHLED */}\n                          <FormGroup style={{ marginTop: '16px' }}>\n                            <Label>\n                              Varianta pro nhled ne\n                            </Label>\n                            <select\n                              value={templatePreviewVariant || templateNormalVariant || defaultVariant}\n                              onChange={(e) => setTemplatePreviewVariant(e.target.value)}\n                              style={{\n                                width: '100%',\n                                padding: '10px 12px',\n                                border: '2px solid #cbd5e1',\n                                borderRadius: '6px',\n                                fontSize: '0.85rem',\n                                background: '#f8fafc',\n                                cursor: 'pointer'\n                              }}\n                            >\n                              {availableVariants.map(variant => (\n                                <option key={variant.type} value={variant.type}>\n                                  {variant.icon} {variant.name}\n                                </option>\n                              ))}\n                            </select>\n                            <div style={{ \n                              fontSize: '0.7rem', \n                              color: '#64748b', \n                              marginTop: '4px',\n                              fontStyle: 'italic'\n                            }}>\n                               Toto ovld pouze nhled emailu ne (nem vliv na odesln)\n                            </div>\n                          </FormGroup>\n                        </>\n                      );\n                    })()}\n                    \n                    {/* EVENT TYPES PRO TEMPLATE */}\n                    <FormGroup style={{ marginTop: '16px' }}>\n                      <Label>\n                        Event Types (kdy se ablona pouije)\n                        <span style={{ color: '#10b981', marginLeft: '4px', fontWeight: 'normal' }}>voliteln</span>\n                      </Label>\n                      <CustomSelect\n                        multiple\n                        value={templateEventTypes}\n                        onChange={(value) => setTemplateEventTypes(value)}\n                        options={(notificationEventTypes || []).map(eventType => ({\n                          id: eventType.kod || eventType.code,\n                          value: eventType.kod || eventType.code,\n                          label: `${eventType.nazev || eventType.name} (${eventType.kod || eventType.code})`\n                        }))}\n                        placeholder=\"Vyberte event types...\"\n                        field=\"templateEventTypes\"\n                        selectStates={selectStates}\n                        setSelectStates={setSelectStates}\n                        searchStates={searchStates}\n                        setSearchStates={setSearchStates}\n                        touchedSelectFields={touchedSelectFields}\n                        setTouchedSelectFields={setTouchedSelectFields}\n                        toggleSelect={toggleSelect}\n                        filterOptions={filterOptions}\n                        getOptionLabel={getOptionLabel}\n                        hasTriedToSubmit={false}\n                      />\n                      <div style={{ \n                        fontSize: '0.75rem', \n                        color: '#64748b', \n                        marginTop: '6px',\n                        lineHeight: '1.5'\n                      }}>\n                         <strong>Event Types = kdy systm pole tuto ablonu</strong><br/>\n                        Nap. vyberete <strong>ORDER_SENT_FOR_APPROVAL</strong>  kdy nkdo odele objednvku ke schvlen, systm automaticky pole tento email pjemcm (kte jsou propojeni ipkou)<br/>\n                         Pokud nevyberete dn  ablona se nepouije automaticky\n                      </div>\n                    </FormGroup>\n                    \n                    {/* PREVIEW NOTIFIKACE */}\n                    {(() => {\n                      const template = allNotificationTemplates.find(t => t.id === selectedNode.data.templateId);\n                      \n                      if (!template) return null;\n                      \n                      //  MOCK DATA pro nhled - kompletn seznam vech monch placeholder\n                      const mockData = {\n                        // Zkladn daje objednvky\n                        order_number: 'O-2025-00142',\n                        order_id: '142',\n                        ev_cislo: 'O-2025-00142',\n                        cislo_objednavky: 'O-2025-00142',\n                        \n                        // Stav a data\n                        status: 'Ke schvlen',\n                        old_status: 'Nov',\n                        new_status: 'Ke schvlen',\n                        datum_vytvoreni: '14.12.2025',\n                        datum_pozadavku: '14.12.2025',\n                        datum_zmeny: '14.12.2025 15:30',\n                        \n                        // Pedmt - vechny varianty\n                        predmet: 'Nkup kancelskho vybaven pro oddlen IT',\n                        order_subject: 'Nkup kancelskho vybaven pro oddlen IT',\n                        subject: 'Nkup kancelskho vybaven pro oddlen IT',\n                        \n                        // Ceny\n                        cena_celkem: '45 670 K',\n                        cena_bez_dph: '37 743 K',\n                        cena_s_dph: '45 670 K',\n                        max_price_with_dph: '50 000 K',\n                        \n                        // Dodavatel\n                        dodavatel: 'ALZA.cz s.r.o.',\n                        supplier_name: 'ALZA.cz s.r.o.',\n                        supplier: 'ALZA.cz s.r.o.',\n                        \n                        // adatel/Poadovatel\n                        pozadovatel_jmeno: 'Jan Novk',\n                        pozadovatel_email: 'jan.novak@example.com',\n                        pozadovatel: 'Jan Novk',\n                        requester_name: 'Jan Novk',\n                        requester_email: 'jan.novak@example.com',\n                        \n                        // Schvalovatel\n                        schvalovatel_jmeno: 'Ing. Petr Svoboda',\n                        schvalovatel_email: 'petr.svoboda@example.com',\n                        approver_name: 'Ing. Petr Svoboda',\n                        approver_email: 'petr.svoboda@example.com',\n                        \n                        // Akce a uivatel akce\n                        action_user_name: 'Jan Novk',\n                        action_performed_by: 'Jan Novk',\n                        action_date: '14.12.2025 15:30',\n                        \n                        // URL a odkazy\n                        url_objednavky: 'https://eeo.example.com/order-form-25?edit=142',\n                        order_url: 'https://eeo.example.com/order-form-25?edit=142',\n                        url: 'https://eeo.example.com/order-form-25?edit=142',\n                        \n                        // Poznmky a dvody\n                        poznamka: 'Nutn schvlit do konce tdne kvli slevov akci',\n                        reason: 'Zmna schvalovn dle internch smrnic',\n                        comment: 'dn dal poznmky',\n                        \n                        // Obecn\n                        user_name: 'Jan Novk',\n                        user_email: 'jan.novak@example.com',\n                        recipient_name: 'Ing. Petr Svoboda',\n                        \n                        // Datum a as\n                        date: '14.12.2025',\n                        time: '15:30',\n                        datetime: '14.12.2025 15:30'\n                      };\n                      \n                      // Funkce pro nahrazen placeholder mock daty (podporuje {key} i {{key}})\n                      const replacePlaceholders = (text) => {\n                        if (!text) return text;\n                        let result = text;\n                        Object.keys(mockData).forEach(key => {\n                          // Nahradit {key} i {{key}}\n                          const regex1 = new RegExp(`\\\\{${key}\\\\}`, 'g');\n                          const regex2 = new RegExp(`\\\\{\\\\{${key}\\\\}\\\\}`, 'g');\n                          result = result.replace(regex1, mockData[key]);\n                          result = result.replace(regex2, mockData[key]);\n                        });\n                        return result;\n                      };\n                      \n                      return (\n                        <>\n                          {/* Preview In-App Notifikace - STEJN STYL JAKO ZVONEK */}\n                          {((template.app_nadpis || template.app_title) || (template.app_zprava || template.app_message)) && (\n                            <div style={{ marginTop: '16px' }}>\n                              <Label style={{ marginBottom: '8px', display: 'block' }}>\n                                <FontAwesomeIcon icon={faBell} style={{ marginRight: '6px', color: '#f5576c' }} />\n                                Nhled In-App notifikace (zvonek)\n                              </Label>\n                              {/* Simulace NotificationItem ze zvoneku */}\n                              <div style={{\n                                padding: '16px',\n                                borderLeft: '4px solid #3b82f6',\n                                cursor: 'pointer',\n                                display: 'flex',\n                                gap: '12px',\n                                alignItems: 'start',\n                                background: 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)',\n                                borderRadius: '8px',\n                                border: '1px solid #93c5fd'\n                              }}>\n                                {/* Ikona notifikace */}\n                                <div style={{\n                                  width: '40px',\n                                  height: '40px',\n                                  borderRadius: '12px',\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                  fontSize: '20px',\n                                  flexShrink: 0,\n                                  background: 'linear-gradient(135deg, #3b82f6, #2563eb)',\n                                  color: 'white',\n                                  boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'\n                                }}>\n                                  \n                                </div>\n                                \n                                {/* Content */}\n                                <div style={{ flex: 1, minWidth: 0 }}>\n                                  {/* Title - TUN */}\n                                  <div style={{\n                                    fontWeight: 700,\n                                    color: '#111827',\n                                    fontSize: '14px',\n                                    lineHeight: 1.4,\n                                    marginBottom: '4px',\n                                    overflow: 'hidden',\n                                    textOverflow: 'ellipsis',\n                                    display: '-webkit-box',\n                                    WebkitLineClamp: 2,\n                                    WebkitBoxOrient: 'vertical'\n                                  }}>\n                                    {replacePlaceholders(template.app_nadpis || template.app_title) || 'Schvlena: O-1958/75030926/2025/IT'}\n                                  </div>\n                                  \n                                  {/* Message */}\n                                  {(template.app_zprava || template.app_message) && (\n                                    <div style={{\n                                      fontSize: '13px',\n                                      color: '#6b7280',\n                                      lineHeight: 1.5,\n                                      marginBottom: '6px',\n                                      overflow: 'hidden',\n                                      textOverflow: 'ellipsis',\n                                      display: '-webkit-box',\n                                      WebkitLineClamp: 2,\n                                      WebkitBoxOrient: 'vertical'\n                                    }}>\n                                      {replacePlaceholders(template.app_zprava || template.app_message)}\n                                    </div>\n                                  )}\n                                  \n                                  {/* Meta - as + uivatel */}\n                                  <div style={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: '12px',\n                                    fontSize: '12px',\n                                    color: '#9ca3af',\n                                    marginTop: '6px'\n                                  }}>\n                                    {/* as */}\n                                    <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n                                       Ped 1 h\n                                    </span>\n                                    {/* Uivatel */}\n                                    <span style={{\n                                      background: '#f3e8ff',\n                                      color: '#6b21a8',\n                                      padding: '2px 6px',\n                                      borderRadius: '4px',\n                                      fontSize: '11px',\n                                      fontWeight: 500\n                                    }}>\n                                       {mockData.action_performed_by || 'Jan Novk'}\n                                    </span>\n                                  </div>\n                                </div>\n                              </div>\n                              <div style={{\n                                marginTop: '6px',\n                                fontSize: '0.7rem',\n                                color: '#64748b',\n                                fontStyle: 'italic'\n                              }}>\n                                 Pesn toto uvid uivatel ve zvoneku  Mock data pro ukzku\n                              </div>\n                            </div>\n                          )}\n                          \n                          {/* Preview Email Notifikace - KOMPLETN NHLED s MOCK daty */}\n                          <div style={{ marginTop: '16px' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '8px' }}>\n                              <Label style={{ marginBottom: '0', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                <FontAwesomeIcon icon={faEnvelope} style={{ marginRight: '6px', color: '#667eea' }} />\n                                Nhled Email ablony\n                                {(() => {\n                                  const variantType = templatePreviewVariant || templateNormalVariant || 'APPROVER_NORMAL';\n                                  const variantLabels = {\n                                    'APPROVER_NORMAL': '',\n                                    'APPROVER_URGENT': '',\n                                    'SUBMITTER': '',\n                                    'DEFAULT': ''\n                                  };\n                                  return (\n                                    <span style={{\n                                      padding: '4px 10px',\n                                      background: '#f3f4f6',\n                                      borderRadius: '6px',\n                                      fontSize: '0.75rem',\n                                      fontWeight: '600',\n                                      color: '#374151'\n                                    }}>\n                                      {variantLabels[variantType] || ''} {\n                                        variantType === 'APPROVER_NORMAL' ? 'Normln' :\n                                        variantType === 'APPROVER_URGENT' ? 'Mimodn' :\n                                        variantType === 'SUBMITTER' ? 'Autor' :\n                                        'Vchoz'\n                                      }\n                                    </span>\n                                  );\n                                })()}\n                              </Label>\n                              <button\n                                onClick={() => {\n                                  setFullscreenEmailData({\n                                    template,\n                                    mockData,\n                                    replacePlaceholders,\n                                    selectedVariantType: templatePreviewVariant || templateNormalVariant || 'APPROVER_NORMAL'\n                                  });\n                                  setShowFullscreenEmailModal(true);\n                                }}\n                                style={{\n                                  padding: '8px',\n                                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                                  color: 'white',\n                                  border: 'none',\n                                  borderRadius: '8px',\n                                  cursor: 'pointer',\n                                  fontSize: '1rem',\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                  width: '36px',\n                                  height: '36px',\n                                  transition: 'all 0.2s',\n                                  boxShadow: '0 2px 8px rgba(102, 126, 234, 0.3)'\n                                }}\n                                onMouseEnter={(e) => {\n                                  e.currentTarget.style.transform = 'translateY(-2px) scale(1.05)';\n                                  e.currentTarget.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.5)';\n                                }}\n                                onMouseLeave={(e) => {\n                                  e.currentTarget.style.transform = 'translateY(0) scale(1)';\n                                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(102, 126, 234, 0.3)';\n                                }}\n                                title=\"Otevt fullscreen nhled\"\n                              >\n                                <FontAwesomeIcon icon={faExpand} />\n                              </button>\n                            </div>\n                            <div style={{\n                              border: '2px solid #667eea',\n                              borderRadius: '12px',\n                              overflow: 'hidden',\n                              background: 'white',\n                              boxShadow: '0 4px 12px rgba(102, 126, 234, 0.15)'\n                            }}>\n                              {/* Email Header */}\n                              <div style={{\n                                padding: '8px 12px',\n                                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                                color: 'white',\n                                fontSize: '0.75rem'\n                              }}>\n                                <div style={{ marginBottom: '4px', display: 'flex', alignItems: 'center', gap: '6px' }}>\n                                  <strong style={{ fontSize: '0.8rem' }}> Email Preview</strong>\n                                </div>\n                                <div style={{ marginBottom: '3px', opacity: 0.95, fontSize: '0.7rem' }}>\n                                  <strong>Pedmt:</strong> {replacePlaceholders(template.email_predmet || template.email_subject || 'Bez pedmtu')}\n                                </div>\n                                <div style={{ marginBottom: '3px', opacity: 0.95, fontSize: '0.7rem' }}>\n                                  <strong>Odeslatel:</strong> EEO Systm &lt;noreply@eeo.cz&gt;\n                                </div>\n                                <div style={{ opacity: 0.95, fontSize: '0.7rem' }}>\n                                  <strong>Pjemce:</strong> {mockData.recipient_name || mockData.user_name} &lt;{mockData.user_email}&gt;\n                                </div>\n                              </div>\n                              {/* Email Body - KOMPLETN SCROLLOVATELN nhled - ZMENENO */}\n                              <div style={{\n                                padding: '8px',\n                                fontSize: '0.5rem',\n                                lineHeight: '1.3',\n                                color: '#1f2937',\n                                maxHeight: '400px',\n                                minHeight: '150px',\n                                overflowY: 'auto',\n                                overflowX: 'hidden',\n                                background: '#ffffff',\n                                zoom: '0.6',\n                                transformOrigin: 'top left'\n                              }}\n                              className=\"email-preview-body\"\n                              >\n                                <div \n                                  dangerouslySetInnerHTML={{ \n                                    __html: replacePlaceholders(\n                                      (() => {\n                                        // Extrakce sprvn varianty podle vbru v templatePreviewVariant\n                                        const selectedVariantType = templatePreviewVariant || templateNormalVariant || 'APPROVER_NORMAL';\n                                        const emailBody = template.email_telo || template.email_body || '<p style=\"color: #9ca3af; font-style: italic;\">Email tlo nen definovno v ablon</p>';\n                                        \n                                        // Pokud nen delimiter, vra cel email_body\n                                        if (!emailBody.includes('<!-- RECIPIENT:')) {\n                                          return emailBody;\n                                        }\n                                        \n                                        // Extrahuj specifickou variantu\n                                        const delimiter = `<!-- RECIPIENT: ${selectedVariantType} -->`;\n                                        const startPos = emailBody.indexOf(delimiter);\n                                        \n                                        if (startPos === -1) {\n                                          return emailBody; // Fallback\n                                        }\n                                        \n                                        // Najdi zatek HTML (po delimiteru)\n                                        let htmlStart = startPos + delimiter.length;\n                                        \n                                        // Najdi konec (dal delimiter nebo konec stringu)\n                                        const otherDelimiters = ['APPROVER_NORMAL', 'APPROVER_URGENT', 'SUBMITTER']\n                                          .filter(d => d !== selectedVariantType)\n                                          .map(d => `<!-- RECIPIENT: ${d} -->`);\n                                        \n                                        let htmlEnd = emailBody.length;\n                                        for (const otherDelimiter of otherDelimiters) {\n                                          const pos = emailBody.indexOf(otherDelimiter, htmlStart);\n                                          if (pos !== -1 && pos < htmlEnd) {\n                                            htmlEnd = pos;\n                                          }\n                                        }\n                                        \n                                        return emailBody.substring(htmlStart, htmlEnd).trim();\n                                      })()\n                                    ).replace(/\\n/g, '<br />')\n                                  }} \n                                />\n                              </div>\n                              {/* Email Footer */}\n                              <div style={{\n                                padding: '12px 20px',\n                                background: '#f9fafb',\n                                borderTop: '1px solid #e5e7eb',\n                                fontSize: '0.75rem',\n                                color: '#6b7280',\n                                textAlign: 'center'\n                              }}>\n                                 {mockData.datetime}   Automatick notifikace z EEO systmu\n                              </div>\n                            </div>\n                            <div style={{\n                              marginTop: '8px',\n                              padding: '8px 12px',\n                              background: '#eff6ff',\n                              border: '1px solid #bfdbfe',\n                              borderRadius: '6px',\n                              fontSize: '0.75rem',\n                              color: '#1e40af',\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: '6px'\n                            }}>\n                              <span></span>\n                              <span>Pln scrollovateln nhled HTML ablony s nahrazenmi placeholdery mock daty</span>\n                            </div>\n                          </div>\n                        </>\n                      );\n                    })()}\n                    \n                    <div style={{\n                      marginTop: '12px',\n                      padding: '12px',\n                      background: '#fef3c7',\n                      border: '2px solid #f59e0b',\n                      borderRadius: '8px',\n                      fontSize: '0.85rem',\n                      color: '#92400e'\n                    }}>\n                      <strong> Co tato ablona definuje:</strong>\n                      <ul style={{ margin: '8px 0 0 0', paddingLeft: '20px', lineHeight: '1.6' }}>\n                        <li>Ktermu <strong>uivateli</strong> se notifikace pole</li>\n                        <li>Zda m uivatel <strong>notifikace zapnut</strong></li>\n                        <li>Zda m uivatel <strong>roli/prva</strong> pro pjem notifikace</li>\n                        <li>Scope viditelnosti me urovat, zda notifikaci dostane</li>\n                      </ul>\n                    </div>\n                    \n                    {/* Zobrazen piazen - ke komu vede ipka */}\n                    {(() => {\n                      const recipients = edges\n                        .filter(e => e.source === selectedNode.id)\n                        .map(e => {\n                          const targetNode = nodes.find(n => n.id === e.target);\n                          return {\n                            id: targetNode?.id,\n                            name: targetNode?.data?.label || targetNode?.data?.name || 'Neznm',\n                            type: targetNode?.data?.type || 'user',\n                            edgeId: e.id\n                          };\n                        });\n                      \n                      return (\n                        <div style={{ \n                          marginTop: '16px', \n                          padding: '12px', \n                          background: '#f0f9ff', \n                          border: '2px solid #3b82f6',\n                          borderRadius: '8px' \n                        }}>\n                          <div style={{ \n                            display: 'flex', \n                            alignItems: 'center', \n                            gap: '8px',\n                            marginBottom: '12px',\n                            fontWeight: '600',\n                            color: '#1e40af',\n                            fontSize: '0.9rem'\n                          }}>\n                            <FontAwesomeIcon icon={faBell} />\n                            Notifikace je piazena na:\n                          </div>\n                          \n                          {recipients.length > 0 ? (\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                              {recipients.map((recipient, i) => {\n                                let icon = '';\n                                let bgColor = '#dbeafe';\n                                let textColor = '#1e40af';\n                                \n                                if (recipient.type === 'location') {\n                                  icon = '';\n                                  bgColor = '#d1fae5';\n                                  textColor = '#065f46';\n                                } else if (recipient.type === 'department') {\n                                  icon = '';\n                                  bgColor = '#dbeafe';\n                                  textColor = '#1e40af';\n                                }\n                                \n                                return (\n                                  <div key={i} style={{ \n                                    padding: '8px 12px', \n                                    background: bgColor,\n                                    borderRadius: '6px',\n                                    fontSize: '0.85rem',\n                                    color: textColor,\n                                    fontWeight: '500',\n                                    cursor: 'pointer',\n                                    transition: 'all 0.2s',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: '8px'\n                                  }}\n                                  onClick={() => {\n                                    const node = nodes.find(n => n.id === recipient.id);\n                                    if (node) {\n                                      setSelectedNode(node);\n                                      setSelectedEdge(null);\n                                    }\n                                  }}\n                                  onMouseEnter={(e) => e.currentTarget.style.opacity = '0.7'}\n                                  onMouseLeave={(e) => e.currentTarget.style.opacity = '1'}\n                                  title=\"Kliknte pro zobrazen detailu\">\n                                    <span style={{ fontSize: '1.1rem' }}>{icon}</span>\n                                    <span>{recipient.name}</span>\n                                    {recipient.type === 'location' && <span style={{ fontSize: '0.75rem', opacity: 0.7 }}>(lokalita)</span>}\n                                    {recipient.type === 'department' && <span style={{ fontSize: '0.75rem', opacity: 0.7 }}>(sek)</span>}\n                                    {recipient.type === 'user' && <span style={{ fontSize: '0.75rem', opacity: 0.7 }}>(uivatel)</span>}\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          ) : (\n                            <div style={{ fontSize: '0.8rem', color: '#64748b', fontStyle: 'italic' }}>\n                              ablona zatm nen piazena k dnmu uivateli, lokalit ani seku\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })()}\n                    \n                    {/* ODCHOZ NOTIFIKACE (komu se posl) */}\n                    {(() => {\n                      const outgoingEdges = edges.filter(e => e.source === selectedNode.id);\n                      if (outgoingEdges.length === 0) return (\n                        <div style={{\n                          marginTop: '16px',\n                          padding: '12px',\n                          background: '#fef3c7',\n                          border: '2px solid #fbbf24',\n                          borderRadius: '8px',\n                          fontSize: '0.85rem',\n                          color: '#92400e'\n                        }}>\n                           <strong>ablona nen propojena s dnm pjemcem!</strong>\n                          <div style={{ fontSize: '0.8rem', marginTop: '6px' }}>\n                            Pethnte ipku z tto ablony na uivatele, roli nebo dynamickho pjemce.\n                          </div>\n                        </div>\n                      );\n                      \n                      return (\n                        <div style={{\n                          marginTop: '16px',\n                          padding: '12px',\n                          background: '#f0fdf4',\n                          border: '2px solid #10b981',\n                          borderRadius: '8px'\n                        }}>\n                          <div style={{ fontSize: '0.9rem', fontWeight: 'bold', color: '#065f46', marginBottom: '10px' }}>\n                             Odchoz notifikace ({outgoingEdges.length}):\n                          </div>\n                          {outgoingEdges.map((edge, idx) => {\n                            const targetNode = nodes.find(n => n.id === edge.target);\n                            const recipientType = targetNode?.data?.type === 'genericRecipient' \n                              ? targetNode.data.genericType \n                              : targetNode?.data?.type?.toUpperCase() || 'UNKNOWN';\n                            const scopeFilter = edge.data?.scope_filter || 'NONE';\n                            const recipientRole = edge.data?.recipientRole || 'INFO';\n                            const eventTypes = edge.data?.eventTypes || [];\n                            \n                            const recipientTypeColors = {\n                              'TRIGGER_USER': { bg: '#d1fae5', border: '#10b981', text: '#065f46', icon: '' },\n                              'ENTITY_AUTHOR': { bg: '#dbeafe', border: '#3b82f6', text: '#1e40af', icon: '' },\n                              'ENTITY_OWNER': { bg: '#fef3c7', border: '#f59e0b', text: '#92400e', icon: '' },\n                              'USER': { bg: '#f3e8ff', border: '#a855f7', text: '#6b21a8', icon: '' },\n                              'ROLE': { bg: '#e0e7ff', border: '#6366f1', text: '#3730a3', icon: '' }\n                            };\n                            \n                            const colors = recipientTypeColors[recipientType] || { \n                              bg: '#f3f4f6', border: '#9ca3af', text: '#374151', icon: '' \n                            };\n                            \n                            return (\n                              <div key={edge.id} style={{\n                                padding: '10px',\n                                background: colors.bg,\n                                border: `2px solid ${colors.border}`,\n                                borderRadius: '6px',\n                                marginBottom: idx < outgoingEdges.length - 1 ? '8px' : '0',\n                                fontSize: '0.85rem'\n                              }}>\n                                <div style={{ fontWeight: '700', color: colors.text, marginBottom: '6px' }}>\n                                  {colors.icon} {targetNode?.data?.name || 'Unknown'} \n                                  <span style={{ fontWeight: '600', opacity: 0.8, marginLeft: '6px' }}>\n                                    ({recipientType})\n                                  </span>\n                                </div>\n                                <div style={{ fontSize: '0.75rem', color: colors.text, lineHeight: '1.5' }}>\n                                  <strong> Typ notifikace:</strong> {recipientRole}<br/>\n                                  <strong> Scope Filter:</strong> {scopeFilter}\n                                  {scopeFilter === 'ENTITY_PARTICIPANTS' && <span style={{ color: '#10b981' }}> </span>}\n                                  {eventTypes.length > 0 && (\n                                    <>\n                                      <br/><strong> Event Types:</strong> {eventTypes.slice(0, 2).join(', ')}\n                                      {eventTypes.length > 2 && ` +${eventTypes.length - 2} dalch`}\n                                    </>\n                                  )}\n                                </div>\n                              </div>\n                            );\n                          })}\n                          <div style={{ \n                            fontSize: '0.7rem', \n                            color: '#047857', \n                            marginTop: '8px',\n                            fontStyle: 'italic',\n                            paddingTop: '8px',\n                            borderTop: '1px solid #d1fae5'\n                          }}>\n                             Kliknte na <strong>ipku (hranu)</strong> pro pravu Scope Filter a typu notifikace\n                          </div>\n                        </div>\n                      );\n                    })()}\n                  </>\n                )}\n                \n                {/* LOKALITA NODE */}\n                {selectedNode && selectedNode.data.type === 'location' && (\n                  <>\n                    <FormGroup>\n                      <Label>Nzev lokality</Label>\n                      <Input value={selectedNode.data.label || selectedNode.data.name} readOnly />\n                    </FormGroup>\n                    <div style={{\n                      marginTop: '12px',\n                      padding: '12px',\n                      background: '#f0fdf4',\n                      border: '2px solid #10b981',\n                      borderRadius: '8px',\n                      fontSize: '0.85rem',\n                      color: '#065f46'\n                    }}>\n                      <strong> Co lokalita definuje:</strong>\n                      <ul style={{ margin: '8px 0 0 0', paddingLeft: '20px', lineHeight: '1.6' }}>\n                        <li>Rozen <strong>viditelnosti</strong> v rmci lokality</li>\n                        <li>Uruje <strong>scope</strong> pro data (objednvky, faktury, pokladna)</li>\n                        <li>Me mt dodaten <strong>prva</strong> vzan na lokalitu</li>\n                      </ul>\n                    </div>\n                  </>\n                )}\n                \n                {/* SEK NODE */}\n                {selectedNode && selectedNode.data.type === 'department' && (\n                  <>\n                    <FormGroup>\n                      <Label>Nzev seku</Label>\n                      <Input value={selectedNode.data.label || selectedNode.data.name} readOnly />\n                    </FormGroup>\n                    <div style={{\n                      marginTop: '12px',\n                      padding: '12px',\n                      background: '#eff6ff',\n                      border: '2px solid #3b82f6',\n                      borderRadius: '8px',\n                      fontSize: '0.85rem',\n                      color: '#1e40af'\n                    }}>\n                      <strong> Co sek definuje:</strong>\n                      <ul style={{ margin: '8px 0 0 0', paddingLeft: '20px', lineHeight: '1.6' }}>\n                        <li>Rozen <strong>viditelnosti</strong> v rmci seku</li>\n                        <li>Uruje <strong>scope</strong> pro data (objednvky, faktury, pokladna)</li>\n                        <li>Me mt dodaten <strong>prva</strong> vzan na sek</li>\n                      </ul>\n                    </div>\n                  </>\n                )}\n                \n                {/* ROLE NODE */}\n                {selectedNode && selectedNode.data.type === 'role' && (\n                  <>\n                    <FormGroup>\n                      <Label>Nzev role</Label>\n                      <Input value={selectedNode.data.label || selectedNode.data.name} readOnly />\n                    </FormGroup>\n                    {selectedNode.data.metadata?.popis && (\n                      <FormGroup>\n                        <Label>Popis</Label>\n                        <Input value={selectedNode.data.metadata.popis} readOnly />\n                      </FormGroup>\n                    )}\n                    <div style={{\n                      marginTop: '12px',\n                      padding: '12px',\n                      background: '#f5f3ff',\n                      border: '2px solid #8b5cf6',\n                      borderRadius: '8px',\n                      fontSize: '0.85rem',\n                      color: '#6b21a8'\n                    }}>\n                      <strong> Co role definuje:</strong>\n                      <ul style={{ margin: '8px 0 0 0', paddingLeft: '20px', lineHeight: '1.6' }}>\n                        <li>Sadu <strong>oprvnn</strong> pro moduly (objednvky, faktury, pokladna)</li>\n                        <li>Piazen <strong>uivatelm</strong> pro ddn prv</li>\n                        <li>Monost pijmat <strong>notifikace</strong> pro celou roli</li>\n                      </ul>\n                    </div>\n                    \n                    {/* Zobrazen piazench uivatel */}\n                    {(() => {\n                      const assignedUsers = edges\n                        .filter(e => e.target === selectedNode.id)\n                        .map(e => {\n                          const sourceNode = nodes.find(n => n.id === e.source);\n                          return {\n                            id: sourceNode?.id,\n                            name: sourceNode?.data?.label || sourceNode?.data?.name || 'Neznm',\n                            position: sourceNode?.data?.position || '',\n                            edgeId: e.id\n                          };\n                        });\n                      \n                      return (\n                        <div style={{ \n                          marginTop: '16px', \n                          padding: '12px', \n                          background: '#eff6ff', \n                          border: '2px solid #3b82f6',\n                          borderRadius: '8px' \n                        }}>\n                          <div style={{ \n                            display: 'flex', \n                            alignItems: 'center', \n                            gap: '8px',\n                            marginBottom: '12px',\n                            fontWeight: '600',\n                            color: '#1e40af',\n                            fontSize: '0.9rem'\n                          }}>\n                            <FontAwesomeIcon icon={faUsers} />\n                            Uivatel s touto rol ({assignedUsers.length})\n                          </div>\n                          \n                          {assignedUsers.length > 0 ? (\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                              {assignedUsers.map((user, i) => (\n                                <div key={i} style={{ \n                                  padding: '8px 12px', \n                                  background: '#dbeafe',\n                                  borderRadius: '6px',\n                                  fontSize: '0.85rem',\n                                  color: '#1e40af',\n                                  fontWeight: '500',\n                                  cursor: 'pointer',\n                                  transition: 'all 0.2s',\n                                  display: 'flex',\n                                  flexDirection: 'column',\n                                  gap: '2px'\n                                }}\n                                onClick={() => {\n                                  const node = nodes.find(n => n.id === user.id);\n                                  if (node) {\n                                    setSelectedNode(node);\n                                    setSelectedEdge(null);\n                                  }\n                                }}\n                                onMouseEnter={(e) => e.currentTarget.style.opacity = '0.7'}\n                                onMouseLeave={(e) => e.currentTarget.style.opacity = '1'}\n                                title=\"Kliknte pro zobrazen detailu uivatele\">\n                                  <span style={{ fontSize: '1rem' }}> {user.name}</span>\n                                  {user.position && <span style={{ fontSize: '0.75rem', opacity: 0.7 }}>{user.position}</span>}\n                                </div>\n                              ))}\n                            </div>\n                          ) : (\n                            <div style={{ fontSize: '0.8rem', color: '#64748b', fontStyle: 'italic' }}>\n                              Role zatm nen piazena dnmu uivateli\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })()}\n                    \n                    {/* Oprvnn modul role */}\n                    <div style={{ \n                      marginTop: '16px', \n                      padding: '12px', \n                      background: '#fef3c7', \n                      border: '2px solid #f59e0b',\n                      borderRadius: '8px' \n                    }}>\n                      <div style={{ \n                        display: 'flex', \n                        alignItems: 'center', \n                        gap: '8px',\n                        marginBottom: '12px',\n                        fontWeight: '600',\n                        color: '#92400e',\n                        fontSize: '0.9rem'\n                      }}>\n                        <FontAwesomeIcon icon={faUserShield} />\n                        Oprvnn modul\n                      </div>\n                      \n                      <div style={{ fontSize: '0.8rem', color: '#92400e', marginBottom: '10px' }}>\n                        Tato role m pstup k nsledujcm modulm:\n                      </div>\n                      \n                      <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                        {(() => {\n                          // Najt roli v allRoles podle roleId\n                          const role = allRoles.find(r => r.id === selectedNode.data.roleId);\n                          const modules = role?.modules || { orders: false, invoices: false, cashbook: false };\n                          \n                          return ['orders', 'invoices', 'cashbook'].map(module => {\n                            const hasPermission = modules[module] === true || modules[module] === 1;\n                            const moduleNames = {\n                              orders: ' Objednvky',\n                              invoices: ' Faktury',\n                              cashbook: ' Pokladna'\n                            };\n                            \n                            return (\n                              <div key={module} style={{ \n                                padding: '8px 12px', \n                                background: hasPermission ? '#d1fae5' : '#fee2e2',\n                                borderRadius: '6px',\n                                fontSize: '0.85rem',\n                                color: hasPermission ? '#065f46' : '#991b1b',\n                                fontWeight: '500',\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: '8px'\n                              }}>\n                                <span style={{ fontSize: '1.2rem' }}>{hasPermission ? '' : ''}</span>\n                                <span>{moduleNames[module]}</span>\n                              </div>\n                            );\n                          });\n                        })()}\n                      </div>\n                    </div>\n                  </>\n                )}\n                \n                {/* UIVATELSK NODE */}\n                {selectedNode && (!selectedNode.data.type || selectedNode.data.type === 'user') && (\n                  <>\n                    <FormGroup>\n                      <Label>Uivatel</Label>\n                      <Input value={selectedNode.data.name} readOnly />\n                    </FormGroup>\n                    <FormGroup>\n                      <Label>Pozice</Label>\n                      <Input value={selectedNode.data.position} readOnly />\n                    </FormGroup>\n                    <FormGroup style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #e0e6ed' }}>\n                      <Label style={{ color: '#10b981' }}>\n                         Vchoz lokalita (z DB)\n                      </Label>\n                      <Input \n                        value={selectedNode.data.metadata?.location || 'Neuvedeno'} \n                        readOnly \n                        style={{ background: '#f0fdf4', fontWeight: '500', border: '1px solid #86efac' }}\n                      />\n                    </FormGroup>\n                    <FormGroup>\n                      <Label style={{ color: '#10b981' }}>\n                         Vchoz sek (z DB)\n                      </Label>\n                      <Input \n                        value={selectedNode.data.metadata?.department || 'Neuvedeno'} \n                        readOnly \n                        style={{ background: '#f0fdf4', fontWeight: '500', border: '1px solid #86efac' }}\n                      />\n                    </FormGroup>\n                  </>\n                )}\n                \n                {/* Sekce: Aktuln vztahy v diagramu - pouze pro USER node */}\n                {selectedNode && (!selectedNode.data.type || selectedNode.data.type === 'user') && (\n                  <div style={{ \n                    marginTop: '24px', \n                    padding: '12px', \n                    background: '#f0f9ff', \n                    border: '2px solid #3b82f6',\n                    borderRadius: '8px' \n                  }}>\n                      <div style={{ \n                        display: 'flex', \n                        alignItems: 'center', \n                        gap: '8px',\n                        marginBottom: '12px',\n                        fontWeight: '600',\n                        color: '#1e40af',\n                        fontSize: '0.9rem'\n                      }}>\n                        <FontAwesomeIcon icon={faSitemap} />\n                        Aktuln vztahy v diagramu\n                      </div>\n                      \n                      {(() => {\n                        // Najdi nadzen (ipky smujc DO tohoto nodu)\n                        const supervisors = edges\n                          .filter(e => e.target === selectedNode.id)\n                          .map(e => {\n                            const sourceNode = nodes.find(n => n.id === e.source);\n                            return {\n                              name: sourceNode?.data?.name || 'Neznm',\n                              edgeId: e.id,\n                              type: e.data?.relationshipType || 'prime'\n                            };\n                          });\n                        \n                        // Najdi podzen (ipky smujc Z tohoto nodu)\n                        const subordinates = edges\n                          .filter(e => e.source === selectedNode.id)\n                          .map(e => {\n                            const targetNode = nodes.find(n => n.id === e.target);\n                            return {\n                              name: targetNode?.data?.name || 'Neznm',\n                              edgeId: e.id,\n                              type: e.data?.relationshipType || 'prime'\n                            };\n                          });\n                        \n                        return (\n                          <>\n                            <div style={{ marginBottom: '12px' }}>\n                              <strong style={{ fontSize: '0.8rem', color: '#475569', display: 'block', marginBottom: '6px' }}>\n                                 Nadzen ({supervisors.length})\n                              </strong>\n                              {supervisors.length > 0 ? (\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                                  {supervisors.map((sup, i) => (\n                                    <div key={i} style={{ \n                                      padding: '6px 10px', \n                                      background: '#dbeafe',\n                                      borderRadius: '4px',\n                                      fontSize: '0.8rem',\n                                      color: '#1e40af',\n                                      fontWeight: '500',\n                                      cursor: 'pointer',\n                                      transition: 'all 0.2s'\n                                    }}\n                                    onClick={() => {\n                                      // Kliknutm vyber tento edge\n                                      const edge = edges.find(e => e.id === sup.edgeId);\n                                      if (edge) {\n                                        setSelectedEdge(edge);\n                                        setSelectedNode(null);\n                                      }\n                                    }}\n                                    onMouseEnter={(e) => e.currentTarget.style.background = '#bfdbfe'}\n                                    onMouseLeave={(e) => e.currentTarget.style.background = '#dbeafe'}\n                                    title=\"Kliknte pro zobrazen detailu vztahu\">\n                                      {sup.name}\n                                      {sup.type === 'zastupovani' && ' (zastupovn)'}\n                                    </div>\n                                  ))}\n                                </div>\n                              ) : (\n                                <div style={{ fontSize: '0.75rem', color: '#94a3b8', fontStyle: 'italic' }}>\n                                  Nem nadzenho v diagramu\n                                </div>\n                              )}\n                            </div>\n                            \n                            <div>\n                              <strong style={{ fontSize: '0.8rem', color: '#475569', display: 'block', marginBottom: '6px' }}>\n                                 Podzen ({subordinates.length})\n                              </strong>\n                              {subordinates.length > 0 ? (\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                                  {subordinates.map((sub, i) => (\n                                    <div key={i} style={{ \n                                      padding: '6px 10px', \n                                      background: '#dbeafe',\n                                      borderRadius: '4px',\n                                      fontSize: '0.8rem',\n                                      color: '#1e40af',\n                                      fontWeight: '500',\n                                      cursor: 'pointer',\n                                      transition: 'all 0.2s'\n                                    }}\n                                    onClick={() => {\n                                      // Kliknutm vyber tento edge\n                                      const edge = edges.find(e => e.id === sub.edgeId);\n                                      if (edge) {\n                                        setSelectedEdge(edge);\n                                        setSelectedNode(null);\n                                      }\n                                    }}\n                                    onMouseEnter={(e) => e.currentTarget.style.background = '#bfdbfe'}\n                                    onMouseLeave={(e) => e.currentTarget.style.background = '#dbeafe'}\n                                    title=\"Kliknte pro zobrazen detailu vztahu\">\n                                      {sub.name}\n                                      {sub.type === 'zastupovani' && ' (zastupovn)'}\n                                    </div>\n                                  ))}\n                                </div>\n                              ) : (\n                                <div style={{ fontSize: '0.75rem', color: '#94a3b8', fontStyle: 'italic' }}>\n                                  Nem podzen v diagramu\n                                </div>\n                              )}\n                            </div>\n                          </>\n                        );\n                      })()}\n                    </div>\n                )}\n                \n                {selectedEdge && (() => {\n                  const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                  const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                  \n                  return (\n                  <>\n                    {/* Typ vztahu badge */}\n                    <div style={{\n                      marginBottom: '16px',\n                      padding: '10px',\n                      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                      borderRadius: '8px',\n                      color: 'white',\n                      fontSize: '0.9rem',\n                      fontWeight: '600',\n                      textAlign: 'center',\n                      boxShadow: '0 2px 8px rgba(102,126,234,0.3)'\n                    }}>\n                      {(() => {\n                        const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                        const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                        const relationInfo = getRelationshipTypeInfo(sourceType, targetType);\n                        return `${relationInfo.icon} ${relationInfo.label}`;\n                      })()}\n                    </div>\n                    \n                    <FormGroup>\n                      <Label>{(() => {\n                        const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                        const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                        return getRelationshipTypeInfo(sourceType, targetType).sourceLabel;\n                      })()}</Label>\n                      <Input value={sourceNode?.data?.label || sourceNode?.data?.name || 'Neznm'} readOnly style={{ fontWeight: '600', color: '#059669' }} />\n                    </FormGroup>\n                    <FormGroup>\n                      <Label>{(() => {\n                        const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                        const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                        return getRelationshipTypeInfo(sourceType, targetType).targetLabel;\n                      })()}</Label>\n                      <Input value={targetNode?.data?.label || targetNode?.data?.name || 'Neznm'} readOnly style={{ fontWeight: '600', color: '#3b82f6' }} />\n                    </FormGroup>\n                    \n                    {/* Vysvtlen logiky vztahu */}\n                    <div style={{\n                      marginTop: '16px',\n                      marginBottom: '16px',\n                      padding: '12px',\n                      background: '#f0fdf4',\n                      border: '2px solid #86efac',\n                      borderRadius: '8px',\n                      fontSize: '0.85rem',\n                      color: '#15803d'\n                    }}>\n                      <div style={{ marginTop: '8px', fontSize: '0.8rem', lineHeight: '1.6' }}>\n                        {(() => {\n                          const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                          const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                          const sourceName = sourceNode?.data?.name?.split(' ')[0] || 'Zdroj';\n                          const targetName = targetNode?.data?.name?.split(' ')[0] || 'Cl';\n                          \n                          // Template  User/Location/Department (NOTIFIKACE)\n                          if (sourceType === 'template') {\n                            if (targetType === 'user') {\n                              return (\n                                <>\n                                  <strong>{targetName}</strong> bude dostvat notifikace podle ablony <strong>{sourceName}</strong>.<br/>\n                                  <strong>Typ notifikace</strong> uruje prioritu (dleit/schvalovac/informan).<br/>\n                                  <strong>Event Types</strong> uruj, kdy se notifikace odele.\n                                </>\n                              );\n                            } else {\n                              return (\n                                <>\n                                  Vichni uivatel v <strong>{targetName}</strong> dostanou notifikace podle ablony <strong>{sourceName}</strong>.<br/>\n                                  <strong>Event Types</strong> uruj, kdy se notifikace odele.\n                                </>\n                              );\n                            }\n                          }\n                          \n                          // Ostatn vztahy (PRVA)\n                          return (\n                            <>\n                              <strong>{sourceName}</strong> zsk prva vidt data od <strong>{targetName}</strong>.<br/>\n                              <strong>Rozsah</strong> a <strong>Moduly</strong> uruj, co pesn uvid (objednvky/faktury/pokladnu).<br/>\n                              <strong>Rozen lokality/seky</strong> pidvaj dal data mimo zkladn vztah.\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                    \n                    {/* Typ vztahu - zobraz JEN pro user-user vztahy */}\n                    {(() => {\n                      const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                      const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                      \n                      if (sourceType === 'user' && targetType === 'user') {\n                        return (\n                          <FormGroup>\n                            <Label>Typ vztahu</Label>\n                            <Select value={relationshipType} onChange={(e) => setRelationshipType(e.target.value)}>\n                              <option value=\"prime\">Pm nadzen</option>\n                              <option value=\"zastupovani\">Zastupovn</option>\n                              <option value=\"delegovani\" disabled style={{ color: '#9ca3af' }}>Delegovn (TODO)</option>\n                              <option value=\"rozsirene\" disabled style={{ color: '#9ca3af' }}>Rozen oprvnn (TODO)</option>\n                            </Select>\n                          </FormGroup>\n                        );\n                      }\n                      return null;\n                    })()}\n                  </>\n                  );\n                })()}\n                \n                {/* Sekce Zkladn vlastnosti vztahu - POUZE pro edge */}\n                {selectedEdge && (() => {\n                  const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                  const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                  const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                  const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                  const relationInfo = getRelationshipTypeInfo(sourceType, targetType);\n                  \n                  // Zobraz scope jen kdy m smysl (ne pro notifikace)\n                  if (!relationInfo.showScope) return null;\n                  \n                  return (\n                <FormGroup>\n                  <Label>\n                    Rozsah viditelnosti (Scope)\n                    <span style={{ fontSize: '0.75rem', color: '#059669', fontWeight: '600', marginLeft: '8px' }}>\n                       co uvid {sourceNode?.data?.name?.split(' ')[0] || 'nadrzen'}?\n                    </span>\n                  </Label>\n                  <Select value={relationshipScope} onChange={(e) => setRelationshipScope(e.target.value)}>\n                    <option value=\"OWN\"> OWN - Jen sv vlastn zznamy</option>\n                    <option value=\"TEAM\"> TEAM - Zznamy svho seku</option>\n                    <option value=\"LOCATION\"> LOCATION - Ve v rmci lokality</option>\n                    <option value=\"ALL\"> ALL - Ve (admin pstup)</option>\n                  </Select>\n                  <div style={{\n                    marginTop: '8px',\n                    padding: '8px',\n                    background: '#f8fafc',\n                    border: '1px solid #e2e8f0',\n                    borderRadius: '4px',\n                    fontSize: '0.75rem',\n                    color: '#475569'\n                  }}>\n                    <strong>Vysvtlen:</strong>\n                    <ul style={{ margin: '6px 0 0 16px', padding: 0 }}>\n                      <li><strong>OWN:</strong> Vid jen sv zznamy (vlastn objednvky/faktury)</li>\n                      <li><strong>TEAM:</strong> Vid zznamy celho seku</li>\n                      <li><strong>LOCATION:</strong> Vid ve v rmci lokality (nap. vechny seky v Beroun)</li>\n                      <li><strong>ALL:</strong> Vid vechny zznamy v systmu (nadazen pstup)</li>\n                    </ul>\n                  </div>\n                </FormGroup>\n                  );\n                })()}\n                \n                {/* Checkbox pro filtrovn podle konkrtn objednvky (UserDepartment/Location) */}\n                {selectedEdge && (() => {\n                  const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                  const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                  const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                  const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                  \n                  // Zobraz jen pro User  Department/Location vztahy\n                  if (sourceType === 'user' && (targetType === 'department' || targetType === 'location')) {\n                    return (\n                      <FormGroup style={{ marginTop: '16px' }}>\n                        <div style={{\n                          display: 'flex',\n                          alignItems: 'flex-start',\n                          gap: '10px',\n                          padding: '12px',\n                          background: '#f0fdf4',\n                          border: '2px solid #86efac',\n                          borderRadius: '8px'\n                        }}>\n                          <input \n                            type=\"checkbox\"\n                            id=\"applyToOrdersOnly\"\n                            checked={selectedEdge.data?.applyToOrdersOnly || false}\n                            onChange={(e) => {\n                              setEdges(edges.map(edge => \n                                edge.id === selectedEdge.id \n                                  ? { ...edge, data: { ...edge.data, applyToOrdersOnly: e.target.checked }}\n                                  : edge\n                              ));\n                            }}\n                            style={{\n                              width: '18px',\n                              height: '18px',\n                              cursor: 'pointer',\n                              marginTop: '2px'\n                            }}\n                          />\n                          <label htmlFor=\"applyToOrdersOnly\" style={{ cursor: 'pointer', flex: 1 }}>\n                            <div style={{ fontSize: '0.85rem', fontWeight: '600', color: '#15803d', marginBottom: '4px' }}>\n                               Plat jen pro objednvky z tohoto {targetType === 'department' ? 'seku' : 'lokality'}\n                            </div>\n                            <div style={{ fontSize: '0.75rem', color: '#166534', lineHeight: '1.5' }}>\n                              <strong> Zapnuto:</strong> Uivatel uvid/uprav jen objednvky vytvoen v tomto {targetType === 'department' ? 'seku' : 'lokalit'}.<br/>\n                              <strong> Vypnuto:</strong> Viditelnost se d podle nastavenho Scope (OWN/TEAM/LOCATION/ALL).\n                            </div>\n                          </label>\n                        </div>\n                      </FormGroup>\n                    );\n                  }\n                  return null;\n                })()}\n              </DetailSection>\n\n              {/* Sekce Oprvnn pro moduly - POUZE pro edge (vztahy) kde m smysl */}\n              {selectedEdge && (() => {\n                const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                const relationInfo = getRelationshipTypeInfo(sourceType, targetType);\n                \n                if (!relationInfo.showModules) return null;\n                \n                return (\n              <>\n              <Divider />\n\n              <DetailSection>\n                <DetailSectionTitle>\n                  <FontAwesomeIcon icon={faEye} />\n                  Oprvnn pro moduly (workflow)\n                </DetailSectionTitle>\n                \n                {/* Info box s vysvtlenm */}\n                <div style={{\n                  padding: '12px',\n                  background: '#f0f9ff',\n                  border: '1px solid #bfdbfe',\n                  borderRadius: '8px',\n                  fontSize: '0.85rem',\n                  color: '#1e40af',\n                  marginBottom: '16px'\n                }}>\n                  <strong> Jak to funguje:</strong>\n                  <div style={{ marginTop: '6px', fontSize: '0.8rem', color: '#3b82f6' }}>\n                    Vztah roz viditelnost dat podle lokalit a sek.\n                    Uivatel MUS mt zkladn prvo (roli) pro pstup k modulu.\n                  </div>\n                </div>\n                \n                <CheckboxGroup>\n                  {/* AKTIVN MODULY - s workflow podporou */}\n                  <CheckboxLabel>\n                    <input \n                      type=\"checkbox\" \n                      checked={moduleVisibility.orders}\n                      onChange={(e) => setModuleVisibility(prev => ({ ...prev, orders: e.target.checked }))}\n                    />\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\n                      <span> <strong>Objednvky</strong></span>\n                      <span style={{ fontSize: '0.75rem', color: '#10b981', background: '#f0fdf4', padding: '2px 6px', borderRadius: '4px', fontWeight: 600 }}>\n                        AKTIVN\n                      </span>\n                    </div>\n                  </CheckboxLabel>\n                  {moduleVisibility.orders && (\n                    <div style={{ marginLeft: '32px', marginTop: '6px', marginBottom: '12px' }}>\n                      <label style={{ fontSize: '0.8rem', color: '#64748b', display: 'block', marginBottom: '4px' }}>rove prv pro nadzenho:</label>\n                      <select\n                        value={permissionLevel.orders}\n                        onChange={(e) => setPermissionLevel(prev => ({ ...prev, orders: e.target.value }))}\n                        style={{\n                          width: '100%',\n                          padding: '6px 10px',\n                          borderRadius: '6px',\n                          border: '1px solid #cbd5e1',\n                          fontSize: '0.85rem',\n                          cursor: 'pointer',\n                          background: 'white'\n                        }}\n                      >\n                        <option value=\"READ_ONLY\"> Jen ten (vid zznamy)</option>\n                        <option value=\"READ_WRITE\"> ten + Editace</option>\n                        <option value=\"READ_WRITE_DELETE\"> Pln pstup (i mazn)</option>\n                        <option value=\"INHERIT\"> Ddit prva podzenho</option>\n                      </select>\n                    </div>\n                  )}\n                  \n                  <CheckboxLabel>\n                    <input \n                      type=\"checkbox\" \n                      checked={moduleVisibility.invoices}\n                      onChange={(e) => setModuleVisibility(prev => ({ ...prev, invoices: e.target.checked }))}\n                    />\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\n                      <span> <strong>Faktury</strong></span>\n                      <span style={{ fontSize: '0.75rem', color: '#10b981', background: '#f0fdf4', padding: '2px 6px', borderRadius: '4px', fontWeight: 600 }}>\n                        AKTIVN\n                      </span>\n                    </div>\n                  </CheckboxLabel>\n                  {moduleVisibility.invoices && (\n                    <div style={{ marginLeft: '32px', marginTop: '6px', marginBottom: '12px' }}>\n                      <label style={{ fontSize: '0.8rem', color: '#64748b', display: 'block', marginBottom: '4px' }}>rove prv pro nadzenho:</label>\n                      <select\n                        value={permissionLevel.invoices}\n                        onChange={(e) => setPermissionLevel(prev => ({ ...prev, invoices: e.target.value }))}\n                        style={{\n                          width: '100%',\n                          padding: '6px 10px',\n                          borderRadius: '6px',\n                          border: '1px solid #cbd5e1',\n                          fontSize: '0.85rem',\n                          cursor: 'pointer',\n                          background: 'white'\n                        }}\n                      >\n                        <option value=\"READ_ONLY\"> Jen ten (vid zznamy)</option>\n                        <option value=\"READ_WRITE\"> ten + Editace</option>\n                        <option value=\"READ_WRITE_DELETE\"> Pln pstup (i mazn)</option>\n                        <option value=\"INHERIT\"> Ddit prva podzenho</option>\n                      </select>\n                    </div>\n                  )}\n                  \n                  <div style={{ marginLeft: '0px', paddingLeft: '0px' }}>\n                    <CheckboxLabel>\n                      <input \n                        type=\"checkbox\"\n                        checked={moduleVisibility.cashbook}\n                        onChange={(e) => setModuleVisibility(prev => ({ ...prev, cashbook: e.target.checked }))}\n                      />\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\n                        <span> <strong>Pokladna</strong></span>\n                        <span style={{ fontSize: '0.75rem', color: '#f59e0b', background: '#fef3c7', padding: '2px 6px', borderRadius: '4px', fontWeight: 600 }}>\n                          STEN\n                        </span>\n                      </div>\n                    </CheckboxLabel>\n                    {/* Sub-option pro pokladnu */}\n                    <div style={{ marginLeft: '32px', marginTop: '6px', marginBottom: '6px' }}>\n                      <CheckboxLabel style={{ fontSize: '0.85rem', padding: '4px 8px' }}>\n                        <input \n                          type=\"checkbox\"\n                          checked={moduleVisibility.cashbookReadonly}\n                          onChange={(e) => setModuleVisibility(prev => ({ ...prev, cashbookReadonly: e.target.checked }))}\n                          disabled={!moduleVisibility.cashbook}\n                        />\n                        <span style={{ color: '#64748b' }}> Jen pro ten (read-only)</span>\n                      </CheckboxLabel>\n                    </div>\n                    {moduleVisibility.cashbook && (\n                      <div style={{ marginLeft: '32px', marginTop: '6px', marginBottom: '12px' }}>\n                        <label style={{ fontSize: '0.8rem', color: '#64748b', display: 'block', marginBottom: '4px' }}>rove prv pro nadzenho:</label>\n                        <select\n                          value={permissionLevel.cashbook}\n                          onChange={(e) => setPermissionLevel(prev => ({ ...prev, cashbook: e.target.value }))}\n                          style={{\n                            width: '100%',\n                            padding: '6px 10px',\n                            borderRadius: '6px',\n                            border: '1px solid #cbd5e1',\n                            fontSize: '0.85rem',\n                            cursor: 'pointer',\n                            background: 'white'\n                          }}\n                        >\n                          <option value=\"READ_ONLY\"> Jen ten (vid zznamy)</option>\n                          <option value=\"READ_WRITE\"> ten + Editace</option>\n                          <option value=\"READ_WRITE_DELETE\"> Pln pstup (i mazn)</option>\n                          <option value=\"INHERIT\"> Ddit prva podzenho</option>\n                        </select>\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* NEAKTIVN MODULY - zatm bez workflow */}\n                  <div style={{\n                    marginTop: '12px',\n                    paddingTop: '12px',\n                    borderTop: '1px dashed #e5e7eb'\n                  }}>\n                    <div style={{\n                      fontSize: '0.75rem',\n                      color: '#6b7280',\n                      marginBottom: '8px',\n                      fontWeight: 600,\n                      textTransform: 'uppercase',\n                      letterSpacing: '0.5px'\n                    }}>\n                      Plnovan moduly (TODO):\n                    </div>\n                    \n                    <CheckboxLabel style={{ opacity: 0.5, cursor: 'not-allowed' }}>\n                      <input \n                        type=\"checkbox\" \n                        disabled\n                        checked={moduleVisibility.contracts}\n                        onChange={(e) => setModuleVisibility(prev => ({ ...prev, contracts: e.target.checked }))}\n                      />\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                        <span> Smlouvy</span>\n                        <span style={{ fontSize: '0.7rem', color: '#6b7280' }}>(pipravujeme)</span>\n                      </div>\n                    </CheckboxLabel>\n                  </div>\n                </CheckboxGroup>\n                \n                {/* Poznmka o prvech */}\n                <div style={{\n                  marginTop: '12px',\n                  padding: '10px',\n                  background: '#fffbeb',\n                  border: '1px solid #fde68a',\n                  borderRadius: '6px',\n                  fontSize: '0.75rem',\n                  color: '#92400e'\n                }}>\n                  <strong> Dleit:</strong> Vztah funguje jen pokud m uivatel globln prvo\n                  (nap. <code style={{ background: '#fef3c7', padding: '2px 4px', borderRadius: '3px' }}>ORDER_EDIT_OWN</code>).\n                </div>\n              </DetailSection>\n              </>\n                );\n              })()}\n\n              {/* Sekce Rozen lokality/seky - POUZE pro edge (vztahy) kde m smysl */}\n              {selectedEdge && (() => {\n                const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                const sourceType = sourceNode?.data?.metadata?.type || sourceNode?.data?.type || 'user';\n                const targetType = targetNode?.data?.metadata?.type || targetNode?.data?.type || 'user';\n                const relationInfo = getRelationshipTypeInfo(sourceType, targetType);\n                \n                if (!relationInfo.showExtended) return null;\n                \n                return (\n              <>\n              <Divider />\n\n              <DetailSection>\n                <DetailSectionTitle>\n                  <FontAwesomeIcon icon={faMapMarkerAlt} />\n                  Rozen lokality\n                </DetailSectionTitle>\n                <FormGroup>\n                  <CustomSelect\n                    value={selectedExtendedLocations}\n                    onChange={(newValues) => setSelectedExtendedLocations(newValues)}\n                    options={allLocations}\n                    placeholder=\"Vyberte lokality...\"\n                    field=\"extendedLocations\"\n                    multiple={true}\n                    selectStates={selectStates}\n                    setSelectStates={setSelectStates}\n                    searchStates={searchStates}\n                    setSearchStates={setSearchStates}\n                    touchedSelectFields={touchedSelectFields}\n                    setTouchedSelectFields={setTouchedSelectFields}\n                    toggleSelect={toggleSelect}\n                    filterOptions={filterOptions}\n                    getOptionLabel={getOptionLabel}\n                    hasTriedToSubmit={false}\n                  />\n                </FormGroup>\n              </DetailSection>\n\n              <Divider />\n\n              <DetailSection>\n                <DetailSectionTitle>\n                  <FontAwesomeIcon icon={faBuilding} />\n                  Rozen seky\n                </DetailSectionTitle>\n                <FormGroup>\n                  <CustomSelect\n                    value={selectedExtendedDepartments}\n                    onChange={(newValues) => setSelectedExtendedDepartments(newValues)}\n                    options={allDepartments}\n                    placeholder=\"Vyberte seky...\"\n                    field=\"extendedDepartments\"\n                    multiple={true}\n                    selectStates={selectStates}\n                    setSelectStates={setSelectStates}\n                    searchStates={searchStates}\n                    setSearchStates={setSearchStates}\n                    touchedSelectFields={touchedSelectFields}\n                    setTouchedSelectFields={setTouchedSelectFields}\n                    toggleSelect={toggleSelect}\n                    filterOptions={filterOptions}\n                    getOptionLabel={getOptionLabel}\n                    hasTriedToSubmit={false}\n                  />\n                </FormGroup>\n              </DetailSection>\n\n              <Divider />\n\n              <DetailSection>\n                <DetailSectionTitle>\n                  <FontAwesomeIcon icon={faLayerGroup} />\n                  Kombinace lokalita + sek\n                </DetailSectionTitle>\n                <p style={{ fontSize: '0.85rem', color: '#6c757d', marginBottom: '12px' }}>\n                  Specifick kombinace lokalita+sek (AND logika). Nap. \"jen IT z Berouna\".\n                </p>\n                {selectedCombinations.length > 0 ? (\n                  <CombinationTable>\n                    <thead>\n                      <tr>\n                        <th>Lokalita</th>\n                        <th>sek</th>\n                        <th style={{ width: '40px' }}></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {selectedCombinations.map((combo, index) => {\n                        const location = allLocations.find(l => l.id === combo.locationId);\n                        const department = allDepartments.find(d => d.id === combo.departmentId);\n                        return (\n                          <tr key={index}>\n                            <td>{location?.name || 'N/A'}</td>\n                            <td>{department?.name || 'N/A'}</td>\n                            <td>\n                              <button onClick={() => {\n                                setSelectedCombinations(prev => prev.filter((_, i) => i !== index));\n                              }}>\n                                <FontAwesomeIcon icon={faTimes} />\n                              </button>\n                            </td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </CombinationTable>\n                ) : (\n                  <p style={{ fontSize: '0.85rem', color: '#adb5bd', fontStyle: 'italic', marginTop: '8px' }}>\n                    Zatim zadne kombinace\n                  </p>\n                )}\n                <CombinationAddRow>\n                  <FormGroup style={{ marginBottom: 0 }}>\n                    <Label>Lokalita</Label>\n                    <Select id=\"combo-location-select\">\n                      <option value=\"\">-- Vyberte lokalitu --</option>\n                      {allLocations.map(loc => (\n                        <option key={loc.id} value={loc.id}>\n                          {loc.name} {loc.code ? `(${loc.code})` : ''}\n                        </option>\n                      ))}\n                    </Select>\n                  </FormGroup>\n                  <FormGroup style={{ marginBottom: 0 }}>\n                    <Label>sek</Label>\n                    <Select id=\"combo-department-select\">\n                      <option value=\"\">-- Vyberte sek --</option>\n                      {allDepartments.map(dept => (\n                        <option key={dept.id} value={dept.id}>\n                          {dept.name} {dept.code ? `(${dept.code})` : ''}\n                        </option>\n                      ))}\n                    </Select>\n                  </FormGroup>\n                  <button onClick={() => {\n                    const locSelect = document.getElementById('combo-location-select');\n                    const deptSelect = document.getElementById('combo-department-select');\n                    const locationId = locSelect.value;\n                    const departmentId = deptSelect.value;\n                    \n                    if (locationId && departmentId) {\n                      // Check if combination already exists\n                      const exists = selectedCombinations.some(\n                        c => c.locationId === locationId && c.departmentId === departmentId\n                      );\n                      \n                      if (!exists) {\n                        setSelectedCombinations(prev => [...prev, { locationId, departmentId }]);\n                        locSelect.value = '';\n                        deptSelect.value = '';\n                      }\n                    }\n                  }}>\n                    Pridat\n                  </button>\n                </CombinationAddRow>\n              </DetailSection>\n              </>\n                );\n              })()}\n\n              {/* Sekce notifikac - zobraz jen kdy edge obsahuje template */}\n              {selectedEdge && (() => {\n                const sourceNode = nodes.find(n => n.id === selectedEdge.source);\n                const targetNode = nodes.find(n => n.id === selectedEdge.target);\n                const isTemplateEdge = sourceNode?.data?.type === 'template' || targetNode?.data?.type === 'template';\n                \n                if (!isTemplateEdge) return null;\n                \n                // Najdi template node\n                const templateNode = sourceNode?.data?.type === 'template' ? sourceNode : targetNode;\n                \n                return (\n                  <>\n                    <DetailSection>\n                      <DetailSectionTitle>\n                        <FontAwesomeIcon icon={faBell} />\n                        Nastaven notifikac\n                      </DetailSectionTitle>\n                      <div style={{ \n                        padding: '12px', \n                        background: '#fef3c7', \n                        borderRadius: '6px',\n                        marginBottom: '12px',\n                        border: '1px solid #fbbf24'\n                      }}>\n                        <div style={{ fontSize: '0.8rem', color: '#78350f', fontWeight: 500 }}>\n                           <strong>{templateNode?.data?.name}</strong>\n                        </div>\n                        <div style={{ fontSize: '0.75rem', color: '#92400e', marginTop: '4px' }}>\n                          Bude odeslna: {targetNode?.data?.type === 'template' ? sourceNode.data.name : targetNode.data.name}\n                        </div>\n                        <div style={{ \n                          fontSize: '0.7rem', \n                          color: '#92400e', \n                          marginTop: '6px',\n                          fontStyle: 'italic',\n                          paddingTop: '6px',\n                          borderTop: '1px solid #fbbf24'\n                        }}>\n                           Variantu HTML emailu vyberte v detailu notifikanho uzlu (kliknte na uzel)\n                        </div>\n                      </div>\n                      \n                      {/* Recipient Type Display */}\n                      <div style={{ \n                        padding: '10px', \n                        background: '#e0f2fe', \n                        borderRadius: '6px',\n                        marginBottom: '12px',\n                        border: '2px solid #0ea5e9'\n                      }}>\n                        <div style={{ fontSize: '0.8rem', color: '#0c4a6e', fontWeight: 600, marginBottom: '4px' }}>\n                           Typ pjemce\n                        </div>\n                        <div style={{ fontSize: '0.85rem', color: '#0369a1', fontWeight: 700 }}>\n                          {(() => {\n                            const recipientNode = targetNode?.data?.type === 'template' ? sourceNode : targetNode;\n                            const nodeType = recipientNode?.data?.type;\n                            const genericType = recipientNode?.data?.genericType;\n                            \n                            if (nodeType === 'genericRecipient' && genericType) {\n                              const labels = {\n                                'TRIGGER_USER': ' Spout akce',\n                                'ENTITY_AUTHOR': ' Objednatel / Autor',\n                                'ENTITY_OWNER': ' Pkazce / Vlastnk'\n                              };\n                              return labels[genericType] || genericType;\n                            } else if (nodeType === 'user') {\n                              return ' Konkrtn uivatel';\n                            } else if (nodeType === 'role') {\n                              return ' Role (vichni s touto rol)';\n                            } else if (nodeType === 'group') {\n                              return ' Skupina';\n                            } else {\n                              return nodeType?.toUpperCase() || 'NEZNM';\n                            }\n                          })()}\n                        </div>\n                        <div style={{ \n                          fontSize: '0.7rem', \n                          color: '#0c4a6e', \n                          marginTop: '4px',\n                          fontStyle: 'italic'\n                        }}>\n                          Uruje, komu se bude notifikace poslat\n                        </div>\n                      </div>\n                      \n                      {/* Typ notifikace pro pjemce */}\n                      <FormGroup style={{ marginBottom: '16px' }}>\n                        <Label>\n                           Jak dleit je tato notifikace?\n                          <span style={{ color: '#f59e0b', marginLeft: '4px' }}>*</span>\n                        </Label>\n                        <Select \n                          value={edgeRecipientRole}\n                          onChange={(e) => setEdgeRecipientRole(e.target.value)}\n                          title=\"Uruje, kterou barvu emailu pout\"\n                        >\n                          <option value=\"EXCEPTIONAL\"> URGENTN - kritick, vyaduje rychlou akci</option>\n                          <option value=\"APPROVAL\"> NORMLN - standardn notifikace</option>\n                          <option value=\"INFO\"> INFORMACE - jen pro vdom, nic nedlat</option>\n                        </Select>\n                        <div style={{ \n                          fontSize: '0.75rem', \n                          color: '#64748b', \n                          marginTop: '6px',\n                          lineHeight: '1.5'\n                        }}>\n                           <strong>Toto uruje, kterou BARVU emailu pout</strong> (z nastaven ablony):<br/>\n                           <strong>URGENTN</strong> = pouije se  erven varianta emailu<br/>\n                           <strong>NORMLN</strong> = pouije se  oranov varianta emailu<br/>\n                           <strong>INFORMACE</strong> = pouije se  zelen varianta emailu\n                        </div>\n                      </FormGroup>\n                      \n                      {/* Event Types Multi-select */}\n                      <FormGroup style={{ marginBottom: '16px' }}>\n                        <Label>\n                          Typy udlost (Event Types)\n                          <span style={{ color: '#10b981', marginLeft: '4px', fontWeight: 'normal' }}>voliteln</span>\n                        </Label>\n                        <CustomSelect\n                          multiple\n                          value={selectedNotificationEventTypes}\n                          onChange={(value) => setSelectedNotificationEventTypes(value)}\n                          options={(notificationEventTypes || []).map(eventType => ({\n                            id: eventType.kod || eventType.code,\n                            value: eventType.kod || eventType.code,\n                            label: `${eventType.nazev || eventType.name} (${eventType.kod || eventType.code})`\n                          }))}\n                          placeholder=\"Vyberte typy udlost...\"\n                          field=\"selectedNotificationEventTypes\"\n                          selectStates={selectStates}\n                          setSelectStates={setSelectStates}\n                          searchStates={searchStates}\n                          setSearchStates={setSearchStates}\n                          touchedSelectFields={touchedSelectFields}\n                          setTouchedSelectFields={setTouchedSelectFields}\n                          toggleSelect={toggleSelect}\n                          filterOptions={filterOptions}\n                          getOptionLabel={getOptionLabel}\n                          hasTriedToSubmit={false}\n                        />\n                        <div style={{ \n                          fontSize: '0.75rem', \n                          color: '#64748b', \n                          marginTop: '6px',\n                          lineHeight: '1.5'\n                        }}>\n                           <strong>Kdy poslat tuto notifikace?</strong> Vyberte udlosti:<br/>\n                           Nap. <strong>ORDER_SENT_FOR_APPROVAL</strong> = kdy nkdo odele objednvku ke schvlen<br/>\n                           Mete vybrat vce udlost najednou<br/>\n                           Pokud nevyberete dnou  notifikace se nepouije automaticky\n                        </div>\n                      </FormGroup>\n                      \n\n                      \n\n\n                      {/* Scope Filter - nov systm pro filtrovn pjemc */}\n                      <FormGroup style={{ marginBottom: '16px' }}>\n                        <div style={{\n                          padding: '12px',\n                          background: '#f0fdf4',\n                          border: '2px solid #10b981',\n                          borderRadius: '8px'\n                        }}>\n                          <label style={{ \n                            fontSize: '0.85rem', \n                            fontWeight: '600', \n                            color: '#065f46', \n                            marginBottom: '8px',\n                            display: 'block'\n                          }}>\n                             Komu poslat (Scope Filter)\n                          </label>\n                          <select \n                            value={edgeScopeFilter}\n                            onChange={(e) => setEdgeScopeFilter(e.target.value)}\n                            style={{\n                              width: '100%',\n                              padding: '8px',\n                              fontSize: '0.85rem',\n                              border: '2px solid #10b981',\n                              borderRadius: '6px',\n                              backgroundColor: 'white',\n                              cursor: 'pointer',\n                              marginBottom: '8px'\n                            }}\n                          >\n                            <optgroup label=\" ZKLADN FILTRY \">\n                              <option value=\"NONE\">Bez filtru - vichni danho typu</option>\n                              <option value=\"LOCATION\">Z lokality entity</option>\n                              <option value=\"DEPARTMENT\">Z seku entity</option>\n                            </optgroup>\n                            <optgroup label=\" ASTNCI TTO ENTITY  \">\n                              <option value=\"PARTICIPANTS_ALL\"> Vichni astnci</option>\n                              <option value=\"PARTICIPANTS_OBJEDNATEL\">Jen objednatel</option>\n                              <option value=\"PARTICIPANTS_PRIKAZCE\">Jen pkazce</option>\n                              <option value=\"PARTICIPANTS_GARANT\">Jen garant</option>\n                              <option value=\"PARTICIPANTS_SCHVALOVATEL\">Jen schvalovatel</option>\n                            </optgroup>\n                          </select>\n                          <div style={{ fontSize: '0.75rem', color: '#047857', lineHeight: '1.5', marginTop: '4px' }}>\n                            {(!selectedEdge.data?.scope_filter || selectedEdge.data?.scope_filter === 'NONE') && (\n                              <span> <strong>Bez filtru:</strong> Pole vem uivatelm danho typu (role/sek/lokalita) bez omezen.</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'LOCATION' && (\n                              <span> <strong>Z lokality:</strong> Pole jen uivatelm z lokality, kde je objednvka/faktura.</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'DEPARTMENT' && (\n                              <span> <strong>Z seku:</strong> Pole jen uivatelm z seku, kde je objednvka/faktura.</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'PARTICIPANTS_ALL' && (\n                              <span> <strong>Vichni astnci:</strong> Pole VEM, kdo jsou piazeni k tto konkrtn objednvce (objednatel, garant, pkazce, schvalovatel).</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'PARTICIPANTS_OBJEDNATEL' && (\n                              <span> <strong>Jen objednatel:</strong> Pole JEN objednateli tto konkrtn objednvky (pole objednatel_id).</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'PARTICIPANTS_PRIKAZCE' && (\n                              <span> <strong>Jen pkazce:</strong> Pole JEN pkazci tto konkrtn objednvky (pole prikazce_id).</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'PARTICIPANTS_GARANT' && (\n                              <span> <strong>Jen garant:</strong> Pole JEN garantovi tto konkrtn objednvky (pole garant_id).</span>\n                            )}\n                            {selectedEdge.data?.scope_filter === 'PARTICIPANTS_SCHVALOVATEL' && (\n                              <span> <strong>Jen schvalovatel:</strong> Pole JEN schvalovatelm tto konkrtn objednvky (schvalovatel_1_id, schvalovatel_2_id...).</span>\n                            )}\n                          </div>\n                        </div>\n                      </FormGroup>\n                      \n                      <CheckboxGroup>\n                        <CheckboxLabel>\n                          <input \n                            type=\"checkbox\"\n                            checked={edgeSendEmail}\n                            onChange={(e) => setEdgeSendEmail(e.target.checked)}\n                          />\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            <FontAwesomeIcon icon={faEnvelope} style={{ color: '#667eea' }} />\n                            <span>Poslat emailem</span>\n                          </div>\n                        </CheckboxLabel>\n                        <CheckboxLabel>\n                          <input \n                            type=\"checkbox\"\n                            checked={edgeSendInApp}\n                            onChange={(e) => setEdgeSendInApp(e.target.checked)}\n                          />\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            <FontAwesomeIcon icon={faBell} style={{ color: '#f5576c' }} />\n                            <span>Zobrazit ve zvoneku (in-app)</span>\n                          </div>\n                        </CheckboxLabel>\n                      </CheckboxGroup>\n                      \n                      {/* Source INFO Recipients Configuration */}\n                      <div style={{ \n                        marginTop: '16px',\n                        padding: '12px',\n                        background: '#eff6ff',\n                        borderRadius: '8px',\n                        border: '1px solid #bfdbfe'\n                      }}>\n                        <CheckboxLabel style={{ marginBottom: '12px' }}>\n                          <input \n                            type=\"checkbox\"\n                            checked={sourceInfoEnabled}\n                            onChange={(e) => setSourceInfoEnabled(e.target.checked)}\n                          />\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            <FontAwesomeIcon icon={faInfoCircle} style={{ color: '#3b82f6' }} />\n                            <span><strong>Odeslat INFO potvrzen tvrcm udlosti</strong></span>\n                          </div>\n                        </CheckboxLabel>\n                        \n                        {sourceInfoEnabled && (\n                          <div style={{ marginLeft: '24px', marginTop: '8px' }}>\n                            <div style={{ fontSize: '0.75rem', color: '#64748b', marginBottom: '8px' }}>\n                              Vyberte pole z objednvky, jejich uivatel dostanou INFO notifikaci:\n                            </div>\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: '6px', fontSize: '0.85rem' }}>\n                              {[\n                                { value: 'uzivatel_id', label: 'Autor (uzivatel_id)' },\n                                { value: 'garant_uzivatel_id', label: 'Garant (garant_uzivatel_id)' },\n                                { value: 'objednatel_id', label: 'Objednatel (objednatel_id)' },\n                                { value: 'schvalovatel_id', label: 'Schvalovatel (schvalovatel_id)' },\n                                { value: 'prikazce_id', label: 'Pkazce (prikazce_id)' },\n                                { value: 'dodavatel_id', label: 'Dodavatel (dodavatel_id)' },\n                                { value: 'odesilatel_id', label: 'Odeslatel (odesilatel_id)' },\n                                { value: 'fakturant_id', label: 'Fakturant (fakturant_id)' },\n                                { value: 'zverejnil_id', label: 'Zveejnil (zverejnil_id)' },\n                                { value: 'dokoncil_id', label: 'Dokonil (dokoncil_id)' }\n                              ].map(field => (\n                                <CheckboxLabel key={field.value} style={{ fontSize: '0.85rem' }}>\n                                  <input \n                                    type=\"checkbox\"\n                                    checked={sourceInfoFields.includes(field.value)}\n                                    onChange={(e) => {\n                                      if (e.target.checked) {\n                                        setSourceInfoFields([...sourceInfoFields, field.value]);\n                                      } else {\n                                        setSourceInfoFields(sourceInfoFields.filter(f => f !== field.value));\n                                      }\n                                    }}\n                                  />\n                                  <span>{field.label}</span>\n                                </CheckboxLabel>\n                              ))}\n                            </div>\n                            <div style={{ \n                              marginTop: '8px', \n                              fontSize: '0.7rem', \n                              color: '#64748b',\n                              fontStyle: 'italic'\n                            }}>\n                               NULL hodnoty se automaticky pesko\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div style={{ \n                        marginTop: '12px',\n                        padding: '10px',\n                        background: '#f0fdf4',\n                        borderRadius: '6px',\n                        fontSize: '0.75rem',\n                        color: '#166534',\n                        border: '1px solid #86efac'\n                      }}>\n                        <strong> Hierarchie rozhodovn:</strong>\n                        <ol style={{ margin: '6px 0 0 18px', padding: 0 }}>\n                          <li>Globln nastaven aplikace</li>\n                          <li>Nastaven tohoto vztahu (zde)</li>\n                          <li>Uivatelsk preference v profilu</li>\n                        </ol>\n                        <div style={{ marginTop: '6px', fontSize: '0.7rem', color: '#15803d' }}>\n                          Notifikace se odele pouze kdy jsou vechny 3 rovn povoleny.\n                        </div>\n                      </div>\n                    </DetailSection>\n                    <Divider />\n                  </>\n                );\n              })()}\n\n              {/* Akn tlatka - zobrazit vdy kdy je vybran node nebo edge */}\n              {(selectedNode || selectedEdge) && (\n              <DetailSection>\n                {/* Tlatko 'Uloit zmny' odstranno - zmny se ukldaj automaticky pes useEffect */}\n                {/* Finln uloen do DB probhne pes hlavn tlatko ULOIT / ULOIT JAKO v headeru */}\n                <button\n                  onClick={selectedNode ? handleDeleteNode : handleDeleteEdge}\n                  style={{\n                    width: '100%',\n                    padding: '10px 16px',\n                    background: '#dc2626',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    gap: '8px',\n                    fontSize: '0.9rem',\n                    fontWeight: '600',\n                    transition: 'all 0.2s'\n                  }}\n                  onMouseEnter={(e) => {\n                    e.target.style.background = '#b91c1c';\n                    e.target.style.transform = 'translateY(-1px)';\n                    e.target.style.boxShadow = '0 4px 12px rgba(220, 38, 38, 0.4)';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.target.style.background = '#dc2626';\n                    e.target.style.transform = 'translateY(0)';\n                    e.target.style.boxShadow = 'none';\n                  }}\n                >\n                  <FontAwesomeIcon icon={faTrash} />\n                  <span>{selectedNode ? 'Odstranit uzel' : 'Odstranit vztah'}</span>\n                </button>\n              </DetailSection>\n              )}\n            </DetailContent>\n          </DetailPanel>\n        )}\n      </MainContent>\n\n      {dialog.show && (\n        <DialogOverlay onClick={() => dialog.onCancel?.()}>\n          <DialogBox onClick={(e) => e.stopPropagation()}>\n            <DialogIcon>{dialog.icon}</DialogIcon>\n            <DialogTitle>{dialog.title}</DialogTitle>\n            <DialogMessage>{dialog.message}</DialogMessage>\n            {dialog.stats && (\n              <DialogStats>\n                {Object.entries(dialog.stats).map(([key, value]) => (\n                  <div key={key}>\n                    <strong>{key}:</strong>\n                    <span>{value}</span>\n                  </div>\n                ))}\n              </DialogStats>\n            )}\n            <DialogActions>\n              {dialog.cancelText && (\n                <DialogButton onClick={dialog.onCancel}>\n                  {dialog.cancelText}\n                </DialogButton>\n              )}\n              <DialogButton primary onClick={dialog.onConfirm}>\n                {dialog.confirmText}\n              </DialogButton>\n            </DialogActions>\n          </DialogBox>\n        </DialogOverlay>\n      )}\n\n      {/* Detail Help Modal */}\n      {showDetailHelpModal && (\n        <DialogOverlay onClick={(e) => {\n          // Zavt pouze pi kliknut na overlay, ne na dialogBox\n          if (e.target === e.currentTarget) {\n            setShowDetailHelpModal(false);\n          }\n        }}>\n          <DialogBox onClick={(e) => e.stopPropagation()} style={{ maxWidth: '700px' }}>\n            <DialogIcon></DialogIcon>\n            <DialogTitle>\n              {selectedNode ? 'Npovda k detailu uzlu' : 'Npovda k detailu vztahu'}\n            </DialogTitle>\n            <HelpModalContent>\n              {selectedNode ? (\n                // Node help\n                <>\n                  <HelpSection>\n                    <h3> {selectedNode.data?.label}</h3>\n                    <p>Panel zobrazuje vztahy tohoto uzlu v diagramu:</p>\n                    <p style={{ marginTop: '8px' }}>\n                      <strong> Nadzen</strong> - komu tento uzel podlh<br/>\n                      <strong> Podzen</strong> - kdo tomuto uzlu podlh\n                    </p>\n                  </HelpSection>\n\n                  <HelpSection>\n                    <h3> Ukldn</h3>\n                    <p>\n                      Zmny se automaticky ukldaj do <code>localStorage</code>. Pro trval uloen do DB pouijte \n                      tlatko <strong>\" Uloit do DB\"</strong>.\n                    </p>\n                  </HelpSection>\n                </>\n              ) : (\n                // Edge help\n                <>\n                  <HelpSection>\n                    <h3> {(() => {\n                      const sourceNode = nodes.find(n => n.id === selectedEdge?.source);\n                      const targetNode = nodes.find(n => n.id === selectedEdge?.target);\n                      return `${sourceNode?.data?.label || '?'}  ${targetNode?.data?.label || '?'}`;\n                    })()}</h3>\n                    <p><strong>Nadzen zskv prva vidt data od Podzenho</strong> podle nastaven.</p>\n                  </HelpSection>\n\n                  <HelpSection>\n                    <h3> Rozsah ({relationshipScope})</h3>\n                    <p>\n                      <code>OWN</code> - vlastn zznamy podzenho<br/>\n                      <code>TEAM</code> - cel sek podzenho<br/>\n                      <code>LOCATION</code> - cel lokalita podzenho<br/>\n                      <code>ALL</code> - kompletn pstup\n                    </p>\n                  </HelpSection>\n\n                  <HelpSection>\n                    <h3> rove prv</h3>\n                    <p>Uruje, CO me nadzen dlat se zznamy podzenho:</p>\n                    <HelpExample>\n                      <strong>Pklad:</strong>\n                      <span>\n                        Holovsk (THP) m prvo <code>CREATE + EDIT</code> vlastn objednvky.<br/>\n                        ernhorsk je nadzen s rovn <code>READ_ONLY</code>.<br/>\n                         ernhorsk <strong>vid</strong> Holovskho objednvky, ale <strong>neme je editovat</strong>.\n                      </span>\n                    </HelpExample>\n                    <p style={{ marginTop: '12px', fontSize: '0.85rem' }}>\n                      <code>READ_ONLY</code> - vid zznamy, neme editovat<br/>\n                      <code>READ_WRITE</code> - me editovat zznamy<br/>\n                      <code>READ_WRITE_DELETE</code> - pln pstup vetn mazn<br/>\n                      <code>INHERIT</code> - dd stejn prva jako podzen\n                    </p>\n                    {(moduleVisibility.orders || moduleVisibility.invoices || moduleVisibility.cashbook) && (\n                      <div style={{ marginTop: '8px', padding: '8px', background: '#f0fdf4', borderRadius: '6px', border: '1px solid #86efac' }}>\n                        <strong style={{ fontSize: '0.85rem', color: '#166534' }}>Aktuln nastaven:</strong>\n                        <div style={{ fontSize: '0.8rem', color: '#166534', marginTop: '4px' }}>\n                          {moduleVisibility.orders && ` Objednvky: ${permissionLevel.orders}`}<br/>\n                          {moduleVisibility.invoices && ` Faktury: ${permissionLevel.invoices}`}<br/>\n                          {moduleVisibility.cashbook && ` Pokladna: ${permissionLevel.cashbook}`}\n                        </div>\n                      </div>\n                    )}\n                  </HelpSection>\n\n                  <HelpSection>\n                    <h3> Rozen oprvnn</h3>\n                    <p>\n                      <strong>Lokality/seky:</strong> Nadzen vid data i z dalch mst mimo zkladn vztah.<br/>\n                      <strong>Notifikace:</strong> {edgeSendEmail ? 'Email ' : 'Email '} {edgeSendInApp ? 'In-app ' : 'In-app '}\n                    </p>\n                  </HelpSection>\n\n                  <HelpSection>\n                    <h3> Kompletn pklad</h3>\n                    <HelpExample>\n                      <span style={{ fontSize: '0.85rem' }}>\n                        <strong>Situace:</strong> Petr je nadzen Jana.<br/>\n                        <strong>Nastaven:</strong> TEAM scope, modul Objednvky, rove READ_ONLY<br/><br/>\n                        <strong>Vsledek:</strong><br/>\n                         Petr <strong>vid vechny objednvky</strong> z Janova seku (i od koleg)<br/>\n                         Petr <strong>neme editovat</strong> tyto objednvky (jen st)<br/>\n                         Pokud Jan m prvo vytvet, Petr to prvo <strong>nedostane</strong>\n                      </span>\n                    </HelpExample>\n                  </HelpSection>\n                </>\n              )}\n            </HelpModalContent>\n            <DialogActions style={{ marginTop: '20px' }}>\n              <DialogButton primary onClick={() => setShowDetailHelpModal(false)}>\n                Rozumm\n              </DialogButton>\n            </DialogActions>\n          </DialogBox>\n        </DialogOverlay>\n      )}\n\n      {/* Custom Confirm Dialog */}\n      {confirmDialog.isOpen && (\n        <ModalOverlay onClick={() => setConfirmDialog({ isOpen: false, title: '', message: '', onConfirm: null })}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalHeader>\n              <FontAwesomeIcon icon={faTrash} />\n              {confirmDialog.title}\n            </ModalHeader>\n            <ModalBody>\n              {confirmDialog.message}\n            </ModalBody>\n            <ModalActions>\n              <ModalButton\n                onClick={() => setConfirmDialog({ isOpen: false, title: '', message: '', onConfirm: null })}\n              >\n                Zruit\n              </ModalButton>\n              <ModalButton\n                variant=\"danger\"\n                onClick={confirmDialog.onConfirm}\n              >\n                Ano, smazat\n              </ModalButton>\n            </ModalActions>\n          </ModalContent>\n        </ModalOverlay>\n      )}\n      \n      {/* Profile Save As Dialog */}\n      {showProfileDialog && (\n        <ProfileDialog\n          mode={profileDialogMode}\n          onClose={() => setShowProfileDialog(false)}\n          onSave={handleProfileSaveConfirm}\n          existingProfiles={profiles}\n        />\n      )}\n      \n      {/* Fullscreen Email Modal */}\n      {showFullscreenEmailModal && (\n        <FullscreenEmailModal\n          isOpen={showFullscreenEmailModal}\n          onClose={() => {\n            setShowFullscreenEmailModal(false);\n            setFullscreenEmailData(null);\n          }}\n          emailData={fullscreenEmailData}\n        />\n      )}\n      </Container>\n    </>\n  );\n};\n\n// Profile Dialog Component\nconst ProfileDialog = ({ mode, onClose, onSave, existingProfiles }) => {\n  const [profileName, setProfileName] = React.useState('');\n  const [profileDescription, setProfileDescription] = React.useState('');\n  const [error, setError] = React.useState('');\n  const [showConfirm, setShowConfirm] = React.useState(false);\n  \n  const handleSubmit = async () => {\n    if (!profileName.trim()) {\n      setError('Nazev profilu je povinny');\n      return;\n    }\n    \n    const result = await onSave(profileName, profileDescription);\n    \n    if (result.exists) {\n      setShowConfirm(true);\n    } else if (result.error) {\n      setError(result.error);\n    } else {\n      onClose();\n    }\n  };\n  \n  const handleOverwrite = async () => {\n    // TODO: Implementovat pepsn existujcho profilu\n    setShowConfirm(false);\n    onClose();\n  };\n  \n  if (showConfirm) {\n    return (\n      <DialogOverlay onClick={onClose}>\n        <DialogBox onClick={(e) => e.stopPropagation()}>\n          <DialogIcon></DialogIcon>\n          <DialogTitle>Profil jiz existuje</DialogTitle>\n          <DialogMessage>\n            Profil s nazvem \"<strong>{profileName}</strong>\" jiz existuje.\n            <br/><br/>\n            Chcete jej prepsat?\n          </DialogMessage>\n          <DialogActions>\n            <DialogButton onClick={() => setShowConfirm(false)}>\n              Zrusit\n            </DialogButton>\n            <DialogButton primary onClick={handleOverwrite}>\n              Ano, prepsat\n            </DialogButton>\n          </DialogActions>\n        </DialogBox>\n      </DialogOverlay>\n    );\n  }\n  \n  return (\n    <DialogOverlay onClick={onClose}>\n      <DialogBox onClick={(e) => e.stopPropagation()} style={{ maxWidth: '500px' }}>\n        <DialogIcon></DialogIcon>\n        <DialogTitle>{mode === 'saveAs' ? 'Ulozit jako novy profil' : 'Ulozit profil'}</DialogTitle>\n        <div style={{ padding: '20px', textAlign: 'left' }}>\n          <FormGroup>\n            <Label>Nazev profilu *</Label>\n            <Input\n              type=\"text\"\n              value={profileName}\n              onChange={(e) => {\n                setProfileName(e.target.value);\n                setError('');\n              }}\n              placeholder=\"napr. ZZSSK 2025, DEV DEMO...\"\n              autoFocus\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>Popis (volitelny)</Label>\n            <textarea\n              value={profileDescription}\n              onChange={(e) => setProfileDescription(e.target.value)}\n              placeholder=\"Strucny popis profilu...\"\n              rows={3}\n              style={{\n                width: '100%',\n                padding: '10px',\n                borderRadius: '6px',\n                border: '1px solid #e0e6ed',\n                fontSize: '0.95rem',\n                fontFamily: 'inherit',\n                resize: 'vertical'\n              }}\n            />\n          </FormGroup>\n          {error && (\n            <div style={{ \n              padding: '10px', \n              background: '#fee', \n              border: '1px solid #fcc',\n              borderRadius: '6px',\n              color: '#c00',\n              fontSize: '0.9rem',\n              marginTop: '10px'\n            }}>\n              {error}\n            </div>\n          )}\n        </div>\n        <DialogActions>\n          <DialogButton onClick={onClose}>\n            Zrusit\n          </DialogButton>\n          <DialogButton primary onClick={handleSubmit}>\n            Ulozit\n          </DialogButton>\n        </DialogActions>\n      </DialogBox>\n    </DialogOverlay>\n  );\n};\n\n// Fullscreen Email Modal Component\nconst FullscreenEmailModal = ({ isOpen, onClose, emailData }) => {\n  if (!isOpen || !emailData) return null;\n  \n  const { template, mockData, replacePlaceholders, selectedVariantType } = emailData;\n  \n  // Funkce pro extrakci sprvn varianty z email_body\n  const extractEmailVariant = (emailBody, variantType) => {\n    if (!emailBody) return emailBody;\n    \n    // Pokud je DEFAULT nebo nen delimiter, vra cel email_body\n    if (variantType === 'DEFAULT' || !emailBody.includes('<!-- RECIPIENT:')) {\n      return emailBody;\n    }\n    \n    // Extrahuj specifickou variantu\n    const delimiter = `<!-- RECIPIENT: ${variantType} -->`;\n    const startPos = emailBody.indexOf(delimiter);\n    \n    if (startPos === -1) {\n      return emailBody; // Fallback\n    }\n    \n    // Najdi zatek HTML (po delimiteru)\n    let htmlStart = startPos + delimiter.length;\n    \n    // Najdi konec (dal delimiter nebo konec stringu)\n    const otherDelimiters = ['APPROVER_NORMAL', 'APPROVER_URGENT', 'SUBMITTER']\n      .filter(d => d !== variantType)\n      .map(d => `<!-- RECIPIENT: ${d} -->`);\n    \n    let htmlEnd = emailBody.length;\n    for (const otherDelimiter of otherDelimiters) {\n      const pos = emailBody.indexOf(otherDelimiter, htmlStart);\n      if (pos !== -1 && pos < htmlEnd) {\n        htmlEnd = pos;\n      }\n    }\n    \n    return emailBody.substring(htmlStart, htmlEnd).trim();\n  };\n  \n  const emailBodyToDisplay = extractEmailVariant(template.email_telo || template.email_body, selectedVariantType || 'DEFAULT');\n  \n  return (\n    <ModalOverlay onClick={onClose} style={{ zIndex: 20000 }}>\n      <div \n        onClick={(e) => e.stopPropagation()}\n        style={{\n          background: 'white',\n          borderRadius: '12px',\n          width: '98vw',\n          maxWidth: '1400px',\n          height: '75vh',\n          maxHeight: 'calc(100vh - 140px)',\n          display: 'flex',\n          flexDirection: 'column',\n          overflow: 'hidden',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.4)',\n          margin: '30px auto'\n        }}\n      >\n        {/* Header */}\n        <div style={{\n          padding: '16px 24px',\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          borderRadius: '12px 12px 0 0',\n          flexShrink: 0\n        }}>\n          <div>\n            <h2 style={{ margin: '0 0 6px 0', fontSize: '1.3rem', display: 'flex', alignItems: 'center', gap: '10px' }}>\n              <FontAwesomeIcon icon={faEnvelope} />\n              Email ablona\n              {selectedVariantType && selectedVariantType !== 'DEFAULT' && (() => {\n                const variantIcons = {\n                  'APPROVER_NORMAL': '',\n                  'APPROVER_URGENT': '',\n                  'SUBMITTER': ''\n                };\n                return variantIcons[selectedVariantType] || '';\n              })()}\n            </h2>\n            <div style={{ fontSize: '0.85rem', opacity: 0.95 }}>\n              <strong>ablona:</strong> {template.nazev || template.name || 'Bez nzvu'}\n              {selectedVariantType && selectedVariantType !== 'DEFAULT' && (\n                <>\n                  {'  '}\n                  <strong>Varianta:</strong> {\n                    selectedVariantType === 'APPROVER_NORMAL' ? 'Schvalovatel (normln)' :\n                    selectedVariantType === 'APPROVER_URGENT' ? 'Schvalovatel (mimodn)' :\n                    selectedVariantType === 'SUBMITTER' ? 'Autor objednvky' :\n                    selectedVariantType\n                  }\n                </>\n              )}\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'rgba(255,255,255,0.2)',\n              border: 'none',\n              color: 'white',\n              width: '40px',\n              height: '40px',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '1.5rem',\n              transition: 'all 0.2s'\n            }}\n            onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.3)'}\n            onMouseLeave={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.2)'}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n        </div>\n        \n        {/* Email Preview - IFRAME S JEDNM SCROLLEM */}\n        <div style={{\n          flex: 1,\n          overflow: 'hidden',\n          display: 'flex',\n          flexDirection: 'column',\n          background: 'white'\n        }}>\n          {/* Email Header */}\n          <div style={{\n            padding: '20px 30px',\n            borderBottom: '1px solid #e5e7eb',\n            background: '#fafbfc',\n            flexShrink: 0\n          }}>\n            <div style={{ marginBottom: '12px' }}>\n              <div style={{ fontSize: '1.1rem', fontWeight: '600', color: '#111827', lineHeight: '1.4' }}>\n                {replacePlaceholders(template.email_predmet || template.email_subject || 'Bez pedmtu')}\n              </div>\n            </div>\n            <div style={{ fontSize: '0.9rem', color: '#6b7280', marginBottom: '6px' }}>\n              <strong style={{ color: '#374151' }}>Od:</strong> EEO Systm &lt;noreply@eeo.cz&gt;\n            </div>\n            <div style={{ fontSize: '0.9rem', color: '#6b7280' }}>\n              <strong style={{ color: '#374151' }}>Komu:</strong> {mockData.recipient_name || mockData.user_name} &lt;{mockData.user_email}&gt;\n            </div>\n            <div style={{ fontSize: '0.85rem', color: '#9ca3af', marginTop: '8px' }}>\n              {mockData.datetime}\n            </div>\n          </div>\n          \n          {/* Email Body - IFRAME BEZ VLASTNHO SCROLLU */}\n          <iframe\n            title=\"Email Preview\"\n            style={{\n              width: '100%',\n              flex: 1,\n              border: 'none',\n              background: 'white',\n              overflow: 'hidden'\n            }}\n            srcDoc={`\n              <!DOCTYPE html>\n              <html>\n              <head>\n                <meta charset=\"UTF-8\">\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n                <style>\n                  html, body {\n                    margin: 0;\n                    padding: 0;\n                    font-family: Arial, sans-serif;\n                    background: #f9fafb;\n                    overflow: visible;\n                    height: auto;\n                  }\n                </style>\n              </head>\n              <body>\n                ${replacePlaceholders(emailBodyToDisplay || '<p style=\"color: #9ca3af; font-style: italic;\">Email tlo nen definovno v ablon</p>')}\n              </body>\n              </html>\n            `}\n          />\n        </div>\n      </div>\n    </ModalOverlay>\n  );\n};\n\nexport default OrganizationHierarchy;\n"],"names":["API_BASE_URL","process","replace","resizeObserverErr","window","console","error","_ref","errorMsg","arguments","length","undefined","message","includes","addEventListener","e","_e$message","_e$message$includes","_e$message2","_e$message2$includes","_e$message3","_e$message3$includes","call","stopImmediatePropagation","preventDefault","Container","styled","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","Title","h1","_templateObject3","HeaderActions","_templateObject4","Button","button","_templateObject5","props","primary","ModalOverlay","_templateObject6","ModalContent","_templateObject7","ModalHeader","_templateObject8","ModalBody","_templateObject9","ModalActions","_templateObject0","ModalButton","_templateObject1","variant","MainContent","_templateObject10","Sidebar","_templateObject11","SidebarHeader","_templateObject12","SidebarTitle","h3","_templateObject13","SearchBox","_templateObject14","SearchInput","input","_templateObject15","SearchIcon","_templateObject16","SearchClearButton","_templateObject17","SidebarContent","_templateObject18","CollapsibleSection","_templateObject19","SectionHeader","_templateObject20","expanded","SectionContent","_templateObject21","UserItem","_templateObject22","isDragging","UserAvatar","_templateObject23","UserInfo","_templateObject24","UserName","_templateObject25","UserMeta","_templateObject26","LocationItem","_templateObject27","LocationIcon","_templateObject28","DepartmentIcon","_templateObject29","CanvasArea","_templateObject30","DetailPanel","_templateObject31","DetailHeader","_templateObject32","DetailHeaderTitle","_templateObject33","CloseButton","_templateObject34","InfoButton","_templateObject35","DetailContent","_templateObject36","DetailSection","_templateObject37","DetailSectionTitle","h4","_templateObject38","FormGroup","_templateObject39","Label","label","_templateObject40","Input","_templateObject41","ProfileSelectWrapper","_templateObject42","ProfileSelect","select","_templateObject43","ProfileSelectArrow","_templateObject44","ProfileDeleteButton","_templateObject45","disabled","Select","_templateObject46","CheckboxGroup","_templateObject47","CheckboxLabel","_templateObject48","Divider","_templateObject49","_templateObject50","_templateObject51","CombinationTable","table","_templateObject52","CombinationAddRow","_templateObject53","DialogOverlay","_templateObject54","DialogBox","_templateObject55","DialogIcon","_templateObject56","DialogTitle","h2","_templateObject57","DialogMessage","_templateObject58","DialogActions","_templateObject59","DialogButton","_templateObject60","DialogStats","_templateObject61","HelpModalContent","_templateObject62","HelpSection","_templateObject63","HelpExample","_templateObject64","nodeTypes","custom","_ref2","data","selected","isTemplate","type","isRole","isLocation","isDepartment","_jsxs","style","padding","borderRadius","background","border","concat","minWidth","boxShadow","transition","position","transform","children","_jsx","Handle","Position","Right","width","height","cursor","right","display","alignItems","gap","justifyContent","fontSize","flex","fontWeight","color","marginBottom","name","Left","left","_data$metadata","metadata","userCount","textAlign","Top","Bottom","FontAwesomeIcon","icon","faMapMarkerAlt","faUserTie","notifications","hasEmail","hasInApp","top","title","faEnvelope","faBell","initials","paddingTop","borderTop","flexDirection","location","department","types","marginTop","edgeTypes","_ref3","_sourceNode$data","_sourceNode$data2","_sourceNode$data3","id","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","markerEnd","source","getNode","useReactFlow","edgePath","getSmoothStepPath","sourceNode","strokeColor","_Fragment","d","fill","stroke","strokeWidth","className","_objectSpread","strokeDasharray","animation","ProfileDialog","_ref11","mode","onClose","onSave","existingProfiles","profileName","setProfileName","React","profileDescription","setProfileDescription","setError","showConfirm","setShowConfirm","handleOverwrite","async","onClick","stopPropagation","maxWidth","value","onChange","target","placeholder","autoFocus","rows","fontFamily","resize","trim","result","exists","FullscreenEmailModal","_ref12","isOpen","emailData","template","mockData","replacePlaceholders","selectedVariantType","emailBodyToDisplay","extractEmailVariant","emailBody","variantType","delimiter","startPos","indexOf","htmlStart","otherDelimiters","filter","map","htmlEnd","otherDelimiter","pos","substring","email_telo","email_body","zIndex","maxHeight","overflow","margin","flexShrink","opacity","nazev","onMouseEnter","currentTarget","onMouseLeave","faTimes","borderBottom","lineHeight","email_predmet","email_subject","recipient_name","user_name","user_email","datetime","srcDoc","OrganizationHierarchy","_selectedNode$data$me","_selectedNode$data$me2","_selectedNode$data$me3","_selectedNode$data2","useRef","showToast","useContext","ToastContext","hasError","setHasError","useState","useEffect","handleError","event","_event$message","_event$message2","warn","removeEventListener","searchUsers","setSearchUsers","localStorage","getItem","searchRoles","setSearchRoles","searchLocations","setSearchLocations","searchDepartments","setSearchDepartments","searchTemplates","setSearchTemplates","expandedSections","setExpandedSections","saved","JSON","parse","users","roles","locations","departments","genericRecipients","notificationTemplates","selectedNode","setSelectedNode","selectedEdge","setSelectedEdge","showDetailPanel","setShowDetailPanel","loading","setLoading","nodes","setNodes","onNodesChange","useNodesState","edges","setEdges","onEdgesChange","useEdgesState","reactFlowInstance","setReactFlowInstance","allUsers","setAllUsers","allRoles","setAllRoles","allLocations","setAllLocations","allDepartments","setAllDepartments","notificationTypes","setNotificationTypes","allNotificationTemplates","setAllNotificationTemplates","notificationEventTypes","setNotificationEventTypes","selectedExtendedLocations","setSelectedExtendedLocations","selectedNotificationTypes","setSelectedNotificationTypes","selectedNotificationEventTypes","setSelectedNotificationEventTypes","edgeScopeFilter","setEdgeScopeFilter","edgeSendEmail","setEdgeSendEmail","edgeSendInApp","setEdgeSendInApp","edgeRecipientRole","setEdgeRecipientRole","sourceInfoEnabled","setSourceInfoEnabled","sourceInfoFields","setSourceInfoFields","relationshipType","setRelationshipType","relationshipScope","setRelationshipScope","templateNormalVariant","setTemplateNormalVariant","templateUrgentVariant","setTemplateUrgentVariant","templateInfoVariant","setTemplateInfoVariant","templatePreviewVariant","setTemplatePreviewVariant","templateEventTypes","setTemplateEventTypes","permissionLevel","setPermissionLevel","orders","invoices","contracts","cashbook","moduleVisibility","setModuleVisibility","cashbookReadonly","isShiftPressed","setIsShiftPressed","toggleSelect","useCallback","fieldName","setSelectStates","prev","filterOptions","options","searchTerm","normalized","toLowerCase","normalize","option","String","getOptionLabel","code","selectedExtendedDepartments","setSelectedExtendedDepartments","selectedCombinations","setSelectedCombinations","selectStates","searchStates","setSearchStates","touchedSelectFields","setTouchedSelectFields","profiles","setProfiles","currentProfile","setCurrentProfile","showProfileDialog","setShowProfileDialog","profileDialogMode","setProfileDialogMode","eds","_e$data","druh_vztahu","scope","modules","extended","combinations","prevSelectedEdgeId","current","scope_filter","sendEmail","sendInApp","recipientRole","source_info_recipients","enabled","fields","_selectedNode$data","nds","n","normalVariant","urgentVariant","infoVariant","previewVariant","eventTypes","selectedUsers","setSelectedUsers","Set","selectedRoles","setSelectedRoles","selectedLocations","setSelectedLocations","selectedDepartments","setSelectedDepartments","selectedNotificationTemplates","setSelectedNotificationTemplates","confirmDialog","setConfirmDialog","onConfirm","showHelp","setShowHelp","showDetailHelpModal","setShowDetailHelpModal","showFullscreenEmailModal","setShowFullscreenEmailModal","fullscreenEmailData","setFullscreenEmailData","dialog","setDialog","show","onCancel","confirmText","cancelText","stats","LS_NODES_KEY","LS_EDGES_KEY","LS_TIMESTAMP_KEY","LS_PROFILE_KEY","hasDraft","setHasDraft","setItem","stringify","Date","toISOString","err","handleDeleteSelected","selectedNodes","selectedEdges","nodeIdsToDelete","edgeIdsToDelete","log","handleKeyDown","key","metaKey","handleKeyUp","handleBlur","_structureData$data","_structureData$data$n","_structureData$data2","_structureData$data2$","draftLoaded","savedNodes","savedEdges","savedTimestamp","timestamp","now","getTime","parsedNodes","parsedEdges","removeItem","token","loadAuthData","userData","user","username","apiBase","fetchData","response","fetch","endpoint","method","headers","body","ok","Error","status","json","usersData","rolesData","locationsData","departmentsData","profilesData","notifTypesData","templatesData","eventTypesData","Promise","all","rolesWithUserCount","role","Array","isArray","profilesList","selectedProfile","savedProfileId","find","p","parseInt","getGlobalSettings","globalSettings","hierarchy_profile_id","_selectedProfile","isActive","structureData","success","profile_id","then","r","shouldLoadFromApi","_structureData","_structureData$data3","_structureData2","_structureData2$data","_structureData3","_structureData3$data","_structureData4","_structureData4$data","apiNodes","apiEdges","flowNodes","node","pozice","x","y","flowEdges","edge","animated","loadHierarchyData","toString","setTimeout","fitView","duration","onConnect","params","targetNode","relationType","_sourceNode$data4","_targetNode$data","sourceType","targetType","edgeColor","addEdge","MarkerType","ArrowClosed","_node$data","nodeType","_n$data","onNodeClick","_node$data2","ctrlKey","onEdgeClick","_edge$data","_edge$data$extended","_edge$data2","_edge$data2$permissio","_edge$data2$permissio2","_edge$data3","_edge$data3$extended","_edge$data4","_edge$data4$permissio","_edge$data4$permissio2","_edge$data5","_edge$data6","_edge$data7","_edge$data8","_edge$data9","_edge$data9$notificat","_edge$data0","_edge$data1","_edge$data10","_edge$data11","_edge$data11$source_i","_edge$data12","_edge$data12$source_i","_ref4","_edge$data$modules$or","_edge$data13","_edge$data13$modules","_edge$data14","_edge$data14$visibili","_ref5","_edge$data$modules$in","_edge$data15","_edge$data15$modules","_edge$data16","_edge$data16$visibili","_ref6","_edge$data$modules$co","_edge$data17","_edge$data17$modules","_edge$data18","_edge$data18$visibili","_ref7","_edge$data$modules$ca","_edge$data19","_edge$data19$modules","_edge$data20","_edge$data20$visibili","_edge$data$modules$ca2","_edge$data21","_edge$data21$modules","_ref8","_edge$data$modules$us","_edge$data22","_edge$data22$modules","_edge$data23","_edge$data23$visibili","_ref9","_edge$data$modules$lp","_edge$data24","_edge$data24$modules","_edge$data25","_edge$data25$visibili","_edge$data26","_edge$data26$permissi","_edge$data27","_edge$data27$permissi","_edge$data28","_edge$data28$permissi","_edge$data29","_edge$data29$permissi","_edge$data30","_edge$data30$extended","_edge$data31","_edge$data31$permissi","_edge$data31$permissi2","_edge$data32","_edge$data32$notifica","_edge$data33","_edge$data33$permissi","_edge$data33$permissi2","_sourceNode$data5","_targetNode$data2","_sourceNode$data6","_sourceNode$data6$met","_sourceNode$data7","_targetNode$data3","_targetNode$data3$met","_targetNode$data4","extendedLocs","permissions","extendedDepts","visibility","objednavky","faktury","smlouvy","pokladna","uzivatele","lp","combos","notifTypes","sourceName","targetName","getRelationshipTypeInfo","description","sourceLabel","targetLabel","showScope","showExtended","showModules","explanation","onNodeDragStop","updatedNode","_updatedNode$data","userId","toggleSection","section","toggleNotificationTemplateSelection","templateId","newSet","has","delete","add","draggedItem","setDraggedItem","getLayoutedElements","direction","dagreGraph","graphlib","Graph","setDefaultEdgeLabel","setGraph","rankdir","nodesep","ranksep","marginx","marginy","forEach","setNode","setEdge","dagre","nodeWithPosition","nodeWidth","nodeHeight","generateHierarchyFromSelectedNodes","director","_n$data$position","deputies","_n$data$position2","heads","_n$data$position3","others","_n$data$position4","_n$data$position5","_n$data$position6","newEdges","deputy","push","head","_d$data$metadata","_head$data$metadata","selectedNodeIds","updatedEdges","layoutedNodes","layoutedEdges","loadProfiles","activeProfile","handleSave","targetProfileId","profileId","totalNodes","totalEdges","payload","_n$data2","_n$data3","_n$data4","_n$data5","_n$data6","_n$data7","typ","locationId","departmentId","roleId","_e$data2","_e$data3","statusText","errorText","text","details","savedProfile","timeout","filteredUsers","u","_u$name","_u$position1","_u$location","filteredRoles","_role$nazev_role","nazev_role","popis","filteredLocations","loc","_loc$name","_loc$code","filteredDepartments","dept","_dept$name","_dept$code","filteredNotificationTemplates","_ref0","_ref1","faSitemap","reload","whiteSpace","profile","confirm","validNodes","index","Math","floor","handleProfileChange","relationshipsCount","newActiveState","action","setProfileActive","alert","handleToggleProfileActive","marginRight","relationshipsText","handleDeleteProfile","handleAutoGenerateHierarchy","faEye","faSave","handleSaveAs","flexWrap","faLayerGroup","faSearch","faChevronDown","faChevronRight","faUsers","size","marginLeft","draggable","onDragStart","dataTransfer","effectAllowed","setData","onDragEnd","borderColor","checked","accentColor","faUserShield","l","faBuilding","deptId","t","_template$email","email","sendByDefault","priorityDefault","bottom","addSelectedToCanvas","newNodes","userIndex","locIndex","deptIndex","tplIndex","prevNodes","faPlus","faTrash","onDrop","dragId","reactFlowElement","querySelector","reactFlowBounds","getBoundingClientRect","screenToFlowPosition","clientX","clientY","bounds","viewport","getViewport","startsWith","notifId","newNode","toUpperCase","onDragOver","dropEffect","ReactFlow","onInit","instance","attributionPosition","selectionOnDrag","panOnDrag","panOnScroll","zoomOnScroll","zoomOnDoubleClick","selectionMode","selectionKeyCode","multiSelectionKeyCode","selectNodesOnDrag","onSelectionChange","selectedNodesCount","selectedEdgesCount","totalSelected","Background","Controls","MiniMap","nodeColor","_node$data3","_node$data4","_node$data5","maskColor","pannable","zoomable","Panel","paddingBottom","overflowY","overflowX","paddingRight","faEdit","faInfoCircle","isSelected","readOnly","fontStyle","availableVariants","variants","variantDef","marker","parseAllVariants","defaultVariant","paddingLeft","CustomSelect","multiple","eventType","kod","field","hasTriedToSubmit","order_number","order_id","ev_cislo","cislo_objednavky","old_status","new_status","datum_vytvoreni","datum_pozadavku","datum_zmeny","predmet","order_subject","subject","cena_celkem","cena_bez_dph","cena_s_dph","max_price_with_dph","dodavatel","supplier_name","supplier","pozadovatel_jmeno","pozadovatel_email","pozadovatel","requester_name","requester_email","schvalovatel_jmeno","schvalovatel_email","approver_name","approver_email","action_user_name","action_performed_by","action_date","url_objednavky","order_url","url","poznamka","reason","comment","date","time","Object","keys","regex1","RegExp","regex2","app_nadpis","app_title","app_zprava","app_message","borderLeft","textOverflow","WebkitLineClamp","WebkitBoxOrient","faExpand","minHeight","zoom","transformOrigin","dangerouslySetInnerHTML","__html","recipients","_targetNode$data5","_targetNode$data6","_targetNode$data7","edgeId","recipient","i","bgColor","textColor","outgoingEdges","idx","_targetNode$data8","_targetNode$data9","_targetNode$data9$typ","_edge$data34","_edge$data35","_edge$data36","_targetNode$data0","recipientType","genericType","scopeFilter","colors","bg","slice","join","assignedUsers","_sourceNode$data8","_sourceNode$data9","_sourceNode$data0","module","hasPermission","supervisors","_sourceNode$data1","_e$data4","subordinates","_targetNode$data1","_e$data5","sup","sub","_sourceNode$data14","_sourceNode$data15","_targetNode$data16","_targetNode$data17","_sourceNode$data10","_sourceNode$data10$me","_sourceNode$data11","_targetNode$data10","_targetNode$data10$me","_targetNode$data11","relationInfo","_sourceNode$data12","_sourceNode$data12$me","_sourceNode$data13","_targetNode$data12","_targetNode$data12$me","_targetNode$data13","_sourceNode$data16","_sourceNode$data16$me","_sourceNode$data17","_targetNode$data14","_targetNode$data14$me","_targetNode$data15","_sourceNode$data18","_sourceNode$data18$me","_sourceNode$data19","_targetNode$data18","_targetNode$data18$me","_targetNode$data19","_sourceNode$data20","_sourceNode$data20$na","_targetNode$data20","_targetNode$data20$na","split","_sourceNode$data21","_sourceNode$data21$me","_sourceNode$data22","_targetNode$data21","_targetNode$data21$me","_targetNode$data22","_sourceNode$data23","_sourceNode$data23$me","_sourceNode$data24","_targetNode$data23","_targetNode$data23$me","_targetNode$data24","_sourceNode$data25","_sourceNode$data25$na","_sourceNode$data26","_sourceNode$data26$me","_sourceNode$data27","_targetNode$data25","_targetNode$data25$me","_targetNode$data26","_selectedEdge$data","applyToOrdersOnly","htmlFor","_sourceNode$data28","_sourceNode$data28$me","_sourceNode$data29","_targetNode$data27","_targetNode$data27$me","_targetNode$data28","textTransform","letterSpacing","_sourceNode$data30","_sourceNode$data30$me","_sourceNode$data31","_targetNode$data29","_targetNode$data29$me","_targetNode$data30","newValues","combo","_","locSelect","document","getElementById","deptSelect","some","c","_sourceNode$data32","_targetNode$data31","_sourceNode$data33","_templateNode$data","_targetNode$data32","_selectedEdge$data2","_selectedEdge$data3","_selectedEdge$data4","_selectedEdge$data5","_selectedEdge$data6","_selectedEdge$data7","_selectedEdge$data8","_selectedEdge$data9","_selectedEdge$data0","templateNode","_targetNode$data33","_recipientNode$data","_recipientNode$data2","recipientNode","backgroundColor","f","_dialog$onCancel","entries","_ref10","_sourceNode$data34","_targetNode$data34","createResponse","set_active","createResult","newProfileId"],"sourceRoot":""}