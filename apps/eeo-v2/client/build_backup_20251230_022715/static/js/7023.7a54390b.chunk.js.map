{"version":3,"file":"static/js/7023.7a54390b.chunk.js","mappings":"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","sources":["styles/GlobalTooltip.js","utils/orderStatsUtils.js","../node_modules/lucide-react/src/icons/x.ts","constants/orderStatusColors.js","utils/orderFilters.js","utils/orderFiltersAdvanced.js","components/OrderContextMenu.js","pages/Orders25List.js","utils/errorTranslation.js","utils/textHelpers.js","utils/iconMapping.js"],"sourcesContent":["import styled from '@emotion/styled';\n\n/**\n * Globln Tooltip komponenta pro jednotn vzhled nap celou aplikac\n * Pouit: Obalit element s touto komponentou a nastavit .tooltip child\n */\nexport const TooltipWrapper = styled.div`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n\n  /* Tooltip element */\n  .tooltip,\n  .cache-tooltip {\n    position: absolute;\n    top: calc(100% + 10px);\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.67);\n    color: white;\n    padding: 0.5rem 0.875rem;\n    border-radius: 8px;\n    border: 1px solid rgba(255, 255, 255, 0.4);\n    font-size: 0.85rem;\n    font-weight: 600;\n    white-space: nowrap;\n    box-shadow:\n      0 6px 20px rgba(0, 0, 0, 0.4),\n      0 2px 8px rgba(0, 0, 0, 0.25),\n      inset 0 1px 0 rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    /* Ikonka na zatku tooltip */\n    &::before {\n      content: '';\n      font-size: 1rem;\n      flex-shrink: 0;\n    }\n\n    /* Varianty ikon pomoc data-icon atributu */\n    &[data-icon=\"info\"]::before { content: ''; }\n    &[data-icon=\"success\"]::before { content: ''; }\n    &[data-icon=\"warning\"]::before { content: ''; }\n    &[data-icon=\"error\"]::before { content: ''; }\n    &[data-icon=\"database\"]::before { content: ''; }\n    &[data-icon=\"cache\"]::before { content: ''; }\n    &[data-icon=\"time\"]::before { content: ''; }\n    &[data-icon=\"calendar\"]::before { content: ''; }\n    &[data-icon=\"none\"]::before { content: none; }\n\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n    /* ipka nahoru */\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-bottom-color: rgba(0, 0, 0, 0.67);\n      filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n    }\n  }\n\n  /* Varianty pozicovn */\n  .tooltip-top,\n  .tooltip.top {\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-right,\n  .tooltip.right {\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-left,\n  .tooltip.left {\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  /* Multi-line tooltips */\n  .tooltip-multiline,\n  .tooltip.multiline {\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  }\n\n  /* Zobrazen pi hover */\n  &:hover .tooltip,\n  &:hover .cache-tooltip {\n    opacity: 1;\n  }\n`;\n\n/**\n * Samostatn Tooltip element (bez wrapperu)\n * Pouit: Pro custom pozicovn nebo kdy u mte vlastn wrapper\n */\nexport const Tooltip = styled.div`\n  position: absolute;\n  top: calc(100% + 10px);\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.67);\n  color: white;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  font-size: 0.85rem;\n  font-weight: 600;\n  white-space: nowrap;\n  box-shadow:\n    0 6px 20px rgba(0, 0, 0, 0.4),\n    0 2px 8px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  z-index: 999999;\n  line-height: 1.6;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 8px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.67);\n    filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n  }\n\n  ${props => props.$visible && `\n    opacity: 1;\n  `}\n\n  ${props => props.$position === 'top' && `\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$position === 'right' && `\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$position === 'left' && `\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  `}\n\n  ${props => props.$multiline && `\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  `}\n`;\n\n/**\n * Tooltip s malm paddingem (kompaktn verze)\n */\nexport const TooltipCompact = styled(Tooltip)`\n  padding: 0.375rem 0.625rem;\n  font-size: 0.8rem;\n`;\n\n/**\n * CSS Mixin pro tooltip styling (pouit v existujcch styled components)\n */\nexport const tooltipStyles = `\n  background: rgba(0, 0, 0, 0.67);\n  color: white;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  font-size: 0.85rem;\n  font-weight: 600;\n  white-space: nowrap;\n  box-shadow:\n    0 6px 20px rgba(0, 0, 0, 0.4),\n    0 2px 8px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n  z-index: 999999;\n  line-height: 1.6;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n`;\n\n/**\n * CSS pro tooltip ipku\n */\nexport const tooltipArrowStyles = (direction = 'bottom') => {\n  const arrowMap = {\n    bottom: `\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-bottom-color: rgba(0, 0, 0, 0.67);\n    `,\n    top: `\n      top: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    `,\n    right: `\n      top: 50%;\n      right: 100%;\n      transform: translateY(-50%);\n      border: 8px solid transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    `,\n    left: `\n      top: 50%;\n      left: 100%;\n      transform: translateY(-50%);\n      border: 8px solid transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    `\n  };\n\n  return `\n    content: '';\n    position: absolute;\n    ${arrowMap[direction] || arrowMap.bottom}\n    filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n  `;\n};\n","/**\n *  SPOLEN UTILITY PRO VPOET STATISTIK OBJEDNVEK\n * \n * Sdleno mezi Desktop (Orders25List.js) a Mobile (mobileDataService.js)\n * aby mly ob verze IDENTICK vsledky.\n */\n\n/**\n * Mapovn uivatelsky pvtivch nzv stav na systmov kdy\n */\nfunction mapUserStatusToSystemCode(userStatus) {\n  // Kontrola na zatek textu pro rzn varianty\n  if (userStatus && typeof userStatus === 'string') {\n    if (userStatus.startsWith('Zamtnut')) return 'ZAMITNUTA';\n    if (userStatus.startsWith('Schvlen')) return 'SCHVALENA';\n    if (userStatus.startsWith('Dokonen')) return 'DOKONCENA';\n    if (userStatus.startsWith('Zruen')) return 'ZRUSENA';\n    if (userStatus.startsWith('Archivovn')) return 'ARCHIVOVANO';\n  }\n  \n  const mapping = {\n    'Ke schvlen': 'KE_SCHVALENI',\n    'Nov': 'NOVA',\n    'Rozpracovan': 'ROZPRACOVANA',\n    'Odeslan dodavateli': 'ODESLANA',\n    'Potvrzen dodavatelem': 'POTVRZENA',\n    'M bt zveejnna': 'K_UVEREJNENI_DO_REGISTRU',\n    'Uveejnn': 'UVEREJNENA',\n    'ek na potvrzen': 'CEKA_POTVRZENI',\n    'ek se': 'CEKA_SE',\n    'Vcn sprvnost': 'VECNA_SPRAVNOST',\n    'Smazan': 'SMAZANA',\n    'Koncept': 'NOVA'\n  };\n  return mapping[userStatus] || userStatus;\n}\n\n/**\n * Vrac systmov stav objednvky (PESN PODLE ORDERS25LIST)\n */\nexport function getOrderSystemStatus(order) {\n  // Speciln ppad pro koncepty\n  if (order.isDraft || order.je_koncept) {\n    return 'NOVA';\n  }\n\n  // Zskej zkladn systmov stav\n  let systemStatus;\n\n  //  PRIORITA 1: Pokud mme uivatelsky pvtiv stav, zmapuj na systmov kd\n  if (order.stav_objednavky) {\n    systemStatus = mapUserStatusToSystemCode(order.stav_objednavky);\n  }\n  // PRIORITA 2: Fallback na posledn stav z stav_workflow_kod\n  else if (order.stav_workflow_kod) {\n    try {\n      const workflowStates = Array.isArray(order.stav_workflow_kod)\n        ? order.stav_workflow_kod\n        : JSON.parse(order.stav_workflow_kod);\n      systemStatus = Array.isArray(workflowStates) \n        ? workflowStates[workflowStates.length - 1] \n        : order.stav_workflow_kod;\n    } catch {\n      systemStatus = order.stav_workflow_kod;\n    }\n  }\n  else {\n    systemStatus = 'DRAFT';\n  }\n\n  //  SPECILN LOGIKA PRO UVEEJNN V REGISTRU SMLUV\n  // Kontroluj data o publikaci - m pednost ped obecnm stavem\n  if (order.registr_smluv || order.stav_workflow_kod) {\n    const registr = order.registr_smluv || {};\n    \n    // 1. UVEREJNENA: Pokud m dt_zverejneni A registr_iddt -> byla zveejnna\n    if (registr.dt_zverejneni && registr.registr_iddt) {\n      return 'UVEREJNENA';\n    }\n    \n    // Zskej workflow status pro kontrolu UVEREJNIT\n    let workflowStatus = null;\n    if (order.stav_workflow_kod) {\n      try {\n        let workflowStates = [];\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n        if (workflowStates.length > 0) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          workflowStatus = typeof lastState === 'object' ? lastState.kod_stavu : lastState;\n        }\n      } catch (e) {\n        // Pokud parsing sele, ignoruj\n      }\n    }\n    \n    // 2. K_UVEREJNENI_DO_REGISTRU: Pokud m bt zveejnna (3 podmnky):\n    // a) workflow status je UVEREJNIT\n    // b) registr.zverejnit === 'ANO'\n    // c) registr.ma_byt_zverejnena === true/1\n    const maZverejnit = workflowStatus === 'UVEREJNIT' || \n                        registr.zverejnit === 'ANO' || \n                        registr.ma_byt_zverejnena === true ||\n                        registr.ma_byt_zverejnena === 1 ||\n                        registr.ma_byt_zverejnena === '1';\n    \n    if (maZverejnit && !registr.registr_iddt) {\n      return 'K_UVEREJNENI_DO_REGISTRU';\n    }\n  }\n\n  return systemStatus;\n}\n\n/**\n * Vypot celkovou cenu objednvky s DPH (PESN PODLE ORDERS25LIST)\n * Priority: 1) faktury, 2) poloky, 3) max_cena_s_dph\n */\nexport function getOrderTotalPriceWithDPH(order) {\n  // 1. PRIORITA: Faktury (pokud existuj) - skuten utracen penze\n  if (order.faktury_celkova_castka_s_dph != null && order.faktury_celkova_castka_s_dph !== '') {\n    const value = parseFloat(order.faktury_celkova_castka_s_dph);\n    if (!isNaN(value) && value > 0) return value;\n  }\n  \n  // 2. PRIORITA: Poloky - objednan ale jet nefakturovan\n  if (order.polozky_celkova_cena_s_dph != null && order.polozky_celkova_cena_s_dph !== '') {\n    const value = parseFloat(order.polozky_celkova_cena_s_dph);\n    if (!isNaN(value) && value > 0) return value;\n  }\n  \n  // Spotej z poloek jako fallback\n  if (order.polozky && Array.isArray(order.polozky) && order.polozky.length > 0) {\n    const total = order.polozky.reduce((sum, item) => {\n      const cena = parseFloat(item.cena_s_dph || 0);\n      return sum + (isNaN(cena) ? 0 : cena);\n    }, 0);\n    if (total > 0) return total;\n  }\n\n  // 3. PRIORITA: Max cena ke schvlen - schvlen limit\n  if (order.max_cena_s_dph != null && order.max_cena_s_dph !== '') {\n    const value = parseFloat(order.max_cena_s_dph);\n    if (!isNaN(value) && value > 0) return value;\n  }\n\n  return 0;\n}\n\n/**\n * Vyfiltruje objednvky podle zkladnch pravidel (spolen pro desktop i mobil)\n * @param {Array} orders - Seznam objednvek z API\n * @param {Object} options - Monosti filtrovn\n * @returns {Array} Vyfiltrovan objednvky\n */\nexport function filterOrders(orders, options = {}) {\n  const {\n    showArchived = false,     // Zobrazit archivovan?\n    userId = null,            // ID uivatele pro filtrovn podle pkazce\n    isAdmin = false           // Je uivatel admin? (admin vid vechny)\n  } = options;\n\n  // 1. Zkladn filtrovn: ID > 1 (systmov obj) a !isLocalConcept\n  //  VJIMKA: Koncepty (isDraft nebo je_koncept) VDY projdou filtrem!\n  let filtered = orders.filter(o => {\n    // Koncepty vdy projdou\n    if (o.isDraft || o.je_koncept) return true;\n    \n    // Ostatn objednvky: ID > 1 a !isLocalConcept\n    return o.id && o.id > 1 && !o.isLocalConcept;\n  });\n\n  // 2. Archivovan objednvky\n  //  VJIMKA: Koncepty nejsou nikdy archivovan\n  if (!showArchived) {\n    filtered = filtered.filter(o => {\n      // Koncepty vdy projdou\n      if (o.isDraft || o.je_koncept) return true;\n      \n      const status = getOrderSystemStatus(o);\n      return status !== 'ARCHIVOVANO';\n    });\n  }\n\n  // 3. Filtrovn podle pkazce (pouze pro non-admin)\n  //  VJIMKA: Koncepty pat vdy aktulnmu uivateli (objednatel_id)\n  if (!isAdmin && userId) {\n    filtered = filtered.filter(o => {\n      // Koncepty: kontroluj objednatel_id nebo uzivatel_id\n      if (o.isDraft || o.je_koncept) {\n        return o.objednatel_id === userId || o.uzivatel_id === userId;\n      }\n      \n      // Ostatn: kontroluj pkazce\n      return o.prikazce_id === userId;\n    });\n  }\n\n  return filtered;\n}\n\n/**\n * Vypot statistiky ze seznamu objednvek (spolen pro desktop i mobil)\n * @param {Array} orders - Seznam VYFILTROVANCH objednvek\n * @returns {Object} Statistiky ve formtu { total, byStatus, totalAmount, ... }\n */\nexport function calculateOrderStats(orders) {\n  const total = orders.length;\n  \n  // Poty podle stav\n  const byStatus = orders.reduce((acc, order) => {\n    const systemStatus = getOrderSystemStatus(order);\n    acc[systemStatus] = (acc[systemStatus] || 0) + 1;\n    return acc;\n  }, {});\n\n  // Celkov stka\n  const totalAmount = orders.reduce((sum, order) => {\n    const amount = getOrderTotalPriceWithDPH(order);\n    return sum + (isNaN(amount) ? 0 : amount);\n  }, 0);\n\n  // stka dokonench objednvek\n  const completedAmount = orders.reduce((sum, order) => {\n    const status = getOrderSystemStatus(order);\n    const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n    if (isCompleted) {\n      const amount = getOrderTotalPriceWithDPH(order);\n      return sum + (isNaN(amount) ? 0 : amount);\n    }\n    return sum;\n  }, 0);\n\n  const pendingAmount = totalAmount - completedAmount;\n\n  return {\n    total,\n    byStatus,\n    totalAmount,\n    completedAmount,\n    pendingAmount\n  };\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","/**\n * Konstanty pro barvy stav objednvek\n *\n * Kad stav m dv varianty barev:\n * - dark: Pouit pro 3D dladice, dashboardy, zvraznn elementy\n * - light: Pouit pro tabulky, backgrounds, jemnj UI elementy\n */\n\nexport const STATUS_COLORS = {\n  // Tmav barvy pro 3D dladice + korespondujc svtl odstny pro tabulku\n  NOVA: {\n    dark: '#475569', // tmav ed - nov objednvka\n    light: '#e2e8f0' // svtle ed - koresponduje\n  },\n  KE_SCHVALENI: {\n    dark: '#dc2626', // ERVEN/RUD - ke schvlen (jak poadovno)\n    light: '#fecaca' // svtle erven - koresponduje s rudou\n  },\n  SCHVALENA: {\n    dark: '#ea580c', // ORANOV - schvlen (jak poadovno)\n    light: '#fed7aa' // svtle oranov - koresponduje\n  },\n  ZAMITNUTA: {\n    dark: '#7c2d12', // tmav hnd - zamtnut\n    light: '#fed7aa' // svtle hnd - koresponduje\n  },\n  ROZPRACOVANA: {\n    dark: '#ca8a04', // LUT - rozpracovan (jak poadovno)\n    light: '#fef08a' // svtle lut - koresponduje\n  },\n  ODESLANA: {\n    dark: '#1d4ed8', // MODR - odeslan dodavateli (jak poadovno)\n    light: '#dbeafe' // svtle modr - koresponduje\n  },\n  POTVRZENA: {\n    dark: '#0891b2', // CYAN - faktura/potvrzen (jak poadovno)\n    light: '#a5f3fc' // svtle cyan - koresponduje\n  },\n  K_UVEREJNENI_DO_REGISTRU: {\n    dark: '#8b5cf6', // fialov - m bt zveejnna v registru smluv\n    light: '#ede9fe' // svtle fialov - koresponduje\n  },\n  UVEREJNENA: {\n    dark: '#7c2d12', // hnd - zveejnn v registru smluv\n    light: '#fed7aa' // svtle oranov - koresponduje\n  },\n  CEKA_POTVRZENI: {\n    dark: '#7c3aed', // fialov - ek na potvrzen (uniktn)\n    light: '#e9d5ff' // svtle fialov - koresponduje\n  },\n  CEKA_SE: {\n    dark: '#92400e', // tmav zlatohnd - ek se (uniktn, odlin od oranov)\n    light: '#fef3c7' // svtle zlat - koresponduje\n  },\n  VECNA_SPRAVNOST: {\n    dark: '#10b981', // zelen - vcn sprvnost/kontrola\n    light: '#d1fae5' // svtle zelen - koresponduje\n  },\n  DOKONCENA: {\n    dark: '#16a34a', // ZELEN - dokonen (jak poadovno)\n    light: '#bbf7d0' // svtle zelen - koresponduje\n  },\n  ZRUSENA: {\n    dark: '#be185d', // rov - zruen (uniktn)\n    light: '#fce7f3' // svtle rov - koresponduje\n  },\n  SMAZANA: {\n    dark: '#374151', // tmav ed - smazan\n    light: '#d1d5db' // svtle ed - koresponduje\n  },\n  ARCHIVOVANO: {\n    dark: '#78350f', // tmav hnd - archivovan/import\n    light: '#fef3c7' // svtle lut - koresponduje\n  },\n  // Speciln barvy pro dashboard\n  TOTAL: {\n    dark: '#14532d', // tmav zelen pro celkovou hodnotu\n    light: '#dcfce7'  // svtle zelen - koresponduje\n  },\n  COUNT: {\n    dark: '#1e3a8a', // tmav modr pro poty\n    light: '#dbeafe'  // svtle modr - koresponduje\n  },\n  WITH_INVOICES: {\n    dark: '#0891b2', // cyan - objednvky s fakturami\n    light: '#cffafe'  // svtle cyan - koresponduje\n  },\n  WITH_ATTACHMENTS: {\n    dark: '#7c3aed', // fialov - objednvky s plohami\n    light: '#e9d5ff'  // svtle fialov - koresponduje\n  }\n};\n\n/**\n * Zsk barvu podle stavu objednvky\n * @param {string|object} stav - Stav objednvky (string nebo objekt s kdem)\n * @returns {object} Objekt s dark a light barvami\n */\nexport const getStatusColor = (stav) => {\n  if (!stav) return STATUS_COLORS.NOVA;\n\n  // Pokud je to string kl, pouij ho pmo\n  if (typeof stav === 'string' && STATUS_COLORS[stav]) {\n    return STATUS_COLORS[stav];\n  }\n\n  // Pokud je to objekt s kdem\n  const statusCode = stav?.kod || stav?.status_kod || stav;\n\n  if (!statusCode) return STATUS_COLORS.NOVA;\n\n  return STATUS_COLORS[statusCode] || STATUS_COLORS.NOVA;\n};\n","/**\n * Utility funkce pro filtrovn objednvek\n * Rozdleno z masivnho useMemo v Orders25List.js pro lep maintainability\n */\n\nimport { removeDiacritics } from './textHelpers';\nimport { formatDateOnly } from './format';\n\n/**\n * Filtr \"Jen moje objednvky\" - pouze pro SUPERADMIN a ADMINISTRATOR\n */\nexport const filterMyOrders = (order, showOnlyMyOrders, userDetail, currentUserId) => {\n  if (!showOnlyMyOrders || !userDetail?.roles) return true;\n\n  const isSuperAdminOrAdmin = userDetail.roles.some(\n    role => role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR'\n  );\n\n  if (!isSuperAdminOrAdmin) return true;\n\n  // Filtruj objednvky kde je uivatel jako Objednatel, Garant, Schvalovatel nebo Pkazce\n  const isObjednatel = order.objednatel_id === currentUserId || order.uzivatel_id === currentUserId;\n  const isGarant = order.garant_uzivatel_id === currentUserId;\n  const isSchvalovatel = order.schvalovatel_id === currentUserId;\n  const isPrikazce = order.prikazce_id === currentUserId;\n\n  return isObjednatel || isGarant || isSchvalovatel || isPrikazce;\n};\n\n/**\n * Filtr podle data objednvky\n */\nexport const filterByOrderDate = (order, filterValue, getOrderDate) => {\n  if (!filterValue) return true;\n\n  const orderDateValue = getOrderDate(order);\n  if (!orderDateValue) return false;\n\n  const dateStr = formatDateOnly(new Date(orderDateValue));\n  return dateStr.toLowerCase().includes(filterValue.toLowerCase());\n};\n\n/**\n * Filtr podle sla objednvky\n * Hled ZROVE v sle objednvky i v pedmtu (dva dky ve sloupci \"Evidenn slo\")\n */\nexport const filterByOrderNumber = (order, filterValue) => {\n  if (!filterValue) return true;\n\n  const cislo = removeDiacritics(order.cislo_objednavky || '');\n  const predmet = removeDiacritics(order.predmet || '');\n  const normalizedFilter = removeDiacritics(filterValue);\n\n  // Filtruj podle sla NEBO pedmtu (OR podmnka)\n  return cislo.includes(normalizedFilter) || predmet.includes(normalizedFilter);\n};\n\n/**\n * Filtr podle pedmtu objednvky\n */\nexport const filterBySubject = (order, filterValue) => {\n  if (!filterValue) return true;\n\n  const predmet = removeDiacritics(order.predmet || '');\n  return predmet.includes(removeDiacritics(filterValue));\n};\n\n/**\n * Filtr podle objednatele\n * Podporuje:\n * - Textov vyhledvn (z hlaviky tabulky) - filtruje podle jmna\n * - Multiselect (z rozenho filtru) - filtruje podle ID oddlench |\n */\nexport const filterByObjednatel = (order, filterValue, getUserDisplayName) => {\n  if (!filterValue) return true;\n\n  const enriched = order._enriched || {};\n\n  // Detekuj typ filtru: pokud obsahuje pouze slice oddlen |, je to filtr podle ID\n  const isIdFilter = /^[\\d|]+$/.test(filterValue);\n\n  if (isIdFilter) {\n    // === FILTR PODLE ID (multiselect) ===\n    let objednatelId = null;\n\n    // Zskej ID objednatele\n    if (enriched?.uzivatel?.id) {\n      objednatelId = String(enriched.uzivatel.id);\n    } else if (order.objednatel_uzivatel?.id) {\n      objednatelId = String(order.objednatel_uzivatel.id);\n    } else if (order.objednatel?.id) {\n      objednatelId = String(order.objednatel.id);\n    } else if (order.uzivatel_id) {\n      objednatelId = String(order.uzivatel_id);\n    } else if (order.objednatel_id) {\n      objednatelId = String(order.objednatel_id);\n    }\n\n    // Pokud nem ID, nezobrazuj (kdy je aktivn ID filtr)\n    if (!objednatelId) return false;\n\n    // Multiselect: filterValue obsahuje ID oddlen '|'\n    const selectedIds = filterValue.split('|').map(id => id.trim());\n    return selectedIds.includes(objednatelId);\n  } else {\n    // === TEXTOV FILTR (hlavika tabulky) ===\n    let name = '';\n\n    // 1. Priorita: Order V2 API enriched data s tituly (objednatel_uzivatel)\n    if (order.objednatel_uzivatel) {\n      if (order.objednatel_uzivatel.cele_jmeno) {\n        name = order.objednatel_uzivatel.cele_jmeno;\n      } else {\n        name = getUserDisplayName(null, order.objednatel_uzivatel);\n      }\n    }\n    // 2. Pak zkus objekt objednatel pmo z BE dat\n    else if (order.objednatel) {\n      const obj = order.objednatel;\n      if (obj.cele_jmeno) {\n        name = obj.cele_jmeno;\n      } else if (obj.jmeno && obj.prijmeni) {\n        const titul_pred_str = obj.titul_pred ? obj.titul_pred + ' ' : '';\n        const titul_za_str = obj.titul_za ? ', ' + obj.titul_za : '';\n        name = `${titul_pred_str}${obj.jmeno} ${obj.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n      } else if (obj.username) {\n        name = obj.username;\n      }\n    }\n    // 3. Fallback na lokln users mapping podle ID\n    else if (order.objednatel_id) {\n      name = getUserDisplayName(order.objednatel_id);\n    }\n\n    // Textov vyhledvn bez diakritiky\n    const normalizedText = removeDiacritics(name.toLowerCase());\n    const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n    return normalizedText.includes(normalizedFilter);\n  }\n};\n\n/**\n * Filtr podle stavu objednvky\n */\nexport const filterByStatus = (order, filterValue, getOrderDisplayStatus) => {\n  if (!filterValue) return true;\n\n  const displayStatus = removeDiacritics(getOrderDisplayStatus(order));\n  return displayStatus.includes(removeDiacritics(filterValue));\n};\n\n/**\n * Filtr podle dodavatele\n * Vyhledv v nzvu, IO, adrese, emailu, telefonu a kontaktn osob\n */\nexport const filterByDodavatel = (order, filterValue) => {\n  if (!filterValue) return true;\n\n  // Sestaven prohledvatelnho textu ze vech pol dodavatele\n  const searchableText = [\n    order.dodavatel_nazev || '',\n    order.dodavatel_ico || '',\n    order.dodavatel_ulice || '',\n    order.dodavatel_mesto || '',\n    order.dodavatel_psc || '',\n    order.dodavatel_kontakt_email || '',\n    order.dodavatel_kontakt_telefon || '',\n    order.dodavatel_kontakt_jmeno || ''\n  ].join(' ').toLowerCase();\n\n  const normalizedText = removeDiacritics(searchableText);\n  const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n  return normalizedText.includes(normalizedFilter);\n};\n\n/**\n * Pomocn funkce pro porovnn numerick hodnoty s filtrem\n * Podporuje opertory: >10000, <5000, =1234 nebo textov vyhledvn\n * @param {number} value - Hodnota k porovnn\n * @param {string} filterValue - Filtr (nap. \">10000\", \"<5000\", \"=1234\", nebo jen \"1000\")\n * @returns {boolean}\n */\nconst compareNumericValue = (value, filterValue) => {\n  if (!filterValue) return true;\n\n  const trimmed = filterValue.trim();\n\n  // Pokus se detekovat opertor na zatku\n  const operatorMatch = trimmed.match(/^(>|<|=)\\s*(.+)$/);\n\n  if (operatorMatch) {\n    const operator = operatorMatch[1];\n    const numStr = operatorMatch[2].replace(/\\s/g, '').replace(/,/g, '.');\n    const filterNum = parseFloat(numStr);\n\n    if (isNaN(filterNum)) return false;\n\n    switch (operator) {\n      case '>':\n        return value > filterNum;\n      case '<':\n        return value < filterNum;\n      case '=':\n        return Math.abs(value - filterNum) < 0.01; // Tolerance pro desetinn sla\n      default:\n        return false;\n    }\n  }\n\n  // Bez opertoru - textov vyhledvn v naformtovan hodnot\n  const amountStr = value > 0 ? value.toLocaleString('cs-CZ') : '';\n  return amountStr.includes(filterValue);\n};\n\n/**\n * Filtr podle maximln ceny s DPH\n * Podporuje opertory: >10000, <5000, =1234 nebo textov vyhledvn\n */\nexport const filterByMaxPrice = (order, filterValue) => {\n  if (!filterValue) return true;\n\n  const amount = parseFloat(order.max_cena_s_dph || 0);\n  return compareNumericValue(amount, filterValue);\n};\n\n/**\n * Pomocn funkce pro zskn ID uivatele z rznch zdroj\n */\nconst getUserId = (order, role) => {\n  const enriched = order._enriched;\n\n  switch (role) {\n    case 'garant':\n      if (enriched?.garant_uzivatel?.id) return String(enriched.garant_uzivatel.id);\n      if (order.garant?.id) return String(order.garant.id);\n      if (order.garant_uzivatel_id) return String(order.garant_uzivatel_id);\n      return null;\n\n    case 'prikazce':\n      if (enriched?.prikazce_uzivatel?.id) return String(enriched.prikazce_uzivatel.id);\n      if (order.prikazce?.id) return String(order.prikazce.id);\n      if (order.prikazce_id) return String(order.prikazce_id);\n      return null;\n\n    case 'schvalovatel':\n      if (enriched?.schvalovatel_uzivatel?.id) return String(enriched.schvalovatel_uzivatel.id);\n      if (order.schvalovatel?.id) return String(order.schvalovatel.id);\n      if (order.schvalovatel_id) return String(order.schvalovatel_id);\n      return null;\n\n    default:\n      return null;\n  }\n};\n\n/**\n * Pomocn funkce pro zskn jmna uivatele z objednvky\n */\nconst getUserName = (order, role, getUserDisplayName) => {\n  const enriched = order._enriched || {};\n\n  switch (role) {\n    case 'garant':\n      if (order.garant?.jmeno && order.garant?.prijmeni) {\n        const gar = order.garant;\n        const titul_pred_str = gar.titul_pred ? gar.titul_pred + ' ' : '';\n        const titul_za_str = gar.titul_za ? ', ' + gar.titul_za : '';\n        return `${titul_pred_str}${gar.jmeno} ${gar.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n      }\n      if (enriched?.garant_uzivatel) return getUserDisplayName(null, enriched.garant_uzivatel);\n      if (order.garant_uzivatel_id) return getUserDisplayName(order.garant_uzivatel_id);\n      return '';\n\n    case 'prikazce':\n      if (order.prikazce?.jmeno && order.prikazce?.prijmeni) {\n        const pri = order.prikazce;\n        const titul_pred_str = pri.titul_pred ? pri.titul_pred + ' ' : '';\n        const titul_za_str = pri.titul_za ? ', ' + pri.titul_za : '';\n        return `${titul_pred_str}${pri.jmeno} ${pri.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n      }\n      if (enriched?.prikazce_uzivatel) return getUserDisplayName(null, enriched.prikazce_uzivatel);\n      if (order.prikazce_id) return getUserDisplayName(order.prikazce_id);\n      return '';\n\n    case 'schvalovatel':\n      if (order.schvalovatel?.jmeno && order.schvalovatel?.prijmeni) {\n        const sch = order.schvalovatel;\n        const titul_pred_str = sch.titul_pred ? sch.titul_pred + ' ' : '';\n        const titul_za_str = sch.titul_za ? ', ' + sch.titul_za : '';\n        return `${titul_pred_str}${sch.jmeno} ${sch.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n      }\n      if (enriched?.schvalovatel) return getUserDisplayName(null, enriched.schvalovatel);\n      if (order.schvalovatel_id) return getUserDisplayName(order.schvalovatel_id);\n      return '';\n\n    default:\n      return '';\n  }\n};\n\n/**\n * Obecn funkce pro filtrovn podle role (garant, pkazce, schvalovatel)\n * Podporuje:\n * - Textov vyhledvn (z hlaviky tabulky) - filtruje podle jmna\n * - Multiselect (z rozenho filtru) - filtruje podle ID oddlench |\n */\nexport const filterByUserRole = (order, filterValue, role, getUserDisplayName) => {\n  if (!filterValue) return true;\n\n  const trimmedValue = filterValue.trim();\n\n  // Detekuj typ filtru: pokud obsahuje pouze slice oddlen |, je to filtr podle ID\n  const isIdFilter = /^[\\d|]+$/.test(trimmedValue);\n\n  if (isIdFilter) {\n    // === FILTR PODLE ID (multiselect) ===\n    const userId = getUserId(order, role);\n    if (!userId) return false; // Pokud nem ID, nezobrazuj (kdy je aktivn ID filtr)\n\n    const selectedIds = trimmedValue.split('|').map(id => id.trim());\n    return selectedIds.includes(userId);\n  } else {\n    // === TEXTOV FILTR (hlavika tabulky) ===\n    const userName = getUserName(order, role, getUserDisplayName);\n    return removeDiacritics(userName.toLowerCase()).includes(removeDiacritics(trimmedValue.toLowerCase()));\n  }\n};\n\n/**\n * Aplikuje vechny sloupcov filtry na objednvku\n */\nexport const applyColumnFilters = (order, columnFilters, getOrderDate, getOrderDisplayStatus, getUserDisplayName) => {\n  // Filtr podle data\n  if (!filterByOrderDate(order, columnFilters.dt_objednavky, getOrderDate)) return false;\n\n  // Filtr podle sla objednvky\n  if (!filterByOrderNumber(order, columnFilters.cislo_objednavky)) return false;\n\n  // Filtr podle pedmtu\n  if (!filterBySubject(order, columnFilters.predmet)) return false;\n\n  // Filtr podle objednatele\n  if (!filterByObjednatel(order, columnFilters.objednatel, getUserDisplayName)) return false;\n\n  // Filtr podle stavu\n  if (!filterByStatus(order, columnFilters.stav_objednavky, getOrderDisplayStatus)) return false;\n\n  // Filtr podle ceny\n  if (!filterByMaxPrice(order, columnFilters.max_cena_s_dph)) return false;\n\n  // Filtr podle dodavatele\n  if (!filterByDodavatel(order, columnFilters.dodavatel_nazev)) return false;\n\n  //  FIX: Slouen sloupce - hledaky pouvaj objednatel_garant a prikazce_schvalovatel\n  // Pro objednatel_garant hledej v objednateli i garantovi\n  if (columnFilters.objednatel_garant) {\n    const filterValue = columnFilters.objednatel_garant;\n    const objednatelMatch = filterByObjednatel(order, filterValue, getUserDisplayName);\n    const garantMatch = filterByUserRole(order, filterValue, 'garant', getUserDisplayName);\n    if (!objednatelMatch && !garantMatch) return false;\n  }\n\n  // Pro prikazce_schvalovatel hledej v pkazci i schvalovateli\n  if (columnFilters.prikazce_schvalovatel) {\n    const filterValue = columnFilters.prikazce_schvalovatel;\n    const prikazceMatch = filterByUserRole(order, filterValue, 'prikazce', getUserDisplayName);\n    const schvalovatelMatch = filterByUserRole(order, filterValue, 'schvalovatel', getUserDisplayName);\n    if (!prikazceMatch && !schvalovatelMatch) return false;\n  }\n\n  // Filtry podle rol (separtn kle pro rozen filtr)\n  if (!filterByUserRole(order, columnFilters.garant, 'garant', getUserDisplayName)) return false;\n  if (!filterByUserRole(order, columnFilters.prikazce, 'prikazce', getUserDisplayName)) return false;\n  if (!filterByUserRole(order, columnFilters.schvalovatel, 'schvalovatel', getUserDisplayName)) return false;\n\n  return true;\n};\n","/**\n * Komplexn filtry pro objednvky - globln vyhledvn, status, datum, stky\n * st 2/2 utility soubor pro filtrovn\n */\n\nimport { removeDiacritics } from './textHelpers';\n\n/**\n * Pomocn funkce pro zskn jmen z objednvky pro globln vyhledvn\n */\nexport const getGarantNameForSearch = (order, getUserDisplayName) => {\n  const enriched = order._enriched || {};\n\n  if (enriched.garant_uzivatel) {\n    return getUserDisplayName(null, enriched.garant_uzivatel);\n  }\n\n  if (order.garant) {\n    if (order.garant.jmeno && order.garant.prijmeni) {\n      const titul_pred_str = order.garant.titul_pred ? order.garant.titul_pred + ' ' : '';\n      const titul_za_str = order.garant.titul_za ? ', ' + order.garant.titul_za : '';\n      return `${titul_pred_str}${order.garant.jmeno} ${order.garant.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n    } else {\n      return order.garant.username || '';\n    }\n  }\n\n  if (order.garant_uzivatel_id) {\n    return getUserDisplayName(order.garant_uzivatel_id);\n  }\n\n  return '';\n};\n\nexport const getSchvalovatelNameForSearch = (order, getUserDisplayName) => {\n  const enriched = order._enriched || {};\n\n  if (enriched.schvalovatel_uzivatel) {\n    return getUserDisplayName(null, enriched.schvalovatel_uzivatel);\n  }\n\n  if (order.schvalovatel) {\n    if (order.schvalovatel.jmeno && order.schvalovatel.prijmeni) {\n      const titul_pred_str = order.schvalovatel.titul_pred ? order.schvalovatel.titul_pred + ' ' : '';\n      const titul_za_str = order.schvalovatel.titul_za ? ', ' + order.schvalovatel.titul_za : '';\n      return `${titul_pred_str}${order.schvalovatel.jmeno} ${order.schvalovatel.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n    } else {\n      return order.schvalovatel.username || '';\n    }\n  }\n\n  if (order.schvalovatel_id) {\n    return getUserDisplayName(order.schvalovatel_id);\n  }\n\n  return '';\n};\n\n/**\n * Globln vyhledvn nap vemi poli objednvky\n */\nexport const filterByGlobalSearch = (order, searchText, getUserDisplayName, getOrderDisplayStatus) => {\n  if (!searchText) return true;\n\n  const enriched = order._enriched || {};\n\n  // Parse druh_objednavky nazev\n  const getDruhObjednavkyNazev = () => {\n    if (enriched.druh_objednavky?.nazev) {\n      try {\n        if (typeof enriched.druh_objednavky.nazev === 'string' && enriched.druh_objednavky.nazev.startsWith('{')) {\n          const parsed = JSON.parse(enriched.druh_objednavky.nazev);\n          return parsed.nazev_stavu || parsed.nazev || enriched.druh_objednavky.nazev;\n        }\n        return enriched.druh_objednavky.nazev;\n      } catch (e) {\n        return enriched.druh_objednavky.nazev;\n      }\n    }\n    if (enriched.druh_objednavky?.nazev_stavu) return enriched.druh_objednavky.nazev_stavu;\n    if (order.druh_objednavky_kod) {\n      try {\n        if (typeof order.druh_objednavky_kod === 'string' && order.druh_objednavky_kod.startsWith('{')) {\n          const parsed = JSON.parse(order.druh_objednavky_kod);\n          return parsed.nazev_stavu || parsed.nazev || '';\n        }\n        if (typeof order.druh_objednavky_kod === 'object' && order.druh_objednavky_kod.nazev_stavu) {\n          return order.druh_objednavky_kod.nazev_stavu;\n        }\n        return order.druh_objednavky_kod;\n      } catch (e) {\n        return '';\n      }\n    }\n    return '';\n  };\n\n  const searchableText = removeDiacritics([\n    // Zkladn informace o objednvce\n    order.cislo_objednavky,\n    order.predmet,\n    order.dodavatel_nazev,\n    order.dodavatel_ico,\n    order.dodavatel_adresa,\n    order.dodavatel_kontakt_jmeno,\n    order.dodavatel_kontakt_email,\n    order.dodavatel_kontakt_telefon,\n    order.poznamka,\n    \n    // Uivatel\n    enriched.uzivatel ? getUserDisplayName(null, enriched.uzivatel) : '',\n    getGarantNameForSearch(order, getUserDisplayName),\n    getSchvalovatelNameForSearch(order, getUserDisplayName),\n    getUserDisplayName(order.uzivatel_id),\n    getUserDisplayName(order.objednatel_id),\n    \n    //  STAVY - VDY HLEDEJ V OBOU ZDROJCH\n    order.stav_objednavky, //  Zkladn stav (esk nzvy: \"Dokonena\", \"Ke schvlen\", ...)\n    enriched.stav_workflow?.nazev_stavu, //  Enriched workflow stav\n    enriched.stav_workflow?.nazev, //  Enriched nzev\n    getOrderDisplayStatus(order), //  Vpoetn funkce jako fallback\n    \n    // Druh objednvky\n    getDruhObjednavkyNazev(),\n    \n    // Stediska\n    enriched.strediska ? enriched.strediska.map(s => `${s.kod} ${s.nazev}`).join(' ') : '',\n    order.strediska_kod ? (Array.isArray(order.strediska_kod) ? order.strediska_kod.join(' ') : order.strediska_kod) : '',\n    \n    // Financovn\n    order.financovani?.typ_nazev,\n    order.financovani?.typ,\n    order.financovani?.lp_kody ? order.financovani.lp_kody.join(' ') : '',\n    order.financovani?.lp_nazvy ? order.financovani.lp_nazvy.map(lp => `${lp.cislo_lp || lp.kod || ''} ${lp.nazev || ''}`).join(' ') : '',\n    order.financovani?.poznamka,\n    order.financovani?.cislo_smlouvy,\n    order.financovani?.poznamka_smlouvy,\n    \n    //  POLOKY OBJEDNVKY + PODDKY\n    ...(order.polozky && Array.isArray(order.polozky)\n      ? order.polozky.flatMap(item => {\n          const itemFields = [\n            item.nazev_polozky,\n            item.popis,\n            item.poznamka,\n            item.poznamka_umisteni,\n            item.katalog_cislo,\n            item.dodavatel_kod,\n            item.usek_kod,\n            item.budova_kod,\n            item.mistnost_kod\n          ].filter(Boolean).join(' ');\n          \n          //  Pidej i poddky poloky\n          const subItems = item.podradky && Array.isArray(item.podradky)\n            ? item.podradky.map(sub => [\n                sub.nazev_polozky,\n                sub.popis,\n                sub.poznamka,\n                sub.poznamka_umisteni,\n                sub.katalog_cislo,\n                sub.dodavatel_kod,\n                sub.usek_kod,\n                sub.budova_kod,\n                sub.mistnost_kod\n              ].filter(Boolean).join(' '))\n            : [];\n          \n          return [itemFields, ...subItems];\n        })\n      : []),\n    \n    //  FAKTURY + PODDKY FAKTUR\n    ...(order.faktury && Array.isArray(order.faktury)\n      ? order.faktury.flatMap(faktura => {\n          const fakturaFields = [\n            faktura.fa_cislo_vema,\n            faktura.cislo_faktury,\n            faktura.fa_poznamka,\n            faktura.fa_strediska_kod \n              ? (Array.isArray(faktura.fa_strediska_kod) \n                  ? faktura.fa_strediska_kod.join(' ') \n                  : faktura.fa_strediska_kod) \n              : ''\n          ].filter(Boolean).join(' ');\n          \n          //  Pidej i poddky faktury\n          const fakturaSubItems = faktura.polozky && Array.isArray(faktura.polozky)\n            ? faktura.polozky.map(fItem => [\n                fItem.nazev_polozky,\n                fItem.popis,\n                fItem.poznamka,\n                fItem.katalog_cislo\n              ].filter(Boolean).join(' '))\n            : [];\n          \n          return [fakturaFields, ...fakturaSubItems];\n        })\n      : []),\n    \n    // Plohy objednvky\n    ...(order.prilohy && Array.isArray(order.prilohy)\n      ? order.prilohy.map(priloha => [\n          priloha.nazev_souboru,\n          priloha.nazev,\n          priloha.popis\n        ].filter(Boolean).join(' '))\n      : []),\n    \n    // Dodaten dokumenty\n    ...(order.dodatecne_dokumenty && Array.isArray(order.dodatecne_dokumenty)\n      ? order.dodatecne_dokumenty.map(dokument => [\n          dokument.nazev_souboru,\n          dokument.nazev,\n          dokument.popis\n        ].filter(Boolean).join(' '))\n      : []),\n    \n    // Plohy faktur\n    ...(order.faktury && Array.isArray(order.faktury)\n      ? order.faktury.flatMap(faktura =>\n          faktura.prilohy && Array.isArray(faktura.prilohy)\n            ? faktura.prilohy.map(priloha => [\n                priloha.nazev_souboru,\n                priloha.nazev,\n                priloha.popis\n              ].filter(Boolean).join(' '))\n            : []\n        )\n      : [])\n  ].filter(Boolean).join(' '));\n\n  return searchableText.includes(removeDiacritics(searchText));\n};\n\n/**\n * Filtr podle statusu (podporuje pole stav)\n * @param {Object} order - Objednvka\n * @param {Array} statusFilter - Pole systmovch kd status (nap. ['KE_SCHVALENI', 'SCHVALENA'])\n * @param {Function} getOrderSystemStatus - Funkce pro zskn systmovho kdu z objednvky\n */\nexport const filterByStatusArray = (order, statusFilter, getOrderSystemStatus) => {\n  if (!statusFilter || !Array.isArray(statusFilter) || statusFilter.length === 0) return true;\n\n  //  MAPOVN: esk nzvy  Systmov kdy\n  const czechToSystemCode = {\n    'Nov': 'NOVA',\n    'Ke schvlen': 'KE_SCHVALENI',\n    'Schvlen': 'SCHVALENA',\n    'Zamtnut': 'ZAMITNUTA',\n    'ek se': 'CEKA_SE',\n    'Rozpracovan': 'ROZPRACOVANA',\n    'Odeslan dodavateli': 'ODESLANA',\n    'Potvrzen dodavatelem': 'POTVRZENA',\n    'Ke zveejnn': 'K_UVEREJNENI_DO_REGISTRU',\n    'Zveejnno': 'UVEREJNENA',\n    'ek na potvrzen': 'CEKA_POTVRZENI',\n    'Vcn sprvnost': 'VECNA_SPRAVNOST',\n    'Dokonen': 'DOKONCENA',\n    'Vyzen': 'VYRIZENA',\n    'Zruen': 'ZRUSENA',\n    'Smazan': 'SMAZANA',\n    'Archivovno': 'ARCHIVOVANO'\n  };\n\n  // Zskej systmov stav objednvky (bere v vahu registr_smluv)\n  const systemStatus = getOrderSystemStatus(order);\n  \n  if (!systemStatus) {\n    return statusFilter.includes('Nov') || statusFilter.includes('Koncept');\n  }\n\n  // Porovnej systmov stav s filtrem\n  return statusFilter.some(filterValue => {\n    const expectedSystemCode = czechToSystemCode[filterValue];\n    // Porovnej bu systmov kd nebo pmou shodu\n    return expectedSystemCode === systemStatus || filterValue === systemStatus;\n  });\n};\n\n/**\n * Filtr podle archivace\n */\nexport const filterByArchived = (order, showArchived, getOrderSystemStatus) => {\n  if (showArchived) return true;\n\n  const status = getOrderSystemStatus(order);\n  return status !== 'ARCHIVOVANO';\n};\n\n/**\n * Filtr podle uivatele (creator nebo orderer)\n */\nexport const filterByUser = (order, userFilter) => {\n  if (!userFilter) return true;\n\n  const userId = parseInt(userFilter);\n  const matchesCreator = order.uzivatel_id === userId;\n  const matchesOrderer = order.objednatel_id === userId;\n\n  return matchesCreator || matchesOrderer;\n};\n\n/**\n * Filtr podle data (dt_objednavky nebo datum_obj_do)\n */\nexport const filterByDateRange = (order, dateFromFilter, dateToFilter, getOrderDate) => {\n  if (!dateFromFilter && !dateToFilter) return true;\n\n  const dtObjednavky = getOrderDate(order);\n  const datumObjDo = order.datum_obj_do ? order.datum_obj_do.split('T')[0] : null;\n\n  const hasAnyDate = dtObjednavky || datumObjDo;\n  if (!hasAnyDate) return true;\n\n  let passesFilter = false;\n\n  // Kontrola dt_objednavky\n  if (dtObjednavky) {\n    const orderDate = new Date(dtObjednavky);\n    const fromDate = dateFromFilter ? new Date(dateFromFilter) : null;\n    const toDate = dateToFilter ? new Date(dateToFilter) : null;\n\n    if (toDate) toDate.setHours(23, 59, 59, 999);\n\n    const afterFrom = !fromDate || orderDate >= fromDate;\n    const beforeTo = !toDate || orderDate <= toDate;\n\n    if (afterFrom && beforeTo) {\n      passesFilter = true;\n    }\n  }\n\n  // Kontrola datum_obj_do (pokud dt_objednavky neprolo)\n  if (!passesFilter && datumObjDo) {\n    const objDoDate = new Date(datumObjDo);\n    const fromDate = dateFromFilter ? new Date(dateFromFilter) : null;\n    const toDate = dateToFilter ? new Date(dateToFilter) : null;\n\n    if (toDate) toDate.setHours(23, 59, 59, 999);\n\n    const afterFrom = !fromDate || objDoDate >= fromDate;\n    const beforeTo = !toDate || objDoDate <= toDate;\n\n    if (afterFrom && beforeTo) {\n      passesFilter = true;\n    }\n  }\n\n  return passesFilter;\n};\n\n/**\n * Filtr podle stky\n */\nexport const filterByAmountRange = (order, amountFromFilter, amountToFilter) => {\n  const amount = parseFloat(order.max_cena_s_dph || 0);\n\n  if (amountFromFilter && amount < parseFloat(amountFromFilter)) return false;\n  if (amountToFilter && amount > parseFloat(amountToFilter)) return false;\n\n  return true;\n};\n\n/**\n * Filtr podle stavu registru smluv\n */\nexport const filterByRegistrStatus = (order, filterMaBytZverejneno, filterByloZverejneno, getOrderWorkflowStatus) => {\n  if (!filterMaBytZverejneno && !filterByloZverejneno) return true;\n\n  const registr = order.registr_smluv;\n  const workflowStatus = getOrderWorkflowStatus(order);\n\n  const maZverejnit = workflowStatus === 'UVEREJNIT' || registr?.zverejnit === 'ANO';\n  const jeZverejneno = registr?.dt_zverejneni && registr?.registr_iddt;\n\n  // Pokud jsou zakrtnut OBOJE  zobraz objednvky kter spluj ALESPO JEDNO\n  if (filterMaBytZverejneno && filterByloZverejneno) {\n    return (maZverejnit && !jeZverejneno) || jeZverejneno;\n  }\n  // Pokud je zakrtnut jen \"M bt zveejnno\"\n  else if (filterMaBytZverejneno) {\n    return maZverejnit && !jeZverejneno;\n  }\n  // Pokud je zakrtnut jen \"Bylo ji zveejnno\"\n  else if (filterByloZverejneno) {\n    return jeZverejneno;\n  }\n\n  return true;\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faClipboardList,\n  faBell,\n  faEdit,\n  faTrash,\n  faFileWord,\n  faCut,\n  faCopy,\n  faPaste,\n  faTimes,\n  faFileInvoice\n} from '@fortawesome/free-solid-svg-icons';\n\nconst MenuContainer = styled.div`\n  position: fixed;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 4px 12px rgba(0, 0, 0, 0.1);\n  padding: 0.5rem 0;\n  min-width: 220px;\n  z-index: 999999;\n  font-size: 0.875rem;\n  /*  ZMNA: Animace se aktivuje a po pozicovn pomoc opacity v style */\n  transition: opacity 0.15s ease-out;\n`;\n\nconst MenuItem = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  width: 100%;\n  padding: 0.65rem 1rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ${props => props.danger ? '#dc2626' : props.success ? '#059669' : '#0f172a'};\n  transition: all 0.15s;\n  text-align: left;\n\n  &:hover {\n    background: ${props => props.danger ? '#fee2e2' : props.success ? '#d1fae5' : '#f1f5f9'};\n    color: ${props => props.danger ? '#991b1b' : props.success ? '#047857' : '#0369a1'};\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    color: #94a3b8;\n\n    &:hover {\n      background: transparent;\n      color: #94a3b8;\n    }\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: ${props => props.danger ? '#dc2626' : props.success ? '#059669' : '#64748b'};\n  }\n\n  &:hover svg {\n    color: ${props => props.danger ? '#991b1b' : props.success ? '#047857' : '#0369a1'};\n  }\n\n  &:disabled svg {\n    color: #94a3b8;\n  }\n`;\n\nconst MenuDivider = styled.div`\n  height: 1px;\n  background: #e2e8f0;\n  margin: 0.5rem 0;\n`;\n\nconst MenuLabel = styled.span`\n  flex: 1;\n  font-weight: 500;\n`;\n\n/**\n * Kontextov menu pro dky tabulky objednvek\n * @param {Object} props\n * @param {number} props.x - X pozice menu\n * @param {number} props.y - Y pozice menu\n * @param {Object} props.order - Vybran objednvka\n * @param {Function} props.onClose - Callback pro zaven menu\n * @param {Function} props.onAddToTodo - Pidat do TODO\n * @param {Function} props.onAddAlarm - Pidat upozornn/alarm\n * @param {Function} props.onEdit - Editovat objednvku\n * @param {Function} props.onDelete - Smazat objednvku\n * @param {Function} props.onGenerateDocx - Generovat DOCX ze ablony\n * @param {Function} props.onGenerateFinancialControl - Generovat finann kontrolu (PDF/tisk)\n * @param {boolean} props.canDelete - M uivatel prvo smazat?\n * @param {Object} props.selectedData - Vybran data (buka nebo dek)\n */\nexport const OrderContextMenu = ({\n  x,\n  y,\n  order,\n  onClose,\n  onAddToTodo,\n  onAddAlarm,\n  onEdit,\n  onDelete,\n  onGenerateDocx,\n  onGenerateFinancialControl,\n  canDelete = false,\n  selectedData = null\n}) => {\n  const menuRef = useRef(null);\n  const [hasClipboardData, setHasClipboardData] = useState(false);\n  const [clipboardData, setClipboardData] = useState(null);\n  const [menuPosition, setMenuPosition] = useState({ left: x, top: y });\n  const [isPositioned, setIsPositioned] = useState(false); //  NOV: Vlajka pro skryt bhem men\n\n  // Funkce pro kontrolu, zda me bt generovn DOCX\n  const canGenerateDocx = () => {\n    //  Generovn DOCX: od fze ROZPRACOVANA a do DOKONCENA (dle WorkflowManager fze 3-8)\n    if (!order) return false;\n\n    //  POVOLEN STAVY: Od ROZPRACOVANA a do DOKONCENA\n    //  SCHVALENA NEN POVOLENA - mus nsledovat ROZPRACOVANA nebo vy fze!\n    // Podle WorkflowManager mappingu:\n    // - FZE 3: ROZPRACOVANA (START - zaalo se pracovat)\n    // - FZE 4: POTVRZENA, ODESLANA\n    // - FZE 5-7: UVEREJNIT, UVEREJNENA, NEUVEREJNIT, FAKTURACE, VECNA_SPRAVNOST\n    // - FZE 8: DOKONCENA, ZKONTROLOVANA\n    const allowedStates = [\n      'ROZPRACOVANA',     //  FZE 3 - START (zaalo se vyplovat)\n      //  'SCHVALENA' - pouze schvleno, ale jet se nezaalo pracovat\n      'POTVRZENA',        //  FZE 4\n      'ODESLANA',         //  FZE 4\n      'UVEREJNIT',        //  FZE 5\n      'UVEREJNENA',       //  FZE 6\n      'NEUVEREJNIT',      //  FZE 6\n      'FAKTURACE',        //  FZE 6\n      'VECNA_SPRAVNOST',  //  FZE 7\n      'DOKONCENA',        //  FZE 8 - KONEC\n      'ZKONTROLOVANA',    //  FZE 8\n      'CEKA_SE'           //  Speciln stav - ek se na dodavatele\n    ];\n\n    //  KONTROLUJ ZDA POLE WORKFLOW STAV OBSAHUJE ALESPO JEDEN POVOLEN STAV\n    let workflowStates = [];\n    let aktualniStav = null;\n    let nazevStavu = '';\n\n    try {\n      // Priorita 1: stav_workflow_kod (pole stav - KONTROLUJ OBSAH, ne jen posledn!)\n      if (order.stav_workflow_kod) {\n        //  FIX: Me bt U ARRAY nebo STRING\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n\n        // Vezmi posledn stav pro zobrazen v debug logu\n        if (workflowStates.length > 0) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          if (typeof lastState === 'object' && (lastState.kod_stavu || lastState.nazev_stavu)) {\n            aktualniStav = lastState.kod_stavu || lastState.nazev_stavu;\n            nazevStavu = lastState.nazev_stavu || lastState.kod_stavu || '';\n          } else if (typeof lastState === 'string') {\n            aktualniStav = lastState;\n            nazevStavu = lastState;\n          }\n        }\n      }\n\n      // Priorita 2: fallback na jin pole stavu\n      if (!aktualniStav) {\n        aktualniStav = order.stav_id_num || order.stav_id || order.stav || order.nazev_stavu;\n        nazevStavu = order.nazev_stavu || order.status_name || aktualniStav;\n      }\n    } catch (error) {\n      aktualniStav = order.stav_id_num || order.stav_id || order.nazev_stavu;\n      nazevStavu = order.nazev_stavu || '';\n      workflowStates = [];\n    }\n\n    //  KONTROLA: Obsahuje pole workflow stav ALESPO JEDEN povolen stav?\n    const canGenerate = workflowStates.some(state => {\n      // Normalizuj stav (me bt string nebo objekt)\n      let stavCode = '';\n      if (typeof state === 'object' && (state.kod_stavu || state.nazev_stavu)) {\n        stavCode = String(state.kod_stavu || state.nazev_stavu).toUpperCase().trim();\n      } else if (typeof state === 'string') {\n        stavCode = String(state).toUpperCase().trim();\n      }\n\n      return allowedStates.includes(stavCode);\n    });\n\n    return canGenerate;\n  };\n\n  // Funkce pro kontrolu, zda me bt generovna finann kontrola\n  const canGenerateFinancialControl = () => {\n    if (!order) return false;\n\n    //  Finann kontrola je dostupn POUZE pro stav DOKONCENA\n    let workflowStates = [];\n    let aktualniStav = null;\n\n    try {\n      // Priorita 1: stav_objednavky (esk nzvy)\n      if (order.stav_objednavky) {\n        const normalizedStav = order.stav_objednavky.toLowerCase().trim();\n        if (normalizedStav === 'dokonena' || normalizedStav === 'dokoncena') {\n          return true;\n        }\n      }\n\n      // Priorita 2: stav_workflow_kod (pole stav)\n      if (order.stav_workflow_kod) {\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n\n        // Zkontroluj, jestli je posledn stav DOKONCENA\n        if (workflowStates.length > 0) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          if (typeof lastState === 'object' && (lastState.kod_stavu || lastState.nazev_stavu)) {\n            aktualniStav = lastState.kod_stavu || lastState.nazev_stavu;\n          } else if (typeof lastState === 'string') {\n            aktualniStav = lastState;\n          }\n\n          if (aktualniStav && String(aktualniStav).toUpperCase().trim() === 'DOKONCENA') {\n            return true;\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Chyba pi kontrole stavu pro finann kontrolu:', error);\n    }\n\n    return false;\n  };\n\n  //  NOV: useEffect pro vpoet pozice HNED po prvnm renderu\n  useEffect(() => {\n    if (menuRef.current && !isPositioned) {\n      const menuRect = menuRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n\n      let left = x;\n      let top = y;\n\n      // Kontrola, zda menu pesahuje prav okraj\n      if (x + menuRect.width > viewportWidth) {\n        left = viewportWidth - menuRect.width - 10;\n      }\n\n      // Kontrola, zda menu pesahuje spodn okraj\n      if (y + menuRect.height > viewportHeight) {\n        top = viewportHeight - menuRect.height - 10;\n      }\n\n      // Aktualizuj pozici a ozna jako \"positioned\"\n      setMenuPosition({ left, top });\n      setIsPositioned(true);\n    }\n  }, [x, y, isPositioned]);\n\n  // Kontrola obsahu schrnky pi oteven menu\n  useEffect(() => {\n    const checkClipboard = async () => {\n      try {\n        if (navigator.clipboard && navigator.clipboard.readText) {\n          const text = await navigator.clipboard.readText();\n          setHasClipboardData(text && text.trim().length > 0);\n\n          // Zkus parsovat jako JSON (pro strukturovan data)\n          try {\n            const data = JSON.parse(text);\n            if (data && typeof data === 'object') {\n              setClipboardData(data);\n            }\n          } catch {\n            // Nen JSON, ulome jako text\n            setClipboardData(text);\n          }\n        }\n      } catch (error) {\n        // Pokud nemme pstup ke schrnce, zkontrolujeme localStorage\n        const localData = localStorage.getItem('clipboard_data');\n        setHasClipboardData(!!localData);\n        if (localData) {\n          try {\n            setClipboardData(JSON.parse(localData));\n          } catch {\n            setClipboardData(localData);\n          }\n        }\n      }\n    };\n\n    checkClipboard();\n  }, []);\n\n  // Funkce pro koprovn do schrnky\n  const handleCopy = async () => {\n    let dataToCopy;\n    let description = '';\n\n    if (selectedData && selectedData.value) {\n      // Koprujeme obsah buky\n      dataToCopy = selectedData.value;\n      description = `buka: \"${dataToCopy.substring(0, 50)}${dataToCopy.length > 50 ? '...' : ''}\"`;\n    } else {\n      // Koprujeme cel dek objednvky jako JSON\n      dataToCopy = JSON.stringify(order, null, 2);\n      description = `objednvka ${order.cislo_objednavky || order.id}`;\n    }\n\n    try {\n      const textToCopy = typeof dataToCopy === 'string' ? dataToCopy : JSON.stringify(dataToCopy);\n\n      if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(textToCopy);\n      } else {\n        // Fallback pro star prohlee\n        const textArea = document.createElement('textarea');\n        textArea.value = textToCopy;\n        document.body.appendChild(textArea);\n        textArea.select();\n        document.execCommand('copy');\n        document.body.removeChild(textArea);\n      }\n\n      // Ulome tak do localStorage jako backup s metadaty\n      const clipboardInfo = {\n        data: dataToCopy,\n        description: description,\n        type: selectedData ? 'cell' : 'row',\n        timestamp: Date.now()\n      };\n      localStorage.setItem('clipboard_data', JSON.stringify(clipboardInfo));\n      setHasClipboardData(true);\n      setClipboardData(dataToCopy);\n\n      // Meme pidat toast zprvu o spnm koprovn\n\n    } catch (error) {\n    }\n  };\n\n  // Funkce pro vysthnut (koprovn + oznaen pro smazn)\n  const handleCut = async () => {\n    await handleCopy();\n    // Pidme metadata o vysthnut\n    const cutData = {\n      action: 'cut',\n      data: selectedData || order,\n      type: selectedData ? 'cell' : 'row',\n      orderId: order.id || order.cislo_objednavky,\n      timestamp: Date.now()\n    };\n\n    localStorage.setItem('clipboard_action', JSON.stringify(cutData));\n  };\n\n  // Funkce pro vloen ze schrnky\n  const handlePaste = async () => {\n    try {\n      let clipboardInfo = null;\n\n      // Zkus nast ze schrnky\n      try {\n        if (navigator.clipboard && navigator.clipboard.readText) {\n          const text = await navigator.clipboard.readText();\n          if (text) {\n            clipboardInfo = { data: text, type: 'external' };\n          }\n        }\n      } catch (error) {\n      }\n\n      // Pokud jsme nenaetli ze schrnky, zkus localStorage\n      if (!clipboardInfo) {\n        const localData = localStorage.getItem('clipboard_data');\n        if (localData) {\n          try {\n            clipboardInfo = JSON.parse(localData);\n          } catch {\n            clipboardInfo = { data: localData, type: 'text' };\n          }\n        }\n      }\n\n      if (clipboardInfo && clipboardInfo.data) {\n        // Zde meme implementovat konkrtn logiku podle typu dat\n        // napklad:\n        // - Vyplnn formule pi editaci\n        // - Vytvoen nov objednvky na zklad ablony\n        // - Nahrazen obsahu buky\n\n        // Pro te jen ukeme informaci\n        alert(`Vloeno: ${clipboardInfo.description || 'data ze schrnky'}`);\n      }\n    } catch (error) {\n    }\n  };\n\n  // Zavt menu pi kliku mimo nj\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        onClose();\n      }\n    };\n\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      } else if (e.ctrlKey || e.metaKey) {\n        switch (e.key) {\n          case 'c':\n          case 'C':\n            e.preventDefault();\n            handleCopy();\n            onClose();\n            break;\n          case 'x':\n          case 'X':\n            e.preventDefault();\n            handleCut();\n            onClose();\n            break;\n          case 'v':\n          case 'V':\n            if (hasClipboardData) {\n              e.preventDefault();\n              handlePaste();\n              onClose();\n            }\n            break;\n        }\n      }\n    };\n\n    // Mal zpodn, aby se menu nestihlo zavt hned po oteven\n    setTimeout(() => {\n      document.addEventListener('mousedown', handleClickOutside);\n      document.addEventListener('keydown', handleKeyDown);\n    }, 50);\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n\n  return ReactDOM.createPortal(\n    <MenuContainer\n      ref={menuRef}\n      style={{\n        left: `${menuPosition.left}px`,\n        top: `${menuPosition.top}px`,\n        //  NOV: Skryj menu, dokud nen sprvn umstno (prevence flicker)\n        opacity: isPositioned ? 1 : 0,\n        pointerEvents: isPositioned ? 'auto' : 'none'\n      }}\n    >\n      <MenuItem\n        onClick={() => { handleCut(); onClose(); }}\n        title={`Vystrihnout ${selectedData ? 'obsah buky' : 'cel dek'} (Ctrl+X)`}\n      >\n        <FontAwesomeIcon icon={faCut} />\n        <MenuLabel>Vystrihnout</MenuLabel>\n      </MenuItem>\n\n      <MenuItem\n        onClick={() => { handleCopy(); onClose(); }}\n        title={`Koprovat ${selectedData ? 'obsah buky' : 'cel dek'} (Ctrl+C)`}\n      >\n        <FontAwesomeIcon icon={faCopy} />\n        <MenuLabel>Koprovat</MenuLabel>\n      </MenuItem>\n\n      <MenuItem\n        disabled={!hasClipboardData}\n        onClick={() => { if (hasClipboardData) { handlePaste(); onClose(); } }}\n        title={\n          !hasClipboardData\n            ? 'Schrnka je przdn'\n            : `Vloit ze schrnky${clipboardData ? ` (${typeof clipboardData === 'string' ? clipboardData.substring(0, 30) + '...' : 'strukturovan data'})` : ''}`\n        }\n      >\n        <FontAwesomeIcon icon={faPaste} />\n        <MenuLabel>Vloit</MenuLabel>\n      </MenuItem>\n\n      <MenuDivider />\n\n      <MenuItem onClick={() => { onAddToTodo(order); onClose(); }}>\n        <FontAwesomeIcon icon={faClipboardList} />\n        <MenuLabel>Pidat do mho TODO</MenuLabel>\n      </MenuItem>\n\n      <MenuItem onClick={() => { onAddAlarm(order); onClose(); }}>\n        <FontAwesomeIcon icon={faBell} />\n        <MenuLabel>Pidat upozornn - ALARM</MenuLabel>\n      </MenuItem>\n\n      <MenuDivider />\n\n      <MenuItem onClick={() => { onEdit(order); onClose(); }}>\n        <FontAwesomeIcon icon={faEdit} />\n        <MenuLabel>Editace objednvky</MenuLabel>\n      </MenuItem>\n\n      <MenuItem\n        danger\n        disabled={!canDelete}\n        onClick={() => { if (canDelete) { onDelete(order); onClose(); } }}\n        title={!canDelete ? 'Nemte oprvnn ke smazn tto objednvky' : 'Smazat objednvku'}\n      >\n        <FontAwesomeIcon icon={faTrash} />\n        <MenuLabel>Smazat objednvku</MenuLabel>\n      </MenuItem>\n\n      <MenuDivider />\n\n      <MenuItem\n        disabled={!canGenerateDocx()}\n        onClick={() => { if (canGenerateDocx()) { onGenerateDocx(order); onClose(); } }}\n        title={\n          !canGenerateDocx()\n            ? 'Generovn DOCX je dostupn od fze ROZPRACOVAN (po schvlen, kdy se zane vyplovat) a do DOKONEN'\n            : 'Generovat DOCX dokument ze ablony'\n        }\n      >\n        <FontAwesomeIcon icon={faFileWord} />\n        <MenuLabel>Generovat DOCX</MenuLabel>\n      </MenuItem>\n\n      <MenuItem\n        success\n        disabled={!canGenerateFinancialControl()}\n        onClick={() => { if (canGenerateFinancialControl() && onGenerateFinancialControl) { onGenerateFinancialControl(order); onClose(); } }}\n        title={\n          !canGenerateFinancialControl()\n            ? 'Finann kontrola je dostupn pouze pro objednvky ve stavu DOKONENA'\n            : 'Generovat finann kontrolu (PDF/tisk)'\n        }\n      >\n        <FontAwesomeIcon icon={faFileInvoice} />\n        <MenuLabel>Finann kontrola (PDF/tisk)</MenuLabel>\n      </MenuItem>\n\n      <MenuDivider />\n\n      <MenuItem onClick={() => onClose()}>\n        <FontAwesomeIcon icon={faTimes} />\n        <MenuLabel>Storno</MenuLabel>\n      </MenuItem>\n    </MenuContainer>,\n    document.body\n  );\n};\n","import React, { useEffect, useState, useMemo, useContext, useCallback, useRef, lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { ProgressContext } from '../context/ProgressContext';\nimport { DebugContext } from '../context/DebugContext';\nimport { ToastContext } from '../context/ToastContext';\nimport { loadSettingsFromLocalStorage } from '../services/userSettingsApi';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport ModernHelper from '../components/ModernHelper';\nimport { useBackgroundTasks } from '../context/BackgroundTasksContext';\nimport { createDownloadLink25, lockOrder25, unlockOrder25, getDruhyObjednavky25, getStrediska25 } from '../services/api25orders';\nimport { getOrderV2, listOrdersV2, deleteOrderV2, downloadOrderAttachment, downloadInvoiceAttachment } from '../services/apiOrderV2'; //  V2 API pro natn, mazn a plohy\nimport { fetchAllUsers, fetchApprovers, fetchCiselniky, fetchLimitovanePrisliby } from '../services/api2auth';\nimport { getDocxSablonyList } from '../services/apiv2Dictionaries';\nimport { STATUS_COLORS, getStatusColor } from '../constants/orderStatusColors';\nimport { normalizeStav } from '../utils/orderStatus';\nimport { removeDiacritics } from '../utils/textHelpers';\nimport {\n  filterMyOrders,\n  applyColumnFilters\n} from '../utils/orderFilters';\nimport {\n  filterByGlobalSearch,\n  filterByStatusArray,\n  filterByArchived,\n  filterByUser,\n  filterByDateRange,\n  filterByAmountRange,\n  filterByRegistrStatus\n} from '../utils/orderFiltersAdvanced';\nimport { \n  filterOrders as filterOrdersShared,\n  calculateOrderStats, \n  getOrderSystemStatus,\n  getOrderTotalPriceWithDPH \n} from '../utils/orderStatsUtils';\nimport ordersCacheService from '../services/ordersCacheService';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSearch, faFilter, faTimes, faPlus, faEdit, faEye, faTrash, faFileWord,\n  faDownload, faSyncAlt, faChevronDown, faChevronUp,\n  faFileInvoice, faDashboard, faTableColumns, faFileExport,\n  faBolt, faCalendarAlt, faUser, faBuilding, faMoneyBillWave,\n  faCheckCircle, faTimesCircle, faHourglassHalf, faExclamationTriangle,\n  faFilePen, faShield, faTruck, faXmark, faClock, faCircleNotch,\n  faEraser, faList, faPalette, faMinus, faInfoCircle,\n  faUsers, faPaperclip,\n  faRocket, faBell, faArchive, faDatabase, faBoltLightning, faFileAlt,\n  faFaceFrown, faLock, faEnvelope, faPhone, faFileContract,\n  faReceipt, faListCheck,\n  faChevronLeft, faChevronRight, faBullseye\n} from '@fortawesome/free-solid-svg-icons';\nimport styled from '@emotion/styled';\nimport { Calendar } from 'lucide-react';\nimport { CustomSelect, SelectWithIcon } from '../components/CustomSelect';\nimport { OrderContextMenu } from '../components/OrderContextMenu';\nimport { TooltipWrapper } from '../styles/GlobalTooltip';\nimport { SmartTooltip } from '../styles/SmartTooltip';\nimport { prettyDate, formatDateOnly, exportCsv } from '../utils/format';\nimport { isValidConcept, hasDraftChanges, getDraftKey } from '../utils/draftUtils.js';\nimport order25DraftStorageService from '../services/order25DraftStorageService'; // ORDER25 STANDARD\nimport draftManager from '../services/DraftManager'; //  CENTRALIZOVAN DRAFT MANAGER\nimport { broadcastDraftUpdated, broadcastDraftDeleted, broadcastOrderSaved, onTabSyncMessage, BROADCAST_TYPES } from '../utils/tabSync';\nimport { translateErrorMessage, translateErrorMessageShort } from '../utils/errorTranslation';\nimport { getStatusIcon } from '../utils/iconMapping'; //  Unified icon mapping\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getExpandedRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\n\n//  PERFORMANCE: Lazy load DocxGeneratorModal (pouze kdy je poteba)\nconst DocxGeneratorModal = lazy(() => import('../components/DocxGeneratorModal').then(m => ({ default: m.DocxGeneratorModal })));\n\n//  PERFORMANCE: Lazy load FinancialControlModal\nconst FinancialControlModal = lazy(() => import('../components/FinancialControlModal'));\n\n// =============================================================================\n// KEYFRAMES FOR ANIMATIONS\n// =============================================================================\n\nconst highlightPulse = `\n  @keyframes highlightPulse {\n    0% {\n      filter: brightness(1.4) saturate(1.3);\n      box-shadow: 0 0 30px currentColor, 0 4px 16px rgba(0, 0, 0, 0.15);\n      transform: translateY(-2px) scale(1.015);\n    }\n    15% {\n      filter: brightness(1.5) saturate(1.4);\n      box-shadow: 0 0 40px currentColor, 0 6px 20px rgba(0, 0, 0, 0.2);\n      transform: translateY(-3px) scale(1.02);\n    }\n    30% {\n      filter: brightness(1.3) saturate(1.2);\n      box-shadow: 0 0 25px currentColor, 0 3px 12px rgba(0, 0, 0, 0.12);\n      transform: translateY(-1px) scale(1.01);\n    }\n    60% {\n      filter: brightness(1.15) saturate(1.1);\n      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.08);\n      transform: translateY(0) scale(1.005);\n    }\n    80% {\n      filter: brightness(1.05) saturate(1.05);\n      box-shadow: 0 0 8px rgba(0, 0, 0, 0.06), 0 1px 4px rgba(0, 0, 0, 0.04);\n      transform: translateY(0) scale(1.002);\n    }\n    100% {\n      filter: brightness(1) saturate(1);\n      box-shadow: none;\n      transform: translateY(0) scale(1);\n    }\n  }\n\n  @keyframes gradientShift {\n    0% { background-position: 0% 50%; }\n    100% { background-position: 100% 50%; }\n  }\n`;\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  position: relative;\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n  isolation: isolate;\n`;\n\n  const PageHeader = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    margin-bottom: 2rem;\n  `;\n\nconst PageTitle = styled.h1`\n  margin: 0;\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.35rem 0.6rem;\n  border: 2px solid #3b82f6;\n  border-radius: 6px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: ${props => props.$primary ? '#2563eb' : '#2563eb'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\n// Funkce pro vytvoen svtlej barvy (90% svtlosti)\nconst getLighterColor = (color, opacity = 0.9) => {\n  // Pokud je barva ve formtu hex, peve na rgba\n  if (color.startsWith('#')) {\n    const r = parseInt(color.slice(1, 3), 16);\n    const g = parseInt(color.slice(3, 5), 16);\n    const b = parseInt(color.slice(5, 7), 16);\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n  }\n\n  // Pokud je u rgba/rgb, upravme opacity\n  if (color.includes('rgba')) {\n    return color.replace(/[\\d\\.]+\\)$/g, `${opacity})`);\n  }\n\n  if (color.includes('rgb')) {\n    return color.replace('rgb', 'rgba').replace(')', `, ${opacity})`);\n  }\n\n  // Fallback\n  return color;\n};\n\n// Funkce pro mapovn uivatelskho stavu na systmov kd\nconst mapUserStatusToSystemCode = (userStatus) => {\n  // Kontrola na zatek textu pro rzn varianty\n  if (userStatus && typeof userStatus === 'string') {\n    if (userStatus.startsWith('Zamtnut')) return 'ZAMITNUTA';\n    if (userStatus.startsWith('Schvlen')) return 'SCHVALENA';\n    if (userStatus.startsWith('Dokonen')) return 'DOKONCENA';\n    if (userStatus.startsWith('Zruen')) return 'ZRUSENA';\n    if (userStatus.startsWith('Archivovn')) return 'ARCHIVOVANO';\n  }\n  \n  const mapping = {\n    'Ke schvlen': 'KE_SCHVALENI',\n    'Nov': 'NOVA',\n    'Rozpracovan': 'ROZPRACOVANA',\n    'Odeslan dodavateli': 'ODESLANA',\n    'Potvrzen dodavatelem': 'POTVRZENA',\n    'M bt zveejnna': 'K_UVEREJNENI_DO_REGISTRU',\n    'Uveejnn': 'UVEREJNENA',\n    'ek na potvrzen': 'CEKA_POTVRZENI',\n    'ek se': 'CEKA_SE',\n    'Vcn sprvnost': 'VECNA_SPRAVNOST',\n    'Smazan': 'SMAZANA',\n    'Koncept': 'NOVA' // Koncepty se mapuj jako nov objednvky\n  };\n  return mapping[userStatus] || userStatus;\n};\n\n// Funkce pro barvu pozad dk tabulky - svtl odstny\nconst getRowBackgroundColor = (order) => {\n  try {\n    // Speciln ppad pro koncepty\n    if (order?.isDraft || order?.je_koncept) {\n      return STATUS_COLORS.NOVA.light;\n    }\n\n    // Zskej systmov stav pro mapovn na barvy\n    let systemStatus;\n\n    // Preferuj uivatelsky pvtiv stav z stav_objednavky a zmapuj na systmov\n    if (order?.stav_objednavky) {\n      systemStatus = mapUserStatusToSystemCode(order.stav_objednavky);\n    }\n    // Fallback na stav_workflow_kod\n    else if (order?.stav_workflow_kod) {\n      try {\n        const workflowStates = JSON.parse(order.stav_workflow_kod);\n        if (Array.isArray(workflowStates)) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          // Pouij nazev_stavu nebo kod_stavu pokud je k dispozici\n          if (typeof lastState === 'object' && (lastState.kod_stavu || lastState.nazev_stavu)) {\n            systemStatus = lastState.kod_stavu || 'NEZNAMY';\n          } else {\n            systemStatus = typeof lastState === 'string' ? lastState : 'NEZNAMY';\n          }\n        } else {\n          systemStatus = order.stav_workflow_kod;\n        }\n      } catch {\n        systemStatus = order.stav_workflow_kod;\n      }\n    }\n    // Dal fallbacky pro rzn nzvy pol\n    else {\n      systemStatus = order?.stav_id_num ?? order?.stav_id ?? order?.status_id ?? order?.stav ?? 'NOVA';\n    }\n\n    const statusColors = getStatusColor(systemStatus);\n\n    // Debug vpis (pro testovn) - pmo prvn objednvka\n    if (order?.cislo_objednavky && order.cislo_objednavky.toString().endsWith('1')) {\n\n    }\n\n    return statusColors?.light || STATUS_COLORS.NOVA.light;\n  } catch (error) {\n    // Error getting row background color\n    return STATUS_COLORS.NOVA.light;\n  }\n};\n\n// Funkce pro barvu dladic dashboard - tmav barvy\nconst getDashboardColor = (stav) => {\n  try {\n    const statusColors = getStatusColor(stav);\n    return statusColors.dark;\n  } catch {\n    return STATUS_COLORS.NOVA.dark;\n  }\n};\n\n//  getStatusIcon je nyn importovn z utils/iconMapping.js\n// Odstranna lokln implementace pro zajitn konzistence ikon\n\n//  Helper funkce pro zskn emoji ikony podle stavu (stejn jako v NotificationsPage)\nconst getStatusEmoji = (status) => {\n  const normalizedStatus = status?.toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, ''); // Odstrann diakritiky\n\n  switch (normalizedStatus) {\n    case 'nova':\n    case 'koncept':\n      return '';\n    case 'ke_schvaleni':\n    case 'keschvaleni':\n      return '';\n    case 'schvalena':\n      return '';\n    case 'zamitnuta':\n      return '';\n    case 'rozpracovana':\n      return '';\n    case 'odeslana':\n      return '';\n    case 'potvrzena':\n      return '';\n    case 'uverejnena':\n    case 'registr_zverejnena':\n    case 'registrzverejnena':\n      return '';\n    case 'dokoncena':\n      return '';\n    case 'ceka_potvrzeni':\n    case 'cekapotvrzeni':\n      return '';\n    case 'ceka_se':\n    case 'cekase':\n      return '';\n    case 'zrusena':\n      return '';\n    case 'smazana':\n      return '';\n    case 'ceka_kontrola':\n    case 'cekakontrola':\n      return '';\n    case 'vecna_spravnost':\n    case 'vecnaspravnost':\n      return '';\n    case 'archivovano':\n    case 'archivovana':\n      return '';\n    default:\n      return '';\n  }\n};\n\n// Dashboard Panel\nconst DashboardPanel = styled.div`\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n`;\n\nconst DashboardGrid = styled.div`\n  display: grid;\n  grid-template-columns: minmax(350px, 400px) repeat(auto-fit, minmax(180px, 220px));\n  gap: clamp(0.8rem, 1.5vw, 1.65rem);\n  margin-bottom: 1.5rem;\n  align-items: start;\n  justify-content: start;\n  overflow-x: auto;\n\n  /* Lep responzivita pro rzn zoom rovn */\n  @media (max-width: 1400px) {\n    grid-template-columns: minmax(320px, 350px) repeat(auto-fit, minmax(160px, 200px));\n    gap: clamp(0.7rem, 1.3vw, 1.4rem);\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: minmax(300px, 330px) repeat(auto-fit, minmax(150px, 180px));\n    gap: clamp(0.6rem, 1.2vw, 1.3rem);\n  }\n\n  @media (max-width: 900px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.2rem);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.15rem);\n  }\n\n  @media (max-width: 600px) {\n    grid-template-columns: 1fr;\n    gap: clamp(0.6rem, 2vw, 0.9rem);\n  }\n\n  /* Speciln pravidla pro vysok zoom (detekce pes velk font-size) */\n  @media (min-width: 1600px) {\n    grid-template-columns: minmax(400px, 450px) repeat(auto-fit, minmax(200px, 250px));\n    gap: clamp(1.2rem, 1.8vw, 2rem);\n  }\n`;\n\nconst LargeStatCard = styled.div`\n  background: linear-gradient(145deg, #ffffff, #f9fafb);\n  border-radius: 16px;\n  padding: clamp(1.25rem, 1.5vw, 1.75rem);\n  border-left: 6px solid ${props => props.$color || '#3b82f6'};\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 2px 4px rgba(0, 0, 0, 0.06);\n\n  transition: all 0.3s ease;\n  grid-row: span 2;\n  grid-column: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: fit-content;\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n\n  /* Hover efekt */\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 8px 20px rgba(0, 0, 0, 0.12),\n      0 4px 8px rgba(0, 0, 0, 0.08);\n  }\n\n  /* Responsive breakpoints */\n  @media (max-width: 1200px) {\n    grid-row: span 1;\n    grid-column: span 2;\n    min-height: clamp(140px, 15vh, 180px);\n  }\n\n  @media (max-width: 900px) {\n    grid-column: span 1;\n    min-height: clamp(120px, 14vh, 160px);\n    padding: clamp(1rem, 1.2vw, 1.5rem);\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(110px, 13vh, 150px);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(100px, 12vh, 130px);\n    padding: clamp(0.8rem, 1vw, 1.25rem);\n  }\n`;\n\nconst StatCard = styled.div`\n  background: ${props => props.$isActive ?\n    `linear-gradient(145deg, ${props.$color || '#3b82f6'}20, ${props.$color || '#3b82f6'}10)` :\n    'linear-gradient(145deg, #ffffff, #f9fafb)'};\n  border-radius: 12px;\n  padding: clamp(0.8rem, 1vw, 1rem);\n  border-left: 4px solid ${props => props.$color || '#3b82f6'};\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n\n  transition: all 0.25s ease;\n  min-height: clamp(90px, 10vh, 120px);\n  min-width: clamp(160px, 18vw, 220px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: relative;\n  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n  width: 100%;\n  box-sizing: border-box;\n\n  /* Hover efekt */\n  &:hover {\n    transform: ${props => props.$clickable ? 'translateY(-2px)' : 'translateY(-1px)'};\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n    ${props => props.$clickable && `\n      background: linear-gradient(145deg, ${props.$color || '#3b82f6'}25, ${props.$color || '#3b82f6'}15);\n    `}\n  }\n\n  /* Aktivn stav */\n  ${props => props.$isActive && `\n    border-left-width: 6px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ${props.$color || '#3b82f6'}40;\n  `}\n\n  /* Responsive breakpoints pro rzn velikosti obrazovky a zoom */\n  @media (max-width: 1400px) {\n    min-height: clamp(85px, 9vh, 110px);\n    min-width: clamp(150px, 16vw, 200px);\n  }\n\n  @media (max-width: 1200px) {\n    min-height: clamp(80px, 8vh, 105px);\n    min-width: clamp(140px, 15vw, 190px);\n  }\n\n  @media (max-width: 900px) {\n    min-height: clamp(75px, 8vh, 100px);\n    min-width: 100%;\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(70px, 7vh, 95px);\n    padding: clamp(0.7rem, 0.8vw, 0.9rem);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(65px, 7vh, 85px);\n    padding: clamp(0.6rem, 0.7vw, 0.8rem);\n  }\n`;\n\nconst StatValue = styled.div`\n  font-size: clamp(1.25rem, 2.5vw, 1.875rem);\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1.2;\n  text-align: left;\n\n  /* Zajitn itelnosti na rznch zoom rovnch */\n  @media (max-width: 1400px) {\n    font-size: clamp(1.2rem, 2.3vw, 1.75rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.15rem, 2.2vw, 1.65rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.1rem, 2.1vw, 1.6rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1rem, 2vw, 1.5rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.95rem, 1.8vw, 1.3rem);\n  }\n`;\n\nconst StatLabel = styled.div`\n  font-size: clamp(0.75rem, 1.2vw, 0.875rem);\n  color: #64748b;\n  font-weight: 500;\n  text-align: left;\n  line-height: 1.4;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  /* Responzivn velikosti pro rzn zoom rovn */\n  @media (max-width: 1200px) {\n    white-space: normal;\n    line-height: 1.3;\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(0.7rem, 1.1vw, 0.825rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(0.65rem, 1vw, 0.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.6rem, 0.9vw, 0.75rem);\n  }\n`;\n\nconst StatHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n`;\n\nconst StatIcon = styled.div`\n  font-size: 1.5rem;\n  opacity: 0.85;\n  line-height: 1;\n\n  /* Kdy obsahuje FontAwesome ikonu (fallback) */\n  color: ${props => props.$color || '#64748b'};\n`;\n\nconst LargeStatValue = styled.div`\n  font-size: clamp(1.25rem, 2.5vw, 1.75rem);\n  font-weight: 700;\n  color: #1e293b;\n  text-align: center;\n  line-height: 1.1;\n  margin-bottom: 0.5rem;\n\n  /* Responzivn velikosti pro rzn zoom rovn */\n  @media (max-width: 1400px) {\n    font-size: clamp(1.15rem, 2.3vw, 1.6rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.3rem, 2.6vw, 2rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.2rem, 2.4vw, 1.9rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1.1rem, 2.2vw, 1.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(1rem, 2vw, 1.6rem);\n  }\n`;\n\nconst LargeStatLabel = styled.div`\n  font-size: 1rem;\n  color: #64748b;\n  font-weight: 600;\n  text-align: center;\n  margin-bottom: 1rem;\n\n  @media (max-width: 480px) {\n    font-size: 0.875rem;\n  }\n`;\n\nconst SummaryRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  margin-top: auto;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n`;\n\nconst SummaryItem = styled.div`\n  flex: 1;\n  padding: 0.75rem;\n  border-radius: 8px;\n  border-left: 3px solid ${props => props.$color || '#d1d5db'};\n  background: ${props => props.$bg || 'rgba(0, 0, 0, 0.02)'};\n`;\n\nconst SummaryLabel = styled.div`\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ${props => props.$color || '#6b7280'};\n  margin-bottom: 0.25rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n`;\n\nconst SummaryValue = styled.div`\n  font-size: 0.875rem;\n  font-weight: 700;\n  color: #1f2937;\n`;\n\n// Year Filter Panel (prominent position above main header)\nconst YearFilterPanel = styled.div`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  color: white;\n  position: relative;\n  z-index: 9999;\n`;\n\nconst YearFilterLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n`;\n\nconst YearFilterTitle = styled.h2`\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\n//  CACHE: Status indicator komponenty\nconst CacheStatusIconWrapper = styled(TooltipWrapper)`\n  z-index: 999999;\n`;\n\n//  Hint text komponenta (jako LockWarning u pokladny)\nconst HintText = styled.span`\n  margin-left: 0.5rem;\n  color: #64748b;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: help;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  flex-wrap: wrap;\n\n  /* Styling pro <kbd> tagy podle obrzku */\n  kbd {\n    display: inline-block;\n    padding: 0.15rem 0.5rem;\n    font-size: 0.7rem;\n    font-weight: 600;\n    line-height: 1.2;\n    color: #1e40af;\n    background: #dbeafe;\n    border: 1px solid #93c5fd;\n    border-radius: 4px;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;\n    text-transform: capitalize;\n    white-space: nowrap;\n  }\n`;\n\nconst CacheStatusIcon = styled.div`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ${props => props.fromCache\n    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n    : 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'\n  };\n  color: white;\n  font-size: 0.9rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  cursor: help;\n  transition: all 0.2s ease;\n  position: relative;\n  z-index: 999999;\n\n  &:hover {\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\n  }\n\n  svg {\n    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n  }\n`;\n\nconst YearFilterLabel = styled.label`\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst RefreshIconButton = styled.button`\n  background: ${props => props.isBackgroundActive\n    ? 'rgba(255, 193, 7, 0.2)' /* lut pi background refresh */\n    : 'rgba(255, 255, 255, 0.15)'}; /* Normln bl */\n  border: 1px solid ${props => props.isBackgroundActive\n    ? 'rgba(255, 193, 7, 0.4)' /* lut okraj */\n    : 'rgba(255, 255, 255, 0.3)'}; /* Normln okraj */\n  color: ${props => props.isBackgroundActive ? '#ffc107' : 'white'}; /* lut/bl ikona */\n  width: 42px;\n  height: 42px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n  margin-left: 0.5rem;\n\n  &:hover {\n    background: ${props => props.isBackgroundActive\n      ? 'rgba(255, 193, 7, 0.3)' /* lut hover */\n      : 'rgba(255, 255, 255, 0.25)'}; /* Bl hover */\n    border-color: ${props => props.isBackgroundActive\n      ? 'rgba(255, 193, 7, 0.6)' /* lut hover okraj */\n      : 'rgba(255, 255, 255, 0.4)'}; /* Bl hover okraj */\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst RefreshTimeLabel = styled.span`\n  font-size: 0.75rem;\n  color: rgba(255, 255, 255, 0.8);\n  margin-left: 0.5rem;\n  white-space: nowrap;\n  font-weight: 500;\n`;\n\nconst MonthFilterLabel = styled.label`\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-left: 1rem;\n`;\n\nconst YearFilterSelect = styled.select`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  option {\n    background: #1e40af;\n    color: white;\n    padding: 0.5rem;\n  }\n`;\n\nconst MonthFilterSelect = styled.select`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: auto;\n  min-width: 240px;\n\n  /* Scrollbar styling */\n  overflow-y: auto;\n  max-height: 400px;\n\n  &::-webkit-scrollbar {\n    width: 12px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 6px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(96, 165, 250, 0.9));\n    border-radius: 6px;\n    border: 2px solid rgba(30, 64, 175, 0.3);\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 1), rgba(96, 165, 250, 1));\n  }\n\n  /* Firefox scrollbar */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(59, 130, 246, 0.8) rgba(30, 64, 175, 0.3);\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  option {\n    background: #1e40af;\n    color: white;\n    padding: 0.5rem;\n    font-size: 0.95rem;\n\n    &:hover {\n      background: #2563eb;\n    }\n\n    &[data-separator=\"true\"] {\n      padding: 0.5rem 1rem !important;\n      margin: 0 !important;\n      width: 100% !important;\n      height: auto !important;\n      line-height: normal !important;\n      font-size: 0.95rem !important;\n      color: white !important;\n      background: #1e40af !important;\n      border: none !important;\n      border-top: 1px solid white !important;\n      cursor: default;\n      pointer-events: none;\n      display: block;\n      box-sizing: border-box;\n    }\n\n    &[data-action=\"true\"] {\n      font-style: normal;\n      color: white;\n      font-weight: normal;\n      padding: 0.5rem;\n      margin: 0;\n      background: #1e40af;\n\n      &:hover {\n        background: #2563eb;\n      }\n    }\n  }\n`;\n\n// Custom Month Dropdown Components\nconst MonthDropdownContainer = styled.div`\n  position: relative;\n  width: auto;\n  min-width: 240px;\n`;\n\nconst YearDropdownContainer = styled.div`\n  position: relative;\n  width: auto;\n  min-width: 160px;\n`;\n\nconst MonthDropdownButton = styled.button`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: 100%;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n`;\n\nconst MonthDropdownMenu = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 0.5rem;\n  background: #1e40af;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n  max-height: 400px;\n  overflow-y: auto;\n  z-index: 1000;\n  backdrop-filter: blur(8px);\n\n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 12px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 6px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(96, 165, 250, 0.9));\n    border-radius: 6px;\n    border: 2px solid rgba(30, 64, 175, 0.3);\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 1), rgba(96, 165, 250, 1));\n  }\n\n  /* Firefox scrollbar */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(59, 130, 246, 0.8) rgba(30, 64, 175, 0.3);\n`;\n\nconst MonthDropdownItem = styled.div`\n  padding: 0.75rem 1rem;\n  color: white;\n  cursor: ${props => props.disabled ? 'default' : 'pointer'};\n  font-size: 0.95rem;\n  transition: background 0.15s ease;\n  pointer-events: ${props => props.disabled ? 'none' : 'auto'};\n\n  ${props => props.separator && `\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    padding: 0.5rem 1rem;\n    text-align: center;\n    color: rgba(255, 255, 255, 0.7);\n  `}\n\n  ${props => props.action && `\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.9);\n  `}\n\n  ${props => !props.disabled && !props.separator && `\n    &:hover {\n      background: #2563eb;\n    }\n  `}\n`;\n\n// Filters Panel\nconst FiltersPanel = styled.div`\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n`;\n\nconst FiltersHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n\nconst FiltersGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr 0.6fr 0.6fr;\n  gap: clamp(1rem, 1.5vw, 1.5rem);\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n\n  /* Prvn dek: Objednatel (1), Garant (1), Pkazce (1), Schvalovatel (1), Stav objednvky (0.6+0.6) */\n  /* Druh dek: Datum (2), Cena (2), Stav registru (0.6), Mimodn udlosti (0.6) pod Stav objednvky */\n  \n  & > *:nth-of-type(5) {\n    grid-column: 5 / 7; /* Stav objednvky zabere sloupce 5, 6 (ka 0.6+0.6) */\n  }\n\n  & > *:nth-of-type(6) {\n    grid-column: 1 / 3; /* Datum - sloupce 1, 2 */\n  }\n\n  & > *:nth-of-type(7) {\n    grid-column: 3 / 5; /* Cena - sloupce 3, 4 */\n  }\n\n  & > *:nth-of-type(8) {\n    grid-column: 5 / 6; /* Stav registru - sloupec 5 (0.6fr) - zarovnn doleva */\n  }\n\n  & > *:nth-of-type(9) {\n    grid-column: 6 / 7; /* Mimodn udlosti - sloupec 6 (0.6fr) - zarovnn doprava */\n  }\n\n  /* Responzivn breakpointy */\n  @media (max-width: 1400px) {\n    grid-template-columns: repeat(3, 1fr);\n\n    & > *:nth-of-type(5) {\n      grid-column: 3 / 4; /* Stav objednvky - 1 sloupec */\n    }\n\n    /* Na stednch obrazovkch - datum a cena na vlastn dky */\n    & > *:nth-of-type(6) {\n      grid-column: 1 / -1;\n    }\n\n    & > *:nth-of-type(7) {\n      grid-column: 1 / -1;\n    }\n\n    & > *:nth-of-type(8) {\n      grid-column: 1 / 2;\n    }\n\n    & > *:nth-of-type(9) {\n      grid-column: 2 / 3;\n    }\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: repeat(2, 1fr);\n\n    & > *:nth-of-type(5) {\n      grid-column: 1 / -1; /* Stav objednvky - full width */\n    }\n\n    /* Na stednch obrazovkch - datum a cena na vlastn dky */\n    & > *:nth-of-type(6) {\n      grid-column: 1 / -1;\n    }\n\n    & > *:nth-of-type(7) {\n      grid-column: 1 / -1;\n    }\n\n    & > *:nth-of-type(8) {\n      grid-column: 1 / 2;\n    }\n\n    & > *:nth-of-type(9) {\n      grid-column: 2 / 3;\n    }\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: clamp(0.8rem, 1.2vw, 1.25rem);\n\n    /* Na mobilech - vechno na jeden sloupec */\n    & > * {\n      grid-column: 1 !important;\n    }\n  }\n\n  @media (max-width: 480px) {\n    gap: clamp(0.6rem, 1vw, 1rem);\n  }\n`;\n\n// Wrapper pro tlatko vymazat filtry v gridu\nconst ClearFiltersWrapper = styled.div`\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n`;\n\nconst FilterGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n`;\n\nconst FilterLabel = styled.div`\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #374151;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.5rem;\n  width: 100%;\n  margin-bottom: 0.5rem;\n`;\n\nconst FilterLabelLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst FilterClearButton = styled.button`\n  background: none;\n  border: none;\n  padding: 0.25rem 0.5rem;\n  cursor: pointer;\n  color: #9ca3af;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n  opacity: ${props => props.visible ? 1 : 0};\n  pointer-events: ${props => props.visible ? 'auto' : 'none'};\n  margin-left: auto;\n\n  &:hover {\n    color: #ef4444;\n    background: rgba(239, 68, 68, 0.1);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\n// Wrapper pro input s ikonou - konzistentn se zbytkem aplikace\nconst FilterInputWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 14px !important;\n    height: 14px !important;\n  }\n`;\n\nconst FilterInput = styled.input`\n  width: 100%;\n  box-sizing: border-box;\n  padding: ${props => props.hasIcon ? '0.5rem 2.5rem 0.5rem 2.5rem' : '0.5rem'};\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  background: white;\n  height: 42px;\n\n  /* Pro number inputy - zarovnn doprava a odstrann ipek */\n  ${props => props.type === 'number' && `\n    text-align: right;\n    padding-right: 2.5rem; /* msto pro K symbol */\n\n    /* Odstrann spinner ipek - WebKit */\n    &::-webkit-outer-spin-button,\n    &::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    /* Odstrann spinner ipek - Firefox */\n    &[type=number] {\n      -moz-appearance: textfield;\n    }\n  `}\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\n// Wrapper pro select s ikonou\nconst FilterSelectWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n`;\n\nconst FilterSelect = styled.select`\n  width: 100%;\n  box-sizing: border-box;\n  padding: ${props => props.hasIcon ? '0.75rem 1.75rem 0.75rem 2.5rem' : '0.75rem 1.75rem 0.75rem 0.75rem'};\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  color: #1f2937;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  /* Custom dropdown arrow - stejn jako v OrderForm25 */\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n\n  /* Styling pro placeholder option */\n  option[value=\"\"] {\n    color: #9ca3af;\n    font-weight: 400;\n  }\n\n  option {\n    color: #1f2937;\n    font-weight: 500;\n    padding: 0.5rem;\n  }\n`;\n\n// Layout pre cena od-do (dva inputy veda seba)\nconst PriceRangeGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n`;\n\nconst PriceRangeInputs = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PriceInputWrapper = styled.div`\n  flex: 1;\n  position: relative;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n\n  /* K symbol vpravo */\n  &::after {\n    content: 'K';\n    position: absolute;\n    right: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #6b7280;\n    font-size: 0.875rem;\n    font-weight: 500;\n    pointer-events: none;\n    z-index: 2;\n  }\n`;\n\nconst PriceSeparator = styled.span`\n  color: #6b7280;\n  font-weight: 500;\n  font-size: 0.875rem;\n  padding: 0 0.25rem;\n`;\n\n// Layout pre datum od-do (dva inputy veda seba)\nconst DateRangeGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n`;\n\nconst DateRangeInputs = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst DateInputWrapper = styled.div`\n  flex: 1;\n  position: relative;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n`;\n\nconst DateSeparator = styled.span`\n  color: #6b7280;\n  font-weight: 500;\n  font-size: 0.875rem;\n  padding: 0 0.25rem;\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.15rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 16px;\n  height: 16px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 10px !important;\n    height: 10px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ActionBadge = styled.span`\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  background: #dc2626;\n  color: white;\n  font-size: 10px;\n  font-weight: 700;\n  padding: 2px 5px;\n  border-radius: 10px;\n  min-width: 18px;\n  text-align: center;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n  pointer-events: none;\n  line-height: 1.2;\n  z-index: 10;\n  /* Prevence blikn */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  backface-visibility: hidden;\n  transform: translateZ(0);\n`;\n\nconst FilterActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: 2px solid #d1d5db;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  margin: 0 2px;\n  font-size: 14px;\n  position: relative;\n  overflow: visible;\n  /* Prevence blikn ikon */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  backface-visibility: hidden;\n\n  /* Stabilizace ikon */\n  svg {\n    display: block;\n    pointer-events: none;\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);\n    transition: left 0.5s;\n    pointer-events: none;\n  }\n\n  &:hover {\n    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n    color: #1e40af;\n    border-color: #3b82f6;\n    transform: translateY(-2px) scale(1.05);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n\n    &::before {\n      left: 100%;\n    }\n  }\n\n  &:active {\n    transform: translateY(-1px) scale(1.02);\n  }\n\n  &.active {\n    background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n    color: white;\n    border-color: #1d4ed8;\n    box-shadow:\n      0 4px 16px rgba(59, 130, 246, 0.4),\n      0 0 20px rgba(59, 130, 246, 0.3);\n    transform: scale(1.1);\n\n    &::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: linear-gradient(45deg,\n        rgba(255, 255, 255, 0.1) 0%,\n        transparent 20%,\n        transparent 80%,\n        rgba(255, 255, 255, 0.1) 100%);\n      animation: shimmer 2s infinite;\n    }\n\n    &:hover {\n      background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 50%, #1e40af 100%);\n      box-shadow:\n        0 6px 20px rgba(59, 130, 246, 0.5),\n        0 0 25px rgba(59, 130, 246, 0.4);\n      transform: scale(1.12) translateY(-2px);\n    }\n  }\n\n  @keyframes shimmer {\n    0% { transform: translateX(-100%); }\n    100% { transform: translateX(100%); }\n  }\n`;\n\n// Empty State Styles\nconst EmptyState = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  text-align: center;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 12px;\n  margin: 2rem 0;\n  border: 2px dashed #cbd5e1;\n`;\n\nconst EmptyStateIcon = styled.div`\n  font-size: 4rem;\n  color: #94a3b8;\n  margin-bottom: 1.5rem;\n  opacity: 0.7;\n`;\n\nconst EmptyStateTitle = styled.h3`\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #475569;\n  margin: 0 0 0.5rem 0;\n`;\n\nconst EmptyStateText = styled.p`\n  font-size: 1rem;\n  color: #64748b;\n  margin: 0;\n  max-width: 500px;\n`;\n\n// Table Styles - wrapper s relativn pozic pro scroll indiktory\nconst TableScrollWrapper = styled.div`\n  position: relative;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n\n  /* Shadow indiktory na okrajch kdy je mon scrollovat */\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 40px;\n    pointer-events: none;\n    z-index: 10;\n    transition: opacity 0.3s ease;\n  }\n\n  /* Lev shadow - kdy nen na zatku */\n  &::before {\n    left: 0;\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ${props => props.$showLeftShadow ? 1 : 0};\n    border-radius: 8px 0 0 8px;\n  }\n\n  /* Prav shadow - kdy nen na konci */\n  &::after {\n    right: 0;\n    background: linear-gradient(to left, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ${props => props.$showRightShadow ? 1 : 0};\n    border-radius: 0 8px 8px 0;\n  }\n`;\n\nconst TableContainer = styled.div`\n  /* Horizontln scrollovn kdy se tabulka nevejde */\n  overflow-x: auto;\n  overflow-y: visible;\n  position: relative;\n\n  /* Smooth scrolling pro lep UX */\n  scroll-behavior: smooth;\n\n  /* Skrt scrollbar - zabrnit blikn */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Firefox scrollbar - skrt */\n  scrollbar-width: none;\n  \n  /* IE a Edge - skrt */\n  -ms-overflow-style: none;\n`;\n\n// Floating Header Panel - zobraz se pi scrollovn\nconst FloatingHeaderPanel = styled.div`\n  position: fixed;\n  top: calc(var(--app-header-height, 96px) + 48px);\n  left: 0;\n  right: 0;\n  background: white;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 9999;\n  transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;\n  border-top: 2px solid #cbd5e1;\n  border-bottom: 3px solid #3b82f6;\n  opacity: ${props => props.$visible ? 1 : 0};\n  transform: translateY(${props => props.$visible ? '0' : '-10px'});\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\n`;\n\nconst FloatingTableWrapper = styled.div`\n  overflow-x: auto;\n  max-width: 100%;\n  padding: 0 1rem;\n  box-sizing: border-box;\n  font-family: 'Roboto Condensed', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;\n  font-size: 0.95rem;\n  letter-spacing: -0.01em;\n  \n  /* Synchronizace scroll pozice s hlavn tabulkou */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n`;\n\n// Scroll ipka - lev - FIXED position (pohybuje se s vertiklnm scrollem)\nconst ScrollArrowLeft = styled.button`\n  position: fixed;\n  left: 50px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 9999;\n\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  border: 2px solid #e5e7eb;\n  background: ${props => {\n    // Pln bl JEN kdy je hover pmo NAD IPKOU\n    if (props.$arrowHovered) {\n      return 'rgba(255, 255, 255, 0.98)';\n    }\n    return 'rgba(255, 255, 255, 0.25)'; // 75% prhledn (zobrazuje se kdy je hover nad tabulkou)\n  }};\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  /* Zobrazit kdy: 1) je poteba scrollovat A 2) je hover nad tabulkou NEBO nad ipkou */\n  opacity: ${props => (props.$visible && (props.$tableHovered || props.$arrowHovered)) ? 1 : 0};\n  pointer-events: ${props => (props.$visible && (props.$tableHovered || props.$arrowHovered)) ? 'auto' : 'none'};\n  transform: translateY(-50%); /* Vdy stejn velikost, dn scale */\n\n  &:hover:not(:disabled) {\n    background: rgba(248, 250, 252, 0.98);\n    border-color: #3b82f6;\n    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(-50%) scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  svg {\n    width: 22px;\n    height: 22px;\n    color: #3b82f6;\n  }\n`;\n\n// Scroll ipka - prav - FIXED position\nconst ScrollArrowRight = styled(ScrollArrowLeft)`\n  left: auto;\n  right: 50px;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  font-family: 'Roboto Condensed', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;\n  font-size: 0.95rem;\n  letter-spacing: -0.01em;\n`;\n\nconst TableHead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableRow = styled.tr`\n  /* Zkladn pozad dku podle priority:\n     1. KONCEPTY V EDITACI - nejvy priorita - oranov zvraznn\n     2. ZVRAZOVN PODLE STAVU - pokud je zapnuto\n     3. STRIPING - jednoduch stdn bl/ed (pokud highlighting vypnuto)\n  */\n  background: ${props => {\n    // 1. KONCEPTY V EDITACI - NEJVY PRIORITA - vdy viditeln\n    if (props.$isDraft || props.$hasLocalChanges) {\n      return 'linear-gradient(135deg, #ea580c 0%, #f97316 30%, #ea580c 70%, #dc2626 100%)';\n    }\n\n    // 2. ZVRAZOVN PODLE STAVU - pokud je zapnuto\n    if (props.$showHighlighting && props.$order) {\n      const bgColor = getRowBackgroundColor(props.$order);\n      if (bgColor && bgColor !== 'transparent') {\n        return `linear-gradient(135deg, ${bgColor} 0%, ${bgColor}dd 50%, ${bgColor} 100%)`;\n      }\n    }\n\n    // 2. DEFAULT - ist bl pozad\n    return 'white';\n  }};\n\n  /* Speciln efekty pro KONCEPTY V EDITACI - jen svtlej pozad */\n  ${props => (props.$isDraft || props.$hasLocalChanges) ? `\n    border-left: 4px solid #ea580c;\n    position: relative;\n    z-index: 5;\n\n    /* Bl psmo pro koncepty - dleit pro itelnost */\n    color: white !important;\n    font-weight: 700;\n\n    /* Vechny vnoen elementy */\n    & * {\n      color: white !important;\n      font-weight: 600 !important;\n    }\n\n    & div, & span, & sup, & sub, & small, & strong {\n      color: white !important;\n    }\n\n    /* Ikony a SVG */\n    & .fa, & svg, & [class*=\"fa-\"] {\n      color: white !important;\n    }\n\n    /* Tlatka v konceptech */\n    & button {\n      color: white !important;\n      background: rgba(255, 255, 255, 0.1) !important;\n      border-color: rgba(255, 255, 255, 0.3) !important;\n\n      &:hover {\n        background: rgba(255, 255, 255, 0.2) !important;\n        color: white !important;\n      }\n    }\n\n    /* Vstupn pole v konceptech */\n    & input {\n      background: rgba(255, 255, 255, 0.1) !important;\n      color: white !important;\n      border-color: rgba(255, 255, 255, 0.3) !important;\n\n      &::placeholder {\n        color: rgba(255, 255, 255, 0.7) !important;\n      }\n    }\n\n    /* Hover efekt pro koncepty - jen svtlej pozad */\n    &:hover {\n      background: linear-gradient(135deg, #fed7aa 0%, #fdba74 30%, #fb923c 70%, #f97316 100%) !important;\n\n      & * {\n        color: #7c2d12 !important;\n      }\n    }\n  ` : ''}\n\n  /* EFEKTY PODLE STAVU - pouze pokud nen koncept */\n  ${props => {\n    if (!(props.$isDraft || props.$hasLocalChanges) && props.$showHighlighting && props.$order) {\n      // Zskej systmov stav pomoc stejn logiky jako getRowBackgroundColor\n      let systemStatus;\n\n      if (props.$order?.stav_objednavky) {\n        // Mapovn uivatelsky pvtivch stav na systmov kdy\n        const mapping = {\n          'Ke schvlen': 'KE_SCHVALENI',\n          'Nov': 'NOVA',\n          'Schvlen': 'SCHVALENA',\n          'Zamtnut': 'ZAMITNUTA',\n          'Rozpracovan': 'ROZPRACOVANA',\n          'Odeslan dodavateli': 'ODESLANA',\n          'Potvrzen dodavatelem': 'POTVRZENA',\n          'Uveejnn': 'UVEREJNENA',\n          'ek na potvrzen': 'CEKA_POTVRZENI',\n          'ek se': 'CEKA_SE',\n          'Dokonen': 'DOKONCENA',\n          'Zruen': 'ZRUSENA',\n          'Smazan': 'SMAZANA',\n          'Koncept': 'NOVA'\n        };\n        systemStatus = mapping[props.$order.stav_objednavky] || props.$order.stav_objednavky;\n      } else if (props.$order?.stav_workflow_kod) {\n        try {\n          const workflowStates = JSON.parse(props.$order.stav_workflow_kod);\n          systemStatus = Array.isArray(workflowStates) ? workflowStates[workflowStates.length - 1] : props.$order.stav_workflow_kod;\n        } catch {\n          systemStatus = props.$order.stav_workflow_kod;\n        }\n      } else {\n        systemStatus = props.$order?.stav_id_num ?? props.$order?.stav_id ?? props.$order?.status_id ?? props.$order?.stav ?? 'NOVA';\n      }\n\n      const statusColors = getStatusColor(systemStatus);\n      const bgColor = statusColors?.light || '#f8fafc';\n      const darkColor = statusColors?.dark || '#64748b';\n\n      return `\n        /* Jemn 3D efekt podle stavu */\n        box-shadow:\n          0 2px 8px ${bgColor}66,\n          inset 0 1px 0 rgba(255, 255, 255, 0.5);\n\n        /* Lep itelnost textu */\n        color: #1f2937;\n        font-weight: 500;\n\n        /* Hover efekt pro dky s highlighting - jen svtlej pozad */\n        &:hover {\n          filter: brightness(1.1);\n          color: #1f2937 !important;\n        }\n      `;\n    }\n    return '';\n  }}\n\n  /* BLINK EFEKT pi uloen - m nejvy prioritu */\n  ${props => props.$isHighlighted ? highlightPulse + `\n    animation: highlightPulse 3s ease-out;\n    animation-iteration-count: 1;\n    z-index: 100 !important;\n    position: relative;\n  ` : ''}\n\n  /* Jemn hover efekt pro vechny dky (krom koncept kter maj vlastn) */\n  ${props => !(props.$isDraft || props.$hasLocalChanges) ? `\n    &:hover {\n      ${props.$showHighlighting ?\n        // Pokud je highlighting zapnuto, jen jemn zesvtlen\n        `filter: brightness(1.08);` :\n        // Pokud highlighting vypnuto, svtle modr hover\n        `background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;`\n      }\n    }\n  ` : ''}\n\n  /* Plynul pechody */\n  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n\n  /* Cursor pro dek - pointer s kontextovm menu (double-click pro editaci) */\n  cursor: pointer;\n`;\n\nconst TableHeader = styled.th`\n  padding: 0.5rem 0.375rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 0.375rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n`;\n\nconst ExpandButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #3b82f6;\n  font-size: 1.25rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n`;\n\n// Expanded Row Content\nconst ExpandedContent = styled.div`\n  padding: 0.75rem;\n  background: ${props => {\n    if (props.$order && props.$showRowHighlighting) {\n      // Zskej systmov stav pro mapovn na barvy\n      let systemStatus;\n\n      // Preferuj uivatelsky pvtiv stav z stav_objednavky a zmapuj na systmov\n      if (props.$order?.stav_objednavky) {\n        systemStatus = mapUserStatusToSystemCode(props.$order.stav_objednavky);\n      }\n      // Fallback na stav_workflow_kod\n      else if (props.$order?.stav_workflow_kod) {\n        try {\n          const workflowStates = JSON.parse(props.$order.stav_workflow_kod);\n          systemStatus = Array.isArray(workflowStates) ? workflowStates[workflowStates.length - 1] : props.$order.stav_workflow_kod;\n        } catch {\n          systemStatus = props.$order.stav_workflow_kod;\n        }\n      } else {\n        systemStatus = props.$order?.stav_id_num ?? props.$order?.stav_id ?? props.$order?.status_id ?? props.$order?.stav ?? 'NOVA';\n      }\n\n      const statusColors = getStatusColor(systemStatus);\n      const bgColor = statusColors?.light || '#f8fafc';\n      const lighterBgColor = getLighterColor(bgColor, 0.05); // Jen 5% opacity pro jemnj efekt\n\n      return lighterBgColor;\n    }\n    return '#f9fafb'; // Lehce ed pozad pro lep kontrast\n  }};\n  border-top: 2px solid ${props => {\n    if (props.$order && props.$showRowHighlighting) {\n      // Zskej systmov stav pro mapovn na barvy\n      let systemStatus;\n\n      if (props.$order?.stav_objednavky) {\n        systemStatus = mapUserStatusToSystemCode(props.$order.stav_objednavky);\n      } else if (props.$order?.stav_workflow_kod) {\n        try {\n          const workflowStates = JSON.parse(props.$order.stav_workflow_kod);\n          systemStatus = Array.isArray(workflowStates) ? workflowStates[workflowStates.length - 1] : props.$order.stav_workflow_kod;\n        } catch {\n          systemStatus = props.$order.stav_workflow_kod;\n        }\n      } else {\n        systemStatus = props.$order?.stav_id_num ?? props.$order?.stav_id ?? props.$order?.status_id ?? props.$order?.stav ?? 'NOVA';\n      }\n\n      const statusColors = getStatusColor(systemStatus);\n      const darkColor = statusColors?.dark || '#64748b';\n\n      return darkColor;\n    }\n    return '#e5e7eb';\n  }};\n  border-bottom: 2px solid #000000;\n`;\n\nconst ExpandedGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1rem;\n\n  /* Prvn dek: 4 karty (Zkladn, Finann, Odpovdn, Workflow) */\n  /* Kad karta zabere 1 sloupec = 25% ky */\n\n  /* Druh dek: 3 sloupce (Dodavatel, Poloky+Faktury, Plohy) */\n  /* Kad sloupec zabere 33.33% ky */\n\n  @media (max-width: 1400px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\n// Tsloupcov layout: Dodavatel | Poloky+Faktury | Plohy\nconst ThreeColumnLayout = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr; /* 33/33/33 layout */\n  gap: 1rem;\n  grid-column: 1 / -1; /* Zabere celou ku gridu */\n\n  @media (max-width: 1400px) {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  @media (max-width: 1000px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst SupplierColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  \n  /* InfoCard m zabrat celou vku */\n  > div {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nconst MiddleColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\n\nconst AttachmentsColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  /* InfoCard m zabrat celou vku */\n  > div {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n\n    /* Obsah plohy rozthnout */\n    > div:last-child {\n      flex: 1;\n      overflow-y: auto;\n    }\n  }\n`;\n\n// Star layout (ponechn pro ppadn dal pouit)\nconst SecondRowLayout = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  grid-column: 1 / -1;\n\n  @media (max-width: 1200px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst LeftColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\n\nconst RightColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  > div {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n\n    > div:last-child {\n      flex: 1;\n      overflow-y: auto;\n    }\n  }\n`;\nconst InfoCard = styled.div`\n  background: white;\n  border-radius: 8px;\n  padding: 0.625rem;\n  border-left: 4px solid ${props => {\n    if (props.$order && props.$showRowHighlighting) {\n      // Zskej systmov stav pro mapovn na barvy\n      let systemStatus;\n\n      if (props.$order?.stav_objednavky) {\n        systemStatus = mapUserStatusToSystemCode(props.$order.stav_objednavky);\n      } else if (props.$order?.stav_workflow_kod) {\n        try {\n          const workflowStates = JSON.parse(props.$order.stav_workflow_kod);\n          systemStatus = Array.isArray(workflowStates) ? workflowStates[workflowStates.length - 1] : props.$order.stav_workflow_kod;\n        } catch {\n          systemStatus = props.$order.stav_workflow_kod;\n        }\n      } else {\n        systemStatus = props.$order?.stav_id_num ?? props.$order?.stav_id ?? props.$order?.status_id ?? props.$order?.stav ?? 'NOVA';\n      }\n\n      const statusColors = getStatusColor(systemStatus);\n      const darkColor = statusColors?.dark || '#3b82f6';\n\n      return darkColor;\n    }\n    return '#3b82f6';\n  }};\n  box-shadow:\n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\n    inset 0 1px 0 rgba(255, 255, 255, 0.6);\n\n  /* 3D efekt pro karty */\n  position: relative;\n  transform: translateZ(0);\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\n      0 4px 6px -2px rgba(0, 0, 0, 0.05),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  }\n\n  /* Subtle gradient overlay pro 3D efekt */\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.02) 100%);\n    border-radius: 8px;\n    pointer-events: none;\n  }\n`;\n\nconst InfoCardTitle = styled.h4`\n  margin: 0 0 0.375rem 0;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #0a0a0a;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #6b7280;\n    opacity: 0.8;\n  }\n`;\n\n//  Komponenty pro faktury a dodaten dokumenty\nconst ListItemCard = styled.div`\n  padding: 10px 12px;\n  background: #f8fafc;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n    transform: translateX(2px);\n  }\n`;\n\nconst ListItemHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 6px;\n  gap: 12px;\n`;\n\nconst ListItemTitle = styled.div`\n  font-weight: 600;\n  font-size: 0.95em;\n  color: #0f172a;\n  flex: 1;\n`;\n\nconst ListItemBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-size: 0.75em;\n  font-weight: 600;\n  text-transform: uppercase;\n  white-space: nowrap;\n  background: ${props => props.$success ? '#dcfce7' : props.$warning ? '#fef3c7' : '#dbeafe'};\n  color: ${props => props.$success ? '#166534' : props.$warning ? '#854d0e' : '#1e40af'};\n  border: 1px solid ${props => props.$success ? '#86efac' : props.$warning ? '#fde047' : '#93c5fd'};\n\n  svg {\n    color: #6b7280;\n    opacity: 0.8;\n  }\n`;\n\nconst ListItemMeta = styled.div`\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n  font-size: 0.85em;\n  color: #64748b;\n`;\n\nconst ListItemMetaItem = styled.span`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst AttachmentsList = styled.div`\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px dashed #e2e8f0;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n`;\n\nconst AttachmentItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 4px 8px;\n  background: white;\n  border-radius: 4px;\n  font-size: 0.85em;\n\n  &:hover {\n    background: #f8fafc;\n  }\n`;\n\nconst AttachmentName = styled.span`\n  flex: 1;\n  color: #475569;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst AttachmentSize = styled.span`\n  color: #94a3b8;\n  font-size: 0.9em;\n  margin-left: 8px;\n`;\n\n//  Komponenty pro fze dokonen\nconst PhaseProgressBar = styled.div`\n  width: 100%;\n  height: 8px;\n  background: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n  margin: 8px 0;\n`;\n\nconst PhaseProgressFill = styled.div`\n  height: 100%;\n  background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);\n  border-radius: 4px;\n  transition: width 0.3s ease;\n  width: ${props => props.$progress || 0}%;\n`;\n\nconst PhaseLabel = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 0.9em;\n  margin-bottom: 4px;\n\n  .phase-name {\n    font-weight: 500;\n    color: #1e293b;\n  }\n\n  .phase-percent {\n    font-weight: 600;\n    color: #3b82f6;\n  }\n`;\n\nconst InfoRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 1.5rem;\n  padding: 0.225rem 0;\n  border-bottom: 1px dashed #e5e7eb;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst InfoLabel = styled.span`\n  font-weight: 600;\n  color: #0a0a0a;\n  flex-shrink: 0;\n  white-space: nowrap;\n  max-width: 45%;\n`;\n\nconst InfoValue = styled.span`\n  color: #0a0a0a;\n  text-align: right;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  flex: 1;\n  min-width: 0;\n  line-height: 1.3;\n`;\n\n// Pagination\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationControls = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n`;\n\n// Status Badge\nconst StatusBadge = styled.span`\n  display: inline-flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 8px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n  border: 2px solid;\n  background: ${props => {\n    // Speciln styling pro editovan/konceptov dky - transparentn pozad (jen obrys)\n    if (props.$isInEditRow) {\n      return 'transparent';\n    }\n    const statusColors = getStatusColor(props.$status);\n    return statusColors?.light || STATUS_COLORS.NOVA.light;\n  }};\n  color: ${props => {\n    // Speciln styling pro editovan/konceptov dky - tmav barvy pro dobr kontrast\n    if (props.$isInEditRow) {\n      const statusColors = getStatusColor(props.$status);\n      return statusColors?.dark || STATUS_COLORS.NOVA.dark;\n    }\n    const statusColors = getStatusColor(props.$status);\n    return statusColors?.dark || STATUS_COLORS.NOVA.dark;\n  }};\n  border-color: ${props => {\n    // Speciln styling pro editovan/konceptov dky - syt erven rmeek msto modrho\n    if (props.$isInEditRow) {\n      return '#dc2626'; // syt erven barva pro edit dky msto ruiv modr\n    }\n    const statusColors = getStatusColor(props.$status);\n    return statusColors?.dark || STATUS_COLORS.NOVA.dark;\n  }};\n  box-shadow: ${props => {\n    // Pidej stn pro lep viditelnost na oranovm pozad\n    if (props.$isInEditRow) {\n      return '0 1px 3px rgba(0, 0, 0, 0.2)';\n    }\n    return 'none';\n  }};\n`;\n\n// Action Menu\nconst ActionMenu = styled.div`\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst ActionMenuButton = styled.button`\n  padding: 0.375rem;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: 4px;\n  color: #64748b;\n  font-size: 0.8rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 28px;\n  min-height: 28px;\n\n  /* Prevence blikn ikon */\n  svg {\n    display: block;\n    pointer-events: none;\n  }\n\n  &:hover:not(:disabled):not([disabled]) {\n    background: #f1f5f9;\n    color: #1e293b;\n  }\n\n  &.edit:hover:not(:disabled):not([disabled]) {\n    color: #3b82f6;\n    background: #eff6ff;\n  }\n\n  &.export-document:hover:not(:disabled):not([disabled]) {\n    color: #059669;\n    background: #ecfdf5;\n  }\n\n  &.delete:hover:not(:disabled):not([disabled]) {\n    color: #dc2626;\n    background: #fef2f2;\n  }\n\n  &.create-invoice:hover:not(:disabled):not([disabled]) {\n    color: #0891b2;\n    background: #ecfeff;\n  }\n\n  &.financial-control:hover:not(:disabled):not([disabled]) {\n    color: #7c3aed;\n    background: #f5f3ff;\n  }\n\n  /* Disabled stav */\n  &:disabled,\n  &[disabled] {\n    opacity: 0.7;\n    cursor: not-allowed !important;\n    color: #94a3b8;\n    pointer-events: auto;\n    \n    &:hover {\n      background: transparent;\n      color: #94a3b8;\n    }\n  }\n`;\n\n// Debug Panel Styles\nconst DebugPanel = styled.div`\n  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n  border: 2px solid #0ea5e9;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  color: white;\n  font-family: 'Courier New', monospace;\n  box-shadow: 0 8px 32px rgba(14, 165, 233, 0.3);\n`;\n\nconst DebugHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 2px solid rgba(14, 165, 233, 0.3);\n`;\n\nconst DebugTitle = styled.h3`\n  margin: 0;\n  color: #0ea5e9;\n  font-size: 1.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst DebugContent = styled.div`\n  max-height: 400px;\n  overflow-y: auto;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid rgba(14, 165, 233, 0.2);\n`;\n\nconst DebugSection = styled.div`\n  margin-bottom: 1rem;\n  &:last-child { margin-bottom: 0; }\n`;\n\nconst DebugLabel = styled.div`\n  color: #0ea5e9;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst DebugValue = styled.pre`\n  margin: 0;\n  color: #e2e8f0;\n  font-size: 0.75rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-all;\n  background: rgba(0, 0, 0, 0.2);\n  padding: 0.75rem;\n  border-radius: 6px;\n  border-left: 3px solid #0ea5e9;\n`;\n\n// Loading Overlay with blur and fade effects\nconst LoadingOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(248, 250, 252, 0.95);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 99999;\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: opacity 0.5s ease-in-out;\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n`;\n\nconst LoadingSpinner = styled.div`\n  width: 64px;\n  height: 64px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #f59e0b;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1.5rem;\n  transform: scale(${props => props.$visible ? 1 : 0.8});\n  transition: transform 0.5s ease-in-out;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg) scale(1); }\n    100% { transform: rotate(360deg) scale(1); }\n  }\n`;\n\nconst LoadingMessage = styled.div`\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #374151;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  transform: translateY(${props => props.$visible ? '0' : '10px'});\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: transform 0.5s ease-in-out 0.1s, opacity 0.5s ease-in-out 0.1s;\n`;\n\nconst LoadingSubtext = styled.div`\n  font-size: 0.875rem;\n  color: #6b7280;\n  text-align: center;\n  transform: translateY(${props => props.$visible ? '0' : '10px'});\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: transform 0.5s ease-in-out 0.15s, opacity 0.5s ease-in-out 0.15s;\n`;\n\nconst PageContent = styled.div`\n  position: relative;\n  filter: blur(${props => props.$blurred ? '5px' : '0px'});\n  opacity: ${props => props.$blurred ? 0.6 : 1};\n  transition: filter 0.5s ease-in-out, opacity 0.5s ease-in-out;\n  pointer-events: ${props => props.$blurred ? 'none' : 'auto'};\n  will-change: ${props => props.$blurred ? 'filter, opacity' : 'auto'};\n  isolation: isolate;\n`;\n\n//  Styled komponenty pro zamenou objednvku dialog (pouvno v LOCKED ORDER ConfirmDialog)\nconst UserInfo = styled.div`\n  padding: 1rem;\n  background: #f8fafc;\n  border-left: 4px solid #3b82f6;\n  border-radius: 4px;\n  margin: 1rem 0;\n  font-size: 1.1rem;\n`;\n\nconst InfoText = styled.p`\n  margin: 0.75rem 0;\n  color: #64748b;\n  line-height: 1.6;\n`;\n\nconst WarningText = styled.p`\n  margin: 0.75rem 0;\n  color: #dc2626;\n  font-weight: 600;\n  line-height: 1.6;\n`;\n\nconst ContactInfo = styled.div`\n  margin: 1rem 0;\n  padding: 1rem;\n  background: #f0f9ff;\n  border: 1px solid #bfdbfe;\n  border-radius: 8px;\n`;\n\nconst ContactItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.5rem 0;\n  color: #1e40af;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid #e0e7ff;\n  }\n\n  svg {\n    color: #3b82f6;\n    width: 18px;\n    height: 18px;\n  }\n\n  a {\n    color: #1e40af;\n    text-decoration: none;\n    font-weight: 500;\n    transition: all 0.2s ease;\n\n    &:hover {\n      color: #1e3a8a;\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst ContactLabel = styled.span`\n  font-weight: 600;\n  min-width: 80px;\n  color: #64748b;\n`;\n\n//  Styled komponenty pro export preview modal\nconst ExportPreviewOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(8px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 999999;\n  animation: fadeIn 0.2s ease;\n  padding: 2rem;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ExportPreviewDialog = styled.div`\n  background: white;\n  border-radius: 16px;\n  max-width: 1200px;\n  width: 100%;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  animation: slideUp 0.3s ease;\n\n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n\nconst ExportPreviewHeader = styled.div`\n  padding: 1.5rem 2rem;\n  border-bottom: 2px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 16px 16px 0 0;\n`;\n\nconst ExportPreviewTitle = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n\n  svg {\n    font-size: 1.75rem;\n  }\n`;\n\nconst ExportPreviewCloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    transform: scale(1.05);\n  }\n\n  svg {\n    font-size: 1.25rem;\n  }\n`;\n\nconst ExportPreviewContent = styled.div`\n  padding: 2rem;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst ExportInfoGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst ExportInfoCard = styled.div`\n  padding: 0.75rem;\n  background: linear-gradient(135deg, #f6f8fb 0%, #eef2f7 100%);\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n`;\n\nconst ExportInfoLabel = styled.div`\n  font-size: 0.65rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  color: #6b7280;\n  font-weight: 600;\n  margin-bottom: 0.375rem;\n`;\n\nconst ExportInfoValue = styled.div`\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #1f2937;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n\n  svg {\n    font-size: 1rem;\n    color: #667eea;\n  }\n`;\n\nconst ExportPreviewTable = styled.div`\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 1.5rem;\n  width: fit-content;\n  min-width: 100%;\n`;\n\nconst ExportPreviewTableHeader = styled.div`\n  display: flex;\n  background: #f9fafb;\n  border-bottom: 2px solid #e5e7eb;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: #374151;\n`;\n\nconst ExportPreviewTableHeaderCell = styled.div`\n  padding: 0.75rem 1rem;\n  border-right: 1px solid #e5e7eb;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-shrink: 0;\n  \n  &:last-child {\n    border-right: none;\n  }\n`;\n\nconst ExportPreviewTableRow = styled.div`\n  display: flex;\n  border-bottom: 1px solid #e5e7eb;\n  \n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:nth-of-type(even) {\n    background: #f9fafb;\n  }\n\n  &:hover {\n    background: #f3f4f6;\n  }\n`;\n\nconst ExportPreviewTableCell = styled.div`\n  padding: 0.75rem 1rem;\n  font-size: 0.875rem;\n  color: #1f2937;\n  border-right: 1px solid #e5e7eb;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex-shrink: 0;\n  \n  &:last-child {\n    border-right: none;\n  }\n`;\n\nconst ExportPreviewFooter = styled.div`\n  padding: 1.5rem 2rem;\n  border-top: 2px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  background: #f9fafb;\n  border-radius: 0 0 16px 16px;\n`;\n\nconst ExportPreviewNote = styled.div`\n  font-size: 0.875rem;\n  color: #6b7280;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n`;\n\nconst ExportPreviewActions = styled.div`\n  display: flex;\n  gap: 1rem;\n`;\n\nconst ExportPreviewButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  ${props => props.$variant === 'cancel' && `\n    background: white;\n    color: #6b7280;\n    border: 2px solid #e5e7eb;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #d1d5db;\n    }\n  `}\n\n  ${props => props.$variant === 'confirm' && `\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.5);\n    }\n  `}\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\n//  Styled komponenty pro dialog hromadnho generovn DOCX\nconst BulkDocxOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(8px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 999999;\n  animation: fadeIn 0.2s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst BulkDocxDialog = styled.div`\n  background: white;\n  border-radius: 16px;\n  max-width: 900px;\n  width: 95%;\n  max-height: 90vh;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n  animation: slideUp 0.3s ease;\n\n  @keyframes slideUp {\n    from { transform: translateY(50px); opacity: 0; }\n    to { transform: translateY(0); opacity: 1; }\n  }\n`;\n\nconst BulkDocxHeader = styled.div`\n  background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n  padding: 1.5rem 2rem;\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst BulkDocxTitle = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst BulkDocxBody = styled.div`\n  padding: 2rem;\n  max-height: calc(90vh - 200px);\n  overflow-y: auto;\n`;\n\nconst BulkDocxOrderItem = styled.div`\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 1.25rem;\n  margin-bottom: 1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #0891b2;\n    box-shadow: 0 4px 12px rgba(8, 145, 178, 0.1);\n  }\n`;\n\nconst BulkDocxOrderHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n\nconst BulkDocxOrderNumber = styled.div`\n  font-weight: 700;\n  font-size: 1.1rem;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst BulkDocxOrderInfo = styled.div`\n  font-size: 0.9rem;\n  color: #64748b;\n  line-height: 1.6;\n  margin-bottom: 0.75rem;\n`;\n\nconst BulkDocxSignerSelect = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-top: 0.75rem;\n`;\n\nconst BulkDocxSignerLabel = styled.label`\n  font-weight: 600;\n  color: #475569;\n  min-width: 120px;\n`;\n\nconst BulkDocxFooter = styled.div`\n  background: #f8fafc;\n  padding: 1.5rem 2rem;\n  border-top: 2px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst BulkDocxSummary = styled.div`\n  font-size: 1rem;\n  color: #475569;\n  font-weight: 600;\n`;\n\nconst BulkDocxActions = styled.div`\n  display: flex;\n  gap: 0.75rem;\n`;\n\nconst BulkDocxButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 2px solid;\n\n  &.primary {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    color: white;\n    border-color: #0891b2;\n\n    &:hover {\n      background: linear-gradient(135deg, #0e7490 0%, #0891b2 100%);\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(8, 145, 178, 0.3);\n    }\n  }\n\n  &.secondary {\n    background: white;\n    color: #64748b;\n    border-color: #cbd5e1;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #94a3b8;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst LockTimeInfo = styled.div`\n  margin: 0.75rem 0;\n  padding: 0.75rem;\n  background: #fef3c7;\n  border-left: 4px solid #f59e0b;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  color: #92400e;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #f59e0b;\n    width: 16px;\n    height: 16px;\n  }\n`;\n\n// =============================================================================\n// FORCE UNLOCK WARNING DIALOG - Styled Components\n// =============================================================================\n\nconst ForceUnlockWarningOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.75);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: fadeIn 0.2s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ForceUnlockWarningDialog = styled.div`\n  background: white;\n  border-radius: 16px;\n  max-width: 500px;\n  width: 90%;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);\n  overflow: hidden;\n  animation: slideUp 0.3s ease;\n\n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n\nconst ForceUnlockWarningHeader = styled.div`\n  background: linear-gradient(135deg, #fca5a5, #ef4444, #dc2626);\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  border-bottom: 3px solid #b91c1c;\n`;\n\nconst ForceUnlockWarningIcon = styled.div`\n  font-size: 2.5rem;\n  animation: pulse 2s ease-in-out infinite;\n  filter: drop-shadow(0 2px 8px rgba(185, 28, 28, 0.5));\n\n  @keyframes pulse {\n    0%, 100% {\n      transform: scale(1);\n      opacity: 1;\n    }\n    50% {\n      transform: scale(1.1);\n      opacity: 0.8;\n    }\n  }\n`;\n\nconst ForceUnlockWarningTitle = styled.h3`\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 800;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  flex: 1;\n`;\n\nconst ForceUnlockWarningContent = styled.div`\n  padding: 1.5rem;\n`;\n\nconst ForceUnlockWarningMessage = styled.div`\n  margin-bottom: 1.25rem;\n  line-height: 1.6;\n  color: #374151;\n\n  strong {\n    color: #dc2626;\n    font-weight: 700;\n  }\n\n  p {\n    margin: 0 0 0.75rem 0;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n`;\n\nconst ForceUnlockWarningDetails = styled.div`\n  background: linear-gradient(135deg, #fef2f2, #fee2e2);\n  border: 2px solid #fecaca;\n  border-radius: 12px;\n  padding: 1rem;\n  margin-top: 1rem;\n`;\n\nconst ForceUnlockWarningDetailRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n  font-size: 0.9375rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  svg {\n    color: #dc2626;\n    flex-shrink: 0;\n  }\n`;\n\nconst ForceUnlockWarningDetailLabel = styled.span`\n  font-weight: 700;\n  color: #7f1d1d;\n  min-width: 120px;\n`;\n\nconst ForceUnlockWarningDetailValue = styled.span`\n  color: #991b1b;\n  flex: 1;\n`;\n\nconst ForceUnlockWarningActions = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 2px solid #f3f4f6;\n`;\n\nconst ForceUnlockWarningButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border: 2px solid;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 0.9375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ${props => props.$primary ? `\n    background: linear-gradient(135deg, #dc2626, #b91c1c);\n    color: white;\n    border-color: transparent;\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n\n    &:hover {\n      background: linear-gradient(135deg, #b91c1c, #991b1b);\n      box-shadow: 0 6px 16px rgba(220, 38, 38, 0.4);\n      transform: translateY(-2px);\n    }\n\n    &:active {\n      transform: translateY(0);\n    }\n  ` : `\n    background: white;\n    color: #6b7280;\n    border-color: #d1d5db;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n      color: #374151;\n    }\n  `}\n`;\n\n// =============================================================================\n// MULTISELECT KOMPONENTA (mimo hlavn komponentu aby se nevytvela pi kadm renderu)\n// =============================================================================\n\nconst MultiSelectLocal = ({ field, value, onChange, options, placeholder, icon }) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [searchTerm, setSearchTerm] = React.useState(''); //  Pidno vyhledvn\n  const dropdownRef = React.useRef(null);\n  const searchInputRef = React.useRef(null);\n\n  // Zavi dropdown pi kliku mimo\n  React.useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n        setSearchTerm(''); // Vyma vyhledvn pi zaven\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  //  Focus na vyhledvac pole pi oteven\n  React.useEffect(() => {\n    if (isOpen && searchInputRef.current) {\n      //  OPTIMALIZACE: requestAnimationFrame msto setTimeout\n      requestAnimationFrame(() => {\n        searchInputRef.current?.focus();\n      });\n    }\n  }, [isOpen]);\n\n  // Memoizuj aktuln hodnoty pro rychlej porovnvn\n  const valueSet = React.useMemo(() => {\n    const arr = Array.isArray(value) ? value : [];\n    // Peve vechny hodnoty na stringy pro konzistentn porovnvn\n    return new Set(arr.map(v => String(v)));\n  }, [value]);\n\n  //  Filtrovan options podle vyhledvn\n  const filteredOptions = React.useMemo(() => {\n    if (!searchTerm.trim()) return options;\n\n    const search = searchTerm.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n\n    return options.filter(opt => {\n      const label = (opt.displayName || opt.nazev_stavu || opt.nazev || '').toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n      return label.includes(search);\n    });\n  }, [options, searchTerm]);\n\n  const getDisplayValue = React.useCallback(() => {\n    if (!value || value.length === 0) return placeholder || 'Vyberte...';\n    if (value.length === 1) {\n      const opt = options?.find(o => String(o.id) === String(value[0]));\n      // Pro nzvy pouij poad: displayName > nazev_stavu > nazev\n      return opt ? (opt.displayName || opt.nazev_stavu || opt.nazev || value[0]) : value[0];\n    }\n    return `Vybrno: ${value.length}`;\n  }, [value, options, placeholder]);\n\n  const handleToggle = React.useCallback((optValue) => {\n    const currentValue = Array.isArray(value) ? value : [];\n    const newValue = currentValue.includes(optValue)\n      ? currentValue.filter(v => v !== optValue)\n      : [...currentValue, optValue];\n\n    // MultiSelectLocal value change\n\n    // Vytvo fake event s options pro kompatibilitu s existujcmi handlery\n    const fakeEvent = {\n      target: {\n        options: newValue.map(v => ({ value: v, selected: true }))\n      }\n    };\n    onChange(fakeEvent);\n  }, [value, onChange, field]);\n\n  const handleMainClick = React.useCallback((e) => {\n    e.stopPropagation();\n    setIsOpen(prev => !prev);\n  }, []);\n\n  const handleItemClick = React.useCallback((e, optValue) => {\n    e.stopPropagation();\n    handleToggle(optValue);\n  }, [handleToggle]);\n\n  // Pokud nejsou options, zobraz placeholder\n  if (!options || options.length === 0) {\n    return (\n      <div style={{\n        padding: '0.75rem 2.5rem',\n        border: '2px solid #e5e7eb',\n        borderRadius: '8px',\n        color: '#9ca3af',\n        fontSize: '0.875rem'\n      }}>\n        Natn...\n      </div>\n    );\n  }\n\n  return (\n    <div ref={dropdownRef} style={{ position: 'relative', width: '100%' }}>\n      <div\n        onClick={handleMainClick}\n        style={{\n          width: '100%',\n          padding: '0.75rem 2.5rem 0.75rem 2.5rem',\n          border: '2px solid #e5e7eb',\n          borderRadius: '8px',\n          fontSize: '0.875rem',\n          background: '#ffffff',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          position: 'relative',\n          color: (!value || value.length === 0) ? '#9ca3af' : '#1f2937',\n          fontWeight: (value && value.length > 0) ? '600' : '400'\n        }}\n      >\n        <span>{getDisplayValue()}</span>\n        <svg\n          style={{\n            position: 'absolute',\n            right: '0.5rem',\n            width: '16px',\n            height: '16px',\n            transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',\n            transition: 'transform 0.2s ease',\n            pointerEvents: 'none'\n          }}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"#374151\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <polyline points=\"6 9 12 15 18 9\"></polyline>\n        </svg>\n      </div>\n\n      {isOpen && (\n        <div style={{\n          position: 'absolute',\n          top: '100%',\n          left: 0,\n          right: 0,\n          marginTop: '4px',\n          background: '#ffffff',\n          border: '2px solid #3b82f6',\n          borderRadius: '8px',\n          zIndex: 9999,\n          boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\n          display: 'flex',\n          flexDirection: 'column',\n          maxHeight: '400px'\n        }}>\n          {/*  Vyhledvac pole */}\n          <div style={{\n            padding: '0.75rem',\n            borderBottom: '2px solid #e5e7eb',\n            position: 'sticky',\n            top: 0,\n            background: '#ffffff',\n            zIndex: 1\n          }}>\n            <div style={{ position: 'relative', width: '100%' }}>\n              <FontAwesomeIcon\n                icon={faSearch}\n                style={{\n                  position: 'absolute',\n                  left: '0.75rem',\n                  top: '50%',\n                  transform: 'translateY(-50%)',\n                  color: '#9ca3af',\n                  width: '12px',\n                  height: '12px',\n                  pointerEvents: 'none',\n                  zIndex: 1\n                }}\n              />\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Hledat...\"\n                style={{\n                  width: '100%',\n                  padding: '0.5rem 0.75rem 0.5rem 2rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '6px',\n                  fontSize: '0.875rem',\n                  outline: 'none',\n                  transition: 'border-color 0.2s'\n                }}\n                onFocus={(e) => e.target.style.borderColor = '#3b82f6'}\n                onBlur={(e) => e.target.style.borderColor = '#d1d5db'}\n                onClick={(e) => e.stopPropagation()}\n              />\n            </div>\n          </div>\n\n          {/* Seznam options */}\n          <div style={{\n            overflowY: 'auto',\n            maxHeight: '300px'\n          }}>\n            {filteredOptions.length === 0 ? (\n              <div style={{\n                padding: '1rem',\n                textAlign: 'center',\n                color: '#9ca3af',\n                fontSize: '0.875rem'\n              }}>\n                dn vsledky\n              </div>\n            ) : (\n              filteredOptions.map((opt, idx) => {\n                const optValue = String(opt.id || '');\n                const optLabel = opt.displayName || opt.nazev_stavu || opt.nazev || 'Bez nzvu';\n                const isSelected = valueSet.has(optValue);\n\n                if (!optValue) {\n                  return null; // Pesko poloky bez ID\n                }\n\n                return (\n                  <div\n                    key={optValue}\n                    onClick={(e) => handleItemClick(e, optValue)}\n                    style={{\n                      padding: '0.75rem 1rem',\n                      cursor: 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      background: isSelected ? '#eff6ff' : '#ffffff',\n                      borderBottom: '1px solid #f3f4f6',\n                      fontSize: '0.875rem',\n                      transition: 'background 0.15s'\n                    }}\n                    onMouseEnter={(e) => {\n                      if (!isSelected) e.currentTarget.style.background = '#f9fafb';\n                    }}\n                    onMouseLeave={(e) => {\n                      if (!isSelected) e.currentTarget.style.background = '#ffffff';\n                    }}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={isSelected}\n                      readOnly\n                      style={{\n                        cursor: 'pointer',\n                        width: '16px',\n                        height: '16px',\n                        accentColor: '#3b82f6',\n                        pointerEvents: 'none'\n                      }}\n                    />\n                    <span style={{\n                      fontWeight: isSelected ? '600' : '400',\n                      color: isSelected ? '#1f2937' : '#4b5563'\n                    }}>\n                      {optLabel}\n                    </span>\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Ikona vlevo dole */}\n      {icon && (\n        <div style={{\n          position: 'absolute',\n          left: '0.75rem',\n          bottom: '0.75rem',\n          color: '#9ca3af',\n          pointerEvents: 'none',\n          fontSize: '14px'\n        }}>\n          {icon}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// =============================================================================\n// DATEPICKER KOMPONENTA\n// =============================================================================\n\nconst DatePicker = ({ value, onChange, placeholder = 'Vyberte datum' }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [openUpwards, setOpenUpwards] = useState(false);\n  const [popupPosition, setPopupPosition] = useState({ top: 0, left: 0 });\n  const wrapperRef = useRef(null);\n\n  const selectedDate = value ? new Date(value) : null;\n\n  useEffect(() => {\n    if (value) {\n      const date = new Date(value);\n      if (!isNaN(date.getTime())) {\n        setCurrentMonth(date);\n      }\n    }\n  }, [value]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    \n    const handleCloseAllDatePickers = () => {\n      setIsOpen(false);\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      window.addEventListener('closeAllDatePickers', handleCloseAllDatePickers);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n        window.removeEventListener('closeAllDatePickers', handleCloseAllDatePickers);\n      };\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (isOpen && wrapperRef.current) {\n      let rafId = null;\n      let previousFloatingState = window.__floatingHeaderVisible || false;\n      \n      const checkPosition = () => {\n        if (!wrapperRef.current) return;\n        \n        // Detekce zmny floating header stavu bhem scrollu\n        const currentFloatingState = window.__floatingHeaderVisible || false;\n        if (currentFloatingState !== previousFloatingState) {\n\n          setIsOpen(false);\n          previousFloatingState = currentFloatingState;\n          return;\n        }\n        \n        const buttonRect = wrapperRef.current.getBoundingClientRect();\n        const calendarHeight = 380;\n        const footerHeight = 54;\n        const buffer = 20;\n        const spaceBelow = window.innerHeight - buttonRect.bottom - footerHeight - buffer;\n        const spaceAbove = buttonRect.top - buffer;\n        const shouldOpenUpward = spaceBelow < 300 || (spaceBelow < calendarHeight && spaceAbove > spaceBelow + 50);\n        setOpenUpwards(shouldOpenUpward);\n        \n        // Vypotej pozici pro fixed positioning\n        const left = buttonRect.left;\n        const top = shouldOpenUpward ? buttonRect.top - calendarHeight - 4 : buttonRect.bottom + 4;\n        setPopupPosition({ top, left });\n      };\n      \n      const handleScroll = () => {\n        if (rafId) {\n          cancelAnimationFrame(rafId);\n        }\n        rafId = requestAnimationFrame(checkPosition);\n      };\n      \n      checkPosition();\n      \n      // Aktualizuj pozici pi scrollu - pouij capture fzi pro vechny scrolly\n      window.addEventListener('scroll', handleScroll, { passive: true, capture: true });\n      window.addEventListener('resize', checkPosition);\n      \n      return () => {\n        if (rafId) {\n          cancelAnimationFrame(rafId);\n        }\n        window.removeEventListener('scroll', handleScroll, { capture: true });\n        window.removeEventListener('resize', checkPosition);\n      };\n    }\n  }, [isOpen]);\n\n  const formatDisplayDate = (date) => {\n    if (!date) return '';\n    try {\n      const d = new Date(date);\n      if (isNaN(d.getTime())) return '';\n      return d.toLocaleDateString('cs-CZ', { day: '2-digit', month: '2-digit', year: 'numeric' });\n    } catch {\n      return '';\n    }\n  };\n\n  const formatInputDate = (date) => {\n    const d = new Date(date);\n    const year = d.getFullYear();\n    const month = String(d.getMonth() + 1).padStart(2, '0');\n    const day = String(d.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  const getCalendarDays = () => {\n    const year = currentMonth.getFullYear();\n    const month = currentMonth.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const startDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;\n    const days = [];\n    for (let i = startDay - 1; i >= 0; i--) {\n      const date = new Date(year, month, -i);\n      days.push({ date, isOtherMonth: true });\n    }\n    for (let i = 1; i <= lastDay.getDate(); i++) {\n      const date = new Date(year, month, i);\n      days.push({ date, isOtherMonth: false });\n    }\n    const remainingDays = 42 - days.length;\n    for (let i = 1; i <= remainingDays; i++) {\n      const date = new Date(year, month + 1, i);\n      days.push({ date, isOtherMonth: true });\n    }\n    return days;\n  };\n\n  const handleDateSelect = (date) => {\n    onChange(formatInputDate(date));\n    setIsOpen(false);\n  };\n\n  const handleToday = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    handleDateSelect(new Date());\n  };\n\n  const handleClear = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    onChange('');\n    setIsOpen(false);\n  };\n\n  const prevMonth = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));\n  };\n\n  const nextMonth = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));\n  };\n\n  const today = new Date();\n  const calendarDays = getCalendarDays();\n  const displayText = value ? formatDisplayDate(value) : placeholder;\n\n  return (\n    <DatePickerWrapper ref={wrapperRef}>\n      <InputWithIcon hasIcon>\n        <Calendar size={18} style={{ position: 'absolute', left: '0.75rem', top: '50%', transform: 'translateY(-50%)', color: '#9ca3af', pointerEvents: 'none' }} />\n        <DateInputButton\n          type=\"button\"\n          onClick={() => setIsOpen(!isOpen)}\n          hasValue={!!value}\n        >\n          {displayText}\n        </DateInputButton>\n        {value && (\n          <DateClearButton type=\"button\" onClick={handleClear} title=\"Smazat datum\"></DateClearButton>\n        )}\n        <DateTodayButton type=\"button\" onClick={handleToday} title=\"Nastavit dnen datum\"></DateTodayButton>\n      </InputWithIcon>\n      {isOpen && ReactDOM.createPortal(\n        <DateCalendarPopup openUpwards={openUpwards} style={{ top: `${popupPosition.top}px`, left: `${popupPosition.left}px` }}>\n          <CalendarHeader>\n            <CalendarNav onClick={prevMonth}></CalendarNav>\n            <CalendarTitle>\n              <span>{currentMonth.toLocaleDateString('cs-CZ', { month: 'long' })}</span>\n              <span>{currentMonth.getFullYear()}</span>\n            </CalendarTitle>\n            <CalendarNav onClick={nextMonth}></CalendarNav>\n          </CalendarHeader>\n          <CalendarGrid>\n            {['Po', 't', 'St', 't', 'P', 'So', 'Ne'].map((day) => (\n              <CalendarDay key={day}>{day}</CalendarDay>\n            ))}\n            {calendarDays.map((day, index) => {\n              const isToday = day.date.toDateString() === today.toDateString();\n              const isSelected = selectedDate && day.date.toDateString() === selectedDate.toDateString();\n              return (\n                <CalendarDate\n                  key={index}\n                  onClick={() => handleDateSelect(day.date)}\n                  isToday={isToday}\n                  isSelected={isSelected}\n                  isOtherMonth={day.isOtherMonth}\n                >\n                  {day.date.getDate()}\n                </CalendarDate>\n              );\n            })}\n          </CalendarGrid>\n          <CalendarFooter>\n            <CalendarButton className=\"today\" onClick={handleToday}>Dnes</CalendarButton>\n            <CalendarButton className=\"clear\" onClick={handleClear}>Smazat</CalendarButton>\n          </CalendarFooter>\n        </DateCalendarPopup>,\n        document.body\n      )}\n    </DatePickerWrapper>\n  );\n};\n\nconst DatePickerWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst InputWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst DateInputButton = styled.button`\n  width: 100%;\n  display: block;\n  padding: 0.5rem;\n  padding-left: 2.75rem;\n  padding-right: 0.75rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  background: white;\n  color: ${props => props.hasValue ? '#1f2937' : '#9ca3af'};\n  font-size: 0.875rem;\n  font-weight: ${props => props.hasValue ? '600' : '400'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: left;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  height: 42px;\n  min-height: 42px;\n  &:hover {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst DateClearButton = styled.button`\n  display: none;\n`;\n\nconst DateTodayButton = styled.button`\n  display: none;\n`;\n\nconst DateCalendarPopup = styled.div`\n  position: fixed;\n  z-index: 999999;\n  background: white;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  padding: 0.5rem;\n  width: max-content;\n  min-width: 280px;\n`;\n\nconst CalendarHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.35rem;\n  border-bottom: 1px solid #e5e7eb;\n`;\n\nconst CalendarNav = styled.button`\n  background: #f3f4f6;\n  border: none;\n  border-radius: 4px;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: #374151;\n  font-weight: 600;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  &:hover {\n    background: #3b82f6;\n    color: white;\n    transform: scale(1.1);\n  }\n`;\n\nconst CalendarTitle = styled.div`\n  font-weight: 600;\n  font-size: 0.85rem;\n  color: #111827;\n  display: flex;\n  gap: 0.35rem;\n`;\n\nconst CalendarGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 1px;\n`;\n\nconst CalendarDay = styled.div`\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.65rem;\n  font-weight: 600;\n  color: #6b7280;\n  padding: 0.15rem;\n`;\n\nconst CalendarDate = styled.button`\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n  border: none;\n  border-radius: 4px;\n  background: ${props => props.isSelected ? '#3b82f6' : 'transparent'};\n  color: ${props => props.isSelected ? 'white' : props.isOtherMonth ? '#9ca3af' : '#374151'};\n  font-weight: ${props => props.isSelected ? '600' : '400'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &:hover {\n    background: ${props => props.isSelected ? '#2563eb' : '#f3f4f6'};\n    transform: scale(1.1);\n    color: ${props => props.isSelected ? 'white' : '#111827'};\n  }\n`;\n\nconst CalendarFooter = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.5rem;\n  padding-top: 0.5rem;\n  border-top: 2px solid #e5e7eb;\n`;\n\nconst CalendarButton = styled.button`\n  flex: 1;\n  padding: 0.5rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &.today {\n    background: #dbeafe;\n    color: #1e40af;\n    &:hover {\n      background: #bfdbfe;\n    }\n  }\n  &.clear {\n    background: #fee2e2;\n    color: #991b1b;\n    &:hover {\n      background: #fecaca;\n    }\n  }\n`;\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nconst Orders25List = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, token, username, hasPermission, hasAdminRole, user_id, userDetail, userPermissions, expandedPermissions } = useContext(AuthContext);\n  const { setProgress } = useContext(ProgressContext) || {};\n  const { setDebugInfo } = useContext(DebugContext) || {};\n  const { showToast } = useContext(ToastContext) || {};\n  \n  // HIERARCHIE: Nast konfiguraci hierarchie\n  const [hierarchyConfig, setHierarchyConfig] = useState(null);\n\n  // CRITICAL FIX: API V2 vrac ID jako NUMBER, AuthContext m user_id jako STRING\n  // Konverze na number pro vechna porovnn\n  const currentUserId = useMemo(() => parseInt(user_id, 10), [user_id]);\n\n  // Helper funkce pro user-specific localStorage kle\n  const getUserKey = (baseKey) => `${baseKey}_user_${currentUserId || 'anon'}`;\n\n  // Helper funkce pro ukldn/natn s user izolac\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const saved = localStorage.getItem(getUserKey(baseKey));\n      return saved !== null ? JSON.parse(saved) : defaultValue;\n    } catch {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (e) {\n      // Failed to save to localStorage\n    }\n  };\n  const bgTasksContext = useBackgroundTasks();\n\n  //  CACHE FIX: Stabilizuj permissions pro dependencies (useMemo msto pmho voln hasPermission)\n  // Toto zabrn zbytenmu rerendering pi kadm F5\n  const permissions = useMemo(() => {\n    if (!hasPermission) return { canViewAll: false, hasOnlyOwn: false };\n\n    const canViewAll = hasPermission('ORDER_MANAGE') ||\n                       hasPermission('ORDER_READ_ALL') ||\n                       hasPermission('ORDER_VIEW_ALL') ||\n                       hasPermission('ORDER_EDIT_ALL') ||\n                       hasPermission('ORDER_DELETE_ALL');\n\n    const hasOnlyOwn = !canViewAll && (\n      hasPermission('ORDER_READ_OWN') ||\n      hasPermission('ORDER_VIEW_OWN') ||\n      hasPermission('ORDER_EDIT_OWN') ||\n      hasPermission('ORDER_DELETE_OWN')\n    );\n\n    return { canViewAll, hasOnlyOwn };\n  }, [hasPermission]);\n\n  //  OPTIMALIZACE: Ref pro aktuln hodnotu permissions\n  // Pouit v loadData useCallback pro odstrann circular dependency\n  const permissionsRef = useRef(permissions);\n\n  // Aktualizuj ref pi kad zmn permissions\n  useEffect(() => {\n    permissionsRef.current = permissions;\n  }, [permissions]);\n\n  //  HIERARCHIE: Nast konfiguraci pi mount a zmn tokenu/username\n  useEffect(() => {\n    const loadHierarchy = async () => {\n      if (!token || !username) {\n        setHierarchyConfig(null);\n        return;\n      }\n      \n      try {\n        const { getHierarchyConfig } = await import('../services/hierarchyService');\n        const config = await getHierarchyConfig(token, username);\n        setHierarchyConfig(config);\n      } catch (error) {\n        console.error(' [Orders25List] Chyba pi natn hierarchie:', error);\n        setHierarchyConfig({\n          status: 'error',\n          enabled: false,\n          profileId: null,\n          profileName: null,\n          error: error.message\n        });\n      }\n    };\n    \n    loadHierarchy();\n  }, [token, username]);\n\n  // State\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [users, setUsers] = useState({});\n\n  //  CRITICAL PERFORMANCE: Ref pro users - pedchz re-renderingu columns useMemo\n  // Kdy se users objekt zmn (loadData), columns by se pepotvaly  cel tabulka re-render!\n  const usersRef = useRef(users);\n\n  // Aktualizuj ref pi kad zmn users\n  useEffect(() => {\n    usersRef.current = users;\n  }, [users]);\n  const [apiMeta, setApiMeta] = useState(null); // Meta data z API response (admin_analysis, atd.)\n\n  //  State a ref pro scroll ipky a shadow efekty\n  const [showLeftArrow, setShowLeftArrow] = useState(false);\n  const [showRightArrow, setShowRightArrow] = useState(false);\n  const [showLeftShadow, setShowLeftShadow] = useState(false);\n  const [showRightShadow, setShowRightShadow] = useState(false);\n  const [isTableHovered, setIsTableHovered] = useState(false); // Hover nad CELOU tabulkou (wrapper)\n  const [isArrowHovered, setIsArrowHovered] = useState(false); // Hover nad ipkou (aby nezmizel kdy na ni najede)\n  const tableWrapperRef = useRef(null); // Pro wrapper s shadow efekty\n\n  //  State a refs pro floating header\n  const [showFloatingHeader, setShowFloatingHeader] = useState(false);\n  const [columnWidths, setColumnWidths] = useState([]);\n  const tableRef = useRef(null); // Pro Intersection Observer (ukazuje na TableContainer)\n\n  // Tento effect mus bt a PO definici table instance, proto ho pesuneme ne\n  // Placeholder pro floating header observer - bude definovn a po table instance\n\n  // Callback ref pro TableScrollWrapper - detekuje hover nad CELOU tabulkou\n  const setTableWrapperRef = useCallback((node) => {\n    tableWrapperRef.current = node;\n\n    if (node) {\n      const handleMouseEnter = () => {\n        setIsTableHovered(true);\n      };\n\n      const handleMouseLeave = () => {\n        setIsTableHovered(false);\n        // NERESTUJI isArrowHovered - to a si d ipka sama!\n      };\n\n      node.addEventListener('mouseenter', handleMouseEnter);\n      node.addEventListener('mouseleave', handleMouseLeave);\n\n      return () => {\n        node.removeEventListener('mouseenter', handleMouseEnter);\n        node.removeEventListener('mouseleave', handleMouseLeave);\n      };\n    }\n  }, []);\n\n  //  Men ek sloupc pro floating header\n  useEffect(() => {\n    const measureColumnWidths = () => {\n      if (!tableRef.current) {\n        return;\n      }\n\n      // Najdeme vechny th elementy v prvnm dku hlaviky\n      const headerCells = tableRef.current.querySelectorAll('thead tr:first-child th');\n      const widths = Array.from(headerCells).map(cell => cell.offsetWidth);\n      setColumnWidths(widths);\n    };\n\n    // Pokud nejsou data nebo je loading, ekme\n    if (loading || !orders || orders.length === 0) {\n      return;\n    }\n\n    // Mal zpodn pro jistotu, e DOM je vykreslen\n    const timer = setTimeout(() => {\n      measureColumnWidths();\n    }, 250);\n\n    // Zm znovu po zmn velikosti okna\n    window.addEventListener('resize', measureColumnWidths);\n\n    return () => {\n      window.removeEventListener('resize', measureColumnWidths);\n      clearTimeout(timer);\n    };\n  }, [loading, orders]); // Zvislosti: spust se znovu kdy se zmn loading nebo data\n\n  //  Synchronizace horizontlnho scrollu mezi hlavn tabulkou a floating headerem\n  useEffect(() => {\n    if (!showFloatingHeader) return;\n    \n    const mainWrapper = tableWrapperRef.current;\n    const floatingWrapper = document.querySelector('[data-floating-header-wrapper]');\n    \n    if (!mainWrapper || !floatingWrapper) return;\n    \n    const syncScroll = (e) => {\n      if (e.target === mainWrapper) {\n        floatingWrapper.scrollLeft = mainWrapper.scrollLeft;\n      } else if (e.target === floatingWrapper) {\n        mainWrapper.scrollLeft = floatingWrapper.scrollLeft;\n      }\n    };\n    \n    mainWrapper.addEventListener('scroll', syncScroll);\n    floatingWrapper.addEventListener('scroll', syncScroll);\n    \n    // Inicializuj scroll pozici\n    floatingWrapper.scrollLeft = mainWrapper.scrollLeft;\n    \n    return () => {\n      mainWrapper.removeEventListener('scroll', syncScroll);\n      floatingWrapper.removeEventListener('scroll', syncScroll);\n    };\n  }, [showFloatingHeader]);\n\n  //  STATE pro inicializaci - splash screen zmiz a po dokonen VEHO\n  const [initializationComplete, setInitializationComplete] = useState(false);\n  const [splashVisible, setSplashVisible] = useState(true); // Pro fade efekt\n\n  //  CACHE: State pro tracking cache info\n  const [lastLoadSource, setLastLoadSource] = useState(null); // 'cache' | 'database' | null\n  const [lastLoadTime, setLastLoadTime] = useState(null);\n  const [lastLoadDuration, setLastLoadDuration] = useState(null); // Jak dlouho trvalo naten (ms)\n\n  //  STATE pro background refresh ikonu a as\n  const [isBackgroundRefreshActive, setIsBackgroundRefreshActive] = useState(false); // lut ikona po background reloadu\n  const [lastRefreshTime, setLastRefreshTime] = useState(null); // as poslednho refreshe pro zobrazen vedle ikony\n\n  // Dropdown lists - pipraven seznamy pro rychl zobrazen\n  const [objednatelList, setObjednatelList] = useState([]);\n  const [garantList, setGarantList] = useState([]);\n  const [schvalovatelList, setSchvalovatelList] = useState([]);\n\n  // Data z DB pro filtry\n  const [allUsers, setAllUsers] = useState([]); // vichni uivatel z DB pro filtry\n  const [approversList, setApproversList] = useState([]); // schvalovatel z DB\n  const [orderStatesList, setOrderStatesList] = useState([]); // stavy objednvek z selnku\n  const [lpKodyList, setLpKodyList] = useState([]); // LP kdy pro pevod ID na nzvy\n  const [druhyObjednavkyList, setDruhyObjednavkyList] = useState([]); // druhy objednvek z DB\n  const [strediskaList, setStrediskaList] = useState([]); // stediska z DB\n  \n  const [showEditConfirmModal, setShowEditConfirmModal] = useState(false);\n  const [orderToEdit, setOrderToEdit] = useState(null);\n  const [currentDraftData, setCurrentDraftData] = useState(null); // Data draftu pro zobrazen v modalu\n  const [showDeleteConfirmModal, setShowDeleteConfirmModal] = useState(false);\n  const [orderToDelete, setOrderToDelete] = useState(null);\n  const [showArchivedWarningModal, setShowArchivedWarningModal] = useState(false);\n  const [showArchivedWithDraftWarningModal, setShowArchivedWithDraftWarningModal] = useState(false); // Kombinovan modal\n\n  //  Nov state pro dialog zamen objednvky\n  const [showLockedOrderDialog, setShowLockedOrderDialog] = useState(false);\n  const [lockedOrderInfo, setLockedOrderInfo] = useState(null); // Info o zamen: { lockedByUserName, canForceUnlock, orderId }\n\n  //  State pro Force Unlock Warning Dialog\n  const [showForceUnlockWarning, setShowForceUnlockWarning] = useState(false);\n  const [forceUnlockWarningData, setForceUnlockWarningData] = useState(null); // { orderNumber, lockedBy, lockedByEmail, lockedByPhone, lockedAt }\n\n  //  State pro hromadn generovn DOCX\n  const [showBulkDocxDialog, setShowBulkDocxDialog] = useState(false);\n  const [bulkDocxOrders, setBulkDocxOrders] = useState([]); // Pole objednvek pro hromadn generovn\n  const [bulkDocxSigners, setBulkDocxSigners] = useState(() => {\n    // Nati z localStorage\n    return getUserStorage('bulkDocxSigners', {});\n  }); // {orderId: userId} - vbr podepisovatel\n  const [bulkDocxTemplates, setBulkDocxTemplates] = useState(() => {\n    // Nati z localStorage\n    return getUserStorage('bulkDocxTemplates', {});\n  }); // {orderId: templateName} - vbr ablon\n\n  //  State pro hromadn schvalovn\n  const [showBulkApprovalDialog, setShowBulkApprovalDialog] = useState(false);\n  const [bulkApprovalOrders, setBulkApprovalOrders] = useState([]);\n\n  //  State pro hromadn mazn\n  const [showBulkDeleteDialog, setShowBulkDeleteDialog] = useState(false);\n  const [bulkDeleteOrders, setBulkDeleteOrders] = useState([]);\n  const [bulkDeleteType, setBulkDeleteType] = useState('soft'); // 'soft' nebo 'hard'\n\n  //  State pro DOCX ablony z selnku\n  const [docxTemplates, setDocxTemplates] = useState([]);\n\n  const [showDashboard, setShowDashboard] = useState(() => {\n    // Nati stav z localStorage s user izolac, vchoz je true (zobrazeno)\n    return getUserStorage('orders25List_showDashboard', true);\n  });\n\n  //  DEBUG: State pro Order V2 API test panel\n  const [showApiTestPanel, setShowApiTestPanel] = useState(false);\n  const [apiTestData, setApiTestData] = useState(null);\n  const [showModalStylesPanel, setShowModalStylesPanel] = useState(false); //  Panel pro nvrhy styl modl\n  const [showFiltersPanel, setShowFiltersPanel] = useState(() => {\n    // Nati stav z localStorage pro zobrazen celho panelu filtr s user izolac, vchoz je true (zobrazeno)\n    return getUserStorage('orders25List_showFiltersPanel', true);\n  });\n  const [showFilters, setShowFilters] = useState(() => {\n    // Nati stav z localStorage s user izolac, vchoz je false (skryto)\n    return getUserStorage('orders25List_showFilters', false);\n  });\n  const [showDebug, setShowDebug] = useState(() => {\n    // Nati stav z localStorage s user izolac, vchoz je false (skryto)\n    return getUserStorage('orders25List_showDebug', false);\n  });\n  // User settings - nast z localStorage (bez transformace - pouvme esk kle pmo)\n  const userSettings = useMemo(() => {\n    if (!currentUserId) return null;\n    return loadSettingsFromLocalStorage(currentUserId);\n  }, [currentUserId]);\n\n  // Zkontrolovat zda m uivatel vlastn nastaven dladic\n  const hasCustomTileSettings = useMemo(() => {\n    return userSettings?.viditelne_dlazdice && Object.keys(userSettings.viditelne_dlazdice).length > 0;\n  }, [userSettings]);\n\n  const [dashboardCompact, setDashboardCompact] = useState(() => {\n    // Nati stav z localStorage s user izolac, vchoz je true (kompaktn)\n    return getUserStorage('orders25List_dashboardCompact', true);\n  });\n  \n  // Dashboard mode: 'standard' (compact/full toggle) nebo 'custom' (dle user settings)\n  const [dashboardMode, setDashboardMode] = useState(() => {\n    return getUserStorage('orders25List_dashboardMode', 'standard');\n  });\n  \n  const [activeStatusFilter, setActiveStatusFilter] = useState(() => {\n    return getUserStorage('orders25List_activeStatusFilter', null);\n  }); // Pro dashboard klikac filtry\n  const [rawData, setRawData] = useState(null);\n  const [initializing, setInitializing] = useState(true);\n\n  // Filters - load from localStorage s user izolac\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('orders25List_globalFilter', '');\n  });\n  //  STATUS FILTER - PRIORITA: 1. LS (session zmny), 2. userSettings (DB), 3. przdn pole\n  // Po pihlen: nate z DB (userSettings.vychozi_filtry_stavu_objednavek)\n  // Bhem session: zmny se ukldaj do LS a maj prioritu\n  // Po kliknut \"Uloit a aplikovat\" v Profile: LS se vyist  nate nov DB hodnoty\n  const [statusFilter, setStatusFilter] = useState(() => {\n    const saved = getUserStorage('orders25List_statusFilter', null);\n    if (saved !== null) {\n      // Pokud je uloen jako string (backward compatibility), peve na pole\n      const result = Array.isArray(saved) ? saved : (saved ? [saved] : []);\n      return result;\n    }\n    \n    // Nast z uivatelskch nastaven (DB)\n    try {\n      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n      if (userSettings?.vychozi_filtry_stavu_objednavek && Array.isArray(userSettings.vychozi_filtry_stavu_objednavek)) {\n        return userSettings.vychozi_filtry_stavu_objednavek;\n      }\n    } catch (e) {\n      console.warn('Nelze nast nastaven filtr stav:', e);\n    }\n    \n    // Fallback: przdn pole (dn pednastaven filtry)\n    return [];\n  });\n  const [userFilter, setUserFilter] = useState(() => {\n    return getUserStorage('orders25List_userFilter', '');\n  });\n\n  // Simple dropdown selections (just for showing selected values) - CHANGED TO ARRAYS for multiselect\n  const [selectedObjednatel, setSelectedObjednatel] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedObjednatel', []);\n    // Backward compatibility: peve string na pole\n    return Array.isArray(saved) ? saved : (saved ? [saved] : []);\n  });\n  const [selectedGarant, setSelectedGarant] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedGarant', []);\n    // Backward compatibility: peve string na pole\n    return Array.isArray(saved) ? saved : (saved ? [saved] : []);\n  });\n  const [selectedSchvalovatel, setSelectedSchvalovatel] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedSchvalovatel', []);\n    // Backward compatibility: peve string na pole\n    return Array.isArray(saved) ? saved : (saved ? [saved] : []);\n  });\n  const [selectedPrikazce, setSelectedPrikazce] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedPrikazce', []);\n    // Backward compatibility: peve string na pole\n    return Array.isArray(saved) ? saved : (saved ? [saved] : []);\n  });\n  const [dateFromFilter, setDateFromFilter] = useState('');\n  const [dateToFilter, setDateToFilter] = useState('');\n  const [amountFromFilter, setAmountFromFilter] = useState(() => {\n    return getUserStorage('orders25List_amountFrom', '');\n  });\n  const [amountToFilter, setAmountToFilter] = useState(() => {\n    return getUserStorage('orders25List_amountTo', '');\n  });\n\n  // Filtry pro zveejnn\n  const [filterMaBytZverejneno, setFilterMaBytZverejneno] = useState(() => {\n    return getUserStorage('orders25List_filterMaBytZverejneno', false);\n  });\n  const [filterByloZverejneno, setFilterByloZverejneno] = useState(() => {\n    return getUserStorage('orders25List_filterByloZverejneno', false);\n  });\n\n  // Filtr pro mimodn objednvky\n  const [filterMimoradneObjednavky, setFilterMimoradneObjednavky] = useState(() => {\n    return getUserStorage('orders25List_filterMimoradneObjednavky', false);\n  });\n\n  // Filtry pro faktury a plohy\n  const [filterWithInvoices, setFilterWithInvoices] = useState(false);\n  const [filterWithAttachments, setFilterWithAttachments] = useState(false);\n\n  // Vbr objednvek pro hromadn akce (React Table format: { '0': true, '2': true })\n  const [rowSelection, setRowSelection] = useState(() => {\n    // Nati z localStorage s user izolac\n    return getUserStorage('orders25List_rowSelection', {});\n  });\n\n  // Ukldej rowSelection do localStorage pi kad zmn\n  useEffect(() => {\n    setUserStorage('orders25List_rowSelection', rowSelection);\n  }, [rowSelection]);\n\n  // Highlight newly created order\n  const [highlightOrderId, setHighlightOrderId] = useState(null);\n\n  // Column-specific filters (textov filtry z hlaviky tabulky) - load from localStorage\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('orders25List_columnFilters', {\n      dt_objednavky: '',\n      cislo_objednavky: '',\n      predmet: '',\n      objednatel: '',\n      stav_objednavky: '',\n      max_cena_s_dph: '',\n      garant: '',\n      prikazce: '',\n      schvalovatel: ''\n    });\n  });\n\n  // Multiselect filters (ID filtry z rozenho filtrovacho panelu)\n  const [multiselectFilters, setMultiselectFilters] = useState({\n    objednatel: '',\n    garant: '',\n    prikazce: '',\n    schvalovatel: ''\n  });\n\n  // Row highlighting by status (zvrazovn podle stavu)\n  const [showRowHighlighting, setShowRowHighlighting] = useState(() => {\n    return getUserStorage('orders25List_showRowHighlighting', true);\n  });\n\n  // Year filter - load from localStorage s user izolac or use user settings or current year\n  //  YEAR FILTER - PRIORITA: 1. LS (session zmny), 2. userSettings (DB), 3. aktuln rok\n  // Po pihlen: nate z DB (userSettings)\n  // Bhem session: zmny se ukldaj do LS a maj prioritu\n  // Po kliknut \"Uloit a aplikovat\" v Profile: LS se vyist  nate nov DB hodnoty\n  const [selectedYear, setSelectedYear] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedYear', null);\n    if (saved !== null) return saved;\n    \n    // Nast z uivatelskch nastaven (DB)\n    try {\n      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n      if (userSettings?.vychozi_rok) {\n        // Pokud je 'current', pouij aktuln rok\n        if (userSettings.vychozi_rok === 'current') {\n          return new Date().getFullYear();\n        }\n        // Pokud je 'all', vra 'all'\n        if (userSettings.vychozi_rok === 'all') {\n          return 'all';\n        }\n        // Jinak vra konkrtn rok\n        return userSettings.vychozi_rok;\n      }\n    } catch (e) {\n      console.warn('Nelze nast nastaven roku:', e);\n    }\n    \n    // Fallback: aktuln rok\n    return new Date().getFullYear();\n  });\n\n  //  MONTH FILTER - PRIORITA: 1. LS (session zmny), 2. userSettings (DB), 3. 'all'\n  // Po pihlen: nate z DB (userSettings)\n  // Bhem session: zmny se ukldaj do LS a maj prioritu\n  // Po kliknut \"Uloit a aplikovat\" v Profile: LS se vyist  nate nov DB hodnoty\n  const [selectedMonth, setSelectedMonth] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedMonth', null);\n    if (saved !== null) return saved;\n    \n    // Nast z uivatelskch nastaven (DB)\n    try {\n      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n      if (userSettings?.vychozi_obdobi) {\n        return userSettings.vychozi_obdobi; // 'all' nebo '1'-'12' nebo 'last-month', 'Q1', etc.\n      }\n    } catch (e) {\n      console.warn('Nelze nast nastaven obdob:', e);\n    }\n    \n    // Fallback: vechny msce\n    return 'all';\n  });\n\n  // Show expanded month options\n  const [showExpandedMonths, setShowExpandedMonths] = useState(() => {\n    const saved = getUserStorage('orders25List_selectedMonth', 'all');\n    // Pokud je uloen hodnota mimo zkladn 4, zobraz rozen monosti\n    return saved && !['all', 'last-month', 'last-quarter', 'last-half'].includes(saved);\n  });\n\n  // Show archived orders checkbox - defaultn false (nezakrtnuto = nezobrazovat archivovan)\n  const [showArchived, setShowArchived] = useState(() => {\n    return getUserStorage('orders25List_showArchived', false);\n  });\n\n  // \"JEN MOJE\" filter - pouze pro SUPERADMIN a ADMINISTRATOR\n  const [showOnlyMyOrders, setShowOnlyMyOrders] = useState(() => {\n    return getUserStorage('orders25List_showOnlyMyOrders', false);\n  });\n\n  // Export preview modal\n  const [showExportPreview, setShowExportPreview] = useState(false);\n  const [exportPreviewData, setExportPreviewData] = useState(null);\n\n  // Ref pro msn select\n  const monthSelectRef = useRef(null);\n\n  // Ref pro ron select\n  const yearSelectRef = useRef(null);\n\n  // Stav pro oteven msnho dropdownu\n  const [isMonthDropdownOpen, setIsMonthDropdownOpen] = useState(false);\n\n  // Stav pro oteven ronho dropdownu\n  const [isYearDropdownOpen, setIsYearDropdownOpen] = useState(false);\n\n  // Custom Select states\n  const [selectStates, setSelectStates] = useState({});\n  const [searchStates, setSearchStates] = useState({});\n  const [touchedSelectFields, setTouchedSelectFields] = useState(new Set());\n  const [hasTriedToSubmit, setHasTriedToSubmit] = useState(false);\n\n  // Kontextov menu\n  const [contextMenu, setContextMenu] = useState(null); // { x, y, order }\n\n  // DOCX Generator Modal\n  const [docxModalOpen, setDocxModalOpen] = useState(false);\n  const [docxModalOrder, setDocxModalOrder] = useState(null);\n\n  // Financial Control Modal\n  const [financialControlModalOpen, setFinancialControlModalOpen] = useState(false);\n  const [financialControlOrder, setFinancialControlOrder] = useState(null);\n\n  // Memoizovan options pro MultiSelect - aby se nevytvely nov pole pi kadm renderu\n  const sortedAllUsers = useMemo(() => {\n    const processed = [...allUsers].map(user => {\n      // Najdi prvn dostupn ID\n      const userId = user.id || user.uzivatel_id || user.user_id;\n      if (!userId) {\n        // User without ID - data issue\n      }\n      return {\n        ...user,\n        id: userId // Vdy nastav id\n      };\n    }).sort((a, b) => {\n      const nameA = a.displayName || '';\n      const nameB = b.displayName || '';\n      return nameA.localeCompare(nameB);\n    });\n\n    return processed;\n  }, [allUsers]);\n\n  const sortedApprovers = useMemo(() => {\n    const processed = [...approversList].map(approver => {\n      // Najdi prvn dostupn ID\n      const approverId = approver.id || approver.user_id || approver.uzivatel_id;\n      if (!approverId) {\n        // Approver without ID - data issue\n      }\n      return {\n        ...approver,\n        id: approverId, // Vdy nastav id\n        // Normalizuj displayName\n        displayName: approver.displayName || approver.jmeno_prijmeni || `${approver.jmeno || ''} ${approver.prijmeni || ''}`.trim() || `User ${approverId}`\n      };\n    }).sort((a, b) => {\n      const nameA = a.displayName || '';\n      const nameB = b.displayName || '';\n      return nameA.localeCompare(nameB);\n    });\n\n    return processed;\n  }, [approversList]);\n\n  // Filtrovan approvers podle showArchived\n  const sortedActiveApprovers = useMemo(() => {\n    if (showArchived) {\n      return sortedApprovers; // Pokud je archiv zapnut, zobraz vechny schvalovatele\n    }\n\n    // Jinak pouze aktivn (aktivni = 1)\n    return sortedApprovers.filter(approver => {\n      // Primrn pouvme pole 'aktivni' (1 = aktivn, 0 = neaktivn)\n      if (approver.aktivni !== undefined && approver.aktivni !== null) {\n        return approver.aktivni === 1 || approver.aktivni === '1' || approver.aktivni === true;\n      }\n      // Fallback na deaktivovan (0 = aktivn, 1 = neaktivn)\n      if (approver.deaktivovan !== undefined && approver.deaktivovan !== null) {\n        return approver.deaktivovan === 0 || approver.deaktivovan === '0' || approver.deaktivovan === false;\n      }\n      // Fallback: pokud dn pole nen, povauj za aktivnho\n      return true;\n    });\n  }, [sortedApprovers, showArchived]);\n\n  // Filtrovan seznamy podle showArchived\n  const sortedActiveUsers = useMemo(() => {\n    if (showArchived) {\n      return sortedAllUsers; // Pokud je archiv zapnut, zobraz vechny uivatele\n    }\n\n    // Jinak pouze aktivn (aktivni = 1)\n    return sortedAllUsers.filter(user => {\n      // Primrn pouvme pole 'aktivni' (1 = aktivn, 0 = neaktivn)\n      if (user.aktivni !== undefined && user.aktivni !== null) {\n        return user.aktivni === 1 || user.aktivni === '1' || user.aktivni === true;\n      }\n      // Fallback na deaktivovan (0 = aktivn, 1 = neaktivn)\n      if (user.deaktivovan !== undefined && user.deaktivovan !== null) {\n        return user.deaktivovan === 0 || user.deaktivovan === '0' || user.deaktivovan === false;\n      }\n      // Fallback: pokud dn pole nen, povauj za aktivnho\n      return true;\n    });\n  }, [sortedAllUsers, showArchived]);\n\n  const statusOptions = useMemo(() => {\n    return [...orderStatesList].map(status => {\n      //  POUIJ ESK NZEV jako ID pro filtrovn (ne kod_stavu)\n      // Protoe order.stav_objednavky obsahuje esk nzvy\n      const statusName = status.nazev_stavu || status.nazev || status.kod_stavu || status.id;\n      return {\n        ...status,\n        id: statusName, // esk nzev pro porovnn\n        kod_stavu: status.kod_stavu || status.id // Zachovej originln kd\n      };\n    });\n  }, [orderStatesList]);\n\n  // Listen for calendar date filter changes from Layout.js\n  useEffect(() => {\n    const handleDateFilterChange = (event) => {\n      const { dateFrom, dateTo, userId } = event.detail || {};\n      const currentUserId = user_id || 'anon';\n\n      // Only react if the event is for current user\n      if (userId !== currentUserId) return;\n\n      if (dateFrom) {\n        setDateFromFilter(dateFrom || '');\n      }\n      if (dateTo !== undefined) { // Allow empty string to clear\n        setDateToFilter(dateTo || '');\n      }\n    };\n\n    window.addEventListener('orders25_date_filter_changed', handleDateFilterChange);\n\n    return () => {\n      window.removeEventListener('orders25_date_filter_changed', handleDateFilterChange);\n    };\n  }, [user_id]);\n\n  // Load date filters from localStorage when user_id becomes available\n  useEffect(() => {\n    if (!user_id) return;\n\n    const sid = user_id || 'anon';\n    const dateFromKey = `orders25_dateFrom_${sid}`;\n    const dateToKey = `orders25_dateTo_${sid}`;\n\n    try {\n      const savedFrom = localStorage.getItem(dateFromKey);\n      const savedTo = localStorage.getItem(dateToKey);\n      if (savedFrom && !dateFromFilter) setDateFromFilter(savedFrom || '');\n      if (savedTo && !dateToFilter) setDateToFilter(savedTo || '');\n    } catch (_) {}\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user_id]); // Nati jen jednou kdy se user_id zmn\n\n  // Table pagination - load from localStorage\n  const [pageSize, setPageSize] = useState(() => {\n    const saved = localStorage.getItem('orders25List_pageSize');\n    return saved ? parseInt(saved, 10) : 25;\n  });\n\n  const [currentPageIndex, setCurrentPageIndex] = useState(() => {\n    const saved = localStorage.getItem('orders25List_pageIndex');\n    return saved ? parseInt(saved, 10) : 0;\n  });\n\n  // Table sorting - load from user-specific localStorage\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('orders25List_sorting', []);\n  });\n\n  //  EXPANDED ROWS: State pro rozbalen dky (ukldme row index, ne ID)\n  const [expanded, setExpanded] = useState({});\n\n  // DEBOUNCE: Ref pro timeout column filtr (3 sekundy delay)\n  const columnFiltersTimeoutRef = useRef(null);\n\n  // DEBOUNCED: Funkce pro uloen column filtr s 3s debounce\n  const saveColumnFiltersDebounced = useCallback((filters) => {\n    if (!user_id) return;\n\n    // Zru pedchoz timeout\n    if (columnFiltersTimeoutRef.current) {\n      clearTimeout(columnFiltersTimeoutRef.current);\n    }\n\n    // Nastav nov timeout na 3 sekundy\n    columnFiltersTimeoutRef.current = setTimeout(() => {\n      setUserStorage('orders25List_columnFilters', filters);\n    }, 3000); // 3 sekundy debounce\n  }, [user_id, setUserStorage]);\n\n  // OPTIMALIZACE: Batch update vech filtr do localStorage najednou\n  // Nahrazuje 14 samostatnch useEffects  1 useEffect\n  // Vhody: rychlej pi zmn user_id, mn re-render, lep itelnost\n  useEffect(() => {\n    if (!user_id) return; // ekej na user_id\n\n    // Jednoduch filtry - pm uloen\n    const simpleFilters = {\n      'orders25List_globalFilter': globalFilter,\n      'orders25List_statusFilter': statusFilter,\n      'orders25List_userFilter': userFilter,\n      'orders25List_selectedObjednatel': selectedObjednatel,\n      'orders25List_selectedGarant': selectedGarant,\n      'orders25List_selectedSchvalovatel': selectedSchvalovatel,\n      'orders25List_selectedPrikazce': selectedPrikazce,\n      'orders25List_amountFrom': amountFromFilter,\n      'orders25List_amountTo': amountToFilter,\n      'orders25List_filterMaBytZverejneno': filterMaBytZverejneno,\n      'orders25List_filterByloZverejneno': filterByloZverejneno,\n      'orders25List_activeStatusFilter': activeStatusFilter,\n      'orders25List_sorting': sorting //  Pidno sorting\n      // POZNMKA: columnFilters se ukldaj separtn s debounce\n    };\n\n    // Batch save vech jednoduchch filtr\n    Object.entries(simpleFilters).forEach(([key, value]) => {\n      setUserStorage(key, value);\n    });\n\n    // Speciln handling pro datum filtry (odstrann pokud przdn)\n    if (dateFromFilter) {\n      setUserStorage('orders25_dateFrom', dateFromFilter);\n    } else {\n      const key = getUserKey('orders25_dateFrom');\n      localStorage.removeItem(key);\n    }\n\n    if (dateToFilter) {\n      setUserStorage('orders25_dateTo', dateToFilter);\n    } else {\n      const key = getUserKey('orders25_dateTo');\n      localStorage.removeItem(key);\n    }\n  }, [\n    globalFilter,\n    statusFilter,\n    userFilter,\n    selectedObjednatel,\n    selectedGarant,\n    selectedSchvalovatel,\n    selectedPrikazce,\n    dateFromFilter,\n    dateToFilter,\n    amountFromFilter,\n    amountToFilter,\n    filterMaBytZverejneno,\n    filterByloZverejneno,\n    activeStatusFilter,\n    sorting, //  Pidno sorting do dependencies\n    user_id\n    // POZNMKA: columnFilters se zpracovvaj separtn s debounce\n  ]);\n\n  // DEBOUNCED useEffect: Column filters s 3s debounce - brn zahlcovn localStorage pi rychlm psan\n  useEffect(() => {\n    saveColumnFiltersDebounced(columnFilters);\n  }, [columnFilters, saveColumnFiltersDebounced]);\n\n  // CLEANUP: Vyisti timeout pi unmount\n  useEffect(() => {\n    return () => {\n      if (columnFiltersTimeoutRef.current) {\n        clearTimeout(columnFiltersTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // SCROLL STATE: Ref pro tracking zda u byla pozice obnovena\n  const scrollStateRestored = React.useRef(false);\n  const isFirstRender = React.useRef(true); //  Track first render\n\n  //  SCROLL STATE: Pamatuj si pedchoz filtry pro detekci RELN zmny\n  const prevFiltersRef = React.useRef(null);\n\n  //  SCROLL STATE: Ref pro uloen ID rozbalench objednvek (obnov pozdji kdy je filteredData ready)\n  const pendingExpandedOrderIds = React.useRef(null);\n\n  //  SCROLL STATE: Ref na filteredData (pro pouit v save useEffect)\n  const filteredDataRef = React.useRef([]);\n\n  //  SCROLL STATE: Refs pro aktuln hodnoty (pro scroll listener)\n  const currentPageIndexRef = React.useRef(currentPageIndex);\n  const pageSizeRef = React.useRef(pageSize);\n  const expandedRef = React.useRef(expanded);\n\n  // Aktualizuj refs pi kad zmn\n  React.useEffect(() => {\n    currentPageIndexRef.current = currentPageIndex;\n    pageSizeRef.current = pageSize;\n    expandedRef.current = expanded;\n  }, [currentPageIndex, pageSize, expanded]);\n\n  //  INITIALIZATION: Ref pro sledovn krok inicializace\n  const initStepsCompleted = React.useRef({\n    dataLoaded: false,\n    paginationRestored: false,\n    expandedRestored: false,\n    scrollRestored: false\n  });\n\n  //  SCROLL STATE: Obnovit pozici pi prvnm naten dat\n  useEffect(() => {\n    // Pokud u byla pozice obnovena, skip\n    if (scrollStateRestored.current) {\n      return;\n    }\n\n    // Pokud nejsou potebn data, skip\n    if (!user_id) {\n      return;\n    }\n\n    // Pokud jet nejsou naten data (loading), pokej\n    if (loading) {\n      return;\n    }\n\n    // Pokud jsou data przdn, ozna vechny kroky jako hotov\n    if (orders.length === 0) {\n      initStepsCompleted.current.dataLoaded = true; //  FIX: Mus bt nastaven i dataLoaded!\n      initStepsCompleted.current.paginationRestored = true;\n      initStepsCompleted.current.expandedRestored = true;\n      initStepsCompleted.current.scrollRestored = true;\n      scrollStateRestored.current = true;\n      return;\n    }\n\n    const savedState = ordersCacheService.getScrollState(user_id, {\n      ...(selectedYear !== 'all' && { rok: selectedYear }),\n      mesic: selectedMonth\n    }, orders.length);\n\n    if (savedState && savedState.page && savedState.rowsPerPage) {\n      // Obnov strnku (convert from 1-based to 0-based)\n      const targetPage = savedState.page - 1;\n      const maxPage = Math.ceil(orders.length / savedState.rowsPerPage) - 1;\n\n      if (targetPage >= 0 && targetPage <= maxPage) {\n        setCurrentPageIndex(targetPage);\n      }\n\n      // Obnov page size pokud se zmnil\n      if (savedState.rowsPerPage !== pageSize) {\n        setPageSize(savedState.rowsPerPage);\n        localStorage.setItem('orders25List_pageSize', savedState.rowsPerPage);\n      }\n\n      initStepsCompleted.current.paginationRestored = true;\n\n      //  OBNOV ROZBALEN OBJEDNVKY - ulo ID do ref (obnov pozdji)\n      if (savedState.expandedOrderIds && savedState.expandedOrderIds.length > 0) {\n        pendingExpandedOrderIds.current = savedState.expandedOrderIds;\n      } else {\n        // dn rozbalen objednvky\n        initStepsCompleted.current.expandedRestored = true;\n      }\n\n      // Scroll restoration disabled\n      initStepsCompleted.current.scrollRestored = true;\n    } else {\n      // dn uloen stav\n      initStepsCompleted.current.paginationRestored = true;\n      initStepsCompleted.current.expandedRestored = true;\n      initStepsCompleted.current.scrollRestored = true;\n    }\n\n    scrollStateRestored.current = true;\n  }, [orders.length, loading, user_id, selectedYear, selectedMonth, pageSize]);\n\n  //  SCROLL STATE: Helper funkce pro manuln uloen pozice\n  const saveCurrentScrollState = useCallback(() => {\n    if (!user_id || !scrollStateRestored.current || orders.length === 0) {\n      return;\n    }\n\n    // Scroll saving disabled - keeping only expanded rows memory\n    const currentPage = currentPageIndexRef.current;\n    const currentPageSize = pageSizeRef.current;\n    const currentExpanded = expandedRef.current;\n\n    const expandedOrderIds = Object.keys(currentExpanded)\n      .filter(index => currentExpanded[index])\n      .map(index => {\n        const order = filteredDataRef.current[parseInt(index)];\n        return order?.id;\n      })\n      .filter(Boolean);\n\n    ordersCacheService.saveScrollState(user_id, {\n      ...(selectedYear !== 'all' && { rok: selectedYear }),\n      mesic: selectedMonth\n    }, {\n      page: currentPage + 1,\n      rowsPerPage: currentPageSize,\n      scrollY: 0, // Scroll disabled\n      totalRows: orders.length,\n      expandedOrderIds\n    });\n  }, [user_id, selectedYear, selectedMonth, orders.length]);\n\n  //  AUTO-SAVE: Automaticky ukldej pi zmn strnky, pageSize nebo expanded rows\n  useEffect(() => {\n    // Skip pokud jet nebyla obnovena pozice (neukldej pi prvnm naten)\n    if (!scrollStateRestored.current) {\n      return;\n    }\n\n    // Ulo aktuln stav\n    saveCurrentScrollState();\n  }, [currentPageIndex, pageSize, expanded, saveCurrentScrollState]);\n\n  //  SCROLL STATE: Invaliduj POUZE pi SKUTEN zmn filtr\n  useEffect(() => {\n    // Skip prvn render (pi mount se filtry inicializuj)\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n\n      // Ulo aktuln hodnoty filtr jako baseline\n      prevFiltersRef.current = {\n        year: selectedYear,\n        month: selectedMonth,\n        status: statusFilter,\n        user: userFilter,\n        global: globalFilter,\n        objednatel: selectedObjednatel,\n        garant: selectedGarant,\n        schvalovatel: selectedSchvalovatel,\n        dateFrom: dateFromFilter,\n        dateTo: dateToFilter,\n        amountFrom: amountFromFilter,\n        amountTo: amountToFilter,\n        activeStatus: activeStatusFilter\n      };\n\n      return;\n    }\n\n    if (!user_id || !prevFiltersRef.current) return;\n\n    // Porovnej PEDCHOZ hodnoty s aktulnmi\n    const currentFilters = {\n      year: selectedYear,\n      month: selectedMonth,\n      status: statusFilter,\n      user: userFilter,\n      global: globalFilter,\n      objednatel: selectedObjednatel,\n      garant: selectedGarant,\n      schvalovatel: selectedSchvalovatel,\n      dateFrom: dateFromFilter,\n      dateTo: dateToFilter,\n      amountFrom: amountFromFilter,\n      amountTo: amountToFilter,\n      activeStatus: activeStatusFilter\n    };\n\n    // Detekuj skutenou zmnu\n    const hasChanged = JSON.stringify(prevFiltersRef.current) !== JSON.stringify(currentFilters);\n\n    if (!hasChanged) {\n      return; // Filtry se nezmnily = jen remount komponenty\n    }\n\n    // Ulo nov hodnoty\n    prevFiltersRef.current = currentFilters;\n\n    // Pi SKUTEN zmn filtru resetuj scroll state\n    ordersCacheService.clearScrollState(user_id, {\n      ...(selectedYear !== 'all' && { rok: selectedYear }),\n      mesic: selectedMonth\n    });\n\n    // Reset tracking\n    scrollStateRestored.current = false;\n\n    // Reset rozbalench objednvek\n    setExpanded({});\n\n    // Reset na prvn strnku\n    setCurrentPageIndex(0);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }, [selectedYear, selectedMonth, statusFilter, userFilter, globalFilter,\n      selectedObjednatel, selectedGarant, selectedSchvalovatel,\n      dateFromFilter, dateToFilter, amountFromFilter, amountToFilter, activeStatusFilter]);\n\n  //  AUTO-REFRESH: Poslouchat Custom Event \"orderStatusChanged\" z notifikac\n  // Kdy pijde notifikace o zmn stavu objednvky, auto-reload t konkrtn objednvky z DB\n  useEffect(() => {\n    const handleOrderStatusChanged = async (event) => {\n      const { orderId, orderNumber, notificationType } = event.detail;\n      \n      if (!orderId || !token || !username) return;\n\n      try {\n        //  V2 API: Nati aktualizovanou objednvku z DB\n        const response = await getOrderV2(orderId, token, username, true);\n        \n        if (response && response.data) {\n          const updatedOrder = response.data;\n          \n          // Aktualizuj konkrtn objednvku v seznamu\n          setOrders(prevOrders => {\n            const orderExists = prevOrders.some(o => String(o.id) === String(orderId));\n            \n            if (orderExists) {\n              // UPDATE: Nahra existujc objednvku\n              return prevOrders.map(order => \n                String(order.id) === String(orderId) ? updatedOrder : order\n              );\n            } else {\n              // INSERT: Pidej novou objednvku na zatek (me bt nov objednvka jinho uivatele)\n              return [updatedOrder, ...prevOrders].sort((a, b) => b.id - a.id);\n            }\n          });\n          \n        }\n      } catch (error) {\n        // Tich selhn - nezpsob problm v UI\n        console.warn('Auto-refresh objednvky selhal:', error);\n      }\n    };\n\n    window.addEventListener('orderStatusChanged', handleOrderStatusChanged);\n    \n    return () => {\n      window.removeEventListener('orderStatusChanged', handleOrderStatusChanged);\n    };\n  }, [token, username]);\n\n  // Debug vpis pro testovn highlighting\n  React.useEffect(() => {\n    if (orders.length > 0) {\n\n      // Success log odstrann\n\n      // Debug vpis odstrann pro produkci\n\n    }\n  }, [showRowHighlighting, orders]);\n\n  // Custom Select helper functions\n  const toggleSelect = useCallback((field) => {\n    setSelectStates(prev => {\n      // Zavi vechny ostatn selecty\n      const newState = Object.keys(prev).reduce((acc, key) => {\n        acc[key] = false;\n        return acc;\n      }, {});\n      // Toggleni jen poadovan select\n      newState[field] = !prev[field];\n      return newState;\n    });\n  }, []);\n\n  const filterOptions = useCallback((options, searchTerm, field) => {\n    if (!searchTerm) return options;\n\n    const lowerSearchTerm = searchTerm.toLowerCase();\n    return options.filter(option => {\n      const label = getOptionLabel(option, field);\n      return label.toLowerCase().includes(lowerSearchTerm);\n    });\n  }, []);\n\n  const getOptionLabel = useCallback((option, field) => {\n    if (!option) return '';\n\n    switch (field) {\n      case 'statusFilter':\n        return option.nazev_stavu || option.nazev || option.popis || option.kod_stavu || option.kod || String(option);\n      case 'selectedObjednatel':\n      case 'selectedGarant':\n        return option.displayName || `${option.jmeno || ''} ${option.prijmeni || ''}`.trim() || 'Bez jmna';\n      case 'selectedSchvalovatel':\n        return option.displayName || option.jmeno_prijmeni || `${option.jmeno || ''} ${option.prijmeni || ''}`.trim() || 'Bez jmna';\n      case 'pageSize':\n        return option.label || String(option.value || option);\n      // OrderForm25 field typy\n      case 'zpusob_financovani':\n        return option.nazev || option.label || (typeof option === 'string' ? option : 'Neznm');\n      case 'lp_kod':\n        return `${option.kod || option.id || option} - ${option.nazev || option.label || 'Bez nzvu'}`;\n      case 'druh_objednavky_kod':\n        return option.nazev || option.label || (typeof option === 'string' ? option : 'Neznm');\n      default:\n        return String(option);\n    }\n  }, []);\n\n  // Close dropdowns when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (!event.target.closest('[data-custom-select]')) {\n        setSelectStates({});\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Piprav dropdown seznamy pro filtry\n  const prepareDropdownLists = useCallback((ordersData) => {\n    // Preparing dropdown lists\n\n    // Objednatel\n    const uniqueObjednatele = new Set();\n    const uniqueGaranti = new Set();\n    const uniqueSchvalovatel = new Set();\n\n    ordersData.forEach(order => {\n      // Objednatel: objednatel_id -> uzivatel_id\n      const objednatelId = order.objednatel_id || order.uzivatel_id;\n      if (objednatelId && users[objednatelId]) {\n        uniqueObjednatele.add(objednatelId);\n      }\n\n      // Garant\n      if (order.garant_uzivatel_id && users[order.garant_uzivatel_id]) {\n        uniqueGaranti.add(order.garant_uzivatel_id);\n      }\n\n      // Schvalovatel\n      if (order.schvalovatel_id && users[order.schvalovatel_id]) {\n        uniqueSchvalovatel.add(order.schvalovatel_id);\n      }\n    });\n\n    // Peve na seazen seznamy\n    const sortByName = (a, b) => {\n      const nameA = (typeof users[a] === 'object' ? users[a].displayName : users[a]) || '';\n      const nameB = (typeof users[b] === 'object' ? users[b].displayName : users[b]) || '';\n      return nameA.localeCompare(nameB);\n    };\n\n    //  POZNMKA: objednatelList a garantList se ji nepouvaj\n    // Filtry GARANT a OBJEDNATEL pouvaj pmo sortedActiveUsers (reaguje na showArchived)\n    const objednatelArray = Array.from(uniqueObjednatele).sort(sortByName);\n    const garantArray = Array.from(uniqueGaranti).sort(sortByName);\n    const schvalovatelArray = Array.from(uniqueSchvalovatel).sort(sortByName);\n\n    // Dropdown lists prepared\n\n    setObjednatelList(objednatelArray);\n    setGarantList(garantArray);\n    setSchvalovatelList(schvalovatelArray);\n  }, [users]);\n\n  // Aktualizuj dropdown seznamy kdy se zmn users nebo orders\n  useEffect(() => {\n    if (orders.length > 0 && Object.keys(users).length > 0) {\n      prepareDropdownLists(orders);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [orders, users]); // prepareDropdownLists vynechno - stabiln dky useCallback s [users]\n\n  // Load data\n  const loadData = useCallback(async (forceRefresh = false) => {\n    if (!token || !user?.username) return;\n\n    //  CACHE: Start men doby natn\n    const loadStartTime = performance.now();\n\n    try {\n      setLoading(true);\n      setError(null);\n      setProgress?.(5);\n\n      // Load orders podle oprvnn - pouij orders25/by-user pro filtrovn na BE\n      setProgress?.(20);\n\n      let ordersData;\n\n      // Zskej datum_od a datum_do pro API\n      const dateRange = calculateDateRange();\n\n      // OPTIMALIZACE: Pouij ref pro aktuln permissions msto pm dependency\n      const currentPermissions = permissionsRef.current;\n      const canViewAllOrders = currentPermissions.canViewAll;\n      const hasOnlyOwnPermissions = currentPermissions.hasOnlyOwn;\n\n      // MIGRACE: Fetch funkce pro V2 API\n      const fetchFunction = async () => {\n        const filters = {\n          ...dateRange,\n          ...(showArchived && { archivovano: 1 })\n        };\n\n        setApiTestData(prev => ({\n          ...prev,\n          requestFilters: filters,\n          requestTimestamp: new Date().toISOString()\n        }));\n\n        //  V2 API: VDY pouvej enriched endpoint pro kompletn data\n        // returnFullResponse=true pro zskn meta dat z backendu\n        const apiResult = await listOrdersV2(filters, token, username, true, true);\n\n        //  Ulo meta data do state (admin_analysis, atd.)\n        if (apiResult?.meta) {\n          setApiMeta(apiResult.meta);\n        }\n\n        //  DEBUG: Ulo API response data\n        setApiTestData(prev => ({\n          ...prev,\n          apiResponse: apiResult?.data,\n          apiResponseCount: apiResult?.data?.length || 0,\n          archivedInResponse: apiResult?.data?.filter(o => o.stav_objednavky === 'ARCHIVOVANO').length || 0,\n          responseTimestamp: new Date().toISOString()\n        }));\n\n        return apiResult?.data || [];\n      };\n\n      //  CACHE: Pouij getOrders pro inteligentn cache (memory + localStorage + TTL)\n      // forceRefresh se pouv JEN pi manulnm kliknut na tlatko \"Obnovit\"\n\n      const cacheResult = forceRefresh\n        ? await ordersCacheService.forceRefresh(\n            user_id,\n            fetchFunction,\n            {\n              ...dateRange,\n              viewAll: canViewAllOrders,\n              showArchived: showArchived\n            }\n          )\n        : await ordersCacheService.getOrders(\n            user_id,\n            fetchFunction,\n            {\n              ...dateRange,\n              viewAll: canViewAllOrders,\n              showArchived: showArchived\n            }\n          );\n\n      //  CACHE: Rozbal data a info o zdroji\n      ordersData = cacheResult.data;\n\n      //  FILTR: Odstra systmov ablony (ID <= 1)\n      // Systmov objednvky s ID=0 a ID=1 se nesm zobrazovat v seznamu\n      if (ordersData && Array.isArray(ordersData)) {\n        ordersData = ordersData.filter(o => {\n          const orderId = parseInt(o.id);\n          return !isNaN(orderId) && orderId > 1;\n        });\n      }\n\n      //  Zm dobu natn\n      const loadEndTime = performance.now();\n      const loadDuration = Math.round(loadEndTime - loadStartTime);\n\n      //  Nastav zdroj podle skutenho zdroje z cache\n      setLastLoadSource(cacheResult.source); // 'memory', 'database', nebo 'database_forced'\n      setLastLoadTime(new Date());\n      setLastLoadDuration(loadDuration);\n\n      setProgress?.(60);\n\n      // Load users for names\n      try {\n        const usersData = await fetchAllUsers({ token, username });\n        const usersMap = {};\n\n        //  Pidej systmovho uivatele SYSTEM (ID 0) pro archivovan objednvky\n        usersMap['0'] = {\n          id: '0',\n          jmeno: 'SYSTEM',\n          prijmeni: '',\n          titul_pred: '',\n          titul_za: '',\n          username: 'system',\n          displayName: 'SYSTEM'\n        };\n\n        usersData.forEach((u, index) => {\n          // Ulome kompletn informace o uivateli vetn titul\n          const userId = u.id || u.user_id || u.uzivatel_id;\n\n          // Sprvn poad: Titul ped + Jmno + Pjmen + Titul za\n          const titul_pred_str = u.titul_pred ? u.titul_pred + ' ' : '';\n          const jmeno_str = u.jmeno || '';\n          const prijmeni_str = u.prijmeni || '';\n          const titul_za_str = u.titul_za ? ', ' + u.titul_za : '';\n          const displayName = `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`.replace(/\\s+/g, ' ').trim() || u.username || u.uzivatelske_jmeno || `User ${userId}`;\n\n          if (userId) {\n            usersMap[userId] = {\n              id: userId,\n              jmeno: u.jmeno || '',\n              prijmeni: u.prijmeni || '',\n              titul_pred: u.titul_pred || '',\n              titul_za: u.titul_za || '',\n              username: u.username || u.uzivatelske_jmeno || '',\n              displayName: displayName\n            };\n\n          }\n        });\n\n        setUsers(usersMap);\n\n        // NYN meme zpracovat koncepty s dostupnmi users daty\n        const localDrafts = [];\n        try {\n          //  FIX: Pouij draftManager msto pmho localStorage\n          draftManager.setCurrentUser(user_id);\n          const draftData = await draftManager.loadDraft();\n\n          if (draftData) {\n            const isConceptValid = isValidConcept(draftData);\n            const hasDbChanges = hasDraftChanges(draftData);\n\n            if (isConceptValid && !hasDbChanges) {\n              const formData = draftData.formData || draftData;\n              const draftKey = getDraftKey(user_id); // Zskej kl pro ID\n\n              // Extrahuj ID z hodnot (CustomSelect me uloit objekt msto ID)\n              let garantUserId = formData.garant_uzivatel_id;\n              if (typeof garantUserId === 'object' && garantUserId !== null) {\n                garantUserId = garantUserId.id || garantUserId.user_id || garantUserId.uzivatel_id;\n              }\n\n              let objednatelId = formData.objednatel_id || user_id;\n              if (typeof objednatelId === 'object' && objednatelId !== null) {\n                objednatelId = objednatelId.id || objednatelId.user_id || objednatelId.uzivatel_id;\n              }\n\n              const conceptOrder = {\n                id: `draft_${draftKey}`,\n                cislo_objednavky: formData.ev_cislo || ' KONCEPT ',\n                predmet: formData.predmet || 'Nov objednvka (koncept)',\n                popis_pozadavku: formData.popis_pozadavku || '',\n                stav_objednavky: 'Koncept',\n                stav_workflow_kod: '[\"NOVA\"]',\n                max_cena_s_dph: formData.max_cena_s_dph || 0,\n                poznamky: formData.poznamky || '',\n                dodavatel_nazev: formData.dodavatel_nazev || '',\n                dodavatel_kontakt_jmeno: formData.dodavatel_kontakt_jmeno || '',\n                dodavatel_kontakt_telefon: formData.dodavatel_kontakt_telefon || '',\n                dodavatel_kontakt_email: formData.dodavatel_kontakt_email || '',\n                garant_uzivatel_id: garantUserId || '',\n                objednatel_id: objednatelId || '',\n                prikazce_id: formData.prikazce_id || '',\n                uzivatel_id: objednatelId || user_id,\n                strediska_kod: formData.strediska_kod || [],\n                dt_vytvoreni: draftData.timestamp || new Date().toISOString(),\n                temp_datum_objednavky: draftData.firstAutoSaveDate ? draftData.firstAutoSaveDate.split('T')[0] : (formData.temp_datum_objednavky || new Date().toISOString().split('T')[0]),\n                vytvoril_uzivatel: username,\n                isDraft: true,\n                je_koncept: true,\n                _originalKey: draftKey,\n                _originalData: draftData,\n                _formData: formData\n              };\n\n              localDrafts.push(conceptOrder);\n            }\n          } else {\n          }\n        } catch (err) {\n          console.error(' [Orders25List] Chyba pi natn draftu:', err);\n        }\n\n        // Pidej koncepty na zatek seznamu\n        if (localDrafts.length > 0) {\n          ordersData = [...localDrafts, ...(ordersData || [])];\n        }\n\n        // Ulome tak vechny uivatele pro filtry (ne jen ty z objednvek)\n        const allUsersForFilters = usersData.map(u => {\n          // Zkus najt ID z rznch monch pol\n          const userId = u.id || u.user_id || u.uzivatel_id;\n\n          const titul_pred_str = u.titul_pred ? u.titul_pred + ' ' : '';\n          const jmeno_str = u.jmeno || '';\n          const prijmeni_str = u.prijmeni || '';\n          const titul_za_str = u.titul_za ? ', ' + u.titul_za : '';\n          const displayName = `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`.replace(/\\s+/g, ' ').trim() || u.username || u.uzivatelske_jmeno || `User ${userId}`;\n\n          return {\n            id: userId,\n            jmeno: u.jmeno || '',\n            prijmeni: u.prijmeni || '',\n            titul_pred: u.titul_pred || '',\n            titul_za: u.titul_za || '',\n            username: u.username || u.uzivatelske_jmeno || '',\n            email: u.email || '',\n            deaktivovan: u.deaktivovan !== undefined ? u.deaktivovan : 0, // Stav deaktivace (0 = aktivn, 1 = deaktivovan)\n            aktivni: u.aktivni !== undefined ? u.aktivni : 1, // Stav aktivity (1 = aktivn, 0 = neaktivn)\n            displayName: displayName\n          };\n        });\n\n        //  Pidej systmovho uivatele SYSTEM (ID 0) pro archivovan objednvky\n        allUsersForFilters.unshift({\n          id: '0',\n          jmeno: 'SYSTEM',\n          prijmeni: '',\n          titul_pred: '',\n          titul_za: '',\n          username: 'system',\n          email: '',\n          deaktivovan: 0,\n          aktivni: 1,\n          displayName: 'SYSTEM'\n        });\n\n        setAllUsers(allUsersForFilters);\n\n        setProgress?.(70);\n      } catch (err) {\n        // Error loading users\n      }\n\n      // Load schvalovatel z DB\n      try {\n        const approversData = await fetchApprovers({ token, username: user.username });\n\n        // Pidej displayName pro schvalovatelje pokud chyb\n        const approversWithDisplayName = (approversData || []).map(approver => {\n          if (approver.displayName) return approver; // u m displayName\n\n          const titul_pred_str = approver.titul_pred ? approver.titul_pred + ' ' : '';\n          const jmeno_str = approver.jmeno || '';\n          const prijmeni_str = approver.prijmeni || '';\n          const titul_za_str = approver.titul_za ? ', ' + approver.titul_za : '';\n          const displayName = `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`.replace(/\\s+/g, ' ').trim() ||\n                             approver.jmeno_prijmeni ||\n                             approver.username ||\n                             approver.uzivatelske_jmeno ||\n                             `User ${approver.user_id || approver.uzivatel_id}`;\n\n          return { ...approver, displayName };\n        });\n\n        //  Pidej systmovho uivatele SYSTEM (ID 0) pro archivovan objednvky\n        approversWithDisplayName.unshift({\n          id: '0',\n          user_id: '0',\n          uzivatel_id: '0',\n          jmeno: 'SYSTEM',\n          prijmeni: '',\n          titul_pred: '',\n          titul_za: '',\n          username: 'system',\n          deaktivovan: 0,\n          aktivni: 1,\n          displayName: 'SYSTEM'\n        });\n\n        setApproversList(approversWithDisplayName);\n        setProgress?.(75);\n      } catch (err) {\n        // Error loading approvers\n      }\n\n      // Load selnky pro stavy objednvek\n      try {\n        const statesData = await fetchCiselniky({ token, username: user.username, typ: 'OBJEDNAVKA' });\n        // Sea stavy abecedn podle nzvu\n        const sortedStates = (statesData || []).sort((a, b) => {\n          const nameA = (a.nazev_stavu || a.nazev || '').toLowerCase();\n          const nameB = (b.nazev_stavu || b.nazev || '').toLowerCase();\n          return nameA.localeCompare(nameB, 'cs');\n        });\n        setOrderStatesList(sortedStates);\n        setProgress?.(80);\n      } catch (err) {\n        // Error loading state codes\n      }\n\n      // Load DOCX ablony pomoc getDocxSablonyList (stejn jako v jednotlivm DOCX dialogu)\n      try {\n        const response = await getDocxSablonyList({\n          token,\n          username: user.username,\n          aktivni: 1 // Pouze aktivn ablony\n        });\n\n        const templatesData = response?.data || [];\n\n        // Sea ablony podle nzvu\n        const sortedTemplates = (templatesData || []).sort((a, b) => {\n          const nameA = (a.nazev || a.kod || '').toLowerCase();\n          const nameB = (b.nazev || b.kod || '').toLowerCase();\n          return nameA.localeCompare(nameB, 'cs');\n        });\n        setDocxTemplates(sortedTemplates);\n      } catch (err) {\n        console.warn(' Nepodailo se nast DOCX ablony:', err);\n        // Fallback na przdn seznam\n        setDocxTemplates([]);\n      }\n\n      // Load LP kdy pro pevod ID na nzvy\n      try {\n        const lpData = await fetchLimitovanePrisliby({ token, username: user.username });\n        setLpKodyList(lpData || []);\n      } catch (err) {\n        // Error loading LP codes\n      }\n\n      // Load druhy objednvek\n      try {\n        const druhyData = await getDruhyObjednavky25({ token, username: user.username });\n        setDruhyObjednavkyList(druhyData || []);\n      } catch (err) {\n        console.warn(' Nepodailo se nast druhy objednvek:', err);\n        setDruhyObjednavkyList([]);\n      }\n\n      // Load stediska\n      try {\n        const strediskaData = await getStrediska25({ token, username: user.username });\n        setStrediskaList(strediskaData || []);\n      } catch (err) {\n        console.warn(' Nepodailo se nast stediska:', err);\n        setStrediskaList([]);\n      }\n\n      //  SPOLEN FILTROVN: Pouij stejnou funkci jako mobile\n      // Filtrovn: id > 1, !isLocalConcept, archivovan (pokud showArchived=false), pkazce (pokud !canViewAll)\n      let finalOrders = filterOrdersShared(ordersData || [], {\n        showArchived: showArchived,  // Desktop pouv showArchived pmo\n        userId: canViewAllOrders ? null : user_id,  // Filtruj podle userId pouze pokud nen admin\n        isAdmin: canViewAllOrders   // canViewAll = isAdmin\n      });\n\n      // Oznait existujc DB dky, kter maj rozpracovan zmny - DRAFT MANAGER\n      draftManager.setCurrentUser(user_id);\n      const hasUserDraft = await draftManager.hasDraft();\n\n      if (hasUserDraft) {\n        try {\n          const draftData = await draftManager.loadDraft();\n\n          // Pouij sprvnou funkci pro kontrolu validnch draft zmn\n          const hasValidDraftChanges = hasDraftChanges(draftData);\n          // Oznauj dek POUZE pokud skuten m validn zmny\n          if (hasValidDraftChanges) {\n            // Pokud m draft DB ID, pokus se oznait odpovdajc dek\n            const orderIdToMark = draftData.formData?.id || draftData.savedOrderId;\n            if (orderIdToMark) {\n              let foundAndMarked = false;\n              finalOrders = finalOrders.map(order => {\n                // Porovnvej jak sla tak stringy (DB me vracet rzn typy)\n                const orderIdStr = String(order.id);\n                const markIdStr = String(orderIdToMark);\n\n                if (orderIdStr === markIdStr && !order.isDraft) {\n                  foundAndMarked = true;\n                  return { ...order, hasLocalDraftChanges: true };\n                }\n                return order;\n              });\n            }\n          }\n        } catch (err) {\n          // Chyba pi kontrole DB dk pro oznaen\n        }\n      }\n\n      //  NORMALIZACE: Pro archivovan objednvky bez pkazce/schvalovatele nastav SYSTEM (ID 0)\n      finalOrders = finalOrders.map(order => {\n        // Aplikuj pouze na archivovan objednvky (importovan star objednvky)\n        if (order.stav_objednavky === 'ARCHIVOVANO') {\n          const normalized = { ...order };\n\n          // Pokud nen pkazce, nastav SYSTEM (ID 0)\n          if (!normalized.prikazce_id || normalized.prikazce_id === '' || normalized.prikazce_id === null) {\n            normalized.prikazce_id = '0';\n          }\n\n          // Pokud nen schvalovatel, nastav SYSTEM (ID 0)\n          if (!normalized.schvalovatel_id || normalized.schvalovatel_id === '' || normalized.schvalovatel_id === null) {\n            normalized.schvalovatel_id = '0';\n          }\n\n          return normalized;\n        }\n        return order;\n      });\n\n      setOrders(finalOrders);\n\n      // Populate rawData for debug panel\n      setRawData({\n        timestamp: new Date().toISOString(),\n        ordersCount: finalOrders.length,\n        allFields: finalOrders.length > 0 ? Object.keys(finalOrders[0]) : [],\n        firstOrder: finalOrders[0] || null,\n        rawData: finalOrders\n      });\n\n      // Generate calendar_order_counts immediately after loading from DB\n      // This must run BEFORE any filtering, on raw DB data\n      try {\n        const counts = {};\n\n        finalOrders.forEach(order => {\n          // Skip draft/concept orders\n          if (order.isDraft || order.isLocalConcept) return;\n\n          // Get order date - try multiple field names\n          let dateStr = order.dt_objednavky || order.datum_objednavky || order.created_at || order.dt_vytvoreni;\n\n          if (!dateStr) return;\n\n          // Parse date - support both ISO format (YYYY-MM-DD HH:MM:SS) and Czech format (DD.MM.YYYY)\n          let year, month, day;\n\n          // Try ISO format first (from DB): YYYY-MM-DD HH:MM:SS or YYYY-MM-DD\n          const isoMatch = dateStr.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\n          if (isoMatch) {\n            year = isoMatch[1];\n            month = isoMatch[2];\n            day = isoMatch[3];\n          } else {\n            // Try Czech format: DD.MM.YYYY\n            const czMatch = dateStr.match(/(\\d{2})\\.(\\d{2})\\.(\\d{4})/);\n            if (czMatch) {\n              day = czMatch[1];\n              month = czMatch[2];\n              year = czMatch[3];\n            } else {\n              return; // Neither format matched\n            }\n          }\n\n          // Create key in format YYYY-MM-DD\n          const key = `${year}-${month}-${day}`;\n\n          // Initialize day data if not exists\n          if (!counts[key]) {\n            counts[key] = { total: 0, pending: 0 };\n          }\n\n          counts[key].total += 1;\n\n          //  OPRAVA: Detekce \"Ke schvlen\" konzistentn s dlazdikami\n          // Pouij stejnou logiku jako getOrderSystemStatus()\n          let systemStatus = 'UNKNOWN';\n\n          if (order.isDraft || order.je_koncept) {\n            systemStatus = 'NOVA';\n          } else if (order.stav_objednavky) {\n            systemStatus = mapUserStatusToSystemCode(order.stav_objednavky);\n          } else if (order.stav_workflow_kod) {\n            try {\n              const workflowStates = JSON.parse(order.stav_workflow_kod);\n              systemStatus = Array.isArray(workflowStates)\n                ? workflowStates[workflowStates.length - 1]\n                : order.stav_workflow_kod;\n            } catch {\n              systemStatus = order.stav_workflow_kod;\n            }\n          }\n\n          // Ke schvlen = KE_SCHVALENI\n          if (systemStatus === 'KE_SCHVALENI') {\n            counts[key].pending += 1;\n          }\n        });\n\n        //  OPRAVA: Ukldat pmo do localStorage bez user_id suffixu\n        // CalendarPanel te z 'calendar_order_counts', ne z getUserKey()\n        localStorage.setItem('calendar_order_counts', JSON.stringify(counts));\n        localStorage.setItem('calendar_order_counts_updated', Date.now());\n        window.dispatchEvent(new CustomEvent('calendar_order_counts_updated'));\n      } catch (err) {\n        // Tie ignorovat chyby pi generovn kalende\n      }\n\n      setProgress?.(100);\n\n      //  ODSTRANNO: Broadcast po kadm naten dat\n      // Toto zpsobovalo nekonenou smyku mezi zlokami\n      // Broadcast se pole jen kdy se draft skuten zmn (v handleDraftSave, handleDelete, etc.)\n\n      //  INITIALIZATION: Ozna dokonen natn dat\n      initStepsCompleted.current.dataLoaded = true;\n\n    } catch (err) {\n      // Pekldme anglick error messages do etiny\n      const errorMessage = translateErrorMessage(err.message || 'Chyba pi natn objednvek');\n      setError(errorMessage);\n\n      //  INITIALIZATION: V ppad chyby ozna vechny kroky jako hotov\n      initStepsCompleted.current.dataLoaded = true;\n      initStepsCompleted.current.paginationRestored = true;\n      initStepsCompleted.current.expandedRestored = true;\n      initStepsCompleted.current.scrollRestored = true;\n    } finally {\n      setLoading(false);\n      setInitializing(false);\n      setTimeout(() => setProgress?.(0), 500);\n    }\n  }, [token, user?.username, user_id, selectedYear, selectedMonth, showArchived]);\n  // OPTIMALIZACE: Odstranno 'permissions' z dependencies - pouit permissionsRef.current msto toho\n  // Toto odstran circular dependency a zabrn zbytenm reload pi zmn permissions objektu\n  // permissions zmny jsou zachyceny pes ref kter je vdy aktuln\n\n  // Load data on mount - s kontrolou forceReload z navigation state\n  useEffect(() => {\n    const shouldForceReload = location.state?.forceReload === true;\n    loadData(shouldForceReload);\n  }, [loadData, location.state?.forceReload]);\n\n  // Listen for ORDER_SAVED broadcasts from other tabs/windows\n  //  PERFORMANCE: Debounce loadData to prevent message handler violations\n  //  LOOP PREVENTION: Ignoruj vlastn broadcasty\n  useEffect(() => {\n    let debounceTimer = null;\n    let lastMessageTimestamp = 0;\n\n    const cleanup = onTabSyncMessage((message) => {\n      //  Ignoruj dupliktn zprvy ve velmi krtkm asovm intervalu (< 100ms)\n      // Toto zabrn smyce kdy jedna zloka pole broadcast -> druh reaguje -> pole dal broadcast\n      const now = Date.now();\n      if (now - lastMessageTimestamp < 100) {\n        return; // Ignoruj duplicity\n      }\n      lastMessageTimestamp = now;\n\n      if (message.type === BROADCAST_TYPES.ORDER_SAVED || message.type === BROADCAST_TYPES.DRAFT_DELETED) {\n        //  PERFORMANCE: Debounce loadData - prevent excessive reloads from multiple messages\n        // Chrome violation fixed: Increased debounce to 1000ms to prevent handler violations\n        if (debounceTimer) clearTimeout(debounceTimer);\n        debounceTimer = setTimeout(() => {\n          loadData();\n          debounceTimer = null;\n        }, 1000); // 1000ms debounce (zveno pro performance)\n      }\n    });\n\n    return () => {\n      if (debounceTimer) clearTimeout(debounceTimer);\n      cleanup();\n    };\n  }, [loadData]);\n\n  // Registrace callback pro getCurrentFilters - pouv background task ped API volnm\n  useEffect(() => {\n    if (!bgTasksContext?.registerGetCurrentFiltersCallback) {\n      return;\n    }\n\n    // Vrac aktuln filtry (ROK, OBDOB, ARCHIV) pro background refresh\n    // Stejn logika jako loadData() - zajitn konzistence mezi F5 a background refresh\n    const getFiltersCallback = () => {\n      // Pomocn funkce pro vpoet datum_od a datum_do (kopie z loadData)\n      const getDateRange = () => {\n        if (selectedYear !== 'all') {\n          const year = parseInt(selectedYear);\n\n          if (selectedMonth) {\n            const monthMatch = selectedMonth.match(/^(\\d+)(?:-(\\d+))?$/);\n            if (monthMatch) {\n              const startMonth = parseInt(monthMatch[1]);\n              const endMonth = monthMatch[2] ? parseInt(monthMatch[2]) : startMonth;\n\n              const datum_od = `${year}-${String(startMonth).padStart(2, '0')}-01`;\n              const lastDay = new Date(year, endMonth, 0).getDate();\n              const datum_do = `${year}-${String(endMonth).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`;\n\n              return { datum_od, datum_do };\n            }\n          } else {\n            return {\n              datum_od: `${year}-01-01`,\n              datum_do: `${year}-12-31`\n            };\n          }\n        }\n        return {};\n      };\n\n      const dateRange = getDateRange();\n      const filters = { ...dateRange };\n\n      // ARCHIV filtr\n      if (showArchived) {\n        filters.archivovano = 1;\n      }\n\n      return filters;\n    };\n\n    bgTasksContext.registerGetCurrentFiltersCallback(getFiltersCallback);\n\n    return () => {\n      bgTasksContext.registerGetCurrentFiltersCallback?.(null);\n    };\n  }, [bgTasksContext, selectedYear, selectedMonth, showArchived]);\n\n  // Registrace callback pro background refresh objednvek\n  //  Background refresh FUNGUJE pro vechny uivatele\n  // Backend API nyn filtruje podle permissions (uzivatel_id pro ORDER_READ_OWN)\n  //  FIX: Background refresh nyn posl STEJN filtry jako F5 reload do backendu!\n  useEffect(() => {\n    if (!bgTasksContext) return;\n\n    const refreshCallback = (ordersData) => {\n      //  OPTIMALIZACE: Validace dat ped nastavenm\n      // Ochrana proti pepsn existujcch dat nevalidnmi daty\n\n      // Kontrola 1: Data mus bt pole\n      if (!ordersData || !Array.isArray(ordersData)) {\n        return; //  OCHRANA: Nemnit orders pokud data nejsou validn\n      }\n\n      // Kontrola 2: Pokud mme aktuln data a pilo przdn pole, varovn\n      if (orders.length > 0 && ordersData.length === 0) {\n        return; //  OCHRANA: Zachovat aktuln data msto pepsn przdnm polem\n      }\n\n      // Kontrola 3: Minimln validace struktury dat (prvn objednvka m ID)\n      if (ordersData.length > 0 && !ordersData[0]?.id) {\n        return;\n      }\n\n      // FILTR: Odstra systmov ablony (ID <= 1)\n      // Systmov objednvky s ID=0 a ID=1 se nesm zobrazovat v seznamu objednvek\n      const filteredOrders = ordersData.filter(o => {\n        const orderId = parseInt(o.id);\n        return !isNaN(orderId) && orderId > 1;\n      });\n\n      // Backend ji filtroval podle ROK, OBDOB, ARCHIV - data jsou ready to use!\n      // Frontend filtraci NU JU NEPOTEBUJEME - backend posl ji filtrovan data\n\n      // Nastavit lutou ikonu a as poslednho background refreshe\n      setIsBackgroundRefreshActive(true);\n      setLastRefreshTime(new Date());\n\n      setOrders(filteredOrders);\n\n      // Update rawData for debug panel\n      setRawData({\n        timestamp: new Date().toISOString(),\n        ordersCount: filteredOrders.length,\n        allFields: filteredOrders.length > 0 ? Object.keys(filteredOrders[0]) : [],\n        firstOrder: filteredOrders[0] || null,\n        rawData: filteredOrders\n      });\n    };\n\n    bgTasksContext.registerOrdersRefreshCallback?.(refreshCallback);\n\n    return () => {\n      bgTasksContext.registerOrdersRefreshCallback?.(null);\n    };\n  }, [bgTasksContext, showToast, orders.length]); //  Odstranny showArchived, user_id, currentUserId, permissions - ji nejsou poteba\n\n  //  Registrace callbacku pro nov notifikace (force unlock warning)\n  useEffect(() => {\n    if (!bgTasksContext?.registerNewNotificationsCallback) {\n      return;\n    }\n\n    const handleNewNotifications = (notifications, unreadCount) => {\n      if (!notifications || notifications.length === 0) {\n        return;\n      }\n\n      // Hledej ORDER_UNLOCK_FORCED notifikace\n      const forceUnlockNotifications = notifications.filter(n =>\n        n.type === 'order_unlock_forced' &&\n        n.precteno === false\n      );\n\n      if (forceUnlockNotifications.length > 0) {\n        // Zobraz warning dialog pro prvn force unlock notifikaci\n        const notification = forceUnlockNotifications[0];\n\n        // Parsuj data z notifikace\n        const notifData = notification.data || {};\n\n        setForceUnlockWarningData({\n          orderNumber: notifData.cislo_objednavky || 'N/A',\n          lockedBy: notifData.forced_by_name || notifData.forced_by_username || 'N/A',\n          lockedByEmail: notifData.forced_by_email || null,\n          lockedByPhone: notifData.forced_by_telefon || null,\n          lockedAt: notifData.forced_at || new Date().toISOString(),\n          notificationId: notification.id\n        });\n\n        setShowForceUnlockWarning(true);\n\n      }\n    };\n\n    bgTasksContext.registerNewNotificationsCallback(handleNewNotifications);\n\n    return () => {\n      bgTasksContext.registerNewNotificationsCallback?.(null);\n    };\n  }, [bgTasksContext]);\n\n  // Check for highlighted order ID from DraftManager (after redirect from form)\n  useEffect(() => {\n    if (!user_id) return;\n\n    //  Nast highlightOrderId pes DraftManager\n    const uiState = draftManager.getUIState();\n    const highlightId = uiState?.highlightOrderId;\n\n    if (highlightId) {\n      setHighlightOrderId(highlightId);\n\n      //  HNED SMAZAT z DraftManager po nastaven\n      draftManager.saveUIState({ highlightOrderId: null });\n\n      //  AUTOMATICK SCROLL na zvraznnou objednvku\n      // Pokat a se DOM aktualizuje (po naten dat)\n      const scrollToHighlightedRow = () => {\n        const highlightedRow = document.querySelector(`[data-order-id=\"${highlightId}\"]`);\n        if (highlightedRow) {\n          // Zskej pozici dku a vku okna\n          const rect = highlightedRow.getBoundingClientRect();\n          const viewportHeight = window.innerHeight;\n          const rowHeight = rect.height;\n\n          // Zjisti, jestli je to jeden z prvnch dk (mlo prostoru nahoe)\n          const rowTop = highlightedRow.offsetTop;\n          const isNearTop = rowTop < viewportHeight / 2;\n\n          //  Pro dky nahoe (vetn PRVNHO) pouij 'start', jinak 'center'\n          const blockPosition = isNearTop ? 'start' : 'center';\n\n          try {\n            highlightedRow.scrollIntoView({\n              behavior: 'smooth',\n              block: blockPosition,  // 'start' pro prvn dky, 'center' pro ostatn\n              inline: 'nearest'\n            });\n          } catch (e) {\n            // Fallback pro star prohlee\n            highlightedRow.scrollIntoView(isNearTop); // true = align top, false = align bottom\n          }\n          return true; // spch\n        }\n        return false; // Nepodailo se najt\n      };\n\n      // Prvn pokus po 300ms\n      setTimeout(() => {\n        if (!scrollToHighlightedRow()) {\n\n          // Druh pokus po 800ms (celkem 1100ms)\n          setTimeout(() => {\n            if (!scrollToHighlightedRow()) {\n            }\n          }, 800);\n        }\n      }, 300);\n\n      // Clear highlight after 5 seconds with fade effect\n      setTimeout(() => {\n        setHighlightOrderId(null);\n      }, 5000);\n    }\n  }, [orders, user_id]); // Run when orders change (after load)\n\n  // Mapovn uivatelsky pvtivch stav na systmov kdy pro statistiky\n\n  // Helper function to get order status pro ZOBRAZEN (preferuje stav_objednavky, fallback na stav_workflow_kod)\n  //  CRITICAL: Must use useCallback to prevent filteredData useMemo from recalculating on every render\n  const getOrderDisplayStatus = useCallback((order) => {\n    // Preferuj uivatelsky pvtiv stav z stav_objednavky\n    if (order.stav_objednavky) {\n      return order.stav_objednavky;\n    }\n\n    // Fallback na posledn stav z stav_workflow_kod - pouij kod_stavu nebo nazev_stavu\n    if (order.stav_workflow_kod) {\n      try {\n        const workflowStates = JSON.parse(order.stav_workflow_kod);\n        if (Array.isArray(workflowStates)) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          // Pouij kod_stavu pokud je k dispozici\n          if (typeof lastState === 'object' && (lastState.kod_stavu || lastState.nazev_stavu)) {\n            return lastState.kod_stavu || 'NEZNAMY_STAV';\n          }\n          return typeof lastState === 'string' ? lastState : 'NEZNAMY_STAV';\n        } else {\n          return order.stav_workflow_kod;\n        }\n      } catch {\n        return order.stav_workflow_kod;\n      }\n    }\n\n    return 'DRAFT';\n  }, []); // No dependencies - pure function\n\n  //  CRITICAL: Must use useCallback to prevent filteredData useMemo from recalculating on every render\n  // Helper function to get order status pro STATISTIKY (vdy systmov kd)\n  const getOrderSystemStatus = useCallback((order) => {\n    // Speciln ppad pro koncepty - potaj se jako NOVA pro statistiky\n    if (order.isDraft || order.je_koncept) {\n      return 'NOVA';\n    }\n\n    // Zskej zkladn systmov stav\n    let systemStatus;\n\n    // Pokud mme uivatelsky pvtiv stav, zmapuj na systmov kd\n    if (order.stav_objednavky) {\n      systemStatus = mapUserStatusToSystemCode(order.stav_objednavky);\n    }\n    // Fallback na posledn stav z stav_workflow_kod\n    else if (order.stav_workflow_kod) {\n      try {\n        const workflowStates = JSON.parse(order.stav_workflow_kod);\n        systemStatus = Array.isArray(workflowStates) ? workflowStates[workflowStates.length - 1] : order.stav_workflow_kod;\n      } catch {\n        systemStatus = order.stav_workflow_kod;\n      }\n    }\n    else {\n      systemStatus = 'DRAFT';\n    }\n\n    // SPECIALNI LOGIKA PRO UVEREJNENI V REGISTRU SMLUV\n    // Kontroluj data o publikaci - ma prednost pred obecnym stavem\n    if (order.registr_smluv || order.stav_workflow_kod) {\n      const registr = order.registr_smluv;\n      \n      // Pokud ma dt_zverejneni A registr_iddt, je jiz zverejneno\n      if (registr?.dt_zverejneni && registr?.registr_iddt) {\n        return 'UVEREJNENA';\n      }\n      \n      // Ziskej workflow status pro kontrolu UVEREJNIT\n      let workflowStatus = null;\n      if (order.stav_workflow_kod) {\n        try {\n          let workflowStates = [];\n          if (Array.isArray(order.stav_workflow_kod)) {\n            workflowStates = order.stav_workflow_kod;\n          } else if (typeof order.stav_workflow_kod === 'string') {\n            workflowStates = JSON.parse(order.stav_workflow_kod);\n            if (!Array.isArray(workflowStates)) {\n              workflowStates = [];\n            }\n          }\n          if (workflowStates.length > 0) {\n            const lastState = workflowStates[workflowStates.length - 1];\n            workflowStatus = typeof lastState === 'object' ? lastState.kod_stavu : lastState;\n          }\n        } catch (e) {\n          // Pokud parsing sele, ignoruj\n        }\n      }\n      \n      // Pokud m bt zveejnna (3 podmnky jako checkbox):\n      // 1. workflow status je UVEREJNIT\n      // 2. registr.zverejnit === 'ANO'\n      // 3. registr.ma_byt_zverejnena === true/1\n      const maZverejnit = workflowStatus === 'UVEREJNIT' || \n                          registr?.zverejnit === 'ANO' || \n                          registr?.ma_byt_zverejnena;\n      \n      if (maZverejnit && !registr?.registr_iddt) {\n        return 'K_UVEREJNENI_DO_REGISTRU';\n      }\n    }\n\n    return systemStatus;\n  }, []); // No dependencies - pure function\n\n  // Helper funkce pro ziskani aktualniho workflow stavu objednavky\n  const getOrderWorkflowStatus = useCallback((order) => {\n    if (!order) return null;\n\n    // Zkus ziskat posledni stav z stav_workflow_kod\n    if (order.stav_workflow_kod) {\n      try {\n        let workflowStates = [];\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n\n        if (workflowStates.length > 0) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          if (typeof lastState === 'object' && lastState.kod_stavu) {\n            return lastState.kod_stavu;\n          } else if (typeof lastState === 'string') {\n            return lastState;\n          }\n        }\n      } catch (e) {\n        // Pokud parsing sele, pokrauj na dal fallbacky\n      }\n    }\n\n    // Fallback na stav_workflow objekt\n    if (order.stav_workflow) {\n      if (typeof order.stav_workflow === 'object' && order.stav_workflow.kod_stavu) {\n        return order.stav_workflow.kod_stavu;\n      }\n    }\n\n    return null;\n  }, []);\n\n  // Helper funkce pro ziskani celkove ceny s DPH Z POLOZEK OBJEDNAVKY\n  // Pocita POUZE ze souctu polozek (cena_s_dph), NIKDY z max_cena_s_dph\n  const getOrderTotalPriceWithDPH = useCallback((order) => {\n    // 1. PRIORITA: Faktury (pokud existuji) - skutecne utracene penize\n    if (order.faktury_celkova_castka_s_dph != null && order.faktury_celkova_castka_s_dph !== '') {\n      const value = parseFloat(order.faktury_celkova_castka_s_dph);\n      if (!isNaN(value) && value > 0) return value;\n    }\n    \n    // 2. PRIORITA: Polozky - objednane ale jeste nefakturovane\n    if (order.polozky_celkova_cena_s_dph != null && order.polozky_celkova_cena_s_dph !== '') {\n      const value = parseFloat(order.polozky_celkova_cena_s_dph);\n      if (!isNaN(value) && value > 0) return value;\n    }\n\n    //  Spotej z pole poloek jako fallback (Order V2 API vrac polozky pmo v order objektu)\n    if (order.polozky && Array.isArray(order.polozky) && order.polozky.length > 0) {\n      const total = order.polozky.reduce((sum, item) => {\n        const cena = parseFloat(item.cena_s_dph || 0);\n        return sum + (isNaN(cena) ? 0 : cena);\n      }, 0);\n      if (total > 0) return total;\n    }\n\n    // 3. PRIORITA: Max cena ke schvlen - schvlen limit, se kterm musme potat\n    if (order.max_cena_s_dph != null && order.max_cena_s_dph !== '') {\n      const value = parseFloat(order.max_cena_s_dph);\n      if (!isNaN(value) && value > 0) return value;\n    }\n\n    // Pokud objednvka nem dnou stku, vra 0\n    return 0;\n  }, [orders]);\n\n  // Stats calculation\n  const stats = useMemo(() => {\n    //  OPRAVA: orders u jsou vyfiltrovan spolenou funkc (vetn archivovanch pokud showArchived=false)\n    // U NEN poteba filtrovat archivovan znovu!\n    const dataToCount = orders; // U jsou vyfiltrovan!\n    \n    const total = dataToCount.length;\n    const byStatus = dataToCount.reduce((acc, order) => {\n      const systemStatus = getOrderSystemStatus(order);\n      const displayStatus = getOrderDisplayStatus(order);\n      acc[systemStatus] = (acc[systemStatus] || 0) + 1;\n\n      // Debug: loguj stav pro prvn pr objednvek\n      if (acc._debug < 5) {\n\n        acc._debug = (acc._debug || 0) + 1;\n      }\n\n      return acc;\n    }, {});\n\n    const totalAmount = dataToCount.reduce((sum, order) => {\n      const amount = getOrderTotalPriceWithDPH(order);\n      return sum + (isNaN(amount) ? 0 : amount);\n    }, 0);\n\n    // Potn cen dokonench a nedokonench\n    const completedAmount = dataToCount.reduce((sum, order) => {\n      const status = getOrderSystemStatus(order);\n      const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n      if (isCompleted) {\n        const amount = getOrderTotalPriceWithDPH(order);\n        return sum + (isNaN(amount) ? 0 : amount);\n      }\n      return sum;\n    }, 0);\n\n    const incompleteAmount = dataToCount.reduce((sum, order) => {\n      const status = getOrderSystemStatus(order);\n      const isCancelledOrRejected = ['STORNOVA', 'ZAMITNUTA', 'ZRUSENA', 'CANCELLED', 'SMAZANA'].includes(status);\n      const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n      if (!isCancelledOrRejected && !isCompleted) {\n        const amount = getOrderTotalPriceWithDPH(order);\n        return sum + (isNaN(amount) ? 0 : amount);\n      }\n      return sum;\n    }, 0);\n\n    //  Potn objednvek s fakturami (min. 1 faktura)\n    const withInvoices = dataToCount.reduce((count, order) => {\n      const faktury = order.faktury || [];\n      const fakturyCount = order.faktury_count || faktury.length || 0;\n      return fakturyCount > 0 ? count + 1 : count;\n    }, 0);\n\n    //  Potn objednvek s plohami (min. 1 ploha)\n    const withAttachments = dataToCount.reduce((count, order) => {\n      const prilohy = order.prilohy || [];\n      const prilohyCount = order.prilohy_count || prilohy.length || 0;\n      return prilohyCount > 0 ? count + 1 : count;\n    }, 0);\n\n    //  Potn mimodnch udlost\n    const mimoradneUdalosti = dataToCount.reduce((count, order) => {\n      return order.mimoradna_udalost ? count + 1 : count;\n    }, 0);\n\n    // Debug: uk cel byStatus objekt\n\n    return {\n      total,\n      nova: byStatus.NOVA || 0,\n      ke_schvaleni: byStatus.KE_SCHVALENI || 0,\n      schvalena: byStatus.SCHVALENA || 0,\n      zamitnuta: byStatus.ZAMITNUTA || 0,\n      ceka_se: byStatus.CEKA_SE || 0,\n      rozpracovana: byStatus.ROZPRACOVANA || 0,\n      odeslana: byStatus.ODESLANA || 0,\n      potvrzena: byStatus.POTVRZENA || 0,\n      uverejnena: byStatus.UVEREJNENA || 0,\n      vecna_spravnost: byStatus.VECNA_SPRAVNOST || 0,\n      dokoncena: byStatus.DOKONCENA || 0,\n      vyrizena: byStatus.VYRIZENA || 0,\n      zrusena: byStatus.ZRUSENA || 0,\n      stornova: byStatus.STORNOVA || 0,\n      smazana: byStatus.SMAZANA || 0,\n      archivovano: byStatus.ARCHIVOVANO || 0,\n      k_uverejneni_do_registru: byStatus.K_UVEREJNENI_DO_REGISTRU || 0,\n      ceka_potvrzeni: byStatus.CEKA_POTVRZENI || 0,\n      draft: byStatus.DRAFT || 0,\n      approved: byStatus.APPROVED || 0,\n      completed: byStatus.COMPLETED || 0,\n      cancelled: byStatus.CANCELLED || 0,\n      totalAmount,\n      completedAmount,\n      incompleteAmount,\n      withInvoices,\n      withAttachments,\n      mimoradneUdalosti\n    };\n  }, [orders, showArchived, getOrderSystemStatus, getOrderDisplayStatus, getOrderTotalPriceWithDPH]);\n\n  // Pomocn funkce pro zskn data objednvky (skuten nebo doasn pro koncepty)\n  // Zskn full datetime pro objednvku\n  const getOrderDateTime = useCallback((order) => {\n    // Pokud je to koncept (isDraft)\n    if (order.isDraft) {\n      // Pokud m uloen datum prvnho autosave v _originalData, pouij ho\n      if (order._originalData?.firstAutoSaveDate && typeof order._originalData.firstAutoSaveDate === 'string') {\n        return order._originalData.firstAutoSaveDate; // Cel ISO string\n      }\n      // Jinak pouij dt_vytvoreni\n      if (order.dt_vytvoreni && typeof order.dt_vytvoreni === 'string') {\n        return order.dt_vytvoreni; // Cel ISO string\n      }\n    }\n    // Jinak pouij standardn dt_objednavky\n    return (order.dt_objednavky && typeof order.dt_objednavky === 'string') ? order.dt_objednavky : null;\n  }, []);\n\n  // Zskn jen data pro objednvku (pro filtrovn apod.)\n  const getOrderDate = useCallback((order) => {\n    const dateTime = getOrderDateTime(order);\n    return (dateTime && typeof dateTime === 'string') ? dateTime.split('T')[0] : null;\n  }, [getOrderDateTime]);\n\n  // Helper funkce pro zvraznn vyhledanho textu\n  const highlightText = useCallback((text, searchTerm) => {\n    if (!text || !searchTerm || typeof text !== 'string') return text;\n\n    const normalizedText = text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\n    const normalizedSearch = searchTerm.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\n\n    const index = normalizedText.indexOf(normalizedSearch);\n    if (index === -1) return text;\n\n    const beforeMatch = text.substring(0, index);\n    const match = text.substring(index, index + searchTerm.length);\n    const afterMatch = text.substring(index + searchTerm.length);\n\n    return (\n      <>\n        {beforeMatch}\n        <mark style={{ backgroundColor: '#ffeb3b', padding: '0 2px', borderRadius: '2px' }}>\n          {match}\n        </mark>\n        {afterMatch}\n      </>\n    );\n  }, []);\n\n  //  CRITICAL PERFORMANCE: Forward declaration for action click handler\n  // Defined here (before columns) to avoid \"Cannot access before initialization\" error\n  // Actual handlers (handleEdit, handleView, etc.) are defined later\n  // Uses refs to access handlers without creating circular dependencies\n  const handlersRef = useRef({});\n\n  const handleActionClick = useCallback((e) => {\n    const button = e.target.closest('button[data-action]');\n    if (!button) return;\n\n    const action = button.dataset.action;\n    const orderIndex = parseInt(button.dataset.orderIndex, 10); // Local index in current page\n    const orderId = parseInt(button.dataset.orderId, 10); // Actual order ID from DB\n    \n    // Use LOCAL index to get order from filteredDataRef (current page data)\n    const order = filteredDataRef.current[orderIndex];\n\n    if (!order) {\n      return;\n    }\n\n    // Use refs to call handlers (populated after they're defined)\n    const handlers = handlersRef.current;\n    switch (action) {\n      case 'edit':\n        handlers.handleEdit?.(order);\n        break;\n      case 'view':\n        handlers.handleView?.(order);\n        break;\n      case 'export':\n        handlers.handleExportDocument?.(order);\n        break;\n      case 'financial-control':\n        handlers.handleFinancialControl?.(order);\n        break;\n      case 'create-invoice':\n        handlers.handleCreateInvoice?.(order);\n        break;\n      case 'delete':\n        handlers.handleDelete?.(order);\n        break;\n    }\n  }, []); // No dependencies - uses refs\n\n  // Helper function to get user display name with titles\n  //  CRITICAL: Uses usersRef.current instead of users dependency to prevent columns re-render\n  const getUserDisplayName = useCallback((userId, enrichedUser = null) => {\n    if (enrichedUser) {\n      const { titul_pred, jmeno, prijmeni, titul_za } = enrichedUser;\n      // Sprvn poad: Titul ped + Jmno + Pjmen + Titul za\n      const titul_pred_str = titul_pred ? titul_pred + ' ' : '';\n      const jmeno_str = jmeno || '';\n      const prijmeni_str = prijmeni || '';\n      const titul_za_str = titul_za ? ', ' + titul_za : '';\n\n      return `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n    }\n\n    const currentUsers = usersRef.current;\n    if (userId && currentUsers[userId]) {\n      // Pokud mme objekt s displayName, pouij ho\n      if (typeof currentUsers[userId] === 'object' && currentUsers[userId].displayName) {\n        return currentUsers[userId].displayName;\n      }\n      // Pokud je to star formt (pouze string), pouij ho\n      if (typeof currentUsers[userId] === 'string') {\n        return currentUsers[userId];\n      }\n    }\n\n    return 'Neznm';\n  }, []); // No dependencies - uses usersRef.current\n\n  // Helper function to get druh objednvky nzev by kod\n  const getDruhObjednavkyNazev = useCallback((kod) => {\n    if (!kod) return '---';\n    const druh = druhyObjednavkyList.find(d => d.kod === kod);\n    return druh?.nazev || kod;\n  }, [druhyObjednavkyList]);\n\n  // Helper function to get stedisko nzev by kod\n  const getStrediskoNazev = useCallback((kod) => {\n    if (!kod) return '---';\n    // Pevod na string pro porovnn (API me vracet sla i stringy)\n    const kodStr = String(kod);\n    \n    // Hledme stedisko - data mohou bt v raw objektu nebo pmo\n    const stredisko = strediskaList.find(s => {\n      const itemKod = String(s.value || s.kod_stavu || s.kod || s.raw?.kod_stavu || s.raw?.kod);\n      return itemKod === kodStr;\n    });\n    \n    // Vrtme cel nazev_stavu tak jak je v DB (nap. \"100 Sprva Kladno\")\n    const nazev = stredisko?.label || stredisko?.nazev_stavu || stredisko?.nazev || \n                  stredisko?.raw?.nazev_stavu || stredisko?.raw?.nazev;\n    \n    return nazev || `Stedisko (kd ${kod})`;\n  }, [strediskaList]);\n\n  //  HELPER: Wrapper pro sortingFn - VDY dv konceptm prioritu\n  // Zajiuje, e koncepty (isDraft nebo je_koncept) jsou VDY prvn v tabulce,\n  // bez ohledu na azen ostatnch sloupc\n  const withDraftPriority = useCallback((sortingFn) => {\n    return (rowA, rowB, columnId) => {\n      const aIsDraft = rowA.original.isDraft || rowA.original.je_koncept || false;\n      const bIsDraft = rowB.original.isDraft || rowB.original.je_koncept || false;\n      \n      // Pokud jedna je draft a druh ne, draft je vdy prvn\n      if (aIsDraft && !bIsDraft) return -1;\n      if (!aIsDraft && bIsDraft) return 1;\n      \n      // Ob jsou drafty nebo ob nejsou - pouij pvodn sorting\n      return sortingFn(rowA, rowB, columnId);\n    };\n  }, []);\n\n  // Column definitions\n  const columns = useMemo(() => [\n    {\n      id: 'select',\n      header: '',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n          <input\n            type=\"checkbox\"\n            checked={row.getIsSelected()}\n            onChange={row.getToggleSelectedHandler()}\n            style={{ cursor: 'pointer', width: '18px', height: '18px' }}\n          />\n        </div>\n      ),\n      size: 50,\n      meta: {\n        align: 'center'\n      }\n    },\n    {\n      id: 'expander',\n      header: '',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n          <ExpandButton\n            onClick={(e) => {\n              row.getToggleExpandedHandler()(e);\n\n              // Pokud se dek rozbaluje, nati detaily osob (pokud jet nejsou v enriched datech)\n              if (!row.getIsExpanded()) {\n                const order = row.original;\n\n                // Order V2 API enriched vrac: uzivatel{}, prikazce_uzivatel{}, garant_uzivatel{}, schvalovatel{}\n                // Nati detaily jen pokud chyb\n                if (order.prikazce_id && !order.prikazce?.email && !order.prikazce_uzivatel?.email) {\n                  loadPersonDetail(order.id, 'prikazce', order.prikazce_id);\n                }\n                if (order.uzivatel_id && !order.objednatel?.email && !order.uzivatel?.email) {\n                  loadPersonDetail(order.id, 'objednatel', order.uzivatel_id);\n                }\n                if (order.garant_uzivatel_id && !order.garant?.email && !order.garant_uzivatel?.email) {\n                  loadPersonDetail(order.id, 'garant', order.garant_uzivatel_id);\n                }\n                if (order.schvalovatel_id && !order.schvalovatel?.email) {\n                  loadPersonDetail(order.id, 'schvalovatel', order.schvalovatel_id);\n                }\n              }\n            }}\n            title={row.getIsExpanded() ? 'Sbalit' : 'Rozbalit'}\n          >\n            <FontAwesomeIcon icon={row.getIsExpanded() ? faMinus : faPlus} />\n          </ExpandButton>\n        </div>\n      ),\n      size: 50,\n      meta: {\n        align: 'center'\n      }\n    },\n    {\n      accessorKey: 'dt_objednavky',\n      header: 'Datum objednvky',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const dateA = getOrderDateTime(rowA.original);\n        const dateB = getOrderDateTime(rowB.original);\n\n        // Pokud jeden z dk nem datum, dej ho na konec\n        if (!dateA && !dateB) return 0;\n        if (!dateA) return 1;\n        if (!dateB) return -1;\n\n        // Porovnej timestamp\n        const timeA = new Date(dateA).getTime();\n        const timeB = new Date(dateB).getTime();\n        return timeA - timeB;\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const orderDateTime = getOrderDateTime(row.original);\n        if (!orderDateTime) return false;\n\n        const date = new Date(orderDateTime);\n        const dateStr = formatDateOnly(date);\n        const timeStr = date.toLocaleTimeString('cs-CZ', { hour: '2-digit', minute: '2-digit' });\n        const fullText = `${dateStr} ${timeStr}`;\n\n        // Case-insensitive a bez diakritiky\n        const normalizedText = removeDiacritics(fullText.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedText.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const orderDateTime = getOrderDateTime(row.original);\n        if (!orderDateTime) return <div style={{ textAlign: 'center' }}>---</div>;\n\n        const date = new Date(orderDateTime);\n        const dateStr = formatDateOnly(date);\n        const timeStr = date.toLocaleTimeString('cs-CZ', { hour: '2-digit', minute: '2-digit' });\n\n        return (\n          <div style={{ textAlign: 'center', lineHeight: '1.2' }}>\n            <div>{dateStr}</div>\n            <div style={{ fontSize: '0.75rem', color: '#6b7280' }}>{timeStr}</div>\n          </div>\n        );\n      },\n      size: 120\n    },\n    {\n      accessorKey: 'cislo_objednavky',\n      header: 'Evidenn slo',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const numA = rowA.original.cislo_objednavky || '';\n        const numB = rowB.original.cislo_objednavky || '';\n\n        // Przdn hodnoty na konec\n        if (!numA && !numB) return 0;\n        if (!numA) return 1;\n        if (!numB) return -1;\n\n        // esk tdn sel objednvek\n        return numA.localeCompare(numB, 'cs', { numeric: true, sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const cislo = row.original.cislo_objednavky || '';\n        const predmet = row.original.predmet || '';\n\n        // Filtruj podle sla i pedmtu (OR podmnka)\n        const normalizedCislo = removeDiacritics(cislo.toLowerCase());\n        const normalizedPredmet = removeDiacritics(predmet.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedCislo.includes(normalizedFilter) || normalizedPredmet.includes(normalizedFilter);\n      },\n      cell: ({ row }) => (\n        <div style={{\n          textAlign: 'left',\n          whiteSpace: 'normal',\n          overflow: 'visible',\n          position: 'relative'\n        }}>\n          {/* Prvn dek - Ev. slo */}\n          <div style={{\n            fontWeight: 600,\n            color: '#1e293b',\n            fontFamily: 'monospace',\n            whiteSpace: 'nowrap'\n          }}>\n            {row.original.mimoradna_udalost && (\n              <SmartTooltip content=\"Mimodn objednvka (krize/havrie)\">\n                <span style={{\n                  color: '#dc2626',\n                  fontWeight: 'bold',\n                  marginRight: '4px',\n                  fontSize: '1.1em'\n                }}>\n                  <FontAwesomeIcon icon={faBoltLightning} />\n                </span>\n              </SmartTooltip>\n            )}\n            {row.original.stav_objednavky === 'ARCHIVOVANO' && (\n              <span style={{\n                color: '#dc2626',\n                fontWeight: 'bold',\n                marginRight: '4px',\n                fontSize: '1.1em'\n              }}>\n                \n              </span>\n            )}\n            {globalFilter\n              ? highlightText(row.original.cislo_objednavky || '---', globalFilter)\n              : (row.original.cislo_objednavky || '---')\n            }\n            {row.original.id && !row.original.isDraft && !row.original.je_koncept && (\n              <sup style={{\n                fontSize: '0.6rem',\n                color: '#9ca3af',\n                fontWeight: 'normal',\n                marginLeft: '2px'\n              }}>\n                #{row.original.id}\n              </sup>\n            )}\n          </div>\n          {/* Druh dek - Pedmt */}\n          {row.original.predmet && (\n            <div style={{\n              fontSize: '1em',\n              fontWeight: 600,\n              color: '#1e293b',\n              marginTop: '4px',\n              lineHeight: '1.3',\n              maxWidth: '300px',\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap'\n            }}>\n              {globalFilter\n                ? highlightText(row.original.predmet, globalFilter)\n                : row.original.predmet\n              }\n            </div>\n          )}\n        </div>\n      ),\n      size: 180\n    },\n    {\n      accessorKey: 'objednatel_garant',\n      header: 'Objednatel / Garant',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        // Tdn primrn podle objednatele\n        const getObjednatelName = (order) => {\n          if (order.objednatel_uzivatel) {\n            if (order.objednatel_uzivatel.cele_jmeno) {\n              return order.objednatel_uzivatel.cele_jmeno;\n            }\n            return getUserDisplayName(null, order.objednatel_uzivatel);\n          }\n          if (order.objednatel) {\n            const obj = order.objednatel;\n            if (obj.cele_jmeno) {\n              return obj.cele_jmeno;\n            }\n            if (obj.jmeno && obj.prijmeni) {\n              const titul_pred_str = obj.titul_pred ? obj.titul_pred + ' ' : '';\n              const titul_za_str = obj.titul_za ? ', ' + obj.titul_za : '';\n              return `${titul_pred_str}${obj.jmeno} ${obj.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n            }\n            if (obj.username) {\n              return obj.username;\n            }\n          }\n          if (order.objednatel_id) {\n            return getUserDisplayName(order.objednatel_id);\n          }\n          return '---';\n        };\n\n        const nameA = getObjednatelName(rowA.original);\n        const nameB = getObjednatelName(rowB.original);\n\n        // esk tdn jmen (--- na konec)\n        if (nameA === '---' && nameB === '---') return 0;\n        if (nameA === '---') return 1;\n        if (nameB === '---') return -1;\n\n        return nameA.localeCompare(nameB, 'cs', { sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const order = row.original;\n        let objednatelName = '---';\n        let garantName = '---';\n\n        // Zskej jmno objednatele\n        if (order.objednatel_uzivatel) {\n          if (order.objednatel_uzivatel.cele_jmeno) {\n            objednatelName = order.objednatel_uzivatel.cele_jmeno;\n          } else {\n            objednatelName = getUserDisplayName(null, order.objednatel_uzivatel);\n          }\n        } else if (order.objednatel) {\n          const obj = order.objednatel;\n          if (obj.cele_jmeno) {\n            objednatelName = obj.cele_jmeno;\n          } else if (obj.jmeno && obj.prijmeni) {\n            const titul_pred_str = obj.titul_pred ? obj.titul_pred + ' ' : '';\n            const titul_za_str = obj.titul_za ? ', ' + obj.titul_za : '';\n            objednatelName = `${titul_pred_str}${obj.jmeno} ${obj.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (obj.username) {\n            objednatelName = obj.username;\n          }\n        } else if (order.objednatel_id) {\n          objednatelName = getUserDisplayName(order.objednatel_id);\n        }\n\n        // Zskej jmno garanta\n        if (order.garant_uzivatel) {\n          if (order.garant_uzivatel.cele_jmeno) {\n            garantName = order.garant_uzivatel.cele_jmeno;\n          } else {\n            garantName = getUserDisplayName(null, order.garant_uzivatel);\n          }\n        } else if (order.garant) {\n          const gar = order.garant;\n          if (gar.cele_jmeno) {\n            garantName = gar.cele_jmeno;\n          } else if (gar.jmeno && gar.prijmeni) {\n            const titul_pred_str = gar.titul_pred ? gar.titul_pred + ' ' : '';\n            const titul_za_str = gar.titul_za ? ', ' + gar.titul_za : '';\n            garantName = `${titul_pred_str}${gar.jmeno} ${gar.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (gar.username) {\n            garantName = gar.username;\n          }\n        } else if (order.garant_uzivatel_id) {\n          garantName = getUserDisplayName(order.garant_uzivatel_id);\n        }\n\n        // Filtruj podle obou jmen (OR podmnka)\n        const normalizedObjednatel = removeDiacritics(objednatelName.toLowerCase());\n        const normalizedGarant = removeDiacritics(garantName.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedObjednatel.includes(normalizedFilter) || normalizedGarant.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const order = row.original;\n        let objednatelName = '---';\n        let garantName = '---';\n\n        // Zskej jmno objednatele\n        if (order.objednatel_uzivatel) {\n          if (order.objednatel_uzivatel.cele_jmeno) {\n            objednatelName = order.objednatel_uzivatel.cele_jmeno;\n          } else {\n            objednatelName = getUserDisplayName(null, order.objednatel_uzivatel);\n          }\n        } else if (order.objednatel) {\n          const obj = order.objednatel;\n          if (obj.cele_jmeno) {\n            objednatelName = obj.cele_jmeno;\n          } else if (obj.jmeno && obj.prijmeni) {\n            const titul_pred_str = obj.titul_pred ? obj.titul_pred + ' ' : '';\n            const titul_za_str = obj.titul_za ? ', ' + obj.titul_za : '';\n            objednatelName = `${titul_pred_str}${obj.jmeno} ${obj.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (obj.username) {\n            objednatelName = obj.username;\n          }\n        } else if (order.objednatel_id) {\n          objednatelName = getUserDisplayName(order.objednatel_id);\n        }\n\n        // Zskej jmno garanta\n        if (order.garant_uzivatel) {\n          if (order.garant_uzivatel.cele_jmeno) {\n            garantName = order.garant_uzivatel.cele_jmeno;\n          } else {\n            garantName = getUserDisplayName(null, order.garant_uzivatel);\n          }\n        } else if (order.garant) {\n          const gar = order.garant;\n          if (gar.cele_jmeno) {\n            garantName = gar.cele_jmeno;\n          } else if (gar.jmeno && gar.prijmeni) {\n            const titul_pred_str = gar.titul_pred ? gar.titul_pred + ' ' : '';\n            const titul_za_str = gar.titul_za ? ', ' + gar.titul_za : '';\n            garantName = `${titul_pred_str}${gar.jmeno} ${gar.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (gar.username) {\n            garantName = gar.username;\n          }\n        } else if (order.garant_uzivatel_id) {\n          garantName = getUserDisplayName(order.garant_uzivatel_id);\n        }\n\n        return (\n          <div style={{ lineHeight: '1.3' }} title={`Objednatel: ${objednatelName}\\nGarant: ${garantName}`}>\n            <div style={{ fontWeight: 500 }}>{objednatelName}</div>\n            <div style={{ fontSize: '0.85em', color: '#6b7280' }}>{garantName}</div>\n          </div>\n        );\n      },\n      size: 180\n    },\n    {\n      accessorKey: 'prikazce_schvalovatel',\n      header: 'Pkazce / Schvalovatel',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const getPrikazceName = (order) => {\n          if (order.prikazce_uzivatel) {\n            return getUserDisplayName(null, order.prikazce_uzivatel);\n          }\n          if (order.prikazce) {\n            const pri = order.prikazce;\n            if (pri.jmeno && pri.prijmeni) {\n              const titul_pred_str = pri.titul_pred ? pri.titul_pred + ' ' : '';\n              const titul_za_str = pri.titul_za ? ', ' + pri.titul_za : '';\n              return `${titul_pred_str}${pri.jmeno} ${pri.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n            }\n            if (pri.username) {\n              return pri.username;\n            }\n            if (pri.cele_jmeno) {\n              return pri.cele_jmeno;\n            }\n          }\n          if (order.prikazce_id) {\n            return getUserDisplayName(order.prikazce_id);\n          }\n          return '---';\n        };\n\n        const nameA = getPrikazceName(rowA.original);\n        const nameB = getPrikazceName(rowB.original);\n\n        // esk tdn jmen (--- na konec)\n        if (nameA === '---' && nameB === '---') return 0;\n        if (nameA === '---') return 1;\n        if (nameB === '---') return -1;\n\n        return nameA.localeCompare(nameB, 'cs', { sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const order = row.original;\n        let prikazceName = '---';\n        let schvalovatelName = '---';\n\n        // Zskej jmno pkazce\n        if (order.prikazce_uzivatel) {\n          prikazceName = getUserDisplayName(null, order.prikazce_uzivatel);\n        } else if (order.prikazce) {\n          const pri = order.prikazce;\n          if (pri.jmeno && pri.prijmeni) {\n            const titul_pred_str = pri.titul_pred ? pri.titul_pred + ' ' : '';\n            const titul_za_str = pri.titul_za ? ', ' + pri.titul_za : '';\n            prikazceName = `${titul_pred_str}${pri.jmeno} ${pri.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (pri.username) {\n            prikazceName = pri.username;\n          } else if (pri.cele_jmeno) {\n            prikazceName = pri.cele_jmeno;\n          }\n        } else if (order.prikazce_id) {\n          prikazceName = getUserDisplayName(order.prikazce_id);\n        }\n\n        // Zskej jmno schvalovatele\n        if (order.schvalovatel_uzivatel) {\n          schvalovatelName = getUserDisplayName(null, order.schvalovatel_uzivatel);\n        } else if (order.schvalovatel) {\n          const sch = order.schvalovatel;\n          if (sch.jmeno && sch.prijmeni) {\n            const titul_pred_str = sch.titul_pred ? sch.titul_pred + ' ' : '';\n            const titul_za_str = sch.titul_za ? ', ' + sch.titul_za : '';\n            schvalovatelName = `${titul_pred_str}${sch.jmeno} ${sch.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (sch.username) {\n            schvalovatelName = sch.username;\n          } else if (sch.cele_jmeno) {\n            schvalovatelName = sch.cele_jmeno;\n          }\n        } else if (order.schvalovatel_id) {\n          schvalovatelName = getUserDisplayName(order.schvalovatel_id);\n        }\n\n        // Filtruj podle obou jmen (OR podmnka)\n        const normalizedPrikazce = removeDiacritics(prikazceName.toLowerCase());\n        const normalizedSchvalovatel = removeDiacritics(schvalovatelName.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedPrikazce.includes(normalizedFilter) || normalizedSchvalovatel.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const order = row.original;\n        let prikazceName = '---';\n        let schvalovatelName = '---';\n\n        // Zskej jmno pkazce\n        if (order.prikazce_uzivatel) {\n          prikazceName = getUserDisplayName(null, order.prikazce_uzivatel);\n        } else if (order.prikazce) {\n          const pri = order.prikazce;\n          if (pri.jmeno && pri.prijmeni) {\n            const titul_pred_str = pri.titul_pred ? pri.titul_pred + ' ' : '';\n            const titul_za_str = pri.titul_za ? ', ' + pri.titul_za : '';\n            prikazceName = `${titul_pred_str}${pri.jmeno} ${pri.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (pri.username) {\n            prikazceName = pri.username;\n          } else if (pri.cele_jmeno) {\n            prikazceName = pri.cele_jmeno;\n          }\n        } else if (order.prikazce_id) {\n          prikazceName = getUserDisplayName(order.prikazce_id);\n        }\n\n        // Zskej jmno schvalovatele\n        if (order.schvalovatel_uzivatel) {\n          schvalovatelName = getUserDisplayName(null, order.schvalovatel_uzivatel);\n        } else if (order.schvalovatel) {\n          const sch = order.schvalovatel;\n          if (sch.jmeno && sch.prijmeni) {\n            const titul_pred_str = sch.titul_pred ? sch.titul_pred + ' ' : '';\n            const titul_za_str = sch.titul_za ? ', ' + sch.titul_za : '';\n            schvalovatelName = `${titul_pred_str}${sch.jmeno} ${sch.prijmeni}${titul_za_str}`.replace(/\\s+/g, ' ').trim();\n          } else if (sch.username) {\n            schvalovatelName = sch.username;\n          } else if (sch.cele_jmeno) {\n            schvalovatelName = sch.cele_jmeno;\n          }\n        } else if (order.schvalovatel_id) {\n          schvalovatelName = getUserDisplayName(order.schvalovatel_id);\n        }\n\n        return (\n          <div style={{ lineHeight: '1.3' }} title={`Pkazce: ${prikazceName}\\nSchvalovatel: ${schvalovatelName}`}>\n            <div style={{ fontWeight: 500 }}>{prikazceName}</div>\n            <div style={{ fontSize: '0.85em', color: '#6b7280' }}>{schvalovatelName}</div>\n          </div>\n        );\n      },\n      size: 180\n    },\n    {\n      accessorKey: 'dodavatel_nazev',\n      header: 'Dodavatel',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const nameA = rowA.original.dodavatel_nazev || '---';\n        const nameB = rowB.original.dodavatel_nazev || '---';\n\n        // esk tdn nzv (--- na konec)\n        if (nameA === '---' && nameB === '---') return 0;\n        if (nameA === '---') return 1;\n        if (nameB === '---') return -1;\n\n        return nameA.localeCompare(nameB, 'cs', { sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const order = row.original;\n\n        // Vyhledvej v nzvu, IO, adrese, emailu, telefonu, kontaktn osob\n        const searchableText = [\n          order.dodavatel_nazev || '',\n          order.dodavatel_ico || '',\n          order.dodavatel_ulice || '',\n          order.dodavatel_mesto || '',\n          order.dodavatel_psc || '',\n          order.dodavatel_kontakt_email || '',\n          order.dodavatel_kontakt_telefon || '',\n          order.dodavatel_kontakt_jmeno || ''\n        ].join(' ').toLowerCase();\n\n        const normalizedText = removeDiacritics(searchableText);\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedText.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const order = row.original;\n\n        if (!order.dodavatel_nazev) {\n          return <div style={{ color: '#9ca3af' }}>---</div>;\n        }\n\n        // Sestaven kontakt (email | telefon)\n        const kontakty = [];\n        if (order.dodavatel_kontakt_email) kontakty.push(order.dodavatel_kontakt_email);\n        if (order.dodavatel_kontakt_telefon) kontakty.push(order.dodavatel_kontakt_telefon);\n        const kontaktText = kontakty.join(' | ');\n\n        // Adresa dodavatele\n        const adresaText = order.dodavatel_adresa || '';\n\n        return (\n          <div style={{ lineHeight: '1.4', whiteSpace: 'nowrap' }}>\n            {/* dek 1: Nzev dodavatele */}\n            <div style={{ fontWeight: 500 }}>\n              {order.dodavatel_nazev}\n            </div>\n            {/* dek 2: Adresa (men psmo) */}\n            {adresaText && (\n              <div style={{ fontSize: '0.85em', color: '#6b7280' }}>\n                {adresaText}\n              </div>\n            )}\n            {/* dek 3: IO (men psmo) */}\n            {order.dodavatel_ico && (\n              <div style={{ fontSize: '0.85em', color: '#6b7280' }}>\n                IO: {order.dodavatel_ico}\n              </div>\n            )}\n            {/* dek 4: Email | Telefon */}\n            {kontaktText && (\n              <div style={{ fontSize: '0.85em', color: '#6b7280' }}>\n                {kontaktText}\n              </div>\n            )}\n          </div>\n        );\n      },\n      size: 220\n    },\n    {\n      accessorKey: 'stav_objednavky',\n      header: 'Stav',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const getStatusText = (order) => {\n          const displayStatus = getOrderDisplayStatus(order);\n\n          if (order.isDraft || order.je_koncept) {\n            return 'Nova / koncept';\n          }\n          if (order.stav_workflow) {\n            if (typeof order.stav_workflow === 'object') {\n              if (order.stav_workflow.nazev_stavu) {\n                return order.stav_workflow.nazev_stavu;\n              }\n              if (order.stav_workflow.nazev) {\n                return order.stav_workflow.nazev;\n              }\n              return 'Neznm stav';\n            }\n            return order.stav_workflow?.nazev_stavu || order.stav_workflow?.nazev || String(order.stav_workflow) || 'Neznm stav';\n          }\n\n          return displayStatus;\n        };\n\n        const statusA = getStatusText(rowA.original);\n        const statusB = getStatusText(rowB.original);\n\n        // esk tdn stav (przdn na konec)\n        if (!statusA && !statusB) return 0;\n        if (!statusA) return 1;\n        if (!statusB) return -1;\n\n        return statusA.localeCompare(statusB, 'cs', { sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const order = row.original;\n        const displayStatus = getOrderDisplayStatus(order);\n        let statusText = displayStatus;\n\n        // Stejn logika jako v sortingFn - zskej zobrazovan text\n        if (order.isDraft || order.je_koncept) {\n          statusText = 'Nova / koncept';\n        } else if (order.stav_workflow) {\n          if (typeof order.stav_workflow === 'object') {\n            if (order.stav_workflow.nazev_stavu) {\n              statusText = order.stav_workflow.nazev_stavu;\n            } else if (order.stav_workflow.nazev) {\n              statusText = order.stav_workflow.nazev;\n            } else {\n              statusText = 'Neznm stav';\n            }\n          } else {\n            statusText = order.stav_workflow?.nazev_stavu || order.stav_workflow?.nazev || String(order.stav_workflow) || 'Neznm stav';\n          }\n        }\n\n        // Case-insensitive a bez diakritiky\n        const normalizedText = removeDiacritics(statusText.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedText.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const order = row.original;\n        const statusCode = getOrderSystemStatus(order);\n        const displayStatus = getOrderDisplayStatus(order);\n\n        // Pouijeme displayStatus (uivatelsky pvtiv) pro zobrazen\n        let statusText = displayStatus;\n\n        // Speciln zobrazen pro koncepty\n        if (order.isDraft || order.je_koncept) {\n          statusText = 'Nova / koncept';\n        }\n        else if (order.stav_workflow) {\n          // Order V2 API enriched me vracet stav_workflow objekt nebo string\n          if (typeof order.stav_workflow === 'object') {\n            // Pouij nazev_stavu pokud je k dispozici\n            if (order.stav_workflow.nazev_stavu) {\n              statusText = order.stav_workflow.nazev_stavu;\n            } else if (order.stav_workflow.nazev) {\n              statusText = order.stav_workflow.nazev;\n            } else {\n              statusText = 'Neznm stav';\n            }\n          } else {\n            // Pro string nebo jin primitivn hodnoty\n            statusText = order.stav_workflow?.nazev_stavu || order.stav_workflow?.nazev || String(order.stav_workflow) || 'Neznm stav';\n          }\n        }\n\n        return (\n          <div style={{\n            display: 'flex',\n            justifyContent: 'flex-start',\n            alignItems: 'center',\n            width: '100%'\n          }}>\n            <StatusBadge\n              $status={statusCode}\n              $isInEditRow={row.original.isDraft || row.original.hasLocalDraftChanges || false}\n            >\n              <FontAwesomeIcon\n                icon={\n                  statusCode === 'NOVA' ? faFilePen :\n                  statusCode === 'KE_SCHVALENI' ? faClock :\n                  statusCode === 'SCHVALENA' ? faShield :\n                  statusCode === 'POTVRZENA' ? faCheckCircle :\n                  statusCode === 'UVEREJNENA' ? faFileContract :\n                  statusCode === 'DOKONCENA' ? faTruck :\n                  statusCode === 'ZRUSENA' ? faXmark :\n                  faCircleNotch\n                }\n                style={{\n                  alignSelf: 'flex-start',\n                  marginTop: '2px',\n                  fontSize: '12px'\n                }}\n              />\n              <span style={{ lineHeight: '1.2' }}>{statusText}</span>\n            </StatusBadge>\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'stav_registru',\n      header: 'Stav registru',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const getRegistrStav = (order) => {\n          const registr = order.registr_smluv;\n          const workflowStatus = getOrderWorkflowStatus(order);\n\n          if (registr) {\n            if (registr.dt_zverejneni && registr.registr_iddt) {\n              return 'Zveejnno';\n            }\n            if (workflowStatus === 'UVEREJNIT' || registr.zverejnit === 'ANO') {\n              return 'M bt zveejnno';\n            }\n          }\n          if (workflowStatus === 'UVEREJNIT') {\n            return 'M bt zveejnno';\n          }\n\n          return ''; // przdn\n        };\n\n        const stavA = getRegistrStav(rowA.original);\n        const stavB = getRegistrStav(rowB.original);\n\n        // Przdn hodnoty nejprve, pak tdn podle nzvu\n        if (!stavA && !stavB) return 0;\n        if (!stavA) return -1; // przdn nahoru\n        if (!stavB) return 1;\n\n        return stavA.localeCompare(stavB, 'cs', { sensitivity: 'base' });\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const order = row.original;\n        const registr = order.registr_smluv;\n        const workflowStatus = getOrderWorkflowStatus(order);\n        let stavText = '';\n\n        // Stejn logika jako v sortingFn - zskej zobrazovan text\n        if (registr) {\n          if (registr.dt_zverejneni && registr.registr_iddt) {\n            stavText = 'Zveejnno';\n          } else if (workflowStatus === 'UVEREJNIT' || registr.zverejnit === 'ANO') {\n            stavText = 'M bt zveejnno';\n          }\n        } else if (workflowStatus === 'UVEREJNIT') {\n          stavText = 'M bt zveejnno';\n        }\n\n        // Pokud je przdn, prohledvej i \"---\" (pro ppad, e uivatel zad ---)\n        if (!stavText) {\n          const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n          return normalizedFilter === '---' || normalizedFilter === '';\n        }\n\n        // Case-insensitive a bez diakritiky\n        const normalizedText = removeDiacritics(stavText.toLowerCase());\n        const normalizedFilter = removeDiacritics(filterValue.toLowerCase());\n\n        return normalizedText.includes(normalizedFilter);\n      },\n      cell: ({ row }) => {\n        const order = row.original;\n        const registr = order.registr_smluv;\n        const workflowStatus = getOrderWorkflowStatus(order);\n\n        let stavText = '';\n        let stavIcon = null;\n        let statusCode = 'EMPTY'; // Pro przdn stav\n\n        // Logika podle BE struktury + workflow stavu:\n        // 1. Pokud existuje dt_zverejneni A registr_iddt -> \"Zveejnno\"\n        // 2. Pokud je workflow stav UVEREJNIT NEBO zverejnit: \"ANO\" -> \"M bt zveejnno\"\n        // 3. Jinak -> przdn\n\n        if (registr) {\n          // 1. Zveejnno - m vyplnn oboje dt_zverejneni I registr_iddt\n          if (registr.dt_zverejneni && registr.registr_iddt) {\n            stavText = 'Zveejnno';\n            stavIcon = faCheckCircle;\n            statusCode = 'UVEREJNENA'; // Pouij status code pro zelen tma\n          }\n          // 2. M bt zveejnno - workflow stav UVEREJNIT NEBO m zakrtnut zverejnit: 'ANO'\n          else if (workflowStatus === 'UVEREJNIT' || registr.zverejnit === 'ANO') {\n            stavText = 'M bt zveejnno';\n            stavIcon = faClock;\n            statusCode = 'KE_SCHVALENI'; // Pouij status code pro oranov tma\n          }\n        }\n        // Zkontroluj i ppad, kdy registr_smluv neexistuje, ale stav je UVEREJNIT\n        else if (workflowStatus === 'UVEREJNIT') {\n          stavText = 'M bt zveejnno';\n          stavIcon = faClock;\n          statusCode = 'KE_SCHVALENI';\n        }\n\n        // Pokud nemme dn stav, vra ---\n        if (!stavText) {\n          return (\n            <div style={{\n              textAlign: 'left',\n              color: '#94a3b8',\n              fontSize: '0.9em'\n            }}>\n              ---\n            </div>\n          );\n        }\n\n        return (\n          <div style={{\n            display: 'flex',\n            justifyContent: 'flex-start',\n            alignItems: 'center',\n            width: '100%'\n          }}>\n            <StatusBadge\n              $status={statusCode}\n              $isInEditRow={false}\n              title={registr?.registr_iddt || ''}\n            >\n              <FontAwesomeIcon\n                icon={stavIcon}\n                style={{\n                  alignSelf: 'flex-start',\n                  marginTop: '2px',\n                  fontSize: '12px'\n                }}\n              />\n              <span style={{ lineHeight: '1.2' }}>{stavText}</span>\n            </StatusBadge>\n          </div>\n        );\n      },\n      size: 150\n    },\n    {\n      accessorKey: 'max_cena_s_dph',\n      header: 'Max. cena s DPH',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const priceA = parseFloat(rowA.original.max_cena_s_dph || 0);\n        const priceB = parseFloat(rowB.original.max_cena_s_dph || 0);\n\n        // Numerick tdn (0 nebo NaN na konec)\n        const validA = !isNaN(priceA) && priceA > 0 ? priceA : -Infinity;\n        const validB = !isNaN(priceB) && priceB > 0 ? priceB : -Infinity;\n\n        return validA - validB;\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const price = parseFloat(row.original.max_cena_s_dph || 0);\n        const filterTrimmed = filterValue.trim();\n\n        // Podpora pro porovnvac opertory: =10000, <10000, >10000\n        if (filterTrimmed.match(/^[=<>]/)) {\n          const operator = filterTrimmed[0];\n          const valueStr = filterTrimmed.substring(1).trim().replace(/\\s/g, '').replace(/,/g, '');\n          const compareValue = parseFloat(valueStr);\n\n          // Platn slo pro porovnn (vetn 0)\n          if (!isNaN(compareValue) && !isNaN(price)) {\n            if (operator === '=') return Math.abs(price - compareValue) < 0.01; // Rovnost s toleranc\n            if (operator === '<') return price < compareValue;\n            if (operator === '>') return price > compareValue;\n          }\n          return false;\n        }\n\n        // Bn vyhledvn v textu\n        if (!isNaN(price)) {\n          if (price > 0) {\n            // Formtuj cenu jako string pro vyhledvn\n            const priceText = price.toLocaleString('cs-CZ');\n\n            // Case-insensitive (sla bez diakritiky)\n            const normalizedText = priceText.toLowerCase();\n            const normalizedFilter = filterValue.toLowerCase();\n\n            return normalizedText.includes(normalizedFilter);\n          } else {\n            // Cena je 0 - hledej \"0\" nebo \"---\"\n            return filterValue === '0' || filterValue === '---' || filterValue === '';\n          }\n        }\n\n        // Pokud nem cenu, hledej \"---\"\n        return filterValue === '---' || filterValue === '';\n      },\n      cell: ({ row }) => {\n        const maxPrice = parseFloat(row.original.max_cena_s_dph || 0);\n        const fakturaPrice = parseFloat(row.original.faktury_celkova_castka_s_dph || 0);\n        \n        // Pokud faktura pekrauje max cenu, zobraz erven\n        const isOverLimit = fakturaPrice > 0 && maxPrice > 0 && fakturaPrice > maxPrice;\n        \n        return (\n          <div style={{ \n            textAlign: 'right', \n            fontWeight: 600, \n            fontFamily: 'monospace', \n            whiteSpace: 'nowrap',\n            color: isOverLimit ? '#dc2626' : 'inherit'\n          }}>\n            {!isNaN(maxPrice) && maxPrice > 0 ? <>{maxPrice.toLocaleString('cs-CZ')}&nbsp;K</> : '---'}\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'cena_s_dph',\n      header: 'Cena s DPH',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const priceA = getOrderTotalPriceWithDPH(rowA.original);\n        const priceB = getOrderTotalPriceWithDPH(rowB.original);\n\n        // Numerick tdn (0 nebo NaN na konec)\n        const validA = !isNaN(priceA) && priceA > 0 ? priceA : -Infinity;\n        const validB = !isNaN(priceB) && priceB > 0 ? priceB : -Infinity;\n\n        return validA - validB;\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const price = getOrderTotalPriceWithDPH(row.original);\n        const filterTrimmed = filterValue.trim();\n\n        // Podpora pro porovnvac opertory: =10000, <10000, >10000\n        if (filterTrimmed.match(/^[=<>]/)) {\n          const operator = filterTrimmed[0];\n          const valueStr = filterTrimmed.substring(1).trim().replace(/\\s/g, '').replace(/,/g, '');\n          const compareValue = parseFloat(valueStr);\n\n          // Platn slo pro porovnn (vetn 0)\n          if (!isNaN(compareValue) && !isNaN(price)) {\n            if (operator === '=') return Math.abs(price - compareValue) < 0.01; // Rovnost s toleranc\n            if (operator === '<') return price < compareValue;\n            if (operator === '>') return price > compareValue;\n          }\n          return false;\n        }\n\n        // Bn vyhledvn v textu\n        if (!isNaN(price)) {\n          if (price > 0) {\n            // Formtuj cenu jako string pro vyhledvn\n            const priceText = price.toLocaleString('cs-CZ');\n\n            // Case-insensitive (sla bez diakritiky)\n            const normalizedText = priceText.toLowerCase();\n            const normalizedFilter = filterValue.toLowerCase();\n\n            return normalizedText.includes(normalizedFilter);\n          } else {\n            // Cena je 0 - hledej \"0\" nebo \"---\"\n            return filterValue === '0' || filterValue === '---' || filterValue === '';\n          }\n        }\n\n        // Pokud nem cenu, hledej \"---\"\n        return filterValue === '---' || filterValue === '';\n      },\n      cell: ({ row }) => {\n        //  Zobraz pouze cenu z poloek objednvky (ne max_cena_s_dph!)\n        let price = 0;\n        \n        // 1. PRIORITA: Poloky - vypotan cena z poloek\n        if (row.original.polozky_celkova_cena_s_dph != null && row.original.polozky_celkova_cena_s_dph !== '') {\n          const value = parseFloat(row.original.polozky_celkova_cena_s_dph);\n          if (!isNaN(value) && value > 0) price = value;\n        } else if (row.original.polozky && Array.isArray(row.original.polozky) && row.original.polozky.length > 0) {\n          // Spotej z poloek jako fallback\n          price = row.original.polozky.reduce((sum, item) => {\n            const cena = parseFloat(item.cena_s_dph || 0);\n            return sum + (isNaN(cena) ? 0 : cena);\n          }, 0);\n        }\n        \n        return (\n          <div style={{ textAlign: 'right', fontWeight: 600, fontFamily: 'monospace', whiteSpace: 'nowrap' }}>\n            {!isNaN(price) && price > 0 ? <>{price.toLocaleString('cs-CZ')}&nbsp;K</> : '---'}\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'faktury_celkova_castka_s_dph',\n      header: 'Cena FA s DPH',\n      sortingFn: withDraftPriority((rowA, rowB) => {\n        const priceA = parseFloat(rowA.original.faktury_celkova_castka_s_dph || 0);\n        const priceB = parseFloat(rowB.original.faktury_celkova_castka_s_dph || 0);\n\n        // Numerick tdn (0 nebo NaN na konec)\n        const validA = !isNaN(priceA) && priceA > 0 ? priceA : -Infinity;\n        const validB = !isNaN(priceB) && priceB > 0 ? priceB : -Infinity;\n\n        return validA - validB;\n      }),\n      filterFn: (row, columnId, filterValue) => {\n        if (!filterValue) return true;\n\n        const price = parseFloat(row.original.faktury_celkova_castka_s_dph || 0);\n        const filterTrimmed = filterValue.trim();\n\n        // Podpora pro porovnvac opertory: =10000, <10000, >10000\n        if (filterTrimmed.match(/^[=<>]/)) {\n          const operator = filterTrimmed[0];\n          const valueStr = filterTrimmed.substring(1).trim().replace(/\\s/g, '').replace(/,/g, '');\n          const compareValue = parseFloat(valueStr);\n\n          if (!isNaN(compareValue) && !isNaN(price)) {\n            if (operator === '=') return Math.abs(price - compareValue) < 0.01;\n            if (operator === '<') return price < compareValue;\n            if (operator === '>') return price > compareValue;\n          }\n          return false;\n        }\n\n        // Bn vyhledvn v textu\n        if (!isNaN(price)) {\n          if (price > 0) {\n            const priceText = price.toLocaleString('cs-CZ');\n            const normalizedText = priceText.toLowerCase();\n            const normalizedFilter = filterValue.toLowerCase();\n            return normalizedText.includes(normalizedFilter);\n          } else {\n            return filterValue === '0' || filterValue === '---' || filterValue === '';\n          }\n        }\n\n        return filterValue === '---' || filterValue === '';\n      },\n      cell: ({ row }) => {\n        const price = parseFloat(row.original.faktury_celkova_castka_s_dph || 0);\n        return (\n          <div style={{ textAlign: 'right', fontWeight: 600, fontFamily: 'monospace', whiteSpace: 'nowrap', color: '#059669' }}>\n            {!isNaN(price) && price > 0 ? <>{price.toLocaleString('cs-CZ')}&nbsp;K</> : '---'}\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => {\n        //  PERFORMANCE: Use refs to avoid columns re-render when pagination changes\n        const orderIndex = row.index; // LOCAL index in current page\n        const orderId = row.original.id; // Actual order ID from database\n        return (\n          <ActionMenu onClick={handleActionClick}>\n            {/* 1 EDIT */}\n            <ActionMenuButton\n              className=\"edit\"\n              data-action=\"edit\"\n              data-order-index={orderIndex}\n              data-order-id={orderId}\n              title={\n                row.original.isDraft\n                  ? \"Vrtit se ke konceptu objednvky\"\n                  : row.original.hasLocalDraftChanges\n                    ? \"Pokraovat v editaci\"\n                    : \"Editovat\"\n              }\n              disabled={!canEdit(row.original)}\n            >\n              <FontAwesomeIcon icon={faEdit} />\n            </ActionMenuButton>\n            {/* 2 EVIDOVAT FAKTURU */}\n            <ActionMenuButton\n              className=\"create-invoice\"\n              data-action=\"create-invoice\"\n              data-order-index={orderIndex}\n              data-order-id={orderId}\n              title={row.original.hasLocalDraftChanges \n                ? 'Objednvka je prv oteven na formuli - zavete ji pro evidovn faktury' \n                : (!canCreateInvoice(row.original) \n                  ? 'Evidovn faktury je dostupn pouze pro objednvky od stavu ROZPRACOVAN' \n                  : 'Evidovat fakturu k tto objednvce')}\n              disabled={row.original.hasLocalDraftChanges || !canCreateInvoice(row.original)}\n            >\n              <FontAwesomeIcon icon={faFileInvoice} />\n            </ActionMenuButton>\n            {/* 3 GENEROVAT DOCX */}\n            <ActionMenuButton\n              className=\"export-document\"\n              data-action=\"export\"\n              data-order-index={orderIndex}\n              data-order-id={orderId}\n              title={row.original.hasLocalDraftChanges \n                ? 'Objednvka je prv oteven na formuli - zavete ji pro generovn DOCX' \n                : (!canExportDocument(row.original) \n                  ? 'Generovn DOCX je dostupn pouze pro objednvky od stavu ROZPRACOVAN' \n                  : 'Generovat DOCX')}\n              disabled={row.original.hasLocalDraftChanges || !canExportDocument(row.original)}\n            >\n              <FontAwesomeIcon icon={faFileWord} />\n            </ActionMenuButton>\n            {/* 4 FINANN KONTROLA */}\n            <ActionMenuButton\n              className=\"financial-control\"\n              data-action=\"financial-control\"\n              data-order-index={orderIndex}\n              data-order-id={orderId}\n              title={getOrderSystemStatus(row.original) !== 'DOKONCENA' \n                ? 'Finann kontrola je dostupn pouze pro objednvky ve stavu DOKONENA'\n                : 'Generovat finann kontrolu (PDF/tisk)'\n              }\n              disabled={getOrderSystemStatus(row.original) !== 'DOKONCENA'}\n            >\n              <FontAwesomeIcon icon={faListCheck} />\n            </ActionMenuButton>\n            {/* 5 SMAZAT */}\n            <ActionMenuButton\n              className=\"delete\"\n              data-action=\"delete\"\n              data-order-index={orderIndex}\n              data-order-id={orderId}\n              title=\"Smazat\"\n              disabled={!canDelete(row.original)}\n            >\n              <FontAwesomeIcon icon={faTrash} />\n            </ActionMenuButton>\n          </ActionMenu>\n        );\n      },\n      size: 120,\n      minSize: 120,\n      maxSize: 140\n    }\n  ], [getOrderDate, getOrderWorkflowStatus, getOrderSystemStatus, globalFilter, highlightText, handleActionClick, getUserDisplayName]);\n  //  CRITICAL: Removed currentPageIndex, pageSize from deps\n  // orderIndex is calculated inside cell renderer, doesn't need to be in deps\n  // handleActionClick has stable reference (no deps) - won't cause re-render\n  // Removed 'users' dependency - uses usersRef.current via getUserDisplayName instead\n  // This prevents entire table re-render when users object changes (loadData)\n\n  //  FUNKCE PRO ZVRAZNN VYHLEDVANHO TEXTU V PODDCCH\n  const highlightSearchText = useCallback((text, searchTerm) => {\n    if (!text || !searchTerm || typeof text !== 'string') return text;\n\n    const normalizedText = String(text);\n    const normalizedSearch = removeDiacritics(searchTerm.toLowerCase());\n\n    if (!normalizedSearch) return normalizedText;\n\n    // Najdi vechny vskyty vyhledvanho textu (bez diakritiky)\n    const textLower = removeDiacritics(normalizedText.toLowerCase());\n    const parts = [];\n    let lastIndex = 0;\n    let index = textLower.indexOf(normalizedSearch);\n\n    while (index !== -1) {\n      // Pidej text ped nalezenm vskytem\n      if (index > lastIndex) {\n        parts.push(\n          <span key={`text-${lastIndex}`}>\n            {normalizedText.substring(lastIndex, index)}\n          </span>\n        );\n      }\n\n      // Pidej zvraznn text\n      parts.push(\n        <mark\n          key={`highlight-${index}`}\n          style={{\n            backgroundColor: '#fef08a',\n            color: '#854d0e',\n            fontWeight: 600,\n            padding: '1px 2px',\n            borderRadius: '2px',\n            boxShadow: '0 0 0 1px rgba(133, 77, 14, 0.1)'\n          }}\n        >\n          {normalizedText.substring(index, index + normalizedSearch.length)}\n        </mark>\n      );\n\n      lastIndex = index + normalizedSearch.length;\n      index = textLower.indexOf(normalizedSearch, lastIndex);\n    }\n\n    // Pidej zbytek textu\n    if (lastIndex < normalizedText.length) {\n      parts.push(\n        <span key={`text-${lastIndex}`}>\n          {normalizedText.substring(lastIndex)}\n        </span>\n      );\n    }\n\n    return parts.length > 0 ? <>{parts}</> : normalizedText;\n  }, []);\n\n  // Get unique users for dropdowns from current orders data\n\n  //  REFACTORED: Filter function - rozdleno do modulrnch funkc\n  const filteredData = useMemo(() => {\n    const filtered = orders.filter(order => {\n      \n      // 1. \"Jen moje\" filtr\n      if (!filterMyOrders(order, showOnlyMyOrders, userDetail, currentUserId)) {\n        return false;\n      }\n\n      // 2a. Sloupcov filtry z hlaviky tabulky (textov)\n      if (!applyColumnFilters(order, columnFilters, getOrderDate, getOrderDisplayStatus, getUserDisplayName)) {\n        return false;\n      }\n\n      // 2b. Multiselect filtry z rozenho panelu (ID)\n      if (!applyColumnFilters(order, multiselectFilters, getOrderDate, getOrderDisplayStatus, getUserDisplayName)) {\n        return false;\n      }\n\n      // 3. Globln vyhledvn\n      if (!filterByGlobalSearch(order, globalFilter, getUserDisplayName, getOrderDisplayStatus)) {\n        return false;\n      }\n\n      // 4. Filtr podle statusu (pole stav)\n      if (!filterByStatusArray(order, statusFilter, getOrderSystemStatus)) {\n        return false;\n      }\n\n      // 5.  ODSTRANNO: Filtr archivovanch - u jsou vyfiltrovan spolenou funkc filterOrders()!\n      // if (!filterByArchived(order, showArchived, getOrderSystemStatus)) return false;\n\n      // 6. Filtr podle uivatele\n      if (!filterByUser(order, userFilter)) {\n        return false;\n      }\n\n      // 7. Filtr podle datovho rozmez\n      if (!filterByDateRange(order, dateFromFilter, dateToFilter, getOrderDate)) {\n        return false;\n      }\n\n      // 8. Filtr podle stky\n      if (!filterByAmountRange(order, amountFromFilter, amountToFilter)) {\n        return false;\n      }\n\n      // 9. Filtr podle registru smluv\n      if (!filterByRegistrStatus(order, filterMaBytZverejneno, filterByloZverejneno, getOrderWorkflowStatus)) {\n        return false;\n      }\n\n      // 10. Filtr podle mimodnch objednvek\n      if (filterMimoradneObjednavky) {\n        if (!order.mimoradna_udalost) {\n          return false;\n        }\n      }\n\n      // 11. Filtr podle faktur (min. 1 faktura)\n      if (filterWithInvoices) {\n        const faktury = order.faktury || [];\n        const fakturyCount = order.faktury_count || faktury.length || 0;\n        if (fakturyCount === 0) {\n          return false;\n        }\n      }\n\n      // 12. Filtr podle ploh (min. 1 ploha)\n      if (filterWithAttachments) {\n        const prilohy = order.prilohy || [];\n        const prilohyCount = order.prilohy_count || prilohy.length || 0;\n        if (prilohyCount === 0) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n\n    //  SORTING: Koncepty (drafty) vdy jako prvn\n    // Objednvky co nejsou jet uloen v DB (isDraft nebo je_koncept) zobrazit jako prvn dky\n    const sortedFiltered = filtered.sort((a, b) => {\n      const aIsDraft = a.isDraft || a.je_koncept || false;\n      const bIsDraft = b.isDraft || b.je_koncept || false;\n      \n      // Pokud jedna je draft a druh ne, draft je prvn\n      if (aIsDraft && !bIsDraft) return -1;\n      if (!aIsDraft && bIsDraft) return 1;\n      \n      // Jinak zachovat pvodn poad\n      return 0;\n    });\n\n    return sortedFiltered;\n  }, [\n    orders,\n    columnFilters,\n    multiselectFilters,\n    globalFilter,\n    statusFilter,\n    userFilter,\n    dateFromFilter,\n    dateToFilter,\n    amountFromFilter,\n    amountToFilter,\n    filterMaBytZverejneno,\n    filterByloZverejneno,\n    filterMimoradneObjednavky,\n    filterWithInvoices,\n    filterWithAttachments,\n    getOrderDate,\n    getUserDisplayName,\n    getOrderDisplayStatus,\n    getOrderSystemStatus,\n    showArchived,\n    showOnlyMyOrders,\n    userDetail,\n    currentUserId,\n    getOrderWorkflowStatus\n  ]);\n\n  //  DEBUG: Ulo filtered data pro test panel\n  useEffect(() => {\n    setApiTestData(prev => ({\n      ...prev,\n      filteredData: filteredData,\n      filteredCount: filteredData.length,\n      archivedInFiltered: filteredData.filter(o => getOrderSystemStatus(o) === 'ARCHIVOVANO').length,\n      nonArchivedInFiltered: filteredData.filter(o => getOrderSystemStatus(o) !== 'ARCHIVOVANO').length,\n      filterState: {\n        showArchived,\n        selectedYear,\n        selectedMonth,\n        canViewAllOrders: permissionsRef.current?.canViewAll,\n        currentUserId\n      }\n    }));\n  }, [filteredData, showArchived, selectedYear, selectedMonth, currentUserId, getOrderSystemStatus]);\n\n  //  SCROLL STATE: Obnov rozbalen objednvky A kdy je filteredData ready\n  useEffect(() => {\n    // Aktualizuj ref pro pouit v save useEffect\n    filteredDataRef.current = filteredData;\n\n    if (!pendingExpandedOrderIds.current || filteredData.length === 0) {\n      return;\n    }\n\n    // Pokej na render tabulky, pak rozbali objednvky podle ID\n    setTimeout(() => {\n      // Double-check e ref stle existuje (mohl bt vynulovn mezitm)\n      if (!pendingExpandedOrderIds.current || !Array.isArray(pendingExpandedOrderIds.current)) {\n        return;\n      }\n\n      const newExpanded = {};\n\n      // Najdi indexy objednvek podle ID\n      pendingExpandedOrderIds.current.forEach(orderId => {\n        const index = filteredData.findIndex(order => order.id === orderId);\n        if (index >= 0) {\n          newExpanded[index] = true;\n        }\n      });\n\n      if (Object.keys(newExpanded).length > 0) {\n        setExpanded(newExpanded);\n\n        //  INITIALIZATION: Ozna dokonen rozbalen\n        initStepsCompleted.current.expandedRestored = true;\n\n        // Ozna scroll jako \"pipraven\"\n        initStepsCompleted.current.scrollRestored = true;\n      } else {\n        // dn objednvky se nepodailo rozbalit\n        initStepsCompleted.current.expandedRestored = true;\n        initStepsCompleted.current.scrollRestored = true;\n      }\n\n      // Vyisti ref\n      pendingExpandedOrderIds.current = null;\n    }, 100); // Krtk ekn aby se stihla vykreslit tabulka\n  }, [filteredData]); // Spust se kdy je filteredData pipraven\n\n  //  INITIALIZATION: Kontroluj dokonen vech krok a skryj splash screen\n  //  REVERT: Vrcen pvodn polling pstup (funguje spolehliv)\n  // Event-driven pstup by vyadoval pepis vech mst kde se nastavuje initStepsCompleted.current\n  useEffect(() => {\n    const steps = initStepsCompleted.current;\n\n    // Kontroluj kadch 100ms jestli jsou vechny kroky hotov\n    const checkInterval = setInterval(() => {\n      if (steps.dataLoaded && steps.paginationRestored &&\n          steps.expandedRestored && steps.scrollRestored) {\n\n        // Zani fade-out\n        setSplashVisible(false);\n\n        // Po dokonen fade animace (200ms) ozna inicializaci jako hotovou\n        setTimeout(() => {\n          setInitializationComplete(true);\n        }, 200);\n\n        clearInterval(checkInterval);\n      }\n    }, 100);\n\n    // Cleanup\n    return () => clearInterval(checkInterval);\n  }, []); // Spust se jen jednou pi mount\n\n  // Debug log - upozornn na aktivn filtry bez vsledk\n  useEffect(() => {\n    const hasActiveFilters =\n      globalFilter ||\n      (Array.isArray(statusFilter) && statusFilter.length > 0) ||\n      userFilter ||\n      dateFromFilter ||\n      dateToFilter ||\n      amountFromFilter ||\n      amountToFilter ||\n      Object.values(columnFilters).some(val => val);\n\n    if (hasActiveFilters && orders.length > 0 && filteredData.length === 0) {\n      // Filter warning detection - filters are hiding all orders\n    }\n  }, [filteredData.length, orders.length, globalFilter, statusFilter, userFilter, dateFromFilter, dateToFilter, amountFromFilter, amountToFilter, columnFilters]);\n\n  // Funkce pro rozbalen/sbalen vech dk\n  const expandAllRows = () => {\n    table.toggleAllRowsExpanded(true);\n  };\n\n  const collapseAllRows = () => {\n    table.toggleAllRowsExpanded(false);\n  };\n\n  const toggleAllRows = () => {\n    const anyExpanded = table.getIsSomeRowsExpanded();\n    table.toggleAllRowsExpanded(!anyExpanded);\n  };\n\n  // Table instance\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getExpandedRowModel: getExpandedRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    enableExpanding: true,\n    getRowCanExpand: () => true,\n    enableRowSelection: true,\n    manualPagination: false,\n    state: {\n      sorting,\n      expanded,\n      rowSelection,\n      pagination: {\n        pageSize: pageSize,\n        pageIndex: currentPageIndex,\n      },\n    },\n    onSortingChange: setSorting,\n    onExpandedChange: setExpanded,\n    onRowSelectionChange: setRowSelection,\n  });\n\n  //  OPTIMALIZACE: Odstrann redundantn useEffect pro table.setPageSize/Index\n  // React Table automaticky reaguje na zmny v state.pagination prop\n  // Manuln nastavovn zpsobovalo potenciln race conditions\n\n  //  OPTIMALIZACE: sorting useEffect byl pesunut do batch localStorage updatu ve\n\n  // Reset to first page if current page is out of bounds - sleduj jen data length\n  const pageCount = Math.max(1, Math.ceil(filteredData.length / pageSize));\n  useEffect(() => {\n    const maxPageIndex = pageCount - 1;\n    if (currentPageIndex > maxPageIndex && maxPageIndex >= 0) {\n      setCurrentPageIndex(0);\n      setUserStorage('orders25List_pageIndex', 0);\n      // React Table automaticky reaguje na zmnu state.pagination.pageIndex\n    }\n  }, [pageCount, currentPageIndex, pageSize]); //  Bez 'table' a 'filteredData'\n\n  //  Floating header intersection observer - aktivuje se kdy jsou data naten a tabulka vykreslen\n  useEffect(() => {\n    // Dokud se nataj data nebo nejsou dn data, observer neb\n    if (loading || filteredData.length === 0) {\n      setShowFloatingHeader(false);\n      return;\n    }\n    \n    // Ov e tabulka je vykreslen v DOM\n    if (!tableRef.current) {\n      setShowFloatingHeader(false);\n      return;\n    }\n    \n    const thead = tableRef.current.querySelector('thead');\n    if (!thead) {\n      setShowFloatingHeader(false);\n      return;\n    }\n    \n    const appHeaderHeight = 96;\n    const menuBarHeight = 48;\n    const totalHeaderHeight = appHeaderHeight + menuBarHeight;\n    \n    let previousShowState = false;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        const theadBottom = entry.boundingClientRect.bottom;\n        const shouldShow = theadBottom < totalHeaderHeight;\n        \n        // Track floating header state globally for DatePicker scroll handlers\n        window.__floatingHeaderVisible = shouldShow;\n        \n        // Close dropdowns only when floating header visibility actually changes\n        if (shouldShow !== previousShowState) {\n          window.dispatchEvent(new Event('closeAllDatePickers'));\n          previousShowState = shouldShow;\n        }\n        \n        setShowFloatingHeader(shouldShow);\n      },\n      { threshold: 0 }\n    );\n    \n    observer.observe(thead);\n    \n    return () => {\n      observer.disconnect();\n    };\n  }, [loading, filteredData.length, tableRef.current]); // Pidn tableRef.current do dependencies\n\n  // Pagination navigation helpers - pm funkce bez memoizace (table se mn kad render)\n  const goToFirstPage = () => {\n    saveCurrentScrollState();\n    setCurrentPageIndex(0);\n    setUserStorage('orders25List_pageIndex', 0);\n  };\n\n  const goToPreviousPage = () => {\n    saveCurrentScrollState();\n    const newIndex = Math.max(0, currentPageIndex - 1);\n    setCurrentPageIndex(newIndex);\n    setUserStorage('orders25List_pageIndex', newIndex);\n  };\n\n  const goToNextPage = () => {\n    saveCurrentScrollState();\n    const newIndex = Math.min(pageCount - 1, currentPageIndex + 1);\n    setCurrentPageIndex(newIndex);\n    setUserStorage('orders25List_pageIndex', newIndex);\n  };\n\n  const goToLastPage = () => {\n    saveCurrentScrollState();\n    const lastIndex = pageCount - 1;\n    setCurrentPageIndex(lastIndex);\n    setUserStorage('orders25List_pageIndex', lastIndex);\n  };\n\n  // Permission checks\n  const canEdit = (order) => {\n    if (!hasPermission) return false;\n\n    // Koncepty me editovat kad kdo m zkladn prva (je to jeho vlastn koncept)\n    if (order.isDraft || order.je_koncept) {\n      return hasPermission('ORDER_EDIT_ALL') || hasPermission('ORDER_EDIT_OWN');\n    }\n\n    // Uivatel s ORDER_*_ALL oprvnnmi mohou editovat vechny objednvky\n    if (hasPermission('ORDER_EDIT_ALL') || hasPermission('ORDER_MANAGE')) {\n      // hasPermission('ORDER_OLD') - ORDER_OLD je pouze pro star systm (Orders.js)\n      return true;\n    }\n\n    // Uivatel s ORDER_*_OWN oprvnnmi (vetn ORDER_2025) mohou editovat pouze sv objednvky\n    //  FIX: Pouij currentUserId (number) msto user_id (string)\n    if (hasPermission('ORDER_EDIT_OWN') || hasPermission('ORDER_2025')) {\n      return order.objednatel_id === currentUserId ||\n             order.uzivatel_id === currentUserId ||\n             order.garant_uzivatel_id === currentUserId ||\n             order.schvalovatel_id === currentUserId;\n    }\n\n    return false;\n  };\n\n  const canDelete = (order) => {\n    if (!hasPermission) return false;\n\n    // Zakzat smazn pro objednvky v editaci/konceptu\n    if (order.isDraft || order.je_koncept || order.hasLocalDraftChanges) return false;\n\n    // Importovan objednvky (ARCHIVOVANO) mohou mazat pouze ORDER_MANAGE a ORDER_DELETE_ALL\n    if (order.stav_objednavky === 'ARCHIVOVANO') {\n      return hasPermission('ORDER_MANAGE') || hasPermission('ORDER_DELETE_ALL');\n    }\n\n    // Uivatel s ORDER_*_ALL oprvnnmi mohou mazat vechny objednvky\n    if (hasPermission('ORDER_DELETE_ALL') || hasPermission('ORDER_MANAGE')) {\n      // hasPermission('ORDER_OLD') - ORDER_OLD je pouze pro star systm (Orders.js)\n      return true;\n    }\n\n    // Uivatel s ORDER_*_OWN oprvnnmi (vetn ORDER_2025) mohou mazat pouze sv objednvky\n    //  FIX: Pouij currentUserId (number) msto user_id (string)\n    if (hasPermission('ORDER_DELETE_OWN') || hasPermission('ORDER_2025')) {\n      return order.objednatel_id === currentUserId ||\n             order.uzivatel_id === currentUserId ||\n             order.garant_uzivatel_id === currentUserId ||\n             order.schvalovatel_id === currentUserId;\n    }\n\n    return false;\n  };\n\n  const canExportDocument = (order) => {\n    //  Generovn DOCX: od fze ROZPRACOVANA a do DOKONCENA (dle WorkflowManager fze 3-8)\n    if (!order) return false;\n\n    //  POVOLEN STAVY: Od ROZPRACOVANA a do DOKONCENA\n    //  SCHVALENA NEN POVOLENA - mus nsledovat ROZPRACOVANA nebo vy fze!\n    // Podle WorkflowManager mappingu:\n    // - FZE 3: ROZPRACOVANA (START - zaalo se pracovat)\n    // - FZE 4: POTVRZENA, ODESLANA\n    // - FZE 5-7: UVEREJNIT, UVEREJNENA, NEUVEREJNIT, FAKTURACE, VECNA_SPRAVNOST\n    // - FZE 8: DOKONCENA, ZKONTROLOVANA\n    const allowedStates = [\n      'ROZPRACOVANA',     //  FZE 3 - START (zaalo se vyplovat)\n      //  'SCHVALENA' - pouze schvleno, ale jet se nezaalo pracovat\n      'POTVRZENA',        //  FZE 4\n      'ODESLANA',         //  FZE 4\n      'UVEREJNIT',        //  FZE 5\n      'UVEREJNENA',       //  FZE 6\n      'NEUVEREJNIT',      //  FZE 6\n      'FAKTURACE',        //  FZE 6\n      'VECNA_SPRAVNOST',  //  FZE 7\n      'DOKONCENA',        //  FZE 8 - KONEC\n      'ZKONTROLOVANA',    //  FZE 8\n      'CEKA_SE'           //  Speciln stav - ek se na dodavatele\n    ];\n\n    //  KONTROLUJ ZDA POLE WORKFLOW STAV OBSAHUJE ALESPO JEDEN POVOLEN STAV\n    let workflowStates = [];\n    let aktualniStav = null;\n    let nazevStavu = '';\n\n    try {\n      // Priorita 1: stav_workflow_kod (pole stav - KONTROLUJ OBSAH, ne jen posledn!)\n      if (order.stav_workflow_kod) {\n        //  FIX: Me bt U ARRAY nebo STRING\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n\n        // Vezmi posledn stav pro zobrazen v debug logu\n        if (workflowStates.length > 0) {\n          const lastState = workflowStates[workflowStates.length - 1];\n          if (typeof lastState === 'object' && (lastState.kod_stavu || lastState.nazev_stavu)) {\n            aktualniStav = lastState.kod_stavu || lastState.nazev_stavu;\n            nazevStavu = lastState.nazev_stavu || lastState.kod_stavu || '';\n          } else if (typeof lastState === 'string') {\n            aktualniStav = lastState;\n            nazevStavu = lastState;\n          }\n        }\n      }\n\n      // Priorita 2: fallback na jin pole stavu\n      if (!aktualniStav) {\n        aktualniStav = order.stav_id_num || order.stav_id || order.stav || order.nazev_stavu;\n        nazevStavu = order.nazev_stavu || order.status_name || aktualniStav;\n      }\n    } catch (error) {\n      aktualniStav = order.stav_id_num || order.stav_id || order.nazev_stavu;\n      nazevStavu = order.nazev_stavu || '';\n      workflowStates = [];\n    }\n\n    //  KONTROLA: Obsahuje pole workflow stav ALESPO JEDEN povolen stav?\n    const canGenerate = workflowStates.some(state => {\n      // Normalizuj stav (me bt string nebo objekt)\n      let stavCode = '';\n      if (typeof state === 'object' && (state.kod_stavu || state.nazev_stavu)) {\n        stavCode = String(state.kod_stavu || state.nazev_stavu).toUpperCase().trim();\n      } else if (typeof state === 'string') {\n        stavCode = String(state).toUpperCase().trim();\n      }\n\n      return allowedStates.includes(stavCode);\n    });\n\n    return canGenerate;\n  };\n\n  /**\n   *  Kontrola zda lze evidovat fakturu k objednvce\n   * Od stavu ROZPRACOVANA ve\n   */\n  const canCreateInvoice = (order) => {\n    if (!order) return false;\n\n    //  POVOLEN STAVY: Od ROZPRACOVANA a do DOKONCENA\n    // FZE 3-8 dle WorkflowManager\n    const allowedStates = [\n      'ROZPRACOVANA',     //  FZE 3 - zaalo se vyplovat\n      'ODESLANA',         //  FZE 4 - objednvka byla odeslna\n      'ODESLANO',         //  FZE 4 - alternativn oznaen\n      'POTVRZENA',        //  FZE 4 - dodavatel potvrdil\n      'UVEREJNIT',        //  FZE 5 - ek na zveejnn\n      'NEUVEREJNIT',      //  FZE 6 - nezveejnno v registru, ale platn obj.\n      'UVEREJNENA',       //  FZE 6 - zveejnno v registru\n      'FAKTURACE',        //  FZE 6 - probh fakturace\n      'VECNA_SPRAVNOST',  //  FZE 7 - kontrola vcn sprvnosti\n      'ZKONTROLOVANA',    //  FZE 8 - zkontrolovna\n      'DOKONCENA',        //  FZE 8 - dokoneno\n      'CEKA_SE'           //  Speciln stav - ek se na dodavatele\n    ];\n\n    //  NEPLATN STAVY (stornovan/zamtnut)\n    const invalidStates = ['STORNOVANA', 'ZAMITNUTA'];\n\n    let workflowStates = [];\n    try {\n      if (order.stav_workflow_kod) {\n        if (Array.isArray(order.stav_workflow_kod)) {\n          workflowStates = order.stav_workflow_kod;\n        } else if (typeof order.stav_workflow_kod === 'string') {\n          workflowStates = JSON.parse(order.stav_workflow_kod);\n          if (!Array.isArray(workflowStates)) {\n            workflowStates = [];\n          }\n        }\n      }\n    } catch (error) {\n      workflowStates = [];\n    }\n\n    //  Zkontroluj zda nen stornovan/zamtnut\n    const hasInvalidState = workflowStates.some(state => {\n      let stavCode = '';\n      if (typeof state === 'object' && (state.kod_stavu || state.nazev_stavu)) {\n        stavCode = String(state.kod_stavu || state.nazev_stavu).toUpperCase().trim();\n      } else if (typeof state === 'string') {\n        stavCode = String(state).toUpperCase().trim();\n      }\n      return invalidStates.includes(stavCode);\n    });\n\n    if (hasInvalidState) {\n      return false;\n    }\n\n    //  Zkontroluj zda obsahuje alespo jeden platn stav\n    const hasValidState = workflowStates.some(state => {\n      let stavCode = '';\n      if (typeof state === 'object' && (state.kod_stavu || state.nazev_stavu)) {\n        stavCode = String(state.kod_stavu || state.nazev_stavu).toUpperCase().trim();\n      } else if (typeof state === 'string') {\n        stavCode = String(state).toUpperCase().trim();\n      }\n      return allowedStates.includes(stavCode);\n    });\n\n    return hasValidState;\n  };\n\n  // Funkce pro vbr ablon - nabdni VECHNY aktivn ablony (stejn jako v jednotlivm dialogu)\n  const getTemplateOptions = (order) => {\n    if (!order) return [];\n\n    // Pokud nejsou naten ablony z API, vra przdn pole\n    if (!docxTemplates || docxTemplates.length === 0) {\n      console.warn(' [DOCX] ablony nejsou naten pro order:', order.cislo_objednavky);\n      return [];\n    }\n\n    // Mapuj VECHNY ablony na formt pro select (bez filtrovn!)\n    const options = docxTemplates.map(template => ({\n      value: template.kod || template.id,\n      label: template.nazev || template.kod || 'Bez nzvu'\n    }));\n\n    return options;\n  };\n\n  // Handlers\n  const handleExportDocument = async (order) => {\n    try {\n      //  Pedej enriched data pmo do dialogu (u jsou v order objektu!)\n      setDocxModalOrder(order);\n      setDocxModalOpen(true);\n\n    } catch (error) {\n      console.error(' [Orders25List] Chyba pi otevrn DOCX dialogu:', error);\n      showToast?.(`Chyba pi otevrn DOCX genertoru: ${error.message}`, { type: 'error' });\n    }\n  };\n  const handleEdit = async (order) => {\n    //  KONCEPT vs EDITACE - KRITICK ROZLIEN!\n    //\n    // KONCEPT (isDraft === true):\n    //   - Objekt NEN V DATABZI\n    //   - Je uloen POUZE v localStorage (order25DraftStorageService)\n    //   - URL: /order-form-25?mode=concept\n    //   - Stav: \"Koncept\" (NIKDY ne \"Editace\"!)\n    //\n    // EDITACE (hasLocalDraftChanges === true):\n    //   - Objekt JE V DATABZI (m objednavka_id)\n    //   - M uloen zmny v localStorage\n    //   - URL: /order-form-25?edit=<objednavka_id>\n    //   - Stav: \"Editace\"\n\n    //  KONCEPT - pokraovat v tvorb nov objednvky (nen v DB)\n    if (order.isDraft && !order.objednavka_id) {\n      navigate(`/order-form-25?mode=concept`);\n      return;\n    }\n\n    //  EDITACE - pokraovat v editaci existujc DB objednvky (m lokln zmny)\n    if (order.hasLocalDraftChanges && order.objednavka_id) {\n      //  ZVRAZNN: Ulo ID objednvky pro zvraznn pi nvratu na seznam\n      try {\n        draftManager.setCurrentUser(user_id);\n        draftManager.saveUIState({ \n          highlightOrderId: order.objednavka_id,\n          editOrderId: order.objednavka_id \n        });\n      } catch (e) {\n        console.error(' Chyba pi ukldn highlightOrderId:', e);\n      }\n      \n      navigate(`/order-form-25?edit=${order.objednavka_id}`);\n      return;\n    }\n\n    //  KONTROLA ZAMEN - PRVN VC PED NATNM DAT!\n    // Nati aktuln data z DB pro kontrolu lock_info (BE vrac lock_info v orders25/by-id)\n    const orderIdToCheck = order.id || order.objednavka_id;\n\n    try {\n      //  V2 API\n      const dbOrder = await getOrderV2(\n        orderIdToCheck,\n        token,\n        username,\n        true // enriched = true\n      );\n\n      if (!dbOrder) {\n        showToast('Nepodailo se nast objednvku z databze', { type: 'error' });\n        return;\n      }\n\n      //  NOV LOGIKA podle BE dokumentace (24.10.2025):\n      // BE vrac locked: true POUZE kdy je zamen JINM uivatelem\n      // locked: false znamen \"mu editovat\" (voln NEBO moje zamen)\n\n      //   orderId: orderIdToCheck,\n      //   locked: dbOrder.lock_info?.locked,\n      //   lock_status: dbOrder.lock_info?.lock_status,\n      //   is_owned_by_me: dbOrder.lock_info?.is_owned_by_me,\n      //   locked_by: dbOrder.lock_info?.locked_by_user_fullname\n      // });\n\n      //  JEDNODUCH kontrola podle nov BE smantiky\n      //  Blokuj pouze pokud locked=true A NEN mj zmek A NEN expired (>15 min)\n      if (dbOrder.lock_info?.locked === true && !dbOrder.lock_info?.is_owned_by_me && !dbOrder.lock_info?.is_expired) {\n        //  Zamen JINM uivatelem - ZOBRAZ dialog a BLOKUJ editaci\n        const lockInfo = dbOrder.lock_info;\n        const lockedByUserName = lockInfo.locked_by_user_fullname || `uivatel #${lockInfo.locked_by_user_id}`;\n\n        // Zjisti, zda m uivatel prvo na force unlock (SUPERADMIN nebo ADMINISTRATOR)\n        const canForceUnlock = userDetail?.roles?.some(role =>\n          role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR'\n        );\n        // Ulo info o zamen vetn kontaktnch daj (24.10.2025 - rozen lock_info)\n        setLockedOrderInfo({\n          lockedByUserName,\n          lockedByUserEmail: lockInfo.locked_by_user_email || null,\n          lockedByUserTelefon: lockInfo.locked_by_user_telefon || null,\n          lockedAt: lockInfo.locked_at || null,\n          lockAgeMinutes: lockInfo.lock_age_minutes || null,\n          canForceUnlock,\n          orderId: orderIdToCheck,\n          userRoleName: userDetail?.roles?.find(r => r.kod_role === 'SUPERADMIN' || r.kod_role === 'ADMINISTRATOR')?.nazev_role || 'administrtor'\n        });\n        setOrderToEdit(order); // Ulo pro pozdj pouit\n        setShowLockedOrderDialog(true);\n        return; // ZASTAVIT - ekme na rozhodnut uivatele\n      } else {\n        //  locked === false znamen mu editovat (voln NEBO moje zamen)\n      }\n    } catch (error) {\n      showToast('Chyba pi kontrole dostupnosti objednvky', { type: 'error' });\n      return;\n    }\n\n    // Zkontroluj, jestli existuje validn koncept (pro rozhodnut o confirm dialogu) - DRAFT MANAGER\n    draftManager.setCurrentUser(user_id);\n    const hasDraft = await draftManager.hasDraft();\n\n    let shouldShowConfirmDialog = false;\n    let draftDataToStore = null;\n    let isDraftForThisOrder = false; //  NOV FLAG\n\n    if (hasDraft) {\n      try {\n        const draftData = await draftManager.loadDraft();\n\n        //  KONTROLA OWNERSHIP: Pat draft k TTO objednvce?\n        const draftOrderId = draftData.savedOrderId || draftData.formData?.id;\n        const currentOrderId = order.id;\n\n        //  Pokud draft pat k TTO objednvce, NEPTAT SE!\n        if (draftOrderId && currentOrderId && String(draftOrderId) === String(currentOrderId)) {\n          shouldShowConfirmDialog = false; // Draft pat k tto objednvce - pouij ho tie\n          isDraftForThisOrder = true; //  OZNAIT e draft je pro tuto objednvku\n        } else {\n          //  Draft pat k JIN objednvce - zeptej se\n          const hasNewConcept = isValidConcept(draftData);\n          const hasDbChanges = hasDraftChanges(draftData);\n          shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n          if (shouldShowConfirmDialog) {\n            draftDataToStore = draftData; // Ulo pro zobrazen v modalu\n          }\n        }\n\n      } catch (error) {\n        shouldShowConfirmDialog = false;\n      }\n    }\n\n    //  OPTIMALIZACE: Pokud draft pat k TTO objednvce, rovnou naviguj bez reload\n    if (isDraftForThisOrder) {\n      //  ZVRAZNN: Ulo ID objednvky pro zvraznn pi nvratu na seznam\n      try {\n        draftManager.setCurrentUser(user_id);\n        draftManager.saveUIState({ \n          highlightOrderId: order.id,\n          editOrderId: order.id \n        });\n      } catch (e) {\n        console.error(' Chyba pi ukldn highlightOrderId:', e);\n      }\n      \n      // Draft u existuje pro tuto objednvku - pouze naviguj na formul\n      // NEMAZAT draft, NENATAT znovu z DB\n      navigate(`/order-form-25?edit=${order.id}`);\n      return;\n    }\n\n    // KONTROLA: Pokud je objednvka ARCHIVOVANO a zrove existuje koncept\n    if (order.stav_objednavky === 'ARCHIVOVANO' && shouldShowConfirmDialog) {\n      setCurrentDraftData(draftDataToStore);\n      setOrderToEdit(order);\n      setShowArchivedWithDraftWarningModal(true); // Zobraz KOMBINOVAN modal\n      return;\n    }\n\n    // KONTROLA: Pokud je objednvka ARCHIVOVANO (bez konceptu)\n    if (order.stav_objednavky === 'ARCHIVOVANO') {\n      setOrderToEdit(order);\n      setShowArchivedWarningModal(true);\n      return;\n    }\n\n    // Rozhodni, zda zobrazit confirm dialog nebo editovat rovnou\n    if (shouldShowConfirmDialog) {\n      setCurrentDraftData(draftDataToStore); // Ulo draft data\n      setOrderToEdit(order); // Nastav pro modal\n      setShowEditConfirmModal(true);\n    } else {\n      handleEditConfirm(order); // Pedej order pmo\n    }\n  };\n\n  // Handler pro KOMBINOVAN modal (archivovno + draft)\n  const handleArchivedWithDraftConfirm = () => {\n    // 1. Zavi kombinovan modal\n    setShowArchivedWithDraftWarningModal(false);\n\n    // 2. Sma existujc draft z localStorage - DRAFT MANAGER\n    draftManager.setCurrentUser(user_id);\n    draftManager.deleteDraft();\n\n    // 3. Edituj archivovanou objednvku (s parametrem archivovano=1)\n    if (orderToEdit) {\n      handleEditConfirm(orderToEdit);\n    }\n  };\n\n  const handleArchivedWarningConfirm = async () => {\n    // Zavi archivovan warning modal\n    setShowArchivedWarningModal(false);\n\n    // Pokrauj v normlnm edit flow - zkontroluj, jestli existuje koncept - DRAFT MANAGER\n    draftManager.setCurrentUser(user_id);\n    const hasDraft = await draftManager.hasDraft();\n\n    let shouldShowConfirmDialog = false;\n    let isDraftForThisOrder = false; //  NOV FLAG\n\n    if (hasDraft) {\n      try {\n        const draftData = await draftManager.loadDraft();\n\n        //  KONTROLA OWNERSHIP: Pat draft k TTO objednvce?\n        const draftOrderId = draftData.savedOrderId || draftData.formData?.id;\n        const currentOrderId = orderToEdit?.id;\n\n        //  Pokud draft pat k TTO objednvce, NEPTAT SE!\n        if (draftOrderId && currentOrderId && String(draftOrderId) === String(currentOrderId)) {\n          shouldShowConfirmDialog = false; // Draft pat k tto objednvce - pouij ho tie\n          isDraftForThisOrder = true; //  OZNAIT e draft je pro tuto objednvku\n        } else {\n          //  Draft pat k JIN objednvce - zeptej se\n          const hasNewConcept = isValidConcept(draftData);\n          const hasDbChanges = hasDraftChanges(draftData);\n          shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n        }\n      } catch (error) {\n        shouldShowConfirmDialog = false;\n      }\n    }\n\n    //  OPTIMALIZACE: Pokud draft pat k TTO objednvce, rovnou naviguj bez reload\n    if (isDraftForThisOrder && orderToEdit) {\n      //  ZVRAZNN: Ulo ID objednvky pro zvraznn pi nvratu na seznam\n      try {\n        draftManager.setCurrentUser(user_id);\n        draftManager.saveUIState({ \n          highlightOrderId: orderToEdit.id,\n          editOrderId: orderToEdit.id \n        });\n      } catch (e) {\n        console.error(' Chyba pi ukldn highlightOrderId:', e);\n      }\n      \n      // Draft u existuje pro tuto objednvku - pouze naviguj na formul\n      navigate(`/order-form-25?edit=${orderToEdit.id}&archivovano=1`);\n      return;\n    }\n\n    // Rozhodni, zda zobrazit confirm dialog nebo editovat rovnou\n    if (shouldShowConfirmDialog) {\n      setShowEditConfirmModal(true);\n    } else {\n      handleEditConfirm(orderToEdit);\n    }\n  };\n\n  const handleEditConfirm = async (orderParam = null) => {\n\n    // Pokud orderParam je SyntheticEvent (z onClick), ignoruj ho a pouij orderToEdit ze state\n    let orderToUse = orderToEdit;\n    if (orderParam && orderParam.id && !orderParam.type) { // orderParam je skuten objednvka, ne event\n      orderToUse = orderParam;\n    }\n\n    if (!orderToUse) {\n      return;\n    }\n\n    try {\n      const orderIdToLoad = orderToUse.id || orderToUse.objednavka_id;\n\n      if (!orderIdToLoad) {\n        showToast('Chyba: Nelze urit ID objednvky', { type: 'error' });\n        return;\n      }\n\n      // Nati aktuln data z DB -  V2 API\n      const dbOrder = await getOrderV2(\n        orderIdToLoad,\n        token,\n        username,\n        true // enriched = true\n      );\n\n      if (!dbOrder) {\n        showToast('Nepodailo se nast objednvku z databze', { type: 'error' });\n        return;\n      }\n\n      //  Zamkni objednvku pro editaci (kontrola zamen u byla provedena v handleEdit)\n      try {\n        const lockResult = await lockOrder25({ token, username, orderId: orderIdToLoad });\n        if (lockResult.success) {\n        }\n      } catch (lockError) {\n        //\n        // Pokrauj i kdy sele zamykn (kontrola u byla provedena v handleEdit)\n      }\n\n      // Nati detaily objednatele z DB pes jeho ID\n      let objednatelDetails = null;\n\n      if (dbOrder.objednatel_id) {\n        try {\n          const { getUserDetailApi2 } = await import('../services/api2auth');\n          objednatelDetails = await getUserDetailApi2(username, token, dbOrder.objednatel_id);\n        } catch (error) {\n          // DLEIT: Pokud nelze nast detaily, zkusme najt uivatele v existujcm seznamu\n          objednatelDetails = null;\n        }\n      } else {\n      }\n\n      let cleanedKeys = [];\n\n      // Vyisti vechny star koncepty\n      for (let i = localStorage.length - 1; i >= 0; i--) {\n        const key = localStorage.key(i);\n        if (key && (\n          key.startsWith('orderForm25_') ||\n          key.startsWith('order25_draft_') ||  // ORDER25 STANDARD\n          key.startsWith('order25-draft-') ||  // LEGACY cleanup\n          key.startsWith('orderForm25-') ||\n          key.includes('draft') && key.includes('order')\n        )) {\n          localStorage.removeItem(key);\n          cleanedKeys.push(key);\n        }\n      }\n\n      // Vytvo koncept s erstvmi daty z DB\n      const orderId = dbOrder.id;\n\n      // Vytvo sprvn daje objednatele z natench detail z DB\n      let objednatelData = {\n        objednatel_id: dbOrder.objednatel_id || user_id,\n        jmeno: 'Neuvedeno',\n        email: '',\n        telefon: ''\n      };\n\n      if (objednatelDetails) {\n        // Pouij detaily naten z DB podle objednatel_id\n        const jmeno = `${objednatelDetails.titul_pred ? objednatelDetails.titul_pred + ' ' : ''}${objednatelDetails.jmeno || ''} ${objednatelDetails.prijmeni || ''}${objednatelDetails.titul_za ? ', ' + objednatelDetails.titul_za : ''}`.replace(/\\s+/g, ' ').trim();\n        objednatelData = {\n          objednatel_id: dbOrder.objednatel_id,\n          jmeno: jmeno || 'Neuvedeno',\n          email: objednatelDetails.email || '',\n          telefon: objednatelDetails.telefon || ''\n        };\n      } else if (dbOrder.objednatel_id) {\n      }\n\n      // Analza workflow stavu a nastaven checkbox\n      const hasWorkflowState = (workflowCode, state) => {\n        if (!workflowCode) return false;\n        try {\n          if (typeof workflowCode === 'string' && workflowCode.startsWith('[')) {\n            const states = JSON.parse(workflowCode);\n            return Array.isArray(states) && states.includes(state);\n          }\n          return String(workflowCode).includes(state);\n        } catch {\n          return String(workflowCode).includes(state);\n        }\n      };\n\n      // Analza workflow stavu pro sprvn nastaven UI\n      const isSchvalena = hasWorkflowState(dbOrder.stav_workflow_kod, 'SCHVALENA');\n      const isOdeslana = hasWorkflowState(dbOrder.stav_workflow_kod, 'ODESLANA');\n      const isZrusena = hasWorkflowState(dbOrder.stav_workflow_kod, 'ZRUSENA');\n      const isZamitnuta = hasWorkflowState(dbOrder.stav_workflow_kod, 'ZAMITNUTA');\n      const isCekaSe = hasWorkflowState(dbOrder.stav_workflow_kod, 'CEKA_SE');\n\n      // Odvozen UI stav ze workflow\n      let stavSchvaleni = dbOrder.stav_schvaleni || ''; // Zachovat pvodn nebo przdn\n      if (isSchvalena) {\n        stavSchvaleni = 'schvaleno';\n      } else if (isZamitnuta) {\n        stavSchvaleni = 'neschvaleno';\n      } else if (isCekaSe) {\n        stavSchvaleni = 'ceka_se';\n      }\n\n      // DEBUG: Kontrola ev_cislo ped vytvoenm draftu\n      const finalEvCislo = dbOrder.cislo_objednavky || dbOrder.ev_cislo || 'CHYBA: Chyb slo v DB!';\n\n      const freshDraft = {\n        formData: {\n          ...dbOrder, // erstv data z DB\n          uzivatel_id: user_id, // Souasn uivatel co edituje\n          // KRITICK: Sprvn mapovn sla objednvky pro frontend\n          ev_cislo: dbOrder.cislo_objednavky || dbOrder.ev_cislo || 'CHYBA: Chyb slo v DB!',\n          // Sprvn nastaven UI prvk podle workflow stavu\n          stav_schvaleni: stavSchvaleni, // Odvozeno ze workflow\n          stav_odeslano: isOdeslana,     // Checkbox \"Odeslno\"\n          stav_stornovano: isZrusena,    // Checkbox \"Stornovno\"\n          // EXPLICITN pepsat daje objednatele z API (aby nepepsaly star data z dbOrder)\n          ...(objednatelData && {\n            objednatel_id: objednatelData.objednatel_id,\n            jmeno: objednatelData.jmeno,\n            email: objednatelData.email,\n            telefon: objednatelData.telefon\n          })\n        },\n        timestamp: Date.now(),\n        version: '1.4',\n        isConceptSaved: true,\n        isChanged: false, // Synchronn s DB\n        isOrderSavedToDB: true,\n        savedOrderId: orderId,\n        attachments: []\n      };\n\n      // Ulo koncept s DB daty\n      setUserStorage('order25-draft', freshDraft);\n\n      // Odeli broadcast udlost pro aktualizaci menubar\n      broadcastDraftUpdated(user_id, freshDraft);\n\n      //  EXPLICITN REFRESH MENUBAR: Oznm MenuBaru o naten objednvky pro editaci\n      window.dispatchEvent(new CustomEvent('orderDraftChange', {\n        detail: {\n          hasDraft: true,\n          isEditMode: true, // EDITACE objednvky (ne koncept)\n          orderId: orderId,\n          orderNumber: finalEvCislo,\n          isLoading: false\n        }\n      }));\n\n      //  ZVRAZNN: Ulo ID objednvky pro zvraznn pi nvratu na seznam\n      try {\n        draftManager.setCurrentUser(user_id);\n        draftManager.saveUIState({ \n          highlightOrderId: orderId,\n          editOrderId: orderId \n        });\n      } catch (e) {\n        console.error(' Chyba pi ukldn highlightOrderId:', e);\n      }\n\n      // Pouij React Router s edit parametrem pro naten objednvky do editace\n      navigate(`/order-form-25?edit=${orderId}&archivovano=1`);\n\n    } catch (error) {\n      showToast('Chyba pi natn objednvky z databze', { type: 'error' });\n    }\n\n    setShowEditConfirmModal(false);\n    setOrderToEdit(null);\n  };\n\n  const handleEditCancel = () => {\n    // Jen zavi modal bez mazn koncept\n    // Uivatel zstane na seznamu objednvek a zachovaj se jeho rozepsan zmny\n    setShowEditConfirmModal(false);\n    setOrderToEdit(null);\n    setCurrentDraftData(null);\n  };\n\n  const handleView = (order) => {\n    // TODO: Implement preview\n\n  };\n\n  const handleFinancialControl = async (order) => {\n    try {\n      // Zkontroluj stav objednvky pomoc getOrderSystemStatus\n      const systemStatus = getOrderSystemStatus(order);\n      if (systemStatus !== 'DOKONCENA') {\n        showToast?.('Finann kontrola je dostupn pouze pro dokonen objednvky', { type: 'warning' });\n        return;\n      }\n\n      // Otevi modal s PDF nhledem\n      setFinancialControlOrder(order);\n      setFinancialControlModalOpen(true);\n    } catch (error) {\n      console.error(' [Orders25List] Chyba pi otevrn finann kontroly:', error);\n      showToast?.(`Chyba pi otevrn finann kontroly: ${error.message}`, { type: 'error' });\n    }\n  };\n\n  //  Handler pro scroll ipky - scrolluj o ku viewportu\n  const handleScrollLeft = () => {\n    const tableContainer = tableRef.current;\n    if (!tableContainer) return;\n\n    // Scrolluj o 80% ky containeru doleva\n    const scrollAmount = tableContainer.clientWidth * 0.8;\n    tableContainer.scrollBy({\n      left: -scrollAmount,\n      behavior: 'smooth'\n    });\n  };\n\n  const handleScrollRight = () => {\n    const tableContainer = tableRef.current;\n    if (!tableContainer) return;\n\n    // Scrolluj o 80% ky containeru doprava\n    const scrollAmount = tableContainer.clientWidth * 0.8;\n    tableContainer.scrollBy({\n      left: scrollAmount,\n      behavior: 'smooth'\n    });\n  };\n\n  // Handler pro vytvoen nov objednvky z action menu\n  const handleCreateNewOrder = async () => {\n    // Zkontroluj, jestli existuje aktivn koncept nebo editace - DRAFT MANAGER\n    draftManager.setCurrentUser(user_id);\n    const hasDraft = await draftManager.hasDraft();\n\n    let shouldShowConfirmDialog = false;\n    let draftDataToStore = null;\n\n    if (hasDraft) {\n      try {\n        const draftData = await draftManager.loadDraft();\n        const hasNewConcept = isValidConcept(draftData);\n        const hasDbChanges = hasDraftChanges(draftData);\n        shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n        if (shouldShowConfirmDialog) {\n          draftDataToStore = draftData; // Ulo pro zobrazen v modalu\n        }\n      } catch (error) {\n        shouldShowConfirmDialog = false;\n      }\n    }\n\n    // Pokud existuje aktivn koncept/editace, zobraz confirm dialog\n    if (shouldShowConfirmDialog) {\n      setCurrentDraftData(draftDataToStore); // Ulo draft data pro modal\n      setOrderToEdit(null); // dn konkrtn objednvka - vytvme novou\n      setShowEditConfirmModal(true);\n    } else {\n      // Rovnou pesmruj na przdn formul\n      navigate('/order-form-25');\n    }\n  };\n\n  // Handler pro potvrzen vytvoen nov objednvky (po confirm dialogu)\n  const handleCreateNewOrderConfirm = () => {\n    // Sma existujc draft - DRAFT MANAGER\n    draftManager.setCurrentUser(user_id);\n    draftManager.deleteDraft();\n\n    //  KRITICK: Vyma activeOrderEditId z localStorage (jinak se nate pvodn objednvka)\n    localStorage.removeItem('activeOrderEditId');\n\n    // Zavi modal a vyisti state\n    setShowEditConfirmModal(false);\n    setOrderToEdit(null);\n    setCurrentDraftData(null);\n\n    //  FIX: Pokud je oteven formul, force reload pes window.location\n    const isOnOrderForm = window.location.pathname === '/order-form-25';\n    \n    if (isOnOrderForm) {\n      // Jsme na formuli - pouij window.location pro hard reload\n      window.location.href = '/order-form-25';\n    } else {\n      // Nejsme na formuli - normln navigate\n      navigate('/order-form-25');\n    }\n  };\n\n  // =============================================================================\n  //  HANDLER PRO ZAMENOU OBJEDNVKU\n  // =============================================================================\n\n  const handleLockedOrderForceUnlock = async () => {\n    if (!lockedOrderInfo) return;\n\n    try {\n      // 1. Nsiln odemkni\n      const unlockResult = await unlockOrder25({\n        token,\n        username,\n        orderId: lockedOrderInfo.orderId,\n        force: true\n      });\n\n      if (unlockResult.success && unlockResult.unlock_type === 'forced') {\n        showToast(\n          `Objednvka byla nsiln odemena uivateli ${lockedOrderInfo.lockedByUserName} a pevzata`,\n          { type: 'success' }\n        );\n\n        // 2. Zamkni pro aktulnho uivatele\n        const lockResult = await lockOrder25({ token, username, orderId: lockedOrderInfo.orderId });\n        if (lockResult.success) {\n          showToast(\n            `Objednvka byla zamknuta pro editaci`,\n            { type: 'success' }\n          );\n        }\n\n        // Zavi dialog\n        setShowLockedOrderDialog(false);\n        setLockedOrderInfo(null);\n\n        // Pokrauj v editaci - znovu zavolej handleEditConfirm\n        if (orderToEdit) {\n          handleEditConfirm(orderToEdit);\n        }\n      }\n    } catch (forceError) {\n      showToast(\n        `Nepodailo se nsiln odemknout objednvku: ${forceError.message}`,\n        { type: 'error' }\n      );\n      setShowLockedOrderDialog(false);\n      setLockedOrderInfo(null);\n      setOrderToEdit(null);\n    }\n  };\n\n  const handleLockedOrderCancel = () => {\n    // Zavi dialog a vyisti state\n    setShowLockedOrderDialog(false);\n    setLockedOrderInfo(null);\n    setShowEditConfirmModal(false);\n    setOrderToEdit(null);\n  };\n\n  // =============================================================================\n  // FORCE UNLOCK WARNING DIALOG HANDLERS\n  // =============================================================================\n\n  const handleForceUnlockWarningClose = () => {\n    setShowForceUnlockWarning(false);\n    setForceUnlockWarningData(null);\n  };\n\n  const handleForceUnlockWarningAcknowledge = async () => {\n    // Ozna notifikaci jako petenou (pokud mme ID)\n    if (forceUnlockWarningData?.notificationId) {\n      try {\n        // TODO: Voln API pro oznaen notifikace jako peten\n        // await markNotificationAsRead(forceUnlockWarningData.notificationId);\n      } catch (error) {\n      }\n    }\n\n    // Refresh dat (objednvka byla pevzata jinm uivatelem)\n    await loadData(true);\n\n    // Zavi dialog\n    handleForceUnlockWarningClose();\n\n    showToast?.('Seznam objednvek byl aktualizovn', { type: 'info' });\n  };\n\n  // =============================================================================\n  // KONTEXTOV MENU HANDLERS\n  // =============================================================================\n\n  //  CRITICAL PERFORMANCE: Memoize to prevent re-creating on every render\n  const handleContextMenu = useCallback((e, order, cellData = null) => {\n    e.preventDefault(); // Zabra vchozmu kontextovmu menu\n\n    // Zjisti na jakou buku se kliklo\n    let selectedData = null;\n    const target = e.target;\n\n    if (cellData) {\n      selectedData = cellData;\n    } else if (target && target.closest('td')) {\n      // Najdi text obsahu buky\n      const cellElement = target.closest('td');\n      selectedData = {\n        value: cellElement.textContent?.trim() || '',\n        element: cellElement\n      };\n    }\n\n    setContextMenu({\n      x: e.clientX,\n      y: e.clientY,\n      order: order,\n      selectedData: selectedData\n    });\n  }, []); // No dependencies - pure event handler\n\n  //  PERFORMANCE: Event delegation handler - avoid inline functions in render loop\n  // Uses filteredDataRef to prevent re-creation when filteredData changes\n  const handleTableContextMenu = useCallback((e) => {\n    const row = e.target.closest('tr[data-order-index]');\n    if (!row) return;\n\n    const orderIndex = parseInt(row.dataset.orderIndex, 10);\n    const order = filteredDataRef.current[orderIndex];\n    if (!order) return;\n\n    handleContextMenu(e, order);\n  }, [handleContextMenu]); // No filteredData dependency - uses ref!\n\n  const handleCloseContextMenu = useCallback(() => {\n    setContextMenu(null);\n  }, []);\n\n  const handleAddToTodo = useCallback((order) => {\n    // TODO: Implementace - pid objednvku do TODO panelu\n    showToast(` Funkce \"Pidat do TODO\" bude brzy implementovna pro objednvku ${order.cislo_objednavky}`, { type: 'info' });\n  }, [showToast]);\n\n  const handleAddAlarm = useCallback((order) => {\n    // TODO: Implementace - oteve dialog pro nastaven alarmu\n    showToast(` Funkce \"Pidat alarm\" bude brzy implementovna pro objednvku ${order.cislo_objednavky}`, { type: 'info' });\n  }, [showToast]);\n\n  const handleContextMenuEdit = useCallback((order) => {\n    // Pouije existujc handleEdit\n    handleEdit(order);\n  }, [handleEdit]);\n\n  const handleContextMenuDelete = useCallback((order) => {\n    // Pouije existujc handleDelete\n    handleDelete(order);\n  }, []);\n\n  const handleGenerateDocx = useCallback((order) => {\n    // Zavol stejnou funkci jako action button\n    handleExportDocument(order);\n  }, [handleExportDocument]);\n\n  const handleGenerateFinancialControl = useCallback((order) => {\n    // Oteven modalu s nhledem PDF finann kontroly\n    setFinancialControlOrder(order);\n    setFinancialControlModalOpen(true);\n  }, []);\n\n  const handleDocxModalClose = useCallback(() => {\n    setDocxModalOpen(false);\n    setDocxModalOrder(null);\n  }, []);\n\n  const handleDelete = useCallback((order) => {\n    if (!canDelete(order)) {\n      showToast('Nemte oprvnn smazat tuto objednvku', { type: 'warning' });\n      return;\n    }\n    setOrderToDelete(order);\n    setShowDeleteConfirmModal(true);\n  }, [canDelete, showToast]);\n  \n  // Handler: Evidovat fakturu\n  const handleCreateInvoice = useCallback((order) => {\n    //  Kontrola zda je objednvka ve sprvnm stavu\n    if (!canCreateInvoice(order)) {\n      showToast('Evidovn faktury je dostupn pouze pro objednvky od stavu ROZPRACOVAN', { type: 'warning' });\n      return;\n    }\n    navigate(`/invoice-evidence/${order.id}`);\n  }, [navigate, showToast]);\n\n  //  PERFORMANCE: Populate handlers ref for handleActionClick\n  // Direct assignment (not useEffect) - happens on every render\n  // This is intentional: ensures ref is always up-to-date before render\n  handlersRef.current = {\n    handleEdit,\n    handleView,\n    handleExportDocument,\n    handleFinancialControl,\n    handleCreateInvoice,\n    handleDelete\n  };\n\n  const handleDeleteConfirm = async (deleteType) => {\n    if (!orderToDelete) return;\n\n    try {\n      //  V2 API: deleteOrderV2 s parametrem soft/hard\n\n      //  Okamit odebrat ze seznamu (optimistick aktualizace)\n      setOrders(prevOrders => prevOrders.filter(order => order.id !== orderToDelete.id));\n\n      if (deleteType === 'hard') {\n        //  V2 API: pln smazn vetn poloek a ploh (na pozad)\n        deleteOrderV2(orderToDelete.id, token, username)\n          .then(() => {\n            showToast && showToast('Objednvka byla pln smazna vetn vech ploh.', { type: 'success' });\n          })\n          .catch(error => {\n            // Rollback - vrtit objednvku zpt\n            setOrders(prevOrders => [...prevOrders, orderToDelete].sort((a, b) => b.id - a.id));\n            const errorMsg = translateErrorMessageShort(error.message);\n            showToast && showToast(`Chyba pi mazn: ${errorMsg}`, { type: 'error' });\n          });\n      } else {\n        //  V2 API: Pouze oznait jako neaktivn (soft delete, na pozad)\n        deleteOrderV2(orderToDelete.id, token, username)\n          .then(() => {\n            showToast && showToast('Objednvka byla oznaena jako neaktivn.', { type: 'success' });\n          })\n          .catch(error => {\n            // Rollback - vrtit objednvku zpt\n            setOrders(prevOrders => [...prevOrders, orderToDelete].sort((a, b) => b.id - a.id));\n            const errorMsg = translateErrorMessageShort(error.message);\n            showToast && showToast(`Chyba pi mazn: ${errorMsg}`, { type: 'error' });\n          });\n      }\n\n      //  NEREFRESHOVAT loadData() - u jsme odebrali lokln\n\n      // Odeli broadcast udlost pro aktualizaci menubar (objednvka byla smazna)\n      broadcastDraftDeleted(user_id);\n\n    } catch (error) {\n      const errorMsg = translateErrorMessageShort(error.message);\n      showToast && showToast(`Chyba pi mazn objednvky: ${errorMsg}`, { type: 'error' });\n    } finally {\n      setShowDeleteConfirmModal(false);\n      setOrderToDelete(null);\n    }\n  };\n\n  const handleDeleteCancel = () => {\n    setShowDeleteConfirmModal(false);\n    setOrderToDelete(null);\n  };\n\n  const performDelete = async (order, orderName) => {\n    try {\n      setLoading(true);\n\n      //  V2 API: soft delete\n      await deleteOrderV2(order.id, token, username);\n\n      // Refresh data after successful deletion\n      await loadData();\n\n      // Show success notification\n      if (typeof window !== 'undefined') {\n        const event = new CustomEvent('showNotification', {\n          detail: {\n            message: `Objednvka \"${orderName}\" byla oznaena jako neaktivn.`,\n            type: 'success'\n          }\n        });\n        window.dispatchEvent(event);\n      }\n\n    } catch (error) {\n      // Error deleting order\n\n      // Show error notification\n      if (typeof window !== 'undefined') {\n        const event = new CustomEvent('showNotification', {\n          detail: {\n            message: `Chyba pi mazn objednvky: ${error.message}`,\n            type: 'error'\n          }\n        });\n        window.dispatchEvent(event);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleNewOrder = async () => {\n    //  KONTROLA AKTIVNHO DRAFTU - stejn logika jako v handleEdit\n    // Zkontroluj, jestli existuje validn draft (pro rozhodnut o confirm dialogu)\n    draftManager.setCurrentUser(user_id);\n    const hasDraft = await draftManager.hasDraft();\n\n    let shouldShowConfirmDialog = false;\n    let draftDataToStore = null;\n\n    if (hasDraft) {\n      try {\n        const draftData = await draftManager.loadDraft();\n\n        // Zkontroluj, jestli jsou v draftu platn zmny\n        const hasNewConcept = isValidConcept(draftData);\n        const hasDbChanges = hasDraftChanges(draftData);\n        shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n        if (shouldShowConfirmDialog) {\n          draftDataToStore = draftData; // Ulo pro zobrazen v modalu\n        }\n      } catch (error) {\n        shouldShowConfirmDialog = false;\n      }\n    }\n\n    // Rozhodni, zda zobrazit confirm dialog nebo vytvoit novou rovnou\n    if (shouldShowConfirmDialog) {\n      setCurrentDraftData(draftDataToStore); // Ulo draft data\n      setOrderToEdit(null); // Jasn indikuj, e jde o NOVOU objednvku\n      setShowEditConfirmModal(true);\n    } else {\n      // dn draft nebo przdn draft - naviguj rovnou\n      navigate('/order-form-25');\n    }\n  };\n\n  const handleRefresh = async () => {\n    //  FORCE REFRESH: Vyma cache a nati z DB\n    if (!token || !user?.username) return;\n\n    // Reset background refresh stavu (uivatel kliknul manuln)\n    setIsBackgroundRefreshActive(false);\n    setLastRefreshTime(new Date());\n\n    try {\n      // 1. Vyma celou cache pro aktulnho uivatele (vechny filtry)\n      ordersCacheService.invalidate(user_id);\n\n      // 2. Vyma i scroll state\n      ordersCacheService.clearScrollState(user_id);\n\n      // 3. Force reload z databze\n      setLoading(true);\n      await loadData(true); // forceRefresh=true\n\n      // 4. Trigger manuln refresh notifikac\n      if (bgTasksContext?.triggerNotificationsRefresh) {\n        bgTasksContext.triggerNotificationsRefresh();\n      }\n\n      // 5. Zobraz toast potvrzen\n      showToast && showToast('Seznam objednvek byl obnoven z databze', { type: 'success' });\n\n    } catch (error) {\n      showToast && showToast('Chyba pi obnoven dat: ' + error.message, { type: 'error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleYearChange = (newYear) => {\n    setSelectedYear(newYear);\n    setUserStorage('orders25List_selectedYear', newYear);\n    setIsYearDropdownOpen(false);\n  };\n\n  // Toggle year dropdown\n  const toggleYearDropdown = () => {\n    setIsYearDropdownOpen(prev => !prev);\n  };\n\n  // Close year dropdown when clicking outside\n  useEffect(() => {\n    if (!isYearDropdownOpen) return;\n\n    const handleClickOutside = (event) => {\n      if (yearSelectRef.current && !yearSelectRef.current.contains(event.target)) {\n        setIsYearDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isYearDropdownOpen]);\n\n  const handleMonthChange = (newMonth) => {\n    // Pokud uivatel vybere \"show-more\", jen zobraz dal monosti a nechej dropdown oteven\n    if (newMonth === 'show-more') {\n      setShowExpandedMonths(true);\n      // Nechme dropdown oteven - nemnme isMonthDropdownOpen\n      return;\n    }\n\n    // Pokud uivatel vybere \"show-less\", sbal zpt na zkladn monosti\n    if (newMonth === 'show-less') {\n      setShowExpandedMonths(false);\n      // Nechme dropdown oteven - nemnme isMonthDropdownOpen\n      return;\n    }\n\n    // Pro skuten vbr msce - zaveme dropdown\n    setSelectedMonth(newMonth);\n    setUserStorage('orders25List_selectedMonth', newMonth);\n    setIsMonthDropdownOpen(false);\n  };\n\n  // Handle show archived checkbox change\n  const handleShowArchivedChange = (e) => {\n    // Pokud je to udlost z checkboxu, pouij checked\n    // Pokud je to kliknut na div, toggleni hodnotu\n    const newValue = e?.target?.type === 'checkbox' ? e.target.checked : !showArchived;\n\n    setShowArchived(newValue);\n    setUserStorage('orders25List_showArchived', newValue);\n  };\n\n  // Toggle month dropdown\n  const toggleMonthDropdown = () => {\n    setIsMonthDropdownOpen(prev => !prev);\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    if (!isMonthDropdownOpen) return;\n\n    const handleClickOutside = (event) => {\n      if (monthSelectRef.current && !monthSelectRef.current.contains(event.target)) {\n        setIsMonthDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isMonthDropdownOpen]);\n\n  // Helper funkce pro zskn datum_od a datum_do pro API\n  const calculateDateRange = () => {\n    const today = new Date();\n    const currentYear = today.getFullYear();\n    const currentMonth = today.getMonth(); // 0-11\n    const currentDay = today.getDate();\n    const year = selectedYear !== 'all' ? parseInt(selectedYear) : currentYear;\n\n    switch (selectedMonth) {\n      case 'all':\n        // dn msn filtr\n        if (selectedYear !== 'all') {\n          // Konkrtn rok - cel rok\n          return {\n            datum_od: `${year}-01-01`,\n            datum_do: `${year}-12-31`\n          };\n        }\n        // Vechny roky - dn datumov filtr\n        return {};\n\n      case 'current-month':\n        // Aktuln msc: od 1. do dnes (1.12 - 6.12)\n        return {\n          datum_od: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-01`,\n          datum_do: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`\n        };\n\n      case 'last-month': {\n        // Posledn msc: cel pedchoz msc + aktuln dny (1.11 - 6.12)\n        const prevMonth = currentMonth - 1;\n        const prevMonthYear = prevMonth < 0 ? currentYear - 1 : currentYear;\n        const prevMonthNum = prevMonth < 0 ? 11 : prevMonth;\n        \n        return {\n          datum_od: `${prevMonthYear}-${String(prevMonthNum + 1).padStart(2, '0')}-01`,\n          datum_do: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`\n        };\n      }\n\n      case 'last-quarter': {\n        // Posledn kvartl: 3 pedchoz msce + aktuln msc do dnes\n        const startMonth = currentMonth - 3;\n        const startYear = startMonth < 0 ? currentYear - 1 : currentYear;\n        const startMonthNum = startMonth < 0 ? 12 + startMonth : startMonth;\n        \n        return {\n          datum_od: `${startYear}-${String(startMonthNum + 1).padStart(2, '0')}-01`,\n          datum_do: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`\n        };\n      }\n\n      case 'last-half': {\n        // Poslednch 6 msc\n        const startMonth = currentMonth - 6;\n        const startYear = startMonth < 0 ? currentYear - 1 : currentYear;\n        const startMonthNum = startMonth < 0 ? 12 + startMonth : startMonth;\n        \n        return {\n          datum_od: `${startYear}-${String(startMonthNum + 1).padStart(2, '0')}-01`,\n          datum_do: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`\n        };\n      }\n\n      case 'last-year': {\n        // Posledn rok: 12 pedchozch msc + aktuln msc do dnes\n        const startMonth = currentMonth - 12;\n        const startYear = startMonth < 0 ? currentYear - 1 : currentYear;\n        const startMonthNum = startMonth < 0 ? 12 + startMonth : startMonth;\n        \n        return {\n          datum_od: `${startYear}-${String(startMonthNum + 1).padStart(2, '0')}-01`,\n          datum_do: `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`\n        };\n      }\n\n      default: {\n        // Konkrtn msc nebo rozsah (nap. \"1\", \"1-3\", \"10-12\")\n        if (selectedYear === 'all') {\n          // Pokud nen vybrn rok, nefiltrujeme\n          return {};\n        }\n\n        const monthMatch = selectedMonth.match(/^(\\d+)(?:-(\\d+))?$/);\n        if (monthMatch) {\n          const startMonth = parseInt(monthMatch[1]);\n          const endMonth = monthMatch[2] ? parseInt(monthMatch[2]) : startMonth;\n\n          const lastDay = new Date(year, endMonth, 0).getDate();\n          \n          return {\n            datum_od: `${year}-${String(startMonth).padStart(2, '0')}-01`,\n            datum_do: `${year}-${String(endMonth).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`\n          };\n        }\n        \n        return {};\n      }\n    }\n  };\n\n  // Helper funkce pro zskn nzvu msce\n  const getMonthLabel = (value) => {\n    const labels = {\n      'all': 'Vechny msce',\n      'current-month': 'Aktuln msc',\n      'last-month': 'Posledn msc',\n      'last-quarter': 'Posledn kvartl',\n      'last-half': 'Posledn plrok',\n      'last-year': 'Posledn rok',\n      '1': 'Leden',\n      '2': 'nor',\n      '3': 'Bezen',\n      '4': 'Duben',\n      '5': 'Kvten',\n      '6': 'erven',\n      '7': 'ervenec',\n      '8': 'Srpen',\n      '9': 'Z',\n      '10': 'jen',\n      '11': 'Listopad',\n      '12': 'Prosinec',\n      '1-3': 'Q1 (Leden-Bezen)',\n      '4-6': 'Q2 (Duben-erven)',\n      '7-9': 'Q3 (ervenec-Z)',\n      '10-12': 'Q4 (jen-Prosinec)'\n    };\n    return labels[value] || value;\n  };\n\n  // Helper funkce pro zskn seznamu rok\n  const getYearsList = () => {\n    const currentYear = new Date().getFullYear();\n    const startYear = 2016;\n    const years = []; // Zani bez \"Vechny roky\"\n\n    // Generuj roky od 2016 do souasnosti (vzestupn)\n    for (let year = startYear; year <= currentYear; year++) {\n      years.push(year);\n    }\n\n    // Pokud je souasn rok men ne 2016, pidej ho\n    if (currentYear < startYear) {\n      years.push(currentYear);\n    }\n\n    // Vra roky v sestupnm poad (nejnovj nahoe), \"Vechny\" a na konci\n    const numericYears = years.sort((a, b) => b - a);\n    return [...numericYears, 'all']; // \"Vechny roky\" na konci\n  };\n\n  const handleExport = () => {\n    // Nati nastaven sloupc z profilu uivatele\n    const csvColumns = userSettings?.export_csv_sloupce || {};\n    \n    // Nati nastaven multiline/list oddlovae z profilu\n    const listDelimiterMap = {\n      'pipe': '|',\n      'comma': ',',\n      'semicolon': ';',\n      'custom': userSettings?.exportCsvListCustomDelimiter || '|'\n    };\n    const listSeparator = listDelimiterMap[userSettings?.exportCsvListDelimiter || 'pipe'] || '|';\n    \n    //  Helper: Bezpen zskn hodnoty s fallbackem\n    const safeGet = (value, fallback = '') => value !== null && value !== undefined ? value : fallback;\n    \n    //  Helper: Formtovn jmna uivatele z enriched dat\n    const formatUserName = (user) => {\n      if (!user) return '';\n      const titul_pred = user.titul_pred ? user.titul_pred + ' ' : '';\n      const jmeno = user.jmeno || '';\n      const prijmeni = user.prijmeni || '';\n      const titul_za = user.titul_za ? ', ' + user.titul_za : '';\n      return `${titul_pred}${jmeno} ${prijmeni}${titul_za}`.trim().replace(/\\s+/g, ' ');\n    };\n    \n    const exportData = filteredData.map(order => {\n      const enriched = order._enriched || {};\n      const row = {};\n\n      // Zskme zpsob financovn z JSON struktury\n      const financovaniKodyMap = {\n        'SMLOUVA': 'Smlouva',\n        'INDIVIDUALNI_SCHVALENI': 'Individuln schvlen',\n        'POKLADNA': 'Pokladna',\n        'LP': 'Limitovan pslib',\n        'POJISTNA_UDALOST': 'Pojistn udlost'\n      };\n\n      let zpusobFinancovani = '';\n      let finData = null;\n\n      if (order.financovani_parsed && typeof order.financovani_parsed === 'object') {\n        finData = order.financovani_parsed;\n      } else if (order.financovani && typeof order.financovani === 'string') {\n        try {\n          finData = JSON.parse(order.financovani);\n        } catch {\n          zpusobFinancovani = order.financovani;\n        }\n      } else if (order.zpusob_financovani) {\n        if (typeof order.zpusob_financovani === 'string') {\n          try {\n            finData = JSON.parse(order.zpusob_financovani);\n          } catch {\n            zpusobFinancovani = order.zpusob_financovani;\n          }\n        } else if (typeof order.zpusob_financovani === 'object') {\n          finData = order.zpusob_financovani;\n        }\n      }\n\n      // Pokud mme parsovan data, extrahujeme nazev_stavu nebo mapujeme kod_stavu\n      if (finData && typeof finData === 'object') {\n        zpusobFinancovani = finData.nazev_stavu ||\n                           (finData.kod_stavu ? financovaniKodyMap[finData.kod_stavu] : null) ||\n                           finData.nazev || finData.label || '';\n      }\n\n      //  DYNAMICK SLOUPCE PODLE NASTAVEN V PROFILU\n      \n      // Zkladn identifikace\n      if (csvColumns.id) row['ID'] = safeGet(order.id);\n      if (csvColumns.cislo_objednavky) row['slo objednvky'] = safeGet(order.cislo_objednavky);\n      \n      // Pedmt a popis\n      if (csvColumns.predmet) row['Pedmt'] = safeGet(order.predmet);\n      if (csvColumns.poznamka) row['Poznmka'] = safeGet(order.poznamka);\n      \n      // Stavy\n      if (csvColumns.stav_objednavky) {\n        // Pouij pmo stav_objednavky z order (obsahuje esk nzev)\n        row['Stav objednvky'] = safeGet(order.stav_objednavky) || getOrderDisplayStatus(order);\n      }\n      if (csvColumns.stav_workflow) {\n        row['Workflow stavy'] = enriched.stav_workflow \n          ? (Array.isArray(enriched.stav_workflow) \n              ? enriched.stav_workflow.map(s => s.nazev_stavu || s.nazev || '').filter(Boolean).join(listSeparator)\n              : (enriched.stav_workflow.nazev_stavu || enriched.stav_workflow.nazev || ''))\n          : '';\n      }\n      if (csvColumns.stav_komentar) row['Koment ke stavu'] = safeGet(order.stav_komentar);\n      \n      // Datumy - pouit formatDateOnly pro konzistentn formtovn\n      if (csvColumns.dt_objednavky) row['Datum objednvky'] = getOrderDate(order) ? formatDateOnly(getOrderDate(order)) : '';\n      if (csvColumns.dt_vytvoreni) row['Datum vytvoen'] = order.dt_vytvoreni ? formatDateOnly(order.dt_vytvoreni) : '';\n      if (csvColumns.dt_schvaleni) row['Datum schvlen'] = order.dt_schvaleni ? formatDateOnly(order.dt_schvaleni) : '';\n      if (csvColumns.dt_odeslani) row['Datum odesln'] = order.dt_odeslani ? formatDateOnly(order.dt_odeslani) : '';\n      if (csvColumns.dt_akceptace) row['Datum akceptace'] = order.dt_akceptace ? formatDateOnly(order.dt_akceptace) : '';\n      if (csvColumns.dt_zverejneni) row['Datum zveejnn'] = order.dt_zverejneni ? formatDateOnly(order.dt_zverejneni) : '';\n      if (csvColumns.dt_predpokladany_termin_dodani) row['Pedpokl. termn dodn'] = order.predpokladany_termin_dodani ? formatDateOnly(order.predpokladany_termin_dodani) : '';\n      if (csvColumns.dt_aktualizace) row['Datum aktualizace'] = order.dt_aktualizace ? formatDateOnly(order.dt_aktualizace) : '';\n      \n      // Finann daje - oeten NaN hodnot\n      if (csvColumns.max_cena_s_dph) row['Max. cena s DPH'] = parseFloat(order.max_cena_s_dph) || 0;\n      if (csvColumns.celkova_cena_bez_dph) row['Celkov cena bez DPH'] = parseFloat(order.celkova_cena_bez_dph) || 0;\n      if (csvColumns.celkova_cena_s_dph) row['Celkov cena s DPH'] = getOrderTotalPriceWithDPH(order);\n      if (csvColumns.financovani_typ) row['Typ financovn'] = safeGet(finData?.typ);\n      if (csvColumns.financovani_typ_nazev) row['Nzev typu financovn'] = zpusobFinancovani;\n      if (csvColumns.financovani_lp_kody) {\n        row['LP kdy'] = finData?.lp_kody \n          ? (Array.isArray(finData.lp_kody) ? finData.lp_kody.join(listSeparator) : String(finData.lp_kody)) \n          : '';\n      }\n      if (csvColumns.financovani_lp_nazvy) {\n        row['LP nzvy'] = finData?.lp_nazvy && Array.isArray(finData.lp_nazvy)\n          ? finData.lp_nazvy.map(lp => lp.nazev || '').filter(Boolean).join(listSeparator)\n          : '';\n      }\n      if (csvColumns.financovani_lp_cisla) {\n        row['LP sla'] = finData?.lp_nazvy && Array.isArray(finData.lp_nazvy)\n          ? finData.lp_nazvy.map(lp => lp.cislo_lp || '').filter(Boolean).join(listSeparator)\n          : '';\n      }\n      \n      // Lid - pouit enriched dat s formtovacm helperem\n      if (csvColumns.objednatel) {\n        row['Objednatel'] = enriched.uzivatel\n          ? formatUserName(enriched.uzivatel)\n          : getUserDisplayName(order.uzivatel_id);\n      }\n      if (csvColumns.objednatel_email) row['Objednatel email'] = safeGet(enriched.uzivatel?.email);\n      if (csvColumns.objednatel_telefon) row['Objednatel telefon'] = safeGet(enriched.uzivatel?.telefon);\n      if (csvColumns.garant) row['Garant'] = enriched.garant_uzivatel ? formatUserName(enriched.garant_uzivatel) : '';\n      if (csvColumns.garant_email) row['Garant email'] = safeGet(enriched.garant_uzivatel?.email);\n      if (csvColumns.garant_telefon) row['Garant telefon'] = safeGet(enriched.garant_uzivatel?.telefon);\n      if (csvColumns.prikazce) row['Pkazce'] = enriched.prikazce_po ? formatUserName(enriched.prikazce_po) : '';\n      if (csvColumns.schvalovatel) row['Schvalovatel'] = enriched.schvalovatel ? formatUserName(enriched.schvalovatel) : '';\n      if (csvColumns.vytvoril_uzivatel) row['Vytvoil'] = enriched.vytvoril_uzivatel ? formatUserName(enriched.vytvoril_uzivatel) : '';\n      \n      // Dodavatel\n      if (csvColumns.dodavatel_nazev) row['Dodavatel'] = safeGet(order.dodavatel_nazev);\n      if (csvColumns.dodavatel_ico) row['Dodavatel IO'] = safeGet(order.dodavatel_ico);\n      if (csvColumns.dodavatel_dic) row['Dodavatel DI'] = safeGet(order.dodavatel_dic);\n      if (csvColumns.dodavatel_adresa) row['Dodavatel adresa'] = safeGet(order.dodavatel_adresa);\n      if (csvColumns.dodavatel_zastoupeny) row['Dodavatel zastoupen'] = safeGet(order.dodavatel_zastoupeny);\n      if (csvColumns.dodavatel_kontakt_jmeno) row['Dodavatel kontakt jmno'] = safeGet(order.dodavatel_kontakt_jmeno);\n      if (csvColumns.dodavatel_kontakt_email) row['Dodavatel kontakt email'] = safeGet(order.dodavatel_kontakt_email);\n      if (csvColumns.dodavatel_kontakt_telefon) row['Dodavatel kontakt telefon'] = safeGet(order.dodavatel_kontakt_telefon);\n      \n      // Stediska - oeten rznch zdroj dat (exportuje NZVY, ne kdy)\n      if (csvColumns.strediska) {\n        row['Stediska'] = enriched.strediska && Array.isArray(enriched.strediska) && enriched.strediska.length > 0\n          ? enriched.strediska.map(s => s.nazev || s.kod || '').filter(Boolean).join(listSeparator)\n          : (Array.isArray(order.strediska_kod) ? order.strediska_kod.map(kod => getStrediskoNazev(kod) || kod).filter(Boolean).join(listSeparator) : safeGet(order.strediska_kod));\n      }\n      if (csvColumns.strediska_nazvy) {\n        row['Stediska nzvy'] = enriched.strediska && Array.isArray(enriched.strediska) && enriched.strediska.length > 0\n          ? enriched.strediska.map(s => s.nazev || s.kod || '').filter(Boolean).join(listSeparator)\n          : (Array.isArray(order.strediska_kod) ? order.strediska_kod.map(kod => getStrediskoNazev(kod) || kod).filter(Boolean).join(listSeparator) : '');\n      }\n      if (csvColumns.druh_objednavky_kod) row['Druh objednvky'] = safeGet(enriched.druh_objednavky?.nazev || order.druh_objednavky);\n      if (csvColumns.stav_workflow_kod) row['Stav workflow kd'] = safeGet(order.stav_workflow_kod);\n      \n      // Poloky - bezpen zpracovn arrays\n      if (csvColumns.pocet_polozek) row['Poet poloek'] = (order.polozky && Array.isArray(order.polozky)) ? order.polozky.length : 0;\n      if (csvColumns.polozky_celkova_cena_s_dph) row['Poloky celkov cena s DPH'] = getOrderTotalPriceWithDPH(order);\n      if (csvColumns.polozky_popis) {\n        row['Poloky popis'] = (order.polozky && Array.isArray(order.polozky))\n          ? order.polozky.map(p => safeGet(p.popis)).filter(Boolean).join(listSeparator)\n          : '';\n      }\n      if (csvColumns.polozky_cena_bez_dph) {\n        row['Poloky cena bez DPH'] = (order.polozky && Array.isArray(order.polozky))\n          ? order.polozky.map(p => parseFloat(p.cena_bez_dph) || 0).join(listSeparator)\n          : '';\n      }\n      if (csvColumns.polozky_sazba_dph) {\n        row['Poloky sazba DPH'] = (order.polozky && Array.isArray(order.polozky))\n          ? order.polozky.map(p => (p.sazba_dph || 0) + '%').join(listSeparator)\n          : '';\n      }\n      if (csvColumns.polozky_cena_s_dph) {\n        row['Poloky cena s DPH'] = (order.polozky && Array.isArray(order.polozky))\n          ? order.polozky.map(p => parseFloat(p.cena_s_dph) || 0).join(listSeparator)\n          : '';\n      }\n      \n      // Plohy\n      if (csvColumns.prilohy_count) {\n        row['Poet ploh'] = (order.prilohy && Array.isArray(order.prilohy)) ? order.prilohy.length : 0;\n      }\n      if (csvColumns.prilohy_nazvy) {\n        row['Plohy nzvy'] = (order.prilohy && Array.isArray(order.prilohy))\n          ? order.prilohy.map(p => safeGet(p.nazev || p.originalni_nazev)).filter(Boolean).join(listSeparator)\n          : '';\n      }\n      \n      // Faktury - bezpen zpracovn\n      if (csvColumns.faktury_count) {\n        row['Poet faktur'] = (order.faktury && Array.isArray(order.faktury)) ? order.faktury.length : 0;\n      }\n      if (csvColumns.faktury_celkova_castka_s_dph) {\n        const totalInvoices = (order.faktury && Array.isArray(order.faktury))\n          ? order.faktury.reduce((sum, f) => sum + (parseFloat(f.fa_castka) || 0), 0)\n          : 0;\n        row['Faktury celkov stka'] = totalInvoices;\n      }\n      if (csvColumns.faktury_cisla_vema) {\n        row['Faktury sla VEMA'] = (order.faktury && Array.isArray(order.faktury))\n          ? order.faktury.map(f => safeGet(f.fa_cislo_vema)).filter(Boolean).join(listSeparator)\n          : '';\n      }\n      \n      // Ostatn - boolean pevod na Ano/Ne\n      if (csvColumns.stav_odeslano) row['Stav odesln'] = (order.stav_odeslano === 1 || order.stav_odeslano === '1' || order.stav_odeslano === true) ? 'Ano' : 'Ne';\n      if (csvColumns.potvrzeno_dodavatelem) row['Potvrzeno dodavatelem'] = (order.potvrzeno_dodavatelem === 1 || order.potvrzeno_dodavatelem === true) ? 'Ano' : 'Ne';\n      if (csvColumns.zpusob_potvrzeni) row['Zpsob potvrzen'] = safeGet(order.zpusob_potvrzeni);\n      if (csvColumns.zpusob_platby) row['Zpsob platby'] = safeGet(order.zpusob_platby);\n      if (csvColumns.zverejnit_registr_smluv) row['Zveejnit v registru'] = (order.zverejnit_registr_smluv === 1 || order.zverejnit_registr_smluv === true) ? 'Ano' : 'Ne';\n      if (csvColumns.registr_iddt) row['Registr IDDT'] = safeGet(order.registr_iddt);\n      if (csvColumns.zaruka) row['Zruka'] = safeGet(order.zaruka);\n      if (csvColumns.misto_dodani) row['Msto dodn'] = safeGet(order.misto_dodani);\n\n      return row;\n    });\n\n    // Pevod exportCsvDelimiter na skuten separtor\n    const delimiterMap = {\n      'semicolon': ';',\n      'tab': '\\t',\n      'pipe': '|',\n      'custom': userSettings?.exportCsvCustomDelimiter || ';'\n    };\n    \n    const separator = delimiterMap[userSettings?.exportCsvDelimiter || 'semicolon'] || ';';\n    \n    // Piprav data pro nhled a zobraz modal\n    const columnCount = Object.keys(exportData[0] || {}).length;\n    const separatorName = userSettings?.exportCsvDelimiter === 'tab' ? 'Tabultor' : \n                          userSettings?.exportCsvDelimiter === 'pipe' ? 'Svisltko (|)' :\n                          userSettings?.exportCsvDelimiter === 'custom' ? `Vlastn (${userSettings?.exportCsvCustomDelimiter || ';'})` :\n                          'Stednk (;)';\n    \n    // Multiline/list oddlova z nastaven (u nateno ve v handleExport)\n    const multilineSeparator = listSeparator;\n    const multilineSeparatorName = userSettings?.exportCsvListDelimiter === 'comma' ? 'rka (,)' :\n                                    userSettings?.exportCsvListDelimiter === 'semicolon' ? 'Stednk (;)' :\n                                    userSettings?.exportCsvListDelimiter === 'custom' ? `Vlastn (${userSettings?.exportCsvListCustomDelimiter || '|'})` :\n                                    'Svisltko (|)';\n    \n    setExportPreviewData({\n      data: exportData,\n      separator,\n      separatorName,\n      multilineSeparator,\n      multilineSeparatorName,\n      columnCount,\n      rowCount: exportData.length\n    });\n    setShowExportPreview(true);\n  };\n\n  // Funkce pro finln export (volna z preview modalu)\n  const handleConfirmExport = () => {\n    if (!exportPreviewData) return;\n    \n    exportCsv(exportPreviewData.data, 'objednavky_2025', { \n      separator: exportPreviewData.separator,\n      includeBOM: true // UTF-8 BOM pro sprvn zobrazen v Excelu\n    });\n    \n    setShowExportPreview(false);\n    setExportPreviewData(null);\n    showToast('Export byl spn staen', 'success');\n  };\n\n  // Pomocn funkce pro formtovn stek s oddlovai tisc\n  const formatNumberWithSpaces = (value) => {\n    if (!value) return '';\n    // Odstra vechny mezery a neseln znaky krom rky a teky\n    const numericValue = value.toString().replace(/[^\\d]/g, '');\n    if (!numericValue) return '';\n\n    // Pidej mezery jako oddlovae tisc\n    return numericValue.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  };\n\n  const parseFormattedNumber = (value) => {\n    if (!value) return '';\n    // Odstra mezery a vra ist selnou hodnotu\n    return value.toString().replace(/\\s/g, '');\n  };\n\n  const handleAmountFromChange = (e) => {\n    const rawValue = e.target.value;\n    const numericValue = parseFormattedNumber(rawValue);\n    setAmountFromFilter(numericValue);\n  };\n\n  const handleAmountToChange = (e) => {\n    const rawValue = e.target.value;\n    const numericValue = parseFormattedNumber(rawValue);\n    setAmountToFilter(numericValue);\n  };\n\n  const clearFilters = () => {\n    // Vyma vechny filtry ve stavu (pole = przdn pole)\n    setGlobalFilter('');\n    setStatusFilter([]);\n    setUserFilter('');\n    setSelectedObjednatel([]);\n    setSelectedGarant([]);\n    setSelectedSchvalovatel([]);\n    setDateFromFilter('');\n    setDateToFilter('');\n    setAmountFromFilter('');\n    setAmountToFilter('');\n    setActiveStatusFilter(null); // Zru tak aktivn filter z dladic\n    setColumnFilters({\n      dt_objednavky: '',\n      cislo_objednavky: '',\n      predmet: '',\n      objednatel: '',\n      stav_objednavky: '',\n      max_cena_s_dph: '',\n      garant: '',\n      schvalovatel: ''\n    });\n\n    // Vyma vechny filtry z localStorage\n    const sid = user_id || 'anon';\n    localStorage.removeItem('orders25List_globalFilter');\n    localStorage.removeItem('orders25List_statusFilter');\n    localStorage.removeItem('orders25List_userFilter');\n    localStorage.removeItem('orders25List_selectedObjednatel');\n    localStorage.removeItem('orders25List_selectedGarant');\n    localStorage.removeItem('orders25List_selectedSchvalovatel');\n    localStorage.removeItem(`orders25_dateFrom_${sid}`);\n    localStorage.removeItem(`orders25_dateTo_${sid}`);\n    localStorage.removeItem('orders25List_amountFrom');\n    localStorage.removeItem('orders25List_amountTo');\n    localStorage.removeItem('orders25List_activeStatusFilter');\n  };\n\n  // Handlery pro jednoduch filtrovn pes globalFilter\n  const handleStatusFilterChange = (e) => {\n    const options = e.target.options;\n    const selected = [];\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].selected && options[i].value) {\n        selected.push(options[i].value);\n      }\n    }\n    setStatusFilter(selected);\n    setUserStorage('orders25List_statusFilter', selected);\n  };\n\n  const handleObjednatelChange = (e) => {\n    const options = e.target.options;\n    const selected = [];\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].selected && options[i].value) {\n        selected.push(options[i].value);\n      }\n    }\n\n    setSelectedObjednatel(selected);\n    setUserStorage('orders25List_selectedObjednatel', selected);\n\n    // Ulo vybran ID oddlen | do MULTISELECT filtru (ne do columnFilters!)\n    if (selected.length === 0) {\n      setMultiselectFilters(prev => ({ ...prev, objednatel: '' }));\n    } else {\n      // Ulo ID oddlen |\n      const filterValue = selected.join('|');\n      setMultiselectFilters(prev => ({ ...prev, objednatel: filterValue }));\n    }\n  };\n\n  const handleGarantChange = (e) => {\n    const options = e.target.options;\n    const selected = [];\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].selected && options[i].value) {\n        selected.push(options[i].value);\n      }\n    }\n\n    setSelectedGarant(selected);\n    setUserStorage('orders25List_selectedGarant', selected);\n\n    // Ulo vybran ID oddlen | do MULTISELECT filtru\n    if (selected.length === 0) {\n      setMultiselectFilters(prev => ({ ...prev, garant: '' }));\n    } else {\n      const filterValue = selected.join('|');\n      setMultiselectFilters(prev => ({ ...prev, garant: filterValue }));\n    }\n  };\n\n  const handleSchvalovatelChange = (e) => {\n    const options = e.target.options;\n    const selected = [];\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].selected && options[i].value) {\n        selected.push(options[i].value);\n      }\n    }\n\n    setSelectedSchvalovatel(selected);\n    setUserStorage('orders25List_selectedSchvalovatel', selected);\n\n    // Ulo vybran ID oddlen | do MULTISELECT filtru\n    if (selected.length === 0) {\n      setMultiselectFilters(prev => ({ ...prev, schvalovatel: '' }));\n    } else {\n      const filterValue = selected.join('|');\n      setMultiselectFilters(prev => ({ ...prev, schvalovatel: filterValue }));\n    }\n  };\n\n  const handlePrikazceChange = (e) => {\n    const options = e.target.options;\n    const selected = [];\n    for (let i = 0; i < options.length; i++) {\n      if (options[i].selected && options[i].value) {\n        selected.push(options[i].value);\n      }\n    }\n\n    setSelectedPrikazce(selected);\n    setUserStorage('orders25List_selectedPrikazce', selected);\n\n    // Ulo vybran ID oddlen | do MULTISELECT filtru\n    if (selected.length === 0) {\n      setMultiselectFilters(prev => ({ ...prev, prikazce: '' }));\n    } else {\n      const filterValue = selected.join('|');\n      setMultiselectFilters(prev => ({ ...prev, prikazce: filterValue }));\n    }\n  };\n\n  const clearColumnFilters = () => {\n    // Vyma vyhledvac pole v hlavice tabulky\n    setColumnFilters({\n      dt_objednavky: '',\n      cislo_objednavky: '',\n      predmet: '',\n      objednatel: '',\n      stav_objednavky: '',\n      max_cena_s_dph: '',\n      garant: '',\n      prikazce: '',\n      schvalovatel: ''\n    });\n\n    // Reset select v rozenm filtru - przdn pole msto przdnch string\n    setSelectedObjednatel([]);\n    setSelectedGarant([]);\n    setSelectedPrikazce([]);\n    setSelectedSchvalovatel([]);\n    setStatusFilter([]);\n\n    // Vyma tak z localStorage\n    setUserStorage('orders25List_selectedObjednatel', []);\n    setUserStorage('orders25List_selectedGarant', []);\n    setUserStorage('orders25List_selectedPrikazce', []);\n    setUserStorage('orders25List_selectedSchvalovatel', []);\n    setUserStorage('orders25List_statusFilter', []);\n  };\n\n  // Funkce pro vymazn jednotlivch filtr\n  const clearStatusFilter = () => {\n    setStatusFilter([]);\n    setUserStorage('orders25List_statusFilter', []);\n  };\n\n  // Funkce pro naten vlastnho filtru z DB (userSettings)\n  const loadCustomStatusFilter = () => {\n    try {\n      // Vyistit localStorage cache (pouv getUserKey formt: baseKey_user_userId)\n      const cacheKey = getUserKey('orders25List_statusFilter');\n      localStorage.removeItem(cacheKey);\n      \n      // Nast z userSettings (DB)\n      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n      if (userSettings?.vychozi_filtry_stavu_objednavek && Array.isArray(userSettings.vychozi_filtry_stavu_objednavek)) {\n        const customFilter = userSettings.vychozi_filtry_stavu_objednavek;\n        setStatusFilter(customFilter);\n        setUserStorage('orders25List_statusFilter', customFilter);\n        \n        if (showToast) {\n          showToast(`Naten vlastn filtr stav (${customFilter.length} ${customFilter.length === 1 ? 'stav' : customFilter.length < 5 ? 'stavy' : 'stav'})`, 'success');\n        }\n      } else {\n        if (showToast) {\n          showToast('Vlastn filtr stav nen nastaven. Nastavte ho v Profilu  Nastaven.', 'info');\n        }\n      }\n    } catch (e) {\n      console.error('Chyba pi natn vlastnho filtru:', e);\n      if (showToast) {\n        showToast('Chyba pi natn vlastnho filtru stav', 'error');\n      }\n    }\n  };\n\n  const clearObjednatelFilter = () => {\n    setSelectedObjednatel([]);\n    setMultiselectFilters(prev => ({ ...prev, objednatel: '' }));\n    setUserStorage('orders25List_selectedObjednatel', []);\n  };\n\n  const clearGarantFilter = () => {\n    setSelectedGarant([]);\n    setMultiselectFilters(prev => ({ ...prev, garant: '' }));\n    setUserStorage('orders25List_selectedGarant', []);\n  };\n\n  const clearSchvalovatelFilter = () => {\n    setSelectedSchvalovatel([]);\n    setMultiselectFilters(prev => ({ ...prev, schvalovatel: '' }));\n    setUserStorage('orders25List_selectedSchvalovatel', []);\n  };\n\n  const clearPrikazceFilter = () => {\n    setSelectedPrikazce([]);\n    setMultiselectFilters(prev => ({ ...prev, prikazce: '' }));\n    setUserStorage('orders25List_selectedPrikazce', []);\n  };\n\n  const clearDateFilter = () => {\n    setDateFromFilter('');\n    setDateToFilter('');\n    const sid = user_id || 'anon';\n    localStorage.removeItem(`orders25_dateFrom_${sid}`);\n    localStorage.removeItem(`orders25_dateTo_${sid}`);\n  };\n\n  const clearPriceFilter = () => {\n    setAmountFromFilter('');\n    setAmountToFilter('');\n  };\n\n  const toggleRowHighlighting = () => {\n    const newHighlighting = !showRowHighlighting;\n    setShowRowHighlighting(newHighlighting);\n    setUserStorage('orders25List_showRowHighlighting', newHighlighting);\n  };\n\n  // Handler pro klik na dashboard karty - filtrovn podle stavu\n  //  VECHNY DLADICE FUNGUJ JAKO RADIO - VDY JEN JEDNA AKTIVN\n  const handleStatusFilterClick = (status) => {\n    if (activeStatusFilter === status) {\n      // Opakovan klik - zru vechny filtry\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithInvoices(false);\n      setFilterWithAttachments(false);\n    } else {\n      //  MAPUJ DASHBOARD KDY NA ESK NZVY (ne systmov kdy!)\n      const statusToCzechName = {\n        'ke_schvaleni': 'Ke schvlen',\n        'schvalena': 'Schvlen',\n        'rozpracovana': 'Rozpracovan',\n        'odeslana': 'Odeslan dodavateli',\n        'potvrzena': 'Potvrzen dodavatelem',\n        'k_uverejneni_do_registru': 'Ke zveejnn', //  FIX: Zmnno z \"M bt zveejnna\"\n        'uverejnena': 'Zveejnno', //  FIX: Opraveno na \"Zveejnno\" (tak jak je v DB)\n        'vecna_spravnost': 'Vcn sprvnost',\n        'dokoncena': 'Dokonen',\n        'nova': 'Nov',\n        'zamitnuta': 'Zamtnut',\n        'zrusena': 'Zruen',\n        'ceka_potvrzeni': 'ek na potvrzen',\n        'ceka_se': 'ek se',\n        'smazana': 'Smazan',\n        'archivovano': 'Archivovno'\n      };\n\n      // Zru vechny ostatn filtry\n      setFilterWithInvoices(false);\n      setFilterWithAttachments(false);\n      \n      // Aktivuj pouze tento stav\n      setActiveStatusFilter(status);\n      const czechName = statusToCzechName[status] || status;\n      setStatusFilter([czechName]);\n      setUserStorage('orders25List_statusFilter', [czechName]);\n    }\n  };\n\n  const handleToggleInvoicesFilter = () => {\n    if (filterWithInvoices) {\n      // Opakovan klik - zru vechny filtry\n      setFilterWithInvoices(false);\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithAttachments(false);\n    } else {\n      // Zru vechny ostatn filtry a aktivuj faktury\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithAttachments(false);\n      setFilterWithInvoices(true);\n    }\n  };\n\n  const handleToggleAttachmentsFilter = () => {\n    if (filterWithAttachments) {\n      // Opakovan klik - zru vechny filtry\n      setFilterWithAttachments(false);\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithInvoices(false);\n    } else {\n      // Zru vechny ostatn filtry a aktivuj plohy\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithInvoices(false);\n      setFilterWithAttachments(true);\n    }\n  };\n\n  const handleToggleMimoradneFilter = () => {\n    const newFilterMimoradne = !filterMimoradneObjednavky;\n    setFilterMimoradneObjednavky(newFilterMimoradne);\n    setUserStorage('orders25List_filterMimoradneObjednavky', newFilterMimoradne);\n    \n    if (newFilterMimoradne) {\n      // Zru ostatn filtry pokud aktivujeme mimodn\n      setActiveStatusFilter(null);\n      setStatusFilter([]);\n      setUserStorage('orders25List_statusFilter', []);\n      setFilterWithInvoices(false);\n      setFilterWithAttachments(false);\n    }\n  };\n\n  const handleToggleDebug = () => {\n    const newShowDebug = !showDebug;\n    setShowDebug(newShowDebug);\n    setUserStorage('orders25List_showDebug', newShowDebug);\n  };\n\n  const handleToggleDashboard = () => {\n    const newShowDashboard = !showDashboard;\n    setShowDashboard(newShowDashboard);\n    setUserStorage('orders25List_showDashboard', newShowDashboard);\n  };\n\n  const handleToggleFilters = () => {\n    const newShowFilters = !showFilters;\n    setShowFilters(newShowFilters);\n    setUserStorage('orders25List_showFilters', newShowFilters);\n  };\n\n  const handleHideFilters = () => {\n    setShowFiltersPanel(false);\n    setUserStorage('orders25List_showFiltersPanel', false);\n  };\n\n  const handleShowFilters = () => {\n    setShowFiltersPanel(true);\n    setUserStorage('orders25List_showFiltersPanel', true);\n  };\n\n  const handleToggleDashboardView = () => {\n    // Pepnout mezi Kompaktn a Pln a deaktivovat Vlastn reim\n    const newDashboardCompact = !dashboardCompact;\n    setDashboardCompact(newDashboardCompact);\n    setUserStorage('orders25List_dashboardCompact', newDashboardCompact);\n    \n    // Deaktivovat Vlastn reim\n    if (dashboardMode === 'custom') {\n      setDashboardMode('standard');\n      setUserStorage('orders25List_dashboardMode', 'standard');\n    }\n  };\n\n  const handleToggleCustomDashboard = () => {\n    // Aktivovat/deaktivovat Vlastn reim\n    const newMode = dashboardMode === 'custom' ? 'standard' : 'custom';\n    setDashboardMode(newMode);\n    setUserStorage('orders25List_dashboardMode', newMode);\n  };\n\n  // Helper funkce pro kontrolu zda m bt dladice viditeln v Custom reimu\n  const isTileVisible = useCallback((tileKey) => {\n    if (dashboardMode !== 'custom' || !userSettings?.viditelne_dlazdice) {\n      return true; // V standard reimu zobrazit ve\n    }\n    return userSettings.viditelne_dlazdice[tileKey] === true;\n  }, [dashboardMode, userSettings]);\n\n  const handleToggleOnlyMyOrders = () => {\n    const newShowOnlyMyOrders = !showOnlyMyOrders;\n    setShowOnlyMyOrders(newShowOnlyMyOrders);\n    setUserStorage('orders25List_showOnlyMyOrders', newShowOnlyMyOrders);\n  };\n\n  // Staen plohy\n  const handleDownloadAttachment = async (attachment, orderId) => {\n    const fileName = attachment.originalni_nazev_souboru || attachment.nazev || `priloha_${attachment.id}`;\n\n    // Pro archivovan objednvky (importovan ze star DB) - sthnout pmo ze star URL\n    if (attachment.typ_prilohy === 'IMPORT' && attachment.originalni_nazev_souboru) {\n      const oldAttachmentsUrl = process.env.REACT_APP_OLD_ATTACHMENTS_URL || 'https://erdms.zachranka.cz/prilohy/';\n      const oldUrl = `${oldAttachmentsUrl}${attachment.originalni_nazev_souboru}`;\n\n      // Sthnout pmo bez dialogu\n      const link = document.createElement('a');\n      link.href = oldUrl;\n      link.download = attachment.originalni_nazev_souboru;\n      link.style.display = 'none';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      showToast?.(`Ploha \"${attachment.originalni_nazev_souboru}\" se stahuje ze starho systmu`, { type: 'info' });\n      return;\n    }\n\n    // Standardn staen pro bn plohy\n    if (!attachment.id || !orderId || !token || !username) {\n      showToast?.('Nelze sthnout plohu - chyb potebn daje', { type: 'error' });\n      return;\n    }\n\n    try {\n      let blob;\n      \n      //  Rozlien podle typu plohy - faktury vs objednvky\n      if (attachment.typ_prilohy && attachment.typ_prilohy.startsWith('FAKTURA')) {\n        // Ploha faktury - pouij invoice attachment endpoint\n        // Potebuji faktura_id - me bt v attachment.faktura_id\n        const fakturaId = attachment.faktura_id || attachment.invoice_id;\n        if (!fakturaId) {\n          showToast?.('Nelze sthnout plohu faktury - chyb ID faktury', { type: 'error' });\n          return;\n        }\n        blob = await downloadInvoiceAttachment(fakturaId, attachment.id, username, token);\n      } else {\n        // Ploha objednvky\n        blob = await downloadOrderAttachment(orderId, attachment.id, username, token);\n      }\n\n      // Pmo sthnout soubor bez dialog\n      createDownloadLink25(blob, fileName);\n      showToast?.(`Ploha staena`, { type: 'success' });\n\n    } catch (error) {\n      showToast?.(error.message || 'Plohu nelze sthnout', { type: 'error' });\n    }\n  };\n\n  // State pro detaily osob\n  const [personDetailsCache, setPersonDetailsCache] = useState({});\n\n  // Funkce pro naten detailu osoby - zavol se pi rozbalen dku\n  const loadPersonDetail = async (orderId, personKey, personId) => {\n    const cacheKey = `${orderId}_${personKey}`;\n\n    // Pokud u mme v cache, nemusme natat znovu\n    if (personDetailsCache[cacheKey]) {\n      return;\n    }\n\n    try {\n      const { getUserDetailApi2 } = await import('../services/api2auth');\n      const userDetail = await getUserDetailApi2(username, token, personId);\n\n      if (userDetail) {\n        const details = {\n          jmeno: userDetail.jmeno,\n          prijmeni: userDetail.prijmeni,\n          titul_pred: userDetail.titul_pred,\n          titul_za: userDetail.titul_za,\n          email: userDetail.email\n        };\n\n        // Ulo do cache\n        setPersonDetailsCache(prev => ({\n          ...prev,\n          [cacheKey]: details\n        }));\n      }\n    } catch (error) {\n      // Error loading person detail\n    }\n  };\n\n  // \n  //  RENDER EXPANDED ROW - V2 API OPTIMIZED\n  // \n  const renderExpandedContent = (order) => {\n    //  Order V2 API vrac enriched data pmo v order objektu:\n    // - polozky[] (s cena_bez_dph, cena_s_dph, dph_castka, dph_procento)\n    // - polozky_count, polozky_celkova_cena_s_dph, polozky_celkova_cena_bez_dph\n    // - faktury[] (s fa_castka_bez_dph, fa_castka_s_dph, fa_dph_castka, prilohy[])\n    // - faktury_count, faktury_celkova_castka_s_dph\n    // - prilohy[] (objednvky), prilohy_count\n    // - dodavatel_detail{}, user_detail{}, organizace_detail{}\n    // - strediska[], strediska_kod[]\n    // - financovani{typ, lp_kody[], ...}\n\n    // Pipravme data\n    const polozky = order.polozky || [];\n    const hasPolozky = Array.isArray(polozky) && polozky.length > 0;\n\n    const faktury = order.faktury || [];\n    const hasFaktury = Array.isArray(faktury) && faktury.length > 0;\n\n    const prilohy = order.prilohy || [];\n    const hasPrilohy = Array.isArray(prilohy) && prilohy.length > 0;\n\n    const dodatecneDokumenty = order.dodatecne_dokumenty || [];\n    const hasDodatecneDokumenty = Array.isArray(dodatecneDokumenty) && dodatecneDokumenty.length > 0;\n\n    const strediska = order.strediska_kod || order.strediska || [];\n    const hasStrediska = Array.isArray(strediska) && strediska.length > 0;\n\n    return (\n      <ExpandedContent $order={order} $showRowHighlighting={showRowHighlighting}>\n        <ExpandedGrid>\n\n          {/*  */}\n          {/* 1 ZKLADN DAJE OBJEDNVKY */}\n          {/*  */}\n          <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n            <InfoCardTitle>\n              <FontAwesomeIcon icon={faInfoCircle} />\n              Zkladn daje objednvky\n            </InfoCardTitle>\n\n            {/* slo objednvky - cel ka, nezalomiteln, s ID jako horn index */}\n            <div style={{\n              width: '100%',\n              marginBottom: '0.75rem',\n              padding: '0.5rem',\n              background: 'linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)',\n              borderRadius: '6px',\n              border: '1px solid #e2e8f0'\n            }}>\n              <div style={{\n                fontSize: '0.75em',\n                color: '#64748b',\n                marginBottom: '0.25rem',\n                fontWeight: 500,\n                textTransform: 'uppercase',\n                letterSpacing: '0.05em'\n              }}>\n                slo objednvky\n              </div>\n              <div style={{\n                fontFamily: 'monospace',\n                fontWeight: 700,\n                fontSize: '1.15em',\n                color: '#0f172a',\n                whiteSpace: 'nowrap',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis'\n              }}>\n                {order.cislo_objednavky || '---'}\n                <sup style={{\n                  fontSize: '0.6em',\n                  color: '#94a3b8',\n                  fontWeight: 400,\n                  marginLeft: '0.3em'\n                }}>\n                  #{order.id || '?'}\n                </sup>\n              </div>\n            </div>\n\n            <InfoRow>\n              <InfoLabel>Pedmt:</InfoLabel>\n              <InfoValue style={{ fontWeight: 500 }}>\n                {order.predmet || '---'}\n              </InfoValue>\n            </InfoRow>\n\n            <InfoRow>\n              <InfoLabel>Stav:</InfoLabel>\n              <InfoValue>\n                <span style={{\n                  fontWeight: 600,\n                  color: (() => {\n                    const statusCode = order.stav_objednavky\n                      ? mapUserStatusToSystemCode(order.stav_objednavky)\n                      : 'NOVA';\n                    const statusColors = getStatusColor(statusCode);\n                    return statusColors?.dark || STATUS_COLORS.NOVA.dark;\n                  })()\n                }}>\n                  {order.stav_objednavky || getOrderDisplayStatus(order) || '---'}\n                </span>\n              </InfoValue>\n            </InfoRow>\n\n            {/* Oddlovac linka pod stavem */}\n            <div style={{\n              borderBottom: '1px solid #e5e7eb',\n              margin: '0.75rem 0'\n            }} />\n\n            <InfoRow>\n              <InfoLabel>Datum vytvoen:</InfoLabel>\n              <InfoValue>\n                {order.dt_vytvoreni ? prettyDate(order.dt_vytvoreni) : '---'}\n              </InfoValue>\n            </InfoRow>\n\n            {order.dt_schvaleni && (\n              <InfoRow>\n                <InfoLabel>Datum schvlen:</InfoLabel>\n                <InfoValue style={{ color: '#059669', fontWeight: 500 }}>\n                  {prettyDate(order.dt_schvaleni)}\n                </InfoValue>\n              </InfoRow>\n            )}\n\n            {order.dt_predpokladany_termin_dodani && (\n              <InfoRow>\n                <InfoLabel>Termn dodn:</InfoLabel>\n                <InfoValue style={{ fontWeight: 500 }}>\n                  {formatDateOnly(order.dt_predpokladany_termin_dodani)}\n                </InfoValue>\n              </InfoRow>\n            )}\n\n                          {order.dt_potvrzeni_vecne_spravnosti && (\n                            <InfoRow>\n                              <InfoLabel>Potvrzen vc. sprvnosti:</InfoLabel>\n                              <InfoValue style={{ color: '#0891b2', fontWeight: 500 }}>\n                                {prettyDate(order.dt_potvrzeni_vecne_spravnosti)}\n                              </InfoValue>\n                            </InfoRow>\n                          )}            {order.dt_dokonceni && (\n              <InfoRow>\n                <InfoLabel>Datum dokonen:</InfoLabel>\n                <InfoValue style={{ color: '#16a34a', fontWeight: 600 }}>\n                  {prettyDate(order.dt_dokonceni)}\n                </InfoValue>\n              </InfoRow>\n            )}\n\n            <InfoRow>\n              <InfoLabel>Posledn zmna:</InfoLabel>\n              <InfoValue>\n                {order.dt_aktualizace ? prettyDate(order.dt_aktualizace) : '---'}\n              </InfoValue>\n            </InfoRow>\n\n            {/* Dlic linka */}\n            <div style={{\n              borderTop: '1px solid #d1d5db',\n              margin: '0.75rem 0'\n            }} />\n\n            {/* Uveejnn v registru smluv - VDY ZOBRAZIT */}\n            {(() => {\n              // 1. Zveejnno - m vyplnn datum i IDDS\n              if (order.registr_smluv?.dt_zverejneni && order.registr_smluv?.registr_iddt) {\n                return (\n                  <>\n                    <InfoRow>\n                      <InfoLabel>Uveejnno v registru:</InfoLabel>\n                      <InfoValue style={{\n                        fontWeight: 600,\n                        color: '#059669',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'flex-end',\n                        gap: '0.5rem'\n                      }}>\n                        <FontAwesomeIcon icon={faCheckCircle} style={{ fontSize: '0.9em' }} />\n                        <span>Ano</span>\n                      </InfoValue>\n                    </InfoRow>\n\n                    <InfoRow>\n                      <InfoLabel>Datum zveejnn:</InfoLabel>\n                      <InfoValue style={{ fontWeight: 500, color: '#059669' }}>\n                        {formatDateOnly(order.registr_smluv.dt_zverejneni)}\n                      </InfoValue>\n                    </InfoRow>\n\n                    <InfoRow>\n                      <InfoLabel>Kd IDDS:</InfoLabel>\n                      <InfoValue style={{\n                        fontFamily: 'monospace',\n                        fontWeight: 600,\n                        fontSize: '0.95em',\n                        color: '#0891b2'\n                      }}>\n                        {order.registr_smluv.registr_iddt}\n                      </InfoValue>\n                    </InfoRow>\n                  </>\n                );\n              }\n\n              // 2. ek se na zveejnn - m bt zveejnno, ale jet nebylo\n              let workflowStatus = null;\n              if (order.stav_workflow_kod) {\n                try {\n                  // Pokud je to string, parsuj ho\n                  const parsed = typeof order.stav_workflow_kod === 'string'\n                    ? JSON.parse(order.stav_workflow_kod)\n                    : order.stav_workflow_kod;\n\n                  // Pokud je to pole, vezmi posledn prvek\n                  if (Array.isArray(parsed)) {\n                    workflowStatus = parsed[parsed.length - 1];\n                  } else {\n                    workflowStatus = parsed;\n                  }\n                } catch (e) {\n                  // Pokud parsovn sele, pouij hodnotu jako string\n                  workflowStatus = order.stav_workflow_kod;\n                }\n              }\n\n              if (workflowStatus === 'UVEREJNIT' || order.registr_smluv?.zverejnit === 'ANO' || order.registr_smluv?.ma_byt_zverejnena) {\n                return (\n                  <InfoRow>\n                    <InfoLabel>Uveejnno v registru:</InfoLabel>\n                    <InfoValue style={{\n                      fontWeight: 600,\n                      color: '#f59e0b',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'flex-end',\n                      gap: '0.5rem'\n                    }}>\n                      <FontAwesomeIcon icon={faHourglassHalf} style={{ fontSize: '0.9em' }} />\n                      <span>ek se</span>\n                    </InfoValue>\n                  </InfoRow>\n                );\n              }\n\n              // 3. Nebude zveejnno\n              return (\n                <InfoRow>\n                  <InfoLabel>Uveejnno v registru:</InfoLabel>\n                  <InfoValue style={{\n                    fontWeight: 500,\n                    color: '#6b7280',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'flex-end',\n                    gap: '0.5rem'\n                  }}>\n                    <FontAwesomeIcon icon={faTimesCircle} style={{ fontSize: '0.9em' }} />\n                    <span>Ne</span>\n                  </InfoValue>\n                </InfoRow>\n              );\n            })()}\n          </InfoCard>\n\n          {/*  */}\n          {/* 2 FINANN DAJE - KOMPLETN S V2 API */}\n          {/*  */}\n          <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n            <InfoCardTitle>\n              <FontAwesomeIcon icon={faMoneyBillWave} />\n              Finann daje\n            </InfoCardTitle>\n\n            {/*  FINANN ZDROJ - NA ZATKU */}\n            {/* Stediska */}\n            {hasStrediska && (\n              <InfoRow>\n                <InfoLabel>Stediska:</InfoLabel>\n                <InfoValue style={{ fontSize: '0.9em', fontWeight: 500, display: 'flex', flexDirection: 'column', gap: '4px', alignItems: 'flex-end' }}>\n                  {Array.isArray(strediska) ? (\n                    strediska.map((s, idx) => {\n                      let strediskoText;\n                      if (typeof s === 'string' || typeof s === 'number') {\n                        // Je to kd (string nebo slo), pelo na nzev\n                        strediskoText = getStrediskoNazev(String(s));\n                      } else if (s.nazev_stavu) {\n                        // U mme enriched objekt s nzvem\n                        strediskoText = s.nazev_stavu;\n                      } else if (s.nazev) {\n                        strediskoText = s.nazev;\n                      } else if (s.kod_stavu) {\n                        // Mme objekt s kdem, pelo ho\n                        strediskoText = getStrediskoNazev(String(s.kod_stavu));\n                      } else if (s.kod) {\n                        strediskoText = getStrediskoNazev(String(s.kod));\n                      } else {\n                        strediskoText = `Stedisko ${idx + 1}`;\n                      }\n                      return (\n                        <div key={idx}>\n                          {highlightSearchText(strediskoText, globalFilter)}\n                        </div>\n                      );\n                    })\n                  ) : (\n                    <div>{highlightSearchText(getStrediskoNazev(String(strediska)), globalFilter)}</div>\n                  )}\n                </InfoValue>\n              </InfoRow>\n            )}\n\n            {/* Zpsob financovn */}\n            {order.financovani && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Zpsob financovn:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 600, color: '#7c3aed' }}>\n                    {highlightSearchText(order.financovani.typ_nazev || order.financovani.typ || '---', globalFilter)}\n                  </InfoValue>\n                </InfoRow>\n\n                {/* LP kdy s detaily */}\n                {order.financovani?.lp_nazvy && Array.isArray(order.financovani.lp_nazvy) && order.financovani.lp_nazvy.length > 0 && (\n                  <div style={{ marginTop: '0.5rem', marginBottom: '0.5rem' }}>\n                    <InfoLabel style={{ marginBottom: '0.5rem', display: 'block' }}>LP ty:</InfoLabel>\n                    {order.financovani.lp_nazvy.map((lp, index) => (\n                      <div key={index} style={{\n                        fontSize: '0.9em',\n                        marginBottom: '0.25rem',\n                        paddingLeft: '0.5rem',\n                        borderLeft: '3px solid #7c3aed',\n                        backgroundColor: '#faf5ff',\n                        padding: '0.4rem 0.5rem',\n                        borderRadius: '0 4px 4px 0'\n                      }}>\n                        <span style={{ fontWeight: 600, color: '#7c3aed' }}>\n                          {highlightSearchText(lp.cislo_lp || lp.kod || '---', globalFilter)}\n                        </span>\n                        {lp.nazev && (\n                          <span style={{ color: '#64748b', marginLeft: '0.5rem' }}>\n                             {highlightSearchText(lp.nazev, globalFilter)}\n                          </span>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Fallback na star LP kdy (pokud nejsou lp_nazvy) */}\n                {(!order.financovani?.lp_nazvy || order.financovani.lp_nazvy.length === 0) &&\n                 order.financovani?.lp_kody && Array.isArray(order.financovani.lp_kody) && order.financovani.lp_kody.length > 0 && (\n                  <InfoRow>\n                    <InfoLabel>LP kdy:</InfoLabel>\n                    <InfoValue style={{ fontSize: '0.9em' }}>\n                      {highlightSearchText(order.financovani.lp_kody.join(', '), globalFilter)}\n                    </InfoValue>\n                  </InfoRow>\n                )}\n\n                {/* Dal dynamick data financovn */}\n                {order.financovani && typeof order.financovani === 'object' && (() => {\n                  const fin = order.financovani;\n                  const skipKeys = ['typ', 'typ_nazev', 'nazev', 'lp_kody', 'lp_nazvy', 'kod_stavu', 'nazev_stavu', 'label'];\n                  const extraKeys = Object.keys(fin).filter(key => !skipKeys.includes(key) && fin[key] != null);\n\n                  return extraKeys.map(key => {\n                    const value = fin[key];\n                    const displayValue = Array.isArray(value) ? value.join(', ') : String(value);\n                    const labelMap = {\n                      'cislo': 'slo',\n                      'poznamka': 'Poznmka',\n                      'cislo_smlouvy': 'slo smlouvy',\n                      'smlouva_cislo': 'slo smlouvy',\n                      'poznamka_smlouvy': 'Poznmka smlouvy',\n                      'cislo_pojistne_udalosti': 'slo pojistn udlosti',\n                      'poznamka_pojistne_udalosti': 'Poznmka',\n                      'individualni_schvaleni': 'slo schvlen',\n                      'individualni_poznamka': 'Poznmka',\n                      'individualni_schvaleni_poznamka': 'Poznmka',\n                      'pokladna_cislo': 'slo',\n                      'pokladna_poznamka': 'Poznmka',\n                      'castka': 'stka',\n                      'datum': 'Datum',\n                      'schvalovaci_osoba': 'Schvalujc osoba'\n                    };\n                    const label = labelMap[key] || key.replace(/_/g, ' ').replace(/^\\w/, c => c.toUpperCase());\n\n                    return (\n                      <InfoRow key={key}>\n                        <InfoLabel>{label}:</InfoLabel>\n                        <InfoValue style={{ fontSize: '0.9em' }}>\n                          {highlightSearchText(displayValue, globalFilter)}\n                        </InfoValue>\n                      </InfoRow>\n                    );\n                  });\n                })()}\n              </>\n            )}\n\n            {/* Oddlovac ra */}\n            {(hasStrediska || order.financovani) && (\n              <div style={{\n                borderBottom: '2px solid #e2e8f0',\n                margin: '0.75rem 0',\n                boxShadow: '0 1px 2px rgba(0,0,0,0.05)'\n              }} />\n            )}\n\n            {/* Oddlovac linka */}\n            <div style={{\n              borderBottom: '1px solid #e5e7eb',\n              margin: '0.75rem 0'\n            }} />\n\n            {/* Max cena s DPH */}\n            <InfoRow>\n              <InfoLabel>Max. cena s DPH:</InfoLabel>\n              <InfoValue style={{ fontWeight: 700, color: '#059669', fontSize: '1.1em', whiteSpace: 'nowrap' }}>\n                {order.max_cena_s_dph ? <>{parseFloat(order.max_cena_s_dph).toLocaleString('cs-CZ')}&nbsp;K</> : '---'}\n              </InfoValue>\n            </InfoRow>\n\n            {/* Druh objednvky */}\n            <InfoRow>\n              <InfoLabel>Druh objednvky:</InfoLabel>\n              <InfoValue style={{ fontWeight: 500, fontSize: '0.9em' }}>\n                {(() => {\n                  // Podpora rznch formt dat z backendu\n                  // 1. Enriched: order.druh_objednavky = {kod, nazev}\n                  if (order.druh_objednavky?.nazev) {\n                    return order.druh_objednavky.nazev;\n                  }\n                  // 2. Direct: order.druh_objednavky_nazev (string)\n                  if (order.druh_objednavky_nazev) {\n                    return order.druh_objednavky_nazev;\n                  }\n                  // 3. Code only: order.druh_objednavky_kod (string) - pelo pes API slovnk\n                  if (order.druh_objednavky_kod) {\n                    return getDruhObjednavkyNazev(order.druh_objednavky_kod);\n                  }\n                  // 4. String value: order.druh_objednavky (string) - pelo pes API slovnk\n                  if (typeof order.druh_objednavky === 'string') {\n                    return getDruhObjednavkyNazev(order.druh_objednavky);\n                  }\n                  return '---';\n                })()}\n              </InfoValue>\n            </InfoRow>\n\n            {/* POLOKY - CENY */}\n            {hasPolozky && (\n              <>\n                {/* Poet poloek */}\n                <InfoRow>\n                  <InfoLabel>Poet poloek:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500 }}>\n                    {order.polozky_count || polozky.length} ks\n                  </InfoValue>\n                </InfoRow>\n\n                {/* Poloky - cena s DPH */}\n                {order.polozky_celkova_cena_s_dph && parseFloat(order.polozky_celkova_cena_s_dph) > 0 && (\n                  <InfoRow>\n                    <InfoLabel>Poloky (s DPH):</InfoLabel>\n                    <InfoValue style={{ fontWeight: 600, color: '#3b82f6', whiteSpace: 'nowrap' }}>\n                      {parseFloat(order.polozky_celkova_cena_s_dph).toLocaleString('cs-CZ')}&nbsp;K\n                    </InfoValue>\n                  </InfoRow>\n                )}\n              </>\n            )}\n\n            {/* Oddlovac linka */}\n            <div style={{\n              borderBottom: '1px solid #e5e7eb',\n              margin: '0.75rem 0'\n            }} />\n\n            {/* FAKTURY - CENY */}\n            {hasFaktury && (\n              <>\n                {/* Faktury - celkov stka s DPH */}\n                {order.faktury_celkova_castka_s_dph && parseFloat(order.faktury_celkova_castka_s_dph) > 0 && (\n                  <InfoRow>\n                    <InfoLabel>Faktury (s DPH):</InfoLabel>\n                    <InfoValue style={{ fontWeight: 600, color: '#7c3aed', whiteSpace: 'nowrap' }}>\n                      {parseFloat(order.faktury_celkova_castka_s_dph).toLocaleString('cs-CZ')}&nbsp;K\n                    </InfoValue>\n                  </InfoRow>\n                )}\n\n                {/* Poet faktur */}\n                <InfoRow>\n                  <InfoLabel>Poet faktur:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500 }}>\n                    {order.faktury_count || faktury.length} ks\n                  </InfoValue>\n                </InfoRow>\n              </>\n            )}\n          </InfoCard>\n\n          {/*  */}\n          {/* 3 ODPOVDN OSOBY */}\n          {/*  */}\n          <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n            <InfoCardTitle>\n              <FontAwesomeIcon icon={faUsers} />\n              Odpovdn osoby\n            </InfoCardTitle>\n\n            {/* Objednatel */}\n            <InfoRow>\n              <InfoLabel>Objednatel:</InfoLabel>\n              <InfoValue>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '2px', alignItems: 'flex-end' }}>\n                  <span style={{ fontWeight: 500 }}>\n                    {order.objednatel?.cele_jmeno || order.uzivatel?.cele_jmeno || getUserDisplayName(order.uzivatel_id) || '---'}\n                  </span>\n                </div>\n              </InfoValue>\n            </InfoRow>\n            {(order.objednatel?.email || order.uzivatel?.email) && (\n              <div style={{\n                textAlign: 'right',\n                fontSize: '0.85em',\n                color: '#6b7280',\n                marginTop: '-0.3rem',\n                marginBottom: '0.5rem',\n                paddingRight: '0',\n                wordBreak: 'break-all'\n              }}>\n                {order.objednatel?.email || order.uzivatel?.email}\n              </div>\n            )}\n\n            {/* Garant */}\n            {order.garant_uzivatel && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Garant:</InfoLabel>\n                  <InfoValue>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '2px', alignItems: 'flex-end' }}>\n                      <span style={{ fontWeight: 500 }}>\n                        {order.garant_uzivatel.cele_jmeno || getUserDisplayName(order.garant_uzivatel.id) || '---'}\n                      </span>\n                    </div>\n                  </InfoValue>\n                </InfoRow>\n                {order.garant_uzivatel.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.garant_uzivatel.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Pkazce */}\n            {order.prikazce && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Pkazce:</InfoLabel>\n                  <InfoValue>\n                    <span style={{ fontWeight: 500 }}>\n                      {order.prikazce.cele_jmeno || getUserDisplayName(order.prikazce.id) || '---'}\n                    </span>\n                  </InfoValue>\n                </InfoRow>\n                {order.prikazce.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.prikazce.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Schvalovatel */}\n            {order.schvalovatel && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Schvalovatel:</InfoLabel>\n                  <InfoValue>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '2px', alignItems: 'flex-end' }}>\n                      <span style={{ fontWeight: 500 }}>\n                        {order.schvalovatel.cele_jmeno || getUserDisplayName(order.schvalovatel.id) || '---'}\n                      </span>\n                    </div>\n                  </InfoValue>\n                </InfoRow>\n                {order.schvalovatel.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.schvalovatel.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Odeslatel */}\n            {order.odesilatel && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Odeslatel:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500, color: '#0891b2' }}>\n                    {order.odesilatel.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.odesilatel.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.odesilatel.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Dodavatel potvrdil */}\n            {order.dodavatel_potvrdil && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Dodavatel potvrdil:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500, color: '#0891b2' }}>\n                    {order.dodavatel_potvrdil.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.dodavatel_potvrdil.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.dodavatel_potvrdil.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Zveejnil */}\n            {order.zverejnil && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Zveejnil:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500, color: '#0891b2' }}>\n                    {order.zverejnil.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.zverejnil.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.zverejnil.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Fakturant */}\n            {order.fakturant && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Fakturant:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500, color: '#7c3aed' }}>\n                    {order.fakturant.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.fakturant.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.fakturant.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Potvrdil vcnou sprvnost */}\n            {order.potvrdil_vecnou_spravnost && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Potvrdil vcnou sprvnost:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 500, color: '#0891b2' }}>\n                    {order.potvrdil_vecnou_spravnost.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.potvrdil_vecnou_spravnost.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.potvrdil_vecnou_spravnost.email}\n                  </div>\n                )}\n              </>\n            )}\n\n            {/* Dokonil objednvku */}\n            {order.dokoncil && (\n              <>\n                <InfoRow>\n                  <InfoLabel>Dokonil objednvku:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 600, color: '#16a34a' }}>\n                    {order.dokoncil.cele_jmeno || '---'}\n                  </InfoValue>\n                </InfoRow>\n                {order.dokoncil.email && (\n                  <div style={{\n                    textAlign: 'right',\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    marginTop: '-0.3rem',\n                    marginBottom: '0.5rem',\n                    wordBreak: 'break-all'\n                  }}>\n                    {order.dokoncil.email}\n                  </div>\n                )}\n              </>\n            )}\n          </InfoCard>\n\n          {/*  */}\n          {/* 4 WORKFLOW KROKY */}\n          {/*  */}\n          <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n            <InfoCardTitle>\n              <FontAwesomeIcon icon={faListCheck} />\n              Workflow kroky\n            </InfoCardTitle>\n\n            {/* Vytvoil */}\n            {order.uzivatel && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#3b82f6' }}>\n                    1. Vytvoil\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.uzivatel.cele_jmeno}\n                  </div>\n                </div>\n                {order.uzivatel.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(order.uzivatel.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Schvlil */}\n            {order.schvalovatel && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#059669' }}>\n                    2. Schvlil\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.schvalovatel.cele_jmeno}\n                  </div>\n                </div>\n                {order.schvalovatel.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(order.schvalovatel.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Odeslal */}\n            {order.odesilatel && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#0891b2' }}>\n                    3. Odeslal dodavateli\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.odesilatel.cele_jmeno}\n                  </div>\n                </div>\n                {order.odesilatel.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(order.odesilatel.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Dodavatel potvrdil */}\n            {order.dodavatel_potvrdil && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#7c3aed' }}>\n                    4. Dodavatel potvrdil\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.dodavatel_potvrdil.cele_jmeno}\n                  </div>\n                </div>\n                {order.dodavatel_potvrdil.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {formatDateOnly(order.dodavatel_potvrdil.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Zveejnil */}\n            {order.zverejnil && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#f59e0b' }}>\n                    5. Zveejnil\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.zverejnil.cele_jmeno}\n                  </div>\n                </div>\n                {order.zverejnil.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {formatDateOnly(order.zverejnil.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Pidal fakturu */}\n            {order.fakturant && order.faktury && order.faktury.length > 0 && (() => {\n              // Najdeme posledn pidanou fakturu (s nejnovjm dt_vytvoreni)\n              const fakturaSejtimem = order.faktury\n                .filter(f => f.dt_vytvoreni)\n                .sort((a, b) => new Date(b.dt_vytvoreni) - new Date(a.dt_vytvoreni))[0];\n              \n              if (!fakturaSejtimem) return null;\n              \n              return (\n                <div style={{\n                  marginBottom: '0.75rem',\n                  paddingBottom: '0.75rem',\n                  borderBottom: '1px dashed #e2e8f0'\n                }}>\n                  <div style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    marginBottom: '2px'\n                  }}>\n                    <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#ea580c' }}>\n                      6. Pidal fakturu\n                    </div>\n                    <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                      {order.fakturant.cele_jmeno}\n                    </div>\n                  </div>\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(fakturaSejtimem.dt_vytvoreni)}\n                  </div>\n                </div>\n              );\n            })()}\n\n            {/* Potvrdil vcnou sprvnost */}\n            {order.potvrdil_vecnou_spravnost && (\n              <div style={{\n                marginBottom: '0.75rem',\n                paddingBottom: '0.75rem',\n                borderBottom: '1px dashed #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#0891b2' }}>\n                    7. Potvrdil vcnou sprvnost\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.potvrdil_vecnou_spravnost.cele_jmeno}\n                  </div>\n                </div>\n                {order.potvrdil_vecnou_spravnost.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(order.potvrdil_vecnou_spravnost.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Dokonil */}\n            {order.dokoncil && (\n              <div style={{\n                marginBottom: '0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '2px'\n                }}>\n                  <div style={{ fontWeight: 600, fontSize: '0.85em', color: '#16a34a' }}>\n                    8. Dokonil objednvku\n                  </div>\n                  <div style={{ fontSize: '0.9em', fontWeight: 500 }}>\n                    {order.dokoncil.cele_jmeno}\n                  </div>\n                </div>\n                {order.dokoncil.datum && (\n                  <div style={{\n                    fontSize: '0.75em',\n                    color: '#64748b',\n                    textAlign: 'right'\n                  }}>\n                    {prettyDate(order.dokoncil.datum)}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Posledn aktualizace */}\n            {order.uzivatel_akt && (\n              <div style={{\n                marginTop: '0.75rem',\n                paddingTop: '0.75rem',\n                borderTop: '2px solid #e2e8f0'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  gap: '8px'\n                }}>\n                  <div style={{ flex: 1 }}>\n                    <div style={{ fontWeight: 600, fontSize: '0.75em', color: '#94a3b8', marginBottom: '2px', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                      Posledn zmna\n                    </div>\n                    <div style={{ fontSize: '0.85em', color: '#64748b' }}>\n                      {order.uzivatel_akt.cele_jmeno}\n                    </div>\n                  </div>\n                  {order.uzivatel_akt.datum && (\n                    <div style={{\n                      fontSize: '0.75em',\n                      color: '#94a3b8',\n                      textAlign: 'right',\n                      whiteSpace: 'nowrap'\n                    }}>\n                      {prettyDate(order.uzivatel_akt.datum)}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </InfoCard>\n\n          {/*  */}\n          {/* TSLOUPCOV LAYOUT: Dodavatel | Poloky+Faktury | Plohy */}\n          {/*  */}\n          <ThreeColumnLayout>\n            {/*  */}\n            {/* LEV SLOUPEC: DODAVATEL */}\n            {/*  */}\n            <SupplierColumn>\n              <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n                <InfoCardTitle>\n                  <FontAwesomeIcon icon={faBuilding} />\n                  Dodavatel\n                </InfoCardTitle>\n\n                <InfoRow>\n                  <InfoLabel>Nzev:</InfoLabel>\n                  <InfoValue style={{ fontWeight: 600 }}>\n                    {highlightSearchText(order.dodavatel_nazev || '---', globalFilter)}\n                  </InfoValue>\n                </InfoRow>\n\n                <InfoRow>\n                  <InfoLabel>IO:</InfoLabel>\n                  <InfoValue style={{ fontFamily: 'monospace', fontSize: '0.95em' }}>\n                    {highlightSearchText(order.dodavatel_ico || '---', globalFilter)}\n                  </InfoValue>\n                </InfoRow>\n\n                {order.dodavatel_adresa && (\n                  <InfoRow>\n                    <InfoLabel>Adresa:</InfoLabel>\n                    <InfoValue>{highlightSearchText(order.dodavatel_adresa, globalFilter)}</InfoValue>\n                  </InfoRow>\n                )}\n\n                {order.dodavatel_zastoupeny && (\n                  <InfoRow>\n                    <InfoLabel>Zstupce firmy:</InfoLabel>\n                    <InfoValue style={{ fontWeight: 500 }}>\n                      {highlightSearchText(order.dodavatel_zastoupeny, globalFilter)}\n                    </InfoValue>\n                  </InfoRow>\n                )}\n\n                {/* Oddlovac linka ped kontaktn osobou */}\n                {(order.dodavatel_kontakt_jmeno || order.dodavatel_kontakt_email || order.dodavatel_kontakt_telefon) && (\n                  <div style={{\n                    margin: '0.75rem 0',\n                    borderTop: '1px solid #e5e7eb'\n                  }} />\n                )}\n\n                {order.dodavatel_kontakt_jmeno && (\n                  <InfoRow>\n                    <InfoLabel>Kontakt:</InfoLabel>\n                    <InfoValue style={{ fontWeight: 500 }}>\n                      {highlightSearchText(order.dodavatel_kontakt_jmeno, globalFilter)}\n                    </InfoValue>\n                  </InfoRow>\n                )}\n\n                {order.dodavatel_kontakt_email && (\n                  <InfoRow>\n                    <InfoLabel>E-mail:</InfoLabel>\n                    <InfoValue style={{ wordBreak: 'break-all' }}>\n                      {highlightSearchText(order.dodavatel_kontakt_email, globalFilter)}\n                    </InfoValue>\n                  </InfoRow>\n                )}\n\n                {order.dodavatel_kontakt_telefon && (\n                  <InfoRow>\n                    <InfoLabel>Telefon:</InfoLabel>\n                    <InfoValue>{highlightSearchText(order.dodavatel_kontakt_telefon, globalFilter)}</InfoValue>\n                  </InfoRow>\n                )}\n              </InfoCard>\n            </SupplierColumn>\n\n            {/*  */}\n            {/* PROSTEDN SLOUPEC: POLOKY + FAKTURY */}\n            {/*  */}\n            <MiddleColumn>\n              {/*  */}\n              {/* 6 POLOKY OBJEDNVKY - KOMPLETN S DPH */}\n              {/*  */}\n              <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n                <InfoCardTitle>\n                  <FontAwesomeIcon icon={faList} />\n                  Poloky objednvky ({order.polozky_count || polozky.length})\n                </InfoCardTitle>\n\n              {hasPolozky ? (\n\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px', marginTop: '8px' }}>\n                {polozky.slice(0, 10).map((polozka, index) => (\n                  <ListItemCard key={index}>\n                    <ListItemHeader>\n                      <ListItemTitle>\n                        {highlightSearchText(polozka.popis || polozka.nazev || `Poloka ${index + 1}`, globalFilter)}\n                        {polozka.id && (\n                          <sup style={{\n                            fontSize: '0.6em',\n                            color: '#94a3b8',\n                            fontWeight: 400,\n                            marginLeft: '4px'\n                          }}>\n                            #{polozka.id}\n                          </sup>\n                        )}\n                      </ListItemTitle>\n\n                      {/* Cena s DPH - hlavn hodnota */}\n                      {polozka.cena_s_dph && (\n                        <div style={{\n                          fontWeight: 700,\n                          fontSize: '1em',\n                          color: '#059669',\n                          whiteSpace: 'nowrap'\n                        }}>\n                          {parseFloat(polozka.cena_s_dph).toLocaleString('cs-CZ')}&nbsp;K\n                        </div>\n                      )}\n                    </ListItemHeader>\n\n                    {/* Tagy pod nzvem - sek, budova, mstnost, poznmka umstn */}\n                    {(polozka.mistnost_kod || polozka.budova_kod || polozka.usek_kod || polozka.poznamka_umisteni) && (\n                      <div style={{\n                        display: 'flex',\n                        flexWrap: 'wrap',\n                        gap: '6px',\n                        marginTop: '6px',\n                        marginBottom: '8px'\n                      }}>\n                        {polozka.usek_kod && (\n                          <span style={{\n                            display: 'inline-block',\n                            padding: '3px 8px',\n                            fontSize: '0.75em',\n                            fontWeight: 500,\n                            backgroundColor: '#f3e8ff',\n                            color: '#6b21a8',\n                            borderRadius: '4px',\n                            border: '1px solid #d8b4fe'\n                          }}>\n                            sek: {highlightSearchText(polozka.usek_kod, globalFilter)}\n                          </span>\n                        )}\n\n                        {polozka.budova_kod && (\n                          <span style={{\n                            display: 'inline-block',\n                            padding: '3px 8px',\n                            fontSize: '0.75em',\n                            fontWeight: 500,\n                            backgroundColor: '#dbeafe',\n                            color: '#1e40af',\n                            borderRadius: '4px',\n                            border: '1px solid #93c5fd'\n                          }}>\n                            Budova: {highlightSearchText(polozka.budova_kod, globalFilter)}\n                          </span>\n                        )}\n\n                        {polozka.mistnost_kod && (\n                          <span style={{\n                            display: 'inline-block',\n                            padding: '3px 8px',\n                            fontSize: '0.75em',\n                            fontWeight: 500,\n                            backgroundColor: '#dbeafe',\n                            color: '#1e40af',\n                            borderRadius: '4px',\n                            border: '1px solid #93c5fd'\n                          }}>\n                            Mstnost: {highlightSearchText(polozka.mistnost_kod, globalFilter)}\n                          </span>\n                        )}\n\n                        {polozka.poznamka_umisteni && (\n                          <span style={{\n                            display: 'inline-block',\n                            padding: '3px 8px',\n                            fontSize: '0.75em',\n                            fontStyle: 'italic',\n                            backgroundColor: '#fef3c7',\n                            color: '#92400e',\n                            borderRadius: '4px',\n                            border: '1px solid #fde68a'\n                          }}>\n                            {highlightSearchText(polozka.poznamka_umisteni, globalFilter)}\n                          </span>\n                        )}\n                      </div>\n                    )}\n\n                    <ListItemMeta>\n                      {/* Poet */}\n                      {polozka.pocet && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>Poet:</span>\n                          <span>{polozka.pocet} {polozka.jednotka || 'ks'}</span>\n                        </ListItemMetaItem>\n                      )}\n\n                      {/* Jednotkov cena bez DPH */}\n                      {polozka.jednotkova_cena_bez_dph && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>Jedn. bez DPH:</span>\n                          <span>{parseFloat(polozka.jednotkova_cena_bez_dph).toLocaleString('cs-CZ')}&nbsp;K</span>\n                        </ListItemMetaItem>\n                      )}\n\n                      {/* Jednotkov cena s DPH */}\n                      {polozka.jednotkova_cena_s_dph && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>Jedn. s DPH:</span>\n                          <span>{parseFloat(polozka.jednotkova_cena_s_dph).toLocaleString('cs-CZ')}&nbsp;K</span>\n                        </ListItemMetaItem>\n                      )}\n\n                      {/* Cena bez DPH celkem */}\n                      {polozka.cena_bez_dph && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>Bez DPH:</span>\n                          <span style={{ color: '#64748b' }}>\n                            {parseFloat(polozka.cena_bez_dph).toLocaleString('cs-CZ')}&nbsp;K\n                          </span>\n                        </ListItemMetaItem>\n                      )}\n\n                      {/* DPH procento */}\n                      {polozka.dph_procento && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>DPH:</span>\n                          <span>{polozka.dph_procento}%</span>\n                        </ListItemMetaItem>\n                      )}\n\n                      {/* DPH stka */}\n                      {polozka.dph_castka && (\n                        <ListItemMetaItem>\n                          <span style={{ fontWeight: 500 }}>DPH stka:</span>\n                          <span>\n                            {parseFloat(polozka.dph_castka).toLocaleString('cs-CZ')}&nbsp;K\n                          </span>\n                        </ListItemMetaItem>\n                      )}\n                    </ListItemMeta>\n                  </ListItemCard>\n                ))}\n\n                {polozky.length > 10 && (\n                  <div style={{\n                    fontSize: '0.85em',\n                    color: '#6b7280',\n                    fontStyle: 'italic',\n                    textAlign: 'center',\n                    padding: '8px'\n                  }}>\n                    ... a dalch {polozky.length - 10} poloek\n                  </div>\n                )}\n\n                {/* Spolen poznmka k polokm */}\n                {order.poznamka && (\n                  <div style={{\n                    marginTop: '12px',\n                    padding: '10px 12px',\n                    backgroundColor: '#fffbeb',\n                    border: '1px solid #fde68a',\n                    borderRadius: '6px',\n                    fontSize: '0.9em',\n                    color: '#92400e',\n                    fontStyle: 'italic'\n                  }}>\n                    <strong style={{ fontStyle: 'normal', fontWeight: 600 }}>Poznmka k polokm:</strong>\n                    <div style={{ marginTop: '4px' }}>\n                      {highlightSearchText(order.poznamka, globalFilter)}\n                    </div>\n                  </div>\n                )}\n              </div>\n              ) : (\n                <div style={{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  padding: '2rem',\n                  color: '#94a3b8',\n                  fontSize: '0.9em'\n                }}>\n                  <FontAwesomeIcon icon={faList} style={{ fontSize: '3em', marginBottom: '1rem', opacity: 0.3 }} />\n                  <div>dn poloky</div>\n                </div>\n              )}\n            </InfoCard>\n\n          {/*  */}\n          {/* 7 FAKTURY - KOMPLETN S DPH A PLOHAMI */}\n          {/*  */}\n          <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n            <InfoCardTitle>\n              <FontAwesomeIcon icon={faReceipt} />\n              Faktury ({order.faktury_count || faktury.length})\n            </InfoCardTitle>\n\n            {hasFaktury ? (\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '12px', marginTop: '8px' }}>\n                {faktury.map((faktura, index) => {\n                  return (\n                    <ListItemCard key={index}>\n                      {/* Nadpis: Faktura 1 - slo */}\n                      <div style={{\n                        fontSize: '1.1em',\n                        fontWeight: 700,\n                        color: '#059669',\n                        marginBottom: '8px'\n                      }}>\n                        Faktura {index + 1} - {highlightSearchText(faktura.fa_cislo_vema || faktura.cislo_faktury || `${index + 1}`, globalFilter)}\n                      </div>\n\n                      <ListItemHeader style={{ marginTop: '8px' }}>\n                        <ListItemTitle style={{ fontSize: '0.9em', color: '#64748b' }}>\n                          slo faktury: {highlightSearchText(faktura.fa_cislo_vema || faktura.cislo_faktury || `Faktura ${index + 1}`, globalFilter)}\n                        </ListItemTitle>\n\n                        {/* Stav faktury */}\n                        {faktura.stav && (\n                          <ListItemBadge\n                            $success={faktura.stav === 'ZAPLACENA'}\n                            $warning={faktura.stav === 'NEZAPLACENA'}\n                          >\n                            {faktura.stav === 'ZAPLACENA' && <FontAwesomeIcon icon={faCheckCircle} />}\n                            {faktura.stav === 'NEZAPLACENA' && <FontAwesomeIcon icon={faHourglassHalf} />}\n                            {faktura.stav}\n                          </ListItemBadge>\n                        )}\n                      </ListItemHeader>\n\n                      <ListItemMeta>\n                        {/* slo faktury VEMA */}\n                        {faktura.fa_cislo_vema && (\n                          <ListItemMetaItem>\n                            <span style={{ fontWeight: 500 }}>slo faktury: {highlightSearchText(faktura.fa_cislo_vema, globalFilter)}</span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* Datum vystaven */}\n                        {(faktura.fa_datum_vystaveni || faktura.dt_vystaveni) && (\n                          <ListItemMetaItem>\n                            <span>Vystavena: {formatDateOnly(faktura.fa_datum_vystaveni || faktura.dt_vystaveni)}</span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* Datum doruen */}\n                        {faktura.fa_datum_doruceni && (\n                          <ListItemMetaItem>\n                            <span>Doruena: {formatDateOnly(faktura.fa_datum_doruceni)}</span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* Datum splatnosti */}\n                        {(faktura.fa_datum_splatnosti || faktura.dt_splatnosti) && (\n                          <ListItemMetaItem>\n                            <span>Splatnost: {formatDateOnly(faktura.fa_datum_splatnosti || faktura.dt_splatnosti)}</span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* stka bez DPH */}\n                        {faktura.castka_bez_dph && parseFloat(faktura.castka_bez_dph) > 0 && (\n                          <ListItemMetaItem>\n                            <span style={{ fontWeight: 500 }}>Bez DPH:</span>\n                            <span style={{ color: '#64748b' }}>\n                              {parseFloat(faktura.castka_bez_dph).toLocaleString('cs-CZ')}&nbsp;K\n                            </span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* DPH stka */}\n                        {faktura.dph_castka && parseFloat(faktura.dph_castka) > 0 && (\n                          <ListItemMetaItem>\n                            <span style={{ fontWeight: 500 }}>DPH:</span>\n                            <span style={{ color: '#f59e0b' }}>\n                              {parseFloat(faktura.dph_castka).toLocaleString('cs-CZ')}&nbsp;K\n                            </span>\n                          </ListItemMetaItem>\n                        )}\n\n                        {/* stka s DPH - HLAVN HODNOTA */}\n                        {faktura.castka_s_dph && parseFloat(faktura.castka_s_dph) > 0 && (\n                          <ListItemMetaItem>\n                            <span style={{ fontWeight: 700, color: '#059669', fontSize: '1.05em' }}>\n                              {parseFloat(faktura.castka_s_dph).toLocaleString('cs-CZ')}&nbsp;K\n                            </span>\n                          </ListItemMetaItem>\n                        )}\n                      </ListItemMeta>\n\n                      {/* Stediska faktury */}\n                      {faktura.fa_strediska_kod && Array.isArray(faktura.fa_strediska_kod) && faktura.fa_strediska_kod.length > 0 && (\n                        <div style={{\n                          marginTop: '6px',\n                          fontSize: '0.85em',\n                          color: '#475569',\n                          paddingTop: '6px',\n                          borderTop: '1px dashed #e2e8f0'\n                        }}>\n                          <span style={{ fontWeight: 500 }}>Stediska:</span> {highlightSearchText(\n                            faktura.fa_strediska_kod.map(kod => getStrediskoNazev(String(kod))).join(', '), \n                            globalFilter\n                          )}\n                        </div>\n                      )}\n\n                      {/* Poznmka k faktue */}\n                      {faktura.fa_poznamka && (\n                        <div style={{\n                          marginTop: '8px',\n                          padding: '8px 10px',\n                          backgroundColor: '#fef9e7',\n                          border: '1px solid #fde68a',\n                          borderRadius: '4px',\n                          fontSize: '0.85em',\n                          color: '#92400e',\n                          whiteSpace: 'pre-wrap',\n                          lineHeight: '1.4'\n                        }}>\n                          <div style={{ fontWeight: 600, marginBottom: '4px' }}>\n                            Poznmka:\n                          </div>\n                          {highlightSearchText(faktura.fa_poznamka, globalFilter)}\n                        </div>\n                      )}\n                    </ListItemCard>\n                  );\n                })}\n              </div>\n            ) : (\n              <div style={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                padding: '2rem',\n                color: '#94a3b8',\n                fontSize: '0.9em'\n              }}>\n                <FontAwesomeIcon icon={faReceipt} style={{ fontSize: '3em', marginBottom: '1rem', opacity: 0.3 }} />\n                <div>dn faktury</div>\n              </div>\n            )}\n          </InfoCard>\n            </MiddleColumn>\n\n            {/*  */}\n            {/* PRAV SLOUPEC: PLOHY */}\n            {/*  */}\n            <AttachmentsColumn>\n          {/*  */}\n          {/* 8 VECHNY PLOHY - KATEGORIZOVAN */}\n          {/*  */}\n            <InfoCard $order={order} $showRowHighlighting={showRowHighlighting}>\n              <InfoCardTitle>\n                <FontAwesomeIcon icon={faPaperclip} />\n                Plohy ({\n                  (order.prilohy_count || prilohy.length) +\n                  (dodatecneDokumenty.length) +\n                  (faktury.reduce((sum, f) => sum + ((f.prilohy && f.prilohy.length) || 0), 0))\n                })\n              </InfoCardTitle>\n\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '16px', marginTop: '8px' }}>\n\n                {/*  PLOHY OBJEDNVKY */}\n                {hasPrilohy && (\n                  <div>\n                    <div style={{\n                      fontWeight: 600,\n                      fontSize: '0.95em',\n                      color: '#1e40af',\n                      marginBottom: '8px',\n                      paddingBottom: '4px',\n                      borderBottom: '2px solid #dbeafe'\n                    }}>\n                      Plohy objednvky ({order.prilohy_count || prilohy.length})\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                      {prilohy.slice(0, 10).map((priloha, index) => (\n                        <AttachmentItem key={index}>\n                          <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '2px' }}>\n                            <AttachmentName style={{ fontWeight: 500 }}>\n                              {highlightSearchText(priloha.nazev_souboru || priloha.nazev || `Ploha ${index + 1}`, globalFilter)}\n                            </AttachmentName>\n                            <div style={{ fontSize: '0.8em', color: '#94a3b8' }}>\n                              {priloha.dt_nahrano && formatDateOnly(priloha.dt_nahrano)}\n                              {priloha.popis && <>  {highlightSearchText(priloha.popis, globalFilter)}</>}\n                            </div>\n                          </div>\n                          {priloha.velikost && (\n                            <AttachmentSize>\n                              ({Math.round(priloha.velikost / 1024)} KB)\n                            </AttachmentSize>\n                          )}\n                          <FontAwesomeIcon\n                            icon={faDownload}\n                            style={{\n                              color: '#3b82f6',\n                              cursor: 'pointer',\n                              marginLeft: '8px'\n                            }}\n                            title=\"Sthnout plohu\"\n                            onClick={() => handleDownloadAttachment(priloha, order.id)}\n                          />\n                        </AttachmentItem>\n                      ))}\n\n                      {prilohy.length > 10 && (\n                        <div style={{\n                          fontSize: '0.85em',\n                          color: '#6b7280',\n                          fontStyle: 'italic',\n                          textAlign: 'center',\n                          padding: '8px'\n                        }}>\n                          ... a dalch {prilohy.length - 10} ploh\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/*  DODATEN DOKUMENTY */}\n                {hasDodatecneDokumenty && (\n                  <div>\n                    <div style={{\n                      fontWeight: 600,\n                      fontSize: '0.95em',\n                      color: '#7c3aed',\n                      marginBottom: '8px',\n                      paddingBottom: '4px',\n                      borderBottom: '2px solid #ede9fe'\n                    }}>\n                      Dodaten dokumenty ({dodatecneDokumenty.length})\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                      {dodatecneDokumenty.map((dokument, index) => (\n                        <AttachmentItem key={index}>\n                          <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '2px' }}>\n                            <AttachmentName style={{ fontWeight: 500 }}>\n                              {highlightSearchText(dokument.nazev_souboru || dokument.nazev || `Dokument ${index + 1}`, globalFilter)}\n                            </AttachmentName>\n                            <div style={{ fontSize: '0.8em', color: '#94a3b8' }}>\n                              {dokument.dt_nahrano && formatDateOnly(dokument.dt_nahrano)}\n                              {dokument.popis && <>  {highlightSearchText(dokument.popis, globalFilter)}</>}\n                            </div>\n                          </div>\n                          {dokument.velikost && (\n                            <AttachmentSize>\n                              ({Math.round(dokument.velikost / 1024)} KB)\n                            </AttachmentSize>\n                          )}\n                          <FontAwesomeIcon\n                            icon={faDownload}\n                            style={{\n                              color: '#7c3aed',\n                              cursor: 'pointer',\n                              marginLeft: '8px'\n                            }}\n                            title=\"Sthnout dokument\"\n                            onClick={() => handleDownloadAttachment(dokument, order.id)}\n                          />\n                        </AttachmentItem>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/*  PLOHY FAKTUR */}\n                {hasFaktury && faktury.some(f => f.prilohy && f.prilohy.length > 0) && (\n                  <div>\n                    <div style={{\n                      fontWeight: 600,\n                      fontSize: '0.95em',\n                      color: '#059669',\n                      marginBottom: '8px',\n                      paddingBottom: '4px',\n                      borderBottom: '2px solid #d1fae5'\n                    }}>\n                      Plohy faktur ({faktury.reduce((sum, f) => sum + ((f.prilohy && f.prilohy.length) || 0), 0)})\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                      {faktury.map((faktura, fIndex) => {\n                        const fakturaPrilohy = faktura.prilohy || [];\n                        if (!fakturaPrilohy.length) return null;\n\n                        return fakturaPrilohy.map((priloha, pIndex) => {\n                          //  Pidej faktura_id do plohy pro sprvn download\n                          const prilohaWithFakturaId = { ...priloha, faktura_id: faktura.id };\n                          \n                          return (\n                            <AttachmentItem key={`${fIndex}-${pIndex}`}>\n                            <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '2px' }}>\n                              <AttachmentName style={{ fontWeight: 500 }}>\n                                {highlightSearchText(priloha.originalni_nazev_souboru || priloha.nazev_souboru || priloha.nazev || 'Dokument', globalFilter)}\n                                <span style={{ color: '#047857', fontWeight: 600, marginLeft: '6px' }}>\n                                  [{faktura.cislo_faktury || `Faktura ${fIndex + 1}`}]\n                                </span>\n                              </AttachmentName>\n                              {priloha.popis && (\n                                <div style={{ fontSize: '0.8em', color: '#94a3b8' }}>\n                                  {highlightSearchText(priloha.popis, globalFilter)}\n                                </div>\n                              )}\n                            </div>\n                            {priloha.velikost_souboru_b && (\n                              <AttachmentSize>\n                                ({Math.round(priloha.velikost_souboru_b / 1024)} KB)\n                              </AttachmentSize>\n                            )}\n                            <FontAwesomeIcon\n                              icon={faDownload}\n                              style={{\n                                color: '#059669',\n                                cursor: 'pointer',\n                                marginLeft: '8px'\n                              }}\n                              title=\"Sthnout plohu\"\n                              onClick={() => handleDownloadAttachment(prilohaWithFakturaId, order.id)}\n                            />\n                            </AttachmentItem>\n                          );\n                        });\n                      })}\n                    </div>\n                  </div>\n                )}\n\n                {/* Pokud nejsou dn plohy */}\n                {!hasPrilohy && !hasDodatecneDokumenty && !(hasFaktury && faktury.some(f => f.prilohy && f.prilohy.length > 0)) && (\n                  <div style={{\n                    padding: '2rem',\n                    textAlign: 'center',\n                    color: '#9ca3af',\n                    fontSize: '0.95em'\n                  }}>\n                    <FontAwesomeIcon icon={faPaperclip} style={{ fontSize: '2em', marginBottom: '0.5rem', opacity: 0.3 }} />\n                    <div>dn plohy</div>\n                  </div>\n                )}\n\n              </div>\n            </InfoCard>\n            </AttachmentsColumn>\n          </ThreeColumnLayout>\n\n          {/*  */}\n        </ExpandedGrid>\n      </ExpandedContent>\n    );\n  };\n\n  //  Zobraz splash screen bhem JAKHOKOLIV natn (inicializace i refresh)\n  if (loading || !initializationComplete) {\n    return (\n      <LoadingOverlay $visible={true}>\n        <LoadingSpinner $visible={true} />\n        <LoadingMessage $visible={true}>\n          {!initializationComplete ? 'Inicializace pehledu objednvek' : 'Natn dat z databze...'}\n        </LoadingMessage>\n        <LoadingSubtext $visible={true}>\n          {!initializationComplete && !initStepsCompleted.current.dataLoaded && 'Natn dat z databze...'}\n          {!initializationComplete && initStepsCompleted.current.dataLoaded && !initStepsCompleted.current.paginationRestored && 'Obnoven strnkovn...'}\n          {!initializationComplete && initStepsCompleted.current.paginationRestored && !initStepsCompleted.current.expandedRestored && 'Rozbalovn objednvek...'}\n          {!initializationComplete && initStepsCompleted.current.expandedRestored && !initStepsCompleted.current.scrollRestored && 'Obnoven pozice...'}\n          {initializationComplete && loading && 'Prosm ekejte...'}\n        </LoadingSubtext>\n      </LoadingOverlay>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container>\n        <div style={{ textAlign: 'center', padding: '3rem' }}>\n          <FontAwesomeIcon icon={faExclamationTriangle} size=\"2x\" style={{ color: '#dc2626' }} />\n          <div style={{ marginTop: '1rem', fontSize: '1.25rem', color: '#dc2626' }}>\n            Chyba pi natn\n          </div>\n          <div style={{ marginTop: '0.5rem', color: '#64748b' }}>{error}</div>\n          <div style={{ marginTop: '1rem', display: 'flex', gap: '1rem', justifyContent: 'center' }}>\n            <ActionButton\n              onClick={handleRefresh}\n              $primary\n            >\n              <FontAwesomeIcon icon={faSyncAlt} />\n              Zkusit znovu\n            </ActionButton>\n            <ActionButton\n              onClick={() => {}}\n            >\n              <FontAwesomeIcon icon={faBolt} />\n              Debug info\n            </ActionButton>\n          </div>\n        </div>\n      </Container>\n    );\n  }\n  \n  // CustomSelect wrapper - pouv globln komponentu\n  const CustomSelectLocal = (props) => (\n    <CustomSelect\n      {...props}\n      selectStates={selectStates}\n      setSelectStates={setSearchStates}\n      searchStates={searchStates}\n      setSearchStates={setSearchStates}\n      touchedSelectFields={touchedSelectFields}\n      setTouchedSelectFields={setTouchedSelectFields}\n      hasTriedToSubmit={hasTriedToSubmit}\n      toggleSelect={toggleSelect}\n      filterOptions={filterOptions}\n      getOptionLabel={getOptionLabel}\n    />\n  );\n\n  return (\n    <>\n      {/* Loading overlay s blur efektem - MIMO Container pro sprvn zobrazen */}\n      <LoadingOverlay $visible={loading}>\n        <LoadingSpinner $visible={loading} />\n        <LoadingMessage $visible={loading}>\n          Natn dat z databze...\n        </LoadingMessage>\n        <LoadingSubtext $visible={loading}>\n          Prosm ekejte\n        </LoadingSubtext>\n      </LoadingOverlay>\n\n      <Container>\n      <PageContent $blurred={loading}>\n      \n      {/* Year Filter - prominent position above header */}\n      <YearFilterPanel>\n        <YearFilterLeft>\n          <YearFilterLabel>\n            <FontAwesomeIcon icon={faCalendarAlt} />\n            Rok:\n          </YearFilterLabel>\n          <YearDropdownContainer ref={yearSelectRef}>\n            <MonthDropdownButton onClick={toggleYearDropdown}>\n              <span>{selectedYear === 'all' ? 'Vechny roky' : selectedYear}</span>\n              <FontAwesomeIcon icon={isYearDropdownOpen ? faChevronUp : faChevronDown} />\n            </MonthDropdownButton>\n            {isYearDropdownOpen && (\n              <MonthDropdownMenu>\n                {getYearsList().map(year => (\n                  <MonthDropdownItem key={year} onClick={() => handleYearChange(year)}>\n                    {year === 'all' ? 'Vechny roky' : year}\n                  </MonthDropdownItem>\n                ))}\n              </MonthDropdownMenu>\n            )}\n          </YearDropdownContainer>\n\n          <MonthFilterLabel>\n            <FontAwesomeIcon icon={faCalendarAlt} />\n            Obdob:\n          </MonthFilterLabel>\n          <MonthDropdownContainer ref={monthSelectRef}>\n            <MonthDropdownButton onClick={toggleMonthDropdown}>\n              <span>{getMonthLabel(selectedMonth)}</span>\n              <FontAwesomeIcon icon={isMonthDropdownOpen ? faChevronUp : faChevronDown} />\n            </MonthDropdownButton>\n            {isMonthDropdownOpen && (\n              <MonthDropdownMenu>\n                <MonthDropdownItem onClick={() => handleMonthChange('all')}>\n                  Vechny msce\n                </MonthDropdownItem>\n                <MonthDropdownItem onClick={() => handleMonthChange('current-month')}>\n                  Aktuln msc\n                </MonthDropdownItem>\n                <MonthDropdownItem onClick={() => handleMonthChange('last-month')}>\n                  Posledn msc\n                </MonthDropdownItem>\n                <MonthDropdownItem onClick={() => handleMonthChange('last-quarter')}>\n                  Posledn kvartl\n                </MonthDropdownItem>\n                <MonthDropdownItem onClick={() => handleMonthChange('last-half')}>\n                  Posledn plrok\n                </MonthDropdownItem>\n                <MonthDropdownItem onClick={() => handleMonthChange('last-year')}>\n                  Posledn rok\n                </MonthDropdownItem>\n\n                {!showExpandedMonths ? (\n                  <>\n                    <MonthDropdownItem separator disabled>\n                      \n                    </MonthDropdownItem>\n                    <MonthDropdownItem action onClick={() => handleMonthChange('show-more')}>\n                       Zobrazit dal...\n                    </MonthDropdownItem>\n                  </>\n                ) : (\n                  <>\n                    <MonthDropdownItem separator disabled>\n                      \n                    </MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('1')}>Leden</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('2')}>nor</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('3')}>Bezen</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('4')}>Duben</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('5')}>Kvten</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('6')}>erven</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('7')}>ervenec</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('8')}>Srpen</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('9')}>Z</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('10')}>jen</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('11')}>Listopad</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('12')}>Prosinec</MonthDropdownItem>\n                    <MonthDropdownItem separator disabled>\n                      \n                    </MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('1-3')}>Q1 (Leden-Bezen)</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('4-6')}>Q2 (Duben-erven)</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('7-9')}>Q3 (ervenec-Z)</MonthDropdownItem>\n                    <MonthDropdownItem onClick={() => handleMonthChange('10-12')}>Q4 (jen-Prosinec)</MonthDropdownItem>\n                    <MonthDropdownItem separator disabled>\n                      \n                    </MonthDropdownItem>\n                    <MonthDropdownItem action onClick={() => handleMonthChange('show-less')}>\n                       Zobrazit mn\n                    </MonthDropdownItem>\n                  </>\n                )}\n              </MonthDropdownMenu>\n            )}\n          </MonthDropdownContainer>\n\n          {/* Checkbox pro zobrazen archivovanch objednvek */}\n          <div style={{\n            position: 'relative',\n            minWidth: '180px',\n            marginLeft: '1rem'\n          }}>\n            <MonthDropdownButton\n              as=\"label\"\n              htmlFor=\"showArchived\"\n              style={{\n                padding: '0.75rem 1rem',\n                cursor: 'pointer',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                gap: '0.75rem'\n              }}\n            >\n              <input\n                type=\"checkbox\"\n                id=\"showArchived\"\n                checked={showArchived}\n                onChange={handleShowArchivedChange}\n                style={{\n                  width: '20px',\n                  height: '20px',\n                  cursor: 'pointer',\n                  accentColor: 'rgba(255, 255, 255, 0.9)',\n                  margin: 0,\n                  flexShrink: 0\n                }}\n              />\n              <span style={{\n                flex: 1,\n                fontWeight: 600,\n                fontSize: '1rem',\n                textAlign: 'center'\n              }}>\n                ARCHIV\n              </span>\n              <FontAwesomeIcon\n                icon={faArchive}\n                style={{\n                  fontSize: '1.1rem',\n                  flexShrink: 0\n                }}\n              />\n            </MonthDropdownButton>\n          </div>\n\n          {/* Tlatko Obnovit */}\n          <div style={{ display: 'flex', alignItems: 'center' }}>\n            <SmartTooltip text=\"Obnovit seznam objednvek (force reload z databze)\" icon=\"warning\" preferredPosition=\"bottom\">\n              <RefreshIconButton\n                onClick={handleRefresh}\n                isBackgroundActive={isBackgroundRefreshActive}\n              >\n                <FontAwesomeIcon icon={faSyncAlt} />\n              </RefreshIconButton>\n            </SmartTooltip>\n            {lastRefreshTime && (\n              <RefreshTimeLabel>\n                {lastRefreshTime.toLocaleTimeString('cs-CZ', {\n                  hour: '2-digit',\n                  minute: '2-digit',\n                  second: '2-digit'\n                })}\n              </RefreshTimeLabel>\n            )}\n          </div>\n        </YearFilterLeft>\n        <YearFilterTitle>\n          {lastLoadSource && (\n            <CacheStatusIconWrapper>\n              <CacheStatusIcon fromCache={lastLoadSource === 'memory' || lastLoadSource === 'cache'}>\n                <FontAwesomeIcon icon={lastLoadSource === 'memory' || lastLoadSource === 'cache' ? faBoltLightning : faDatabase} />\n              </CacheStatusIcon>\n              <div className=\"tooltip\" data-icon=\"none\">\n                {(lastLoadSource === 'memory' || lastLoadSource === 'cache')\n                  ? ' Nateno z cache (pamti) - rychl zobrazen bez dotazu na databzi'\n                  : ' Nateno z databze - aktuln data pmo ze serveru'\n                }\n                {lastLoadTime && (\n                  <div style={{ fontSize: '0.75rem', marginTop: '0.25rem', opacity: 0.8 }}>\n                     {new Date(lastLoadTime).toLocaleTimeString('cs-CZ')}\n                    {lastLoadDuration !== null && (\n                      <span style={{ marginLeft: '0.5rem' }}>\n                         {lastLoadDuration}ms\n                      </span>\n                    )}\n                  </div>\n                )}\n              </div>\n            </CacheStatusIconWrapper>\n          )}\n          <span>\n            Pehled objednvek\n            {apiMeta?.admin_analysis?.total_without_permission_filters && (\n              <sup style={{\n                fontSize: '0.5em',\n                marginLeft: '0.1rem',\n                opacity: 0.6,\n                fontWeight: 'normal'\n              }}>\n                {apiMeta.admin_analysis.total_without_permission_filters}\n              </sup>\n            )}\n          </span>\n          <FontAwesomeIcon icon={faFileInvoice} style={{ marginLeft: '0.5rem' }} />\n        </YearFilterTitle>\n      </YearFilterPanel>\n\n      {/* Page Header */}\n      <PageHeader>\n        <ActionBar>\n          <SmartTooltip text=\"Vytvoit novou objednvku\" icon=\"success\" preferredPosition=\"bottom\">\n            <ActionButton\n              onClick={handleCreateNewOrder}\n              style={{\n                background: '#166534',\n                color: 'white',\n                fontWeight: 600\n              }}\n            >\n              <FontAwesomeIcon icon={faPlus} />\n              Nov objednvka\n            </ActionButton>\n          </SmartTooltip>\n\n          {!showDashboard && (\n            <SmartTooltip text=\"Zobrazit pehledov dashboard s grafy\" icon=\"info\" preferredPosition=\"bottom\">\n              <ActionButton onClick={handleToggleDashboard}>\n                <FontAwesomeIcon icon={faDashboard} />\n                Dashboard\n              </ActionButton>\n            </SmartTooltip>\n          )}\n\n          {!showFiltersPanel && (\n            <SmartTooltip text=\"Zobrazit pokroil filtry\" icon=\"info\" preferredPosition=\"bottom\">\n              <ActionButton onClick={handleShowFilters}>\n                <FontAwesomeIcon icon={faFilter} />\n                Filtr\n              </ActionButton>\n            </SmartTooltip>\n          )}\n\n          <SmartTooltip text=\"Export aktulnho seznamu do CSV souboru\" icon=\"success\" preferredPosition=\"bottom\">\n            <ActionButton onClick={handleExport}>\n              <FontAwesomeIcon icon={faFileExport} />\n              Export\n            </ActionButton>\n          </SmartTooltip>\n\n        </ActionBar>\n      </PageHeader>\n\n      {/* Debug Panel */}\n      {showDebug && rawData && (\n        <DebugPanel>\n          <DebugHeader>\n            <DebugTitle>\n              <FontAwesomeIcon icon={faBolt} />\n               DEBUG - Surov data z databze\n            </DebugTitle>\n            <div style={{ display: 'flex', gap: '10px' }}>\n              <ActionButton\n                onClick={() => window.open('/test-notifications', '_blank')}\n                style={{ background: '#1e40af', borderColor: '#60a5fa' }}\n              >\n                <FontAwesomeIcon icon={faBell} />\n                Test Notifikac\n              </ActionButton>\n              <ActionButton\n                onClick={() => setShowModalStylesPanel(true)}\n                style={{ background: '#8b5cf6', borderColor: '#a78bfa' }}\n              >\n                <FontAwesomeIcon icon={faPalette} />\n                Nvrhy Styl Modl\n              </ActionButton>\n              <ActionButton onClick={handleToggleDebug}>\n                <FontAwesomeIcon icon={faTimes} />\n                Skrt debug\n              </ActionButton>\n            </div>\n          </DebugHeader>\n          <DebugContent>\n            <DebugSection>\n              <DebugLabel> Zkladn info:</DebugLabel>\n              <DebugValue>{`Nateno: ${rawData.timestamp}\nPoet zznam: ${rawData.ordersCount}\nDostupn pole: ${rawData.allFields.join(', ')}`}</DebugValue>\n            </DebugSection>\n\n            {rawData.firstOrder && (\n              <DebugSection>\n                <DebugLabel> Prvn zznam (struktura):</DebugLabel>\n                <DebugValue>{JSON.stringify(rawData.firstOrder, null, 2)}</DebugValue>\n              </DebugSection>\n            )}\n\n            <DebugSection>\n              <DebugLabel> Vechna data (JSON):</DebugLabel>\n              <DebugValue>{JSON.stringify(rawData.rawData, null, 2)}</DebugValue>\n            </DebugSection>\n          </DebugContent>\n        </DebugPanel>\n      )}\n\n      {/*  Order V2 API Test Panel */}\n      {showApiTestPanel && (\n        <DebugPanel>\n          <DebugHeader>\n            <DebugTitle>\n              <FontAwesomeIcon icon={faBolt} />\n               ORDER V2 API TEST PANEL\n            </DebugTitle>\n            <ActionButton onClick={() => setShowApiTestPanel(false)}>\n              <FontAwesomeIcon icon={faTimes} />\n              Zavt\n            </ActionButton>\n          </DebugHeader>\n          <DebugContent>\n            {!apiTestData ? (\n              <DebugSection>\n                <DebugLabel> ekm na data...</DebugLabel>\n                <DebugValue>Zm filtr (rok, msc, archiv checkbox) nebo klikni na Obnovit pro naten dat.</DebugValue>\n              </DebugSection>\n            ) : (\n              <>\n                {/* Filter State */}\n                <DebugSection>\n                  <DebugLabel> Stav filtr:</DebugLabel>\n                  <DebugValue>{JSON.stringify({\n                    showArchived: apiTestData.filterState?.showArchived,\n                    selectedYear: apiTestData.filterState?.selectedYear,\n                    selectedMonth: apiTestData.filterState?.selectedMonth,\n                    canViewAllOrders: apiTestData.filterState?.canViewAllOrders,\n                    currentUserId: apiTestData.filterState?.currentUserId\n                  }, null, 2)}</DebugValue>\n                </DebugSection>\n\n            {/* API Request */}\n            <DebugSection>\n              <DebugLabel> API Request (co se posl):</DebugLabel>\n              <DebugValue>{JSON.stringify({\n                endpoint: '/order-v2/list-enriched',\n                filters: apiTestData.requestFilters,\n                timestamp: apiTestData.requestTimestamp\n              }, null, 2)}</DebugValue>\n            </DebugSection>\n\n            {/* API Response Summary */}\n            <DebugSection>\n              <DebugLabel> API Response (co pilo z BE):</DebugLabel>\n              <DebugValue>{`Celkem objednvek: ${apiTestData.apiResponseCount || 0}\nArchivovan: ${apiTestData.archivedInResponse || 0}\nNearchivovan: ${(apiTestData.apiResponseCount || 0) - (apiTestData.archivedInResponse || 0)}\nTimestamp: ${apiTestData.responseTimestamp || 'N/A'}`}</DebugValue>\n            </DebugSection>\n\n            {/* Frontend Filter Result */}\n            <DebugSection>\n              <DebugLabel> Po frontend filtraci (co se zobrazuje):</DebugLabel>\n              <DebugValue>{`Zobrazeno objednvek: ${apiTestData.filteredCount || 0}\nArchivovan: ${apiTestData.archivedInFiltered || 0}\nNearchivovan: ${apiTestData.nonArchivedInFiltered || 0}`}</DebugValue>\n            </DebugSection>\n\n            {/* First 3 Orders Sample */}\n            {apiTestData.apiResponse && apiTestData.apiResponse.length > 0 && (\n              <DebugSection>\n                <DebugLabel> Ukzka prvnch 3 objednvek z API:</DebugLabel>\n                <DebugValue>{JSON.stringify(\n                  apiTestData.apiResponse.slice(0, 3).map(o => ({\n                    id: o.id,\n                    cislo_objednavky: o.cislo_objednavky,\n                    stav_objednavky: o.stav_objednavky,\n                    uzivatel_id: o.uzivatel_id,\n                    garant_uzivatel_id: o.garant_uzivatel_id,\n                    dt_objednavky: o.dt_objednavky,\n                    datum_obj_od: o.datum_obj_od,\n                    datum_obj_do: o.datum_obj_do\n                  })),\n                  null,\n                  2\n                )}</DebugValue>\n              </DebugSection>\n            )}\n\n            {/* Full API Response */}\n            <DebugSection>\n              <DebugLabel> Kompletn API Response (JSON):</DebugLabel>\n              <DebugValue style={{ maxHeight: '400px', overflow: 'auto' }}>\n                {JSON.stringify(apiTestData.apiResponse, null, 2)}\n              </DebugValue>\n            </DebugSection>\n              </>\n            )}\n          </DebugContent>\n        </DebugPanel>\n      )}\n\n      {/*  Modal Styles Design Panel - Nvrhy styl modlnch dialog */}\n      {showModalStylesPanel && ReactDOM.createPortal(\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.85)',\n          backdropFilter: 'blur(8px)',\n          zIndex: 10001,\n          overflow: 'auto',\n          padding: '2rem'\n        }}>\n          <div style={{\n            maxWidth: '1400px',\n            margin: '0 auto',\n            background: '#1e293b',\n            borderRadius: '16px',\n            padding: '2rem',\n            color: 'white'\n          }}>\n            {/* Header */}\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: '2rem',\n              borderBottom: '2px solid #334155',\n              paddingBottom: '1rem'\n            }}>\n              <h2 style={{\n                margin: 0,\n                display: 'flex',\n                alignItems: 'center',\n                gap: '1rem',\n                fontSize: '1.75rem',\n                fontWeight: 800\n              }}>\n                <FontAwesomeIcon icon={faPalette} style={{ color: '#a78bfa' }} />\n                 Nvrhy Styl Modlnch Dialog\n              </h2>\n              <button\n                onClick={() => setShowModalStylesPanel(false)}\n                style={{\n                  padding: '0.75rem 1.5rem',\n                  background: '#ef4444',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '8px',\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n              >\n                <FontAwesomeIcon icon={faTimes} /> Zavt\n              </button>\n            </div>\n\n            {/* Intro Text */}\n            <div style={{\n              background: '#334155',\n              padding: '1.5rem',\n              borderRadius: '12px',\n              marginBottom: '2rem',\n              border: '2px solid #475569'\n            }}>\n              <p style={{ margin: '0 0 0.75rem 0', fontSize: '1.1rem' }}>\n                <strong> Instrukce:</strong> Ne vidte rzn nvrhy styl pro modln confirming dialogy.\n              </p>\n              <p style={{ margin: 0, color: '#cbd5e1' }}>\n                Kad nvrh m <strong>jednoznan nzev</strong> - vyber si styl, kter se ti lb,\n                a ekni mi nzev. Pak jej pouijeme jako zklad pro jednotn modal systm v cel aplikaci.\n              </p>\n            </div>\n\n            {/* Grid s nvrhy */}\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(500px, 1fr))',\n              gap: '2rem'\n            }}>\n\n              {/* NVRH 1: CURRENT-STYLE - Souasn styl z aplikace */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #1e40af'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#60a5fa',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #1e40af',\n                  paddingBottom: '0.5rem'\n                }}>\n                  CURRENT-STYLE (Souasn)\n                </h3>\n\n                {/* Preview modalu */}\n                <div style={{\n                  background: 'white',\n                  borderRadius: '12px',\n                  padding: '2rem',\n                  boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.3)',\n                  border: '1px solid #e5e7eb'\n                }}>\n                  <div style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.75rem',\n                    marginBottom: '1.5rem'\n                  }}>\n                    <div style={{\n                      width: '48px',\n                      height: '48px',\n                      borderRadius: '50%',\n                      background: '#fecaca',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      color: '#dc2626',\n                      fontSize: '1.5rem'\n                    }}>\n                      <FontAwesomeIcon icon={faExclamationTriangle} />\n                    </div>\n                    <h3 style={{\n                      fontSize: '1.25rem',\n                      fontWeight: 700,\n                      color: '#1e293b',\n                      margin: 0\n                    }}>\n                      Potvrzen akce\n                    </h3>\n                  </div>\n\n                  <div style={{\n                    marginBottom: '2rem',\n                    lineHeight: '1.6',\n                    color: '#475569'\n                  }}>\n                    <p style={{ margin: 0 }}>\n                      Toto je ukzka souasnho stylu modlnho dialogu.\n                      Design pouv kulat ikonky, svtl pozad a jemn stny.\n                    </p>\n                  </div>\n\n                  <div style={{\n                    display: 'flex',\n                    gap: '0.75rem',\n                    justifyContent: 'flex-end'\n                  }}>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid #d1d5db',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: 'white',\n                      color: '#6b7280',\n                      cursor: 'pointer'\n                    }}>\n                      Zruit\n                    </button>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid #dc2626',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: '#dc2626',\n                      color: 'white',\n                      cursor: 'pointer'\n                    }}>\n                      Potvrdit\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* NVRH 2: GRADIENT-MODERN */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #8b5cf6'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#a78bfa',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #8b5cf6',\n                  paddingBottom: '0.5rem'\n                }}>\n                  GRADIENT-MODERN (Modern gradient)\n                </h3>\n\n                <div style={{\n                  background: 'white',\n                  borderRadius: '16px',\n                  overflow: 'hidden',\n                  boxShadow: '0 20px 60px rgba(0, 0, 0, 0.4)'\n                }}>\n                  <div style={{\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    padding: '1.5rem',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '1rem',\n                    borderBottom: '3px solid #553c9a'\n                  }}>\n                    <div style={{\n                      fontSize: '2rem',\n                      color: 'white',\n                      filter: 'drop-shadow(0 2px 8px rgba(0,0,0,0.3))'\n                    }}>\n                      <FontAwesomeIcon icon={faExclamationTriangle} />\n                    </div>\n                    <h3 style={{\n                      margin: 0,\n                      color: 'white',\n                      fontSize: '1.25rem',\n                      fontWeight: 800,\n                      textShadow: '0 2px 4px rgba(0,0,0,0.2)'\n                    }}>\n                      Potvrzen akce\n                    </h3>\n                  </div>\n\n                  <div style={{ padding: '1.5rem' }}>\n                    <p style={{\n                      margin: '0 0 1.5rem 0',\n                      color: '#374151',\n                      lineHeight: '1.6'\n                    }}>\n                      Modern design s barevnm gradientovm headerem.\n                      ist, profesionln a vizuln zajmav.\n                    </p>\n\n                    <div style={{\n                      display: 'flex',\n                      gap: '0.75rem',\n                      justifyContent: 'flex-end',\n                      borderTop: '2px solid #f3f4f6',\n                      paddingTop: '1.5rem'\n                    }}>\n                      <button style={{\n                        padding: '0.75rem 1.5rem',\n                        border: '2px solid #d1d5db',\n                        borderRadius: '10px',\n                        fontWeight: 700,\n                        background: 'white',\n                        color: '#6b7280',\n                        cursor: 'pointer'\n                      }}>\n                        Zruit\n                      </button>\n                      <button style={{\n                        padding: '0.75rem 1.5rem',\n                        border: 'none',\n                        borderRadius: '10px',\n                        fontWeight: 700,\n                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                        color: 'white',\n                        cursor: 'pointer',\n                        boxShadow: '0 4px 12px rgba(102, 126, 234, 0.4)'\n                      }}>\n                        Potvrdit\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* NVRH 3: MINIMAL-CLEAN */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #10b981'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#34d399',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #10b981',\n                  paddingBottom: '0.5rem'\n                }}>\n                  MINIMAL-CLEAN (Minimalistick ist)\n                </h3>\n\n                <div style={{\n                  background: 'white',\n                  borderRadius: '8px',\n                  padding: '2rem',\n                  boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\n                  border: '1px solid #e5e7eb'\n                }}>\n                  <div style={{\n                    borderLeft: '4px solid #dc2626',\n                    paddingLeft: '1rem',\n                    marginBottom: '1.5rem'\n                  }}>\n                    <h3 style={{\n                      fontSize: '1.125rem',\n                      fontWeight: 600,\n                      color: '#111827',\n                      margin: 0\n                    }}>\n                      Potvrzen akce\n                    </h3>\n                  </div>\n\n                  <p style={{\n                    margin: '0 0 2rem 0',\n                    color: '#6b7280',\n                    lineHeight: '1.6',\n                    fontSize: '0.9375rem'\n                  }}>\n                    Jednoduch, minimalistick design bez zbytench dekorac.\n                    Soustedn na obsah a itelnost.\n                  </p>\n\n                  <div style={{\n                    display: 'flex',\n                    gap: '0.5rem',\n                    justifyContent: 'flex-end'\n                  }}>\n                    <button style={{\n                      padding: '0.5rem 1.25rem',\n                      border: 'none',\n                      borderRadius: '6px',\n                      fontWeight: 500,\n                      background: '#f3f4f6',\n                      color: '#374151',\n                      cursor: 'pointer',\n                      fontSize: '0.875rem'\n                    }}>\n                      Zruit\n                    </button>\n                    <button style={{\n                      padding: '0.5rem 1.25rem',\n                      border: 'none',\n                      borderRadius: '6px',\n                      fontWeight: 500,\n                      background: '#dc2626',\n                      color: 'white',\n                      cursor: 'pointer',\n                      fontSize: '0.875rem'\n                    }}>\n                      Potvrdit\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* NVRH 4: CARD-ELEVATED */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #f59e0b'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#fbbf24',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #f59e0b',\n                  paddingBottom: '0.5rem'\n                }}>\n                  CARD-ELEVATED (Kartov zven)\n                </h3>\n\n                <div style={{\n                  background: 'white',\n                  borderRadius: '20px',\n                  padding: '0',\n                  boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n                  border: 'none',\n                  overflow: 'hidden'\n                }}>\n                  <div style={{\n                    background: '#f8fafc',\n                    padding: '1.5rem 2rem',\n                    borderBottom: '1px solid #e2e8f0'\n                  }}>\n                    <div style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '1rem'\n                    }}>\n                      <div style={{\n                        width: '56px',\n                        height: '56px',\n                        borderRadius: '16px',\n                        background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: '#d97706',\n                        fontSize: '1.75rem',\n                        boxShadow: '0 4px 6px -1px rgba(217, 119, 6, 0.1)'\n                      }}>\n                        <FontAwesomeIcon icon={faExclamationTriangle} />\n                      </div>\n                      <div>\n                        <h3 style={{\n                          fontSize: '1.375rem',\n                          fontWeight: 700,\n                          color: '#0f172a',\n                          margin: 0\n                        }}>\n                          Potvrzen akce\n                        </h3>\n                        <p style={{\n                          fontSize: '0.875rem',\n                          color: '#64748b',\n                          margin: '0.25rem 0 0 0'\n                        }}>\n                          Dleit rozhodnut\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div style={{ padding: '2rem' }}>\n                    <p style={{\n                      margin: '0 0 2rem 0',\n                      color: '#475569',\n                      lineHeight: '1.7',\n                      fontSize: '1rem'\n                    }}>\n                      Elegantn kartov design s vraznm stnem a detailnm headerem.\n                      Premium pocit a profesionln vzhled.\n                    </p>\n\n                    <div style={{\n                      display: 'flex',\n                      gap: '0.75rem',\n                      justifyContent: 'flex-end'\n                    }}>\n                      <button style={{\n                        padding: '0.875rem 1.75rem',\n                        border: '2px solid #e2e8f0',\n                        borderRadius: '12px',\n                        fontWeight: 600,\n                        background: 'white',\n                        color: '#475569',\n                        cursor: 'pointer',\n                        fontSize: '0.9375rem'\n                      }}>\n                        Zruit\n                      </button>\n                      <button style={{\n                        padding: '0.875rem 1.75rem',\n                        border: 'none',\n                        borderRadius: '12px',\n                        fontWeight: 600,\n                        background: '#dc2626',\n                        color: 'white',\n                        cursor: 'pointer',\n                        fontSize: '0.9375rem',\n                        boxShadow: '0 4px 6px -1px rgba(220, 38, 38, 0.25)'\n                      }}>\n                        Potvrdit\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* NVRH 5: DARK-CONTRAST */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #ec4899'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#f9a8d4',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #ec4899',\n                  paddingBottom: '0.5rem'\n                }}>\n                  DARK-CONTRAST (Tmav kontrastn)\n                </h3>\n\n                <div style={{\n                  background: '#1e293b',\n                  borderRadius: '12px',\n                  padding: '2rem',\n                  boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.5)',\n                  border: '1px solid #334155'\n                }}>\n                  <div style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '1rem',\n                    marginBottom: '1.5rem'\n                  }}>\n                    <div style={{\n                      width: '52px',\n                      height: '52px',\n                      borderRadius: '50%',\n                      background: 'rgba(239, 68, 68, 0.2)',\n                      border: '2px solid #ef4444',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      color: '#f87171',\n                      fontSize: '1.5rem'\n                    }}>\n                      <FontAwesomeIcon icon={faExclamationTriangle} />\n                    </div>\n                    <h3 style={{\n                      fontSize: '1.25rem',\n                      fontWeight: 700,\n                      color: '#f1f5f9',\n                      margin: 0\n                    }}>\n                      Potvrzen akce\n                    </h3>\n                  </div>\n\n                  <p style={{\n                    margin: '0 0 2rem 0',\n                    color: '#cbd5e1',\n                    lineHeight: '1.6'\n                  }}>\n                    Tmav reim s vysokm kontrastem. Ideln pro aplikace\n                    s dark mode nebo pro non pouit.\n                  </p>\n\n                  <div style={{\n                    display: 'flex',\n                    gap: '0.75rem',\n                    justifyContent: 'flex-end'\n                  }}>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid #475569',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: '#0f172a',\n                      color: '#cbd5e1',\n                      cursor: 'pointer'\n                    }}>\n                      Zruit\n                    </button>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid #ef4444',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: '#ef4444',\n                      color: 'white',\n                      cursor: 'pointer'\n                    }}>\n                      Potvrdit\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              {/* NVRH 6: GLASS-MORPHISM */}\n              <div style={{\n                background: '#0f172a',\n                borderRadius: '12px',\n                padding: '1.5rem',\n                border: '2px solid #06b6d4'\n              }}>\n                <h3 style={{\n                  margin: '0 0 1rem 0',\n                  color: '#22d3ee',\n                  fontSize: '1.25rem',\n                  fontWeight: 700,\n                  borderBottom: '2px solid #06b6d4',\n                  paddingBottom: '0.5rem'\n                }}>\n                  GLASS-MORPHISM (Sklenn morfismus)\n                </h3>\n\n                <div style={{\n                  background: 'rgba(255, 255, 255, 0.95)',\n                  backdropFilter: 'blur(20px)',\n                  WebkitBackdropFilter: 'blur(20px)',\n                  borderRadius: '16px',\n                  padding: '2rem',\n                  boxShadow: '0 8px 32px 0 rgba(31, 38, 135, 0.37)',\n                  border: '1px solid rgba(255, 255, 255, 0.18)'\n                }}>\n                  <div style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.75rem',\n                    marginBottom: '1.5rem'\n                  }}>\n                    <div style={{\n                      width: '48px',\n                      height: '48px',\n                      borderRadius: '50%',\n                      background: 'rgba(220, 38, 38, 0.1)',\n                      backdropFilter: 'blur(10px)',\n                      border: '2px solid rgba(220, 38, 38, 0.3)',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      color: '#dc2626',\n                      fontSize: '1.5rem'\n                    }}>\n                      <FontAwesomeIcon icon={faExclamationTriangle} />\n                    </div>\n                    <h3 style={{\n                      fontSize: '1.25rem',\n                      fontWeight: 700,\n                      color: '#1e293b',\n                      margin: 0\n                    }}>\n                      Potvrzen akce\n                    </h3>\n                  </div>\n\n                  <p style={{\n                    margin: '0 0 2rem 0',\n                    color: '#475569',\n                    lineHeight: '1.6'\n                  }}>\n                    Modern glassmorphism efekt s prhlednost a rozmaznm.\n                    Trendy design s hloubkou a vrstvenm.\n                  </p>\n\n                  <div style={{\n                    display: 'flex',\n                    gap: '0.75rem',\n                    justifyContent: 'flex-end'\n                  }}>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid rgba(209, 213, 219, 0.5)',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: 'rgba(255, 255, 255, 0.8)',\n                      backdropFilter: 'blur(10px)',\n                      color: '#6b7280',\n                      cursor: 'pointer'\n                    }}>\n                      Zruit\n                    </button>\n                    <button style={{\n                      padding: '0.75rem 1.5rem',\n                      border: '2px solid rgba(220, 38, 38, 0.5)',\n                      borderRadius: '8px',\n                      fontWeight: 600,\n                      background: 'rgba(220, 38, 38, 0.9)',\n                      backdropFilter: 'blur(10px)',\n                      color: 'white',\n                      cursor: 'pointer'\n                    }}>\n                      Potvrdit\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n            </div>\n\n            {/* Footer */}\n            <div style={{\n              marginTop: '2rem',\n              padding: '1.5rem',\n              background: '#334155',\n              borderRadius: '12px',\n              border: '2px solid #475569'\n            }}>\n              <h4 style={{ margin: '0 0 1rem 0', color: '#f1f5f9' }}>\n                 Tip pro vbr:\n              </h4>\n              <ul style={{ margin: 0, paddingLeft: '1.5rem', color: '#cbd5e1', lineHeight: '1.8' }}>\n                <li><strong>CURRENT-STYLE:</strong> Zachovme souasn vzhled, jen jej zrefaktorujeme</li>\n                <li><strong>GRADIENT-MODERN:</strong> Barevn, iv, modern - hod se pro mlad publikum</li>\n                <li><strong>MINIMAL-CLEAN:</strong> Nejjednodu, bez dekorac - rychl natn, univerzln</li>\n                <li><strong>CARD-ELEVATED:</strong> Premium, elegantn - pro business aplikace</li>\n                <li><strong>DARK-CONTRAST:</strong> Pro dark mode nebo veern prci</li>\n                <li><strong>GLASS-MORPHISM:</strong> Trendy, modern - efektn ale me bt nronj na vkon</li>\n              </ul>\n            </div>\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {/* Dashboard */}\n      {showDashboard && (\n        <DashboardPanel>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n            <h3 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n              <FontAwesomeIcon icon={faDashboard} style={{ color: '#3b82f6' }} />\n              Dashboard objednvek {\n                dashboardMode === 'custom' ? '(vlastn rozloen)' : \n                (dashboardCompact ? '(kompaktn)' : '(pln)')\n              }\n            </h3>\n            <div style={{ display: 'flex', gap: '0.5rem' }}>\n              {/* VLASTN - viditeln pouze pokud m user nastaven */}\n              {hasCustomTileSettings && (\n                <SmartTooltip\n                  text=\"Zobrazit dladice podle nastaven v profilu\"\n                  icon=\"info\"\n                  preferredPosition=\"bottom\"\n                >\n                  <ActionButton \n                    onClick={handleToggleCustomDashboard}\n                    style={{\n                      background: dashboardMode === 'custom' ? '#3b82f6' : undefined,\n                      color: dashboardMode === 'custom' ? 'white' : undefined,\n                      fontWeight: dashboardMode === 'custom' ? '600' : undefined\n                    }}\n                  >\n                    <FontAwesomeIcon icon={faList} />\n                    Vlastn\n                  </ActionButton>\n                </SmartTooltip>\n              )}\n\n              {/* PLN/KOMPAKTN toggle */}\n              <SmartTooltip\n                text={dashboardCompact\n                  ? 'Zobrazit pln dashboard se vemi statistikami'\n                  : 'Zobrazit kompaktn dashboard (pouze celkov hodnota)'}\n                icon=\"info\"\n                preferredPosition=\"bottom\"\n              >\n                <ActionButton onClick={handleToggleDashboardView}>\n                  <FontAwesomeIcon icon={dashboardCompact ? faTableColumns : faFileInvoice} />\n                  {dashboardCompact ? 'Pln' : 'Kompaktn'}\n                </ActionButton>\n              </SmartTooltip>\n\n              <SmartTooltip text=\"Skrt dashboard a zobrazit pouze tabulku objednvek\" icon=\"info\" preferredPosition=\"bottom\">\n                <ActionButton onClick={handleToggleDashboard}>\n                  <FontAwesomeIcon icon={faTimes} />\n                  Skrt\n                </ActionButton>\n              </SmartTooltip>\n            </div>\n          </div>\n          <DashboardGrid>\n            {dashboardMode === 'custom' ? (\n              //  VLASTN REIM - zobrazit vechny zakrtnut dladice (ignorovat Pln/Kompaktn)\n              <>\n                {/* LargeStatCard celkem - vdy */}\n                <LargeStatCard $color={STATUS_COLORS.TOTAL.dark}>\n                  <div>\n                    <LargeStatValue>\n                      {Math.round(stats.totalAmount).toLocaleString('cs-CZ')}&nbsp;K\n                    </LargeStatValue>\n                    <LargeStatLabel>\n                      Celkov cena s DPH za obdob ({stats.total})\n                    </LargeStatLabel>\n                    {(() => {\n                      const hasActiveFilters =\n                        globalFilter ||\n                        (Array.isArray(statusFilter) && statusFilter.length > 0) ||\n                        userFilter ||\n                        dateFromFilter ||\n                        dateToFilter ||\n                        amountFromFilter ||\n                        amountToFilter ||\n                        Object.values(columnFilters).some(val => val);\n\n                      if (hasActiveFilters && filteredData.length < orders.length) {\n                        const filteredAmount = filteredData.reduce((sum, order) => {\n                          const amount = getOrderTotalPriceWithDPH(order);\n                          return sum + (isNaN(amount) ? 0 : amount);\n                        }, 0);\n\n                        return (\n                          <div style={{\n                            marginTop: '0.75rem',\n                            paddingTop: '0.75rem',\n                            borderTop: '1px solid rgba(100, 116, 139, 0.2)'\n                          }}>\n                            <div style={{\n                              fontSize: '1.25rem',\n                              fontWeight: '700',\n                              color: '#f59e0b',\n                              textAlign: 'center',\n                              marginBottom: '0.25rem'\n                            }}>\n                              {Math.round(filteredAmount).toLocaleString('cs-CZ')}&nbsp;K\n                            </div>\n                            <div style={{\n                              fontSize: '0.75rem',\n                              fontWeight: '600',\n                              color: '#f59e0b',\n                              textAlign: 'center',\n                              paddingBottom: '0.75rem',\n                              borderBottom: '1px solid rgba(100, 116, 139, 0.2)'\n                            }}>\n                              Celkov cena s DPH za vybran ({filteredData.length})\n                            </div>\n                          </div>\n                        );\n                      }\n                      return null;\n                    })()}\n                  </div>\n\n                  <SummaryRow>\n                    <SummaryItem\n                      $color=\"#d97706\"\n                      $bg=\"rgba(217, 119, 6, 0.08)\"\n                    >\n                      <SummaryLabel $color=\"#92400e\">Rozpracovan</SummaryLabel>\n                      <SummaryValue>\n                        {Math.round(filteredData.reduce((sum, order) => {\n                          const status = getOrderSystemStatus(order);\n                          const isCancelledOrRejected = ['STORNOVA', 'ZAMITNUTA', 'ZRUSENA', 'CANCELLED', 'SMAZANA'].includes(status);\n                          const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n                          if (!isCancelledOrRejected && !isCompleted) {\n                            const amount = getOrderTotalPriceWithDPH(order);\n                            return sum + (isNaN(amount) ? 0 : amount);\n                          }\n                          return sum;\n                        }, 0)).toLocaleString('cs-CZ')}&nbsp;K\n                      </SummaryValue>\n                    </SummaryItem>\n\n                    <SummaryItem\n                      $color=\"#059669\"\n                      $bg=\"rgba(5, 150, 105, 0.08)\"\n                    >\n                      <SummaryLabel $color=\"#065f46\">Dokonen</SummaryLabel>\n                      <SummaryValue>\n                        {Math.round(filteredData.reduce((sum, order) => {\n                          const status = getOrderSystemStatus(order);\n                          const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n                          if (isCompleted) {\n                            const amount = getOrderTotalPriceWithDPH(order);\n                            return sum + (isNaN(amount) ? 0 : amount);\n                          }\n                          return sum;\n                        }, 0)).toLocaleString('cs-CZ')}&nbsp;K\n                      </SummaryValue>\n                    </SummaryItem>\n                  </SummaryRow>\n                </LargeStatCard>\n\n                {/* Poet objednvek - vdy */}\n                <StatCard $color=\"#2196f3\">\n                  <StatHeader>\n                    <StatValue>{filteredData.filter(o => !o.isDraft && !o.isLocalConcept).length}</StatValue>\n                    <StatIcon $color=\"#2196f3\">\n                      <FontAwesomeIcon icon={faFileAlt} />\n                    </StatIcon>\n                  </StatHeader>\n                  <StatLabel>Poet objednvek</StatLabel>\n                </StatCard>\n\n                {/*  VECHNY STAVOV DLADICE - filtrovan podle viditelne_dlazdice */}\n                {isTileVisible('nova') && (\n                  <StatCard\n                    $color={STATUS_COLORS.NOVA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'nova'}\n                    onClick={() => handleStatusFilterClick('nova')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.nova}</StatValue>\n                      <StatIcon>{getStatusEmoji('nova')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Nov / Koncept</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ke_schvaleni') && (\n                  <StatCard\n                    $color={STATUS_COLORS.KE_SCHVALENI.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ke_schvaleni'}\n                    onClick={() => handleStatusFilterClick('ke_schvaleni')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ke_schvaleni}</StatValue>\n                      <StatIcon>{getStatusEmoji('ke_schvaleni')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke schvlen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('schvalena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.SCHVALENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'schvalena'}\n                    onClick={() => handleStatusFilterClick('schvalena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.schvalena}</StatValue>\n                      <StatIcon>{getStatusEmoji('schvalena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Schvlen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('zamitnuta') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ZAMITNUTA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'zamitnuta'}\n                    onClick={() => handleStatusFilterClick('zamitnuta')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.zamitnuta}</StatValue>\n                      <StatIcon>{getStatusEmoji('zamitnuta')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zamtnut</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('rozpracovana') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ROZPRACOVANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'rozpracovana'}\n                    onClick={() => handleStatusFilterClick('rozpracovana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.rozpracovana}</StatValue>\n                      <StatIcon>{getStatusEmoji('rozpracovana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Rozpracovan</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('odeslana_dodavateli') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ODESLANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'odeslana'}\n                    onClick={() => handleStatusFilterClick('odeslana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.odeslana}</StatValue>\n                      <StatIcon>{getStatusEmoji('odeslana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Odeslan dodavateli</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('potvrzena_dodavatelem') && (\n                  <StatCard\n                    $color={STATUS_COLORS.POTVRZENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'potvrzena'}\n                    onClick={() => handleStatusFilterClick('potvrzena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.potvrzena}</StatValue>\n                      <StatIcon>{getStatusEmoji('potvrzena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Potvrzen dodavatelem</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('k_uverejneni_do_registru') && (\n                  <StatCard\n                    $color={STATUS_COLORS.K_UVEREJNENI_DO_REGISTRU.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'k_uverejneni_do_registru'}\n                    onClick={() => handleStatusFilterClick('k_uverejneni_do_registru')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.k_uverejneni_do_registru}</StatValue>\n                      <StatIcon>{getStatusEmoji('k_uverejneni_do_registru')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke zveejnn</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('uverejnena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.UVEREJNENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'uverejnena'}\n                    onClick={() => handleStatusFilterClick('uverejnena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.uverejnena}</StatValue>\n                      <StatIcon>{getStatusEmoji('uverejnena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zveejnno</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ceka_na_potvrzeni') && (\n                  <StatCard\n                    $color={STATUS_COLORS.CEKA_POTVRZENI.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ceka_potvrzeni'}\n                    onClick={() => handleStatusFilterClick('ceka_potvrzeni')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ceka_potvrzeni}</StatValue>\n                      <StatIcon>{getStatusEmoji('ceka_potvrzeni')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>ek na potvrzen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ceka_se') && (\n                  <StatCard\n                    $color={STATUS_COLORS.CEKA_SE.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ceka_se'}\n                    onClick={() => handleStatusFilterClick('ceka_se')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ceka_se}</StatValue>\n                      <StatIcon>{getStatusEmoji('ceka_se')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>ek se</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('vecna_spravnost') && (\n                  <StatCard\n                    $color={STATUS_COLORS.VECNA_SPRAVNOST.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'vecna_spravnost'}\n                    onClick={() => handleStatusFilterClick('vecna_spravnost')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.vecna_spravnost}</StatValue>\n                      <StatIcon>{getStatusEmoji('vecna_spravnost')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Vcn sprvnost</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('dokoncena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.DOKONCENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'dokoncena'}\n                    onClick={() => handleStatusFilterClick('dokoncena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.dokoncena}</StatValue>\n                      <StatIcon>{getStatusEmoji('dokoncena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Dokonen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('zrusena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ZRUSENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'zrusena'}\n                    onClick={() => handleStatusFilterClick('zrusena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.zrusena}</StatValue>\n                      <StatIcon>{getStatusEmoji('zrusena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zruen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('smazana') && (\n                  <StatCard\n                    $color={STATUS_COLORS.SMAZANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'smazana'}\n                    onClick={() => handleStatusFilterClick('smazana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.smazana}</StatValue>\n                      <StatIcon>{getStatusEmoji('smazana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Smazan</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('archivovano') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ARCHIVOVANO.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'archivovano'}\n                    onClick={() => handleStatusFilterClick('archivovano')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.archivovano}</StatValue>\n                      <StatIcon>{getStatusEmoji('archivovano')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Archivovno / Import</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('s_fakturou') && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_INVOICES.dark}\n                    $clickable={true}\n                    $isActive={filterWithInvoices}\n                    onClick={handleToggleInvoicesFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withInvoices}</StatValue>\n                      <StatIcon></StatIcon>\n                    </StatHeader>\n                    <StatLabel>S fakturou</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('s_prilohami') && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_ATTACHMENTS.dark}\n                    $clickable={true}\n                    $isActive={filterWithAttachments}\n                    onClick={handleToggleAttachmentsFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withAttachments}</StatValue>\n                      <StatIcon></StatIcon>\n                    </StatHeader>\n                    <StatLabel>S plohami</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('mimoradne_udalosti') && (\n                  <StatCard\n                    $color=\"#dc2626\"\n                    $clickable={true}\n                    $isActive={filterMimoradneObjednavky}\n                    onClick={handleToggleMimoradneFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.mimoradneUdalosti}</StatValue>\n                      <StatIcon $color=\"#dc2626\">\n                        <FontAwesomeIcon icon={faBoltLightning} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Mimodn udlosti</StatLabel>\n                  </StatCard>\n                )}\n\n                {/* Moje objednvky dladice - pouze pro SUPERADMIN a ADMINISTRATOR */}\n                {isTileVisible('moje_objednavky') && userDetail?.roles?.some(role => role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR') && (() => {\n                  const currentUserIdNum = parseInt(user_id, 10);\n\n                  const myOrdersCount = filteredData.filter(order => {\n                    const isObjednatel = order.uzivatel_id === currentUserIdNum;\n                    const isGarant = order.garant_uzivatel_id === currentUserIdNum;\n                    const isSchvalovatel = order.schvalovatel_id === currentUserIdNum;\n                    const isPrikazce = order.prikazce_id === currentUserIdNum;\n\n                    return isObjednatel || isGarant || isSchvalovatel || isPrikazce;\n                  }).length;\n\n                  return (\n                    <StatCard\n                      $color=\"#7c3aed\"\n                      $clickable={true}\n                      $isActive={showOnlyMyOrders}\n                      onClick={handleToggleOnlyMyOrders}\n                    >\n                      <StatHeader>\n                        <StatValue>{myOrdersCount}</StatValue>\n                        <StatIcon $color=\"#7c3aed\">\n                          <FontAwesomeIcon icon={faUser} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Moje objednvky</StatLabel>\n                    </StatCard>\n                  );\n                })()}\n\n                {/*  Dodaten dokumenty dladice */}\n                {isTileVisible('dodatecne_dokumenty') && (() => {\n                  let dokumentyCount = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.dodatecne_dokumenty && Array.isArray(order._enriched.dodatecne_dokumenty)) {\n                      dokumentyCount += order._enriched.dodatecne_dokumenty.length;\n                    }\n                    if (!order._enriched?.dodatecne_dokumenty && order._enriched?.dodatecne_dokumenty_count) {\n                      dokumentyCount += order._enriched.dodatecne_dokumenty_count;\n                    }\n                  });\n\n                  return dokumentyCount > 0 ? (\n                    <StatCard $color=\"#06b6d4\">\n                      <StatHeader>\n                        <StatValue>{dokumentyCount}</StatValue>\n                        <StatIcon $color=\"#06b6d4\">\n                          <FontAwesomeIcon icon={faFileAlt} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Dodat. dokumenty</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Vcn kontrola dladice */}\n                {isTileVisible('vecna_kontrola') && (() => {\n                  let vecnaKontrolaCount = 0;\n                  let vecnaKontrolaOk = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.vecna_kontrola) {\n                      vecnaKontrolaCount++;\n                      if (order._enriched.vecna_kontrola.stav === 'OK' ||\n                          order._enriched.vecna_kontrola.stav === 'SCHVALENO' ||\n                          order._enriched.vecna_kontrola.provedena === true) {\n                        vecnaKontrolaOk++;\n                      }\n                    }\n                    if (order.vecna_kontrola === true || order.vecna_spravnost === true) {\n                      vecnaKontrolaCount++;\n                      vecnaKontrolaOk++;\n                    }\n                  });\n\n                  return vecnaKontrolaCount > 0 ? (\n                    <StatCard $color=\"#10b981\" title={`Schvleno: ${vecnaKontrolaOk} z ${vecnaKontrolaCount}`}>\n                      <StatHeader>\n                        <StatValue>{vecnaKontrolaOk}/{vecnaKontrolaCount}</StatValue>\n                        <StatIcon $color=\"#10b981\">\n                          <FontAwesomeIcon icon={faCheckCircle} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Vcn kontrola</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Registr smluv dladice */}\n                {isTileVisible('registr_smluv') && (() => {\n                  let registrSmlouvCount = 0;\n                  let registrSmlouvAktivni = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.registr_smluv) {\n                      registrSmlouvCount++;\n                      if (order._enriched.registr_smluv.stav === 'AKTIVNI' ||\n                          order._enriched.registr_smluv.aktivni === true) {\n                        registrSmlouvAktivni++;\n                      }\n                    }\n                    if (order.cislo_smlouvy || order._enriched?.cislo_smlouvy) {\n                      registrSmlouvCount++;\n                      registrSmlouvAktivni++;\n                    }\n                  });\n\n                  return registrSmlouvCount > 0 ? (\n                    <StatCard $color=\"#0ea5e9\" title={`Aktivnch: ${registrSmlouvAktivni} z ${registrSmlouvCount}`}>\n                      <StatHeader>\n                        <StatValue>{registrSmlouvCount}</StatValue>\n                        <StatIcon $color=\"#0ea5e9\">\n                          <FontAwesomeIcon icon={faFileContract} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Registr smluv</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Fze dokonen dladice */}\n                {isTileVisible('faze_dokonceni') && (() => {\n                  let fazeDokonceniCount = 0;\n                  let fazeDokonceniHotovo = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.faze_dokonceni || order.dokonceno) {\n                      fazeDokonceniCount++;\n                      if (order.dokonceno === 1 || order._enriched?.faze_dokonceni?.stav === 'DOKONCENO') {\n                        fazeDokonceniHotovo++;\n                      }\n                    }\n                  });\n\n                  return fazeDokonceniCount > 0 ? (\n                    <StatCard $color=\"#ec4899\" title={`Dokoneno: ${fazeDokonceniHotovo} z ${fazeDokonceniCount}`}>\n                      <StatHeader>\n                        <StatValue>{fazeDokonceniHotovo}/{fazeDokonceniCount}</StatValue>\n                        <StatIcon $color=\"#ec4899\">\n                          <FontAwesomeIcon icon={faRocket} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Fze dokonen</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n              </>\n            ) : dashboardCompact ? (\n              // Kompaktn verze\n              <>\n                <StatCard $color={STATUS_COLORS.TOTAL.dark}>\n                  <div style={{ width: '100%' }}>\n                    <StatValue style={{ textAlign: 'left' }}>{Math.round(stats.totalAmount).toLocaleString('cs-CZ')}&nbsp;K</StatValue>\n                    <StatLabel style={{ textAlign: 'left' }}>Celkov cena s DPH za obdob ({stats.total})</StatLabel>\n                    {(() => {\n                      const hasActiveFilters =\n                        globalFilter ||\n                        (Array.isArray(statusFilter) && statusFilter.length > 0) ||\n                        userFilter ||\n                        dateFromFilter ||\n                        dateToFilter ||\n                        amountFromFilter ||\n                        amountToFilter ||\n                        Object.values(columnFilters).some(val => val);\n\n                      if (hasActiveFilters && filteredData.length < orders.length) {\n                        const filteredAmount = filteredData.reduce((sum, order) => {\n                          const amount = getOrderTotalPriceWithDPH(order);\n                          return sum + (isNaN(amount) ? 0 : amount);\n                        }, 0);\n\n                        return (\n                          <div style={{\n                            marginTop: '0.5rem',\n                            paddingTop: '0.5rem',\n                            borderTop: '1px solid rgba(100, 116, 139, 0.2)'\n                          }}>\n                            <div style={{\n                              fontSize: '1rem',\n                              fontWeight: '700',\n                              color: '#f59e0b',\n                              textAlign: 'left',\n                              marginBottom: '0.125rem'\n                            }}>\n                              {Math.round(filteredAmount).toLocaleString('cs-CZ')}&nbsp;K\n                            </div>\n                            <div style={{\n                              fontSize: '0.65rem',\n                              fontWeight: '600',\n                              color: '#f59e0b',\n                              textAlign: 'left',\n                              paddingBottom: '0.5rem',\n                              borderBottom: '1px solid rgba(100, 116, 139, 0.2)'\n                            }}>\n                              Celkov cena s DPH za vybran ({filteredData.filter(o => !o.isDraft && !o.isLocalConcept).length})\n                            </div>\n                          </div>\n                        );\n                      }\n                      return null;\n                    })()}\n                  </div>\n                </StatCard>\n\n                <StatCard $color=\"#2196f3\">\n                  <StatHeader>\n                    <StatValue>{filteredData.filter(o => !o.isDraft && !o.isLocalConcept).length}</StatValue>\n                    <StatIcon $color=\"#2196f3\">\n                      <FontAwesomeIcon icon={faFileAlt} />\n                    </StatIcon>\n                  </StatHeader>\n                  <StatLabel>Poet objednvek</StatLabel>\n                </StatCard>\n\n                {stats.ke_schvaleni > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.KE_SCHVALENI.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ke_schvaleni'}\n                    onClick={() => handleStatusFilterClick('ke_schvaleni')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ke_schvaleni}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.KE_SCHVALENI.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('ke_schvaleni')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke schvlen</StatLabel>\n                  </StatCard>\n                )}\n                {stats.schvalena > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.SCHVALENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'schvalena'}\n                    onClick={() => handleStatusFilterClick('schvalena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.schvalena}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.SCHVALENA.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('schvalena')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Schvlen</StatLabel>\n                  </StatCard>\n                )}\n                {stats.rozpracovana > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.ROZPRACOVANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'rozpracovana'}\n                    onClick={() => handleStatusFilterClick('rozpracovana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.rozpracovana}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.ROZPRACOVANA.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('rozpracovana')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Rozpracovan</StatLabel>\n                  </StatCard>\n                )}\n                {stats.odeslana > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.ODESLANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'odeslana'}\n                    onClick={() => handleStatusFilterClick('odeslana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.odeslana}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.ODESLANA.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('odeslana')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Odeslan dodavateli</StatLabel>\n                  </StatCard>\n                )}\n                {stats.potvrzena > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.POTVRZENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'potvrzena'}\n                    onClick={() => handleStatusFilterClick('potvrzena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.potvrzena}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.POTVRZENA.dark}>\n                      <FontAwesomeIcon icon={getStatusIcon('potvrzena')} />\n                    </StatIcon>\n                  </StatHeader>\n                  <StatLabel>Potvrzen dodavatelem</StatLabel>\n                </StatCard>\n                )}\n                {stats.k_uverejneni_do_registru > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.K_UVEREJNENI_DO_REGISTRU.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'k_uverejneni_do_registru'}\n                    onClick={() => handleStatusFilterClick('k_uverejneni_do_registru')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.k_uverejneni_do_registru}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.K_UVEREJNENI_DO_REGISTRU.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('k_uverejneni_do_registru')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke zveejnn</StatLabel>\n                  </StatCard>\n                )}\n                {stats.uverejnena > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.UVEREJNENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'uverejnena'}\n                    onClick={() => handleStatusFilterClick('uverejnena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.uverejnena}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.UVEREJNENA.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('uverejnena')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zveejnno</StatLabel>\n                  </StatCard>\n                )}\n                {stats.vecna_spravnost > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.VECNA_SPRAVNOST.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'vecna_spravnost'}\n                    onClick={() => handleStatusFilterClick('vecna_spravnost')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.vecna_spravnost}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.VECNA_SPRAVNOST.dark}>\n                        <FontAwesomeIcon icon={getStatusIcon('vecna_spravnost')} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Vcn sprvnost</StatLabel>\n                  </StatCard>\n                )}\n                {stats.dokoncena > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.DOKONCENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'dokoncena'}\n                    onClick={() => handleStatusFilterClick('dokoncena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.dokoncena}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.DOKONCENA.dark}>\n                        \n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Dokonen</StatLabel>\n                  </StatCard>\n                )}\n                {stats.withInvoices > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_INVOICES.dark}\n                    $clickable={true}\n                    $isActive={filterWithInvoices}\n                    onClick={handleToggleInvoicesFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withInvoices}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.WITH_INVOICES.dark}>\n                        <FontAwesomeIcon icon={faFileInvoice} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>S fakturou</StatLabel>\n                  </StatCard>\n                )}\n                {stats.withAttachments > 0 && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_ATTACHMENTS.dark}\n                    $clickable={true}\n                    $isActive={filterWithAttachments}\n                    onClick={handleToggleAttachmentsFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withAttachments}</StatValue>\n                      <StatIcon $color={STATUS_COLORS.WITH_ATTACHMENTS.dark}>\n                        <FontAwesomeIcon icon={faPaperclip} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>S plohami</StatLabel>\n                  </StatCard>\n                )}\n\n                {stats.mimoradneUdalosti > 0 && (\n                  <StatCard\n                    $color=\"#dc2626\"\n                    $clickable={true}\n                    $isActive={filterMimoradneObjednavky}\n                    onClick={handleToggleMimoradneFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.mimoradneUdalosti}</StatValue>\n                      <StatIcon $color=\"#dc2626\">\n                        <FontAwesomeIcon icon={faBoltLightning} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Mimodn udlosti</StatLabel>\n                  </StatCard>\n                )}\n\n                {/* Moje objednvky dladice - pouze pro SUPERADMIN a ADMINISTRATOR (kompaktn reim) */}\n                {userDetail?.roles?.some(role => role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR') && (() => {\n                  // Spotej kolik objednvek pat danmu uivateli ZE FILTROVANCH DAT\n                  // Order V2 API enriched pouv tyto nzvy pol:\n                  // - uzivatel_id: ID objednatele (vytvoil objednvku)\n                  // - garant_uzivatel_id: ID garanta (NE garant_id!)\n                  // - prikazce_id: ID pkazce\n                  // - schvalovatel_id: ID schvalovatele\n\n                  //  CRITICAL FIX: Konverze user_id na number pro porovnn (API V2 vrac sla)\n                  const currentUserIdNum = parseInt(user_id, 10);\n\n                  const myOrdersCount = filteredData.filter(order => {\n                    const isObjednatel = order.uzivatel_id === currentUserIdNum;\n                    const isGarant = order.garant_uzivatel_id === currentUserIdNum;\n                    const isSchvalovatel = order.schvalovatel_id === currentUserIdNum;\n                    const isPrikazce = order.prikazce_id === currentUserIdNum;\n\n                    return isObjednatel || isGarant || isSchvalovatel || isPrikazce;\n                  }).length;\n\n                  return (\n                    <StatCard\n                      $color=\"#7c3aed\"\n                      $clickable={true}\n                      $isActive={showOnlyMyOrders}\n                      onClick={handleToggleOnlyMyOrders}\n                    >\n                      <StatHeader>\n                        <StatValue>{myOrdersCount}</StatValue>\n                        <StatIcon $color=\"#7c3aed\">\n                          <FontAwesomeIcon icon={faUser} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Moje objednvky</StatLabel>\n                    </StatCard>\n                  );\n                })()}\n              </>\n            ) : (\n              // Pln verze s istm designem\n              <>\n                <LargeStatCard $color={STATUS_COLORS.TOTAL.dark}>\n                  <div>\n                    <LargeStatValue>\n                      {Math.round(stats.totalAmount).toLocaleString('cs-CZ')}&nbsp;K\n                    </LargeStatValue>\n                    <LargeStatLabel>\n                      Celkov cena s DPH za obdob ({stats.total})\n                    </LargeStatLabel>\n                    {(() => {\n                      const hasActiveFilters =\n                        globalFilter ||\n                        (Array.isArray(statusFilter) && statusFilter.length > 0) ||\n                        userFilter ||\n                        dateFromFilter ||\n                        dateToFilter ||\n                        amountFromFilter ||\n                        amountToFilter ||\n                        Object.values(columnFilters).some(val => val);\n\n                      if (hasActiveFilters && filteredData.length < orders.length) {\n                        const filteredAmount = filteredData.reduce((sum, order) => {\n                          const amount = getOrderTotalPriceWithDPH(order);\n                          return sum + (isNaN(amount) ? 0 : amount);\n                        }, 0);\n\n                        return (\n                          <div style={{\n                            marginTop: '0.75rem',\n                            paddingTop: '0.75rem',\n                            borderTop: '1px solid rgba(100, 116, 139, 0.2)'\n                          }}>\n                            <div style={{\n                              fontSize: '1.25rem',\n                              fontWeight: '700',\n                              color: '#f59e0b',\n                              textAlign: 'center',\n                              marginBottom: '0.25rem'\n                            }}>\n                              {Math.round(filteredAmount).toLocaleString('cs-CZ')}&nbsp;K\n                            </div>\n                            <div style={{\n                              fontSize: '0.75rem',\n                              fontWeight: '600',\n                              color: '#f59e0b',\n                              textAlign: 'center',\n                              paddingBottom: '0.75rem',\n                              borderBottom: '1px solid rgba(100, 116, 139, 0.2)'\n                            }}>\n                              Celkov cena s DPH za vybran ({filteredData.length})\n                            </div>\n                          </div>\n                        );\n                      }\n                      return null;\n                    })()}\n                  </div>\n\n                  <SummaryRow>\n                    <SummaryItem\n                      $color=\"#d97706\"\n                      $bg=\"rgba(217, 119, 6, 0.08)\"\n                    >\n                      <SummaryLabel $color=\"#92400e\">Rozpracovan</SummaryLabel>\n                      <SummaryValue>\n                        {Math.round(filteredData.reduce((sum, order) => {\n                          const status = getOrderSystemStatus(order);\n                          const isCancelledOrRejected = ['STORNOVA', 'ZAMITNUTA', 'ZRUSENA', 'CANCELLED', 'SMAZANA'].includes(status);\n                          const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n                          if (!isCancelledOrRejected && !isCompleted) {\n                            const amount = getOrderTotalPriceWithDPH(order);\n                            return sum + (isNaN(amount) ? 0 : amount);\n                          }\n                          return sum;\n                        }, 0)).toLocaleString('cs-CZ')}&nbsp;K\n                      </SummaryValue>\n                    </SummaryItem>\n\n                    <SummaryItem\n                      $color=\"#059669\"\n                      $bg=\"rgba(5, 150, 105, 0.08)\"\n                    >\n                      <SummaryLabel $color=\"#065f46\">Dokonen</SummaryLabel>\n                      <SummaryValue>\n                        {Math.round(filteredData.reduce((sum, order) => {\n                          const status = getOrderSystemStatus(order);\n                          const isCompleted = ['DOKONCENA', 'VYRIZENA', 'COMPLETED'].includes(status);\n                          if (isCompleted) {\n                            const amount = getOrderTotalPriceWithDPH(order);\n                            return sum + (isNaN(amount) ? 0 : amount);\n                          }\n                          return sum;\n                        }, 0)).toLocaleString('cs-CZ')}&nbsp;K\n                      </SummaryValue>\n                    </SummaryItem>\n                  </SummaryRow>\n                </LargeStatCard>\n\n                <StatCard $color=\"#2196f3\">\n                  <StatHeader>\n                    <StatValue>{filteredData.filter(o => !o.isDraft && !o.isLocalConcept).length}</StatValue>\n                    <StatIcon $color=\"#2196f3\">\n                      <FontAwesomeIcon icon={faFileAlt} />\n                    </StatIcon>\n                  </StatHeader>\n                  <StatLabel>Poet objednvek</StatLabel>\n                </StatCard>\n\n                {isTileVisible('nova') && (\n                  <StatCard\n                    $color={STATUS_COLORS.NOVA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'nova'}\n                    onClick={() => handleStatusFilterClick('nova')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.nova}</StatValue>\n                      <StatIcon>{getStatusEmoji('nova')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Nov / Koncept</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ke_schvaleni') && (\n                  <StatCard\n                    $color={STATUS_COLORS.KE_SCHVALENI.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ke_schvaleni'}\n                    onClick={() => handleStatusFilterClick('ke_schvaleni')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ke_schvaleni}</StatValue>\n                      <StatIcon>{getStatusEmoji('ke_schvaleni')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke schvlen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('schvalena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.SCHVALENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'schvalena'}\n                    onClick={() => handleStatusFilterClick('schvalena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.schvalena}</StatValue>\n                      <StatIcon>{getStatusEmoji('schvalena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Schvlen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('zamitnuta') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ZAMITNUTA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'zamitnuta'}\n                    onClick={() => handleStatusFilterClick('zamitnuta')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.zamitnuta}</StatValue>\n                      <StatIcon>{getStatusEmoji('zamitnuta')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zamtnut</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('rozpracovana') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ROZPRACOVANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'rozpracovana'}\n                    onClick={() => handleStatusFilterClick('rozpracovana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.rozpracovana}</StatValue>\n                      <StatIcon>{getStatusEmoji('rozpracovana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Rozpracovan</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('odeslana_dodavateli') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ODESLANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'odeslana'}\n                    onClick={() => handleStatusFilterClick('odeslana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.odeslana}</StatValue>\n                      <StatIcon>{getStatusEmoji('odeslana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Odeslan dodavateli</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('potvrzena_dodavatelem') && (\n                  <StatCard\n                    $color={STATUS_COLORS.POTVRZENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'potvrzena'}\n                    onClick={() => handleStatusFilterClick('potvrzena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.potvrzena}</StatValue>\n                      <StatIcon>{getStatusEmoji('potvrzena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Potvrzen dodavatelem</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('k_uverejneni_do_registru') && (\n                  <StatCard\n                    $color={STATUS_COLORS.K_UVEREJNENI_DO_REGISTRU.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'k_uverejneni_do_registru'}\n                    onClick={() => handleStatusFilterClick('k_uverejneni_do_registru')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.k_uverejneni_do_registru}</StatValue>\n                      <StatIcon>{getStatusEmoji('k_uverejneni_do_registru')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Ke zveejnn</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('uverejnena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.UVEREJNENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'uverejnena'}\n                    onClick={() => handleStatusFilterClick('uverejnena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.uverejnena}</StatValue>\n                      <StatIcon>{getStatusEmoji('uverejnena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zveejnno</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ceka_na_potvrzeni') && (\n                  <StatCard\n                    $color={STATUS_COLORS.CEKA_POTVRZENI.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ceka_potvrzeni'}\n                    onClick={() => handleStatusFilterClick('ceka_potvrzeni')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ceka_potvrzeni}</StatValue>\n                      <StatIcon>{getStatusEmoji('ceka_potvrzeni')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>ek na potvrzen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('ceka_se') && (\n                  <StatCard\n                    $color={STATUS_COLORS.CEKA_SE.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'ceka_se'}\n                    onClick={() => handleStatusFilterClick('ceka_se')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.ceka_se}</StatValue>\n                      <StatIcon>{getStatusEmoji('ceka_se')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>ek se</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('vecna_spravnost') && (\n                  <StatCard\n                    $color={STATUS_COLORS.VECNA_SPRAVNOST.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'vecna_spravnost'}\n                    onClick={() => handleStatusFilterClick('vecna_spravnost')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.vecna_spravnost}</StatValue>\n                      <StatIcon>{getStatusEmoji('vecna_spravnost')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Vcn sprvnost</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('dokoncena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.DOKONCENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'dokoncena'}\n                    onClick={() => handleStatusFilterClick('dokoncena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.dokoncena}</StatValue>\n                      <StatIcon>{getStatusEmoji('dokoncena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Dokonen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('zrusena') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ZRUSENA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'zrusena'}\n                    onClick={() => handleStatusFilterClick('zrusena')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.zrusena}</StatValue>\n                      <StatIcon>{getStatusEmoji('zrusena')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Zruen</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('smazana') && (\n                  <StatCard\n                    $color={STATUS_COLORS.SMAZANA.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'smazana'}\n                    onClick={() => handleStatusFilterClick('smazana')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.smazana}</StatValue>\n                      <StatIcon>{getStatusEmoji('smazana')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Smazan</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('archivovano') && (\n                  <StatCard\n                    $color={STATUS_COLORS.ARCHIVOVANO.dark}\n                    $clickable={true}\n                    $isActive={activeStatusFilter === 'archivovano'}\n                    onClick={() => handleStatusFilterClick('archivovano')}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.archivovano}</StatValue>\n                      <StatIcon>{getStatusEmoji('archivovano')}</StatIcon>\n                    </StatHeader>\n                    <StatLabel>Archivovno / Import</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('s_fakturou') && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_INVOICES.dark}\n                    $clickable={true}\n                    $isActive={filterWithInvoices}\n                    onClick={handleToggleInvoicesFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withInvoices}</StatValue>\n                      <StatIcon></StatIcon>\n                    </StatHeader>\n                    <StatLabel>S fakturou</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('s_prilohami') && (\n                  <StatCard\n                    $color={STATUS_COLORS.WITH_ATTACHMENTS.dark}\n                    $clickable={true}\n                    $isActive={filterWithAttachments}\n                    onClick={handleToggleAttachmentsFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.withAttachments}</StatValue>\n                      <StatIcon></StatIcon>\n                    </StatHeader>\n                    <StatLabel>S plohami</StatLabel>\n                  </StatCard>\n                )}\n\n                {isTileVisible('mimoradne_udalosti') && (\n                  <StatCard\n                    $color=\"#dc2626\"\n                    $clickable={true}\n                    $isActive={filterMimoradneObjednavky}\n                    onClick={handleToggleMimoradneFilter}\n                  >\n                    <StatHeader>\n                      <StatValue>{stats.mimoradneUdalosti}</StatValue>\n                      <StatIcon $color=\"#dc2626\">\n                        <FontAwesomeIcon icon={faBoltLightning} />\n                      </StatIcon>\n                    </StatHeader>\n                    <StatLabel>Mimodn udlosti</StatLabel>\n                  </StatCard>\n                )}\n\n                {/* Moje objednvky dladice - pouze pro SUPERADMIN a ADMINISTRATOR */}\n                {isTileVisible('moje_objednavky') && userDetail?.roles?.some(role => role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR') && (() => {\n                  // Spotej kolik objednvek pat danmu uivateli ZE FILTROVANCH DAT\n                  // Order V2 API enriched pouv tyto nzvy pol:\n                  // - uzivatel_id: ID objednatele (vytvoil objednvku)\n                  // - garant_uzivatel_id: ID garanta (NE garant_id!)\n                  // - prikazce_id: ID pkazce\n                  // - schvalovatel_id: ID schvalovatele\n\n                  //  CRITICAL FIX: Konverze user_id na number pro porovnn (API V2 vrac sla)\n                  const currentUserIdNum = parseInt(user_id, 10);\n\n                  const myOrdersCount = filteredData.filter(order => {\n                    const isObjednatel = order.uzivatel_id === currentUserIdNum;\n                    const isGarant = order.garant_uzivatel_id === currentUserIdNum;\n                    const isSchvalovatel = order.schvalovatel_id === currentUserIdNum;\n                    const isPrikazce = order.prikazce_id === currentUserIdNum;\n\n                    return isObjednatel || isGarant || isSchvalovatel || isPrikazce;\n                  }).length;\n\n                  return (\n                    <StatCard\n                      $color=\"#7c3aed\"\n                      $clickable={true}\n                      $isActive={showOnlyMyOrders}\n                      onClick={handleToggleOnlyMyOrders}\n                    >\n                      <StatHeader>\n                        <StatValue>{myOrdersCount}</StatValue>\n                        <StatIcon $color=\"#7c3aed\">\n                          <FontAwesomeIcon icon={faUser} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Moje objednvky</StatLabel>\n                    </StatCard>\n                  );\n                })()}\n\n                {/*  Dodaten dokumenty dladice */}\n                {isTileVisible('dodatecne_dokumenty') && (() => {\n                  let dokumentyCount = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.dodatecne_dokumenty && Array.isArray(order._enriched.dodatecne_dokumenty)) {\n                      dokumentyCount += order._enriched.dodatecne_dokumenty.length;\n                    }\n                    // Fallback\n                    if (!order._enriched?.dodatecne_dokumenty && order._enriched?.dodatecne_dokumenty_count) {\n                      dokumentyCount += order._enriched.dodatecne_dokumenty_count;\n                    }\n                  });\n\n                  return dokumentyCount > 0 ? (\n                    <StatCard $color=\"#06b6d4\">\n                      <StatHeader>\n                        <StatValue>{dokumentyCount}</StatValue>\n                        <StatIcon $color=\"#06b6d4\">\n                          <FontAwesomeIcon icon={faFileAlt} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Dodat. dokumenty</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Vcn kontrola dladice */}\n                {isTileVisible('vecna_kontrola') && (() => {\n                  let vecnaKontrolaCount = 0;\n                  let vecnaKontrolaOk = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.vecna_kontrola) {\n                      vecnaKontrolaCount++;\n                      if (order._enriched.vecna_kontrola.stav === 'OK' ||\n                          order._enriched.vecna_kontrola.stav === 'SCHVALENO' ||\n                          order._enriched.vecna_kontrola.provedena === true) {\n                        vecnaKontrolaOk++;\n                      }\n                    }\n                    // Fallback na boolean pole\n                    if (order.vecna_kontrola === true || order.vecna_spravnost === true) {\n                      vecnaKontrolaCount++;\n                      vecnaKontrolaOk++;\n                    }\n                  });\n\n                  return vecnaKontrolaCount > 0 ? (\n                    <StatCard $color=\"#10b981\" title={`Schvleno: ${vecnaKontrolaOk} z ${vecnaKontrolaCount}`}>\n                      <StatHeader>\n                        <StatValue>{vecnaKontrolaOk}/{vecnaKontrolaCount}</StatValue>\n                        <StatIcon $color=\"#10b981\">\n                          <FontAwesomeIcon icon={faCheckCircle} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Vcn kontrola</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Registr smluv dladice */}\n                {isTileVisible('registr_smluv') && (() => {\n                  let registrSmlouvCount = 0;\n                  let registrSmlouvAktivni = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.registr_smluv) {\n                      registrSmlouvCount++;\n                      if (order._enriched.registr_smluv.stav === 'AKTIVNI' ||\n                          order._enriched.registr_smluv.aktivni === true) {\n                        registrSmlouvAktivni++;\n                      }\n                    }\n                    // Fallback na slo smlouvy\n                    if (order.cislo_smlouvy || order._enriched?.cislo_smlouvy) {\n                      registrSmlouvCount++;\n                      registrSmlouvAktivni++; // Pedpokldme aktivn pokud m slo\n                    }\n                  });\n\n                  return registrSmlouvCount > 0 ? (\n                    <StatCard $color=\"#0ea5e9\" title={`Aktivnch: ${registrSmlouvAktivni} z ${registrSmlouvCount}`}>\n                      <StatHeader>\n                        <StatValue>{registrSmlouvCount}</StatValue>\n                        <StatIcon $color=\"#0ea5e9\">\n                          <FontAwesomeIcon icon={faFileContract} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Registr smluv</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n\n                {/*  Fze dokonen dladice */}\n                {isTileVisible('faze_dokonceni') && (() => {\n                  let fazeDokonceniCount = 0;\n                  let fazeDokonceniHotovo = 0;\n\n                  filteredData.forEach(order => {\n                    if (order._enriched?.faze_dokonceni || order.dokonceno) {\n                      fazeDokonceniCount++;\n                      if (order.dokonceno === 1 || order._enriched?.faze_dokonceni?.stav === 'DOKONCENO') {\n                        fazeDokonceniHotovo++;\n                      }\n                    }\n                  });\n\n                  return fazeDokonceniCount > 0 ? (\n                    <StatCard $color=\"#ec4899\" title={`Dokoneno: ${fazeDokonceniHotovo} z ${fazeDokonceniCount}`}>\n                      <StatHeader>\n                        <StatValue>{fazeDokonceniHotovo}/{fazeDokonceniCount}</StatValue>\n                        <StatIcon $color=\"#ec4899\">\n                          <FontAwesomeIcon icon={faRocket} />\n                        </StatIcon>\n                      </StatHeader>\n                      <StatLabel>Fze dokonen</StatLabel>\n                    </StatCard>\n                  ) : null;\n                })()}\n              </>\n            )}\n          </DashboardGrid>\n        </DashboardPanel>\n      )}\n\n      {/* Filters */}\n      {showFiltersPanel && (\n      <FiltersPanel>\n        <FiltersHeader>\n          <h3 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n            <FontAwesomeIcon icon={faFilter} style={{ color: '#3b82f6' }} />\n            Filtry a vyhledvn\n          </h3>\n          <div style={{ display: 'flex', gap: '0.5rem' }}>\n            <SmartTooltip text=\"Vymazat vechny filtry a zobrazit vechny objednvky\" icon=\"warning\" preferredPosition=\"bottom\">\n              <ActionButton onClick={clearFilters} style={{ backgroundColor: '#dc2626', borderColor: '#dc2626', color: 'white' }}>\n                <FontAwesomeIcon icon={faEraser} />\n                Vymazat filtry\n              </ActionButton>\n            </SmartTooltip>\n\n            <SmartTooltip text=\"Nast vlastn filtr stav z vaich nastaven (Profil  Nastaven  Vchoz filtry stav objednvek)\" icon=\"info\" preferredPosition=\"bottom\">\n              <ActionButton \n                onClick={loadCustomStatusFilter} \n                style={{\n                  backgroundColor: (() => {\n                    // Check if custom filter is active\n                    try {\n                      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n                      const customFilter = userSettings?.vychozi_filtry_stavu_objednavek;\n                      if (customFilter && Array.isArray(customFilter) && customFilter.length > 0) {\n                        // Compare current statusFilter with custom filter\n                        if (statusFilter.length === customFilter.length && \n                            statusFilter.every(val => customFilter.includes(val))) {\n                          return '#3b82f6'; // Active - blue\n                        }\n                      }\n                    } catch (e) {}\n                    return 'transparent'; // Inactive - transparent\n                  })(),\n                  borderColor: '#3b82f6',\n                  color: (() => {\n                    try {\n                      const userSettings = loadSettingsFromLocalStorage(parseInt(user_id, 10));\n                      const customFilter = userSettings?.vychozi_filtry_stavu_objednavek;\n                      if (customFilter && Array.isArray(customFilter) && customFilter.length > 0) {\n                        if (statusFilter.length === customFilter.length && \n                            statusFilter.every(val => customFilter.includes(val))) {\n                          return 'white'; // Active - white text\n                        }\n                      }\n                    } catch (e) {}\n                    return '#3b82f6'; // Inactive - blue text\n                  })(),\n                }}\n              >\n                <FontAwesomeIcon icon={faFilter} />\n                Vlastn\n              </ActionButton>\n            </SmartTooltip>\n\n            <SmartTooltip\n              text={showFilters\n                ? 'Skrt rozen filtry (zobrazit pouze zkladn vyhledvn)'\n                : 'Zobrazit rozen filtry (stav, fakturace, uivatel, lokality...)'}\n              icon=\"info\"\n              preferredPosition=\"bottom\"\n            >\n              <ActionButton onClick={handleToggleFilters}>\n                <FontAwesomeIcon icon={showFilters ? faChevronUp : faChevronDown} />\n                {showFilters ? 'Skrt filtry' : 'Rozen filtr'}\n              </ActionButton>\n            </SmartTooltip>\n\n            <SmartTooltip text=\"Skrt cel panel filtr a vyhledvn\" icon=\"info\" preferredPosition=\"bottom\">\n              <ActionButton onClick={handleHideFilters}>\n                <FontAwesomeIcon icon={faTimes} />\n                Skrt\n              </ActionButton>\n            </SmartTooltip>\n          </div>\n        </FiltersHeader>\n\n        <FilterGroup>\n          <FilterLabel>\n            <FontAwesomeIcon icon={faSearch} />\n            Fulltext vyhledvn\n            <HintText title=\"Vyhledvn bez diakritiky a bez rozlien velikosti psmen.  Tip: SHIFT+Enter rozbal/zabal vechny dky se shodou vyhledvn\">\n               Bez diakritiky  <kbd>Shift</kbd> + <kbd>Enter</kbd> rozbal dky se shodou vyhledvn\n            </HintText>\n          </FilterLabel>\n          <FilterInputWithIcon>\n            <FontAwesomeIcon icon={faSearch} />\n            <FilterInput\n              type=\"text\"\n              placeholder=\"Hledat v evidennm sle, pedmtu, objednateli...\"\n              value={globalFilter}\n              onChange={(e) => setGlobalFilter(e.target.value)}\n              onKeyDown={(e) => {\n                //  SHIFT+Enter = Rozbal/Zabal vechny nalezen objednvky\n                if (e.key === 'Enter' && e.shiftKey) {\n                  e.preventDefault();\n\n                  if (filteredData && filteredData.length > 0) {\n                    // Zjisti zda jsou vechny rozbalen\n                    const allExpanded = filteredData.every((_, index) => expanded[index]);\n\n                    if (allExpanded) {\n                      // Zabal vechny\n                      setExpanded({});\n                      showToast?.(\n                        `Zabaleno ${filteredData.length} ${filteredData.length === 1 ? 'objednvka' : filteredData.length < 5 ? 'objednvky' : 'objednvek'}`,\n                        { type: 'info', duration: 2000 }\n                      );\n                    } else {\n                      // Rozbal vechny\n                      const newExpanded = {};\n                      filteredData.forEach((order, index) => {\n                        newExpanded[index] = true;\n                      });\n                      setExpanded(newExpanded);\n\n                      showToast?.(\n                        `Rozbaleno ${filteredData.length} ${filteredData.length === 1 ? 'objednvka' : filteredData.length < 5 ? 'objednvky' : 'objednvek'}`,\n                        { type: 'success', duration: 2000 }\n                      );\n                    }\n                  }\n                }\n              }}\n              hasIcon\n              title=\"Fulltextov vyhledvn bez diakritiky a bez rozlien velikosti psmen.&#10; Tip: SHIFT+Enter pro rozbalen/zabalen vech vsledk\"\n            />\n            {globalFilter && (\n              <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n                <FontAwesomeIcon icon={faTimes} />\n              </ClearButton>\n            )}\n          </FilterInputWithIcon>\n        </FilterGroup>\n\n        {showFilters && (\n          <FiltersGrid>\n            {/* Prvn dek: Objednatel, Garant, Pkazce, Schvalovatel, Stav objednvky */}\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faUser} />\n                  Objednatel\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={selectedObjednatel.length > 0}\n                  onClick={clearObjednatelFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <SelectWithIcon>\n                <MultiSelectLocal\n                  field=\"selectedObjednatel\"\n                  value={selectedObjednatel}\n                  onChange={handleObjednatelChange}\n                  options={sortedActiveUsers}\n                  placeholder=\"Vyberte objednatele...\"\n                  icon={<FontAwesomeIcon icon={faUser} />}\n                />\n              </SelectWithIcon>\n            </FilterGroup>\n\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faUser} />\n                  Garant\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={selectedGarant.length > 0}\n                  onClick={clearGarantFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <SelectWithIcon>\n                <MultiSelectLocal\n                  field=\"selectedGarant\"\n                  value={selectedGarant}\n                  onChange={handleGarantChange}\n                  options={sortedActiveUsers}\n                  placeholder=\"Vyberte garanty...\"\n                  icon={<FontAwesomeIcon icon={faUser} />}\n                />\n              </SelectWithIcon>\n            </FilterGroup>\n\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faUser} />\n                  Pkazce\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={selectedPrikazce.length > 0}\n                  onClick={clearPrikazceFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <SelectWithIcon>\n                <MultiSelectLocal\n                  field=\"selectedPrikazce\"\n                  value={selectedPrikazce}\n                  onChange={handlePrikazceChange}\n                  options={sortedActiveApprovers}\n                  placeholder=\"Vyberte pkazce...\"\n                  icon={<FontAwesomeIcon icon={faUser} />}\n                />\n              </SelectWithIcon>\n            </FilterGroup>\n\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faShield} />\n                  Schvalovatel\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={selectedSchvalovatel.length > 0}\n                  onClick={clearSchvalovatelFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <SelectWithIcon>\n                <MultiSelectLocal\n                  field=\"selectedSchvalovatel\"\n                  value={selectedSchvalovatel}\n                  onChange={handleSchvalovatelChange}\n                  options={sortedActiveApprovers}\n                  placeholder=\"Vyberte schvalovatele...\"\n                  icon={<FontAwesomeIcon icon={faShield} />}\n                />\n              </SelectWithIcon>\n            </FilterGroup>\n\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faList} />\n                  Stav objednvky\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={statusFilter.length > 0}\n                  onClick={clearStatusFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <SelectWithIcon>\n                <MultiSelectLocal\n                  field=\"statusFilter\"\n                  value={statusFilter}\n                  onChange={handleStatusFilterChange}\n                  options={statusOptions}\n                  placeholder=\"Vyberte stavy...\"\n                  icon={<FontAwesomeIcon icon={faList} />}\n                />\n              </SelectWithIcon>\n            </FilterGroup>\n\n            {/* Druh dek: Datum od-do, Cena od-do */}\n            <DateRangeGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faCalendarAlt} />\n                  Datum od - do\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={dateFromFilter || dateToFilter}\n                  onClick={clearDateFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <DateRangeInputs>\n                <DateInputWrapper>\n                  <DatePicker\n                    value={dateFromFilter || ''}\n                    onChange={(value) => setDateFromFilter(value || '')}\n                    placeholder=\"Datum od\"\n                  />\n                </DateInputWrapper>\n                <DateSeparator></DateSeparator>\n                <DateInputWrapper>\n                  <DatePicker\n                    value={dateToFilter || ''}\n                    onChange={(value) => setDateToFilter(value || '')}\n                    placeholder=\"Datum do\"\n                  />\n                </DateInputWrapper>\n              </DateRangeInputs>\n            </DateRangeGroup>\n\n            <PriceRangeGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faMoneyBillWave} />\n                  Cena od - do (K)\n                </FilterLabelLeft>\n                <FilterClearButton\n                  type=\"button\"\n                  visible={amountFromFilter || amountToFilter}\n                  onClick={clearPriceFilter}\n                  title=\"Vymazat filtr\"\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                </FilterClearButton>\n              </FilterLabel>\n              <PriceRangeInputs>\n                <PriceInputWrapper>\n                  <FontAwesomeIcon icon={faMoneyBillWave} />\n                  <FilterInput\n                    type=\"text\"\n                    placeholder=\"0\"\n                    value={formatNumberWithSpaces(amountFromFilter)}\n                    onChange={handleAmountFromChange}\n                    hasIcon\n                    style={{ textAlign: 'right', paddingRight: '2.5rem' }}\n                  />\n                </PriceInputWrapper>\n                <PriceSeparator></PriceSeparator>\n                <PriceInputWrapper>\n                  <FontAwesomeIcon icon={faMoneyBillWave} />\n                  <FilterInput\n                    type=\"text\"\n                    placeholder=\"\"\n                    value={formatNumberWithSpaces(amountToFilter)}\n                    onChange={handleAmountToChange}\n                    hasIcon\n                    style={{ textAlign: 'right', paddingRight: '2.5rem' }}\n                  />\n                </PriceInputWrapper>\n              </PriceRangeInputs>\n            </PriceRangeGroup>\n\n            {/* Rychl filtry pro Stav registru + Mimodn udlosti */}\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faFileContract} />\n                  Stav registru\n                </FilterLabelLeft>\n              </FilterLabel>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n                <label style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: filterMaBytZverejneno ? '600' : '400',\n                  color: filterMaBytZverejneno ? '#f59e0b' : '#4b5563'\n                }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={filterMaBytZverejneno}\n                    onChange={(e) => {\n                      setFilterMaBytZverejneno(e.target.checked);\n                      setUserStorage('orders25List_filterMaBytZverejneno', e.target.checked);\n                    }}\n                    style={{\n                      cursor: 'pointer',\n                      width: '16px',\n                      height: '16px',\n                      accentColor: '#f59e0b'\n                    }}\n                  />\n                  <span>M bt zveejnno</span>\n                </label>\n                <label style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: filterByloZverejneno ? '600' : '400',\n                  color: filterByloZverejneno ? '#10b981' : '#4b5563'\n                }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={filterByloZverejneno}\n                    onChange={(e) => {\n                      setFilterByloZverejneno(e.target.checked);\n                      setUserStorage('orders25List_filterByloZverejneno', e.target.checked);\n                    }}\n                    style={{\n                      cursor: 'pointer',\n                      width: '16px',\n                      height: '16px',\n                      accentColor: '#10b981'\n                    }}\n                  />\n                  <span>Bylo ji zveejnno</span>\n                </label>\n              </div>\n            </FilterGroup>\n\n            {/* Mimodn udlosti - vedle Stav registru */}\n            <FilterGroup>\n              <FilterLabel>\n                <FilterLabelLeft>\n                  <FontAwesomeIcon icon={faBoltLightning} />\n                  Mimodn udlosti\n                </FilterLabelLeft>\n              </FilterLabel>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n                <label style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: filterMimoradneObjednavky ? '600' : '400',\n                  color: filterMimoradneObjednavky ? '#dc2626' : '#4b5563'\n                }}>\n                  <input\n                    type=\"checkbox\"\n                    checked={filterMimoradneObjednavky}\n                    onChange={(e) => {\n                      setFilterMimoradneObjednavky(e.target.checked);\n                      setUserStorage('orders25List_filterMimoradneObjednavky', e.target.checked);\n                    }}\n                    style={{\n                      cursor: 'pointer',\n                      width: '16px',\n                      height: '16px',\n                      accentColor: '#dc2626'\n                    }}\n                  />\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '0.35rem' }}>\n                    Krize / Havrie\n                  </span>\n                </label>\n              </div>\n            </FilterGroup>\n\n          </FiltersGrid>\n        )}\n      </FiltersPanel>\n      )}\n\n      {/* Table */}\n      <TableScrollWrapper\n        ref={setTableWrapperRef}\n        $showLeftShadow={showLeftShadow}\n        $showRightShadow={showRightShadow}\n      >\n          <TableContainer ref={tableRef}>\n            <Table>\n              <TableHead>\n            {/* Header row with column names */}\n            {table.getHeaderGroups().map(headerGroup => (\n              <tr key={headerGroup.id}>\n                {headerGroup.headers.map(header => (\n                  <TableHeader\n                    key={header.id}\n                    onClick={header.column.getCanSort() ? header.column.getToggleSortingHandler() : undefined}\n                    style={{\n                      cursor: header.column.getCanSort() ? 'pointer' : 'default',\n                      width: header.getSize()\n                    }}\n                  >\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}>\n                      {flexRender(header.column.columnDef.header, header.getContext())}\n                      {header.column.getCanSort() && header.column.getIsSorted() && (\n                        <FontAwesomeIcon\n                          icon={\n                            header.column.getIsSorted() === 'asc' ? faChevronUp :\n                            faChevronDown\n                          }\n                        />\n                      )}\n                    </div>\n                  </TableHeader>\n                ))}\n              </tr>\n            ))}\n\n            {/* Filter row with search inputs */}\n            <tr>\n              {table.getHeaderGroups()[0]?.headers.map(header => (\n                <TableHeader key={`filter-${header.id}`} style={{\n                  padding: '0.5rem',\n                  backgroundColor: '#f8f9fa',\n                  borderTop: '1px solid #e5e7eb'\n                }}>\n                  {header.id === 'select' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      height: '32px'\n                    }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={table.getIsAllRowsSelected()}\n                        ref={(el) => {\n                          if (el) el.indeterminate = table.getIsSomeRowsSelected() && !table.getIsAllRowsSelected();\n                        }}\n                        onChange={table.getToggleAllRowsSelectedHandler()}\n                        style={{ cursor: 'pointer', width: '18px', height: '18px' }}\n                        title={table.getIsAllRowsSelected() ? 'Zruit vbr vech' : 'Vybrat ve'}\n                      />\n                    </div>\n                  ) : header.id === 'expander' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      height: '32px'\n                    }}>\n                      <FilterActionButton\n                        onClick={toggleAllRows}\n                        title={table.getIsSomeRowsExpanded() ? \"Sbalit vechny dky\" : \"Rozbalit vechny dky\"}\n                      >\n                        <FontAwesomeIcon icon={table.getIsSomeRowsExpanded() ? faMinus : faPlus} />\n                      </FilterActionButton>\n                    </div>\n                  ) : header.id === 'actions' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      gap: '3px',\n                      height: '32px'\n                    }}>\n                      {/* Hromadn akce - zobraz se jen kdy jsou vybran objednvky */}\n                      {(() => {\n                        const selectedCount = table.getSelectedRowModel().rows.length;\n                        if (selectedCount > 0) {\n                          const selectedOrders = table.getSelectedRowModel().rows.map(row => row.original);\n\n                          // Kolik objednvek je \"Ke schvlen\"\n                          const approvalCount = selectedOrders.filter(o => o.stav_objednavky === 'Ke schvlen').length;\n\n                          // Kolik objednvek lze generovat DOCX (stejn detekce jako v kontextovm menu)\n                          const docxCount = selectedOrders.filter(o => canExportDocument(o)).length;\n\n                          return (\n                            <>\n                              {/* Schvalovn - jen pro admin + prvo APPROVE */}\n                              {approvalCount > 0 && (hasPermission('ADMIN') || hasPermission('ORDER_APPROVE')) && (\n                                <FilterActionButton\n                                  onClick={() => {\n                                    const eligibleOrders = selectedOrders.filter(o => o.stav_objednavky === 'Ke schvlen');\n                                    setBulkApprovalOrders(eligibleOrders);\n                                    setShowBulkApprovalDialog(true);\n                                  }}\n                                  title={`Schvlit ${approvalCount} vybranch objednvek (stav Ke schvlen)`}\n                                  style={{ color: '#059669' }}\n                                >\n                                  <FontAwesomeIcon icon={faCheckCircle} />\n                                  <ActionBadge>{approvalCount}</ActionBadge>\n                                </FilterActionButton>\n                              )}\n\n                              {docxCount > 0 && (\n                                <FilterActionButton\n                                  onClick={() => {\n                                    const eligibleOrders = selectedOrders.filter(o => canExportDocument(o));\n                                    setBulkDocxOrders(eligibleOrders);\n                                    // Inicializuj vbr podepisovatel - vchoz je schvalovatel\n                                    const initialSigners = {};\n                                    const initialTemplates = {};\n                                    eligibleOrders.forEach(order => {\n                                      initialSigners[order.id] = order.schvalovatel_id || order.schvalovatel || null;\n                                      // Vchoz ablona podle stavu a ceny\n                                      const templates = getTemplateOptions(order);\n                                      if (templates.length > 0) {\n                                        initialTemplates[order.id] = templates[0].value; // Prvn dostupn ablona\n                                      }\n                                    });\n                                    setBulkDocxSigners(initialSigners);\n                                    setBulkDocxTemplates(initialTemplates);\n                                    setShowBulkDocxDialog(true);\n                                  }}\n                                  title={`Generovat DOCX pro ${docxCount} vybranch objednvek (fze Rozpracovan+)`}\n                                  style={{ color: '#0891b2' }}\n                                >\n                                  <FontAwesomeIcon icon={faFileWord} />\n                                  <ActionBadge>{docxCount}</ActionBadge>\n                                </FilterActionButton>\n                              )}\n\n                              <FilterActionButton\n                                onClick={() => {\n                                  setBulkDeleteOrders(selectedOrders);\n                                  setShowBulkDeleteDialog(true);\n                                }}\n                                title={`Smazat ${selectedCount} vybranch objednvek`}\n                                style={{ color: '#dc2626' }}\n                              >\n                                <FontAwesomeIcon icon={faTrash} />\n                                <ActionBadge>{selectedCount}</ActionBadge>\n                              </FilterActionButton>\n                            </>\n                          );\n                        }\n                        return null;\n                      })()}\n\n                      {/* Defaultn akce - vdy zobrazen */}\n                      <FilterActionButton\n                        onClick={clearColumnFilters}\n                        title=\"Vymazat filtry sloupc\"\n                      >\n                        <FontAwesomeIcon icon={faEraser} />\n                      </FilterActionButton>\n                      <FilterActionButton\n                        onClick={toggleRowHighlighting}\n                        title={showRowHighlighting ?\n                          \"Vypnout zvrazovn dk podle stavu objednvky\\n(koncepty zstanou vdy zvraznn)\" :\n                          \"Zapnout zvrazovn dk podle stavu objednvky\\n(kad stav m svou barvu)\"}\n                        className={showRowHighlighting ? 'active' : ''}\n                      >\n                        <FontAwesomeIcon icon={faPalette} />\n                      </FilterActionButton>\n                    </div>\n                  ) : header.column.columnDef.accessorKey === 'dt_objednavky' ? (\n                    <div style={{ position: 'relative' }}>\n                      <DatePicker\n                        fieldName={`filter_${header.column.columnDef.accessorKey}`}\n                        value={columnFilters[header.column.columnDef.accessorKey] || ''}\n                        onChange={(value) => {\n                          const newFilters = { ...columnFilters };\n                          newFilters[header.column.columnDef.accessorKey] = value;\n                          setColumnFilters(newFilters);\n                        }}\n                        placeholder=\"Datum\"\n                        variant=\"compact\"\n                      />\n                    </div>\n                  ) : (\n                    <ColumnFilterWrapper>\n                      <FontAwesomeIcon icon={faSearch} />\n                      <ColumnFilterInput\n                        type=\"text\"\n                        placeholder={`Hledat ${header.column.columnDef.header}...`}\n                        value={columnFilters[header.column.columnDef.accessorKey] || ''}\n                        onChange={(e) => {\n                          const newFilters = { ...columnFilters };\n                          newFilters[header.column.columnDef.accessorKey] = e.target.value;\n                          setColumnFilters(newFilters);\n                        }}\n                      />\n                      {columnFilters[header.column.columnDef.accessorKey] && (\n                        <ColumnClearButton\n                          onClick={() => {\n                            const newFilters = { ...columnFilters };\n                            delete newFilters[header.column.columnDef.accessorKey];\n                            setColumnFilters(newFilters);\n                          }}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </ColumnClearButton>\n                      )}\n                    </ColumnFilterWrapper>\n                  )}\n                </TableHeader>\n              ))}\n            </tr>\n          </TableHead>\n          <tbody>\n            {orders.length === 0 ? (\n              // Przdn stav - uivatel nem dn objednvky (ped filtrovnm)\n              <tr>\n                <td colSpan={columns.length} style={{ padding: 0 }}>\n                  <EmptyState>\n                    <EmptyStateIcon>\n                      <FontAwesomeIcon icon={faFaceFrown} />\n                    </EmptyStateIcon>\n                    <EmptyStateTitle>Zatm nemte dnou objednvku</EmptyStateTitle>\n                    <EmptyStateText>\n                      Vytvote svou prvn objednvku kliknutm na tlatko \"Nov objednvka\" ve.\n                    </EmptyStateText>\n                  </EmptyState>\n                </td>\n              </tr>\n            ) : table.getRowModel().rows.length === 0 ? (\n              // Filtrovno - dn vsledky\n              <tr>\n                <td colSpan={columns.length} style={{ padding: '2rem', textAlign: 'center', color: '#64748b' }}>\n                  <FontAwesomeIcon icon={faFilter} style={{ fontSize: '2rem', marginBottom: '1rem', opacity: 0.5 }} />\n                  <div>dn objednvky nevyhovuj nastavenm filtrm</div>\n                </td>\n              </tr>\n            ) : (\n              table.getRowModel().rows.map((row, index) => (\n              <React.Fragment key={row.id}>\n                <TableRow\n                  $order={row.original}\n                  $isDraft={row.original.isDraft || false}\n                  $hasLocalChanges={row.original.hasLocalDraftChanges || false}\n                  $showHighlighting={showRowHighlighting}\n                  $isHighlighted={highlightOrderId && (row.original.id === highlightOrderId || row.original.cislo_objednavky === highlightOrderId)}\n                  onContextMenu={handleTableContextMenu}\n                  onDoubleClick={() => handleEdit(row.original)}\n                  data-order-id={row.original.cislo_objednavky || row.original.id}\n                  data-order-index={index + (currentPageIndex * pageSize)}\n                >\n                  {row.getVisibleCells().map(cell => (\n                    <TableCell key={cell.id}>\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n                {row.getIsExpanded() && (\n                  <TableRow\n                    $order={row.original}\n                    $showHighlighting={showRowHighlighting}\n                  >\n                    <TableCell colSpan={columns.length} style={{ padding: 0, borderBottom: '1px solid #000' }}>\n                      {renderExpandedContent(row.original)}\n                    </TableCell>\n                  </TableRow>\n                )}\n              </React.Fragment>\n            )))}\n          </tbody>\n        </Table>\n\n        {/* Pagination */}\n        <PaginationContainer>\n          <PaginationInfo>\n            Zobrazeno {table.getRowModel().rows.length} z {filteredData.length} objednvek\n            {filteredData.length !== orders.length && (\n              <span> (filtrovno z {orders.length})</span>\n            )}\n          </PaginationInfo>\n\n          <PaginationControls>\n            <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n              Zobrazit:\n            </span>\n            <PageSizeSelect\n              value={pageSize}\n              onChange={(e) => {\n                const newSize = parseInt(e.target.value);\n                setPageSize(newSize);\n                setUserStorage('orders25List_pageSize', newSize);\n                // Resetuj na prvn strnku pi zmn velikosti strnky\n                setCurrentPageIndex(0);\n                setUserStorage('orders25List_pageIndex', 0);\n                //  REMOVED: table.setPageSize/setPageIndex - React Table reaguje na state.pagination\n              }}\n            >\n              <option value={10}>10</option>\n              <option value={25}>25</option>\n              <option value={50}>50</option>\n              <option value={100}>100</option>\n              <option value={250}>250</option>\n            </PageSizeSelect>\n\n            <PageButton\n              onClick={goToFirstPage}\n              disabled={!table.getCanPreviousPage()}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToPreviousPage}\n              disabled={!table.getCanPreviousPage()}\n            >\n              \n            </PageButton>\n\n            <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n              Strnka {table.getState().pagination.pageIndex + 1} z {table.getPageCount()}\n            </span>\n\n            <PageButton\n              onClick={goToNextPage}\n              disabled={!table.getCanNextPage()}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToLastPage}\n              disabled={!table.getCanNextPage()}\n            >\n              \n            </PageButton>\n          </PaginationControls>\n        </PaginationContainer>\n      </TableContainer>\n    </TableScrollWrapper>\n\n    {/* Floating Scroll ipky - React Portal (FIXED position, mimo DOM tabulky) */}\n    {ReactDOM.createPortal(\n      <>\n        <ScrollArrowLeft\n          $visible={showLeftArrow}\n          $tableHovered={isTableHovered}\n          $arrowHovered={isArrowHovered}\n          onClick={handleScrollLeft}\n          onMouseEnter={() => setIsArrowHovered(true)}\n          onMouseLeave={() => setIsArrowHovered(false)}\n          disabled={!showLeftArrow}\n          aria-label=\"Scrollovat doleva\"\n        >\n          <FontAwesomeIcon icon={faChevronLeft} />\n        </ScrollArrowLeft>\n\n        <ScrollArrowRight\n          $visible={showRightArrow}\n          $tableHovered={isTableHovered}\n          $arrowHovered={isArrowHovered}\n          onClick={handleScrollRight}\n          onMouseEnter={() => setIsArrowHovered(true)}\n          onMouseLeave={() => setIsArrowHovered(false)}\n          disabled={!showRightArrow}\n          aria-label=\"Scrollovat doprava\"\n        >\n          <FontAwesomeIcon icon={faChevronRight} />\n        </ScrollArrowRight>\n      </>,\n      document.body\n    )}\n\n    {/* Modln dialog pro potvrzen editace - GRADIENT-MODERN style */}\n    <ConfirmDialog\n      isOpen={showEditConfirmModal}\n      onClose={handleEditCancel}\n      onConfirm={() => {\n        if (orderToEdit) {\n          handleEditConfirm();\n        } else {\n          handleCreateNewOrderConfirm();\n        }\n      }}\n      title={orderToEdit ? 'Potvrzen editace objednvky' : 'Potvrzen vytvoen nov objednvky'}\n      icon={faExclamationTriangle}\n      variant=\"warning\"\n      confirmText=\"Ano, pokraovat\"\n      cancelText=\"Ne, zruit\"\n    >\n      {orderToEdit ? (\n        <p>\n          Chystte se editovat objednvku <strong>\"{orderToEdit?.cislo_objednavky || orderToEdit?.predmet || orderToEdit?.ev_cislo || (orderToEdit?.id ? `ID ${orderToEdit.id}` : 'neznm objednvka')}\"</strong>.\n        </p>\n      ) : (\n        <p>\n          Chystte se vytvoit <strong>novou objednvku</strong>.\n        </p>\n      )}\n\n      {/* DEBUG INFO - zobraz draft kter bude smazn */}\n      {process.env.NODE_ENV === 'development' && (() => {\n        if (!currentDraftData) return (\n          <details style={{ fontSize: '0.8em', color: '#666', margin: '0.5rem 0' }}>\n            <summary>Debug info - dn draft v state</summary>\n            <pre>currentDraftData: null{'\\n'}orderToEdit: {JSON.stringify(orderToEdit, null, 2)}</pre>\n          </details>\n        );\n\n        try {\n          const formData = currentDraftData.formData || currentDraftData;\n          const isNewConcept = isValidConcept(currentDraftData);\n          const hasDbChanges = hasDraftChanges(currentDraftData);\n\n          return (\n            <details style={{ fontSize: '0.8em', color: '#666', margin: '0.5rem 0' }}>\n              <summary>Debug info - draft kter bude smazn </summary>\n              <pre>\n{` Draft Title: ${formData.ev_cislo || formData.cislo_objednavky || formData.predmet || 'N/A'}\n Draft ID: ${formData.id || 'dn ID (nov koncept)'}\n Pedmt: ${formData.predmet || 'N/A'}\n Is New Concept: ${isNewConcept ? 'ANO - pln nov objednvka' : 'NE'}\n Has DB Changes: ${hasDbChanges ? 'ANO - editace existujc DB obj.' : 'NE'}\n Saved Order ID: ${currentDraftData.savedOrderId || 'dn'}\n\n Pepnme na:\n${orderToEdit ? `   Objednvku: ${orderToEdit.cislo_objednavky || orderToEdit.predmet || 'ID ' + orderToEdit.id}` : '   NOVOU objednvku (przdn formul)'}`}\n              </pre>\n            </details>\n          );\n        } catch (error) {\n          return (\n            <details style={{ fontSize: '0.8em', color: '#666', margin: '0.5rem 0' }}>\n              <summary>Debug info - chyba zpracovn draftu</summary>\n              <pre>Error: {error.message}{'\\n'}orderToEdit: {JSON.stringify(orderToEdit, null, 2)}</pre>\n            </details>\n          );\n        }\n      })()}\n\n      {/* Zobraz varovn o rozepracovan objednvce, pokud existuje - ORDER25 SERVICE */}\n      {(() => {\n        if (!currentDraftData) return null;\n\n        try {\n          const formData = currentDraftData.formData || currentDraftData;\n          const draftTitle = formData.ev_cislo || formData.cislo_objednavky || formData.predmet || ' KONCEPT ';\n          const isNewConcept = isValidConcept(currentDraftData);\n\n          return (\n            <p style={{ background: '#fef3c7', padding: '0.75rem', borderRadius: '6px', border: '1px solid #f59e0b', margin: '0.5rem 0' }}>\n              <strong>Pozor:</strong> Mte rozepracovanou {isNewConcept ? 'novou objednvku' : 'editaci objednvky'}{' '}\n              <strong>{draftTitle}</strong>\n              . {orderToEdit ? 'Pepnutm na jinou objednvku' : 'Vytvoenm nov objednvky'} pijdete o neuloen zmny!\n            </p>\n          );\n        } catch (error) {\n          // Chyba pi zpracovn draft pro confirm dialog\n          return null;\n        }\n      })()}\n\n      {orderToEdit ? (\n        <>\n          <p>\n            <strong>Varovn:</strong> Tmto budou zrueny vechny ppadn neuloen zmny v jinch objednvkch a me dojt ke ztrt dat.\n          </p>\n          <p>\n            Chcete pokraovat v editaci?\n          </p>\n        </>\n      ) : (\n        <>\n          <p>\n            <strong>Varovn:</strong> Tmto budou zrueny vechny neuloen zmny v souasn objednvce a me dojt ke ztrt dat.\n          </p>\n          <p>\n            Chcete vytvoit novou objednvku a zahodit neuloen zmny?\n          </p>\n        </>\n      )}\n    </ConfirmDialog>\n\n      {/* Modln dialog pro varovn o archivovan objednvce - GRADIENT-MODERN style */}\n      <ConfirmDialog\n        isOpen={showArchivedWarningModal}\n        onClose={() => { setShowArchivedWarningModal(false); setOrderToEdit(null); }}\n        onConfirm={handleArchivedWarningConfirm}\n        title=\"Varovn - Importovan objednvka\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        confirmText=\"Ano, rozumm rizikm a chci pokraovat\"\n        cancelText=\"Ne, zruit\"\n      >\n        <p>\n          Chystte se editovat archivovanou objednvku <strong>\"{orderToEdit?.cislo_objednavky || orderToEdit?.ev_cislo || 'neznm objednvka'}\"</strong>.\n        </p>\n\n        <p style={{ background: '#fef3c7', padding: '0.75rem', borderRadius: '6px', border: '1px solid #f59e0b', margin: '0.75rem 0' }}>\n          <strong> UPOZORNN:</strong> Tato objednvka byla importovna z pvodnho systmu EEO a m stav <strong>ARCHIVOVNO</strong>.\n        </p>\n\n        <p>\n          Editace tto objednvky me ovlivnit ppadn opakovan import dat, pokud bude provdna aktualizace objednvek ze starho systmu.\n        </p>\n\n        <p>\n          <strong>Dsledky editace:</strong>\n        </p>\n        <ul style={{ marginLeft: '1.5rem', marginTop: '0.5rem' }}>\n          <li>Zmny v objednvce mohou bt pepsny pi opakovanm importu</li>\n          <li>Data nemus odpovdat pvodnmu systmu EEO</li>\n          <li>Me dojt ke ztrt vaich prav</li>\n        </ul>\n\n        <p style={{ marginTop: '1rem' }}>\n          Opravdu chcete pokraovat v editaci?\n        </p>\n      </ConfirmDialog>\n\n      {/* KOMBINOVAN modal: Archivovan objednvka + existujc koncept - GRADIENT-MODERN style */}\n      <ConfirmDialog\n        isOpen={showArchivedWithDraftWarningModal}\n        onClose={() => { setShowArchivedWithDraftWarningModal(false); setOrderToEdit(null); }}\n        onConfirm={handleArchivedWithDraftConfirm}\n        title=\"Dleit varovn\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        confirmText=\"Ano, rozumm a chci pokraovat\"\n        cancelText=\"Ne, zruit\"\n      >\n        <p>\n          Chystte se editovat archivovanou objednvku <strong>\"{orderToEdit?.cislo_objednavky || orderToEdit?.ev_cislo || 'neznm objednvka'}\"</strong>.\n        </p>\n\n        {/* VAROVN 1: Archivovan objednvka */}\n        <div style={{ background: '#fef3c7', padding: '0.75rem', borderRadius: '6px', border: '1px solid #f59e0b', margin: '0.75rem 0' }}>\n          <strong> VAROVN - ARCHIVOVNO:</strong><br />\n          Tato objednvka byla importovna z pvodnho systmu EEO a m stav <strong>ARCHIVOVNO</strong>.\n          Editace me bt pepsna pi opakovanm importu dat.\n        </div>\n\n        {/* VAROVN 2: Ztrta rozpracovan objednvky */}\n        <div style={{ background: '#fee2e2', padding: '0.75rem', borderRadius: '6px', border: '1px solid #ef4444', margin: '0.75rem 0' }}>\n          <strong> ZTRTA KONCEPTU:</strong><br />\n          Mte rozpracovanou objednvku, kter bude pi pokraovn <strong>ZTRACENA</strong> a nelze ji obnovit!\n        </div>\n\n        <p style={{ marginTop: '1rem' }}>\n          <strong>Co se stane po pokraovn:</strong>\n        </p>\n        <ul style={{ marginLeft: '1.5rem', marginTop: '0.5rem' }}>\n          <li>V rozpracovan koncept bude <strong>trvale smazn</strong></li>\n          <li>Otevete archivovanou objednvku k editaci</li>\n          <li>Zmny mohou bt pepsny pi budoucm importu</li>\n        </ul>\n\n        <p style={{ marginTop: '1rem', fontWeight: 'bold', color: '#dc2626' }}>\n          Opravdu chcete pokraovat a ztratit rozpracovanou objednvku?\n        </p>\n      </ConfirmDialog>\n\n      {/* Modln dialog pro potvrzen smazn - GRADIENT-MODERN style */}\n      <ConfirmDialog\n        isOpen={showDeleteConfirmModal}\n        onClose={handleDeleteCancel}\n        onConfirm={() => {\n          if (hasPermission('ORDER_MANAGE') || hasPermission('ORDER_2025')) {\n            handleDeleteConfirm('hard'); // Administrtor - smazat pln\n          } else {\n            handleDeleteConfirm('soft'); // Bn uivatel - oznait neaktivn\n          }\n        }}\n        title=\"Smazn objednvky\"\n        icon={faTrash}\n        variant=\"danger\"\n        confirmText={(hasPermission('ORDER_MANAGE') || hasPermission('ORDER_2025')) ? 'Smazat pln' : 'Oznait neaktivn'}\n        cancelText=\"Zruit\"\n      >\n        <p>\n          Chystte se smazat objednvku <strong>\"{orderToDelete?.cislo_objednavky || orderToDelete?.predmet || `ID ${orderToDelete?.id}`}\"</strong>.\n        </p>\n\n        {(hasPermission('ORDER_MANAGE') || hasPermission('ORDER_2025')) ? (\n          <div>\n            <p><strong>Mte administrtorsk prva. Vyberte zpsob smazn:</strong></p>\n            <div style={{ background: '#f3f4f6', padding: '1rem', borderRadius: '6px', margin: '1rem 0' }}>\n              <p><strong>Oznait jako neaktivn:</strong> Objednvka zstane v databzi, ale nebude se zobrazovat v seznamech.</p>\n              <p><strong>Smazat pln:</strong> Objednvka bude natrvalo smazna vetn vech poloek a ploh. Tuto akci nelze vrtit zpt!</p>\n            </div>\n            <div style={{ display: 'flex', gap: '0.75rem', marginTop: '1rem' }}>\n              <button\n                onClick={() => handleDeleteConfirm('soft')}\n                style={{\n                  padding: '0.875rem 1.75rem',\n                  border: '2px solid #d1d5db',\n                  borderRadius: '10px',\n                  fontWeight: '700',\n                  background: 'white',\n                  color: '#6b7280',\n                  cursor: 'pointer',\n                  fontSize: '0.9375rem',\n                  transition: 'all 0.2s ease'\n                }}\n              >\n                Oznait neaktivn\n              </button>\n            </div>\n          </div>\n        ) : (\n          <p>Objednvka bude oznaena jako neaktivn. Zstane v databzi, ale nebude se zobrazovat v seznamech.</p>\n        )}\n      </ConfirmDialog>\n\n      {/*  Modal pro zamenou objednvku - GRADIENT-MODERN style (ZELEN inforamn) */}\n      {lockedOrderInfo && (\n        <ConfirmDialog\n          isOpen={showLockedOrderDialog}\n          onClose={handleLockedOrderCancel}\n          onConfirm={lockedOrderInfo.canForceUnlock ? handleLockedOrderForceUnlock : handleLockedOrderCancel}\n          title={lockedOrderInfo.canForceUnlock ? 'Objednvka je zamen' : 'Objednvka nen dostupn'}\n          icon={faLock}\n          variant=\"success\"\n          confirmText={lockedOrderInfo.canForceUnlock ? 'Odemknout a pevzt' : 'Zavt'}\n          cancelText=\"Zruit\"\n          showCancel={lockedOrderInfo.canForceUnlock}\n        >\n          {lockedOrderInfo.canForceUnlock ? (\n            <>\n              <WarningText>\n                 Objednvka je aktuln editovna uivatelem:\n              </WarningText>\n              <UserInfo>\n                <strong>{lockedOrderInfo.lockedByUserName}</strong>\n              </UserInfo>\n\n              {/* Kontaktn daje */}\n              {(lockedOrderInfo.lockedByUserEmail || lockedOrderInfo.lockedByUserTelefon) && (\n                <ContactInfo>\n                  {lockedOrderInfo.lockedByUserEmail && (\n                    <ContactItem>\n                      <FontAwesomeIcon icon={faEnvelope} />\n                      <ContactLabel>Email:</ContactLabel>\n                      <a href={`mailto:${lockedOrderInfo.lockedByUserEmail}`}>\n                        {lockedOrderInfo.lockedByUserEmail}\n                      </a>\n                    </ContactItem>\n                  )}\n                  {lockedOrderInfo.lockedByUserTelefon && (\n                    <ContactItem>\n                      <FontAwesomeIcon icon={faPhone} />\n                      <ContactLabel>Telefon:</ContactLabel>\n                      <a href={`tel:${lockedOrderInfo.lockedByUserTelefon}`}>\n                        {lockedOrderInfo.lockedByUserTelefon}\n                      </a>\n                    </ContactItem>\n                  )}\n                </ContactInfo>\n              )}\n\n              {/* as zamen */}\n              {lockedOrderInfo.lockAgeMinutes !== null && lockedOrderInfo.lockAgeMinutes !== undefined && (\n                <LockTimeInfo>\n                  <FontAwesomeIcon icon={faClock} />\n                  Zameno ped {lockedOrderInfo.lockAgeMinutes} {lockedOrderInfo.lockAgeMinutes === 1 ? 'minutou' : lockedOrderInfo.lockAgeMinutes < 5 ? 'minutami' : 'minutami'}\n                </LockTimeInfo>\n              )}\n\n              <InfoText>\n                Jako <strong>{lockedOrderInfo.userRoleName}</strong> mete objednvku nsiln odemknout a pevzt.\n              </InfoText>\n              <WarningText>\n                 Pvodn uivatel bude informovn o pevzet objednvky a ztrat neuloen zmny.\n              </WarningText>\n            </>\n          ) : (\n            <>\n              <InfoText>\n                Objednvka je aktuln editovna uivatelem:\n              </InfoText>\n              <UserInfo>\n                <strong>{lockedOrderInfo.lockedByUserName}</strong>\n              </UserInfo>\n\n              {/* Kontaktn daje */}\n              {(lockedOrderInfo.lockedByUserEmail || lockedOrderInfo.lockedByUserTelefon) && (\n                <ContactInfo>\n                  {lockedOrderInfo.lockedByUserEmail && (\n                    <ContactItem>\n                      <FontAwesomeIcon icon={faEnvelope} />\n                      <ContactLabel>Email:</ContactLabel>\n                      <a href={`mailto:${lockedOrderInfo.lockedByUserEmail}`}>\n                        {lockedOrderInfo.lockedByUserEmail}\n                      </a>\n                    </ContactItem>\n                  )}\n                  {lockedOrderInfo.lockedByUserTelefon && (\n                    <ContactItem>\n                      <FontAwesomeIcon icon={faPhone} />\n                      <ContactLabel>Telefon:</ContactLabel>\n                      <a href={`tel:${lockedOrderInfo.lockedByUserTelefon}`}>\n                        {lockedOrderInfo.lockedByUserTelefon}\n                      </a>\n                    </ContactItem>\n                  )}\n                </ContactInfo>\n              )}\n\n              {/* as zamen */}\n              {lockedOrderInfo.lockAgeMinutes !== null && lockedOrderInfo.lockAgeMinutes !== undefined && (\n                <LockTimeInfo>\n                  <FontAwesomeIcon icon={faClock} />\n                  Zameno ped {lockedOrderInfo.lockAgeMinutes} {lockedOrderInfo.lockAgeMinutes === 1 ? 'minutou' : lockedOrderInfo.lockAgeMinutes < 5 ? 'minutami' : 'minutami'}\n                </LockTimeInfo>\n              )}\n\n              <InfoText>\n                Nelze ji nast pro editaci. Pokejte, a bude uivatel s editac hotov, nebo ho kontaktujte.\n              </InfoText>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n\n      {/*  FORCE UNLOCK WARNING DIALOG */}\n      {showForceUnlockWarning && forceUnlockWarningData && ReactDOM.createPortal(\n        <ForceUnlockWarningOverlay onClick={(e) => e.target === e.currentTarget && handleForceUnlockWarningClose()}>\n          <ForceUnlockWarningDialog onClick={(e) => e.stopPropagation()}>\n            <ForceUnlockWarningHeader>\n              <ForceUnlockWarningIcon></ForceUnlockWarningIcon>\n              <ForceUnlockWarningTitle>NSILN PEVZET OBJEDNVKY</ForceUnlockWarningTitle>\n            </ForceUnlockWarningHeader>\n\n            <ForceUnlockWarningContent>\n              <ForceUnlockWarningMessage>\n                <p>\n                  <strong>Vae objednvka byla nsiln pevzata jinm uivatelem!</strong>\n                </p>\n                <p>\n                  Objednvka <strong>{forceUnlockWarningData.orderNumber}</strong> byla nsiln odemena\n                  a pevzata. Vae neuloen zmny mohly bt ztraceny.\n                </p>\n              </ForceUnlockWarningMessage>\n\n              <ForceUnlockWarningDetails>\n                <ForceUnlockWarningDetailRow>\n                  <FontAwesomeIcon icon={faFileAlt} />\n                  <ForceUnlockWarningDetailLabel>Objednvka:</ForceUnlockWarningDetailLabel>\n                  <ForceUnlockWarningDetailValue>{forceUnlockWarningData.orderNumber}</ForceUnlockWarningDetailValue>\n                </ForceUnlockWarningDetailRow>\n\n                <ForceUnlockWarningDetailRow>\n                  <FontAwesomeIcon icon={faUser} />\n                  <ForceUnlockWarningDetailLabel>Pevzal:</ForceUnlockWarningDetailLabel>\n                  <ForceUnlockWarningDetailValue>{forceUnlockWarningData.lockedBy}</ForceUnlockWarningDetailValue>\n                </ForceUnlockWarningDetailRow>\n\n                {forceUnlockWarningData.lockedByEmail && (\n                  <ForceUnlockWarningDetailRow>\n                    <FontAwesomeIcon icon={faEnvelope} />\n                    <ForceUnlockWarningDetailLabel>Email:</ForceUnlockWarningDetailLabel>\n                    <ForceUnlockWarningDetailValue>\n                      <a\n                        href={`mailto:${forceUnlockWarningData.lockedByEmail}`}\n                        style={{ color: '#991b1b', textDecoration: 'underline' }}\n                      >\n                        {forceUnlockWarningData.lockedByEmail}\n                      </a>\n                    </ForceUnlockWarningDetailValue>\n                  </ForceUnlockWarningDetailRow>\n                )}\n\n                {forceUnlockWarningData.lockedByPhone && (\n                  <ForceUnlockWarningDetailRow>\n                    <FontAwesomeIcon icon={faPhone} />\n                    <ForceUnlockWarningDetailLabel>Telefon:</ForceUnlockWarningDetailLabel>\n                    <ForceUnlockWarningDetailValue>\n                      <a\n                        href={`tel:${forceUnlockWarningData.lockedByPhone}`}\n                        style={{ color: '#991b1b', textDecoration: 'underline' }}\n                      >\n                        {forceUnlockWarningData.lockedByPhone}\n                      </a>\n                    </ForceUnlockWarningDetailValue>\n                  </ForceUnlockWarningDetailRow>\n                )}\n\n                <ForceUnlockWarningDetailRow>\n                  <FontAwesomeIcon icon={faClock} />\n                  <ForceUnlockWarningDetailLabel>as:</ForceUnlockWarningDetailLabel>\n                  <ForceUnlockWarningDetailValue>\n                    {new Date(forceUnlockWarningData.lockedAt).toLocaleString('cs-CZ')}\n                  </ForceUnlockWarningDetailValue>\n                </ForceUnlockWarningDetailRow>\n              </ForceUnlockWarningDetails>\n\n              <ForceUnlockWarningActions>\n                <ForceUnlockWarningButton onClick={handleForceUnlockWarningClose}>\n                  Zavt\n                </ForceUnlockWarningButton>\n                <ForceUnlockWarningButton $primary onClick={handleForceUnlockWarningAcknowledge}>\n                  <FontAwesomeIcon icon={faCheckCircle} style={{ marginRight: '0.5rem' }} />\n                  Rozumm, aktualizovat seznam\n                </ForceUnlockWarningButton>\n              </ForceUnlockWarningActions>\n            </ForceUnlockWarningContent>\n          </ForceUnlockWarningDialog>\n        </ForceUnlockWarningOverlay>,\n        document.body\n      )}\n\n      {/* Kontextov menu */}\n      {contextMenu && (\n        <OrderContextMenu\n          x={contextMenu.x}\n          y={contextMenu.y}\n          order={contextMenu.order}\n          selectedData={contextMenu.selectedData}\n          onClose={handleCloseContextMenu}\n          onAddToTodo={handleAddToTodo}\n          onAddAlarm={handleAddAlarm}\n          onEdit={handleContextMenuEdit}\n          onDelete={handleContextMenuDelete}\n          onGenerateDocx={handleGenerateDocx}\n          onGenerateFinancialControl={handleGenerateFinancialControl}\n          canDelete={\n            hasPermission('ORDER_MANAGE') ||\n            hasPermission('ORDER_DELETE_ALL') ||\n            hasPermission('ORDER_2025') ||\n            (hasPermission('ORDER_DELETE_OWN') && contextMenu.order.uzivatel_id === currentUserId)\n          }\n        />\n      )}\n\n      {/* DOCX Generator Modal - Lazy loaded for better performance */}\n      {docxModalOpen && (\n        <Suspense fallback={<div>Natn...</div>}>\n          <DocxGeneratorModal\n            order={docxModalOrder}\n            isOpen={docxModalOpen}\n            onClose={handleDocxModalClose}\n          />\n        </Suspense>\n      )}\n\n      {/* Financial Control Modal - Lazy loaded for better performance */}\n      {financialControlModalOpen && (\n        <Suspense fallback={<div>Natn finann kontroly...</div>}>\n          <FinancialControlModal\n            order={financialControlOrder}\n            onClose={() => {\n              setFinancialControlModalOpen(false);\n              setFinancialControlOrder(null);\n            }}\n            generatedBy={{\n              fullName: `${userDetail?.titul_pred || ''} ${userDetail?.jmeno || ''} ${userDetail?.prijmeni || ''} ${userDetail?.titul_za || ''}`.trim(),\n              position: userDetail?.pozice || 'Pracovnk'\n            }}\n          />\n        </Suspense>\n      )}\n\n      {/* Hromadn generovn DOCX - Dialog */}\n      {showBulkDocxDialog && ReactDOM.createPortal(\n        <BulkDocxOverlay>\n          <BulkDocxDialog onClick={(e) => e.stopPropagation()}>\n            <BulkDocxHeader>\n              <BulkDocxTitle>\n                <FontAwesomeIcon icon={faFileWord} />\n                Hromadn generovn DOCX\n              </BulkDocxTitle>\n              <button\n                onClick={() => setShowBulkDocxDialog(false)}\n                style={{\n                  background: 'transparent',\n                  border: 'none',\n                  color: 'white',\n                  fontSize: '1.5rem',\n                  cursor: 'pointer',\n                  padding: '0.25rem',\n                  display: 'flex',\n                  alignItems: 'center'\n                }}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            </BulkDocxHeader>\n\n            <BulkDocxBody>\n              {bulkDocxOrders.map((order, index) => (\n                <BulkDocxOrderItem key={order.id || index}>\n                  <BulkDocxOrderHeader>\n                    <BulkDocxOrderNumber>\n                      <FontAwesomeIcon icon={faFileInvoice} style={{ color: '#0891b2' }} />\n                      Objednvka #{order.cislo_objednavky || order.id}\n                    </BulkDocxOrderNumber>\n                    <span style={{\n                      fontSize: '0.875rem',\n                      color: '#64748b',\n                      background: '#f1f5f9',\n                      padding: '0.25rem 0.75rem',\n                      borderRadius: '6px',\n                      fontWeight: '600'\n                    }}>\n                      {order.stav_objednavky || 'N/A'}\n                    </span>\n                  </BulkDocxOrderHeader>\n\n                  <BulkDocxOrderInfo>\n                    <strong>Pedmt objednvky:</strong> {order.predmet || 'Bez pedmtu'}\n                  </BulkDocxOrderInfo>\n\n                  <BulkDocxOrderInfo>\n                    <strong>Max. cena s DPH:</strong> {order.max_cena_s_dph ? `${parseFloat(order.max_cena_s_dph).toLocaleString('cs-CZ')} K` : 'Neuvedeno'}\n                  </BulkDocxOrderInfo>\n\n                  <BulkDocxOrderInfo>\n                    <strong>Dodavatel:</strong> {order.dodavatel_nazev || 'N/A'}\n                  </BulkDocxOrderInfo>\n\n                  <BulkDocxSignerSelect>\n                    <BulkDocxSignerLabel>\n                      ablona:\n                    </BulkDocxSignerLabel>\n                    <select\n                      value={bulkDocxTemplates[order.id] || ''}\n                      onChange={(e) => {\n                        const newTemplates = {\n                          ...bulkDocxTemplates,\n                          [order.id]: e.target.value\n                        };\n                        setBulkDocxTemplates(newTemplates);\n                        setUserStorage('bulkDocxTemplates', newTemplates);\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '0.75rem',\n                        border: '2px solid #e2e8f0',\n                        borderRadius: '8px',\n                        fontSize: '0.875rem',\n                        cursor: 'pointer',\n                        fontWeight: bulkDocxTemplates[order.id] ? '600' : '400',\n                        color: bulkDocxTemplates[order.id] ? '#1f2937' : '#9ca3af',\n                        background: 'white',\n                        transition: 'all 0.2s ease'\n                      }}\n                    >\n                      <option value=\"\">-- Vyberte ablonu --</option>\n                      {getTemplateOptions(order).map(template => (\n                        <option key={template.value} value={template.value}>\n                          {template.label}\n                        </option>\n                      ))}\n                    </select>\n                  </BulkDocxSignerSelect>\n\n                  <BulkDocxSignerSelect>\n                    <BulkDocxSignerLabel>\n                      Podepisovatel:\n                    </BulkDocxSignerLabel>\n                    <select\n                      value={bulkDocxSigners[order.id] || ''}\n                      onChange={(e) => {\n                        const newSigners = {\n                          ...bulkDocxSigners,\n                          [order.id]: e.target.value\n                        };\n                        setBulkDocxSigners(newSigners);\n                        setUserStorage('bulkDocxSigners', newSigners);\n                      }}\n                      style={{\n                        flex: 1,\n                        padding: '0.75rem',\n                        border: '2px solid #e2e8f0',\n                        borderRadius: '8px',\n                        fontSize: '0.875rem',\n                        cursor: 'pointer',\n                        fontWeight: bulkDocxSigners[order.id] ? '600' : '400',\n                        color: bulkDocxSigners[order.id] ? '#1f2937' : '#9ca3af',\n                        background: 'white',\n                        transition: 'all 0.2s ease'\n                      }}\n                    >\n                      <option value=\"\">Vyberte podepisovatele...</option>\n                      {(() => {\n                        const availableUsers = [];\n\n                        // Garant\n                        if (order.garant_uzivatel_id && order.garant_uzivatel?.cele_jmeno &&\n                            order.garant_uzivatel.cele_jmeno !== 'Nezadno' && order.garant_uzivatel.cele_jmeno !== 'Nezadano') {\n                          availableUsers.push({\n                            id: order.garant_uzivatel_id,\n                            name: order.garant_uzivatel.cele_jmeno,\n                            role: 'Garant'\n                          });\n                        }\n\n                        // Pkazce\n                        if (order.prikazce_id && order.prikazce?.cele_jmeno &&\n                            order.prikazce.cele_jmeno !== 'Nezadno' && order.prikazce.cele_jmeno !== 'Nezadano') {\n                          availableUsers.push({\n                            id: order.prikazce_id,\n                            name: order.prikazce.cele_jmeno,\n                            role: 'Pkazce'\n                          });\n                        }\n\n                        // Schvalovatel\n                        if (order.schvalovatel_id && order.schvalovatel?.cele_jmeno &&\n                            order.schvalovatel.cele_jmeno !== 'Nezadno' && order.schvalovatel.cele_jmeno !== 'Nezadano') {\n                          availableUsers.push({\n                            id: order.schvalovatel_id,\n                            name: order.schvalovatel.cele_jmeno,\n                            role: 'Schvalovatel'\n                          });\n                        }\n\n                        // Objednatel\n                        if (order.objednatel_id && order.objednatel?.cele_jmeno &&\n                            order.objednatel.cele_jmeno !== 'Nezadno' && order.objednatel.cele_jmeno !== 'Nezadano') {\n                          availableUsers.push({\n                            id: order.objednatel_id,\n                            name: order.objednatel.cele_jmeno,\n                            role: 'Objednatel'\n                          });\n                        }\n\n                        return availableUsers.map((user, index) => (\n                          <option key={`${order.id}-${user.id}-${user.role}-${index}`} value={user.id}>\n                            {user.name} ({user.role})\n                          </option>\n                        ));\n                      })()}\n                    </select>\n                  </BulkDocxSignerSelect>\n                </BulkDocxOrderItem>\n              ))}\n            </BulkDocxBody>\n\n            <BulkDocxFooter>\n              <BulkDocxSummary>\n                Celkem: {bulkDocxOrders.length} objednvek\n              </BulkDocxSummary>\n              <BulkDocxActions>\n                <BulkDocxButton\n                  className=\"secondary\"\n                  onClick={() => setShowBulkDocxDialog(false)}\n                >\n                  Zruit\n                </BulkDocxButton>\n                <BulkDocxButton\n                  className=\"primary\"\n                  onClick={() => {\n                    // Validace: zkontroluj, e vechny objednvky maj vybranou ablonu\n                    const missingTemplates = bulkDocxOrders.filter(order => !bulkDocxTemplates[order.id]);\n                    if (missingTemplates.length > 0) {\n                      const orderNumbers = missingTemplates.map(o => `#${o.cislo_objednavky || o.id}`).join(', ');\n                      showToast && showToast(\n                        `Vyberte ablonu pro vechny objednvky. Chyb u: ${orderNumbers}`,\n                        { type: 'error' }\n                      );\n                      return;\n                    }\n\n                    // Validace: zkontroluj, e vechny objednvky maj vybranho podepisovatele\n                    const missingSigners = bulkDocxOrders.filter(order => !bulkDocxSigners[order.id]);\n                    if (missingSigners.length > 0) {\n                      const orderNumbers = missingSigners.map(o => `#${o.cislo_objednavky || o.id}`).join(', ');\n                      showToast && showToast(\n                        `Vyberte podepisovatele pro vechny objednvky. Chyb u: ${orderNumbers}`,\n                        { type: 'error' }\n                      );\n                      return;\n                    }\n\n                    // TODO: Implementovat hromadn generovn\n                    alert('TODO: Implementovat hromadn generovn DOCX');\n                    setShowBulkDocxDialog(false);\n                  }}\n                >\n                  <FontAwesomeIcon icon={faFileWord} style={{ marginRight: '0.5rem' }} />\n                  Generovat DOCX\n                </BulkDocxButton>\n              </BulkDocxActions>\n            </BulkDocxFooter>\n          </BulkDocxDialog>\n        </BulkDocxOverlay>,\n        document.body\n      )}\n\n      {/* Hromadn schvalovn - ConfirmDialog */}\n      {showBulkApprovalDialog && (\n        <ConfirmDialog\n          isOpen={showBulkApprovalDialog}\n          onClose={() => setShowBulkApprovalDialog(false)}\n          onConfirm={async () => {\n            try {\n              setLoading(true);\n\n              // Hromadn schvlen - update stavu na SCHVALENA\n              const results = await Promise.allSettled(\n                bulkApprovalOrders.map(async (order) => {\n                  // Nati aktuln workflow stavy\n                  let currentWorkflow = [];\n                  try {\n                    if (Array.isArray(order.stav_workflow_kod)) {\n                      currentWorkflow = order.stav_workflow_kod;\n                    } else if (typeof order.stav_workflow_kod === 'string') {\n                      currentWorkflow = JSON.parse(order.stav_workflow_kod);\n                    }\n                  } catch (e) {\n                    currentWorkflow = [];\n                  }\n\n                  // Pidej nov stav SCHVALENA\n                  const newWorkflow = [\n                    ...currentWorkflow,\n                    {\n                      kod_stavu: 'SCHVALENA',\n                      nazev_stavu: 'Schvlen',\n                      timestamp: new Date().toISOString(),\n                      uzivatel_id: currentUserId\n                    }\n                  ];\n\n                  // Update objednvky\n                  const updateData = {\n                    stav_objednavky: 'Schvlen',\n                    stav_workflow_kod: JSON.stringify(newWorkflow),\n                    datum_schvaleni: new Date().toISOString()\n                  };\n\n                  const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api.eeo/orders-v2.php`, {\n                    method: 'POST',\n                    headers: {\n                      'Content-Type': 'application/json',\n                      'Authorization': `Bearer ${token}`\n                    },\n                    body: JSON.stringify({\n                      action: 'update',\n                      id: order.id,\n                      data: updateData,\n                      username: username\n                    })\n                  });\n\n                  if (!response.ok) {\n                    throw new Error(`Chyba pi schvalovn objednvky #${order.cislo_objednavky}`);\n                  }\n\n                  return { success: true, orderId: order.id };\n                })\n              );\n\n              const successful = results.filter(r => r.status === 'fulfilled').length;\n              const failed = results.filter(r => r.status === 'rejected').length;\n\n              if (successful > 0) {\n                showToast(` Schvleno: ${successful} objednvek`, 'success');\n                // Refresh dat\n                await loadData();\n                // Zru vbr\n                table.toggleAllRowsSelected(false);\n              }\n\n              if (failed > 0) {\n                showToast(` Selhalo: ${failed} objednvek`, 'error');\n              }\n\n              setShowBulkApprovalDialog(false);\n            } catch (error) {\n              console.error('Chyba pi hromadnm schvalovn:', error);\n              showToast('Chyba pi hromadnm schvalovn', 'error');\n            } finally {\n              setLoading(false);\n            }\n          }}\n          title=\"Hromadn schvlen objednvek\"\n          icon={faCheckCircle}\n          variant=\"success\"\n          confirmText=\"Schvlit ve\"\n          cancelText=\"Zruit\"\n        >\n          <div style={{ padding: '1rem 0' }}>\n            <p style={{ marginBottom: '1rem', fontSize: '1.05rem' }}>\n              Opravdu chcete schvlit <strong>{bulkApprovalOrders.length}</strong> vybranch objednvek?\n            </p>\n            <div style={{\n              background: '#f0fdf4',\n              border: '2px solid #86efac',\n              borderRadius: '8px',\n              padding: '1rem',\n              marginBottom: '1rem'\n            }}>\n              <h4 style={{ margin: '0 0 0.75rem 0', color: '#166534' }}>\n                 Seznam objednvek ke schvlen:\n              </h4>\n              <ul style={{ margin: 0, paddingLeft: '1.5rem', color: '#166534' }}>\n                {bulkApprovalOrders.map(order => (\n                  <li key={order.id} style={{ marginBottom: '0.5rem' }}>\n                    <strong>#{order.cislo_objednavky}</strong> - {order.nazev || 'Bez nzvu'}\n                  </li>\n                ))}\n              </ul>\n            </div>\n            <p style={{ color: '#64748b', fontSize: '0.95rem', lineHeight: '1.6' }}>\n              Po schvlen budou objednvky pesunuty do stavu <strong>\"Schvlen\"</strong> a bude\n              zaznamenno datum schvlen.\n            </p>\n          </div>\n        </ConfirmDialog>\n      )}\n\n      {/* Hromadn mazn - ConfirmDialog */}\n      {showBulkDeleteDialog && (\n        <ConfirmDialog\n          isOpen={showBulkDeleteDialog}\n          onClose={() => setShowBulkDeleteDialog(false)}\n          onConfirm={async () => {\n            try {\n              setLoading(true);\n\n              // Pouij vybran typ mazn (pro adminy)\n              const canHardDelete = hasPermission('ADMIN') || hasPermission('ORDER_DELETE_ALL');\n              const useHardDelete = canHardDelete && bulkDeleteType === 'hard';\n\n              const results = await Promise.allSettled(\n                bulkDeleteOrders.map(async (order) => {\n                  // Smazn objednvky s parametrem hard delete\n                  const response = await deleteOrderV2(order.id, token, username, useHardDelete);\n\n                  return { success: true, orderId: order.id };\n                })\n              );\n\n              const successful = results.filter(r => r.status === 'fulfilled').length;\n              const failed = results.filter(r => r.status === 'rejected').length;\n\n              if (successful > 0) {\n                // Odeber smazan objednvky ze seznamu\n                setOrders(prevOrders =>\n                  prevOrders.filter(o => !bulkDeleteOrders.find(del => del.id === o.id))\n                );\n                showToast(` Smazno: ${successful} objednvek`, 'success');\n                // Zru vbr\n                table.toggleAllRowsSelected(false);\n              }\n\n              if (failed > 0) {\n                showToast(` Selhalo: ${failed} objednvek`, 'error');\n              }\n\n              setShowBulkDeleteDialog(false);\n            } catch (error) {\n              console.error('Chyba pi hromadnm mazn:', error);\n              showToast('Chyba pi hromadnm mazn', 'error');\n            } finally {\n              setLoading(false);\n            }\n          }}\n          title=\"Hromadn mazn objednvek\"\n          icon={faTrash}\n          variant=\"danger\"\n          confirmText={\n            (hasPermission('ADMIN') || hasPermission('ORDER_DELETE_ALL'))\n              ? (bulkDeleteType === 'hard' ? \" Smazat pln\" : \"Smazat (soft)\")\n              : \"Smazat (soft)\"\n          }\n          cancelText=\"Zruit\"\n        >\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gap: '1.5rem',\n            padding: '1rem 0'\n          }}>\n            {/* LEV SLOUPEC - Volba typu smazn */}\n            <div>\n              <p style={{ marginBottom: '1rem', fontSize: '1.05rem' }}>\n                Opravdu chcete smazat <strong>{bulkDeleteOrders.length}</strong> vybranch objednvek?\n              </p>\n\n              {(hasPermission('ADMIN') || hasPermission('ORDER_DELETE_ALL')) ? (\n                <>\n                  {/* Vbr typu mazn pro adminy */}\n                  <div style={{\n                    background: '#f8fafc',\n                    border: '2px solid #cbd5e1',\n                    borderRadius: '8px',\n                    padding: '1rem'\n                  }}>\n                    <h4 style={{ margin: '0 0 0.75rem 0', color: '#475569', fontSize: '1rem' }}>\n                       Vyberte typ smazn:\n                    </h4>\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                      <label style={{\n                        display: 'flex',\n                        alignItems: 'flex-start',\n                        gap: '0.75rem',\n                        cursor: 'pointer',\n                        padding: '0.75rem',\n                        border: `2px solid ${bulkDeleteType === 'soft' ? '#3b82f6' : '#e2e8f0'}`,\n                        borderRadius: '6px',\n                        background: bulkDeleteType === 'soft' ? '#eff6ff' : 'white',\n                        transition: 'all 0.2s'\n                      }}>\n                        <input\n                          type=\"radio\"\n                          name=\"deleteType\"\n                          value=\"soft\"\n                          checked={bulkDeleteType === 'soft'}\n                          onChange={(e) => setBulkDeleteType(e.target.value)}\n                          style={{ marginTop: '0.25rem', accentColor: '#3b82f6', cursor: 'pointer' }}\n                        />\n                        <div>\n                          <div style={{ fontWeight: '600', color: '#1f2937', marginBottom: '0.25rem' }}>\n                            Mkk smazn (SOFT DELETE)\n                          </div>\n                          <div style={{ fontSize: '0.875rem', color: '#64748b' }}>\n                            Objednvky budou oznaeny jako neaktivn. Lze pozdji obnovit.\n                          </div>\n                        </div>\n                      </label>\n\n                      <label style={{\n                        display: 'flex',\n                        alignItems: 'flex-start',\n                        gap: '0.75rem',\n                        cursor: 'pointer',\n                        padding: '0.75rem',\n                        border: `2px solid ${bulkDeleteType === 'hard' ? '#dc2626' : '#e2e8f0'}`,\n                        borderRadius: '6px',\n                        background: bulkDeleteType === 'hard' ? '#fef2f2' : 'white',\n                        transition: 'all 0.2s'\n                      }}>\n                        <input\n                          type=\"radio\"\n                          name=\"deleteType\"\n                          value=\"hard\"\n                          checked={bulkDeleteType === 'hard'}\n                          onChange={(e) => setBulkDeleteType(e.target.value)}\n                          style={{ marginTop: '0.25rem', accentColor: '#dc2626', cursor: 'pointer' }}\n                        />\n                        <div>\n                          <div style={{ fontWeight: '600', color: '#991b1b', marginBottom: '0.25rem' }}>\n                             pln smazn (HARD DELETE)\n                          </div>\n                          <div style={{ fontSize: '0.875rem', color: '#991b1b' }}>\n                            <strong>NEVRATN!</strong> Smae ve vetn poloek, ploh a historie.\n                          </div>\n                        </div>\n                      </label>\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <div style={{\n                  background: '#fef3c7',\n                  border: '2px solid #fcd34d',\n                  borderRadius: '8px',\n                  padding: '1rem'\n                }}>\n                  <h4 style={{ margin: '0 0 0.75rem 0', color: '#92400e' }}>\n                     Mkk smazn (SOFT DELETE)\n                  </h4>\n                  <p style={{ margin: 0, color: '#92400e', fontSize: '0.95rem' }}>\n                    Objednvky budou pouze <strong>oznaeny jako neaktivn</strong>.\n                    Administrtor je me pozdji obnovit.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* PRAV SLOUPEC - Seznam objednvek */}\n            <div style={{\n              background: '#f8fafc',\n              border: '2px solid #cbd5e1',\n              borderRadius: '8px',\n              padding: '1rem'\n            }}>\n              <h4 style={{ margin: '0 0 0.75rem 0', color: '#475569' }}>\n                 Seznam objednvek ke smazn:\n              </h4>\n              <div style={{ margin: 0, color: '#475569', maxHeight: '300px', overflowY: 'auto' }}>\n                {bulkDeleteOrders.map(order => (\n                  <div key={order.id} style={{\n                    marginBottom: '0.75rem',\n                    padding: '0.5rem',\n                    background: 'white',\n                    borderRadius: '6px',\n                    border: '1px solid #e2e8f0'\n                  }}>\n                    <div style={{ fontSize: '1rem', fontWeight: '700', color: '#1f2937', marginBottom: '0.25rem' }}>\n                      #{order.cislo_objednavky}\n                    </div>\n                    <div style={{ fontSize: '0.8rem', color: '#64748b' }}>\n                      {order.predmet || order.nazev || 'Bez nzvu'}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </ConfirmDialog>\n      )}\n      </PageContent>\n      </Container>\n\n      {/*  Export Preview Modal */}\n      {showExportPreview && exportPreviewData && (\n        <ExportPreviewOverlay>\n          <ExportPreviewDialog>\n            <ExportPreviewHeader>\n              <ExportPreviewTitle>\n                <FontAwesomeIcon icon={faFileExport} />\n                Nhled exportu CSV\n              </ExportPreviewTitle>\n              <ExportPreviewCloseButton onClick={() => setShowExportPreview(false)}>\n                <FontAwesomeIcon icon={faTimes} />\n              </ExportPreviewCloseButton>\n            </ExportPreviewHeader>\n\n            <ExportPreviewContent>\n              {/* Informan karty */}\n              <ExportInfoGrid>\n                <ExportInfoCard>\n                  <ExportInfoLabel>Poet zznam</ExportInfoLabel>\n                  <ExportInfoValue>\n                    <FontAwesomeIcon icon={faDatabase} />\n                    {exportPreviewData.rowCount}\n                  </ExportInfoValue>\n                </ExportInfoCard>\n                <ExportInfoCard>\n                  <ExportInfoLabel>Poet sloupc</ExportInfoLabel>\n                  <ExportInfoValue>\n                    <FontAwesomeIcon icon={faTableColumns} />\n                    {exportPreviewData.columnCount}\n                  </ExportInfoValue>\n                </ExportInfoCard>\n                <ExportInfoCard>\n                  <ExportInfoLabel>Oddlova sloupc</ExportInfoLabel>\n                  <ExportInfoValue>\n                    <FontAwesomeIcon icon={faListCheck} />\n                    {exportPreviewData.separatorName}\n                  </ExportInfoValue>\n                </ExportInfoCard>\n                <ExportInfoCard>\n                  <ExportInfoLabel>Oddlova multiline</ExportInfoLabel>\n                  <ExportInfoValue>\n                    <FontAwesomeIcon icon={faListCheck} />\n                    {exportPreviewData.multilineSeparatorName}\n                  </ExportInfoValue>\n                </ExportInfoCard>\n                <ExportInfoCard>\n                  <ExportInfoLabel>Aktivn filtry</ExportInfoLabel>\n                  <ExportInfoValue>\n                    <FontAwesomeIcon icon={faFilter} />\n                    {(() => {\n                      let filterCount = 0;\n                      if (globalFilter) filterCount++;\n                      if (selectedYear !== new Date().getFullYear()) filterCount++;\n                      if (selectedMonth !== 'all') filterCount++;\n                      if (statusFilter && statusFilter.length > 0) filterCount++;\n                      if (selectedObjednatel && selectedObjednatel.length > 0) filterCount++;\n                      if (selectedGarant && selectedGarant.length > 0) filterCount++;\n                      if (selectedSchvalovatel && selectedSchvalovatel.length > 0) filterCount++;\n                      if (selectedPrikazce && selectedPrikazce.length > 0) filterCount++;\n                      if (dateFromFilter || dateToFilter) filterCount++;\n                      if (amountFromFilter || amountToFilter) filterCount++;\n                      return filterCount || 'dn';\n                    })()}\n                  </ExportInfoValue>\n                </ExportInfoCard>\n              </ExportInfoGrid>\n\n              {/* Nhled prvnch 5 dk */}\n              <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#1f2937', marginBottom: '1rem' }}>\n                Nhled prvnch 5 dk\n              </h3>\n              <div style={{ overflowX: 'auto', maxWidth: '100%' }}>\n              <ExportPreviewTable>\n                <ExportPreviewTableHeader>\n                  {Object.keys(exportPreviewData.data[0] || {}).map((column, idx) => {\n                    // Vypotej maximln ku sloupce (hlavika + vechny hodnoty)\n                    const headerLength = column.length;\n                    const maxValueLength = Math.max(\n                      ...exportPreviewData.data.slice(0, 5).map(row => \n                        String(row[column] || '').length\n                      )\n                    );\n                    const maxLength = Math.max(headerLength, maxValueLength);\n                    // Min 100px, max 400px, 8px na znak (prmrn ka)\n                    const width = Math.min(Math.max(maxLength * 8 + 32, 100), 400);\n                    \n                    return (\n                      <ExportPreviewTableHeaderCell key={idx} style={{ width: `${width}px`, minWidth: `${width}px` }}>\n                        {column}\n                      </ExportPreviewTableHeaderCell>\n                    );\n                  })}\n                </ExportPreviewTableHeader>\n                {exportPreviewData.data.slice(0, 5).map((row, rowIdx) => (\n                  <ExportPreviewTableRow key={rowIdx}>\n                    {Object.entries(row).map(([column, value], cellIdx) => {\n                      // Stejn vpoet ky jako u hlaviky\n                      const headerLength = column.length;\n                      const maxValueLength = Math.max(\n                        ...exportPreviewData.data.slice(0, 5).map(r => \n                          String(r[column] || '').length\n                        )\n                      );\n                      const maxLength = Math.max(headerLength, maxValueLength);\n                      const width = Math.min(Math.max(maxLength * 8 + 32, 100), 400);\n                      \n                      return (\n                        <ExportPreviewTableCell key={cellIdx} style={{ width: `${width}px`, minWidth: `${width}px` }} title={value}>\n                          {value}\n                        </ExportPreviewTableCell>\n                      );\n                    })}\n                  </ExportPreviewTableRow>\n                ))}\n              </ExportPreviewTable>\n              </div>\n            </ExportPreviewContent>\n\n            <ExportPreviewFooter>\n              <ExportPreviewNote>\n                <FontAwesomeIcon icon={faInfoCircle} />\n                Export bude obsahovat pouze {exportPreviewData.rowCount} vyfiltrovanch objednvek\n              </ExportPreviewNote>\n              <ExportPreviewActions>\n                <ExportPreviewButton \n                  $variant=\"cancel\" \n                  onClick={() => setShowExportPreview(false)}\n                >\n                  <FontAwesomeIcon icon={faTimes} />\n                  Zruit\n                </ExportPreviewButton>\n                <ExportPreviewButton \n                  $variant=\"confirm\" \n                  onClick={handleConfirmExport}\n                >\n                  <FontAwesomeIcon icon={faDownload} />\n                  Sthnout CSV\n                </ExportPreviewButton>\n              </ExportPreviewActions>\n            </ExportPreviewFooter>\n          </ExportPreviewDialog>\n        </ExportPreviewOverlay>\n      )}\n\n      {/* Floating Header Panel - React Portal */}\n      {showFloatingHeader && ReactDOM.createPortal(\n        <FloatingHeaderPanel $visible={showFloatingHeader}>\n          <FloatingTableWrapper data-floating-header-wrapper>\n            <table style={{ width: '100%', borderCollapse: 'collapse', tableLayout: 'fixed' }}>\n              {/* Definice ek sloupc podle namench hodnot */}\n              {columnWidths.length > 0 && (\n                <colgroup>\n                  {columnWidths.map((width, index) => (\n                    <col key={index} style={{ width: `${width}px` }} />\n                  ))}\n                </colgroup>\n              )}\n              <TableHead>\n                {/* Hlavn dek se jmny sloupc - renderuj stejn header jako v hlavn tabulce */}\n                {table.getHeaderGroups().map(headerGroup => (\n                  <tr key={headerGroup.id}>\n                    {headerGroup.headers.map(header => (\n                      <TableHeader\n                        key={header.id}\n                        onClick={header.column.getCanSort() ? header.column.getToggleSortingHandler() : undefined}\n                        style={{\n                          cursor: header.column.getCanSort() ? 'pointer' : 'default',\n                          width: header.getSize()\n                        }}\n                      >\n                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}>\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                          {header.column.getCanSort() && header.column.getIsSorted() && (\n                            <FontAwesomeIcon\n                              icon={header.column.getIsSorted() === 'desc' ? faChevronDown : faChevronUp}\n                              style={{ fontSize: '0.75rem', opacity: 0.7 }}\n                            />\n                          )}\n                        </div>\n                      </TableHeader>\n                    ))}\n                  </tr>\n                ))}\n                {/* Druh dek s filtry ve sloupcch - PESN KOPIE Z ORIGINLN HLAVIKY */}\n                <tr>\n                  {table.getHeaderGroups()[0]?.headers.map(header => (\n                    <TableHeader key={`filter-floating-${header.id}`} style={{\n                      padding: '0.5rem',\n                      backgroundColor: '#f8f9fa',\n                      borderTop: '1px solid #e5e7eb'\n                    }}>\n                      {header.id === 'select' ? (\n                        <div style={{\n                          display: 'flex',\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          height: '32px'\n                        }}>\n                          <input\n                            type=\"checkbox\"\n                            checked={table.getIsAllRowsSelected()}\n                            ref={(el) => {\n                              if (el) el.indeterminate = table.getIsSomeRowsSelected() && !table.getIsAllRowsSelected();\n                            }}\n                            onChange={table.getToggleAllRowsSelectedHandler()}\n                            style={{ cursor: 'pointer', width: '18px', height: '18px' }}\n                            title={table.getIsAllRowsSelected() ? 'Zruit vbr vech' : 'Vybrat ve'}\n                          />\n                        </div>\n                      ) : header.id === 'expander' ? (\n                        <div style={{\n                          display: 'flex',\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          height: '32px'\n                        }}>\n                          <FilterActionButton\n                            onClick={toggleAllRows}\n                            title={table.getIsSomeRowsExpanded() ? \"Sbalit vechny dky\" : \"Rozbalit vechny dky\"}\n                          >\n                            <FontAwesomeIcon icon={table.getIsSomeRowsExpanded() ? faMinus : faPlus} />\n                          </FilterActionButton>\n                        </div>\n                      ) : header.id === 'actions' ? (\n                        <div style={{\n                          display: 'flex',\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          gap: '3px',\n                          height: '32px'\n                        }}>\n                          {/* Hromadn akce */}\n                          {(() => {\n                            const selectedCount = table.getSelectedRowModel().rows.length;\n                            if (selectedCount > 0) {\n                              const selectedOrders = table.getSelectedRowModel().rows.map(row => row.original);\n                              const approvalCount = selectedOrders.filter(o => o.stav_objednavky === 'Ke schvlen').length;\n                              const docxCount = selectedOrders.filter(o => canExportDocument(o)).length;\n\n                              return (\n                                <>\n                                  {approvalCount > 0 && (hasPermission('ADMIN') || hasPermission('ORDER_APPROVE')) && (\n                                    <FilterActionButton\n                                      onClick={() => {\n                                        const eligibleOrders = selectedOrders.filter(o => o.stav_objednavky === 'Ke schvlen');\n                                        setBulkApprovalOrders(eligibleOrders);\n                                        setShowBulkApprovalDialog(true);\n                                      }}\n                                      title={`Schvlit ${approvalCount} vybranch objednvek`}\n                                      style={{ color: '#059669' }}\n                                    >\n                                      <FontAwesomeIcon icon={faCheckCircle} />\n                                      <ActionBadge>{approvalCount}</ActionBadge>\n                                    </FilterActionButton>\n                                  )}\n                                  {docxCount > 0 && (\n                                    <FilterActionButton\n                                      onClick={() => {\n                                        const eligibleOrders = selectedOrders.filter(o => canExportDocument(o));\n                                        setBulkDocxOrders(eligibleOrders);\n                                        const initialSigners = {};\n                                        const initialTemplates = {};\n                                        eligibleOrders.forEach(order => {\n                                          initialSigners[order.id] = order.schvalovatel_id || order.schvalovatel || null;\n                                          const templates = getTemplateOptions(order);\n                                          if (templates.length > 0) {\n                                            initialTemplates[order.id] = templates[0].value;\n                                          }\n                                        });\n                                        setBulkDocxSigners(initialSigners);\n                                        setBulkDocxTemplates(initialTemplates);\n                                        setShowBulkDocxDialog(true);\n                                      }}\n                                      title={`Generovat DOCX pro ${docxCount} vybranch objednvek`}\n                                      style={{ color: '#0891b2' }}\n                                    >\n                                      <FontAwesomeIcon icon={faFileWord} />\n                                      <ActionBadge>{docxCount}</ActionBadge>\n                                    </FilterActionButton>\n                                  )}\n                                  <FilterActionButton\n                                    onClick={() => {\n                                      setBulkDeleteOrders(selectedOrders);\n                                      setShowBulkDeleteDialog(true);\n                                    }}\n                                    title={`Smazat ${selectedCount} vybranch objednvek`}\n                                    style={{ color: '#dc2626' }}\n                                  >\n                                    <FontAwesomeIcon icon={faTrash} />\n                                    <ActionBadge>{selectedCount}</ActionBadge>\n                                  </FilterActionButton>\n                                </>\n                              );\n                            }\n                            return null;\n                          })()}\n                          <FilterActionButton\n                            onClick={clearColumnFilters}\n                            title=\"Vymazat filtry sloupc\"\n                          >\n                            <FontAwesomeIcon icon={faEraser} />\n                          </FilterActionButton>\n                          <FilterActionButton\n                            onClick={toggleRowHighlighting}\n                            title={showRowHighlighting ? \"Vypnout zvrazovn dk\" : \"Zapnout zvrazovn dk\"}\n                            className={showRowHighlighting ? 'active' : ''}\n                          >\n                            <FontAwesomeIcon icon={faPalette} />\n                          </FilterActionButton>\n                        </div>\n                      ) : header.column.columnDef.accessorKey === 'dt_objednavky' ? (\n                        <div style={{ position: 'relative' }}>\n                          <DatePicker\n                            fieldName={`filter_floating_${header.column.columnDef.accessorKey}`}\n                            value={columnFilters[header.column.columnDef.accessorKey] || ''}\n                            onChange={(value) => {\n                              const newFilters = { ...columnFilters };\n                              newFilters[header.column.columnDef.accessorKey] = value;\n                              setColumnFilters(newFilters);\n                            }}\n                            placeholder=\"Datum\"\n                            variant=\"compact\"\n                          />\n                        </div>\n                      ) : (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder={`Hledat ${header.column.columnDef.header}...`}\n                            value={columnFilters[header.column.columnDef.accessorKey] || ''}\n                            onChange={(e) => {\n                              const newFilters = { ...columnFilters };\n                              newFilters[header.column.columnDef.accessorKey] = e.target.value;\n                              setColumnFilters(newFilters);\n                            }}\n                          />\n                          {columnFilters[header.column.columnDef.accessorKey] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                const newFilters = { ...columnFilters };\n                                delete newFilters[header.column.columnDef.accessorKey];\n                                setColumnFilters(newFilters);\n                              }}\n                              title=\"Vymazat\"\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n                    </TableHeader>\n                  ))}\n                </tr>\n              </TableHead>\n            </table>\n          </FloatingTableWrapper>\n        </FloatingHeaderPanel>,\n        document.body\n      )}\n\n      {/* Modern Sponka helper - kontextov npovda pro seznam objednvek */}\n      {hasPermission('HELPER_VIEW') && <ModernHelper pageContext=\"orders\" />}\n    </>\n  );\n};\n\nexport default Orders25List;","/**\n * Pekld anglick error messages do etiny\n * @param {string} errorMessage - Pvodn error message\n * @returns {string} - Peloen error message\n */\nexport function translateErrorMessage(errorMessage) {\n  if (!errorMessage || typeof errorMessage !== 'string') {\n    return errorMessage || 'Neznm chyba';\n  }\n\n  // Pekldme timeout chyby\n  if (errorMessage.includes('timeout') && errorMessage.includes('exceeded')) {\n    const match = errorMessage.match(/timeout of (\\d+)ms exceeded/);\n    if (match) {\n      const timeoutMs = match[1];\n      const timeoutSec = Math.round(timeoutMs / 1000);\n      return `Pekroen asov limit ${timeoutSec}s - server neodpovdl vas`;\n    } else {\n      return 'Pekroen asov limit - server neodpovdl vas';\n    }\n  }\n\n  // Pekldme dal bn axios/network chyby\n  if (errorMessage.includes('Network Error')) {\n    return 'Chyba st - zkontrolujte internetov pipojen';\n  }\n\n  if (errorMessage.includes('Request failed with status code 500')) {\n    return 'Chyba serveru (kd 500) - zkuste to znovu pozdji';\n  }\n\n  if (errorMessage.includes('Request failed with status code 404')) {\n    return 'Poadovan zdroj nebyl nalezen (kd 404)';\n  }\n\n  if (errorMessage.includes('Request failed with status code 403')) {\n    return 'Nemte oprvnn k tto operaci (kd 403)';\n  }\n\n  if (errorMessage.includes('Request failed with status code 401')) {\n    return 'Neautorizovan pstup - zkuste se znovu pihlsit (kd 401)';\n  }\n\n  if (errorMessage.includes('ECONNREFUSED') || errorMessage.includes('connection refused')) {\n    return 'Nelze se pipojit k serveru - server je pravdpodobn nedostupn';\n  }\n\n  if (errorMessage.includes('ENOTFOUND') || errorMessage.includes('getaddrinfo ENOTFOUND')) {\n    return 'Server nenalezen - zkontrolujte adresu serveru';\n  }\n\n  // Pokud nen rozpoznan chyba, vra pvodn message\n  return errorMessage;\n}\n\n/**\n * Zkrcen verze pro timeout chyby bez dodatenho textu\n * @param {string} errorMessage - Pvodn error message\n * @returns {string} - Peloen error message (krat verze)\n */\nexport function translateErrorMessageShort(errorMessage) {\n  if (!errorMessage || typeof errorMessage !== 'string') {\n    return errorMessage || 'Neznm chyba';\n  }\n\n  // Pekldme timeout chyby\n  if (errorMessage.includes('timeout') && errorMessage.includes('exceeded')) {\n    const match = errorMessage.match(/timeout of (\\d+)ms exceeded/);\n    if (match) {\n      const timeoutMs = match[1];\n      const timeoutSec = Math.round(timeoutMs / 1000);\n      return `Pekroen asov limit ${timeoutSec}s`;\n    } else {\n      return 'Pekroen asov limit';\n    }\n  }\n\n  // Pro ostatn chyby pouij plnou funkci\n  return translateErrorMessage(errorMessage);\n}","/**\n * Utility funkce pro prci s textem\n */\n\n/**\n * Odstran diakritiku z textu (esk hky a rky)\n * Uiten pro vyhledvn bez ohledu na diakritiku\n *\n * @param {string} text - Text k normalizaci\n * @returns {string} Text bez diakritiky v lowercase\n *\n * @example\n * removeDiacritics('Pli luouk k')\n * // returns 'prilis zlutoucky kun'\n */\nexport const removeDiacritics = (text) => {\n  if (!text) return '';\n  return text\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, ''); // Odstran diakritick znaky\n};\n\n/**\n * Formtuje jmno uivatele vetn titul\n *\n * @param {object} user - Objekt uivatele s fields: titul_pred, jmeno, prijmeni, titul_za\n * @returns {string} Formtovan cel jmno s tituly\n *\n * @example\n * formatUserDisplayName({ titul_pred: 'Ing.', jmeno: 'Jan', prijmeni: 'Novk', titul_za: 'Ph.D.' })\n * // returns 'Ing. Jan Novk, Ph.D.'\n */\nexport const formatUserDisplayName = (user) => {\n  if (!user) return '';\n\n  const { titul_pred, jmeno, prijmeni, titul_za } = user;\n\n  // Sprvn poad: Titul ped + Jmno + Pjmen + Titul za\n  const titul_pred_str = titul_pred ? titul_pred + ' ' : '';\n  const jmeno_str = jmeno || '';\n  const prijmeni_str = prijmeni || '';\n  const titul_za_str = titul_za ? ', ' + titul_za : '';\n\n  return `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`\n    .replace(/\\s+/g, ' ')\n    .trim();\n};\n\n/**\n * Zsk zobraziteln jmno uivatele z ID nebo enriched objektu\n *\n * @param {number|string} userId - ID uivatele\n * @param {object} enrichedUser - Enriched objekt uivatele (s tituly)\n * @param {object} usersMap - Mapa uivatel (userId -> user data)\n * @returns {string} Zobraziteln jmno nebo 'Neznm'\n */\nexport const getUserDisplayName = (userId, enrichedUser = null, usersMap = {}) => {\n  if (enrichedUser) {\n    return formatUserDisplayName(enrichedUser);\n  }\n\n  if (userId && usersMap[userId]) {\n    // Pokud mme objekt s displayName, pouij ho\n    if (typeof usersMap[userId] === 'object' && usersMap[userId].displayName) {\n      return usersMap[userId].displayName;\n    }\n    // Pokud je to star formt (pouze string), pouij ho\n    if (typeof usersMap[userId] === 'string') {\n      return usersMap[userId];\n    }\n  }\n\n  return 'Neznm';\n};\n","/**\n *  CENTRALIZED ICON MAPPING\n *\n * Tento modul poskytuje jednotnou logiku pro mapovn stav objednvek,\n * notifikac a dalch entit na FontAwesome ikony.\n *\n * Vechny komponenty by mly pouvat tyto funkce msto vlastnch implementac,\n * aby byla zachovna konzistence nap celou aplikac.\n */\n\nimport {\n  faPlay, faHourglassHalf, faCheckCircle, faBan, faClock,\n  faTruck, faShield, faFileContract, faStop, faPause,\n  faTimesCircle, faArchive, faInfoCircle, faExclamationCircle,\n  faBell, faExclamationTriangle, faBolt, faBullseye\n} from '@fortawesome/free-solid-svg-icons';\n\n/**\n * Mapovn stav objednvek na FontAwesome ikony\n *\n * @param {string} status - Stav objednvky (nap. 'nova', 'schvalena', 'odeslana')\n * @returns {object} FontAwesome ikona\n */\nexport const getStatusIcon = (status) => {\n  // Normalizace: odstrann diakritiky a pevod na lowercase\n  const normalizedStatus = status?.toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, ''); // Odstrann diakritiky\n\n  switch (normalizedStatus) {\n    // Zkladn stavy\n    case 'nova':\n      return faPlay;\n    case 'ke_schvaleni':\n    case 'keSchvaleni':\n      return faHourglassHalf;\n    case 'schvalena':\n      return faCheckCircle;\n    case 'zamitnuta':\n      return faTimesCircle;\n    case 'rozpracovana':\n      return faClock;\n\n    // Pracovn stavy\n    case 'odeslana':\n      return faTruck;\n    case 'potvrzena':\n      return faShield;\n    case 'uverejnena':\n    case 'registr_zverejnena':\n    case 'registrzverejnena':\n      return faFileContract;\n    case 'dokoncena':\n      return faBullseye; // Pouv se v tabulce, kompaktn reim m pmo emoji\n    case 'ceka_potvrzeni':\n    case 'cekaPotvrzeni':\n    case 'ceka_se':\n    case 'cekaSe':\n      return faPause;\n    case 'zrusena':\n      return faTimesCircle;\n    case 'archivovano':\n    case 'archivovana':\n      return faArchive;\n\n    // Kontroln stavy\n    case 'kontrola_ceka':\n    case 'cekaKontrola':\n      return faClock;\n    case 'kontrola_potvrzena':\n    case 'vecnaSpravnost':\n    case 'vecna_spravnost':\n      return faCheckCircle;\n\n    // Vchoz ikona pro neznm stavy\n    default:\n      return faInfoCircle;\n  }\n};\n\n/**\n * Mapovn typ notifikac na FontAwesome ikony\n *\n * Pro notifikace souvisejc s objednvkami se pouije ikona podle stavu.\n * Pro ostatn notifikace jsou definovny specifick ikony.\n *\n * @param {string} notificationType - Typ notifikace (nap. 'order_status_nova', 'todo_alarm')\n * @param {string} priority - Priorita notifikace ('low', 'normal', 'high', 'urgent')\n * @returns {object} FontAwesome ikona\n */\nexport const getNotificationIcon = (notificationType, priority = 'normal') => {\n  // Pokud je to notifikace o zmn stavu objednvky, pouij ikonu podle stavu\n  if (notificationType?.startsWith('order_status_')) {\n    const status = notificationType.replace('order_status_', '');\n    return getStatusIcon(status);\n  }\n\n  // Specifick typy notifikac\n  switch (notificationType) {\n    // TODO alarmy\n    case 'todo_alarm':\n      return faBell;\n    case 'todo_alarm_high':\n      return faExclamationTriangle;\n    case 'todo_alarm_expired':\n      return faExclamationCircle;\n\n    // Force unlock\n    case 'order_unlock_forced':\n      return faBolt;\n\n    // Obecn notifikace (deprecated, ale ponechno pro zptnou kompatibilitu)\n    case 'order_approved':\n      return faCheckCircle;\n    case 'order_rejected':\n      return faBan;\n    case 'order_created':\n      return faPlay;\n\n    // Vchoz podle priority\n    default:\n      return getPriorityIcon(priority);\n  }\n};\n\n/**\n * Zskn ikony podle priority notifikace\n *\n * @param {string} priority - Priorita ('low', 'normal', 'high', 'urgent')\n * @returns {object} FontAwesome ikona\n */\nexport const getPriorityIcon = (priority) => {\n  switch (priority) {\n    case 'urgent':\n    case 'high':\n      return faExclamationCircle;\n    case 'normal':\n      return faBell;\n    case 'low':\n    default:\n      return faInfoCircle;\n  }\n};\n\n/**\n * Helper funkce: Extrahuje stav objednvky z typu notifikace\n *\n * @param {string} notificationType - Typ notifikace (nap. 'order_status_schvalena')\n * @returns {string|null} Stav objednvky nebo null\n */\nexport const extractOrderStatusFromNotificationType = (notificationType) => {\n  if (!notificationType?.startsWith('order_status_')) {\n    return null;\n  }\n  return notificationType.replace('order_status_', '');\n};\n\n/**\n *  Mapovn typ notifikac na EMOJI ikony\n * \n *  DEPRECATED od 17.12.2025 - Msto emoji se nyn pouvaj FontAwesome ikony podle priority\n * @see NotificationsPage.js -> getPriorityIconComponent()\n * \n * Nov ikony:\n * - INFO: faInfoCircle (modr kruh)\n * - APPROVAL/HIGH: faExclamation (oranov vykink)\n * - EXCEPTIONAL/URGENT: faBolt (erven blesk)\n *\n * Pro notifikace souvisejc s objednvkami se pouije emoji podle stavu.\n * Pro ostatn notifikace jsou definovny specifick emoji.\n *\n * @deprecated Pouv se pouze pro zptnou kompatibilitu\n * @param {string} notificationType - Typ notifikace (nap. 'order_status_nova', 'todo_alarm')\n * @param {string} priority - Priorita notifikace ('low', 'normal', 'high', 'urgent')\n * @returns {string} Emoji ikona\n */\nexport const getNotificationEmoji = (notificationType, priority = 'normal') => {\n  // Pokud je to notifikace o zmn stavu objednvky, pouij emoji podle stavu\n  if (notificationType?.startsWith('order_status_')) {\n    const status = notificationType.replace('order_status_', '');\n    return getStatusEmoji(status);\n  }\n\n  // Specifick typy notifikac\n  switch (notificationType) {\n    // TODO alarmy\n    case 'todo_alarm':\n      return '';\n    case 'todo_alarm_high':\n      return '';\n    case 'todo_alarm_expired':\n      return '';\n\n    // Force unlock\n    case 'order_unlock_forced':\n      return '';\n\n    // Obecn notifikace (deprecated, ale ponechno pro zptnou kompatibilitu)\n    case 'order_approved':\n      return '';\n    case 'order_rejected':\n      return '';\n    case 'order_created':\n      return '';\n\n    // Vchoz podle priority\n    default:\n      return getPriorityEmoji(priority);\n  }\n};\n\n/**\n *  Zskn emoji podle priority notifikace\n *\n * @param {string} priority - Priorita ('low', 'normal', 'high', 'urgent')\n * @returns {string} Emoji ikona\n */\nexport const getPriorityEmoji = (priority) => {\n  switch (priority) {\n    case 'urgent':\n      return '';\n    case 'high':\n      return '';\n    case 'normal':\n      return '';\n    case 'low':\n    default:\n      return '';\n  }\n};\n\n/**\n *  Helper funkce pro emoji ikony stav (pro pouit v notifikacch)\n *\n * @param {string} status - Stav objednvky\n * @returns {string} Emoji ikona\n */\nexport const getStatusEmoji = (status) => {\n  const normalizedStatus = status?.toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, ''); // Odstrann diakritiky\n\n  switch (normalizedStatus) {\n    case 'nova':\n    case 'koncept':\n      return '';\n    case 'ke_schvaleni':\n    case 'keschvaleni':\n      return '';\n    case 'schvalena':\n      return '';\n    case 'zamitnuta':\n      return '';\n    case 'rozpracovana':\n      return '';\n    case 'odeslana':\n      return '';\n    case 'potvrzena':\n      return '';\n    case 'uverejnena':\n    case 'registr_zverejnena':\n    case 'registrzverejnena':\n      return '';\n    case 'dokoncena':\n      return '';\n    case 'ceka_potvrzeni':\n    case 'cekapotvrzeni':\n      return '';\n    case 'ceka_se':\n    case 'cekase':\n      return '';\n    case 'zrusena':\n      return '';\n    case 'smazana':\n      return '';\n    case 'archivovano':\n    case 'archivovana':\n      return '';\n    case 'ceka_kontrola':\n    case 'cekakontrola':\n      return '';\n    case 'vecna_spravnost':\n    case 'vecnaspravnost':\n      return '';\n    default:\n      return '';\n  }\n};\n\n"],"names":["TooltipWrapper","styled","div","_templateObject","_taggedTemplateLiteral","Tooltip","_templateObject2","props","$visible","$position","$multiline","_templateObject3","getOrderSystemStatus","order","isDraft","je_koncept","systemStatus","stav_objednavky","userStatus","startsWith","mapUserStatusToSystemCode","stav_workflow_kod","workflowStates","Array","isArray","JSON","parse","length","_unused","registr_smluv","registr","dt_zverejneni","registr_iddt","workflowStatus","lastState","kod_stavu","e","zverejnit","ma_byt_zverejnena","getOrderTotalPriceWithDPH","faktury_celkova_castka_s_dph","value","parseFloat","isNaN","polozky_celkova_cena_s_dph","polozky","total","reduce","sum","item","cena","cena_s_dph","max_cena_s_dph","filterOrders","orders","options","arguments","undefined","showArchived","userId","isAdmin","filtered","filter","o","id","isLocalConcept","objednatel_id","uzivatel_id","prikazce_id","calculateOrderStats","byStatus","acc","totalAmount","amount","completedAmount","status","includes","pendingAmount","X","createLucideIcon","d","key","STATUS_COLORS","NOVA","dark","light","KE_SCHVALENI","SCHVALENA","ZAMITNUTA","ROZPRACOVANA","ODESLANA","POTVRZENA","K_UVEREJNENI_DO_REGISTRU","UVEREJNENA","CEKA_POTVRZENI","CEKA_SE","VECNA_SPRAVNOST","DOKONCENA","ZRUSENA","SMAZANA","ARCHIVOVANO","TOTAL","COUNT","WITH_INVOICES","WITH_ATTACHMENTS","getStatusColor","stav","statusCode","kod","status_kod","filterByObjednatel","filterValue","getUserDisplayName","enriched","_enriched","test","_enriched$uzivatel","_order$objednatel_uzi","_order$objednatel","objednatelId","uzivatel","String","objednatel_uzivatel","objednatel","split","map","trim","name","cele_jmeno","obj","jmeno","prijmeni","titul_pred_str","titul_pred","titul_za_str","titul_za","concat","replace","username","normalizedText","removeDiacritics","toLowerCase","normalizedFilter","filterByMaxPrice","compareNumericValue","operatorMatch","match","operator","numStr","filterNum","Math","abs","toLocaleString","filterByUserRole","role","trimmedValue","getUserId","_enriched$garant_uziv","_order$garant","_enriched$prikazce_uz","_order$prikazce","_enriched$schvalovate","_order$schvalovatel","garant_uzivatel","garant","garant_uzivatel_id","prikazce_uzivatel","prikazce","schvalovatel_uzivatel","schvalovatel","schvalovatel_id","userName","getUserName","_order$garant2","_order$garant3","_order$prikazce2","_order$prikazce3","_order$schvalovatel2","_order$schvalovatel3","gar","pri","sch","applyColumnFilters","columnFilters","getOrderDate","getOrderDisplayStatus","filterByOrderDate","orderDateValue","formatDateOnly","Date","dt_objednavky","filterByOrderNumber","cislo","cislo_objednavky","predmet","filterBySubject","filterByStatus","filterByDodavatel","searchableText","dodavatel_nazev","dodavatel_ico","dodavatel_ulice","dodavatel_mesto","dodavatel_psc","dodavatel_kontakt_email","dodavatel_kontakt_telefon","dodavatel_kontakt_jmeno","join","objednatel_garant","objednatelMatch","garantMatch","prikazce_schvalovatel","prikazceMatch","schvalovatelMatch","getGarantNameForSearch","getSchvalovatelNameForSearch","MenuContainer","MenuItem","button","danger","success","MenuDivider","MenuLabel","span","_templateObject4","OrderContextMenu","_ref","x","y","onClose","onAddToTodo","onAddAlarm","onEdit","onDelete","onGenerateDocx","onGenerateFinancialControl","canDelete","selectedData","menuRef","useRef","hasClipboardData","setHasClipboardData","useState","clipboardData","setClipboardData","menuPosition","setMenuPosition","left","top","isPositioned","setIsPositioned","canGenerateDocx","allowedStates","aktualniStav","nazevStavu","nazev_stavu","stav_id_num","stav_id","status_name","error","some","state","stavCode","toUpperCase","canGenerateFinancialControl","normalizedStav","console","useEffect","current","menuRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","width","height","async","navigator","clipboard","readText","text","data","localData","localStorage","getItem","_unused2","checkClipboard","handleCopy","dataToCopy","description","substring","stringify","textToCopy","writeText","textArea","document","createElement","body","appendChild","select","execCommand","removeChild","clipboardInfo","type","timestamp","now","setItem","handleCut","cutData","action","orderId","handlePaste","_unused3","alert","handleClickOutside","contains","target","handleKeyDown","ctrlKey","metaKey","preventDefault","setTimeout","addEventListener","removeEventListener","ReactDOM","_jsxs","ref","style","opacity","pointerEvents","children","onClick","title","_jsx","FontAwesomeIcon","icon","faCut","faCopy","disabled","faPaste","faClipboardList","faBell","faEdit","faTrash","faFileWord","faFileInvoice","faTimes","DocxGeneratorModal","lazy","then","m","default","FinancialControlModal","Container","PageHeader","ActionBar","h1","ActionButton","_templateObject5","$primary","getStatusEmoji","normalize","DashboardPanel","_templateObject6","DashboardGrid","_templateObject7","LargeStatCard","_templateObject8","$color","StatCard","_templateObject9","$isActive","$clickable","StatValue","_templateObject0","StatLabel","_templateObject1","StatHeader","_templateObject10","StatIcon","_templateObject11","LargeStatValue","_templateObject12","LargeStatLabel","_templateObject13","SummaryRow","_templateObject14","SummaryItem","_templateObject15","$bg","SummaryLabel","_templateObject16","SummaryValue","_templateObject17","YearFilterPanel","_templateObject18","YearFilterLeft","_templateObject19","YearFilterTitle","h2","_templateObject20","CacheStatusIconWrapper","_templateObject21","HintText","_templateObject22","CacheStatusIcon","_templateObject23","fromCache","YearFilterLabel","label","_templateObject24","RefreshIconButton","_templateObject25","isBackgroundActive","RefreshTimeLabel","_templateObject26","MonthFilterLabel","_templateObject27","MonthDropdownContainer","_templateObject28","_templateObject29","_templateObject30","YearDropdownContainer","_templateObject31","MonthDropdownButton","_templateObject32","MonthDropdownMenu","_templateObject33","MonthDropdownItem","_templateObject34","separator","FiltersPanel","_templateObject35","FiltersHeader","_templateObject36","FiltersGrid","_templateObject37","FilterGroup","_templateObject38","_templateObject39","FilterLabel","_templateObject40","FilterLabelLeft","_templateObject41","FilterClearButton","_templateObject42","visible","FilterInputWithIcon","_templateObject43","ClearButton","_templateObject44","FilterInput","input","_templateObject45","hasIcon","PriceRangeGroup","_templateObject46","_templateObject47","_templateObject48","PriceRangeInputs","_templateObject49","PriceInputWrapper","_templateObject50","PriceSeparator","_templateObject51","DateRangeGroup","_templateObject52","DateRangeInputs","_templateObject53","DateInputWrapper","_templateObject54","DateSeparator","_templateObject55","ColumnFilterWrapper","_templateObject56","ColumnClearButton","_templateObject57","ColumnFilterInput","_templateObject58","ActionBadge","_templateObject59","FilterActionButton","_templateObject60","EmptyState","_templateObject61","EmptyStateIcon","_templateObject62","EmptyStateTitle","h3","_templateObject63","EmptyStateText","p","_templateObject64","TableScrollWrapper","_templateObject65","$showLeftShadow","$showRightShadow","TableContainer","_templateObject66","FloatingHeaderPanel","_templateObject67","FloatingTableWrapper","_templateObject68","ScrollArrowLeft","_templateObject69","$arrowHovered","$tableHovered","ScrollArrowRight","_templateObject70","Table","table","_templateObject71","TableHead","thead","_templateObject72","TableRow","tr","_templateObject73","$isDraft","$hasLocalChanges","$showHighlighting","$order","bgColor","_ref2","_ref3","_order$stav_id_num","status_id","statusColors","toString","endsWith","getRowBackgroundColor","_props$$order","_props$$order2","_ref4","_ref5","_ref6","_props$$order$stav_id","_props$$order3","_props$$order4","_props$$order5","_props$$order6","$isHighlighted","highlightPulse","TableHeader","th","_templateObject74","TableCell","td","_templateObject75","ExpandButton","_templateObject76","ExpandedContent","_templateObject77","$showRowHighlighting","_props$$order7","_props$$order8","_unused4","_ref7","_ref8","_ref9","_props$$order$stav_id2","_props$$order9","_props$$order0","_props$$order1","_props$$order10","color","r","parseInt","slice","g","b","getLighterColor","_props$$order11","_props$$order12","_unused5","_ref0","_ref1","_ref10","_props$$order$stav_id3","_props$$order13","_props$$order14","_props$$order15","_props$$order16","ExpandedGrid","_templateObject78","ThreeColumnLayout","_templateObject79","SupplierColumn","_templateObject80","MiddleColumn","_templateObject81","AttachmentsColumn","_templateObject82","InfoCard","_templateObject83","_templateObject84","_templateObject85","_templateObject86","_props$$order17","_props$$order18","_unused6","_ref11","_ref12","_ref13","_props$$order$stav_id4","_props$$order19","_props$$order20","_props$$order21","_props$$order22","InfoCardTitle","h4","_templateObject87","ListItemCard","_templateObject88","ListItemHeader","_templateObject89","ListItemTitle","_templateObject90","ListItemBadge","_templateObject91","$success","$warning","ListItemMeta","_templateObject92","ListItemMetaItem","_templateObject93","AttachmentItem","_templateObject94","_templateObject95","AttachmentName","_templateObject96","AttachmentSize","_templateObject97","InfoRow","_templateObject98","_templateObject99","$progress","_templateObject100","_templateObject101","InfoLabel","_templateObject102","InfoValue","_templateObject103","PaginationContainer","_templateObject104","PaginationInfo","_templateObject105","PaginationControls","_templateObject106","PageButton","_templateObject107","PageSizeSelect","_templateObject108","StatusBadge","_templateObject109","$isInEditRow","$status","ActionMenu","_templateObject110","ActionMenuButton","_templateObject111","DebugPanel","_templateObject112","DebugHeader","_templateObject113","DebugTitle","_templateObject114","DebugContent","_templateObject115","DebugSection","_templateObject116","DebugLabel","_templateObject117","DebugValue","pre","_templateObject118","LoadingOverlay","_templateObject119","LoadingSpinner","_templateObject120","LoadingMessage","_templateObject121","LoadingSubtext","_templateObject122","PageContent","_templateObject123","$blurred","UserInfo","_templateObject124","InfoText","_templateObject125","WarningText","_templateObject126","ContactInfo","_templateObject127","ContactItem","_templateObject128","ContactLabel","_templateObject129","ExportPreviewOverlay","_templateObject130","ExportPreviewDialog","_templateObject131","ExportPreviewHeader","_templateObject132","ExportPreviewTitle","_templateObject133","ExportPreviewCloseButton","_templateObject134","ExportPreviewContent","_templateObject135","ExportInfoGrid","_templateObject136","ExportInfoCard","_templateObject137","ExportInfoLabel","_templateObject138","ExportInfoValue","_templateObject139","ExportPreviewTable","_templateObject140","ExportPreviewTableHeader","_templateObject141","ExportPreviewTableHeaderCell","_templateObject142","ExportPreviewTableRow","_templateObject143","ExportPreviewTableCell","_templateObject144","ExportPreviewFooter","_templateObject145","ExportPreviewNote","_templateObject146","ExportPreviewActions","_templateObject147","ExportPreviewButton","_templateObject148","$variant","BulkDocxOverlay","_templateObject149","BulkDocxDialog","_templateObject150","BulkDocxHeader","_templateObject151","BulkDocxTitle","_templateObject152","BulkDocxBody","_templateObject153","BulkDocxOrderItem","_templateObject154","BulkDocxOrderHeader","_templateObject155","BulkDocxOrderNumber","_templateObject156","BulkDocxOrderInfo","_templateObject157","BulkDocxSignerSelect","_templateObject158","BulkDocxSignerLabel","_templateObject159","BulkDocxFooter","_templateObject160","BulkDocxSummary","_templateObject161","BulkDocxActions","_templateObject162","BulkDocxButton","_templateObject163","LockTimeInfo","_templateObject164","ForceUnlockWarningOverlay","_templateObject165","ForceUnlockWarningDialog","_templateObject166","ForceUnlockWarningHeader","_templateObject167","ForceUnlockWarningIcon","_templateObject168","ForceUnlockWarningTitle","_templateObject169","ForceUnlockWarningContent","_templateObject170","ForceUnlockWarningMessage","_templateObject171","ForceUnlockWarningDetails","_templateObject172","ForceUnlockWarningDetailRow","_templateObject173","ForceUnlockWarningDetailLabel","_templateObject174","ForceUnlockWarningDetailValue","_templateObject175","ForceUnlockWarningActions","_templateObject176","ForceUnlockWarningButton","_templateObject177","MultiSelectLocal","_ref14","field","onChange","placeholder","isOpen","setIsOpen","React","searchTerm","setSearchTerm","dropdownRef","searchInputRef","event","requestAnimationFrame","_searchInputRef$curre","focus","valueSet","arr","Set","v","filteredOptions","search","opt","displayName","nazev","getDisplayValue","find","handleToggle","optValue","currentValue","fakeEvent","selected","handleMainClick","stopPropagation","prev","handleItemClick","position","padding","border","borderRadius","fontSize","background","cursor","display","alignItems","justifyContent","fontWeight","right","transform","transition","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","marginTop","zIndex","boxShadow","flexDirection","maxHeight","borderBottom","faSearch","outline","onFocus","borderColor","onBlur","overflowY","textAlign","idx","optLabel","isSelected","has","gap","onMouseEnter","currentTarget","onMouseLeave","checked","readOnly","accentColor","bottom","DatePicker","_ref15","currentMonth","setCurrentMonth","openUpwards","setOpenUpwards","popupPosition","setPopupPosition","wrapperRef","selectedDate","date","getTime","handleCloseAllDatePickers","rafId","previousFloatingState","__floatingHeaderVisible","checkPosition","currentFloatingState","buttonRect","spaceBelow","spaceAbove","shouldOpenUpward","handleScroll","cancelAnimationFrame","passive","capture","handleDateSelect","year","getFullYear","month","getMonth","padStart","day","getDate","formatInputDate","handleToday","handleClear","today","calendarDays","getCalendarDays","firstDay","lastDay","days","i","getDay","push","isOtherMonth","remainingDays","displayText","toLocaleDateString","_unused7","formatDisplayDate","DatePickerWrapper","InputWithIcon","Calendar","size","DateInputButton","hasValue","DateClearButton","DateTodayButton","DateCalendarPopup","CalendarHeader","CalendarNav","CalendarTitle","CalendarGrid","CalendarDay","index","isToday","toDateString","CalendarDate","CalendarFooter","CalendarButton","className","_templateObject178","_templateObject179","_templateObject180","_templateObject181","_templateObject182","_templateObject183","_templateObject184","_templateObject185","_templateObject186","_templateObject187","_templateObject188","_templateObject189","_templateObject190","_templateObject191","Orders25List","_location$state2","_apiMeta$admin_analys","_apiTestData$filterSt","_apiTestData$filterSt2","_apiTestData$filterSt3","_apiTestData$filterSt4","_apiTestData$filterSt5","_userDetail$roles3","_userDetail$roles4","_userDetail$roles5","_table$getHeaderGroup","_table$getHeaderGroup2","navigate","useNavigate","location","useLocation","user","token","hasPermission","hasAdminRole","user_id","userDetail","userPermissions","expandedPermissions","useContext","AuthContext","setProgress","ProgressContext","setDebugInfo","DebugContext","showToast","ToastContext","hierarchyConfig","setHierarchyConfig","currentUserId","useMemo","getUserKey","baseKey","getUserStorage","defaultValue","saved","_unused8","setUserStorage","bgTasksContext","useBackgroundTasks","permissions","canViewAll","hasOnlyOwn","permissionsRef","getHierarchyConfig","config","enabled","profileId","profileName","message","loadHierarchy","setOrders","loading","setLoading","setError","users","setUsers","usersRef","apiMeta","setApiMeta","showLeftArrow","setShowLeftArrow","showRightArrow","setShowRightArrow","showLeftShadow","setShowLeftShadow","showRightShadow","setShowRightShadow","isTableHovered","setIsTableHovered","isArrowHovered","setIsArrowHovered","tableWrapperRef","showFloatingHeader","setShowFloatingHeader","columnWidths","setColumnWidths","tableRef","setTableWrapperRef","useCallback","node","handleMouseEnter","handleMouseLeave","measureColumnWidths","headerCells","querySelectorAll","widths","from","cell","offsetWidth","timer","clearTimeout","mainWrapper","floatingWrapper","querySelector","syncScroll","scrollLeft","initializationComplete","setInitializationComplete","splashVisible","setSplashVisible","lastLoadSource","setLastLoadSource","lastLoadTime","setLastLoadTime","lastLoadDuration","setLastLoadDuration","isBackgroundRefreshActive","setIsBackgroundRefreshActive","lastRefreshTime","setLastRefreshTime","objednatelList","setObjednatelList","garantList","setGarantList","schvalovatelList","setSchvalovatelList","allUsers","setAllUsers","approversList","setApproversList","orderStatesList","setOrderStatesList","lpKodyList","setLpKodyList","druhyObjednavkyList","setDruhyObjednavkyList","strediskaList","setStrediskaList","showEditConfirmModal","setShowEditConfirmModal","orderToEdit","setOrderToEdit","currentDraftData","setCurrentDraftData","showDeleteConfirmModal","setShowDeleteConfirmModal","orderToDelete","setOrderToDelete","showArchivedWarningModal","setShowArchivedWarningModal","showArchivedWithDraftWarningModal","setShowArchivedWithDraftWarningModal","showLockedOrderDialog","setShowLockedOrderDialog","lockedOrderInfo","setLockedOrderInfo","showForceUnlockWarning","setShowForceUnlockWarning","forceUnlockWarningData","setForceUnlockWarningData","showBulkDocxDialog","setShowBulkDocxDialog","bulkDocxOrders","setBulkDocxOrders","bulkDocxSigners","setBulkDocxSigners","bulkDocxTemplates","setBulkDocxTemplates","showBulkApprovalDialog","setShowBulkApprovalDialog","bulkApprovalOrders","setBulkApprovalOrders","showBulkDeleteDialog","setShowBulkDeleteDialog","bulkDeleteOrders","setBulkDeleteOrders","bulkDeleteType","setBulkDeleteType","docxTemplates","setDocxTemplates","showDashboard","setShowDashboard","showApiTestPanel","setShowApiTestPanel","apiTestData","setApiTestData","showModalStylesPanel","setShowModalStylesPanel","showFiltersPanel","setShowFiltersPanel","showFilters","setShowFilters","showDebug","setShowDebug","userSettings","loadSettingsFromLocalStorage","hasCustomTileSettings","viditelne_dlazdice","Object","keys","dashboardCompact","setDashboardCompact","dashboardMode","setDashboardMode","activeStatusFilter","setActiveStatusFilter","rawData","setRawData","initializing","setInitializing","globalFilter","setGlobalFilter","statusFilter","setStatusFilter","vychozi_filtry_stavu_objednavek","warn","userFilter","setUserFilter","selectedObjednatel","setSelectedObjednatel","selectedGarant","setSelectedGarant","selectedSchvalovatel","setSelectedSchvalovatel","selectedPrikazce","setSelectedPrikazce","dateFromFilter","setDateFromFilter","dateToFilter","setDateToFilter","amountFromFilter","setAmountFromFilter","amountToFilter","setAmountToFilter","filterMaBytZverejneno","setFilterMaBytZverejneno","filterByloZverejneno","setFilterByloZverejneno","filterMimoradneObjednavky","setFilterMimoradneObjednavky","filterWithInvoices","setFilterWithInvoices","filterWithAttachments","setFilterWithAttachments","rowSelection","setRowSelection","highlightOrderId","setHighlightOrderId","setColumnFilters","multiselectFilters","setMultiselectFilters","showRowHighlighting","setShowRowHighlighting","selectedYear","setSelectedYear","vychozi_rok","selectedMonth","setSelectedMonth","vychozi_obdobi","showExpandedMonths","setShowExpandedMonths","setShowArchived","showOnlyMyOrders","setShowOnlyMyOrders","showExportPreview","setShowExportPreview","exportPreviewData","setExportPreviewData","monthSelectRef","yearSelectRef","isMonthDropdownOpen","setIsMonthDropdownOpen","isYearDropdownOpen","setIsYearDropdownOpen","selectStates","setSelectStates","searchStates","setSearchStates","touchedSelectFields","setTouchedSelectFields","hasTriedToSubmit","setHasTriedToSubmit","contextMenu","setContextMenu","docxModalOpen","setDocxModalOpen","docxModalOrder","setDocxModalOrder","financialControlModalOpen","setFinancialControlModalOpen","financialControlOrder","setFinancialControlOrder","sortedAllUsers","processed","_objectSpread","sort","a","nameA","nameB","localeCompare","sortedApprovers","approver","approverId","jmeno_prijmeni","sortedActiveApprovers","aktivni","deaktivovan","sortedActiveUsers","statusOptions","statusName","handleDateFilterChange","dateFrom","dateTo","detail","sid","dateFromKey","dateToKey","savedFrom","savedTo","_","pageSize","setPageSize","currentPageIndex","setCurrentPageIndex","sorting","setSorting","expanded","setExpanded","columnFiltersTimeoutRef","saveColumnFiltersDebounced","filters","simpleFilters","entries","forEach","_ref16","removeItem","scrollStateRestored","isFirstRender","prevFiltersRef","pendingExpandedOrderIds","filteredDataRef","currentPageIndexRef","pageSizeRef","expandedRef","initStepsCompleted","dataLoaded","paginationRestored","expandedRestored","scrollRestored","savedState","ordersCacheService","getScrollState","rok","mesic","page","rowsPerPage","targetPage","maxPage","ceil","expandedOrderIds","saveCurrentScrollState","currentPage","currentPageSize","currentExpanded","Boolean","saveScrollState","scrollY","totalRows","global","amountFrom","amountTo","activeStatus","currentFilters","clearScrollState","scrollTo","behavior","handleOrderStatusChanged","orderNumber","notificationType","response","getOrderV2","updatedOrder","prevOrders","newState","lowerSearchTerm","option","getOptionLabel","popis","closest","prepareDropdownLists","ordersData","uniqueObjednatele","uniqueGaranti","uniqueSchvalovatel","add","sortByName","objednatelArray","garantArray","schvalovatelArray","loadData","forceRefresh","loadStartTime","performance","dateRange","calculateDateRange","currentPermissions","canViewAllOrders","fetchFunction","archivovano","requestFilters","requestTimestamp","toISOString","apiResult","listOrdersV2","meta","_apiResult$data","_apiResult$data2","apiResponse","apiResponseCount","archivedInResponse","responseTimestamp","cacheResult","viewAll","getOrders","loadEndTime","loadDuration","round","source","usersData","fetchAllUsers","usersMap","u","jmeno_str","prijmeni_str","uzivatelske_jmeno","localDrafts","draftManager","setCurrentUser","draftData","loadDraft","isConceptValid","isValidConcept","hasDbChanges","hasDraftChanges","formData","draftKey","getDraftKey","garantUserId","conceptOrder","ev_cislo","popis_pozadavku","poznamky","strediska_kod","dt_vytvoreni","temp_datum_objednavky","firstAutoSaveDate","vytvoril_uzivatel","_originalKey","_originalData","_formData","err","allUsersForFilters","email","unshift","approversWithDisplayName","fetchApprovers","sortedStates","fetchCiselniky","typ","getDocxSablonyList","sortedTemplates","lpData","fetchLimitovanePrisliby","druhyData","getDruhyObjednavky25","strediskaData","getStrediska25","finalOrders","filterOrdersShared","hasDraft","_draftData$formData","orderIdToMark","savedOrderId","foundAndMarked","hasLocalDraftChanges","normalized","ordersCount","allFields","firstOrder","counts","dateStr","datum_objednavky","created_at","isoMatch","czMatch","pending","_unused9","dispatchEvent","CustomEvent","errorMessage","translateErrorMessage","_location$state","shouldForceReload","forceReload","debounceTimer","lastMessageTimestamp","cleanup","onTabSyncMessage","BROADCAST_TYPES","ORDER_SAVED","DRAFT_DELETED","registerGetCurrentFiltersCallback","getFiltersCallback","getDateRange","datum_od","datum_do","monthMatch","startMonth","endMonth","_bgTasksContext$regis","call","_bgTasksContext$regis2","registerOrdersRefreshCallback","_ordersData$","filteredOrders","_bgTasksContext$regis3","registerNewNotificationsCallback","handleNewNotifications","notifications","unreadCount","forceUnlockNotifications","n","precteno","notification","notifData","lockedBy","forced_by_name","forced_by_username","lockedByEmail","forced_by_email","lockedByPhone","forced_by_telefon","lockedAt","forced_at","notificationId","_bgTasksContext$regis4","uiState","getUIState","highlightId","saveUIState","scrollToHighlightedRow","highlightedRow","rect","isNearTop","offsetTop","blockPosition","scrollIntoView","block","inline","_unused0","_unused1","getOrderWorkflowStatus","stav_workflow","stats","dataToCount","_debug","incompleteAmount","isCancelledOrRejected","isCompleted","withInvoices","count","faktury","faktury_count","withAttachments","prilohy","prilohy_count","mimoradneUdalosti","mimoradna_udalost","nova","ke_schvaleni","schvalena","zamitnuta","ceka_se","rozpracovana","odeslana","potvrzena","uverejnena","vecna_spravnost","dokoncena","vyrizena","VYRIZENA","zrusena","stornova","STORNOVA","smazana","k_uverejneni_do_registru","ceka_potvrzeni","draft","DRAFT","approved","APPROVED","completed","COMPLETED","cancelled","CANCELLED","getOrderDateTime","_order$_originalData","dateTime","highlightText","normalizedSearch","indexOf","beforeMatch","afterMatch","_Fragment","backgroundColor","handlersRef","handleActionClick","_handlers$handleEdit","_handlers$handleView","_handlers$handleExpor","_handlers$handleFinan","_handlers$handleCreat","_handlers$handleDelet","dataset","orderIndex","handlers","handleEdit","handleView","handleExportDocument","handleFinancialControl","handleCreateInvoice","handleDelete","enrichedUser","currentUsers","getDruhObjednavkyNazev","druh","getStrediskoNazev","_stredisko$raw","_stredisko$raw2","kodStr","stredisko","s","_s$raw","_s$raw2","raw","withDraftPriority","sortingFn","rowA","rowB","columnId","aIsDraft","original","bIsDraft","columns","header","_ref17","row","getIsSelected","getToggleSelectedHandler","align","_ref18","getToggleExpandedHandler","getIsExpanded","_order$prikazce_uziva","_order$uzivatel","_order$garant_uzivate","loadPersonDetail","faMinus","faPlus","accessorKey","dateA","dateB","filterFn","orderDateTime","timeStr","toLocaleTimeString","hour","minute","fullText","_ref19","lineHeight","numA","numB","numeric","sensitivity","normalizedCislo","normalizedPredmet","_ref20","whiteSpace","overflow","fontFamily","SmartTooltip","content","marginRight","faBoltLightning","marginLeft","maxWidth","textOverflow","getObjednatelName","objednatelName","garantName","normalizedObjednatel","normalizedGarant","_ref21","getPrikazceName","prikazceName","schvalovatelName","normalizedPrikazce","normalizedSchvalovatel","_ref22","_ref23","kontakty","kontaktText","adresaText","dodavatel_adresa","getStatusText","displayStatus","_order$stav_workflow","_order$stav_workflow2","statusA","statusB","statusText","_order$stav_workflow3","_order$stav_workflow4","_ref24","_order$stav_workflow5","_order$stav_workflow6","faFilePen","faClock","faShield","faCheckCircle","faFileContract","faTruck","faXmark","faCircleNotch","alignSelf","getRegistrStav","stavA","stavB","stavText","_ref25","stavIcon","priceA","priceB","Infinity","price","filterTrimmed","valueStr","compareValue","_ref26","maxPrice","fakturaPrice","isOverLimit","_ref27","_ref28","faBolt","_ref29","canEdit","canCreateInvoice","canExportDocument","faListCheck","minSize","maxSize","highlightSearchText","textLower","parts","lastIndex","filteredData","filterMyOrders","roles","kod_role","isObjednatel","isGarant","isSchvalovatel","isPrikazce","filterByGlobalSearch","searchText","_enriched$stav_workfl","_enriched$stav_workfl2","_order$financovani","_order$financovani2","_order$financovani3","_order$financovani4","_order$financovani5","_order$financovani6","_order$financovani7","poznamka","_enriched$druh_objedn","_enriched$druh_objedn2","druh_objednavky","parsed","druh_objednavky_kod","strediska","financovani","typ_nazev","lp_kody","lp_nazvy","lp","cislo_lp","cislo_smlouvy","poznamka_smlouvy","flatMap","nazev_polozky","poznamka_umisteni","katalog_cislo","dodavatel_kod","usek_kod","budova_kod","mistnost_kod","podradky","sub","faktura","fa_cislo_vema","cislo_faktury","fa_poznamka","fa_strediska_kod","fItem","priloha","nazev_souboru","dodatecne_dokumenty","dokument","filterByStatusArray","czechToSystemCode","filterByUser","matchesCreator","matchesOrderer","filterByDateRange","dtObjednavky","datumObjDo","datum_obj_do","passesFilter","orderDate","fromDate","toDate","setHours","objDoDate","filterByAmountRange","filterByRegistrStatus","maZverejnit","jeZverejneno","_permissionsRef$curre","filteredCount","archivedInFiltered","nonArchivedInFiltered","filterState","newExpanded","findIndex","steps","checkInterval","setInterval","clearInterval","values","val","toggleAllRows","anyExpanded","getIsSomeRowsExpanded","toggleAllRowsExpanded","useReactTable","getCoreRowModel","getExpandedRowModel","getSortedRowModel","getFilteredRowModel","getPaginationRowModel","enableExpanding","getRowCanExpand","enableRowSelection","manualPagination","pagination","pageIndex","onSortingChange","onExpandedChange","onRowSelectionChange","pageCount","max","maxPageIndex","previousShowState","observer","IntersectionObserver","_ref30","entry","shouldShow","boundingClientRect","appHeaderHeight","Event","threshold","observe","disconnect","invalidStates","getTemplateOptions","template","objednavka_id","editOrderId","orderIdToCheck","_dbOrder$lock_info","_dbOrder$lock_info2","_dbOrder$lock_info3","dbOrder","lock_info","locked","is_owned_by_me","is_expired","_userDetail$roles","_userDetail$roles2","_userDetail$roles2$fi","lockInfo","lockedByUserName","locked_by_user_fullname","locked_by_user_id","canForceUnlock","lockedByUserEmail","locked_by_user_email","lockedByUserTelefon","locked_by_user_telefon","locked_at","lockAgeMinutes","lock_age_minutes","userRoleName","nazev_role","shouldShowConfirmDialog","draftDataToStore","isDraftForThisOrder","_draftData$formData2","draftOrderId","currentOrderId","hasNewConcept","handleEditConfirm","orderParam","orderToUse","orderIdToLoad","lockOrder25","lockError","objednatelDetails","getUserDetailApi2","cleanedKeys","objednatelData","telefon","hasWorkflowState","workflowCode","states","_unused10","isSchvalena","isOdeslana","isZrusena","isZamitnuta","isCekaSe","stavSchvaleni","stav_schvaleni","finalEvCislo","freshDraft","stav_odeslano","stav_stornovano","version","isConceptSaved","isChanged","isOrderSavedToDB","attachments","broadcastDraftUpdated","isEditMode","isLoading","handleLockedOrderCancel","handleForceUnlockWarningClose","handleContextMenu","cellData","_cellElement$textCont","cellElement","textContent","element","clientX","clientY","handleTableContextMenu","handleCloseContextMenu","handleAddToTodo","handleAddAlarm","handleContextMenuEdit","handleContextMenuDelete","handleGenerateDocx","handleGenerateFinancialControl","handleDocxModalClose","handleDeleteConfirm","deleteType","deleteOrderV2","catch","errorMsg","translateErrorMessageShort","broadcastDraftDeleted","handleRefresh","invalidate","triggerNotificationsRefresh","handleMonthChange","newMonth","currentYear","currentDay","prevMonth","prevMonthNum","startMonthNum","formatNumberWithSpaces","numericValue","parseFormattedNumber","clearColumnFilters","toggleRowHighlighting","newHighlighting","handleStatusFilterClick","statusToCzechName","czechName","handleToggleInvoicesFilter","handleToggleAttachmentsFilter","handleToggleMimoradneFilter","newFilterMimoradne","handleToggleDashboard","newShowDashboard","isTileVisible","tileKey","handleToggleOnlyMyOrders","newShowOnlyMyOrders","handleDownloadAttachment","attachment","fileName","originalni_nazev_souboru","typ_prilohy","oldUrl","process","link","href","download","click","blob","fakturaId","faktura_id","invoice_id","downloadInvoiceAttachment","downloadOrderAttachment","createDownloadLink25","personDetailsCache","setPersonDetailsCache","personKey","personId","cacheKey","details","renderExpandedContent","_order$objednatel2","_order$uzivatel2","_order$objednatel3","_order$uzivatel3","_order$objednatel4","_order$uzivatel4","hasPolozky","hasFaktury","hasPrilohy","dodatecneDokumenty","hasDodatecneDokumenty","hasStrediska","faInfoCircle","marginBottom","textTransform","letterSpacing","margin","prettyDate","dt_schvaleni","dt_predpokladany_termin_dodani","dt_potvrzeni_vecne_spravnosti","dt_dokonceni","dt_aktualizace","borderTop","_order$registr_smluv","_order$registr_smluv2","_order$registr_smluv3","_order$registr_smluv4","faHourglassHalf","faTimesCircle","faMoneyBillWave","strediskoText","paddingLeft","borderLeft","fin","skipKeys","displayValue","c","_order$druh_objednavk","druh_objednavky_nazev","polozky_count","faUsers","paddingRight","wordBreak","odesilatel","dodavatel_potvrdil","zverejnil","fakturant","potvrdil_vecnou_spravnost","dokoncil","paddingBottom","datum","fakturaSejtimem","f","uzivatel_akt","paddingTop","flex","faBuilding","dodavatel_zastoupeny","faList","polozka","flexWrap","fontStyle","pocet","jednotka","jednotkova_cena_bez_dph","jednotkova_cena_s_dph","cena_bez_dph","dph_procento","dph_castka","faReceipt","fa_datum_vystaveni","dt_vystaveni","fa_datum_doruceni","fa_datum_splatnosti","dt_splatnosti","castka_bez_dph","castka_s_dph","faPaperclip","dt_nahrano","velikost","faDownload","fIndex","fakturaPrilohy","pIndex","prilohaWithFakturaId","velikost_souboru_b","faExclamationTriangle","faSyncAlt","faCalendarAlt","toggleYearDropdown","faChevronUp","faChevronDown","getYearsList","years","handleYearChange","newYear","toggleMonthDropdown","minWidth","as","htmlFor","_e$target","newValue","flexShrink","faArchive","preferredPosition","second","faDatabase","admin_analysis","total_without_permission_filters","faDashboard","handleShowFilters","faFilter","handleExport","csvColumns","export_csv_sloupce","listSeparator","exportCsvListCustomDelimiter","exportCsvListDelimiter","safeGet","formatUserName","exportData","_finData","_enriched$uzivatel2","_enriched$garant_uziv2","financovaniKodyMap","zpusobFinancovani","finData","financovani_parsed","_unused11","zpusob_financovani","_unused12","_finData2","_finData3","_finData4","stav_komentar","dt_odeslani","dt_akceptace","predpokladany_termin_dodani","celkova_cena_bez_dph","celkova_cena_s_dph","financovani_typ","financovani_typ_nazev","financovani_lp_kody","financovani_lp_nazvy","financovani_lp_cisla","objednatel_email","objednatel_telefon","garant_email","garant_telefon","prikazce_po","dodavatel_dic","strediska_nazvy","pocet_polozek","polozky_popis","polozky_cena_bez_dph","polozky_sazba_dph","sazba_dph","polozky_cena_s_dph","prilohy_nazvy","originalni_nazev","totalInvoices","fa_castka","faktury_cisla_vema","potvrzeno_dodavatelem","zpusob_potvrzeni","zpusob_platby","zverejnit_registr_smluv","zaruka","misto_dodani","exportCsvCustomDelimiter","exportCsvDelimiter","columnCount","separatorName","multilineSeparator","multilineSeparatorName","rowCount","faFileExport","open","faPalette","handleToggleDebug","newShowDebug","endpoint","datum_obj_od","backdropFilter","gridTemplateColumns","textShadow","WebkitBackdropFilter","handleToggleCustomDashboard","newMode","handleToggleDashboardView","newDashboardCompact","faTableColumns","filteredAmount","faFileAlt","currentUserIdNum","myOrdersCount","faUser","dokumentyCount","_order$_enriched","_order$_enriched2","_order$_enriched3","dodatecne_dokumenty_count","vecnaKontrolaCount","vecnaKontrolaOk","_order$_enriched4","vecna_kontrola","provedena","registrSmlouvCount","registrSmlouvAktivni","_order$_enriched5","_order$_enriched6","fazeDokonceniCount","fazeDokonceniHotovo","_order$_enriched7","_order$_enriched8","_order$_enriched8$faz","faze_dokonceni","dokonceno","faRocket","getStatusIcon","_order$_enriched9","_order$_enriched0","_order$_enriched1","_order$_enriched10","_order$_enriched11","_order$_enriched12","_order$_enriched13","_order$_enriched14","_order$_enriched14$fa","clearFilters","faEraser","loadCustomStatusFilter","customFilter","every","handleToggleFilters","newShowFilters","handleHideFilters","onKeyDown","shiftKey","duration","clearObjednatelFilter","SelectWithIcon","clearGarantFilter","clearPrikazceFilter","clearSchvalovatelFilter","clearStatusFilter","clearDateFilter","clearPriceFilter","rawValue","getHeaderGroups","headerGroup","headers","column","getCanSort","getToggleSortingHandler","getSize","flexRender","columnDef","getContext","getIsSorted","getIsAllRowsSelected","el","indeterminate","getIsSomeRowsSelected","getToggleAllRowsSelectedHandler","selectedCount","getSelectedRowModel","rows","selectedOrders","approvalCount","docxCount","eligibleOrders","initialSigners","initialTemplates","templates","fieldName","newFilters","variant","colSpan","faFaceFrown","getRowModel","onContextMenu","onDoubleClick","getVisibleCells","newSize","goToFirstPage","getCanPreviousPage","goToPreviousPage","newIndex","getState","getPageCount","goToNextPage","min","getCanNextPage","goToLastPage","handleScrollLeft","tableContainer","scrollAmount","clientWidth","scrollBy","faChevronLeft","handleScrollRight","faChevronRight","ConfirmDialog","handleEditCancel","onConfirm","deleteDraft","pathname","confirmText","cancelText","draftTitle","isNewConcept","_draftData$formData3","handleArchivedWithDraftConfirm","handleDeleteCancel","unlockResult","unlockOrder25","force","unlock_type","forceError","faLock","showCancel","faEnvelope","faPhone","textDecoration","Suspense","fallback","generatedBy","fullName","pozice","newTemplates","newSigners","_order$garant_uzivate2","_order$objednatel5","availableUsers","missingTemplates","orderNumbers","missingSigners","results","Promise","allSettled","currentWorkflow","newWorkflow","updateData","datum_schvaleni","fetch","method","ok","Error","successful","failed","toggleAllRowsSelected","useHardDelete","del","filterCount","overflowX","headerLength","maxValueLength","maxLength","rowIdx","_ref31","cellIdx","handleConfirmExport","exportCsv","includeBOM","borderCollapse","tableLayout","ModernHelper","pageContext","timeoutMs","timeoutSec","faPlay","faBullseye","faPause"],"sourceRoot":""}