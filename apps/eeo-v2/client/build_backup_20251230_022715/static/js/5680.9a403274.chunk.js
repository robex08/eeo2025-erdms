"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[5680],{95680:(a,t,n)=>{n.r(t),n.d(t,{default:()=>d});var e=n(89379),o=n(56263),s=n(74373);const c="https://erdms.zachranka.cz/api.eeo/",r=c.endsWith("/")?c.slice(0,-1):c,i=async()=>{try{const a=await s.jK.user(),t=await s.jK.token();if(!a||!t)throw new Error("U\u017eivatel nen\xed p\u0159ihl\xe1\u0161en");return{username:a.username,token:t,user_id:a.id}}catch(a){throw console.error("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed autentizace:",a),new Error("Autentizace selhala")}},l=(a,t)=>{if(console.error("\u274c Chyba p\u0159i ".concat(t,":"),a),a.response){const t=a.response.status,n=a.response.data;if(401===t||403===t)throw new Error("Nem\xe1te opr\xe1vn\u011bn\xed k t\xe9to operaci");if(n&&n.message)throw new Error(n.message);throw new Error("Chyba serveru: ".concat(t))}throw a.request?new Error("Server neodpov\xedd\xe1. Zkontrolujte p\u0159ipojen\xed."):new Error(a.message||"Nezn\xe1m\xe1 chyba")},d={listBooks:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const s=await i();return(await o.A.post("".concat(r,"/cashbook-list"),(0,e.A)((0,e.A)({},s),{},{uzivatel_id:a,rok:t,mesic:n}))).data}catch(s){l(s,"na\u010d\xedt\xe1n\xed seznamu knih")}},getBook:async function(a){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=await i();return(await o.A.post("".concat(r,"/cashbook-get"),(0,e.A)((0,e.A)({},n),{},{book_id:a,force_recalc:t?1:0}))).data}catch(n){l(n,"na\u010d\xedt\xe1n\xed detailu knihy")}},createBook:async(a,t,n,s)=>{try{const c=await i();return(await o.A.post("".concat(r,"/cashbook-create"),(0,e.A)((0,e.A)({},c),{},{prirazeni_id:a,rok:t,mesic:n,uzivatel_id:s}))).data}catch(d){var c;if(null!==(c=d.response)&&void 0!==c&&c.data)return d.response.data;l(d,"vytv\xe1\u0159en\xed knihy")}},updateBook:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbook-update"),(0,e.A)((0,e.A)({},n),{},{book_id:a},t))).data}catch(n){l(n,"aktualizace knihy")}},closeMonth:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-close"),(0,e.A)((0,e.A)({},t),{},{book_id:a,akce:"uzavrit_mesic"}))).data}catch(t){l(t,"uzav\xedr\xe1n\xed m\u011bs\xedce")}},reopenBook:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-reopen"),(0,e.A)((0,e.A)({},t),{},{book_id:a}))).data}catch(t){l(t,"odemyk\xe1n\xed knihy")}},createEntry:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-entry-create"),(0,e.A)((0,e.A)({},t),a))).data}catch(t){l(t,"vytv\xe1\u0159en\xed polo\u017eky")}},updateEntry:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbook-entry-update"),(0,e.A)((0,e.A)({},n),{},{entry_id:a},t))).data}catch(n){l(n,"aktualizace polo\u017eky")}},deleteEntry:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-entry-delete"),(0,e.A)((0,e.A)({},t),{},{entry_id:a}))).data}catch(t){l(t,"maz\xe1n\xed polo\u017eky")}},restoreEntry:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-entry-restore"),(0,e.A)((0,e.A)({},t),{},{entry_id:a}))).data}catch(t){l(t,"obnoven\xed polo\u017eky")}},getAuditLog:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-audit-log"),(0,e.A)((0,e.A)({},t),{},{book_id:a}))).data}catch(t){l(t,"na\u010d\xedt\xe1n\xed audit logu")}},listAssignments:async function(a){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=await i(),s=(0,e.A)((0,e.A)({},n),{},{active_only:t,uzivatel_id:a});return(await o.A.post("".concat(r,"/cashbox-assignments-list"),s)).data}catch(n){l(n,"na\u010d\xedt\xe1n\xed p\u0159i\u0159azen\xed pokladen")}},listAllAssignments:async()=>{try{const a=await i(),t=await o.A.post("".concat(r,"/cashbox-list"),(0,e.A)((0,e.A)({},a),{},{active_only:!0,include_users:!0}));if(t.data&&"ok"===t.data.status&&t.data.data){const a=t.data.data.pokladny||[];return{status:"success",data:a.flatMap(a=>{const t=a.uzivatele||[];return 0===t.length?[{id:parseInt(a.id,10),cislo_pokladny:parseInt(a.cislo_pokladny,10),nazev:a.nazev,nazev_pracoviste:a.nazev_pracoviste,kod_pracoviste:a.kod_pracoviste,ciselna_rada_vpd:a.ciselna_rada_vpd,ciselna_rada_ppd:a.ciselna_rada_ppd,aktivni:parseInt(a.aktivni,10),je_hlavni:0,uzivatel_id:null,uzivatel_cele_jmeno:null}]:t.map(t=>({id:parseInt(t.prirazeni_id,10),pokladna_id:parseInt(a.id,10),cislo_pokladny:parseInt(a.cislo_pokladny,10),nazev:a.nazev,nazev_pracoviste:a.nazev_pracoviste,kod_pracoviste:a.kod_pracoviste,ciselna_rada_vpd:a.ciselna_rada_vpd,ciselna_rada_ppd:a.ciselna_rada_ppd,aktivni:parseInt(a.aktivni,10),uzivatel_id:parseInt(t.uzivatel_id,10),uzivatel_cele_jmeno:t.uzivatel_cele_jmeno,uzivatel_jmeno:t.uzivatel_jmeno||null,uzivatel_prijmeni:t.uzivatel_prijmeni||null,je_hlavni:parseInt(t.je_hlavni||0,10),platne_od:t.platne_od,platne_do:t.platne_do}))})}}return t.data}catch(a){l(a,"na\u010d\xedt\xe1n\xed v\u0161ech p\u0159i\u0159azen\xed pokladen (admin)")}},createAssignment:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbox-assignment-create"),(0,e.A)((0,e.A)({},t),a))).data}catch(t){l(t,"vytv\xe1\u0159en\xed p\u0159i\u0159azen\xed pokladny")}},updateAssignment:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbox-assignment-update"),(0,e.A)((0,e.A)({},n),{},{assignment_id:a},t))).data}catch(n){l(n,"aktualizace p\u0159i\u0159azen\xed pokladny")}},deleteAssignment:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbox-assignment-delete"),(0,e.A)((0,e.A)({},t),{},{assignment_id:a}))).data}catch(t){l(t,"maz\xe1n\xed p\u0159i\u0159azen\xed pokladny")}},getSettings:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await i(),n=(0,e.A)({},t);a&&(n.key=a);return(await o.A.post("".concat(r,"/cashbox-settings-get"),n)).data}catch(t){l(t,"na\u010d\xedt\xe1n\xed nastaven\xed")}},updateSetting:async function(a,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const s=await i(),c=(0,e.A)((0,e.A)({},s),{},{key:a,value:t});n&&(c.description=n);return(await o.A.post("".concat(r,"/cashbox-settings-update"),c)).data}catch(s){l(s,"aktualizace nastaven\xed")}},lockBook:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbook-lock"),(0,e.A)((0,e.A)({},t),{},{book_id:a}))).data}catch(t){l(t,"zamyk\xe1n\xed knihy")}},getCashboxList:async function(){let a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=await i();return(await o.A.post("".concat(r,"/cashbox-list"),(0,e.A)((0,e.A)({},n),{},{active_only:a,include_users:t}))).data}catch(n){l(n,"na\u010d\xedt\xe1n\xed seznamu pokladen")}},getCashboxListByPeriod:async function(a,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];try{const c=await i();return(await o.A.post("".concat(r,"/cashbox-list-by-period"),(0,e.A)((0,e.A)({},c),{},{rok:a,mesic:t,active_only:n,include_users:s}))).data}catch(c){l(c,"na\u010d\xedt\xe1n\xed pokladen podle obdob\xed")}},createCashbox:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbox-create"),(0,e.A)((0,e.A)({},t),a))).data}catch(t){l(t,"vytv\xe1\u0159en\xed pokladny")}},updateCashbox:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbox-update"),(0,e.A)((0,e.A)({},n),{},{pokladna_id:a},t))).data}catch(n){l(n,"\xfapravy pokladny")}},deleteCashbox:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbox-delete"),(0,e.A)((0,e.A)({},t),{},{pokladna_id:a}))).data}catch(t){l(t,"maz\xe1n\xed pokladny")}},assignUserToCashbox:async a=>{try{const t=await i();return(await o.A.post("".concat(r,"/cashbox-assign-user"),(0,e.A)((0,e.A)({},t),a))).data}catch(t){l(t,"p\u0159i\u0159azov\xe1n\xed u\u017eivatele k pokladn\u011b")}},unassignUserFromCashbox:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=await i(),s=t||(new Date).toISOString().split("T")[0],c=(0,e.A)((0,e.A)({},n),{},{prirazeni_id:a,platne_do:s});return(await o.A.post("".concat(r,"/cashbox-unassign-user"),c)).data}catch(d){var n,s,c;console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("\u274c API ERROR: unassignUserFromCashbox()"),console.error("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.error("Error:",d),console.error("Response:",null===d||void 0===d?void 0:d.response),console.error("Response Data:",null===d||void 0===d||null===(n=d.response)||void 0===n?void 0:n.data),console.error("Response Status:",null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status),console.error("Response Headers:",null===d||void 0===d||null===(c=d.response)||void 0===c?void 0:c.headers),l(d,"odeb\xedr\xe1n\xed u\u017eivatele z pokladny")}},getAvailableUsers:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const n=await i();return(await o.A.post("".concat(r,"/cashbox-available-users"),(0,e.A)((0,e.A)({},n),{},{pokladna_id:a,search:t}))).data}catch(n){l(n,"na\u010d\xedt\xe1n\xed dostupn\xfdch u\u017eivatel\u016f")}},updateUserMainStatus:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbook-assignment-update"),(0,e.A)((0,e.A)({},n),{},{assignment_id:a,je_hlavni:t}))).data}catch(n){l(n,"zm\u011bny statusu hlavn\xedho u\u017eivatele")}},syncCashboxUsers:async(a,t)=>{try{const n=await i(),s=(0,e.A)((0,e.A)({},n),{},{pokladna_id:a,uzivatele:t});return(await o.A.post("".concat(r,"/cashbox-sync-users"),s)).data}catch(s){var n;console.error("\u274c API ERROR: syncCashboxUsers()"),console.error("Error:",s),console.error("Response:",null===s||void 0===s||null===(n=s.response)||void 0===n?void 0:n.data),l(s,"synchronizace u\u017eivatel\u016f pokladny")}},changeLockStatus:async(a,t)=>{try{const n=await i();return(await o.A.post("".concat(r,"/cashbook-change-lock-status"),(0,e.A)((0,e.A)({},n),{},{book_id:a,new_status:t}))).data}catch(n){l(n,"zm\u011bny stavu uzam\u010den\xed pokladn\xed knihy")}},forceRenumberDocuments:async(a,t)=>{try{const n=await i(),s=(0,e.A)((0,e.A)({},n),{},{pokladna_id:a,year:t});return(await o.A.post("".concat(r,"/cashbook-force-renumber"),s)).data}catch(n){l(n,"force p\u0159epo\u010dtu doklad\u016f")}},getLPSummary:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=await i(),e={username:n.username,token:n.token};a&&(e.user_id=a),t&&(e.year=t);return(await o.A.post("".concat(r,"/cashbook-lp-summary"),e)).data}catch(n){throw l(n,"na\u010d\xedt\xe1n\xed LP summary"),n}},getLPDetail:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const e=await i(),s={username:e.username,token:e.token,lp_kod:a};t&&(s.user_id=t),n&&(s.year=n);return(await o.A.post("".concat(r,"/cashbook-lp-detail"),s)).data}catch(e){throw l(e,"na\u010d\xedt\xe1n\xed LP detailu"),e}}}}}]);
//# sourceMappingURL=5680.9a403274.chunk.js.map