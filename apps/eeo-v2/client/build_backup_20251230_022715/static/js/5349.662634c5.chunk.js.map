{"version":3,"file":"static/js/5349.662634c5.chunk.js","mappings":"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","sources":["utils/docx/docxProcessor.js","utils/docx/processDocx.js","components/dictionaries/UniversalDictionaryDialog.js","components/dictionaries/DictionaryConfirmDialog.js","components/dictionaries/tabs/LokalityTab.js","components/dictionaries/tabs/PoziceTab.js","components/dictionaries/tabs/UsekyTab.js","components/dictionaries/tabs/OrganizaceTab.js","components/dictionaries/tabs/StavyTab.js","components/dictionaries/tabs/RoleTab.js","components/dictionaries/tabs/PravaTab.js","components/docx/DocxUploadAnalyzer.jsx","components/docx/DocxFieldMapper.jsx","components/docx/DocxTemplateEditor.jsx","utils/docx/validateDocxMapping.js","components/docx/DocxMappingExpandableSection.jsx","components/dictionaries/tabs/DocxSablonyTab.js","components/cashbook/EditCashboxDialog.js","components/cashbook/DeleteAssignmentDialog.js","components/cashbook/CreateCashboxDialog.js","components/cashbook/ForceRenumberDialog.js","components/dictionaries/tabs/CashbookTab.js","components/dictionaries/tabs/SmlouvyFormModal.js","components/dictionaries/tabs/SmlouvyDetailModal.js","components/dictionaries/tabs/SmlouvyImportModal.js","components/dictionaries/tabs/SmlouvyTab.js","pages/DictionariesNew.js","utils/textHelpers.js","services/apiSmlouvy.js","services/apiDocxOrders.js"],"sourcesContent":["\n/**\n * DOCX Processor - Utility pro zpracovn DOCX soubor\n * Extrakce programovch pol z DOCX jako XML\n * @date 2025-10-21\n */\n\nimport JSZip from 'jszip';\n\n/**\n * Extraktuje programov pole z DOCX souboru\n * @param {File} file - DOCX soubor\n * @returns {Promise<Object>} - Objekt s nalezenmi poli a metadaty\n */\nexport const extractDocxFields = async (file) => {\n  try {\n    const zipContent = await JSZip.loadAsync(file);\n\n    // Zskme document.xml (hlavn obsah)\n    const documentXml = await zipContent.file('word/document.xml')?.async('text');\n    if (!documentXml) {\n      throw new Error('Neplatn DOCX soubor - chyb document.xml');\n    }\n\n    // Zskme app.xml (metadata aplikace)\n    const appXml = await zipContent.file('docProps/app.xml')?.async('text');\n\n    // Zskme core.xml (zkladn metadata)\n    const coreXml = await zipContent.file('docProps/core.xml')?.async('text');\n\n    // Extrakce programovch pol\n    const fields = extractFieldsFromXml(documentXml);\n\n    // Extrakce metadat\n    const metadata = extractMetadata(appXml, coreXml);\n\n    return {\n      success: true,\n      fields,\n      metadata,\n      documentXml,\n      fileName: file.name,\n      fileSize: file.size,\n      lastModified: new Date(file.lastModified)\n    };\n\n  } catch (error) {\n    console.error('Chyba pi zpracovn DOCX:', error);\n    return {\n      success: false,\n      error: error.message,\n      fields: [],\n      metadata: {}\n    };\n  }\n};\n\n/**\n * Extraktuje programov pole z XML obsahu dokumentu\n * Hled rzn typy pol: DOCVARIABLE, merge fields, bookmarks, content controls\n */\nconst extractFieldsFromXml = (documentXml) => {\n  const fields = [];\n\n  try {\n    // 1. DOCVARIABLE Fields (nejastj typ v naich ablonch)\n    // Vzor: DOCVARIABLE \"nazev_pole\" \\* MERGEFORMAT\n    // Vzor: DOCVARIABLE nazev_pole\n    // Vzor: DOCVARIABLE  nazev_pole  \\* MERGEFORMAT\n    // Vzor: DOCVARIABLE |DOCX.DTELEFON (s pipe a tekou)\n    // Rozen regex - zachyt i speciln znaky: | . - /\n    const docVariableRegex = /DOCVARIABLE\\s+(?:\"([^\"]+)\"|([A-Z0-9_|.\\-/]+))(?:\\s+\\\\[^}]*)?/gi;\n    let match;\n    while ((match = docVariableRegex.exec(documentXml)) !== null) {\n      const fieldName = match[1] || match[2]; // Prvn skupina (s uvozovkami) nebo druh (bez uvozovek)\n      if (fieldName) {\n        fields.push({\n          type: 'docvariable',\n          name: fieldName,\n          fullMatch: match[0],\n          position: match.index\n        });\n      }\n    }\n\n    // 1b. Rozloen DOCVARIABLE fields (me bt rozdlen pes vce XML uzl)\n    // Hledme <w:instrText> obsahujc DOCVARIABLE\n    const instrTextRegex = /<w:instrText[^>]*>([^<]*DOCVARIABLE[^<]*)<\\/w:instrText>/gi;\n    while ((match = instrTextRegex.exec(documentXml)) !== null) {\n      const instrContent = match[1];\n      // Extrahuj nzev pole z instrText obsahu - rozen regex pro | . - /\n      const fieldMatch = instrContent.match(/DOCVARIABLE\\s+(?:\"([^\"]+)\"|([A-Z0-9_|.\\-/]+))/i);\n      if (fieldMatch) {\n        const fieldName = fieldMatch[1] || fieldMatch[2];\n        if (fieldName && !fields.some(f => f.name === fieldName && f.type === 'docvariable')) {\n          fields.push({\n            type: 'docvariable',\n            name: fieldName,\n            fullMatch: match[0],\n            position: match.index,\n            source: 'instrText'\n          });\n        }\n      }\n    }\n\n    // 1c.  FRAGMENTOVAN FIELDY - DOCVARIABLE a nzev pole v rznch <w:instrText> uzlech\n    // Pklad: <w:instrText> DOCVARIABLE </w:instrText>...<w:instrText>DTELEFON</w:instrText>\n    // Najdeme vechny <w:p> bloky a v nich spojme vechny <w:instrText>\n    const pRegex = /<w:p[\\s\\S]*?<\\/w:p>/gi;\n    let pMatch;\n    while ((pMatch = pRegex.exec(documentXml)) !== null) {\n      const pXml = pMatch[0];\n\n      // Najdi vechny <w:instrText> v rmci tohoto <w:p>\n      const instrTexts = [];\n      const instrRegex = /<w:instrText[^>]*>([\\s\\S]*?)<\\/w:instrText>/gi;\n      let instrMatch;\n      while ((instrMatch = instrRegex.exec(pXml)) !== null) {\n        instrTexts.push(instrMatch[1]);\n      }\n\n      if (instrTexts.length > 0) {\n        // Spoj vechny instrText dohromady (Word asto rozdluje fieldy)\n        const combinedInstr = instrTexts.join('').replace(/\\s+/g, ' ').trim();\n\n        // Hledej DOCVARIABLE/MERGEFIELD s nzvy pol\n        const fieldRegex = /(DOCVARIABLE|MERGEFIELD)\\s+([A-Z0-9_|.\\-/]+)/gi;\n        let fieldMatch;\n        while ((fieldMatch = fieldRegex.exec(combinedInstr)) !== null) {\n          const fieldName = fieldMatch[2].replace(/\\s+/g, ''); //  OPRAVA: Bez .toUpperCase() aby se zachoval pvodn nzev\n\n          // Pidej pouze pokud jet neexistuje\n          if (fieldName && !fields.some(f => f.name === fieldName && f.type === 'docvariable')) {\n            fields.push({\n              type: 'docvariable',\n              name: fieldName,\n              fullMatch: fieldMatch[0],\n              position: pMatch.index,\n              source: 'fragmentedInstrText'\n            });\n          }\n        }\n      }\n    }\n\n    // 2. Merge Fields (klassick Word merge fields)\n    // Rozen regex - zachyt i speciln znaky: | . - /\n    const mergeFieldRegex = /MERGEFIELD\\s+([A-Z0-9_|.\\-/]+)(?:\\s+\\\\[^}]*)?/gi;\n    while ((match = mergeFieldRegex.exec(documentXml)) !== null) {\n      fields.push({\n        type: 'mergefield',\n        name: match[1],\n        fullMatch: match[0],\n        position: match.index\n      });\n    }\n\n    // 3. Bookmarks (zloky)\n    const bookmarkRegex = /<w:bookmarkStart[^>]*w:name=\"([^\"]+)\"/gi;\n    while ((match = bookmarkRegex.exec(documentXml)) !== null) {\n      fields.push({\n        type: 'bookmark',\n        name: match[1],\n        fullMatch: match[0],\n        position: match.index\n      });\n    }\n\n    // 4. Content Controls (strukturovan dokumentov tagy)\n    const contentControlRegex = /<w:tag[^>]*w:val=\"([^\"]+)\"/gi;\n    while ((match = contentControlRegex.exec(documentXml)) !== null) {\n      fields.push({\n        type: 'contentcontrol',\n        name: match[1],\n        fullMatch: match[0],\n        position: match.index\n      });\n    }\n\n    // 5. Custom XML parts (pokud jsou k dispozici)\n    const customFieldRegex = /\\{\\{(\\w+)\\}\\}/gi;\n    while ((match = customFieldRegex.exec(documentXml)) !== null) {\n      fields.push({\n        type: 'custom',\n        name: match[1],\n        fullMatch: match[0],\n        position: match.index\n      });\n    }\n\n    //  Potn vskyt jednotlivch pol (msto odstrann duplicit)\n    // Vytvome mapu: nzev_pole -> poet vskyt\n    const fieldCounts = {};\n    fields.forEach(field => {\n      const key = `${field.name}|${field.type}`;\n      fieldCounts[key] = (fieldCounts[key] || 0) + 1;\n    });\n\n    // Vytvome uniktn seznam pol s potem vskyt (1:1 case-sensitive)\n    const uniqueFields = fields.reduce((acc, field) => {\n      const existing = acc.find(f =>\n        f.name === field.name &&\n        f.type === field.type\n      );\n      if (!existing) {\n        const key = `${field.name}|${field.type}`;\n        acc.push({\n          ...field,\n          count: fieldCounts[key] //  Pidme poet vskyt\n        });\n      }\n      return acc;\n    }, []);\n\n    return uniqueFields.sort((a, b) => a.name.localeCompare(b.name));\n\n  } catch (error) {\n    console.error('Chyba pi extrakci pol:', error);\n    return [];\n  }\n};\n\n/**\n * Extraktuje metadata z DOCX souboru\n */\nconst extractMetadata = (appXml, coreXml) => {\n  const metadata = {};\n\n  try {\n    if (appXml) {\n      // Extrakce z app.xml\n      const appData = extractXmlValue(appXml, 'Application') || 'Unknown';\n      const appVersion = extractXmlValue(appXml, 'AppVersion') || 'Unknown';\n      const totalTime = extractXmlValue(appXml, 'TotalTime') || '0';\n\n      metadata.application = appData;\n      metadata.appVersion = appVersion;\n      metadata.totalEditTime = totalTime;\n    }\n\n    if (coreXml) {\n      // Extrakce z core.xml\n      const title = extractXmlValue(coreXml, 'title');\n      const creator = extractXmlValue(coreXml, 'creator');\n      const created = extractXmlValue(coreXml, 'created');\n      const modified = extractXmlValue(coreXml, 'modified');\n\n      metadata.title = title;\n      metadata.creator = creator;\n      metadata.created = created;\n      metadata.modified = modified;\n    }\n\n    return metadata;\n\n  } catch (error) {\n    console.error('Chyba pi extrakci metadat:', error);\n    return {};\n  }\n};\n\n/**\n * Pomocn funkce pro extrakci hodnoty z XML\n */\nconst extractXmlValue = (xml, tagName) => {\n  try {\n    const regex = new RegExp(`<[^:]*:${tagName}[^>]*>([^<]*)<\\/[^:]*:${tagName}>`, 'i');\n    const match = xml.match(regex);\n    return match ? match[1] : null;\n  } catch (error) {\n    return null;\n  }\n};\n\n/**\n * Databzov pole podle skuten API response z /api.eeo/sablona_docx/order-data\n * AKTUALIZOVNO 22.10.2025 - PESN DB NZVY SLOUPC\n * Label: Prvn dek popis, druh dek {db_pole} typ\n */\nexport const getOrderFieldsForMapping = () => {\n  return [\n    //  NOV SEKCE: Datumov pole workflow (samostatn sekce pro lep pehlednost)\n    {\n      group: ' Datumov pole workflow',\n      fields: [\n        { key: 'dt_vytvoreni', label: 'Datum vytvoen objednvky\\n{dt_vytvoreni}', type: 'datetime', example: '2025-01-10 14:30:00' },\n        { key: 'dt_aktualizace', label: 'Datum posledn aktualizace\\n{dt_aktualizace}', type: 'datetime', example: '2025-01-14 16:45:00' },\n        { key: 'dt_objednavky', label: 'Datum objednvky\\n{dt_objednavky}', type: 'datetime', example: '2025-01-15 10:30:00' },\n        { key: 'dt_schvaleni', label: 'Datum schvlen\\n{dt_schvaleni}', type: 'datetime', example: '2025-01-12 10:00:00' },\n        { key: 'dt_odeslani', label: 'Datum odesln dodavateli\\n{dt_odeslani}', type: 'datetime', example: '2025-01-13 15:00:00' },\n        { key: 'dt_akceptace', label: 'Datum akceptace dodavatelem\\n{dt_akceptace}', type: 'datetime', example: '2025-01-14 09:30:00' },\n        { key: 'dt_zverejneni', label: 'Datum zveejnn\\n{dt_zverejneni}', type: 'datetime', example: '2025-01-20 12:00:00' },\n        { key: 'dt_predpokladany_termin_dodani', label: 'Pedpokldan termn dodn\\n{dt_predpokladany_termin_dodani}', type: 'date', example: '2025-02-15' }\n      ]\n    },\n\n    //  Zkladn daje (klov pole objednvky BEZ datum)\n    {\n      group: 'Zkladn daje',\n      fields: [\n        { key: 'cislo_objednavky', label: 'slo objednvky\\n{cislo_objednavky}', type: 'string', example: '2025-123' },\n        { key: 'predmet', label: 'Pedmt objednvky\\n{predmet}', type: 'string', example: 'Pedmt objednvky' },\n        { key: 'strediska_kod', label: 'Kdy stedisek\\n{strediska_kod}', type: 'string', example: 'IT001,FIN002,ADM003' },\n        { key: 'max_cena_s_dph', label: 'Max. cena s DPH\\n{max_cena_s_dph}', type: 'currency', example: '250000.50' },\n        { key: 'financovani', label: 'Financovn (text)\\n{financovani}', type: 'string', example: 'Rozpoet 2025' },\n        { key: 'druh_objednavky_kod', label: 'Druh objednvky (kd)\\n{druh_objednavky_kod}', type: 'string', example: 'STANDARD' },\n        { key: 'schvaleni_komentar', label: 'Koment schvlen\\n{schvaleni_komentar}', type: 'text', example: 'Objednvka schvlena' },\n        { key: 'misto_dodani', label: 'Msto dodn\\n{misto_dodani}', type: 'string', example: 'Msto dodn' },\n        { key: 'zaruka', label: 'Zruka\\n{zaruka}', type: 'string', example: '24 msc' },\n        { key: 'poznamka', label: 'Poznmka\\n{poznamka}', type: 'text', example: 'Poznmka k objednvce' }\n      ]\n    },\n\n    // Financovn (vnoen objekt)\n    {\n      group: 'Financovn',\n      fields: [\n        { key: 'financovani.typ', label: 'Typ financovn\\n{financovani.typ}', type: 'string', example: 'LP' },\n        { key: 'financovani.nazev', label: 'Nzev financovn\\n{financovani.nazev}', type: 'string', example: 'Leasing Plus' },\n        { key: 'financovani.nazev_stavu', label: 'Nzev stavu financovn\\n{financovani.nazev_stavu}', type: 'string', example: 'Limitovan pslib' },\n        { key: 'financovani.kod', label: 'Kd financovn\\n{financovani.kod}', type: 'string', example: 'LP001' },\n        { key: 'financovani.kod_stavu', label: 'Kd stavu financovn\\n{financovani.kod_stavu}', type: 'string', example: 'LP' }\n      ]\n    },\n\n    // Objednvka - rozen informace (pesn DB nzvy z 25a_objednavky)\n    {\n      group: 'Objednvka - detail',\n      fields: [\n        { key: 'cislo_objednavky', label: 'slo objednvky\\n{cislo_objednavky}', type: 'string', example: '2025-123' },\n        { key: 'dt_objednavky', label: 'Datum objednvky\\n{dt_objednavky}', type: 'datetime', example: '2025-01-15 10:30:00' },\n        { key: 'predmet', label: 'Pedmt objednvky\\n{predmet}', type: 'string', example: 'Pedmt objednvky' },\n        { key: 'strediska_kod', label: 'Kdy stedisek\\n{strediska_kod}', type: 'string', example: 'IT001,FIN002,ADM003' },\n        { key: 'max_cena_s_dph', label: 'Max. cena s DPH\\n{max_cena_s_dph}', type: 'currency', example: '250000.50' },\n        { key: 'financovani', label: 'Financovn\\n{financovani}', type: 'string', example: 'Rozpoet 2025' },\n        { key: 'druh_objednavky_kod', label: 'Druh objednvky (kd)\\n{druh_objednavky_kod}', type: 'string', example: 'STANDARD' },\n        { key: 'dt_schvaleni', label: 'Datum schvlen\\n{dt_schvaleni}', type: 'datetime', example: '2025-01-12 10:00:00' },\n        { key: 'schvaleni_komentar', label: 'Koment schvlen\\n{schvaleni_komentar}', type: 'text', example: 'Objednvka schvlena' },\n        { key: 'dt_predpokladany_termin_dodani', label: 'Pedpokldan termn dodn\\n{dt_predpokladany_termin_dodani}', type: 'date', example: '2025-02-15' },\n        { key: 'misto_dodani', label: 'Msto dodn\\n{misto_dodani}', type: 'string', example: 'Msto dodn' },\n        { key: 'zaruka', label: 'Zruka\\n{zaruka}', type: 'string', example: '24 msc' },\n        { key: 'poznamka', label: 'Poznmka\\n{poznamka}', type: 'text', example: 'Poznmka k objednvce' },\n        { key: 'dt_vytvoreni', label: 'Datum vytvoen\\n{dt_vytvoreni}', type: 'datetime', example: '2025-01-10 14:30:00' },\n        { key: 'dt_aktualizace', label: 'Datum aktualizace\\n{dt_aktualizace}', type: 'datetime', example: '2025-01-14 16:45:00' }\n      ]\n    },\n\n    // Stavy a workflow (pesn DB nzvy)\n    {\n      group: 'Stavy',\n      fields: [\n        { key: 'stav_workflow_kod', label: 'Kd workflow stavu\\n{stav_workflow_kod}', type: 'string', example: 'ODESLANO_DODAVATELI' },\n        { key: 'stav_objednavky', label: 'Nzev stavu\\n{stav_objednavky}', type: 'string', example: 'Odeslno dodavateli' },\n        { key: 'dt_odeslani', label: 'Datum odesln\\n{dt_odeslani}', type: 'datetime', example: '2025-01-13 15:00:00' },\n        { key: 'dodavatel_zpusob_potvrzeni', label: 'Zpsob potvrzen\\n{dodavatel_zpusob_potvrzeni}', type: 'string', example: 'email,form' },\n        { key: 'dt_akceptace', label: 'Datum akceptace\\n{dt_akceptace}', type: 'datetime', example: '2025-01-14 09:30:00' },\n        { key: 'dt_zverejneni', label: 'Datum zveejnn\\n{dt_zverejneni}', type: 'datetime', example: '2025-01-20 12:00:00' },\n        { key: 'registr_iddt', label: 'Registr IDDT\\n{registr_iddt}', type: 'string', example: 'REG-2025-001' }\n      ]\n    },\n\n    // Objednatel\n    {\n      group: 'Objednatel',\n      fields: [\n        { key: 'objednatel.username', label: 'Username objednatele\\n{objednatel.username}', type: 'string', example: 'jan.novak' },\n        { key: 'objednatel.titul_pred', label: 'Titul ped jmnem\\n{objednatel.titul_pred}', type: 'string', example: 'Ing.' },\n        { key: 'objednatel.jmeno', label: 'Jmno objednatele\\n{objednatel.jmeno}', type: 'string', example: 'Jan' },\n        { key: 'objednatel.prijmeni', label: 'Pjmen objednatele\\n{objednatel.prijmeni}', type: 'string', example: 'Novk' },\n        { key: 'objednatel.titul_za', label: 'Titul za jmnem\\n{objednatel.titul_za}', type: 'string', example: 'Ph.D.' },\n        { key: 'objednatel.email', label: 'Email objednatele\\n{objednatel.email}', type: 'string', example: 'jan.novak@firma.cz' },\n        { key: 'objednatel.telefon', label: 'Telefon objednatele\\n{objednatel.telefon}', type: 'string', example: '+420 123 456 789' },\n        { key: 'objednatel.cele_jmeno', label: 'Cel jmno objednatele\\n{objednatel.cele_jmeno}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'objednatel.plne_jmeno', label: 'Pln jmno objednatele (alias)\\n{objednatel.plne_jmeno}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'objednatel.lokalita.nazev', label: 'Lokalita objednatele\\n{objednatel.lokalita.nazev}', type: 'string', example: 'Praha' }\n      ]\n    },\n\n    // Garant\n    {\n      group: 'Garant',\n      fields: [\n        { key: 'garant.username', label: 'Username garanta\\n{garant.username}', type: 'string', example: 'marie.svoboda' },\n        { key: 'garant.titul_pred', label: 'Titul ped jmnem\\n{garant.titul_pred}', type: 'string', example: '' },\n        { key: 'garant.jmeno', label: 'Jmno garanta\\n{garant.jmeno}', type: 'string', example: 'Marie' },\n        { key: 'garant.prijmeni', label: 'Pjmen garanta\\n{garant.prijmeni}', type: 'string', example: 'Svobodov' },\n        { key: 'garant.titul_za', label: 'Titul za jmnem\\n{garant.titul_za}', type: 'string', example: '' },\n        { key: 'garant.email', label: 'Email garanta\\n{garant.email}', type: 'string', example: 'marie.svoboda@firma.cz' },\n        { key: 'garant.telefon', label: 'Telefon garanta\\n{garant.telefon}', type: 'string', example: '+420 987 654 321' },\n        { key: 'garant.cele_jmeno', label: 'Cel jmno garanta\\n{garant.cele_jmeno}', type: 'string', example: 'Marie Svobodov' },\n        { key: 'garant.plne_jmeno', label: 'Pln jmno garanta (alias)\\n{garant.plne_jmeno}', type: 'string', example: 'Marie Svobodov' },\n        { key: 'garant.lokalita.nazev', label: 'Lokalita garanta\\n{garant.lokalita.nazev}', type: 'string', example: 'Praha' }\n      ]\n    },\n\n    // Uivatel (kdo vytvoil) - ZMNA z created_by na uzivatel\n    {\n      group: 'Uivatel (vytvoil)',\n      fields: [\n        { key: 'uzivatel.username', label: 'Username tvrce\\n{uzivatel.username}', type: 'string', example: 'jan.novak' },\n        { key: 'uzivatel.titul_pred', label: 'Titul ped jmnem\\n{uzivatel.titul_pred}', type: 'string', example: 'Ing.' },\n        { key: 'uzivatel.jmeno', label: 'Jmno tvrce\\n{uzivatel.jmeno}', type: 'string', example: 'Jan' },\n        { key: 'uzivatel.prijmeni', label: 'Pjmen tvrce\\n{uzivatel.prijmeni}', type: 'string', example: 'Novk' },\n        { key: 'uzivatel.titul_za', label: 'Titul za jmnem\\n{uzivatel.titul_za}', type: 'string', example: 'Ph.D.' },\n        { key: 'uzivatel.email', label: 'Email tvrce\\n{uzivatel.email}', type: 'string', example: 'jan.novak@firma.cz' },\n        { key: 'uzivatel.telefon', label: 'Telefon tvrce\\n{uzivatel.telefon}', type: 'string', example: '+420 123 456 789' },\n        { key: 'uzivatel.cele_jmeno', label: 'Cel jmno tvrce\\n{uzivatel.cele_jmeno}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'uzivatel.plne_jmeno', label: 'Pln jmno tvrce (alias)\\n{uzivatel.plne_jmeno}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'uzivatel.lokalita.nazev', label: 'Lokalita tvrce\\n{uzivatel.lokalita.nazev}', type: 'string', example: 'Praha' }\n      ]\n    },\n\n    // Schvalovatel (schvlil) - ZMNA z schvalil na schvalovatel\n    {\n      group: 'Schvalovatel',\n      fields: [\n        { key: 'schvalovatel.username', label: 'Username schvalovatele\\n{schvalovatel.username}', type: 'string', example: 'admin' },\n        { key: 'schvalovatel.titul_pred', label: 'Titul ped jmnem\\n{schvalovatel.titul_pred}', type: 'string', example: 'Mgr.' },\n        { key: 'schvalovatel.jmeno', label: 'Jmno schvalovatele\\n{schvalovatel.jmeno}', type: 'string', example: 'Petr' },\n        { key: 'schvalovatel.prijmeni', label: 'Pjmen schvalovatele\\n{schvalovatel.prijmeni}', type: 'string', example: 'editel' },\n        { key: 'schvalovatel.titul_za', label: 'Titul za jmnem\\n{schvalovatel.titul_za}', type: 'string', example: 'MBA' },\n        { key: 'schvalovatel.email', label: 'Email schvalovatele\\n{schvalovatel.email}', type: 'string', example: 'reditel@firma.cz' },\n        { key: 'schvalovatel.telefon', label: 'Telefon schvalovatele\\n{schvalovatel.telefon}', type: 'string', example: '+420 111 222 333' },\n        { key: 'schvalovatel.cele_jmeno', label: 'Cel jmno schvalovatele\\n{schvalovatel.cele_jmeno}', type: 'string', example: 'Mgr. Petr editel MBA' },\n        { key: 'schvalovatel.plne_jmeno', label: 'Pln jmno schvalovatele (alias)\\n{schvalovatel.plne_jmeno}', type: 'string', example: 'Mgr. Petr editel MBA' },\n        { key: 'schvalovatel.lokalita.nazev', label: 'Lokalita schvalovatele\\n{schvalovatel.lokalita.nazev}', type: 'string', example: 'Praha' }\n      ]\n    },\n\n    // Pkazce\n    {\n      group: 'Pkazce',\n      fields: [\n        { key: 'prikazce.username', label: 'Username pkazce\\n{prikazce.username}', type: 'string', example: 'pavel.prikazce' },\n        { key: 'prikazce.titul_pred', label: 'Titul ped jmnem\\n{prikazce.titul_pred}', type: 'string', example: 'Bc.' },\n        { key: 'prikazce.jmeno', label: 'Jmno pkazce\\n{prikazce.jmeno}', type: 'string', example: 'Pavel' },\n        { key: 'prikazce.prijmeni', label: 'Pjmen pkazce\\n{prikazce.prijmeni}', type: 'string', example: 'Pkazce' },\n        { key: 'prikazce.titul_za', label: 'Titul za jmnem\\n{prikazce.titul_za}', type: 'string', example: '' },\n        { key: 'prikazce.email', label: 'Email pkazce\\n{prikazce.email}', type: 'string', example: 'pavel.prikazce@firma.cz' },\n        { key: 'prikazce.telefon', label: 'Telefon pkazce\\n{prikazce.telefon}', type: 'string', example: '+420 444 555 666' },\n        { key: 'prikazce.cele_jmeno', label: 'Cel jmno pkazce\\n{prikazce.cele_jmeno}', type: 'string', example: 'Bc. Pavel Pkazce' },\n        { key: 'prikazce.plne_jmeno', label: 'Pln jmno pkazce (alias)\\n{prikazce.plne_jmeno}', type: 'string', example: 'Bc. Pavel Pkazce' },\n        { key: 'prikazce.lokalita.nazev', label: 'Lokalita pkazce\\n{prikazce.lokalita.nazev}', type: 'string', example: 'Praha' }\n      ]\n    },\n\n    // Vypotan hodnoty (z vypocitane objektu)\n    {\n      group: ' Vypotan hodnoty',\n      fields: [\n        { key: 'vypocitane.celkova_cena_bez_dph', label: 'Celkov cena bez DPH\\n{vypocitane.celkova_cena_bez_dph}', type: 'currency', example: '8264.46' },\n        { key: 'vypocitane.celkova_cena_s_dph', label: 'Celkov cena s DPH\\n{vypocitane.celkova_cena_s_dph}', type: 'currency', example: '10000.00' },\n        { key: 'vypocitane.vypoctene_dph', label: 'Vypoten DPH\\n{vypocitane.vypoctene_dph}', type: 'currency', example: '1735.54' },\n        { key: 'vypocitane.celkova_cena_bez_dph_kc', label: 'Celkov cena bez DPH (s K)\\n{vypocitane.celkova_cena_bez_dph_kc}', type: 'string', example: '8 264.46 K' },\n        { key: 'vypocitane.celkova_cena_s_dph_kc', label: 'Celkov cena s DPH (s K)\\n{vypocitane.celkova_cena_s_dph_kc}', type: 'string', example: '10 000.00 K' },\n        { key: 'vypocitane.vypoctene_dph_kc', label: 'Vypoten DPH (s K)\\n{vypocitane.vypoctene_dph_kc}', type: 'string', example: '1 735.54 K' },\n        { key: 'vypocitane.pocet_polozek', label: 'Poet poloek\\n{vypocitane.pocet_polozek}', type: 'number', example: '5' },\n        { key: 'vypocitane.pocet_priloh', label: 'Poet ploh\\n{vypocitane.pocet_priloh}', type: 'number', example: '3' },\n        { key: 'vypocitane.datum_generovani', label: 'Datum generovn\\n{vypocitane.datum_generovani}', type: 'date', example: '24.11.2025' },\n        { key: 'vypocitane.cas_generovani', label: 'as generovn\\n{vypocitane.cas_generovani}', type: 'time', example: '14:30' },\n        { key: 'vypocitane.datum_cas_generovani', label: 'Datum a as generovn\\n{vypocitane.datum_cas_generovani}', type: 'datetime', example: '24.11.2025 14:30' },\n        // Kombinace jmen\n        { key: 'vypocitane.garant_jmeno_prijmeni', label: 'Garant - Jmno Pjmen\\n{vypocitane.garant_jmeno_prijmeni}', type: 'string', example: 'Jan Novk' },\n        { key: 'vypocitane.garant_prijmeni_jmeno', label: 'Garant - Pjmen Jmno\\n{vypocitane.garant_prijmeni_jmeno}', type: 'string', example: 'Novk Jan' },\n        { key: 'vypocitane.garant_cele_jmeno_s_tituly', label: 'Garant - s tituly\\n{vypocitane.garant_cele_jmeno_s_tituly}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'vypocitane.prikazce_jmeno_prijmeni', label: 'Pkazce - Jmno Pjmen\\n{vypocitane.prikazce_jmeno_prijmeni}', type: 'string', example: 'Marie Svobodov' },\n        { key: 'vypocitane.prikazce_prijmeni_jmeno', label: 'Pkazce - Pjmen Jmno\\n{vypocitane.prikazce_prijmeni_jmeno}', type: 'string', example: 'Svobodov Marie' },\n        { key: 'vypocitane.schvalovatel_jmeno_prijmeni', label: 'Schvalovatel - Jmno Pjmen\\n{vypocitane.schvalovatel_jmeno_prijmeni}', type: 'string', example: 'Petr Dvok' },\n        { key: 'vypocitane.objednatel_jmeno_prijmeni', label: 'Objednatel - Jmno Pjmen\\n{vypocitane.objednatel_jmeno_prijmeni}', type: 'string', example: 'Anna Novkov' }\n      ]\n    },\n\n    // Dodavatel (ploch pole s prefixem dodavatel_ - podle BE response)\n    {\n      group: 'Dodavatel',\n      fields: [\n        { key: 'dodavatel_nazev', label: 'Nzev dodavatele\\n{dodavatel_nazev}', type: 'string', example: 'DODAVATEL s.r.o.' },\n        { key: 'dodavatel_adresa', label: 'Adresa dodavatele\\n{dodavatel_adresa}', type: 'string', example: 'Obchodn 123, 110 00 Praha 1' },\n        { key: 'dodavatel_ico', label: 'IO dodavatele\\n{dodavatel_ico}', type: 'string', example: '12345678' },\n        { key: 'dodavatel_dic', label: 'DI dodavatele\\n{dodavatel_dic}', type: 'string', example: 'CZ12345678' }\n      ]\n    },\n\n    // Poloky (array - podle BE response)\n    {\n      group: 'Poloky',\n      fields: [\n        { key: 'polozky', label: 'Vechny poloky (array)\\n{polozky}', type: 'array', example: '[{id,popis,cena_bez_dph,sazba_dph,cena_s_dph}]' },\n        { key: 'polozky[0].id', label: 'Prvn poloka - ID\\n{polozky[0].id}', type: 'number', example: '1' },\n        { key: 'polozky[0].popis', label: 'Prvn poloka - popis\\n{polozky[0].popis}', type: 'string', example: 'Kancelsk stl 120x80 cm' },\n        { key: 'polozky[0].cena_bez_dph', label: 'Prvn poloka - cena bez DPH\\n{polozky[0].cena_bez_dph}', type: 'currency', example: '8264.46' },\n        { key: 'polozky[0].sazba_dph', label: 'Prvn poloka - sazba DPH\\n{polozky[0].sazba_dph}', type: 'number', example: '21' },\n        { key: 'polozky[0].cena_s_dph', label: 'Prvn poloka - cena s DPH\\n{polozky[0].cena_s_dph}', type: 'currency', example: '10000.00' }\n      ]\n    },\n\n    // Plohy (array - podle BE response)\n    {\n      group: 'Plohy',\n      fields: [\n        { key: 'prilohy', label: 'Vechny plohy (array)\\n{prilohy}', type: 'array', example: '[{id,originalni_nazev_souboru,velikost_souboru_b,...}]' },\n        { key: 'prilohy[0].id', label: 'Prvn ploha - ID\\n{prilohy[0].id}', type: 'number', example: '1' },\n        { key: 'prilohy[0].originalni_nazev_souboru', label: 'Prvn ploha - nzev\\n{prilohy[0].originalni_nazev_souboru}', type: 'string', example: 'Specifikace_objednavky.pdf' },\n        { key: 'prilohy[0].velikost_souboru_b', label: 'Prvn ploha - velikost\\n{prilohy[0].velikost_souboru_b}', type: 'number', example: '245760' },\n        { key: 'prilohy[0].typ_prilohy', label: 'Prvn ploha - typ\\n{prilohy[0].typ_prilohy}', type: 'string', example: 'specifikace' },\n        { key: 'prilohy[0].dt_vytvoreni', label: 'Prvn ploha - datum vytvoen\\n{prilohy[0].dt_vytvoreni}', type: 'datetime', example: '2025-01-10 15:00:00' },\n        { key: 'prilohy[0].nahrano_uzivatel.username', label: 'Prvn ploha - nahrl username\\n{prilohy[0].nahrano_uzivatel.username}', type: 'string', example: 'jan.novak' },\n        { key: 'prilohy[0].nahrano_uzivatel.jmeno', label: 'Prvn ploha - nahrl jmno\\n{prilohy[0].nahrano_uzivatel.jmeno}', type: 'string', example: 'Jan' },\n        { key: 'prilohy[0].nahrano_uzivatel.prijmeni', label: 'Prvn ploha - nahrl pjmen\\n{prilohy[0].nahrano_uzivatel.prijmeni}', type: 'string', example: 'Novk' }\n      ]\n    },\n\n    // Faktury (array - podle tabulky 25a_objednavky_faktury)\n    {\n      group: 'Faktury',\n      fields: [\n        { key: 'faktury', label: 'Vechny faktury (array)\\n{faktury}', type: 'array', example: '[{id,fa_cislo_vema,fa_datum_vystaveni,fa_castka,...}]' },\n        { key: 'faktury[0].id', label: 'Prvn faktura - ID\\n{faktury[0].id}', type: 'number', example: '1' },\n        { key: 'faktury[0].fa_cislo_vema', label: 'Prvn faktura - slo Fa/VPD\\n{faktury[0].fa_cislo_vema}', type: 'string', example: 'FA-2025-001' },\n        { key: 'faktury[0].fa_datum_vystaveni', label: 'Prvn faktura - datum vystaven\\n{faktury[0].fa_datum_vystaveni}', type: 'date', example: '2025-02-01' },\n        { key: 'faktury[0].fa_datum_splatnosti', label: 'Prvn faktura - datum splatnosti\\n{faktury[0].fa_datum_splatnosti}', type: 'date', example: '2025-02-15' },\n        { key: 'faktury[0].fa_datum_doruceni', label: 'Prvn faktura - datum doruen\\n{faktury[0].fa_datum_doruceni}', type: 'date', example: '2025-02-01' },\n        { key: 'faktury[0].fa_dorucena', label: 'Prvn faktura - doruena (0/1)\\n{faktury[0].fa_dorucena}', type: 'number', example: '1' },\n        { key: 'faktury[0].fa_castka', label: 'Prvn faktura - stka\\n{faktury[0].fa_castka}', type: 'currency', example: '10000.00' },\n        { key: 'faktury[0].fa_strediska_kod', label: 'Prvn faktura - stediska\\n{faktury[0].fa_strediska_kod}', type: 'string', example: 'IT001,FIN002' },\n        { key: 'faktury[0].fa_poznamka', label: 'Prvn faktura - poznmka\\n{faktury[0].fa_poznamka}', type: 'text', example: 'Poznmka k faktue' },\n        { key: 'faktury[0].vytvoril_uzivatel_id', label: 'Prvn faktura - vytvoil (user ID)\\n{faktury[0].vytvoril_uzivatel_id}', type: 'number', example: '5' },\n        { key: 'faktury[0].dt_vytvoreni', label: 'Prvn faktura - datum vytvoen\\n{faktury[0].dt_vytvoreni}', type: 'datetime', example: '2025-02-01 10:00:00' },\n        { key: 'faktury[0].dt_aktualizace', label: 'Prvn faktura - datum aktualizace\\n{faktury[0].dt_aktualizace}', type: 'datetime', example: '2025-02-01 15:30:00' }\n      ]\n    },\n\n    // Poloky faktur (array - podle tabulky 25a_faktury_polozky)\n    {\n      group: 'Faktury - Poloky',\n      fields: [\n        { key: 'faktury[0].polozky', label: 'Prvn faktura - vechny poloky (array)\\n{faktury[0].polozky}', type: 'array', example: '[{id,popis,cena_bez_dph,sazba_dph,cena_s_dph}]' },\n        { key: 'faktury[0].polozky[0].id', label: 'Prvn faktura, prvn poloka - ID\\n{faktury[0].polozky[0].id}', type: 'number', example: '1' },\n        { key: 'faktury[0].polozky[0].popis', label: 'Prvn faktura, prvn poloka - popis\\n{faktury[0].polozky[0].popis}', type: 'string', example: 'Kancelsk stl 120x80 cm' },\n        { key: 'faktury[0].polozky[0].mnozstvi', label: 'Prvn faktura, prvn poloka - mnostv\\n{faktury[0].polozky[0].mnozstvi}', type: 'number', example: '1' },\n        { key: 'faktury[0].polozky[0].jednotka', label: 'Prvn faktura, prvn poloka - jednotka\\n{faktury[0].polozky[0].jednotka}', type: 'string', example: 'ks' },\n        { key: 'faktury[0].polozky[0].cena_bez_dph', label: 'Prvn faktura, prvn poloka - cena bez DPH\\n{faktury[0].polozky[0].cena_bez_dph}', type: 'currency', example: '8264.46' },\n        { key: 'faktury[0].polozky[0].sazba_dph', label: 'Prvn faktura, prvn poloka - sazba DPH\\n{faktury[0].polozky[0].sazba_dph}', type: 'number', example: '21' },\n        { key: 'faktury[0].polozky[0].cena_s_dph', label: 'Prvn faktura, prvn poloka - cena s DPH\\n{faktury[0].polozky[0].cena_s_dph}', type: 'currency', example: '10000.00' }\n      ]\n    },\n\n    // Plohy faktur (array - podle tabulky 25a_faktury_prilohy)\n    {\n      group: 'Faktury - Plohy',\n      fields: [\n        { key: 'faktury[0].prilohy', label: 'Prvn faktura - vechny plohy (array)\\n{faktury[0].prilohy}', type: 'array', example: '[{id,originalni_nazev_souboru,typ_prilohy,...}]' },\n        { key: 'faktury[0].prilohy[0].id', label: 'Prvn faktura, prvn ploha - ID\\n{faktury[0].prilohy[0].id}', type: 'number', example: '1' },\n        { key: 'faktury[0].prilohy[0].originalni_nazev_souboru', label: 'Prvn faktura, prvn ploha - nzev\\n{faktury[0].prilohy[0].originalni_nazev_souboru}', type: 'string', example: 'Faktura_FA-2025-001.pdf' },\n        { key: 'faktury[0].prilohy[0].typ_prilohy', label: 'Prvn faktura, prvn ploha - typ\\n{faktury[0].prilohy[0].typ_prilohy}', type: 'string', example: 'FAKTURA' },\n        { key: 'faktury[0].prilohy[0].velikost_souboru_b', label: 'Prvn faktura, prvn ploha - velikost\\n{faktury[0].prilohy[0].velikost_souboru_b}', type: 'number', example: '145280' },\n        { key: 'faktury[0].prilohy[0].je_isdoc', label: 'Prvn faktura, prvn ploha - je ISDOC\\n{faktury[0].prilohy[0].je_isdoc}', type: 'boolean', example: 'ano' },\n        { key: 'faktury[0].prilohy[0].dt_vytvoreni', label: 'Prvn faktura, prvn ploha - datum vytvoen\\n{faktury[0].prilohy[0].dt_vytvoreni}', type: 'datetime', example: '2025-02-01 10:00:00' }\n      ]\n    },\n\n    // Vypotan hodnoty (generovan z poloek objednvky - DOCX genertor)\n    {\n      group: 'Vypotan',\n      fields: [\n        { key: 'vypocitane.celkova_cena_bez_dph', label: 'Celkov cena bez DPH (souet poloek)\\n{vypocitane.celkova_cena_bez_dph}', type: 'currency', example: '82644.63' },\n        { key: 'vypocitane.celkova_cena_s_dph', label: 'Celkov cena s DPH (souet poloek)\\n{vypocitane.celkova_cena_s_dph}', type: 'currency', example: '100000.00' },\n        { key: 'vypocitane.vypoctene_dph', label: 'Vypoten DPH (rozdl)\\n{vypocitane.vypoctene_dph}', type: 'currency', example: '17355.37' },\n        { key: 'vypocitane.celkova_cena_bez_dph_kc', label: 'Celkov cena bez DPH s K\\n{vypocitane.celkova_cena_bez_dph_kc}', type: 'string', example: '82 644.63 K' },\n        { key: 'vypocitane.celkova_cena_s_dph_kc', label: 'Celkov cena s DPH s K\\n{vypocitane.celkova_cena_s_dph_kc}', type: 'string', example: '100 000.00 K' },\n        { key: 'vypocitane.vypoctene_dph_kc', label: 'Vypoten DPH s K\\n{vypocitane.vypoctene_dph_kc}', type: 'string', example: '17 355.37 K' },\n        { key: 'vypocitane.pocet_polozek', label: 'Poet poloek objednvky\\n{vypocitane.pocet_polozek}', type: 'number', example: '5' },\n        { key: 'vypocitane.pocet_priloh', label: 'Poet ploh\\n{vypocitane.pocet_priloh}', type: 'number', example: '3' },\n        { key: 'vypocitane.datum_generovani', label: 'Datum generovn dokumentu\\n{vypocitane.datum_generovani}', type: 'date', example: '16.11.2025' },\n        { key: 'vypocitane.cas_generovani', label: 'as generovn dokumentu\\n{vypocitane.cas_generovani}', type: 'time', example: '14:30' },\n        { key: 'vypocitane.datum_cas_generovani', label: 'Datum a as generovn\\n{vypocitane.datum_cas_generovani}', type: 'datetime', example: '16.11.2025 14:30' },\n        { key: 'vypocitane.vybrany_uzivatel_cele_jmeno', label: 'Vybran uivatel - cel jmno s tituly\\n{vypocitane.vybrany_uzivatel_cele_jmeno}', type: 'string', example: 'Ing. Jan Novk Ph.D.' },\n        { key: 'vypocitane.vybrany_uzivatel_jmeno', label: 'Vybran uivatel - jmno\\n{vypocitane.vybrany_uzivatel_jmeno}', type: 'string', example: 'Jan' },\n        { key: 'vypocitane.vybrany_uzivatel_prijmeni', label: 'Vybran uivatel - pjmen\\n{vypocitane.vybrany_uzivatel_prijmeni}', type: 'string', example: 'Novk' },\n        { key: 'vypocitane.vybrany_uzivatel_titul_pred', label: 'Vybran uivatel - titul ped\\n{vypocitane.vybrany_uzivatel_titul_pred}', type: 'string', example: 'Ing.' },\n        { key: 'vypocitane.vybrany_uzivatel_titul_za', label: 'Vybran uivatel - titul za\\n{vypocitane.vybrany_uzivatel_titul_za}', type: 'string', example: 'Ph.D.' },\n        { key: 'vypocitane.vybrany_uzivatel_email', label: 'Vybran uivatel - email\\n{vypocitane.vybrany_uzivatel_email}', type: 'string', example: 'jan.novak@firma.cz' },\n        { key: 'vypocitane.vybrany_uzivatel_telefon', label: 'Vybran uivatel - telefon\\n{vypocitane.vybrany_uzivatel_telefon}', type: 'string', example: '+420 123 456 789' },\n        { key: 'vypocitane.uzivatelem_vybrany_text', label: 'Text vybran uivatelem (placeholder)\\n{vypocitane.uzivatelem_vybrany_text}', type: 'string', example: '[TEXT_VYBRAN_UIVATELEM]' }\n      ]\n    },\n\n    // Systmov\n    {\n      group: 'Systmov',\n      fields: [\n        { key: 'aktualni_datum', label: 'Aktuln datum (generovan FE)\\n{aktualni_datum}', type: 'string', example: '22.10.2025' },\n        { key: 'aktualni_cas', label: 'Aktuln as (generovan FE)\\n{aktualni_cas}', type: 'string', example: '14:30:15' },\n        { key: 'aktualni_datum_cas', label: 'Aktuln datum a as (generovan FE)\\n{aktualni_datum_cas}', type: 'string', example: '22.10.2025 14:30:15' }\n      ]\n    }\n  ];\n};\n\n/**\n * Mapuje data objednvky na DOCX pole podle SKUTEN API response struktury\n * AKTUALIZOVNO 22.10.2025 - NOV DB STRUKTURA\n * @param {Object} orderData - Data z API /api.eeo/sablona_docx/order-data\n * @returns {Object} - Mapovan hodnoty pipraven pro DOCX\n */\nexport const mapOrderToDocxFields = (orderData) => {\n  if (!orderData) {\n    console.error(' mapOrderToDocxFields: Chyb orderData');\n    return {};\n  }\n\n  const mappedData = {};\n\n  // === ZKLADN POLE OBJEDNVKY (NOV NZVY) ===\n  mappedData['cislo_objednavky'] = orderData.cislo_objednavky || '';\n  mappedData['dt_objednavky'] = orderData.dt_objednavky || '';\n  mappedData['predmet'] = orderData.predmet || '';\n  mappedData['strediska_kod'] = orderData.strediska_kod || '';\n  mappedData['max_cena_s_dph'] = orderData.max_cena_s_dph || '';\n  \n  // Financovn - me bt string nebo objekt\n  if (typeof orderData.financovani === 'object' && orderData.financovani !== null) {\n    mappedData['financovani'] = orderData.financovani.nazev_stavu || orderData.financovani.nazev || orderData.financovani.typ || '';\n    mappedData['financovani.typ'] = orderData.financovani.typ || '';\n    mappedData['financovani.nazev'] = orderData.financovani.nazev || '';\n    mappedData['financovani.nazev_stavu'] = orderData.financovani.nazev_stavu || '';\n    mappedData['financovani.kod'] = orderData.financovani.kod || '';\n    mappedData['financovani.kod_stavu'] = orderData.financovani.kod_stavu || '';\n  } else {\n    mappedData['financovani'] = orderData.financovani || '';\n  }\n  \n  mappedData['druh_objednavky_kod'] = orderData.druh_objednavky_kod || '';\n  mappedData['dt_schvaleni'] = orderData.dt_schvaleni || '';\n  mappedData['schvaleni_komentar'] = orderData.schvaleni_komentar || '';\n  mappedData['dt_predpokladany_termin_dodani'] = orderData.dt_predpokladany_termin_dodani || '';\n  mappedData['misto_dodani'] = orderData.misto_dodani || '';\n  mappedData['zaruka'] = orderData.zaruka || '';\n  mappedData['poznamka'] = orderData.poznamka || '';\n  mappedData['dt_vytvoreni'] = orderData.dt_vytvoreni || '';\n  mappedData['dt_aktualizace'] = orderData.dt_aktualizace || '';\n\n  // === DATUMOV POLE WORKFLOW ===\n  mappedData['dt_schvaleni_zamitnutim'] = orderData.dt_schvaleni_zamitnutim || '';\n  mappedData['dt_uzavreni'] = orderData.dt_uzavreni || '';\n  mappedData['dt_zruseni'] = orderData.dt_zruseni || '';\n  mappedData['dt_archivace'] = orderData.dt_archivace || '';\n\n  // === STAVY A WORKFLOW (PLOCH POLE, NE OBJEKT) ===\n  mappedData['stav_workflow_kod'] = orderData.stav_workflow_kod || '';\n  mappedData['stav_objednavky'] = orderData.stav_objednavky || '';\n  mappedData['dt_odeslani'] = orderData.dt_odeslani || '';\n  mappedData['dodavatel_zpusob_potvrzeni'] = orderData.dodavatel_zpusob_potvrzeni || '';\n  mappedData['dt_akceptace'] = orderData.dt_akceptace || '';\n  mappedData['dt_zverejneni'] = orderData.dt_zverejneni || '';\n  mappedData['registr_iddt'] = orderData.registr_iddt || '';\n\n  // === DODAVATEL (PLOCH POLE S PREFIXEM, NE OBJEKT) ===\n  mappedData['dodavatel_nazev'] = orderData.dodavatel_nazev || '';\n  mappedData['dodavatel_adresa'] = orderData.dodavatel_adresa || '';\n  mappedData['dodavatel_ico'] = orderData.dodavatel_ico || '';\n  mappedData['dodavatel_dic'] = orderData.dodavatel_dic || '';\n  mappedData['dodavatel_zastoupeny'] = orderData.dodavatel_zastoupeny || '';\n  mappedData['dodavatel_kontakt_jmeno'] = orderData.dodavatel_kontakt_jmeno || '';\n  mappedData['dodavatel_kontakt_email'] = orderData.dodavatel_kontakt_email || '';\n  mappedData['dodavatel_kontakt_telefon'] = orderData.dodavatel_kontakt_telefon || '';\n\n  // === OBJEDNATEL (vnoen objekt - BEZE ZMNY) ===\n  if (orderData.objednatel) {\n    const objednatel = orderData.objednatel;\n    mappedData['objednatel.username'] = objednatel.username || '';\n    mappedData['objednatel.titul_pred'] = objednatel.titul_pred || '';\n    mappedData['objednatel.jmeno'] = objednatel.jmeno || '';\n    mappedData['objednatel.prijmeni'] = objednatel.prijmeni || '';\n    mappedData['objednatel.titul_za'] = objednatel.titul_za || '';\n    mappedData['objednatel.email'] = objednatel.email || '';\n    mappedData['objednatel.telefon'] = objednatel.telefon || '';\n    mappedData['objednatel.plne_jmeno'] = objednatel.plne_jmeno || '';\n  } else {\n    ['username', 'titul_pred', 'jmeno', 'prijmeni', 'titul_za', 'email', 'telefon', 'plne_jmeno']\n      .forEach(field => mappedData[`objednatel.${field}`] = '');\n  }\n\n  // === GARANT (vnoen objekt - BEZE ZMNY) ===\n  if (orderData.garant) {\n    const garant = orderData.garant;\n    mappedData['garant.username'] = garant.username || '';\n    mappedData['garant.titul_pred'] = garant.titul_pred || '';\n    mappedData['garant.jmeno'] = garant.jmeno || '';\n    mappedData['garant.prijmeni'] = garant.prijmeni || '';\n    mappedData['garant.titul_za'] = garant.titul_za || '';\n    mappedData['garant.email'] = garant.email || '';\n    mappedData['garant.telefon'] = garant.telefon || '';\n    mappedData['garant.plne_jmeno'] = garant.plne_jmeno || '';\n  } else {\n    ['username', 'titul_pred', 'jmeno', 'prijmeni', 'titul_za', 'email', 'telefon', 'plne_jmeno']\n      .forEach(field => mappedData[`garant.${field}`] = '');\n  }\n\n  // === UIVATEL (kdo vytvoil) - ZMNA Z created_by ===\n  if (orderData.uzivatel) {\n    const uzivatel = orderData.uzivatel;\n    mappedData['uzivatel.username'] = uzivatel.username || '';\n    mappedData['uzivatel.titul_pred'] = uzivatel.titul_pred || '';\n    mappedData['uzivatel.jmeno'] = uzivatel.jmeno || '';\n    mappedData['uzivatel.prijmeni'] = uzivatel.prijmeni || '';\n    mappedData['uzivatel.titul_za'] = uzivatel.titul_za || '';\n    mappedData['uzivatel.email'] = uzivatel.email || '';\n    mappedData['uzivatel.telefon'] = uzivatel.telefon || '';\n    mappedData['uzivatel.plne_jmeno'] = uzivatel.plne_jmeno || '';\n  } else {\n    ['username', 'titul_pred', 'jmeno', 'prijmeni', 'titul_za', 'email', 'telefon', 'plne_jmeno']\n      .forEach(field => mappedData[`uzivatel.${field}`] = '');\n  }\n\n  // === SCHVALOVATEL (schvlil) - ZMNA Z schvalil ===\n  if (orderData.schvalovatel) {\n    const schvalovatel = orderData.schvalovatel;\n    mappedData['schvalovatel.username'] = schvalovatel.username || '';\n    mappedData['schvalovatel.titul_pred'] = schvalovatel.titul_pred || '';\n    mappedData['schvalovatel.jmeno'] = schvalovatel.jmeno || '';\n    mappedData['schvalovatel.prijmeni'] = schvalovatel.prijmeni || '';\n    mappedData['schvalovatel.titul_za'] = schvalovatel.titul_za || '';\n    mappedData['schvalovatel.email'] = schvalovatel.email || '';\n    mappedData['schvalovatel.telefon'] = schvalovatel.telefon || '';\n    mappedData['schvalovatel.plne_jmeno'] = schvalovatel.plne_jmeno || '';\n  } else {\n    ['username', 'titul_pred', 'jmeno', 'prijmeni', 'titul_za', 'email', 'telefon', 'plne_jmeno']\n      .forEach(field => mappedData[`schvalovatel.${field}`] = '');\n  }\n\n  // === PKAZCE (vnoen objekt - BEZE ZMNY) ===\n  if (orderData.prikazce) {\n    const prikazce = orderData.prikazce;\n    mappedData['prikazce.username'] = prikazce.username || '';\n    mappedData['prikazce.titul_pred'] = prikazce.titul_pred || '';\n    mappedData['prikazce.jmeno'] = prikazce.jmeno || '';\n    mappedData['prikazce.prijmeni'] = prikazce.prijmeni || '';\n    mappedData['prikazce.titul_za'] = prikazce.titul_za || '';\n    mappedData['prikazce.email'] = prikazce.email || '';\n    mappedData['prikazce.telefon'] = prikazce.telefon || '';\n    mappedData['prikazce.plne_jmeno'] = prikazce.plne_jmeno || '';\n  } else {\n    ['username', 'titul_pred', 'jmeno', 'prijmeni', 'titul_za', 'email', 'telefon', 'plne_jmeno']\n      .forEach(field => mappedData[`prikazce.${field}`] = '');\n  }\n\n  // === POLOKY (array) ===\n  mappedData['polozky'] = orderData.polozky || [];\n  mappedData['polozky_text'] = orderData.polozky ?\n    orderData.polozky.map((item, index) =>\n      `${index + 1}. ${item.popis || 'Poloka'} - ${item.cena_s_dph || 0} K`\n    ).join('\\n') : '';\n\n  // === PLOHY (array) ===\n  mappedData['prilohy'] = orderData.prilohy || [];\n  mappedData['prilohy_text'] = orderData.prilohy ?\n    orderData.prilohy.map((priloha, index) =>\n      `${index + 1}. ${priloha.puvodni_nazev || priloha.nazev_souboru || 'Ploha'}`\n    ).join('\\n') : '';\n\n  // === FAKTURY (array) ===\n  mappedData['faktury'] = orderData.faktury || [];\n  mappedData['faktury_text'] = orderData.faktury ?\n    orderData.faktury.map((faktura, index) =>\n      `${index + 1}. ${faktura.cislo_faktury || 'Faktura'} - ${faktura.castka || 0} ${faktura.mena || 'K'} (splatnost: ${faktura.datum_splatnosti || 'neuvedeno'})`\n    ).join('\\n') : '';\n\n  // Mapovn poloek faktur (pokud existuj)\n  if (orderData.faktury && orderData.faktury.length > 0) {\n    orderData.faktury.forEach((faktura, fakturaIndex) => {\n      // Mapuj zkladn pole faktury\n      const fakturaPrefix = `faktury[${fakturaIndex}]`;\n      mappedData[`${fakturaPrefix}.id`] = faktura.id || '';\n      mappedData[`${fakturaPrefix}.cislo_faktury`] = faktura.cislo_faktury || '';\n      mappedData[`${fakturaPrefix}.datum_vystaveni`] = faktura.datum_vystaveni || '';\n      mappedData[`${fakturaPrefix}.datum_splatnosti`] = faktura.datum_splatnosti || '';\n      mappedData[`${fakturaPrefix}.castka`] = faktura.castka || '';\n      mappedData[`${fakturaPrefix}.mena`] = faktura.mena || 'CZK';\n      mappedData[`${fakturaPrefix}.vs`] = faktura.vs || '';\n      mappedData[`${fakturaPrefix}.stav`] = faktura.stav || '';\n      mappedData[`${fakturaPrefix}.poznamka`] = faktura.poznamka || '';\n\n      // Mapuj poloky faktury\n      mappedData[`${fakturaPrefix}.polozky`] = faktura.polozky || [];\n      if (faktura.polozky && faktura.polozky.length > 0) {\n        faktura.polozky.forEach((polozka, polozkaIndex) => {\n          const polozkaPrefix = `${fakturaPrefix}.polozky[${polozkaIndex}]`;\n          mappedData[`${polozkaPrefix}.id`] = polozka.id || '';\n          mappedData[`${polozkaPrefix}.popis`] = polozka.popis || '';\n          mappedData[`${polozkaPrefix}.mnozstvi`] = polozka.mnozstvi || '';\n          mappedData[`${polozkaPrefix}.jednotka`] = polozka.jednotka || '';\n          mappedData[`${polozkaPrefix}.cena_bez_dph`] = polozka.cena_bez_dph || '';\n          mappedData[`${polozkaPrefix}.sazba_dph`] = polozka.sazba_dph || '';\n          mappedData[`${polozkaPrefix}.cena_s_dph`] = polozka.cena_s_dph || '';\n        });\n      }\n\n      // Mapuj plohy faktury\n      mappedData[`${fakturaPrefix}.prilohy`] = faktura.prilohy || [];\n      if (faktura.prilohy && faktura.prilohy.length > 0) {\n        faktura.prilohy.forEach((priloha, prilohaIndex) => {\n          const prilohaPrefix = `${fakturaPrefix}.prilohy[${prilohaIndex}]`;\n          mappedData[`${prilohaPrefix}.id`] = priloha.id || '';\n          mappedData[`${prilohaPrefix}.originalni_nazev_souboru`] = priloha.originalni_nazev_souboru || '';\n          mappedData[`${prilohaPrefix}.typ_prilohy`] = priloha.typ_prilohy || '';\n          mappedData[`${prilohaPrefix}.velikost_souboru_b`] = priloha.velikost_souboru_b || '';\n          mappedData[`${prilohaPrefix}.je_isdoc`] = priloha.je_isdoc ? 'ano' : '';\n          mappedData[`${prilohaPrefix}.dt_vytvoreni`] = priloha.dt_vytvoreni || '';\n        });\n      }\n    });\n  }\n\n  // === VYPOTAN POLE ===\n  mappedData['celkova_cena_bez_dph'] = orderData.celkova_cena_bez_dph || '';\n  mappedData['celkova_cena_s_dph'] = orderData.celkova_cena_s_dph || '';\n  mappedData['pocet_polozek'] = orderData.pocet_polozek || (orderData.polozky?.length || 0);\n  mappedData['pocet_priloh'] = orderData.pocet_priloh || (orderData.prilohy?.length || 0);\n  mappedData['pocet_faktur'] = orderData.faktury?.length || 0;\n\n  // Celkov stka faktur\n  const celkovaFaktury = orderData.faktury?.reduce((sum, f) => sum + (parseFloat(f.castka) || 0), 0) || 0;\n  mappedData['celkova_castka_faktur'] = celkovaFaktury.toFixed(2);\n\n  // === SYSTMOV POLE ===\n  const aktualniDatum = new Date();\n  mappedData['aktualni_datum'] = aktualniDatum.toLocaleDateString('cs-CZ');\n  mappedData['aktualni_cas'] = aktualniDatum.toLocaleTimeString('cs-CZ');\n  mappedData['aktualni_datum_cas'] = aktualniDatum.toLocaleString('cs-CZ');\n\n  return mappedData;\n};\n\n  // === LOKALITA (vnoen objekt) - ODSTRANNO, nen v nov DB struktue ===\n\n/**\n * Validuje DOCX soubor\n */\nexport const validateDocxFile = (file) => {\n  const errors = [];\n\n  if (!file) {\n    errors.push('Nebyl vybrn dn soubor');\n    return { isValid: false, errors };\n  }\n\n  if (file.type !== 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n    errors.push('Soubor mus bt ve formtu DOCX');\n  }\n\n  if (file.size > 10 * 1024 * 1024) { // 10MB limit\n    errors.push('Soubor je pli velk (max 10MB)');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Rozen mapovn pro sloen pole\n * @param {Object} mapping - Zkladn mapovn z UI\n * @param {Array} orderFields - Definice pol z getOrderFieldsForMapping\n * @returns {Object} - Rozen mapovn vetn sloench pol\n */\nexport const createEnhancedFieldMapping = (mapping, orderFields) => {\n  const enhanced = { ...mapping };\n\n  // Projdi vechny skupiny pol\n  orderFields.forEach(group => {\n    group.fields.forEach(field => {\n      // Pokud je pole sloen a je namapovan\n      if (field.type === 'composed' && enhanced[Object.keys(enhanced).find(k => enhanced[k] === field.key)]) {\n        const docxFieldName = Object.keys(enhanced).find(k => enhanced[k] === field.key);\n\n        if (field.composition && field.composition.length > 0) {\n          // Vytvo placeholder hodnotu pro sloen pole\n          if (field.template) {\n            // Pouij template formt\n            let template = field.template;\n            field.composition.forEach((sourceField, idx) => {\n              template = template.replace(`{${idx}}`, `{${sourceField}}`);\n            });\n            enhanced[docxFieldName] = template;\n          } else {\n            // Pouij jednoduch separator\n            const separator = field.separator || ' ';\n            enhanced[docxFieldName] = field.composition.map(f => `{${f}}`).join(separator);\n          }\n        }\n      }\n    });\n  });\n\n  return enhanced;\n};\n\n/**\n * Pevede mapovn na field values pro processDocxWithFields\n * OPRAVENO: zachovv pvodn nzvy pol (bez pevodu na UPPERCASE)\n * @param {Object} mapping - Mapovn z UI nebo rozen mapovn\n * @param {Object} orderData - Skuten data objednvky (voliteln)\n * @returns {Object} - Field values pro DOCX procesovn\n */\nexport const createFieldValuesFromMapping = (mapping, orderData = null) => {\n  const fieldValues = {};\n\n  Object.entries(mapping).forEach(([docxField, dbField]) => {\n    if (orderData) {\n      // Pouij skuten data, pokud jsou k dispozici (pro objednvky)\n      // KRITICK: Zachovej pvodn nzev pole (bez .toUpperCase())\n      fieldValues[docxField] = getValueFromOrderData(orderData, dbField);\n    } else {\n      // Pro nhled DOCX ablon - zachovej pvodn dbField mapovn\n      fieldValues[docxField] = `{${dbField}}`;\n    }\n  });\n\n  return fieldValues;\n};\n\n/**\n * Zsk hodnotu z dat objednvky podle field key\n * Podporuje i sloen hodnoty s template formtem\n * @param {Object} orderData - Data objednvky\n * @param {string} fieldKey - Kl pole nebo template formt\n * @returns {string} - Hodnota pro dosazen\n */\nconst getValueFromOrderData = (orderData, fieldKey) => {\n  // NOV: Zpracuj pmo sloen pole s opertorem + (bez vnjch {})\n  if (fieldKey.includes('+') && !fieldKey.includes('{')) {\n    const fieldParts = fieldKey.split('+').map(part => part.trim());\n\n    const values = fieldParts.map(fieldPart => {\n      const rawValue = getNestedValue(orderData, fieldPart);\n      return formatFieldValue(fieldPart, rawValue);\n    }).filter(val => val && val.trim()); // Odstra przdn hodnoty\n\n    const combinedValue = values.join(' '); // Spoj mezerou\n    return combinedValue;\n  }\n\n  // Pokud field obsahuje template formt s {field1} {field2}\n  if (fieldKey.includes('{') && fieldKey.includes('}')) {\n    let result = fieldKey;\n\n    // Najdi vechny {fieldName} v template a nahra je hodnotami\n    const fieldMatches = fieldKey.match(/\\{([^}]+)\\}/g);\n    if (fieldMatches) {\n      fieldMatches.forEach(match => {\n        const cleanFieldName = match.replace(/[{}]/g, '');\n\n        // NOV FUNKCE: Zpracovn sloench pol s opertorem +\n        if (cleanFieldName.includes('+')) {\n          const fieldParts = cleanFieldName.split('+').map(part => part.trim());\n\n          const values = fieldParts.map(fieldPart => {\n            const rawValue = getNestedValue(orderData, fieldPart);\n            return formatFieldValue(fieldPart, rawValue);\n          }).filter(val => val && val.trim()); // Odstra przdn hodnoty\n\n          const combinedValue = values.join(' '); // Spoj mezerou\n          result = result.replace(match, combinedValue);\n        } else {\n          // Pvodn logika pro jednoduch pole\n          const rawValue = getNestedValue(orderData, cleanFieldName);\n          const formattedValue = formatFieldValue(cleanFieldName, rawValue);\n          result = result.replace(match, formattedValue || '');\n        }\n      });\n    }\n\n    return result;\n  }\n\n  // Jednoduch field key\n  const rawValue = getNestedValue(orderData, fieldKey);\n  return formatFieldValue(fieldKey, rawValue) || `{${fieldKey}}`;\n};\n\n/**\n * Formtuje hodnotu pole podle jeho typu/nzvu\n * AKTUALIZOVNO pro novou BE strukturu s novmi datovmi typy\n * @param {string} fieldKey - Nzev pole\n * @param {any} value - Surov hodnota\n * @returns {string} - Naformtovan hodnota\n */\nconst formatFieldValue = (fieldKey, value) => {\n  if (value === null || value === undefined || value === '') {\n    return '';\n  }\n\n  const fieldLower = fieldKey.toLowerCase();\n\n  // Boolean hodnoty -> \"ano\" / \"\" (nov BE specifikace)\n  if (typeof value === 'boolean') {\n    return value ? 'ano' : '';\n  }\n\n  // Boolean text hodnoty (u jsou \"ano\"/\"\")\n  if (fieldLower.includes('boolean_text') || (typeof value === 'string' && (value === 'ano' || value === ''))) {\n    return value;\n  }\n\n  // Formtovn cen - pidej tiscov oddlovae a \"K\"\n  if (fieldLower.includes('cena') || fieldLower.includes('price') || fieldLower.includes('amount') ||\n      fieldLower.includes('max_cena') || fieldLower.includes('currency')) {\n    const numValue = parseFloat(value);\n    if (!isNaN(numValue)) {\n      return numValue.toLocaleString('cs-CZ', {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n      }) + ' K';\n    }\n  }\n\n  // Formtovn datum (date typ)\n  if (fieldLower.includes('datum') || fieldLower.includes('date') ||\n      fieldLower.includes('dt_') || fieldLower.includes('termin')) {\n    try {\n      const date = new Date(value);\n      if (!isNaN(date.getTime())) {\n        return date.toLocaleDateString('cs-CZ');\n      }\n    } catch (error) {\n      // Pokud se nepoda parsovat jako datum, vra jako string\n    }\n  }\n\n  // Formtovn datetime (datetime typ)\n  if (fieldLower.includes('datetime') || fieldLower.includes('dt_vytvoreno') ||\n      fieldLower.includes('dt_aktualizace') || fieldLower.includes('datum_schvaleni')) {\n    try {\n      const date = new Date(value);\n      if (!isNaN(date.getTime())) {\n        return date.toLocaleDateString('cs-CZ') + ' ' + date.toLocaleTimeString('cs-CZ', {\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      }\n    } catch (error) {\n      // Pokud se nepoda parsovat jako datum, vra jako string\n    }\n  }\n\n  // Formtovn asu (time typ)\n  if (fieldLower.includes('time') && !fieldLower.includes('datetime')) {\n    try {\n      // Pokud je to as ve formtu HH:MM nebo timestamp\n      if (typeof value === 'string' && value.match(/^\\d{1,2}:\\d{2}$/)) {\n        return value;\n      }\n      const date = new Date(value);\n      if (!isNaN(date.getTime())) {\n        return date.toLocaleTimeString('cs-CZ', {\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      }\n    } catch (error) {\n      // Pokud se nepoda parsovat, vra jako string\n    }\n  }\n\n  // Ostatn hodnoty vra jako string\n  return String(value);\n};\n\n/**\n * Zsk hodnotu z vnoenho objektu podle tekov notace\n * ROZENO pro zpracovn poloek objednvky a inteligentn skldn jmen\n * @param {Object} obj - Objektv data\n * @param {string} path - Cesta k hodnot (nap. \"uzivatel.jmeno\")\n * @returns {any} - Hodnota nebo undefined\n */\nconst getNestedValue = (obj, path) => {\n  // Speciln zpracovn pro poloky objednvky\n  if (path.startsWith('polozky_') && obj.polozky && Array.isArray(obj.polozky)) {\n    const polozky = obj.polozky;\n\n    switch (path) {\n      case 'polozky_count':\n        return polozky.length;\n\n      case 'polozky_celkova_cena':\n        return polozky.reduce((sum, item) => sum + (parseFloat(item.cena_s_dph) || 0), 0);\n\n      case 'polozky_celkova_cena_bez_dph':\n        return polozky.reduce((sum, item) => sum + (parseFloat(item.cena_bez_dph) || 0), 0);\n\n      case 'polozky_dph_celkem':\n        const cenaSdph = polozky.reduce((sum, item) => sum + (parseFloat(item.cena_s_dph) || 0), 0);\n        const cenaBezDph = polozky.reduce((sum, item) => sum + (parseFloat(item.cena_bez_dph) || 0), 0);\n        return cenaSdph - cenaBezDph;\n\n      case 'polozky_nazvy':\n        return polozky.map(item => item.nazev || item.popis || '').filter(n => n).join(', ');\n\n      case 'polozky_mnozstvi_celkem':\n        return polozky.reduce((sum, item) => sum + (parseFloat(item.mnozstvi) || 0), 0);\n\n      case 'polozky_jednotky':\n        const jednotky = [...new Set(polozky.map(item => item.jednotka).filter(j => j))];\n        return jednotky.join(', ');\n\n      case 'polozky_dodavatele':\n        const dodavatele = [...new Set(polozky.map(item => item.dodavatel_nazev).filter(d => d))];\n        return dodavatele.join(', ');\n\n      case 'polozky_katalogova_cisla':\n        return polozky.map(item => item.katalogove_cislo).filter(k => k).join(', ');\n\n      case 'polozky_popis_souhrnny':\n        const popisy = polozky.map(item => item.popis || item.nazev || '').filter(p => p);\n        return popisy.join('; ');\n\n      case 'polozky_formatovane':\n        return polozky.map((item, index) => {\n          const nazev = item.nazev || item.popis || 'Poloka';\n          const mnozstvi = item.mnozstvi || 1;\n          const jednotka = item.jednotka || 'ks';\n          const cena = item.cena_s_dph || item.cena_bez_dph || 0;\n          return `${index + 1}. ${nazev} (${mnozstvi}${jednotka}  ${cena} K)`;\n        }).join('\\n');\n\n      default:\n        // Pokud nen speciln pole, zkus standardn pstup\n        break;\n    }\n  }\n\n  // Speciln zpracovn pro sloen pole typu \"jmeno_cele\"\n  if (path.endsWith('.jmeno_cele')) {\n    const basePath = path.replace('.jmeno_cele', '');\n    const objPart = basePath ? path.split('.').reduce((current, key) => {\n      return current && current[key] !== undefined ? current[key] : undefined;\n    }, obj) : obj;\n\n    if (objPart) {\n      // Zkus najt pmo jmeno_cele\n      if (objPart.jmeno_cele) {\n        return objPart.jmeno_cele;\n      }\n\n      // Pokud ne, slo z jmeno + prijmeni\n      const jmeno = objPart.jmeno || objPart.uzivatel_jmeno || '';\n      const prijmeni = objPart.prijmeni || objPart.uzivatel_prijmeni || '';\n      const celJemeno = `${jmeno} ${prijmeni}`.trim();\n\n      if (celJemeno) {\n        return celJemeno;\n      }\n    }\n\n    // Pokud vnoen objekt neexistuje, zkus fallback na ploch nzvy\n    if (basePath === 'objednatel') {\n      const jmeno = obj.uzivatel_jmeno || obj.jmeno || '';\n      const prijmeni = obj.uzivatel_prijmeni || obj.prijmeni || '';\n      return `${jmeno} ${prijmeni}`.trim();\n    }\n\n    if (basePath === 'garant') {\n      const jmeno = obj.garant_jmeno || '';\n      const prijmeni = obj.garant_prijmeni || '';\n      return `${jmeno} ${prijmeni}`.trim();\n    }\n\n    if (basePath === 'schvalovatel') {\n      const jmeno = obj.schvalovatel_jmeno || '';\n      const prijmeni = obj.schvalovatel_prijmeni || '';\n      return `${jmeno} ${prijmeni}`.trim();\n    }\n\n    return '';\n  }\n\n  // Standardn tekov notace\n  return path.split('.').reduce((current, key) => {\n    return current && current[key] !== undefined ? current[key] : undefined;\n  }, obj);\n};\n\n/**\n * DYNAMICK GENEROVN POL Z API DAT - S AUTOMATICKOU DETEKC SKUPIN\n * Analyzuje skutenou strukturu dat z BE a automaticky vytv podsekce podle prefix\n *\n * @param {Object} apiData - Data z POST /api.eeo/sablona_docx/order-data\n * @returns {Array} - Pole skupin s fieldy ve formtu pro DocxMappingExpandableSection\n */\nexport const generateFieldsFromApiData = (apiData) => {\n  if (!apiData || typeof apiData !== 'object') {\n    console.warn(' generateFieldsFromApiData: Neplatn data');\n    return getOrderFieldsForMapping(); // Fallback na hardcoded\n  }\n\n  const groups = [];\n\n  // Mapa prefix na esk nzvy skupin\n  const prefixToCzechName = {\n    'dodavatel': 'Dodavatel',\n    'objednatel': 'Objednatel',\n    'garant': 'Garant',\n    'uzivatel': 'Uivatel',\n    'schvalovatel': 'Schvalovatel',\n    'prikazce': 'Pkazce',\n    'polozky': 'Poloky',\n    'prilohy': 'Plohy',\n    'smlouva': 'Smlouva',\n    'faktury': 'Faktury', //  OPRAVENO: mnon slo\n    'platba': 'Platba'\n  };\n\n  // Helper pro zskn typu hodnoty\n  const getFieldType = (value) => {\n    if (value === null || value === undefined) return 'string';\n    if (Array.isArray(value)) return 'array';\n    if (typeof value === 'number') {\n      return value.toString().includes('.') ? 'currency' : 'number';\n    }\n    if (typeof value === 'boolean') return 'boolean';\n    if (typeof value === 'string') {\n      if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/.test(value)) return 'datetime';\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) return 'date';\n      if (value.length > 100) return 'text';\n      return 'string';\n    }\n    return 'string';\n  };\n\n  // Helper pro vytvoen fieldu\n  const createField = (key, value, czechName = null) => {\n    const type = getFieldType(value);\n    const label = czechName\n      ? `${czechName}\\n{${key}}`\n      : `${key}\\n{${key}}`;\n\n    return {\n      key,\n      label,\n      type,\n      example: value !== null && value !== undefined ? String(value).substring(0, 50) : ''\n    };\n  };\n\n  // Helper pro detekci prefix skupiny z nzvu pole\n  const detectGroupFromKey = (key) => {\n    // Kontrola podtrtka - nap. dodavatel_email  dodavatel\n    const underscoreMatch = key.match(/^([a-z]+)_/i);\n    if (underscoreMatch) {\n      const prefix = underscoreMatch[1].toLowerCase();\n      if (prefixToCzechName[prefix]) {\n        return { prefix, name: prefixToCzechName[prefix] };\n      }\n    }\n\n    // Kontrola teky - nap. objednatel.email  objednatel\n    const dotMatch = key.match(/^([a-z]+)\\./i);\n    if (dotMatch) {\n      const prefix = dotMatch[1].toLowerCase();\n      if (prefixToCzechName[prefix]) {\n        return { prefix, name: prefixToCzechName[prefix] };\n      }\n    }\n\n    // Kontrola pmho shodnho jmna - nap. \"polozky\", \"prilohy\"\n    const lowerKey = key.toLowerCase();\n    if (prefixToCzechName[lowerKey]) {\n      return { prefix: lowerKey, name: prefixToCzechName[lowerKey] };\n    }\n\n    return null;\n  };\n\n  // Helper pro rekurzivn prochzen objektu\n  const processObject = (obj, groupName, prefix = '') => {\n    const fields = [];\n\n    Object.entries(obj).forEach(([key, value]) => {\n      const fullKey = prefix ? `${prefix}.${key}` : key;\n\n      if (value && typeof value === 'object' && !Array.isArray(value)) {\n        // Vnoen objekt - pidej ho jako samostatn pole\n        fields.push(createField(fullKey, JSON.stringify(value)));\n\n        // A tak jeho properties\n        Object.entries(value).forEach(([nestedKey, nestedValue]) => {\n          fields.push(createField(`${fullKey}.${nestedKey}`, nestedValue));\n        });\n      } else if (Array.isArray(value) && value.length > 0) {\n        // Array - pidej cel array i prvn prvek s indexem\n        fields.push(createField(fullKey, `[${value.length} poloek]`));\n\n        if (typeof value[0] === 'object') {\n          Object.entries(value[0]).forEach(([itemKey, itemValue]) => {\n            fields.push(createField(`${fullKey}[0].${itemKey}`, itemValue));\n          });\n        }\n      } else {\n        // Primitivn hodnota\n        fields.push(createField(fullKey, value));\n      }\n    });\n\n    if (fields.length > 0) {\n      groups.push({ group: groupName, fields });\n    }\n  };\n\n  // Doasn skupiny pro dynamickou detekci\n  const dynamicGroups = {};\n  const baseFields = []; // Pole bez prefixu\n\n  //  KLOV POLE OBJEDNVKY (mla by bt v baseFields pro \"Zkladn daje\")\n  const orderKeyFields = [\n    'cislo_objednavky', 'dt_objednavky', 'dt_vytvoreni', 'dt_aktualizace',\n    'dt_schvaleni', 'dt_odeslani', 'dt_akceptace', 'dt_zverejneni',\n    'predmet', 'strediska_kod', 'max_cena_s_dph', 'financovani',\n    'druh_objednavky_kod', 'schvaleni_komentar', 'dt_predpokladany_termin_dodani',\n    'misto_dodani', 'zaruka', 'poznamka', 'stav_workflow_kod', 'stav_objednavky',\n    'dodavatel_zpusob_potvrzeni', 'registr_iddt'\n  ];\n\n  // 1. Prochzme vechna root level pole a seskupujeme podle prefix\n  Object.entries(apiData).forEach(([key, value]) => {\n    // Pokud je hodnota vnoen objekt (ne array), zpracuj jako samostatnou sekci\n    if (value && typeof value === 'object' && !Array.isArray(value)) {\n      const groupInfo = detectGroupFromKey(key);\n      const groupName = groupInfo ? groupInfo.name : key.charAt(0).toUpperCase() + key.slice(1);\n      processObject(value, groupName, key);\n      return;\n    }\n\n    // Pokud je hodnota array, zpracuj zvl\n    if (Array.isArray(value)) {\n      const groupInfo = detectGroupFromKey(key);\n      const groupName = groupInfo ? groupInfo.name : key.charAt(0).toUpperCase() + key.slice(1);\n\n      const arrayFields = [\n        createField(key, `[${value.length} poloek]`)\n      ];\n\n      if (value.length > 0 && typeof value[0] === 'object') {\n        Object.entries(value[0]).forEach(([itemKey, itemValue]) => {\n          if (typeof itemValue === 'object' && itemValue !== null && !Array.isArray(itemValue)) {\n            // Vnoen objekt v array\n            Object.entries(itemValue).forEach(([nestedKey, nestedValue]) => {\n              arrayFields.push(createField(`${key}[0].${itemKey}.${nestedKey}`, nestedValue));\n            });\n          } else {\n            arrayFields.push(createField(`${key}[0].${itemKey}`, itemValue));\n          }\n        });\n      }\n\n      groups.push({ group: groupName, fields: arrayFields });\n      return;\n    }\n\n    // Primitivn hodnota - detekuj prefix\n    const groupInfo = detectGroupFromKey(key);\n\n    //  OPRAVENO: Klov pole objednvky VDY do baseFields (i kdy maj prefix)\n    if (orderKeyFields.includes(key)) {\n      baseFields.push(createField(key, value));\n    } else if (groupInfo) {\n      // Pole pat do skupiny (nap. dodavatel_ico  Dodavatel)\n      if (!dynamicGroups[groupInfo.prefix]) {\n        dynamicGroups[groupInfo.prefix] = {\n          name: groupInfo.name,\n          fields: []\n        };\n      }\n      dynamicGroups[groupInfo.prefix].fields.push(createField(key, value));\n    } else {\n      // Pole bez prefixu  zkladn objednvka\n      baseFields.push(createField(key, value));\n    }\n  });\n\n  // 2. Pidej zkladn pole objednvky na zatek\n  //  OPRAVENO: Vytvo TROJE skupiny - \"Datumov pole\", \"Zkladn daje\" (bez datum), \"Objednvka - detail\"\n  if (baseFields.length > 0) {\n    //  DATUMOV POLE - samostatn sekce\n    const dateFields = [\n      'dt_vytvoreni', 'dt_aktualizace', 'dt_objednavky', 'dt_schvaleni',\n      'dt_odeslani', 'dt_akceptace', 'dt_zverejneni', 'dt_predpokladany_termin_dodani'\n    ];\n    const dateOnlyFields = baseFields.filter(f => dateFields.includes(f.key));\n    if (dateOnlyFields.length > 0) {\n      groups.unshift({ group: ' Datumov pole workflow', fields: dateOnlyFields });\n    }\n\n    // Zkladn daje - klov pole BEZ datum\n    const keyFieldsWithoutDates = [\n      'cislo_objednavky', 'predmet', 'strediska_kod', 'max_cena_s_dph', 'financovani',\n      'druh_objednavky_kod', 'schvaleni_komentar', 'misto_dodani', 'zaruka', 'poznamka',\n      'stav_workflow_kod', 'stav_objednavky', 'dodavatel_zpusob_potvrzeni', 'registr_iddt'\n    ];\n\n    const basicFields = baseFields.filter(f => keyFieldsWithoutDates.includes(f.key));\n    if (basicFields.length > 0) {\n      groups.push({ group: 'Zkladn daje', fields: basicFields });\n    }\n\n    // Objednvka - detail - vechna pole\n    groups.push({ group: 'Objednvka - detail', fields: baseFields });\n  }\n\n  // 3. Pidej dynamicky detekovan skupiny (seazen podle znmch prefix)\n  const knownPrefixOrder = Object.keys(prefixToCzechName);\n  knownPrefixOrder.forEach(prefix => {\n    if (dynamicGroups[prefix]) {\n      groups.push({\n        group: dynamicGroups[prefix].name,\n        fields: dynamicGroups[prefix].fields\n      });\n    }\n  });\n\n  // 4.  POJISTKA: VDY PIDEJ/DOPL VECHNA DATUMOV POLE (i kdy maj NULL hodnotu v API)\n  const staticFields = getOrderFieldsForMapping();\n  const staticDateGroup = staticFields.find(g => g.group === ' Datumov pole workflow');\n  \n  if (staticDateGroup) {\n    const existingDateGroup = groups.find(g => g.group === ' Datumov pole workflow');\n    \n    if (existingDateGroup) {\n      // Dopl chybjc datumov pole ze statick definice\n      const existingKeys = existingDateGroup.fields.map(f => f.key);\n      const missingDateFields = staticDateGroup.fields.filter(f => !existingKeys.includes(f.key));\n      \n      if (missingDateFields.length > 0) {\n        console.log(` Dopluji ${missingDateFields.length} chybjcch datumovch pol (NULL v API):`, \n          missingDateFields.map(f => f.key));\n        existingDateGroup.fields.push(...missingDateFields);\n      }\n    } else {\n      // Datumov sekce vbec neexistuje - pidej celou statickou\n      console.log(' Datumov sekce chyb pln, pidvm statickou definici');\n      groups.unshift(staticDateGroup);\n    }\n  }\n\n  // 5.  POJISTKA: Pokud faktury nejsou v dynamickch datech, pidej je staticky (bez duplikace)\n  const fakturyGroups = staticFields.filter(g =>\n    g.group === 'Faktury' ||\n    g.group === 'Faktury - Poloky' ||\n    g.group === 'Faktury - Plohy'\n  );\n  \n  fakturyGroups.forEach(fakturyGroup => {\n    if (!groups.some(g => g.group === fakturyGroup.group)) {\n      groups.push(fakturyGroup);\n    }\n  });\n\n  // 6.  VDY PIDEJ VYPOTAN POLE - jsou generovna DOCX genertorem (bez duplikace)\n  const vypocitaneGroup = staticFields.find(g => g.group === ' Vypotan hodnoty' || g.group === 'Vypotan');\n  if (vypocitaneGroup && !groups.some(g => g.group === vypocitaneGroup.group)) {\n    groups.push(vypocitaneGroup);\n  }\n\n  // 7.  VDY PIDEJ SYSTMOV POLE (bez duplikace)\n  const systemGroup = staticFields.find(g => g.group === 'Systmov');\n  if (systemGroup && !groups.some(g => g.group === 'Systmov')) {\n    groups.push(systemGroup);\n  }\n\n  // 8.  POJISTKA: DOPL ENRICHED UIVATELSK SKUPINY (i kdy nejsou v API - NULL hodnoty)\n  const userGroups = [\n    'Objednatel', 'Garant', 'Uivatel (vytvoil)', 'Schvalovatel', 'Pkazce'\n  ];\n  \n  userGroups.forEach(groupName => {\n    const staticUserGroup = staticFields.find(g => g.group === groupName);\n    if (!staticUserGroup) return;\n    \n    const existingUserGroup = groups.find(g => g.group === groupName);\n    \n    if (existingUserGroup) {\n      // Skupina existuje - dopl chybjc pole\n      const existingKeys = existingUserGroup.fields.map(f => f.key);\n      const missingFields = staticUserGroup.fields.filter(f => !existingKeys.includes(f.key));\n      \n      if (missingFields.length > 0) {\n        console.log(` Dopluji ${missingFields.length} chybjcch pol pro \"${groupName}\" (NULL v API):`,\n          missingFields.map(f => f.key));\n        existingUserGroup.fields.push(...missingFields);\n      }\n    } else {\n      // Skupina neexistuje vbec - pidej celou statickou (nap. kdy garant nen vyplnn)\n      console.log(` Skupina \"${groupName}\" chyb pln, pidvm statickou definici`);\n      groups.push(staticUserGroup);\n    }\n  });\n\n  // 9.  FINLN DEDUPLIKACE - odstra duplicitn skupiny (ponech prvn vskyt)\n  const uniqueGroups = [];\n  const seenGroupNames = new Set();\n  \n  groups.forEach(group => {\n    if (!seenGroupNames.has(group.group)) {\n      seenGroupNames.add(group.group);\n      uniqueGroups.push(group);\n    } else {\n      console.warn(` Odstranna duplicitn skupina: \"${group.group}\"`);\n    }\n  });\n\n  return uniqueGroups;\n};\n\nexport default {\n  extractDocxFields,\n  getOrderFieldsForMapping,\n  generateFieldsFromApiData,\n  mapOrderToDocxFields,\n  validateDocxFile,\n  createEnhancedFieldMapping,\n  createFieldValuesFromMapping,\n  formatFieldValue\n};","/**\n * DOCX Field Processor - Nahrazen DOCVARIABLE/MERGEFIELD v DOCX\n * Pevzato z plugins/src/processDocx.js (odladn verze)\n * @date 2025-10-21\n */\n\nimport JSZip from \"jszip\";\n\n/**\n * Hlavn funkce pro zpracovn DOCX s generickmi poli\n * @param {File} file - DOCX soubor k zpracovn\n * @param {Object} fieldValues - Mapovn nzv pol na hodnoty, nap. { \"CENA\": \"150000\", \"DATUM\": \"2025-01-01\" }\n * @param {Boolean} keepEmptyFields - Pokud true, ponech pole bez hodnoty nezmnn\n * @returns {Promise<Object>} { blob, xml, stats: { replacedCount, skippedCount, totalFields } }\n */\nasync function processDocxWithFields({ file, fieldValues = {}, keepEmptyFields = false }) {\n  if (!file) return { xml: \"\", error: \"No file provided\" };\n\n  try {\n    const zip = new JSZip();\n    const content = await file.arrayBuffer();\n    const loadedZip = await zip.loadAsync(content);\n    let documentXml = await loadedZip.file(\"word/document.xml\").async(\"string\");\n\n    const parser = new window.DOMParser();\n    const serializer = new window.XMLSerializer();\n    const xmlDoc = parser.parseFromString(documentXml, \"application/xml\");\n\n    let replacedCount = 0;\n    let skippedCount = 0;\n\n    function processNode(node) {\n      if (!node || !node.childNodes) return;\n\n      let runs = [];\n      for (let i = 0; i < node.childNodes.length; i++) {\n        const n = node.childNodes[i];\n        if (n.nodeType === 1 && n.localName === \"r\") runs.push(n);\n      }\n\n      let i = 0;\n      while (i < runs.length) {\n        let beginIdx = -1, endIdx = -1, fieldName = null, instr = \"\";\n\n        // Najdi begin fldChar\n        for (let j = i; j < runs.length; j++) {\n          const r = runs[j];\n          for (let k = 0; k < r.childNodes.length; k++) {\n            const n = r.childNodes[k];\n            if (n.nodeType === 1 && n.localName === \"fldChar\") {\n              const typ = n.getAttribute(\"w:fldCharType\") || n.getAttribute(\"fldCharType\");\n              if (typ === \"begin\") {\n                beginIdx = j;\n                let foundEnd = false;\n\n                // Najdi instrText a end fldChar\n                for (let m = j + 1; m < runs.length; m++) {\n                  const r2 = runs[m];\n                  for (let n2 = 0; n2 < r2.childNodes.length; n2++) {\n                    const nInstr = r2.childNodes[n2];\n                    if (nInstr.nodeType === 1 && nInstr.localName === \"instrText\") {\n                      instr += nInstr.textContent;\n                    }\n                    if (nInstr.nodeType === 1 && nInstr.localName === \"fldChar\") {\n                      const typ2 = nInstr.getAttribute(\"w:fldCharType\") || nInstr.getAttribute(\"fldCharType\");\n                      if (typ2 === \"end\") {\n                        endIdx = m;\n                        foundEnd = true;\n                        break;\n                      }\n                    }\n                  }\n                  if (foundEnd) break;\n                }\n\n                // Parsuj nzev pole z instrText\n                //  Rozen regex - zachyt i speciln znaky: | . - /\n                const m = /(DOCVARIABLE|MERGEFIELD)\\s+([A-Z0-9_|.\\-/]+)/i.exec(instr.replace(/\\s+/g, \" \"));\n                if (m) {\n                  // OPRAVENO: Zachovej pvodn case z ablony msto pevodu na UPPERCASE\n                  fieldName = m[2].replace(/\\s+/g, \"\");\n                }\n                break;\n              }\n            }\n          }\n          if (beginIdx !== -1) break;\n        }\n\n        // Pokud jsme nali field (begin + end + nzev)\n        if (beginIdx !== -1 && endIdx !== -1 && fieldName) {\n          // OPRAVENO: Zkus hledat pole jak v pvodnm case, tak v uppercase, tak v lowercase\n          let val = fieldValues[fieldName] ||\n                   fieldValues[fieldName.toUpperCase()] ||\n                   fieldValues[fieldName.toLowerCase()];\n\n          // Debug vpis pouze pro prvn 3 pole nebo vznamn problmy\n          if (replacedCount + skippedCount < 3 || !val) {\n            console.log(` Zpracovvm pole: \"${fieldName}\", hodnota: \"${val || 'PRZDN'}\", dostupn varianty:`, {\n              original: !!fieldValues[fieldName],\n              uppercase: !!fieldValues[fieldName.toUpperCase()],\n              lowercase: !!fieldValues[fieldName.toLowerCase()],\n              hledaneVarianty: [fieldName, fieldName.toUpperCase(), fieldName.toLowerCase()]\n            });\n          }\n\n          // Rozhodnut: nahradit nebo ponechat?\n          if (!val || val.trim() === \"\") {\n            if (keepEmptyFields) {\n              // Zachovat pole beze zmny\n              if (replacedCount + skippedCount < 3) {\n                console.log(`   Ponechvm przdn pole: ${fieldName}`);\n              }\n              skippedCount++;\n              i = endIdx + 1;\n              continue;\n            }\n            // Jinak nahradit przdnm stringem\n          }\n\n          // Nahra field hodnotou\n          const firstR = runs[beginIdx];\n          while (firstR.firstChild) firstR.removeChild(firstR.firstChild);\n          const tNew = xmlDoc.createElementNS(firstR.namespaceURI, \"w:t\");\n          tNew.textContent = val || \"\";\n          firstR.appendChild(tNew);\n\n          // Odstra runs mezi begin a end\n          for (let del = endIdx; del > beginIdx; del--) {\n            node.removeChild(runs[del]);\n          }\n\n          if (replacedCount < 3 || val === \"\") {\n            console.log(`   Nahrazeno pole: ${fieldName} = \"${val || '(przdn)'}\"`);\n          }\n          replacedCount++;\n\n          // Refresh runs list\n          runs = Array.from(node.childNodes).filter(n => n.nodeType === 1 && n.localName === \"r\");\n          i = 0;\n          continue;\n        }\n\n        i++;\n      }\n\n      // Rekurzivn zpracuj potomky\n      for (let i = 0; i < node.childNodes.length; i++) {\n        processNode(node.childNodes[i]);\n      }\n    }\n\n    processNode(xmlDoc.documentElement);\n    documentXml = serializer.serializeToString(xmlDoc);\n\n    // Ulo zpt do ZIP\n    loadedZip.file(\"word/document.xml\", documentXml);\n    const newDocx = await loadedZip.generateAsync({ type: \"blob\" });\n\n    console.log(` DOCX zpracovn - FINLN STATISTIKY:`, {\n      nahrazeno: replacedCount,\n      ponechano: skippedCount,\n      celkemPoli: Object.keys(fieldValues).length,\n      dostupnaData: Object.keys(fieldValues).slice(0, 10),\n      uspesnost: `${replacedCount}/${replacedCount + skippedCount} pol`\n    });\n\n    return {\n      xml: documentXml,\n      blob: newDocx,\n      stats: { replacedCount, skippedCount, totalFields: Object.keys(fieldValues).length }\n    };\n  } catch (error) {\n    console.error(' Chyba pi zpracovn DOCX:', error);\n    return {\n      xml: \"\",\n      error: error.message\n    };\n  }\n}\n\n// Export as both named and default for flexibility\nexport { processDocxWithFields };\nexport default processDocxWithFields;\n","/**\n * Univerzln dialog pro editaci selnk\n * Dynamick formul podle konfigurace pole\n *\n * @author Frontend Team\n * @date 2025-10-19\n */\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { X, Save, AlertTriangle } from 'lucide-react';\nimport { CustomSelect } from '../CustomSelect';\n\n// =============================================================================\n// ANIMATIONS\n// =============================================================================\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst DialogOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst DialogContainer = styled.div`\n  background: white;\n  border-radius: 20px;\n  width: 100%;\n  max-width: ${props => props.$large ? '1000px' : '700px'};\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  animation: ${slideInUp} 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n`;\n\nconst DialogHeader = styled.div`\n  padding: 2rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst DialogTitle = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst DialogBody = styled.div`\n  padding: 2rem;\n  max-height: calc(90vh - 200px);\n  overflow-y: auto;\n`;\n\nconst DialogFooter = styled.div`\n  padding: 1.5rem 2rem;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  background: #f9fafb;\n`;\n\nconst FormRow = styled.div`\n  display: grid;\n  grid-template-columns: ${props => props.$columns || '1fr'};\n  gap: 1.5rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst FormGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\nconst Label = styled.label`\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #374151;\n`;\n\nconst RequiredStar = styled.span`\n  color: #dc2626;\n  margin-left: 0.25rem;\n`;\n\nconst Input = styled.input`\n  padding: 0.75rem;\n  border: 2px solid ${props => props.$hasError ? '#dc2626' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  background: ${props => props.$hasError ? '#fef2f2' : 'white'};\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.$hasError ? '#dc2626' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.$hasError ? 'rgba(220, 38, 38, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n`;\n\nconst TextArea = styled.textarea`\n  padding: 0.75rem;\n  border: 2px solid ${props => props.$hasError ? '#dc2626' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  min-height: 100px;\n  resize: vertical;\n  font-family: inherit;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.$hasError ? '#dc2626' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.$hasError ? 'rgba(220, 38, 38, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n`;\n\nconst CheckboxWrapper = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  cursor: pointer;\n  user-select: none;\n`;\n\nconst Checkbox = styled.input`\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n`;\n\nconst ErrorMessage = styled.div`\n  font-size: 0.875rem;\n  color: #dc2626;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0.25rem;\n`;\n\nconst Button = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PrimaryButton = styled(Button)`\n  background: #3b82f6;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n`;\n\nconst SecondaryButton = styled(Button)`\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n`;\n\n// =============================================================================\n// UNIVERZLN DIALOG KOMPONENTA\n// =============================================================================\n\n/**\n * Univerzln dialog pro vechny selnky\n *\n * @param {boolean} isOpen - Je dialog oteven?\n * @param {function} onClose - Callback pro zaven\n * @param {function} onSave - Callback pro uloen (async)\n * @param {object} editData - Data pro editaci (null = nov zznam)\n * @param {string} title - Nadpis dialogu\n * @param {React.Component} icon - Ikona v hlavice\n * @param {Array} fields - Konfigurace pol formule\n * @param {Array} selectOptions - Data pro selecty (nap. parent options)\n */\nconst UniversalDictionaryDialog = ({\n  isOpen,\n  onClose,\n  onSave,\n  editData = null,\n  title,\n  icon: Icon,\n  fields = [],\n  selectOptions = {},\n}) => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Inicializace formule\n  useEffect(() => {\n    if (isOpen) {\n      if (editData) {\n        // Pi editaci normalizuj checkbox hodnoty (1/0 -> true/false)\n        const normalized = { ...editData };\n        fields.forEach(field => {\n          if (field.type === 'checkbox' && normalized[field.name] !== undefined) {\n            normalized[field.name] = !!normalized[field.name];\n          }\n        });\n        setFormData(normalized);\n      } else {\n        // Nov zznam - inicializuj default hodnoty\n        const defaults = {};\n        fields.forEach(field => {\n          if (field.default !== undefined) {\n            defaults[field.name] = field.default;\n          } else if (field.type === 'checkbox') {\n            defaults[field.name] = true;\n          } else {\n            defaults[field.name] = '';\n          }\n        });\n        setFormData(defaults);\n      }\n      setErrors({});\n    }\n  }, [editData, isOpen, fields]);\n\n  // Validace\n  const validate = () => {\n    const newErrors = {};\n    fields.forEach(field => {\n      if (field.required) {\n        const value = formData[field.name];\n        if (value === undefined || value === null || (typeof value === 'string' && !value.trim())) {\n          newErrors[field.name] = field.errorMessage || `${field.label} je povinn pole`;\n        }\n      }\n      // Vlastn validace\n      if (field.validate && formData[field.name]) {\n        const validationError = field.validate(formData[field.name]);\n        if (validationError) {\n          newErrors[field.name] = validationError;\n        }\n      }\n    });\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Uloen\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validate()) return;\n\n    setIsSaving(true);\n    try {\n      await onSave(formData);\n      onClose();\n    } catch (error) {\n      setErrors({ submit: error.message || 'Chyba pi ukldn' });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Zmna hodnoty\n  const handleChange = (fieldName, value) => {\n    setFormData(prev => ({ ...prev, [fieldName]: value }));\n    // Vyisti chybu pro toto pole\n    if (errors[fieldName]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[fieldName];\n        return newErrors;\n      });\n    }\n  };\n\n  if (!isOpen) return null;\n\n  // Render pole\n  const renderField = (field) => {\n    const hasError = !!errors[field.name];\n\n    switch (field.type) {\n      case 'text':\n      case 'email':\n      case 'number':\n        return (\n          <Input\n            type={field.type}\n            value={formData[field.name] || ''}\n            onChange={(e) => handleChange(field.name, e.target.value)}\n            placeholder={field.placeholder}\n            $hasError={hasError}\n            disabled={field.disabled}\n          />\n        );\n\n      case 'textarea':\n        return (\n          <TextArea\n            value={formData[field.name] || ''}\n            onChange={(e) => handleChange(field.name, e.target.value)}\n            placeholder={field.placeholder}\n            $hasError={hasError}\n          />\n        );\n\n      case 'select':\n        return (\n          <CustomSelect\n            value={formData[field.name]}\n            onChange={(value) => handleChange(field.name, value)}\n            options={selectOptions[field.name] || []}\n            placeholder={field.placeholder}\n            hasError={hasError}\n          />\n        );\n\n      case 'checkbox':\n        return (\n          <CheckboxWrapper>\n            <Checkbox\n              type=\"checkbox\"\n              checked={!!formData[field.name]}\n              onChange={(e) => handleChange(field.name, e.target.checked)}\n            />\n            <span>{field.checkboxLabel || field.label}</span>\n          </CheckboxWrapper>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return ReactDOM.createPortal(\n    <DialogOverlay onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <DialogContainer onClick={(e) => e.stopPropagation()} $large={fields.length > 6}>\n        <DialogHeader>\n          <DialogTitle>\n            {Icon && <Icon size={28} />}\n            {title}\n          </DialogTitle>\n          <CloseButton onClick={onClose}>\n            <X size={20} color=\"white\" />\n          </CloseButton>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit}>\n          <DialogBody>\n            {fields.reduce((rows, field, index) => {\n              if (field.row !== undefined) {\n                if (!rows[field.row]) rows[field.row] = [];\n                rows[field.row].push(field);\n              } else {\n                // Auto layout - 2 fieldy vedle sebe pokud je to text/email, jinak samostatn\n                const rowIndex = Math.floor(index / (field.type === 'textarea' ? 1 : 2));\n                if (!rows[rowIndex]) rows[rowIndex] = [];\n                rows[rowIndex].push(field);\n              }\n              return rows;\n            }, []).map((rowFields, rowIndex) => (\n              <FormRow key={rowIndex} $columns={rowFields.length === 1 ? '1fr' : '1fr 1fr'}>\n                {rowFields.map(field => (\n                  <FormGroup key={field.name}>\n                    <Label>\n                      {field.label}\n                      {field.required && <RequiredStar>*</RequiredStar>}\n                    </Label>\n                    {renderField(field)}\n                    {errors[field.name] && (\n                      <ErrorMessage>\n                        <AlertTriangle size={16} />\n                        {errors[field.name]}\n                      </ErrorMessage>\n                    )}\n                  </FormGroup>\n                ))}\n              </FormRow>\n            ))}\n\n            {errors.submit && (\n              <ErrorMessage>\n                <AlertTriangle size={16} />\n                {errors.submit}\n              </ErrorMessage>\n            )}\n          </DialogBody>\n\n          <DialogFooter>\n            <SecondaryButton type=\"button\" onClick={onClose}>\n              <X size={16} />\n              Zruit\n            </SecondaryButton>\n            <PrimaryButton type=\"submit\" disabled={isSaving}>\n              <Save size={16} />\n              {isSaving ? 'Ukldm...' : 'Uloit'}\n            </PrimaryButton>\n          </DialogFooter>\n        </form>\n      </DialogContainer>\n    </DialogOverlay>,\n    document.body\n  );\n};\n\nexport default UniversalDictionaryDialog;\n","/**\n * Konfirman dialog pro smazn zznam\n * Jednoduch dialog pro potvrzen nebezpench akc\n *\n * @author Frontend Team\n * @date 2025-10-19\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { AlertTriangle, X, Trash2 } from 'lucide-react';\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\nconst DialogOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99999;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst DialogContainer = styled.div`\n  background: white;\n  border-radius: 16px;\n  width: 90%;\n  max-width: 450px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  animation: ${slideInUp} 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n`;\n\nconst DialogHeader = styled.div`\n  padding: 1.5rem 1.5rem 1rem 1.5rem;\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n`;\n\nconst IconWrapper = styled.div`\n  background: #fee2e2;\n  border-radius: 12px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n\n  svg {\n    color: #dc2626;\n  }\n`;\n\nconst HeaderContent = styled.div`\n  flex: 1;\n`;\n\nconst DialogTitle = styled.h3`\n  margin: 0 0 0.5rem 0;\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #1f2937;\n`;\n\nconst DialogMessage = styled.p`\n  margin: 0;\n  font-size: 0.875rem;\n  color: #6b7280;\n  line-height: 1.5;\n`;\n\nconst DialogFooter = styled.div`\n  padding: 1rem 1.5rem 1.5rem 1.5rem;\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n`;\n\nconst Button = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst CancelButton = styled(Button)`\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n`;\n\nconst DangerButton = styled(Button)`\n  background: #dc2626;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #b91c1c;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n  }\n`;\n\n/**\n * Konfirman dialog\n *\n * @param {boolean} isOpen - Je oteven?\n * @param {function} onClose - Callback pro zaven\n * @param {function} onConfirm - Callback pro potvrzen\n * @param {string} title - Nadpis\n * @param {string} message - Zprva\n * @param {string} confirmText - Text tlatka potvrzen\n * @param {boolean} loading - Probh akce?\n */\nconst DictionaryConfirmDialog = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title = 'Potvrdit akci',\n  message = 'Opravdu chcete provst tuto akci?',\n  confirmText = 'Potvrdit',\n  loading = false,\n}) => {\n  if (!isOpen) return null;\n\n  const handleConfirm = async () => {\n    await onConfirm();\n    onClose();\n  };\n\n  return ReactDOM.createPortal(\n    <DialogOverlay onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <DialogContainer onClick={(e) => e.stopPropagation()}>\n        <DialogHeader>\n          <IconWrapper>\n            <AlertTriangle size={24} />\n          </IconWrapper>\n          <HeaderContent>\n            <DialogTitle>{title}</DialogTitle>\n            <DialogMessage>{message}</DialogMessage>\n          </HeaderContent>\n        </DialogHeader>\n\n        <DialogFooter>\n          <CancelButton onClick={onClose} disabled={loading}>\n            <X size={16} />\n            Zruit\n          </CancelButton>\n          <DangerButton onClick={handleConfirm} disabled={loading}>\n            <Trash2 size={16} />\n            {loading ? 'Probh...' : confirmText}\n          </DangerButton>\n        </DialogFooter>\n      </DialogContainer>\n    </DialogOverlay>,\n    document.body\n  );\n};\n\nexport default DictionaryConfirmDialog;\n","/**\n * Lokality Tab - Sprva lokalit s TanStack Table\n * DB 25_lokality: id, nazev, typ (enum), parent_id, aktivni (tinyint)\n * Hierarchick selnk okres a stanovi s ikonovm filtrem aktivn\n * @date 2025-10-23\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faSearch, faEdit, faTrash, faChevronUp, faChevronDown, faCheckCircle, faTimesCircle, faTimes, faEraser, faBolt } from '@fortawesome/free-solid-svg-icons';\nimport { MapPin, Users } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getLokalityList,\n  createLokalita,\n  updateLokalita,\n  deleteLokalita,\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS - podle vzoru Users.js\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: ${props => props.$primary ? '#2563eb' : '#2563eb'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: ${props => props.$isFirstColumn ? 'flex-start' : 'center'};\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst PageInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnFilter = styled(ColumnFilterInput)``;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst TypeBadge = styled.span`\n  padding: 0.25rem 0.75rem;\n  background: ${props => props.$type === 'vnitrni' ? '#dbeafe' : props.$type === 'vnejsi' ? '#fef3c7' : '#e5e7eb'};\n  color: ${props => props.$type === 'vnitrni' ? '#1e40af' : props.$type === 'vnejsi' ? '#92400e' : '#374151'};\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: normal;\n`;\n\nconst Badge = styled.span`\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 2rem;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n`;\n\nconst LokalityTab = () => {\n  const { token, user, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // Helper functions for user-specific localStorage\n  const user_id = userDetail?.user_id;\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby zpisu\n    }\n  };\n\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('lokality_globalFilter', '');\n  });\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('lokality_aktivniFilter', 'all');\n  });\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('lokality_columnFilters', {});\n  });\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('lokality_sorting', []);\n  });\n  const [pageSize, setPageSize] = useState(() => {\n    return getUserStorage('lokality_pageSize', 25);\n  });\n  const [pageIndex, setPageIndex] = useState(() => {\n    return getUserStorage('lokality_pageIndex', 0);\n  });\n\n  const [editDialog, setEditDialog] = useState({ open: false, item: null });\n  const [deleteDialog, setDeleteDialog] = useState({ open: false, item: null });\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('lokality');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn lokalit', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      if (cache.lokality?.loaded && cache.lokality.data) {\n        setData(cache.lokality.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    }\n  }, [token, user?.username, cache.lokality?.loaded]);\n\n  // Save filters to localStorage when they change\n  useEffect(() => {\n    setUserStorage('lokality_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('lokality_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('lokality_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('lokality_sorting', sorting);\n  }, [sorting, user_id]);\n\n  useEffect(() => {\n    setUserStorage('lokality_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('lokality_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============= FILTERED DATA =============\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      // Icon filtr - aktivn/neaktivn\n      // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n      const isAktivni = item.aktivni === 1 || item.aktivni === true || item.aktivni === \"1\";\n\n      if (aktivniFilter === 'aktivni' && !isAktivni) return false;\n      if (aktivniFilter === 'neaktivni' && isAktivni) return false;\n\n      // Column filters - textov\n      if (columnFilters.nazev &&\n          !(item.nazev || '').toLowerCase().includes(columnFilters.nazev.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.typ &&\n          !(item.typ || '').toLowerCase().includes(columnFilters.typ.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.parent_id && item.parent_id) {\n        const parent = data.find(p => p.id === item.parent_id);\n        const parentName = parent ? parent.nazev : '';\n        if (!parentName.toLowerCase().includes(columnFilters.parent_id.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Filtr potu uivatel (seln)\n      if (columnFilters.pocet_uzivatelu &&\n          item.pocet_uzivatelu !== undefined &&\n          !item.pocet_uzivatelu.toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, aktivniFilter, columnFilters]);\n\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'nazev',\n      header: 'Nzev lokality',\n      enableSorting: true,\n      cell: ({ getValue, row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem', textAlign: 'left' }}>\n          <MapPin size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n          <strong>\n            {getValue()}\n            {row.original.id && (\n              <sup style={{\n                fontSize: '0.6rem',\n                color: '#9ca3af',\n                fontWeight: 'normal',\n                marginLeft: '4px'\n              }}>\n                #{row.original.id}\n              </sup>\n            )}\n          </strong>\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'parent_id',\n      header: 'Nadazen lokalita',\n      enableSorting: true,\n      cell: ({ getValue }) => {\n        const parentId = getValue();\n        if (!parentId) return <div style={{ textAlign: 'left' }}><span style={{ color: '#9ca3af' }}></span></div>;\n        const parent = data.find(item => item.id === parentId);\n        return <div style={{ textAlign: 'left' }}>{parent ? parent.nazev : `ID: ${parentId}`}</div>;\n      },\n    },\n    {\n      accessorKey: 'typ',\n      header: 'Typ lokality',\n      enableSorting: true,\n      cell: ({ getValue }) => {\n        const typ = getValue();\n        return <Badge>{typ || 'Neznm'}</Badge>;\n      },\n    },\n    {\n      accessorKey: 'pocet_uzivatelu',\n      header: 'Poet uivatel',\n      enableSorting: true,\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          {row.original.pocet_uzivatelu !== undefined ? (\n            <UserCountBadge\n              title={`${row.original.pocet_uzivatelu} ${row.original.pocet_uzivatelu === 1 ? 'uivatel m' : 'uivatel m'} tuto lokalitu`}\n            >\n              <Users size={12} />\n              {row.original.pocet_uzivatelu}\n            </UserCountBadge>\n          ) : (\n            <span style={{ color: '#9ca3af' }}></span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      enableSorting: true,\n      cell: ({ row }) => {\n        // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n        const isAktivni = row.original.aktivni === 1 || row.original.aktivni === true || row.original.aktivni === \"1\";\n        return (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{\n                color: isAktivni ? '#22c55e' : '#ef4444',\n                fontSize: '18px'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      size: 120,\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => setEditDialog({ open: true, item: row.original })}\n            title=\"Upravit\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => setDeleteDialog({ open: true, item: row.original })}\n            title=\"Smazat\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      ),\n    },\n  ], [data]);\n\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      globalFilter,\n      sorting,\n      pagination: { pageSize, pageIndex },\n    },\n    onGlobalFilterChange: setGlobalFilter,\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n  });\n\n  // Pagination navigation helpers\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  const handleCreate = async (formData) => {\n    try {\n      await createLokalita({\n        token,\n        username: user?.username,\n        ...formData,\n      });\n      showToast?.('Lokalita vytvoena', { type: 'success' });\n      invalidateCache('lokality');\n      fetchData();\n      setEditDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi vytven', { type: 'error' });\n      throw error;\n    }\n  };\n\n  const handleUpdate = async (formData) => {\n    try {\n      await updateLokalita({\n        token,\n        username: user?.username,\n        id: editDialog.item.id,\n        ...formData,\n      });\n      showToast?.('Lokalita aktualizovna', { type: 'success' });\n      invalidateCache('lokality');\n      fetchData();\n      setEditDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi aktualizaci', { type: 'error' });\n      throw error;\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await deleteLokalita({\n        token,\n        username: user?.username,\n        id: deleteDialog.item.id,\n      });\n      showToast?.('Lokalita smazna', { type: 'success' });\n      invalidateCache('lokality');\n      fetchData();\n      setDeleteDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi mazn', { type: 'error' });\n      throw error;\n    }\n  };\n\n  // ============= HANDLERS =============\n  const handleAktivniFilterClick = () => {\n    setAktivniFilter(prev => {\n      if (prev === 'all') return 'aktivni';\n      if (prev === 'aktivni') return 'neaktivni';\n      return 'all';\n    });\n  };\n\n  const handleClearFilters = () => {\n    setGlobalFilter('');\n    setAktivniFilter('all');\n    setColumnFilters({});\n  };\n\n  const dialogFields = [\n    {\n      name: 'nazev',\n      label: 'Nzev',\n      type: 'text',\n      required: true,\n      placeholder: 'Nzev lokality',\n    },\n    {\n      name: 'typ',\n      label: 'Typ',\n      type: 'select',\n      required: true,\n      options: [\n        { value: 'vnitrni', label: 'Vnitn' },\n        { value: 'vnejsi', label: 'Vnj' },\n      ],\n    },\n    {\n      name: 'parent_id',\n      label: 'Nadazen lokalita',\n      type: 'select',\n      options: [\n        { value: null, label: 'dn (koen)' },\n        ...data.map(item => ({ value: item.id, label: item.nazev })),\n      ],\n    },\n  ];\n\n  return (\n    <Container>\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Hledat v lokalitch...\"\n            value={globalFilter ?? ''}\n            onChange={e => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton\n          $primary\n          onClick={() => setEditDialog({ open: true, item: null })}\n        >\n          <FontAwesomeIcon icon={faPlus} />\n          Nov lokalita\n        </ActionButton>\n      </ActionBar>\n\n      <TableContainer>\n        <Table>\n          <tbody>\n            <TableHeaderRow>\n              {table.getHeaderGroups()[0].headers.map((header, headerIndex) => (\n                <TableHeaderCell\n                  key={header.id}\n                  style={{\n                    width: header.id === 'typ' ? '140px' :\n                           header.id === 'pocet_uzivatelu' ? '140px' :\n                           header.id === 'aktivni' ? '90px' :\n                           header.id === 'actions' ? '90px' : 'auto',\n                    maxWidth: header.id === 'typ' ? '140px' :\n                              header.id === 'pocet_uzivatelu' ? '140px' :\n                              header.id === 'aktivni' ? '90px' :\n                              header.id === 'actions' ? '90px' : 'none',\n                    ...(headerIndex === 0 && { textAlign: 'left' })\n                  }}\n                >\n                  <HeaderContent\n                    $isFirstColumn={headerIndex === 0}\n                    onClick={header.column.getCanSort() ? header.column.getToggleSortingHandler() : undefined}\n                    style={{ cursor: header.column.getCanSort() ? 'pointer' : 'default' }}\n                  >\n                    <span>\n                      {flexRender(header.column.columnDef.header, header.getContext())}\n                    </span>\n                    {header.column.getCanSort() && header.column.getIsSorted() && (\n                      <FontAwesomeIcon\n                        icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                        style={{ marginLeft: '0.5rem', fontSize: '0.75rem' }}\n                      />\n                    )}\n                  </HeaderContent>\n                </TableHeaderCell>\n              ))}\n            </TableHeaderRow>\n\n            <TableHeaderFilterRow>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Hledat nzev...\"\n                    value={columnFilters.nazev || ''}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, nazev: e.target.value}))}\n                  />\n                  {columnFilters.nazev && (\n                    <ColumnClearButton\n                      onClick={() => setColumnFilters(prev => {\n                        const { nazev, ...rest } = prev;\n                        return rest;\n                      })}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Nadazen...\"\n                    value={columnFilters.parent_id || ''}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, parent_id: e.target.value}))}\n                  />\n                  {columnFilters.parent_id && (\n                    <ColumnClearButton\n                      onClick={() => setColumnFilters(prev => {\n                        const { parent_id, ...rest } = prev;\n                        return rest;\n                      })}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell style={{ width: '140px', maxWidth: '140px' }}>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Typ...\"\n                    value={columnFilters.typ || ''}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, typ: e.target.value}))}\n                  />\n                  {columnFilters.typ && (\n                    <ColumnClearButton\n                      onClick={() => setColumnFilters(prev => {\n                        const { typ, ...rest } = prev;\n                        return rest;\n                      })}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"number\"\n                    placeholder=\"Poet...\"\n                    value={columnFilters.pocet_uzivatelu || ''}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, pocet_uzivatelu: e.target.value}))}\n                  />\n                  {columnFilters.pocet_uzivatelu && (\n                    <ColumnClearButton\n                      onClick={() => setColumnFilters(prev => {\n                        const { pocet_uzivatelu, ...rest } = prev;\n                        return rest;\n                      })}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell style={{ width: '90px', maxWidth: '90px' }}>\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                  <IconFilterButton\n                    onClick={handleAktivniFilterClick}\n                    title={\n                      aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                      aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                      'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                    }\n                  >\n                    {aktivniFilter === 'all' ? (\n                      <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                        <FontAwesomeIcon\n                          icon={faCheckCircle}\n                          style={{\n                            position: 'absolute',\n                            left: 0,\n                            top: 0,\n                            clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                            color: '#16a34a'\n                          }}\n                        />\n                        <FontAwesomeIcon\n                          icon={faTimesCircle}\n                          style={{\n                            position: 'absolute',\n                            left: 0,\n                            top: 0,\n                            clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                            color: '#dc2626'\n                          }}\n                        />\n                      </div>\n                    ) : aktivniFilter === 'aktivni' ? (\n                      <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                    ) : (\n                      <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                    )}\n                  </IconFilterButton>\n                </div>\n              </TableHeaderCell>\n              <TableHeaderCell style={{ width: '90px', maxWidth: '90px' }}>\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                  <FilterActionButton\n                    onClick={handleClearFilters}\n                    title=\"Vymazat vechny filtry\"\n                    disabled={Object.keys(columnFilters).length === 0 && aktivniFilter === 'all'}\n                  >\n                    <FontAwesomeIcon icon={faEraser} />\n                  </FilterActionButton>\n                </div>\n              </TableHeaderCell>\n            </TableHeaderFilterRow>\n\n            {table.getRowModel().rows.length === 0 ? (\n              <tr>\n                <TableCell colSpan={columns.length}>\n                  <EmptyState>\n                    <MapPin size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                    <h3>{data.length === 0 ? 'dn lokality' : 'Nenalezeny dn lokality'}</h3>\n                    <p>{data.length === 0 ? 'Nejsou k dispozici dn lokality' : 'Zkuste zmnit vyhledvn nebo filtry'}</p>\n                  </EmptyState>\n                </TableCell>\n              </tr>\n            ) : (\n              table.getRowModel().rows.map((row, idx) => (\n                <TableRow key={row.id} $isEven={idx % 2 === 0}>\n                  {row.getVisibleCells().map((cell, cellIndex) => (\n                    <TableCell\n                      key={cell.id}\n                      style={{\n                        width: cell.column.id === 'typ' ? '140px' :\n                               cell.column.id === 'aktivni' ? '90px' :\n                               cell.column.id === 'actions' ? '90px' : 'auto',\n                        maxWidth: cell.column.id === 'typ' ? '140px' :\n                                  cell.column.id === 'aktivni' ? '90px' :\n                                  cell.column.id === 'actions' ? '90px' : 'none',\n                        ...(cellIndex === 0 && { textAlign: 'left' })\n                      }}\n                    >\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            )}\n          </tbody>\n        </Table>\n\n        <Pagination>\n          <PageInfo>\n            Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} lokalit\n          </PageInfo>\n\n          <PaginationButtons>\n            <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n              Zobrazit:\n            </span>\n            <PageSizeSelect\n              value={pageSize}\n              onChange={(e) => {\n                const newSize = Number(e.target.value);\n                setPageSize(newSize);\n                setPageIndex(0);\n              }}\n            >\n              <option value=\"10\">10</option>\n              <option value=\"25\">25</option>\n              <option value=\"50\">50</option>\n              <option value=\"100\">100</option>\n              <option value=\"250\">250</option>\n              <option value=\"500\">500</option>\n            </PageSizeSelect>\n\n            <PageButton\n              onClick={goToFirstPage}\n              disabled={pageIndex === 0}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToPreviousPage}\n              disabled={pageIndex === 0}\n            >\n              \n            </PageButton>\n\n            <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n              Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n            </span>\n\n            <PageButton\n              onClick={goToNextPage}\n              disabled={pageIndex >= table.getPageCount() - 1}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToLastPage}\n              disabled={pageIndex >= table.getPageCount() - 1}\n            >\n              \n            </PageButton>\n          </PaginationButtons>\n        </Pagination>\n      </TableContainer>\n\n      {editDialog.open && (\n        <UniversalDictionaryDialog\n          title={editDialog.item ? 'Upravit lokalitu' : 'Nov lokalita'}\n          fields={dialogFields}\n          initialData={editDialog.item}\n          onSave={editDialog.item ? handleUpdate : handleCreate}\n          onClose={() => setEditDialog({ open: false, item: null })}\n        />\n      )}\n\n      {deleteDialog.open && (\n        <DictionaryConfirmDialog\n          title=\"Smazat lokalitu\"\n          message={\n            <>\n              <p>Opravdu chcete smazat lokalitu <strong>{deleteDialog.item?.nazev}</strong>?</p>\n              <p style={{ color: '#ef4444', fontWeight: 600 }}> POZOR: Zznam bude trvale odstrann z databze!</p>\n            </>\n          }\n          onConfirm={handleDelete}\n          onCancel={() => setDeleteDialog({ open: false, item: null })}\n          confirmText=\"Smazat\"\n          cancelText=\"Zruit\"\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default LokalityTab;\n","/**\n * Pozice Tab - Sprva pozic s TanStack Table\n *\n * DB: id, nazev_pozice, parent_id, usek_zkr, usek_nazev, usek_popis, aktivni\n * API: /ciselniky/pozice/list|by-id|insert|update|delete\n *\n * Features:\n * - TanStack Table s azenm\n * - Globln fulltextov vyhledvn\n * - Sloupcov textov filtry\n * - Icon filtr pro aktivn/neaktivn\n * - localStorage perzistence filtr\n * - ID jako superscript\n * - CRUD operace (Create, Update, Delete)\n * - sek zobrazen jako: usek_zkr - usek_nazev + usek_popis (2 dky)\n *\n * @date 2025-10-23\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlus, faSearch, faEdit, faTrash,\n  faChevronUp, faChevronDown, faTimes,\n  faCheckCircle, faTimesCircle, faBolt, faSyncAlt, faEraser\n} from '@fortawesome/free-solid-svg-icons';\nimport { Briefcase, Users } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getPoziceList,\n  createPozice,\n  updatePozice,\n  deletePozice,\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst TableHeaderFilterCell = styled.th`\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled(TableCell)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\n// Column filter components\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.span`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n`;\n\nconst EmptyState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nconst PoziceTab = () => {\n  const { token, user, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // ============= LOCALSTORAGE HELPERS =============\n  const user_id = userDetail?.user_id;\n\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby\n    }\n  };\n\n  // ============= STATE =============\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('pozice_globalFilter', '');\n  });\n\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('pozice_columnFilters', {});\n  });\n\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('pozice_aktivniFilter', 'all');\n  });\n\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('pozice_sorting', []);\n  });\n\n  const [pageSize, setPageSize] = useState(() => {\n    return getUserStorage('pozice_pageSize', 25);\n  });\n\n  const [pageIndex, setPageIndex] = useState(() => {\n    return getUserStorage('pozice_pageIndex', 0);\n  });\n\n  // Dialog state\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState('create');\n  const [editingItem, setEditingItem] = useState(null);\n\n  // Confirm dialog state\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\n  const [deletingItem, setDeletingItem] = useState(null);\n\n  // ============= SAVE TO LOCALSTORAGE =============\n  useEffect(() => {\n    setUserStorage('pozice_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('pozice_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('pozice_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('pozice_sorting', sorting);\n  }, [sorting, user_id]);\n\n  useEffect(() => {\n    setUserStorage('pozice_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('pozice_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============= DATA FETCHING =============\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('pozice');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn pozic', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      if (cache.pozice?.loaded && cache.pozice.data) {\n        setData(cache.pozice.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    } else {\n    }\n  }, [token, user?.username, cache.pozice?.loaded]);\n\n  // ============= FILTERED DATA =============\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      // Icon filtr - aktivn/neaktivn\n      // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n      const isAktivni = item.aktivni === 1 || item.aktivni === true || item.aktivni === \"1\";\n\n      if (aktivniFilter === 'aktivni' && !isAktivni) return false;\n      if (aktivniFilter === 'neaktivni' && isAktivni) return false;\n\n      // Global filter\n      if (globalFilter) {\n        const searchLower = globalFilter.toLowerCase();\n        const usekText = (item.usek_zkr || '') + ' ' + (item.usek_nazev || '') + ' ' + (item.usek_popis || '');\n        const matchGlobal =\n          (item.nazev_pozice || '').toLowerCase().includes(searchLower) ||\n          usekText.toLowerCase().includes(searchLower) ||\n          (item.id || '').toString().toLowerCase().includes(searchLower);\n\n        if (!matchGlobal) return false;\n      }\n\n      // Column filters - textov\n      if (columnFilters.nazev_pozice &&\n          !(item.nazev_pozice || '').toLowerCase().includes(columnFilters.nazev_pozice.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.usek) {\n        const usekText = (item.usek_zkr || '') + ' ' + (item.usek_nazev || '') + ' ' + (item.usek_popis || '');\n        if (!usekText.toLowerCase().includes(columnFilters.usek.toLowerCase())) {\n          return false;\n        }\n      }\n\n      if (columnFilters.parent_id && item.parent_id) {\n        const parent = data.find(p => p.id === item.parent_id);\n        const parentName = parent ? parent.nazev_pozice : '';\n        if (!parentName.toLowerCase().includes(columnFilters.parent_id.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Filtr potu uivatel (seln)\n      if (columnFilters.pocet_uzivatelu &&\n          item.pocet_uzivatelu !== undefined &&\n          !item.pocet_uzivatelu.toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, globalFilter, columnFilters, aktivniFilter]);\n\n  // ============= PARENT NAME HELPER =============\n  const getParentName = (parentId) => {\n    if (!parentId) return '-';\n    const parent = data.find(p => p.id === parentId);\n    return parent ? parent.nazev_pozice : `ID: ${parentId}`;\n  };\n\n  // ============= COLUMNS DEFINITION =============\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'nazev_pozice',\n      header: 'Nzev pozice',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem' }}>\n          <Briefcase size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n          <span style={{ fontWeight: '600' }}>\n            {row.original.nazev_pozice}\n            <sup style={{\n              fontSize: '0.65em',\n              opacity: 0.6,\n              marginLeft: '0.25rem',\n              color: '#6b7280',\n              fontWeight: 'normal'\n            }}>\n              #{row.original.id}\n            </sup>\n          </span>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'usek',\n      header: 'sek',\n      cell: ({ row }) => {\n        const usekZkr = row.original.usek_zkr || '';\n        const usekNazev = row.original.usek_nazev || '';\n        const usekPopis = row.original.usek_popis || '';\n\n        if (!usekZkr && !usekNazev && !usekPopis) {\n          return <span style={{ color: '#9ca3af' }}>-</span>;\n        }\n\n        return (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.25rem' }}>\n            {(usekZkr || usekNazev) && (\n              <div style={{ color: '#374151' }}>\n                {usekZkr && usekNazev ? `${usekZkr} - ${usekNazev}` : (usekZkr || usekNazev)}\n              </div>\n            )}\n            {usekPopis && (\n              <div style={{ fontSize: '0.875rem', color: '#6b7280' }}>\n                {usekPopis}\n              </div>\n            )}\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'parent_id',\n      header: 'Nadazen pozice',\n      cell: ({ row }) => (\n        <span style={{ color: row.original.parent_id ? '#374151' : '#9ca3af' }}>\n          {getParentName(row.original.parent_id)}\n        </span>\n      )\n    },\n    {\n      accessorKey: 'pocet_uzivatelu',\n      header: 'Poet uivatel',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          {row.original.pocet_uzivatelu !== undefined ? (\n            <UserCountBadge\n              title={`${row.original.pocet_uzivatelu} ${row.original.pocet_uzivatelu === 1 ? 'uivatel m' : 'uivatel m'} tuto pozici`}\n            >\n              <Users size={12} />\n              {row.original.pocet_uzivatelu}\n            </UserCountBadge>\n          ) : (\n            <span style={{ color: '#9ca3af' }}></span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      cell: ({ row }) => {\n        // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n        const isAktivni = row.original.aktivni === 1 || row.original.aktivni === true || row.original.aktivni === \"1\";\n        return (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{\n                color: isAktivni ? '#22c55e' : '#ef4444',\n                fontSize: '18px'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => handleEdit(row.original)}\n            title=\"Upravit pozici\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => handleDeleteClick(row.original)}\n            title=\"Smazat pozici\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      )\n    }\n  ], [data]);\n\n  // ============= TABLE INSTANCE =============\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      sorting,\n      pagination: { pageIndex, pageSize },\n    },\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    manualPagination: false,\n  });\n\n  // ============= HANDLERS =============\n  const handleCreate = () => {\n    setDialogMode('create');\n    setEditingItem(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (item) => {\n    setDialogMode('edit');\n    setEditingItem(item);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteClick = (item) => {\n    setDeletingItem(item);\n    setIsConfirmOpen(true);\n  };\n\n  const handleSave = async (formData) => {\n    try {\n      if (dialogMode === 'create') {\n        await createPozice({\n          token,\n          username: user.username,\n          ...formData\n        });\n        showToast('Pozice byla vytvoena', 'success');\n        invalidateCache('pozice');\n        fetchData();\n        setIsDialogOpen(false);\n      } else {\n        await updatePozice({\n          token,\n          username: user.username,\n          id: editingItem.id,\n          ...formData\n        });\n        showToast('Pozice byla aktualizovna', 'success');\n        invalidateCache('pozice');\n        fetchData();\n        setIsDialogOpen(false);\n      }\n    } catch (error) {\n      showToast(error.message || 'Chyba pi ukldn pozice', 'error');\n    }\n  };\n  const handleConfirmDelete = async () => {\n    try {\n      await deletePozice({\n        token,\n        username: user.username,\n        id: deletingItem.id\n      });\n      showToast('Pozice byla smazna', 'success');\n      invalidateCache('pozice');\n      fetchData();\n      setIsConfirmOpen(false);\n      setDeletingItem(null);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi mazn pozice', 'error');\n    }\n  };\n\n  // ============= PAGINATION HANDLERS =============\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  const handleAktivniFilterClick = () => {\n    setAktivniFilter(prev => {\n      if (prev === 'all') return 'aktivni';\n      if (prev === 'aktivni') return 'neaktivni';\n      return 'all';\n    });\n  };\n\n  const handleClearFilters = () => {\n    setColumnFilters({});\n    setAktivniFilter('all');\n  };\n\n  // ============= DIALOG FIELDS =============\n  const dialogFields = [\n    {\n      name: 'nazev_pozice',\n      label: 'Nzev pozice',\n      type: 'text',\n      required: true,\n      placeholder: 'Zadejte nzev pozice'\n    },\n    {\n      name: 'parent_id',\n      label: 'Nadazen pozice',\n      type: 'select',\n      required: false,\n      options: [\n        { value: '', label: 'dn (root)' },\n        ...data.map(p => ({ value: p.id, label: p.nazev_pozice }))\n      ]\n    },\n    {\n      name: 'popis',\n      label: 'Popis',\n      type: 'textarea',\n      required: false,\n      placeholder: 'Zadejte popis pozice (voliteln)'\n    },\n    {\n      name: 'aktivni',\n      label: 'Aktivn',\n      type: 'checkbox',\n      required: false\n    }\n  ];\n\n  // ============= RENDER =============\n  if (loading) {\n    return (\n      <Container>\n        <LoadingOverlay>\n          <FontAwesomeIcon icon={faSyncAlt} spin size=\"2x\" />\n          <div style={{ marginTop: '1rem' }}>Natm pozice...</div>\n        </LoadingOverlay>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      {/* Action Bar */}\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Vyhledat v pozicch...\"\n            value={globalFilter}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton $primary onClick={handleCreate}>\n          <FontAwesomeIcon icon={faPlus} />\n          Nov pozice\n        </ActionButton>\n      </ActionBar>\n\n      {/* Table */}\n      <TableContainer>\n        <Table>\n          <tbody>\n            {/* Prvn dek - nzvy sloupc s azenm */}\n            <TableHeaderRow>\n              {table.getHeaderGroups()[0].headers.map(header => (\n                <TableHeaderCell key={header.id}>\n                  {header.id !== 'actions' ? (\n                    <HeaderContent\n                      onClick={header.column.getToggleSortingHandler()}\n                      style={{ cursor: 'pointer' }}\n                    >\n                      <span>\n                        {flexRender(header.column.columnDef.header, header.getContext())}\n                      </span>\n                      {header.column.getIsSorted() && (\n                        <FontAwesomeIcon\n                          icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                          style={{ marginLeft: '0.5rem', fontSize: '0.75rem' }}\n                        />\n                      )}\n                    </HeaderContent>\n                  ) : (\n                    <div style={{ textAlign: 'center' }}>\n                      {flexRender(header.column.columnDef.header, header.getContext())}\n                    </div>\n                  )}\n                </TableHeaderCell>\n              ))}\n            </TableHeaderRow>\n\n            {/* Druh dek - filtry */}\n            <TableHeaderFilterRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderFilterCell key={header.id}>\n                      {header.id === 'nazev_pozice' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Hledat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                              title=\"Vymazat\"\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'usek' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Hledat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                              title=\"Vymazat\"\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'parent_id' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Hledat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                              title=\"Vymazat\"\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'pocet_uzivatelu' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"number\"\n                            placeholder=\"Poet...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                              title=\"Vymazat\"\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'aktivni' && (\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                          <IconFilterButton\n                            onClick={handleAktivniFilterClick}\n                            title={\n                              aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                              aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                              'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                            }\n                          >\n                            {aktivniFilter === 'all' ? (\n                              <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                                <FontAwesomeIcon\n                                  icon={faCheckCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                    color: '#16a34a'\n                                  }}\n                                />\n                                <FontAwesomeIcon\n                                  icon={faTimesCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                    color: '#dc2626'\n                                  }}\n                                />\n                              </div>\n                            ) : aktivniFilter === 'aktivni' ? (\n                              <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                            ) : (\n                              <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                            )}\n                          </IconFilterButton>\n                        </div>\n                      )}\n\n                      {header.id === 'actions' && (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <FilterActionButton\n                            onClick={handleClearFilters}\n                            title=\"Vymazat vechny filtry sloupc\"\n                            disabled={\n                              Object.keys(columnFilters).length === 0 &&\n                              aktivniFilter === 'all'\n                            }\n                          >\n                            <FontAwesomeIcon icon={faEraser} />\n                          </FilterActionButton>\n                        </div>\n                      )}\n                    </TableHeaderFilterCell>\n                  ))}\n                </TableHeaderFilterRow>\n\n              {table.getRowModel().rows.length === 0 ? (\n                <tr>\n                  <TableCell colSpan={columns.length}>\n                    <EmptyState>\n                      <Briefcase size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                      <h3>{data.length === 0 ? 'dn pozice' : 'Nenalezeny dn pozice'}</h3>\n                      <p>{data.length === 0 ? 'Nejsou k dispozici dn pozice' : 'Zkuste zmnit vyhledvn nebo filtry'}</p>\n                    </EmptyState>\n                  </TableCell>\n                </tr>\n              ) : (\n                table.getRowModel().rows.map((row, index) => (\n                  <TableRow key={row.id} $isEven={index % 2 === 0}>\n                    {row.getVisibleCells().map(cell => (\n                      cell.column.id === 'actions' ? (\n                        <React.Fragment key={cell.id}>\n                          {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                        </React.Fragment>\n                      ) : (\n                        <TableCell key={cell.id}>\n                          {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                        </TableCell>\n                      )\n                    ))}\n                  </TableRow>\n                ))\n              )}\n            </tbody>\n          </Table>\n\n          {/* Pagination */}\n          <Pagination>\n            <PageInfo>\n              Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} pozic\n            </PageInfo>\n\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                Zobrazit:\n              </span>\n              <PageSizeSelect\n                value={pageSize}\n                onChange={(e) => {\n                  const newSize = Number(e.target.value);\n                  setPageSize(newSize);\n                  setPageIndex(0);\n                }}\n              >\n                <option value=\"10\">10</option>\n                <option value=\"25\">25</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n                <option value=\"250\">250</option>\n                <option value=\"500\">500</option>\n              </PageSizeSelect>\n\n              <PaginationButton\n                onClick={goToFirstPage}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={goToPreviousPage}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n\n              <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n              </span>\n\n              <PaginationButton\n                onClick={goToNextPage}\n                disabled={pageIndex >= table.getPageCount() - 1}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={goToLastPage}\n                disabled={pageIndex >= table.getPageCount() - 1}\n              >\n                \n              </PaginationButton>\n            </div>\n          </Pagination>\n      </TableContainer>\n\n      {/* Dialogs */}\n      <UniversalDictionaryDialog\n        isOpen={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSave={handleSave}\n        mode={dialogMode}\n        title={dialogMode === 'create' ? 'Nov pozice' : 'Upravit pozici'}\n        fields={dialogFields}\n        initialData={editingItem}\n      />\n\n      <DictionaryConfirmDialog\n        isOpen={isConfirmOpen}\n        onClose={() => setIsConfirmOpen(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Smazat pozici\"\n        message={`Opravdu chcete smazat pozici \"${deletingItem?.nazev_pozice}\"?`}\n      />\n    </Container>\n  );\n};\n\nexport default PoziceTab;\n","/**\n * seky Tab - Sprva sek s TanStack Table\n *\n * DB: id, usek_nazev, usek_zkr, aktivni\n * API: /ciselniky/useky/list|by-id|insert|update|delete\n *\n * Features:\n * - TanStack Table s azenm\n * - Globln fulltextov vyhledvn\n * - Sloupcov textov filtry\n * - Icon filtr pro aktivn/neaktivn\n * - localStorage perzistence filtr\n * - ID jako superscript\n * - CRUD operace (Create, Update, Delete)\n *\n * @date 2025-10-23\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlus, faSearch, faEdit, faTrash,\n  faChevronUp, faChevronDown, faTimes,\n  faCheckCircle, faTimesCircle, faBolt, faSyncAlt, faEraser\n} from '@fortawesome/free-solid-svg-icons';\nimport { Network, Users } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getUsekyList,\n  createUsek,\n  updateUsek,\n  deleteUsek,\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS (same as PoziceTab)\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Fixn ky sloupc */\n  th:nth-of-type(1), td:nth-of-type(1) { width: auto; }     /* Nzev seku */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 150px; }    /* Zkratka */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 140px; }    /* Poet uivatel */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 90px; }     /* Aktivn */\n  th:last-child, td:last-child { width: 100px; }            /* Akce */\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst TableHeaderFilterCell = styled.th`\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled(TableCell)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.span`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n`;\n\nconst EmptyState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst Badge = styled.span`\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n`;\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nconst UsekyTab = () => {\n  const { token, user, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, refreshDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // ============= LOCALSTORAGE HELPERS =============\n  const user_id = userDetail?.user_id;\n\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby\n    }\n  };\n\n  // ============= STATE =============\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('useky_globalFilter', '');\n  });\n\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('useky_columnFilters', {});\n  });\n\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('useky_aktivniFilter', 'all');\n  });\n\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('useky_sorting', []);\n  });\n\n  const [pageSize, setPageSize] = useState(() => {\n    return getUserStorage('useky_pageSize', 25);\n  });\n\n  const [pageIndex, setPageIndex] = useState(() => {\n    return getUserStorage('useky_pageIndex', 0);\n  });\n\n  // Dialog state\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState('create');\n  const [editingItem, setEditingItem] = useState(null);\n\n  // Confirm dialog state\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\n  const [deletingItem, setDeletingItem] = useState(null);\n\n  // ============= SAVE TO LOCALSTORAGE =============\n  useEffect(() => {\n    setUserStorage('useky_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('useky_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('useky_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('useky_sorting', sorting);\n  }, [sorting, user_id]);\n\n  useEffect(() => {\n    setUserStorage('useky_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('useky_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============= DATA FETCHING =============\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('useky');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn sek', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      // Pokud jsou data v cache, pouij je\n      if (cache.useky?.loaded && cache.useky.data) {\n        setData(cache.useky.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    } else {\n    }\n  }, [token, user?.username, cache.useky?.loaded]);\n\n  // ============= FILTERED DATA =============\n  const filteredData = useMemo(() => {\n    const filtered = data.filter((item) => {\n      // Icon filtr - aktivn/neaktivn\n      // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n      const isAktivni = item.aktivni === 1 || item.aktivni === true || item.aktivni === \"1\";\n\n      if (aktivniFilter === 'aktivni' && !isAktivni) return false;\n      if (aktivniFilter === 'neaktivni' && isAktivni) return false;\n\n      // Global filter\n      if (globalFilter) {\n        const searchLower = globalFilter.toLowerCase();\n        const matchGlobal =\n          (item.usek_nazev || '').toLowerCase().includes(searchLower) ||\n          (item.usek_zkr || '').toLowerCase().includes(searchLower) ||\n          (item.id || '').toString().toLowerCase().includes(searchLower);\n\n        if (!matchGlobal) return false;\n      }\n\n      // Column filters - textov\n      if (columnFilters.usek_nazev &&\n          !(item.usek_nazev || '').toLowerCase().includes(columnFilters.usek_nazev.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.usek_zkr &&\n          !(item.usek_zkr || '').toLowerCase().includes(columnFilters.usek_zkr.toLowerCase())) {\n        return false;\n      }\n\n      // Filtr potu uivatel (seln)\n      if (columnFilters.pocet_uzivatelu &&\n          item.pocet_uzivatelu !== undefined &&\n          !item.pocet_uzivatelu.toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n\n    return filtered;\n  }, [data, globalFilter, columnFilters, aktivniFilter]);\n\n  // ============= COLUMNS DEFINITION =============\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'usek_nazev',\n      header: 'Nzev seku',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem' }}>\n          <Network size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n          <span>\n            {row.original.usek_nazev}\n            <sup style={{\n              fontSize: '0.65em',\n              opacity: 0.6,\n              marginLeft: '0.25rem',\n              color: '#6b7280'\n            }}>\n              #{row.original.id}\n            </sup>\n          </span>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'usek_zkr',\n      header: 'Zkratka',\n      cell: ({ row }) => (\n        <Badge>{row.original.usek_zkr}</Badge>\n      )\n    },\n    {\n      accessorKey: 'pocet_uzivatelu',\n      header: 'Poet uivatel',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          {row.original.pocet_uzivatelu !== undefined ? (\n            <UserCountBadge\n              title={`${row.original.pocet_uzivatelu} ${row.original.pocet_uzivatelu === 1 ? 'uivatel m' : 'uivatel m'} tento sek`}\n            >\n              <Users size={12} />\n              {row.original.pocet_uzivatelu}\n            </UserCountBadge>\n          ) : (\n            <span style={{ color: '#9ca3af' }}></span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      cell: ({ row }) => {\n        // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n        const isAktivni = row.original.aktivni === 1 || row.original.aktivni === true || row.original.aktivni === \"1\";\n        return (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{\n                color: isAktivni ? '#22c55e' : '#ef4444',\n                fontSize: '18px'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => handleEdit(row.original)}\n            title=\"Upravit sek\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => handleDeleteClick(row.original)}\n            title=\"Smazat sek\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      )\n    }\n  ], []);\n\n  // ============= TABLE INSTANCE =============\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      sorting,\n      pagination: { pageIndex, pageSize },\n    },\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    manualPagination: false,\n  });\n\n  // ============= HANDLERS =============\n  const handleCreate = () => {\n    setDialogMode('create');\n    setEditingItem(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (item) => {\n    setDialogMode('edit');\n    setEditingItem(item);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteClick = (item) => {\n    setDeletingItem(item);\n    setIsConfirmOpen(true);\n  };\n\n  const handleSave = async (formData) => {\n    try {\n      if (dialogMode === 'create') {\n        await createUsek({\n          token,\n          username: user.username,\n          ...formData\n        });\n        showToast('sek byl vytvoen', 'success');\n        invalidateCache('useky');\n        fetchData();\n        setIsDialogOpen(false);\n      } else {\n        await updateUsek({\n          token,\n          username: user.username,\n          id: editingItem.id,\n          ...formData\n        });\n        showToast('sek byl aktualizovn', 'success');\n        invalidateCache('useky');\n        fetchData();\n        setIsDialogOpen(false);\n      }\n    } catch (error) {\n      showToast(error.message || 'Chyba pi ukldn seku', 'error');\n    }\n  };\n  const handleConfirmDelete = async () => {\n    try {\n      await deleteUsek({\n        token,\n        username: user.username,\n        id: deletingItem.id\n      });\n      showToast('sek byl smazn', 'success');\n      invalidateCache('useky');\n      fetchData();\n      setIsConfirmOpen(false);\n      setDeletingItem(null);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi mazn seku', 'error');\n    }\n  };\n\n  // ============= PAGINATION HANDLERS =============\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  const handleAktivniFilterClick = () => {\n    setAktivniFilter(prev => {\n      if (prev === 'all') return 'aktivni';\n      if (prev === 'aktivni') return 'neaktivni';\n      return 'all';\n    });\n  };\n\n  const handleClearFilters = () => {\n    setColumnFilters({});\n    setAktivniFilter('all');\n  };\n\n  // ============= DIALOG FIELDS =============\n  const dialogFields = [\n    {\n      name: 'usek_nazev',\n      label: 'Nzev seku',\n      type: 'text',\n      required: true,\n      placeholder: 'Zadejte nzev seku'\n    },\n    {\n      name: 'usek_zkr',\n      label: 'Zkratka',\n      type: 'text',\n      required: true,\n      placeholder: 'Zadejte zkratku (nap. IT, HR)'\n    },\n    {\n      name: 'aktivni',\n      label: 'Aktivn',\n      type: 'checkbox',\n      required: false\n    }\n  ];\n\n  // ============= RENDER =============\n  if (loading) {\n    return (\n      <Container>\n        <LoadingOverlay>\n          <FontAwesomeIcon icon={faSyncAlt} spin size=\"2x\" />\n          <div style={{ marginTop: '1rem' }}>Natm seky...</div>\n        </LoadingOverlay>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      {/* Action Bar */}\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Vyhledat v secch...\"\n            value={globalFilter}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton $primary onClick={handleCreate}>\n          <FontAwesomeIcon icon={faPlus} />\n          Nov sek\n        </ActionButton>\n      </ActionBar>\n\n      {/* Table */}\n      <TableContainer>\n        <Table>\n          <tbody>\n                {/* Prvn dek - nzvy sloupc s azenm */}\n                <TableHeaderRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderCell key={header.id}>\n                      {header.id !== 'actions' ? (\n                        <HeaderContent\n                          onClick={header.column.getToggleSortingHandler()}\n                          style={{ cursor: 'pointer' }}\n                        >\n                          <span>\n                            {flexRender(header.column.columnDef.header, header.getContext())}\n                          </span>\n                          {header.column.getIsSorted() && (\n                            <FontAwesomeIcon\n                              icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                              style={{ marginLeft: '0.5rem', fontSize: '0.75rem' }}\n                            />\n                          )}\n                        </HeaderContent>\n                      ) : (\n                        <div style={{ textAlign: 'center' }}>\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </div>\n                      )}\n                    </TableHeaderCell>\n                  ))}\n                </TableHeaderRow>\n\n                {/* Druh dek - filtry */}\n                <TableHeaderFilterRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderFilterCell key={header.id}>\n                      {header.id === 'usek_nazev' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Filtrovat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'usek_zkr' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Filtrovat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'pocet_uzivatelu' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"number\"\n                            placeholder=\"Poet...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'aktivni' && (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <IconFilterButton\n                            onClick={handleAktivniFilterClick}\n                            title={\n                              aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                              aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                              'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                            }\n                          >\n                            {aktivniFilter === 'all' ? (\n                              <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                                <FontAwesomeIcon\n                                  icon={faCheckCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                    color: '#16a34a'\n                                  }}\n                                />\n                                <FontAwesomeIcon\n                                  icon={faTimesCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                    color: '#dc2626'\n                                  }}\n                                />\n                              </div>\n                            ) : aktivniFilter === 'aktivni' ? (\n                              <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                            ) : (\n                              <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                            )}\n                          </IconFilterButton>\n                        </div>\n                      )}\n\n                      {header.id === 'actions' && (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <FilterActionButton\n                            onClick={handleClearFilters}\n                            title=\"Vymazat vechny filtry sloupc\"\n                            disabled={\n                              Object.keys(columnFilters).length === 0 &&\n                              aktivniFilter === 'all'\n                            }\n                          >\n                            <FontAwesomeIcon icon={faEraser} />\n                          </FilterActionButton>\n                        </div>\n                      )}\n                    </TableHeaderFilterCell>\n                  ))}\n                </TableHeaderFilterRow>\n\n                {/* Data rows */}\n                {loading ? (\n                  <tr>\n                    <TableCell colSpan={columns.length} style={{ textAlign: 'center', padding: '2rem' }}>\n                      Natm...\n                    </TableCell>\n                  </tr>\n                ) : table.getRowModel().rows.length === 0 ? (\n                  <tr>\n                    <TableCell colSpan={columns.length} style={{ textAlign: 'center', padding: '2rem' }}>\n                      <EmptyState>\n                        <Network size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                        <h3>{data.length === 0 ? 'dn seky' : 'Nenalezeny dn seky'}</h3>\n                        <p>{data.length === 0 ? 'Nejsou k dispozici dn seky' : 'Zkuste zmnit vyhledvn nebo filtry'}</p>\n                      </EmptyState>\n                    </TableCell>\n                  </tr>\n                ) : (\n                  table.getRowModel().rows.map((row, index) => (\n                    <TableRow key={row.id} $isEven={index % 2 === 0}>\n                      {row.getVisibleCells().map(cell => (\n                        cell.column.id === 'actions' ? (\n                          <React.Fragment key={cell.id}>\n                            {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                          </React.Fragment>\n                        ) : (\n                          <TableCell key={cell.id}>\n                            {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                          </TableCell>\n                        )\n                      ))}\n                    </TableRow>\n                  ))\n                )}\n              </tbody>\n            </Table>\n\n            {/* Pagination */}\n            <Pagination>\n              <PageInfo>\n                Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} sek\n              </PageInfo>\n\n              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                  Zobrazit:\n                </span>\n                <PageSizeSelect\n                  value={pageSize}\n                  onChange={(e) => {\n                    const newSize = Number(e.target.value);\n                    setPageSize(newSize);\n                    setPageIndex(0);\n                  }}\n                >\n                  <option value=\"10\">10</option>\n                  <option value=\"25\">25</option>\n                  <option value=\"50\">50</option>\n                  <option value=\"100\">100</option>\n                  <option value=\"250\">250</option>\n                  <option value=\"500\">500</option>\n                </PageSizeSelect>\n\n                <PaginationButton\n                  onClick={goToFirstPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PaginationButton>\n                <PaginationButton\n                  onClick={goToPreviousPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PaginationButton>\n\n                <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                  Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n                </span>\n\n                <PaginationButton\n                  onClick={goToNextPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PaginationButton>\n                <PaginationButton\n                  onClick={goToLastPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PaginationButton>\n              </div>\n            </Pagination>\n      </TableContainer>\n\n      {/* Dialogs */}\n      <UniversalDictionaryDialog\n        isOpen={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSave={handleSave}\n        mode={dialogMode}\n        title={dialogMode === 'create' ? 'Nov sek' : 'Upravit sek'}\n        fields={dialogFields}\n        initialData={editingItem}\n      />\n\n      <DictionaryConfirmDialog\n        isOpen={isConfirmOpen}\n        onClose={() => setIsConfirmOpen(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Smazat sek\"\n        message={`Opravdu chcete smazat sek \"${deletingItem?.usek_nazev}\"?`}\n      />\n    </Container>\n  );\n};\n\nexport default UsekyTab;\n","/**\n * Organizace Tab - Sprva organizac s TanStack Table\n *\n * DB: id, nazev_organizace, ico, ulice_cislo, mesto, psc, zastoupeny, datova_schranka, email, telefon\n * API: /ciselniky/organizace/list|by-id|insert|update|delete\n *\n * Features:\n * - TanStack Table s azenm\n * - Globln fulltextov vyhledvn\n * - Sloupcov textov filtry\n * - localStorage perzistence filtr\n * - ID jako superscript\n * - CRUD operace (Create, Update, Delete)\n *\n * @date 2025-10-23\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlus, faSearch, faEdit, faTrash,\n  faChevronUp, faChevronDown, faTimes, faCheckCircle, faTimesCircle, faEraser, faBolt, faSyncAlt\n} from '@fortawesome/free-solid-svg-icons';\nimport { Building, Users } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getOrganizaceList,\n  createOrganizace,\n  updateOrganizace,\n  deleteOrganizace,\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS (same as PoziceTab/UsekyTab)\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst TableHeaderFilterCell = styled.th`\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.span`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n\n  &:hover {\n    background: rgba(59, 130, 246, 0.1);\n    transform: scale(1.1);\n  }\n\n  svg {\n    width: 20px !important;\n    height: 20px !important;\n  }\n`;\n\nconst EmptyState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.5;\n  }\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst InfoText = styled.div`\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-top: 0.25rem;\n`;\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nconst OrganizaceTab = () => {\n  const { token, user, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // ============= LOCALSTORAGE HELPERS =============\n  const user_id = userDetail?.user_id;\n\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby\n    }\n  };\n\n  // ============= STATE =============\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('organizace_globalFilter', '');\n  });\n\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('organizace_columnFilters', {});\n  });\n\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('organizace_aktivniFilter', 'all'); // 'all' | 'aktivni' | 'neaktivni'\n  });\n\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('organizace_sorting', []);\n  });\n\n  const [pageSize, setPageSize] = useState(() => {\n    return getUserStorage('organizace_pageSize', 25);\n  });\n\n  const [pageIndex, setPageIndex] = useState(() => {\n    return getUserStorage('organizace_pageIndex', 0);\n  });\n\n  // Dialog state\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState('create');\n  const [editingItem, setEditingItem] = useState(null);\n\n  // Confirm dialog state\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\n  const [deletingItem, setDeletingItem] = useState(null);\n\n  // ============= SAVE TO LOCALSTORAGE =============\n  useEffect(() => {\n    setUserStorage('organizace_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('organizace_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('organizace_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('organizace_sorting', sorting);\n  }, [sorting, user_id]);\n\n  useEffect(() => {\n    setUserStorage('organizace_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('organizace_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============= DATA FETCHING =============\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('organizace');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn organizac', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      if (cache.organizace?.loaded && cache.organizace.data) {\n        setData(cache.organizace.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    } else {\n    }\n  }, [token, user?.username, cache.organizace?.loaded]);\n\n  // ============= FILTERED DATA =============\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      //  POZNMKA: aktivniFilter je nyn aplikovn na BE stran pi fetchData()\n      // Zde filtrujeme pouze podle search a column filters\n\n      // Global filter\n      if (globalFilter) {\n        const searchLower = globalFilter.toLowerCase();\n        const matchGlobal =\n          (item.nazev_organizace || '').toLowerCase().includes(searchLower) ||\n          (item.ico || '').toLowerCase().includes(searchLower) ||\n          (item.mesto || '').toLowerCase().includes(searchLower) ||\n          (item.email || '').toLowerCase().includes(searchLower) ||\n          (item.id || '').toString().toLowerCase().includes(searchLower);\n\n        if (!matchGlobal) return false;\n      }\n\n      // Column filters - textov\n      if (columnFilters.nazev_organizace &&\n          !(item.nazev_organizace || '').toLowerCase().includes(columnFilters.nazev_organizace.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.ico &&\n          !(item.ico || '').toLowerCase().includes(columnFilters.ico.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.mesto &&\n          !(item.mesto || '').toLowerCase().includes(columnFilters.mesto.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.adresa &&\n          !(item.adresa || '').toLowerCase().includes(columnFilters.adresa.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.kontakt &&\n          !(item.kontakt || '').toLowerCase().includes(columnFilters.kontakt.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.zastoupeny &&\n          !(item.zastoupeny || '').toLowerCase().includes(columnFilters.zastoupeny.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.pocet_uzivatelu &&\n          !item.pocet_uzivatelu.toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, globalFilter, columnFilters]); //  aktivniFilter odstrann z dependencies\n\n  // ============= COLUMNS DEFINITION =============\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'nazev_organizace',\n      header: 'Nzev organizace',\n      cell: ({ row }) => (\n        <div>\n          <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem' }}>\n            <Building size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n            <div>\n              <div style={{ fontWeight: 600 }}>\n                {row.original.nazev_organizace}\n                <sup style={{\n                  fontSize: '0.65em',\n                  opacity: 0.6,\n                  marginLeft: '0.25rem',\n                  color: '#6b7280',\n                  fontWeight: 400\n                }}>\n                  #{row.original.id}\n                </sup>\n              </div>\n              {row.original.ico && (\n                <InfoText>IO: {row.original.ico}</InfoText>\n              )}\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'adresa',\n      header: 'Adresa',\n      cell: ({ row }) => (\n        <div>\n          {row.original.ulice_cislo && (\n            <div>{row.original.ulice_cislo}</div>\n          )}\n          {(row.original.mesto || row.original.psc) && (\n            <InfoText>\n              {row.original.psc && `${row.original.psc} `}\n              {row.original.mesto}\n            </InfoText>\n          )}\n          {!row.original.ulice_cislo && !row.original.mesto && !row.original.psc && (\n            <span style={{ color: '#9ca3af' }}>Bez adresy</span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'kontakt',\n      header: 'Kontakt',\n      cell: ({ row }) => (\n        <div>\n          {row.original.email && (\n            <div style={{ fontSize: '0.875rem' }}>{row.original.email}</div>\n          )}\n          {row.original.telefon && (\n            <InfoText>{row.original.telefon}</InfoText>\n          )}\n          {!row.original.email && !row.original.telefon && (\n            <span style={{ color: '#9ca3af' }}>Bez kontaktu</span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'zastoupeny',\n      header: 'Zastoupen',\n      cell: ({ row }) => (\n        <span style={{ color: row.original.zastoupeny ? '#374151' : '#9ca3af', fontSize: '0.875rem' }}>\n          {row.original.zastoupeny || 'Neuvedeno'}\n        </span>\n      )\n    },\n    {\n      accessorKey: 'pocet_uzivatelu',\n      header: 'Poet uivatel',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n          {row.original.pocet_uzivatelu !== undefined ? (\n            <UserCountBadge\n              title={`${row.original.pocet_uzivatelu} ${row.original.pocet_uzivatelu === 1 ? 'uivatel pat' : 'uivatel pat'} do tto organizace`}\n            >\n              <Users size={12} />\n              {row.original.pocet_uzivatelu}\n            </UserCountBadge>\n          ) : (\n            <span style={{ color: '#9ca3af' }}></span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      cell: ({ row }) => {\n        // Backend me vracet string \"1\"/\"0\" nebo number 1/0 nebo boolean\n        const aktivniValue = row.original.aktivni;\n        const isAktivni = aktivniValue === 1 || aktivniValue === \"1\" || aktivniValue === true;\n        return (\n          <div style={{\n            textAlign: 'center',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            fontSize: '18px'\n          }}\n          title={isAktivni ? 'Aktivn' : 'Neaktivn'}\n          >\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{ color: isAktivni ? '#16a34a' : '#dc2626' }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => handleEdit(row.original)}\n            title=\"Upravit organizaci\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => handleDeleteClick(row.original)}\n            title=\"Smazat organizaci\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      )\n    }\n  ], []);\n\n  // ============= TABLE INSTANCE =============\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      sorting,\n      pagination: { pageIndex, pageSize },\n    },\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    manualPagination: false,\n  });\n\n  // ============= HANDLERS =============\n  const handleCreate = () => {\n    setDialogMode('create');\n    setEditingItem(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (item) => {\n    setDialogMode('edit');\n    setEditingItem(item);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteClick = (item) => {\n    setDeletingItem(item);\n    setIsConfirmOpen(true);\n  };\n\n  const handleSave = async (formData) => {\n    try {\n      if (dialogMode === 'create') {\n        await createOrganizace({\n          token,\n          username: user.username,\n          ...formData\n        });\n        showToast('Organizace byla vytvoena', 'success');\n        invalidateCache('organizace');\n        fetchData();\n        setIsDialogOpen(false);\n      } else {\n        await updateOrganizace({\n          token,\n          username: user.username,\n          id: editingItem.id,\n          ...formData\n        });\n        showToast('Organizace byla aktualizovna', 'success');\n        invalidateCache('organizace');\n        fetchData();\n        setIsDialogOpen(false);\n      }\n    } catch (error) {\n      showToast(error.message || 'Chyba pi ukldn organizace', 'error');\n    }\n  };\n  const handleConfirmDelete = async () => {\n    try {\n      await deleteOrganizace({\n        token,\n        username: user.username,\n        id: deletingItem.id\n      });\n      showToast('Organizace byla smazna', 'success');\n      invalidateCache('organizace');\n      fetchData();\n      setIsConfirmOpen(false);\n      setDeletingItem(null);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi mazn organizace', 'error');\n    }\n  };\n\n  // ============= PAGINATION HANDLERS =============\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  const handleClearFilters = () => {\n    setColumnFilters({});\n  };\n\n  // ============= DIALOG FIELDS =============\n  const dialogFields = [\n    {\n      name: 'nazev_organizace',\n      label: 'Nzev organizace',\n      type: 'text',\n      required: true,\n      placeholder: 'Zadejte nzev organizace'\n    },\n    {\n      name: 'ico',\n      label: 'IO',\n      type: 'text',\n      required: false,\n      placeholder: 'Nap. 12345678'\n    },\n    {\n      name: 'ulice_cislo',\n      label: 'Ulice a slo',\n      type: 'text',\n      required: false,\n      placeholder: 'Nap. Hlavn 123'\n    },\n    {\n      name: 'mesto',\n      label: 'Msto',\n      type: 'text',\n      required: false,\n      placeholder: 'Nap. Praha'\n    },\n    {\n      name: 'psc',\n      label: 'PS',\n      type: 'text',\n      required: false,\n      placeholder: 'Nap. 11000'\n    },\n    {\n      name: 'zastoupeny',\n      label: 'Zastoupen',\n      type: 'text',\n      required: false,\n      placeholder: 'Nap. Jan Novk, jednatel'\n    },\n    {\n      name: 'datova_schranka',\n      label: 'Datov schrnka',\n      type: 'text',\n      required: false,\n      placeholder: 'ID datov schrnky'\n    },\n    {\n      name: 'email',\n      label: 'Email',\n      type: 'email',\n      required: false,\n      placeholder: 'info@organizace.cz'\n    },\n    {\n      name: 'telefon',\n      label: 'Telefon',\n      type: 'tel',\n      required: false,\n      placeholder: '+420 123 456 789'\n    }\n  ];\n\n  // ============= RENDER =============\n  if (loading) {\n    return (\n      <Container>\n        <LoadingOverlay>\n          <FontAwesomeIcon icon={faSyncAlt} spin size=\"2x\" />\n          <div style={{ marginTop: '1rem' }}>Natm organizace...</div>\n        </LoadingOverlay>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      {/* Action Bar */}\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Vyhledat v organizacch...\"\n            value={globalFilter}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton $primary onClick={handleCreate}>\n          <FontAwesomeIcon icon={faPlus} />\n          Nov organizace\n        </ActionButton>\n      </ActionBar>\n\n      {/* Table */}\n      <TableContainer>\n        <Table>\n          <tbody>\n            {/* Prvn dek - nzvy sloupc s azenm */}\n            <TableHeaderRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderCell key={header.id}>\n                      {header.id !== 'actions' ? (\n                        <HeaderContent\n                          onClick={header.column.getToggleSortingHandler()}\n                          style={{ cursor: 'pointer' }}\n                        >\n                          <span>\n                            {flexRender(header.column.columnDef.header, header.getContext())}\n                          </span>\n                          {header.column.getIsSorted() && (\n                            <FontAwesomeIcon\n                              icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                              style={{ marginLeft: '0.5rem', fontSize: '0.75rem' }}\n                            />\n                          )}\n                        </HeaderContent>\n                      ) : (\n                        <div style={{ textAlign: 'center' }}>\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </div>\n                      )}\n                    </TableHeaderCell>\n                  ))}\n                </TableHeaderRow>\n\n                {/* Druh dek - filtry */}\n                <TableHeaderFilterRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderFilterCell key={header.id}>\n                      {header.id === 'nazev_organizace' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Filtrovat...\"\n                            value={columnFilters[header.id] || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, [header.id]: value };\n                              });\n                            }}\n                          />\n                          {columnFilters[header.id] && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { [header.id]: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'ico' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"IO...\"\n                            value={columnFilters.ico || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { ico: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, ico: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.ico && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { ico: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'mesto' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Msto...\"\n                            value={columnFilters.mesto || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { mesto: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, mesto: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.mesto && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { mesto: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'adresa' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Adresa...\"\n                            value={columnFilters.adresa || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { adresa: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, adresa: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.adresa && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { adresa: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'kontakt' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Kontakt...\"\n                            value={columnFilters.kontakt || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { kontakt: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, kontakt: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.kontakt && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { kontakt: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'zastoupeny' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Zastoupen...\"\n                            value={columnFilters.zastoupeny || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { zastoupeny: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, zastoupeny: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.zastoupeny && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { zastoupeny: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'pocet_uzivatelu' && (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"number\"\n                            placeholder=\"Poet...\"\n                            value={columnFilters.pocet_uzivatelu || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { pocet_uzivatelu: removed, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, pocet_uzivatelu: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.pocet_uzivatelu && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { pocet_uzivatelu: removed, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      )}\n\n                      {header.id === 'aktivni' && (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <IconFilterButton\n                            onClick={() => {\n                              if (aktivniFilter === 'all') {\n                                setAktivniFilter('aktivni');\n                              } else if (aktivniFilter === 'aktivni') {\n                                setAktivniFilter('neaktivni');\n                              } else {\n                                setAktivniFilter('all');\n                              }\n                            }}\n                            title={\n                              aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                              aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                              'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                            }\n                          >\n                            {aktivniFilter === 'all' ? (\n                              <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                                <FontAwesomeIcon\n                                  icon={faCheckCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                    color: '#16a34a'\n                                  }}\n                                />\n                                <FontAwesomeIcon\n                                  icon={faTimesCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                    color: '#dc2626'\n                                  }}\n                                />\n                              </div>\n                            ) : aktivniFilter === 'aktivni' ? (\n                              <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                            ) : (\n                              <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                            )}\n                          </IconFilterButton>\n                        </div>\n                      )}\n\n                      {header.id === 'actions' && (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <IconFilterButton\n                            onClick={() => {\n                              setColumnFilters({});\n                              setAktivniFilter('all');\n                            }}\n                            title=\"Vymazat vechny filtry\"\n                            disabled={Object.keys(columnFilters).length === 0 && aktivniFilter === 'all'}\n                          >\n                            <FontAwesomeIcon icon={faEraser} style={{ fontSize: '14px' }} />\n                          </IconFilterButton>\n                        </div>\n                      )}\n                    </TableHeaderFilterCell>\n                  ))}\n                </TableHeaderFilterRow>\n\n                {table.getRowModel().rows.length === 0 ? (\n                  <tr>\n                    <TableCell colSpan={columns.length}>\n                      <EmptyState>\n                        <Building size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                        <h3>dn organizace</h3>\n                        <p>{globalFilter || Object.keys(columnFilters).length > 0 || aktivniFilter !== 'all' ? 'Zkuste zmnit vyhledvn nebo filtry' : 'Nejsou k dispozici dn organizace'}</p>\n                      </EmptyState>\n                    </TableCell>\n                  </tr>\n                ) : (\n                  table.getRowModel().rows.map((row, index) => (\n                    <TableRow key={row.id} $isEven={index % 2 === 0}>\n                      {row.getVisibleCells().map(cell => (\n                        <TableCell key={cell.id}>\n                          {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  ))\n                )}\n              </tbody>\n            </Table>\n\n            {/* Pagination */}\n            <Pagination>\n              <PageInfo>\n                Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} organizac\n              </PageInfo>\n\n              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                  Zobrazit:\n                </span>\n                <PageSizeSelect\n                  value={pageSize}\n                  onChange={(e) => {\n                    const newSize = Number(e.target.value);\n                    setPageSize(newSize);\n                    setPageIndex(0);\n                  }}\n                >\n                  <option value=\"10\">10</option>\n                  <option value=\"25\">25</option>\n                  <option value=\"50\">50</option>\n                  <option value=\"100\">100</option>\n                  <option value=\"250\">250</option>\n                  <option value=\"500\">500</option>\n                </PageSizeSelect>\n\n                <PaginationButton\n                  onClick={goToFirstPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PaginationButton>\n                <PaginationButton\n                  onClick={goToPreviousPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PaginationButton>\n\n                <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                  Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n                </span>\n\n                <PaginationButton\n                  onClick={goToNextPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PaginationButton>\n                <PaginationButton\n                  onClick={goToLastPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PaginationButton>\n              </div>\n            </Pagination>\n      </TableContainer>\n\n      {/* Dialogs */}\n      <UniversalDictionaryDialog\n        isOpen={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSave={handleSave}\n        mode={dialogMode}\n        title={dialogMode === 'create' ? 'Nov organizace' : 'Upravit organizaci'}\n        fields={dialogFields}\n        initialData={editingItem}\n      />\n\n      <DictionaryConfirmDialog\n        isOpen={isConfirmOpen}\n        onClose={() => setIsConfirmOpen(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Smazat organizaci\"\n        message={`Opravdu chcete smazat organizaci \"${deletingItem?.nazev_organizace}\"?`}\n      />\n    </Container>\n  );\n};\n\nexport default OrganizaceTab;\n","/**\n * Stavy Tab - Sprva stav objednvek s TanStack Table\n * DB 25_stavy: id, typ_objektu, kod_stavu, nadrazeny_kod_stavu, nazev_stavu, popis, platnost_do, aktivni\n * @date 2025-10-23\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faSearch, faEdit, faTrash, faChevronUp, faChevronDown, faCheckCircle, faTimesCircle, faTimes, faEraser, faBolt, faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport { Circle } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getStavyList,\n  createStav,\n  updateStav,\n  deleteStav,\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: ${props => props.$primary ? '#2563eb' : '#2563eb'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: ${props => props.$isFirstColumn ? 'flex-start' : 'center'};\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst PageInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #6b7280;\n  padding: 0.4rem 0.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst Badge = styled.span`\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n`;\n\nconst TypeBadge = styled.span`\n  padding: 0.25rem 0.75rem;\n  background: ${props => props.$type === 'OBJEDNAVKA' ? '#dbeafe' : props.$type === 'FAKTURA' ? '#fef3c7' : '#e5e7eb'};\n  color: ${props => props.$type === 'OBJEDNAVKA' ? '#1e40af' : props.$type === 'FAKTURA' ? '#92400e' : '#374151'};\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: normal;\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 2rem;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n`;\n\nconst StavyTab = () => {\n  const { token, user, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, refreshDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  const user_id = userDetail?.user_id;\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby zpisu\n    }\n  };\n\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [globalFilter, setGlobalFilter] = useState(() => getUserStorage('stavy_globalFilter', ''));\n  const [aktivniFilter, setAktivniFilter] = useState(() => getUserStorage('stavy_aktivniFilter', 'all'));\n  const [columnFilters, setColumnFilters] = useState(() => getUserStorage('stavy_columnFilters', {}));\n  const [sorting, setSorting] = useState(() => getUserStorage('stavy_sorting', []));\n  const [pageSize, setPageSize] = useState(() => getUserStorage('stavy_pageSize', 25));\n  const [pageIndex, setPageIndex] = useState(() => getUserStorage('stavy_pageIndex', 0));\n\n  const [editDialog, setEditDialog] = useState({ open: false, item: null });\n  const [deleteDialog, setDeleteDialog] = useState({ open: false, item: null });\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('stavy');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn stav', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      if (cache.stavy?.loaded && cache.stavy.data) {\n        setData(cache.stavy.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    }\n  }, [token, user?.username, cache.stavy?.loaded]);\n\n  useEffect(() => { setUserStorage('stavy_globalFilter', globalFilter); }, [globalFilter, user_id]);\n  useEffect(() => { setUserStorage('stavy_aktivniFilter', aktivniFilter); }, [aktivniFilter, user_id]);\n  useEffect(() => { setUserStorage('stavy_columnFilters', columnFilters); }, [columnFilters, user_id]);\n  useEffect(() => { setUserStorage('stavy_sorting', sorting); }, [sorting, user_id]);\n  useEffect(() => { setUserStorage('stavy_pageSize', pageSize); }, [pageSize, user_id]);\n  useEffect(() => { setUserStorage('stavy_pageIndex', pageIndex); }, [pageIndex, user_id]);\n\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n      const isAktivni = item.aktivni === 1 || item.aktivni === true || item.aktivni === \"1\";\n\n      if (aktivniFilter === 'aktivni' && !isAktivni) return false;\n      if (aktivniFilter === 'neaktivni' && isAktivni) return false;\n\n      if (columnFilters.nazev_stavu &&\n          !(item.nazev_stavu || '').toLowerCase().includes(columnFilters.nazev_stavu.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.kod_stavu &&\n          !(item.kod_stavu || '').toLowerCase().includes(columnFilters.kod_stavu.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.typ_objektu &&\n          !(item.typ_objektu || '').toLowerCase().includes(columnFilters.typ_objektu.toLowerCase())) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, aktivniFilter, columnFilters]);\n\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'nazev_stavu',\n      header: 'Nzev stavu',\n      enableSorting: true,\n      cell: ({ getValue, row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem', textAlign: 'left' }}>\n          <Circle size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n          <strong>\n            {getValue()}\n            {row.original.id && (\n              <sup style={{\n                fontSize: '0.6rem',\n                color: '#9ca3af',\n                fontWeight: 'normal',\n                marginLeft: '4px'\n              }}>\n                #{row.original.id}\n              </sup>\n            )}\n          </strong>\n        </div>\n      ),\n    },\n    {\n      accessorKey: 'kod_stavu',\n      header: 'Kd stavu',\n      enableSorting: true,\n      cell: ({ getValue }) => (\n        <Badge>{getValue() || ''}</Badge>\n      ),\n    },\n    {\n      accessorKey: 'typ_objektu',\n      header: 'Typ objektu',\n      enableSorting: true,\n      cell: ({ getValue }) => {\n        const typ = getValue();\n        return <TypeBadge $type={typ}>{typ || 'N/A'}</TypeBadge>;\n      },\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      enableSorting: true,\n      cell: ({ row }) => {\n        // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n        const isAktivni = row.original.aktivni === 1 || row.original.aktivni === true || row.original.aktivni === \"1\";\n        return (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{\n                color: isAktivni ? '#22c55e' : '#ef4444',\n                fontSize: '18px'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      size: 120,\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => setEditDialog({ open: true, item: row.original })}\n            title=\"Upravit\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => setDeleteDialog({ open: true, item: row.original })}\n            title=\"Smazat\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      ),\n    },\n  ], []);\n\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      globalFilter,\n      sorting,\n      pagination: { pageSize, pageIndex },\n    },\n    onGlobalFilterChange: setGlobalFilter,\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n  });\n\n  // Pagination handlers\n  const goToFirstPage = () => setPageIndex(0);\n  const goToPreviousPage = () => setPageIndex(prev => Math.max(0, prev - 1));\n  const goToNextPage = () => setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  const goToLastPage = () => setPageIndex(table.getPageCount() - 1);\n\n  const handleCreate = async (formData) => {\n    try {\n      await createStav({\n        token,\n        username: user?.username,\n        ...formData,\n      });\n      showToast?.('Stav vytvoen', { type: 'success' });\n      invalidateCache('stavy');\n      fetchData();\n      setEditDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi vytven', { type: 'error' });\n      throw error;\n    }\n  };\n\n  const handleUpdate = async (formData) => {\n    try {\n      await updateStav({\n        token,\n        username: user?.username,\n        id: editDialog.item.id,\n        ...formData,\n      });\n      showToast?.('Stav aktualizovn', { type: 'success' });\n      invalidateCache('stavy');\n      fetchData();\n      setEditDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi aktualizaci', { type: 'error' });\n      throw error;\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await deleteStav({\n        token,\n        username: user?.username,\n        id: deleteDialog.item.id,\n      });\n      showToast?.('Stav smazn', { type: 'success' });\n      invalidateCache('stavy');\n      fetchData();\n      setDeleteDialog({ open: false, item: null });\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi mazn', { type: 'error' });\n      throw error;\n    }\n  };\n\n  const handleAktivniFilterClick = () => {\n    setAktivniFilter(prev => {\n      if (prev === 'all') return 'aktivni';\n      if (prev === 'aktivni') return 'neaktivni';\n      return 'all';\n    });\n  };\n\n  const handleClearFilters = () => {\n    setGlobalFilter('');\n    setAktivniFilter('all');\n    setColumnFilters({});\n  };\n\n  const dialogFields = [\n    {\n      name: 'nazev_stavu',\n      label: 'Nzev stavu',\n      type: 'text',\n      required: true,\n      placeholder: 'Nzev stavu',\n    },\n    {\n      name: 'kod_stavu',\n      label: 'Kd stavu',\n      type: 'text',\n      required: true,\n      placeholder: 'NOVY, SCHVALENY, ...',\n    },\n    {\n      name: 'typ_objektu',\n      label: 'Typ objektu',\n      type: 'select',\n      required: true,\n      options: [\n        { value: 'OBJEDNAVKA', label: 'Objednvka' },\n        { value: 'FAKTURA', label: 'Faktura' },\n      ],\n    },\n    {\n      name: 'nadrazeny_kod_stavu',\n      label: 'Nadazen kd',\n      type: 'text',\n      required: false,\n      placeholder: 'Voliteln',\n    },\n    {\n      name: 'popis',\n      label: 'Popis',\n      type: 'textarea',\n      required: false,\n      placeholder: 'Popis stavu',\n    },\n    {\n      name: 'platnost_do',\n      label: 'Platnost do',\n      type: 'date',\n      required: false,\n    },\n    {\n      name: 'aktivni',\n      label: 'Aktivn',\n      type: 'checkbox',\n      required: false,\n    },\n  ];\n\n  return (\n    <Container>\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Hledat ve stavech...\"\n            value={globalFilter}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton $primary onClick={() => setEditDialog({ open: true, item: null })}>\n          <FontAwesomeIcon icon={faPlus} />\n          Pidat stav\n        </ActionButton>\n      </ActionBar>\n\n      <TableContainer>\n        <Table>\n          <thead>\n            <TableHeaderRow>\n              {table.getHeaderGroups().map((headerGroup) =>\n                headerGroup.headers.map((header, headerIndex) => (\n                  <TableHeaderCell\n                    key={header.id}\n                    onClick={header.column.getToggleSortingHandler()}\n                  >\n                    <HeaderContent $isFirstColumn={headerIndex === 0}>\n                      {flexRender(header.column.columnDef.header, header.getContext())}\n                      {header.column.getIsSorted() && (\n                        <FontAwesomeIcon\n                          icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                          style={{ fontSize: '0.75rem' }}\n                        />\n                      )}\n                    </HeaderContent>\n                  </TableHeaderCell>\n                ))\n              )}\n            </TableHeaderRow>\n\n            <TableHeaderFilterRow>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Hledat nzev...\"\n                    value={columnFilters.nazev_stavu || ''}\n                    onChange={(e) => setColumnFilters({ ...columnFilters, nazev_stavu: e.target.value })}\n                  />\n                  {columnFilters.nazev_stavu && (\n                    <ColumnClearButton\n                      onClick={() => {\n                        const { nazev_stavu, ...rest } = columnFilters;\n                        setColumnFilters(rest);\n                      }}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Kd...\"\n                    value={columnFilters.kod_stavu || ''}\n                    onChange={(e) => setColumnFilters({ ...columnFilters, kod_stavu: e.target.value })}\n                  />\n                  {columnFilters.kod_stavu && (\n                    <ColumnClearButton\n                      onClick={() => {\n                        const { kod_stavu, ...rest } = columnFilters;\n                        setColumnFilters(rest);\n                      }}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <ColumnFilterWrapper>\n                  <FontAwesomeIcon icon={faSearch} />\n                  <ColumnFilterInput\n                    type=\"text\"\n                    placeholder=\"Typ...\"\n                    value={columnFilters.typ_objektu || ''}\n                    onChange={(e) => setColumnFilters({ ...columnFilters, typ_objektu: e.target.value })}\n                  />\n                  {columnFilters.typ_objektu && (\n                    <ColumnClearButton\n                      onClick={() => {\n                        const { typ_objektu, ...rest } = columnFilters;\n                        setColumnFilters(rest);\n                      }}\n                    >\n                      <FontAwesomeIcon icon={faTimes} />\n                    </ColumnClearButton>\n                  )}\n                </ColumnFilterWrapper>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '32px' }}>\n                  <IconFilterButton\n                    onClick={handleAktivniFilterClick}\n                    title={\n                      aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                      aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                      'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                    }\n                  >\n                    {aktivniFilter === 'all' ? (\n                      <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                        <FontAwesomeIcon\n                          icon={faCheckCircle}\n                          style={{\n                            position: 'absolute',\n                            left: 0,\n                            top: 0,\n                            clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                            color: '#16a34a'\n                          }}\n                        />\n                        <FontAwesomeIcon\n                          icon={faTimesCircle}\n                          style={{\n                            position: 'absolute',\n                            left: 0,\n                            top: 0,\n                            clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                            color: '#dc2626'\n                          }}\n                        />\n                      </div>\n                    ) : aktivniFilter === 'aktivni' ? (\n                      <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                    ) : (\n                      <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                    )}\n                  </IconFilterButton>\n                </div>\n              </TableHeaderCell>\n              <TableHeaderCell>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  height: '32px'\n                }}>\n                  <FilterActionButton\n                    onClick={handleClearFilters}\n                    title=\"Vymazat vechny filtry\"\n                    disabled={Object.keys(columnFilters).length === 0 && aktivniFilter === 'all'}\n                  >\n                    <FontAwesomeIcon icon={faEraser} />\n                  </FilterActionButton>\n                </div>\n              </TableHeaderCell>\n            </TableHeaderFilterRow>\n          </thead>\n\n          <tbody>\n            {loading ? (\n              <tr>\n                <TableCell colSpan={columns.length}>Natm...</TableCell>\n              </tr>\n            ) : table.getRowModel().rows.length === 0 ? (\n              <tr>\n                <TableCell colSpan={columns.length}>\n                  <EmptyState>\n                    <Circle size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                    <h3>{data.length === 0 ? 'dn stavy' : 'Nenalezeny dn stavy'}</h3>\n                    <p>{data.length === 0 ? 'Nejsou k dispozici dn stavy' : 'Zkuste zmnit vyhledvn nebo filtry'}</p>\n                  </EmptyState>\n                </TableCell>\n              </tr>\n            ) : (\n              table.getRowModel().rows.map((row, idx) => (\n                <TableRow key={row.id} $isEven={idx % 2 === 0}>\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell key={cell.id}>\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            )}\n          </tbody>\n        </Table>\n\n        <Pagination>\n          <PageInfo>\n            Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} zznam\n            {data.length !== filteredData.length && ` (celkem ${data.length})`}\n          </PageInfo>\n          <PaginationButtons>\n            <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n              Zobrazit:\n            </span>\n            <PageSizeSelect value={pageSize} onChange={(e) => {\n              const newSize = Number(e.target.value);\n              setPageSize(newSize);\n              setPageIndex(0);\n            }}>\n              <option value=\"10\">10</option>\n              <option value=\"25\">25</option>\n              <option value=\"50\">50</option>\n              <option value=\"100\">100</option>\n              <option value=\"250\">250</option>\n              <option value=\"500\">500</option>\n            </PageSizeSelect>\n            <PageButton onClick={goToFirstPage} disabled={pageIndex === 0}>\n              \n            </PageButton>\n            <PageButton onClick={goToPreviousPage} disabled={pageIndex === 0}>\n              \n            </PageButton>\n            <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n              Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n            </span>\n            <PageButton onClick={goToNextPage} disabled={pageIndex >= table.getPageCount() - 1}>\n              \n            </PageButton>\n            <PageButton onClick={goToLastPage} disabled={pageIndex >= table.getPageCount() - 1}>\n              \n            </PageButton>\n          </PaginationButtons>\n        </Pagination>\n      </TableContainer>\n\n      <UniversalDictionaryDialog\n        open={editDialog.open}\n        onClose={() => setEditDialog({ open: false, item: null })}\n        onSave={editDialog.item ? handleUpdate : handleCreate}\n        title={editDialog.item ? 'Upravit stav' : 'Nov stav'}\n        fields={dialogFields}\n        initialData={editDialog.item}\n      />\n\n      <DictionaryConfirmDialog\n        open={deleteDialog.open}\n        onClose={() => setDeleteDialog({ open: false, item: null })}\n        onConfirm={handleDelete}\n        title=\"Smazat stav?\"\n        message={`Opravdu chcete smazat stav \"${deleteDialog.item?.nazev_stavu}\"?`}\n      />\n    </Container>\n  );\n};\n\nexport default StavyTab;\n","/**\n * Role Tab - Sprva rol s prvy a vazbami na uivatele\n * Design podle DOCX ablon s TanStack Table\n *\n * @author Frontend Team\n * @date 2025-11-17\n * @version 4.0 - Pidna pln CRUD funkcionalita a pidlovn prv (ADMIN, DICT_MANAGE)\n */\n\nimport React, { useState, useEffect, useContext, useMemo, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSearch, faPlus, faEdit, faTrash, faEraser, faTimes,\n  faCheckCircle, faTimesCircle, faChevronDown, faChevronUp,\n  faShield, faUser, faUsers, faKey, faGlobe, faUserShield,\n  faEnvelope, faPhone, faBolt, faSyncAlt, faBroom, faCopy,\n  faExclamationTriangle\n} from '@fortawesome/free-solid-svg-icons';\nimport { Shield, Users, Key } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport apiv2Dictionaries from '../../../services/apiv2Dictionaries';\nimport ConfirmDialog from '../../ConfirmDialog';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getExpandedRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// SCROLLBAR STYLES\n// =============================================================================\n\nconst scrollbarStyles = `\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n`;\n\n// =============================================================================\n// STYLED COMPONENTS - podle DOCX vzoru\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid ${props => props.$variant === 'primary' ? '#3b82f6' : props.$active ? '#3b82f6' : '#d1d5db'};\n  border-radius: 8px;\n  background: ${props => {\n    if (props.$variant === 'primary') return '#3b82f6';\n    if (props.$active) return '#eff6ff';\n    return 'white';\n  }};\n  color: ${props => {\n    if (props.$variant === 'primary') return 'white';\n    if (props.$active) return '#3b82f6';\n    return '#6b7280';\n  }};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => {\n      if (props.$variant === 'primary') return '#2563eb';\n      if (props.$active) return '#dbeafe';\n      return '#f9fafb';\n    }};\n    border-color: ${props => props.$variant === 'primary' ? '#2563eb' : '#3b82f6'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\nconst TableWrapper = styled.div`\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n`;\n\nconst TableContainer = styled.div`\n  overflow-x: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n`;\n\nconst StyledTable = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Pevn ky pro specifick sloupce */\n  th:nth-of-type(1), td:nth-of-type(1) { width: 375px !important; min-width: 375px !important; max-width: 375px !important; }   /* Nzev role - irok fixn */\n  th:nth-of-type(2), td:nth-of-type(2) { width: auto !important; min-width: 200px !important; }                                   /* Popis - dynamick */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 100px !important; min-width: 100px !important; max-width: 100px !important; }   /* Poet prv - zk fixn */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 100px !important; min-width: 100px !important; max-width: 100px !important; }   /* Poet uivatel - zk fixn */\n  th:nth-of-type(5), td:nth-of-type(5) { width: 80px !important; min-width: 80px !important; max-width: 80px !important; }      /* Aktivn - zk fixn */\n  th:last-child, td:last-child { width: 110px !important; min-width: 110px !important; max-width: 110px !important; }           /* Akce - zk fixn */\n`;\n\nconst Thead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n`;\n\nconst Th = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  color: white;\n  font-weight: 600;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: ${props => props.$sortable ? 'pointer' : 'default'};\n  user-select: none;\n  white-space: nowrap;\n  width: ${props => props.$width ? `${props.$width}px` : 'auto'};\n\n  &:hover {\n    background: ${props => props.$sortable ? 'rgba(255, 255, 255, 0.1)' : 'transparent'};\n  }\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst Tbody = styled.tbody``;\n\nconst Td = styled.td`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  vertical-align: middle;\n  white-space: nowrap;\n  width: ${props => props.$width ? `${props.$width}px` : 'auto'};\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst FilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst FilterCell = styled.th`\n  padding: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n  width: ${props => props.$width ? `${props.$width}px` : 'auto'};\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: white;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  border-radius: 4px;\n\n  &:hover:not(:disabled) {\n    background: rgba(59, 130, 246, 0.1);\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 20px !important;\n    height: 20px !important;\n  }\n`;\n\nconst RoleName = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-weight: 600;\n  color: #1e293b;\n`;\n\nconst RoleIcon = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: ${props => props.$inactive\n    ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)'\n    : 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)'\n  };\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1rem;\n`;\n\nconst StatusBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ${props => props.$active ? '#dcfce7' : '#fee2e2'};\n  color: ${props => props.$active ? '#166534' : '#991b1b'};\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n\n  /* Puntk msto ikony */\n  &::before {\n    content: '';\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: ${props => props.$active ? '#22c55e' : '#ef4444'};\n    margin-right: 0.25rem;\n  }\n`;\n\nconst StatBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 28px;\n  height: 28px;\n  padding: 0 0.5rem;\n  border-radius: 14px;\n  font-size: 0.75rem;\n  font-weight: 700;\n  background: ${props => {\n    if (props.$type === 'rights') return 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)';\n    if (props.$type === 'users') return 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)';\n    return 'linear-gradient(135deg, #10b981 0%, #059669 100%)';\n  }};\n  color: white;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst ActionButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  ${props => props.$variant === 'expand' ? `\n    &:hover {\n      color: #1e293b;\n      background: #f1f5f9;\n    }\n  ` : props.$variant === 'rights' ? `\n    &:hover {\n      color: #8b5cf6;\n      background: #f5f3ff;\n    }\n  ` : props.$variant === 'edit' ? `\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  ` : props.$variant === 'delete' ? `\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  ` : ''}\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nconst ExpandedRow = styled.tr`\n  background: #f8fafc !important;\n\n  &:hover {\n    background: #f8fafc !important;\n  }\n`;\n\nconst ExpandedCell = styled.td`\n  padding: 0 !important;\n`;\n\nconst ExpandedContent = styled.div`\n  padding: 1.5rem;\n  border-top: 2px solid #e2e8f0;\n`;\n\nconst Section = styled.div`\n  margin-bottom: ${props => props.$last ? '0' : '1.5rem'};\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e2e8f0;\n\n  h4 {\n    margin: 0;\n    font-size: 0.9375rem;\n    font-weight: 700;\n    color: #1e293b;\n    text-transform: uppercase;\n    letter-spacing: 0.025em;\n  }\n\n  svg {\n    color: #3b82f6;\n    width: 18px;\n    height: 18px;\n  }\n`;\n\nconst PermissionsGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 0.75rem;\n`;\n\nconst PermissionCard = styled.div`\n  padding: 0.875rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst PermissionCode = styled.div`\n  font-family: 'Courier New', monospace;\n  font-size: 0.8125rem;\n  font-weight: 700;\n  color: #3b82f6;\n  margin-bottom: 0.375rem;\n`;\n\nconst PermissionDesc = styled.div`\n  font-size: 0.8125rem;\n  color: #64748b;\n  line-height: 1.4;\n`;\n\nconst UsersList = styled.div`\n  display: grid;\n  gap: 0.75rem;\n`;\n\nconst UserCard = styled.div`\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst UserHeader = styled.div`\n  padding: 1rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  }\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  flex: 1;\n`;\n\nconst UserAvatar = styled.div`\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);\n`;\n\nconst UserDetails = styled.div`\n  flex: 1;\n`;\n\nconst UserName = styled.div`\n  font-weight: 700;\n  color: #1e293b;\n  font-size: 0.9375rem;\n  margin-bottom: 0.25rem;\n`;\n\nconst UserMeta = styled.div`\n  font-size: 0.8125rem;\n  color: #64748b;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n\n  > span {\n    display: flex;\n    align-items: center;\n    gap: 0.375rem;\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst UserRightsCount = styled.div`\n  font-size: 0.75rem;\n  font-weight: 700;\n  padding: 0.375rem 0.75rem;\n  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n  color: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 4px rgba(139, 92, 246, 0.2);\n`;\n\nconst UserRightsContent = styled.div`\n  padding: 1rem;\n  border-top: 1px solid #e2e8f0;\n  display: ${props => props.$visible ? 'block' : 'none'};\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0 0 0.5rem 0;\n    font-size: 1.125rem;\n    color: #64748b;\n  }\n\n  p {\n    margin: 0;\n    font-size: 0.875rem;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e2e8f0;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationInfo = styled.div`\n  color: #64748b;\n  font-size: 0.875rem;\n`;\n\nconst PaginationButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  background: white;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    border-color: #3b82f6;\n    color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.4rem 0.65rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  background: white;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  min-width: 2.5rem;\n\n  &:hover:not(:disabled) {\n    border-color: #3b82f6;\n    color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.div`\n  color: #64748b;\n  font-size: 0.875rem;\n`;\n\n// =============================================================================\n// PRVA MANAGEMENT DIALOG\n// =============================================================================\n\nconst DialogOverlay = styled.div`\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\nconst DialogContent = styled.div`\n  background: white;\n  border-radius: 20px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  max-width: 1100px;\n  width: 95%;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: ${slideInUp} 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n`;\n\nconst DialogHeader = styled.div`\n  padding: 2rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h2 {\n    margin: 0;\n    font-size: 1.5rem;\n    font-weight: 700;\n    color: white;\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: white;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst DialogBody = styled.div`\n  padding: 2rem;\n  overflow-y: auto;\n  flex: 1;\n\n  ${scrollbarStyles}\n`;\n\nconst DialogFooter = styled.div`\n  padding: 1.5rem 2rem;\n  border-top: 2px solid #e5e7eb;\n  background: #f9fafb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n`;\n\nconst PravaGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst PravaSection = styled.div`\n  h3 {\n    margin: 0 0 1rem 0;\n    font-size: 0.875rem;\n    font-weight: 700;\n    color: #374151;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n`;\n\nconst PravaList = styled.div`\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  max-height: 400px;\n  overflow-y: auto;\n  background: #fafbfc;\n\n  ${scrollbarStyles}\n`;\n\nconst PravoItem = styled.div`\n  padding: 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  transition: background 0.2s;\n  background: white;\n\n  &:first-of-type {\n    border-radius: 10px 10px 0 0;\n  }\n\n  &:last-child {\n    border-bottom: none;\n    border-radius: 0 0 10px 10px;\n  }\n\n  &:only-child {\n    border-radius: 10px;\n  }\n\n  &:hover {\n    background: #f8fafc;\n  }\n`;\n\nconst PravoInfo = styled.div`\n  flex: 1;\n  min-width: 0;\n  max-width: calc(100% - 120px);\n\n  .kod {\n    font-family: 'Courier New', monospace;\n    font-weight: 700;\n    color: #1e293b;\n    font-size: 0.8125rem;\n    margin-bottom: 0.25rem;\n    word-break: break-word;\n  }\n\n  .popis {\n    font-size: 0.75rem;\n    color: #64748b;\n    line-height: 1.4;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    word-break: break-word;\n  }\n`;\n\nconst PravoButton = styled.button`\n  padding: 0.5rem 0.875rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n\n  ${props => props.$variant === 'add' && `\n    background: #10b981;\n    color: white;\n\n    &:hover:not(:disabled) {\n      background: #059669;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n    }\n  `}\n\n  ${props => props.$variant === 'remove' && `\n    background: #ef4444;\n    color: white;\n\n    &:hover:not(:disabled) {\n      background: #dc2626;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);\n    }\n  `}\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst EmptyMessage = styled.div`\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n`;\n\nconst SecondaryButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n  background: #f3f4f6;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #e5e7eb;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\n// Styled komponenty pro CopyPravaDialog\nconst DialogTitle = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst SearchInputStyled = styled.input`\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.2s;\n  outline: none;\n\n  &:focus {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\nconst CancelButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: 2px solid #e5e7eb;\n  background: white;\n  color: #6b7280;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst SaveButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n  background: #3b82f6;\n  color: white;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst PravaManagementDialog = ({ role, availablePrava, onSave, onClose }) => {\n  const [searchAssigned, setSearchAssigned] = useState('');\n  const [searchAvailable, setSearchAvailable] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  \n  // Lokln stav pro pending zmny\n  const [pendingChanges, setPendingChanges] = useState({\n    toAdd: [],     // Pole ID prv k pidn\n    toRemove: []   // Pole ID prv k odebrn\n  });\n\n  // Lokln pidn prva (pesune z available do assigned)\n  const handleLocalAdd = (pravo) => {\n    const originalAssignedIds = (role.prava_globalni || []).map(p => p.id);\n    const wasOriginallyAssigned = originalAssignedIds.includes(pravo.id);\n    \n    setPendingChanges(prev => {\n      // Pokud prvo bylo v toRemove, jen ho odstra odtamtud (= vrt se do pvodnho stavu)\n      if (prev.toRemove.includes(pravo.id)) {\n        return {\n          toAdd: prev.toAdd,\n          toRemove: prev.toRemove.filter(id => id !== pravo.id)\n        };\n      }\n      \n      // Jinak pidej do toAdd (pouze pokud nebylo pvodn piazen)\n      if (!wasOriginallyAssigned && !prev.toAdd.includes(pravo.id)) {\n        return {\n          toAdd: [...prev.toAdd, pravo.id],\n          toRemove: prev.toRemove\n        };\n      }\n      \n      return prev;\n    });\n  };\n\n  // Lokln odebrn prva (pesune z assigned do available)\n  const handleLocalRemove = (pravo) => {\n    const originalAssignedIds = (role.prava_globalni || []).map(p => p.id);\n    const wasOriginallyAssigned = originalAssignedIds.includes(pravo.id);\n    \n    setPendingChanges(prev => {\n      // Pokud prvo bylo v toAdd, jen ho odstra odtamtud (= vrt se do pvodnho stavu)\n      if (prev.toAdd.includes(pravo.id)) {\n        return {\n          toAdd: prev.toAdd.filter(id => id !== pravo.id),\n          toRemove: prev.toRemove\n        };\n      }\n      \n      // Jinak pidej do toRemove (pouze pokud bylo pvodn piazen)\n      if (wasOriginallyAssigned && !prev.toRemove.includes(pravo.id)) {\n        return {\n          toAdd: prev.toAdd,\n          toRemove: [...prev.toRemove, pravo.id]\n        };\n      }\n      \n      return prev;\n    });\n  };\n\n  // Poet zmn\n  const changesCount = pendingChanges.toAdd.length + pendingChanges.toRemove.length;\n  const hasChanges = changesCount > 0;\n\n  // Prva piazen k roli (s aplikovanmi loklnmi zmnami)\n  const assignedPrava = useMemo(() => {\n    const originalAssigned = role.prava_globalni || [];\n    \n    // Pidej lokln pidan prva\n    const addedPrava = availablePrava.filter(p => pendingChanges.toAdd.includes(p.id));\n    \n    // Odeber lokln odebran prva\n    const current = [\n      ...originalAssigned.filter(p => !pendingChanges.toRemove.includes(p.id)),\n      ...addedPrava\n    ];\n    \n    // Aplikuj filtr\n    return current.filter(p => \n      p.kod_prava?.toLowerCase().includes(searchAssigned.toLowerCase()) ||\n      p.popis?.toLowerCase().includes(searchAssigned.toLowerCase())\n    );\n  }, [role, availablePrava, searchAssigned, pendingChanges]);\n\n  // Dostupn prva (s aplikovanmi loklnmi zmnami)\n  const availableToAssign = useMemo(() => {\n    const originalAssignedIds = (role.prava_globalni || []).map(p => p.id);\n    \n    // Dostupn = (vechna - pvodn piazen - lokln pidan) + lokln odebran\n    const current = availablePrava.filter(p => {\n      const wasOriginallyAssigned = originalAssignedIds.includes(p.id);\n      const isPendingAdd = pendingChanges.toAdd.includes(p.id);\n      const isPendingRemove = pendingChanges.toRemove.includes(p.id);\n      \n      // Dostupn, pokud: (nebylo piazen A nen pending add) NEBO je pending remove\n      return (!wasOriginallyAssigned && !isPendingAdd) || isPendingRemove;\n    });\n    \n    // Aplikuj filtr\n    return current.filter(p => \n      p.kod_prava?.toLowerCase().includes(searchAvailable.toLowerCase()) ||\n      p.popis?.toLowerCase().includes(searchAvailable.toLowerCase())\n    );\n  }, [role, availablePrava, searchAvailable, pendingChanges]);\n\n  // Uloen zmn\n  const handleSave = async () => {\n    if (!hasChanges) {\n      onClose();\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      await onSave(pendingChanges.toAdd, pendingChanges.toRemove);\n      onClose();\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  return createPortal(\n    <DialogOverlay>\n      <DialogContent>\n        <DialogHeader>\n          <h2>\n            <Shield size={24} />\n            Sprva prv role: {role.nazev_role}\n          </h2>\n          <CloseButton onClick={onClose} title=\"Zavt\">\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </DialogHeader>\n\n        <DialogBody>\n          <PravaGrid>\n            <PravaSection>\n              <h3>\n                <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#10b981' }} />\n                Piazen prva ({assignedPrava.length})\n              </h3>\n              <SearchBox style={{ marginBottom: '1rem' }}>\n                <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Hledat v piazench prvech...\"\n                  value={searchAssigned}\n                  onChange={(e) => setSearchAssigned(e.target.value)}\n                />\n                {searchAssigned && (\n                  <ClearButton onClick={() => setSearchAssigned('')}>\n                    <FontAwesomeIcon icon={faTimes} />\n                  </ClearButton>\n                )}\n              </SearchBox>\n              <PravaList>\n                {assignedPrava.length === 0 ? (\n                  <EmptyMessage>\n                    {searchAssigned ? 'dn prva nenalezena' : 'dn piazen prva'}\n                  </EmptyMessage>\n                ) : (\n                  assignedPrava.map((pravo, index) => {\n                    const isPendingAdd = pendingChanges.toAdd.includes(pravo.id);\n                    return (\n                      <PravoItem \n                        key={`assigned-${pravo.id}-${index}`}\n                        style={isPendingAdd ? { \n                          background: '#d1fae5', \n                          borderColor: '#10b981',\n                          borderWidth: '2px' \n                        } : {}}\n                      >\n                        <PravoInfo>\n                          <div className=\"kod\">\n                            {isPendingAdd && ' '}\n                            {pravo.kod_prava}\n                          </div>\n                          {pravo.popis && <div className=\"popis\">{pravo.popis}</div>}\n                        </PravoInfo>\n                        <PravoButton \n                          $variant=\"remove\"\n                          onClick={() => handleLocalRemove(pravo)}\n                          title=\"Odebrat prvo\"\n                        >\n                          <FontAwesomeIcon icon={faTrash} /> Odebrat\n                        </PravoButton>\n                      </PravoItem>\n                    );\n                  })\n                )}\n              </PravaList>\n            </PravaSection>\n\n            <PravaSection>\n              <h3>\n                <FontAwesomeIcon icon={faPlus} style={{ color: '#3b82f6' }} />\n                Dostupn prva ({availableToAssign.length})\n              </h3>\n              <SearchBox style={{ marginBottom: '1rem' }}>\n                <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Hledat v dostupnch prvech...\"\n                  value={searchAvailable}\n                  onChange={(e) => setSearchAvailable(e.target.value)}\n                />\n                {searchAvailable && (\n                  <ClearButton onClick={() => setSearchAvailable('')}>\n                    <FontAwesomeIcon icon={faTimes} />\n                  </ClearButton>\n                )}\n              </SearchBox>\n              <PravaList>\n                {availableToAssign.length === 0 ? (\n                  <EmptyMessage>\n                    {searchAvailable ? 'dn prva nenalezena' : 'Vechna prva jsou piazena'}\n                  </EmptyMessage>\n                ) : (\n                  availableToAssign.map((pravo, index) => {\n                    const isPendingRemove = pendingChanges.toRemove.includes(pravo.id);\n                    return (\n                      <PravoItem \n                        key={`available-${pravo.id}-${index}`}\n                        style={isPendingRemove ? { \n                          background: '#fee2e2', \n                          borderColor: '#ef4444',\n                          borderWidth: '2px' \n                        } : {}}\n                      >\n                        <PravoInfo>\n                          <div className=\"kod\">\n                            {isPendingRemove && ' '}\n                            {pravo.kod_prava}\n                          </div>\n                          {pravo.popis && <div className=\"popis\">{pravo.popis}</div>}\n                        </PravoInfo>\n                        <PravoButton \n                          $variant=\"add\"\n                          onClick={() => handleLocalAdd(pravo)}\n                          title=\"Pidat prvo\"\n                        >\n                          <FontAwesomeIcon icon={faPlus} /> Pidat\n                        </PravoButton>\n                      </PravoItem>\n                    );\n                  })\n                )}\n              </PravaList>\n            </PravaSection>\n          </PravaGrid>\n        </DialogBody>\n\n        <DialogFooter>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n            {hasChanges && (\n              <div style={{ \n                color: '#3b82f6', \n                fontSize: '0.9375rem',\n                fontWeight: 600 \n              }}>\n                {changesCount} {changesCount === 1 ? 'zmna' : changesCount < 5 ? 'zmny' : 'zmn'} ek na uloen\n              </div>\n            )}\n          </div>\n          <div style={{ display: 'flex', gap: '0.75rem' }}>\n            <SecondaryButton onClick={onClose} disabled={isSaving}>\n              <FontAwesomeIcon icon={faTimes} />\n              Storno\n            </SecondaryButton>\n            <ActionButton \n              $variant=\"primary\" \n              onClick={handleSave}\n              disabled={isSaving || !hasChanges}\n              style={{ background: '#10b981', borderColor: '#10b981' }}\n            >\n              {isSaving ? (\n                <>\n                  <FontAwesomeIcon icon={faSyncAlt} spin />\n                  Ukldm...\n                </>\n              ) : (\n                <>\n                  <FontAwesomeIcon icon={faCheckCircle} />\n                  Uloit zmny {hasChanges && `(${changesCount})`}\n                </>\n              )}\n            </ActionButton>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </DialogOverlay>,\n    document.body\n  );\n};\n\n// =============================================================================\n// DIALOG PRO KOPROVN PRV MEZI ROLEMI\n// =============================================================================\n\nconst CopyPravaDialog = ({ sourceRole, allRoles, onCopy, onClose }) => {\n  const [selectedTargetRoleIds, setSelectedTargetRoleIds] = useState([]);\n  const [selectedPravaIds, setSelectedPravaIds] = useState([]);\n  const [searchText, setSearchText] = useState('');\n  const [searchRoleText, setSearchRoleText] = useState('');\n  const [isCopying, setIsCopying] = useState(false);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n\n  // Inicializuj vechna prva jako vybran pi oteven\n  useEffect(() => {\n    if (sourceRole?.prava_globalni) {\n      setSelectedPravaIds(sourceRole.prava_globalni.map(p => p.id));\n    }\n  }, [sourceRole]);\n\n  // Filtrovan prva podle vyhledvn\n  const filteredPrava = useMemo(() => {\n    if (!sourceRole?.prava_globalni) return [];\n    if (!searchText) return sourceRole.prava_globalni;\n    \n    const search = searchText.toLowerCase();\n    return sourceRole.prava_globalni.filter(p =>\n      p.kod_prava?.toLowerCase().includes(search) ||\n      p.popis?.toLowerCase().includes(search)\n    );\n  }, [sourceRole, searchText]);\n\n  // Dostupn clov role (bez zdrojov role) s filtrem\n  const targetRoles = useMemo(() => {\n    if (!allRoles || !sourceRole) return [];\n    const filtered = allRoles.filter(r => r.id !== sourceRole.id);\n    \n    if (!searchRoleText) return filtered;\n    \n    const search = searchRoleText.toLowerCase();\n    return filtered.filter(r => {\n      const name = (r.nazev_role || r.kod_role || '').toLowerCase();\n      return name.includes(search);\n    });\n  }, [allRoles, sourceRole, searchRoleText]);\n\n  // Toggle clov role\n  const handleToggleTargetRole = (roleId) => {\n    setSelectedTargetRoleIds(prev =>\n      prev.includes(roleId)\n        ? prev.filter(id => id !== roleId)\n        : [...prev, roleId]\n    );\n  };\n\n  // Vybrat/Zruit vechny role\n  const handleSelectAllRoles = () => {\n    setSelectedTargetRoleIds(targetRoles.map(r => r.id));\n  };\n\n  const handleDeselectAllRoles = () => {\n    setSelectedTargetRoleIds([]);\n  };\n\n  // Toggle konkrtnho prva\n  const handleTogglePravo = (pravoId) => {\n    setSelectedPravaIds(prev =>\n      prev.includes(pravoId)\n        ? prev.filter(id => id !== pravoId)\n        : [...prev, pravoId]\n    );\n  };\n\n  // Vybrat/Zruit ve\n  const handleSelectAll = () => {\n    setSelectedPravaIds(filteredPrava.map(p => p.id));\n  };\n\n  const handleDeselectAll = () => {\n    setSelectedPravaIds([]);\n  };\n\n  // Otevt confirm dialog\n  const handleCopyClick = () => {\n    if (selectedTargetRoleIds.length === 0 || selectedPravaIds.length === 0) {\n      return;\n    }\n    setShowConfirmDialog(true);\n  };\n\n  // Provst koprovn po potvrzen\n  const handleConfirmCopy = async () => {\n    setShowConfirmDialog(false);\n    setIsCopying(true);\n    try {\n      await onCopy(selectedTargetRoleIds, selectedPravaIds);\n    } finally {\n      setIsCopying(false);\n    }\n  };\n\n  // Zskej seznam clovch rol pro zobrazen\n  const getTargetRolesList = () => {\n    return selectedTargetRoleIds\n      .map(id => {\n        const role = allRoles.find(r => r.id === id);\n        return role ? (role.nazev_role || role.kod_role) : `Role ${id}`;\n      });\n  };\n\n  const canCopy = selectedTargetRoleIds.length > 0 && selectedPravaIds.length > 0 && !isCopying;\n\n  if (!sourceRole) return null;\n\n  return createPortal(\n    <DialogOverlay>\n      <DialogContent style={{ maxWidth: '900px', width: '90%' }}>\n        <DialogHeader>\n          <DialogTitle>\n            <FontAwesomeIcon icon={faCopy} style={{ marginRight: '0.75rem', color: '#3b82f6' }} />\n            Koprovat prva role: {sourceRole.nazev_role || sourceRole.kod_role}\n          </DialogTitle>\n          <CloseButton onClick={onClose}>\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </DialogHeader>\n\n        <DialogBody>\n          {/* Vbr clovch rol (multi-select s checkboxy) */}\n          <div style={{ marginBottom: '1.5rem' }}>\n            <label style={{\n              display: 'block',\n              fontSize: '14px',\n              fontWeight: '600',\n              color: '#374151',\n              marginBottom: '0.5rem'\n            }}>\n              Clov role ({selectedTargetRoleIds.length} vybrno)\n            </label>\n\n            {/* Vyhledvn rol */}\n            <SearchInputStyled\n              type=\"text\"\n              placeholder=\" Hledat roli...\"\n              value={searchRoleText}\n              onChange={(e) => setSearchRoleText(e.target.value)}\n              style={{ marginBottom: '0.5rem' }}\n            />\n\n            {/* Tlatka Vybrat/Zruit vechny role */}\n            <div style={{\n              display: 'flex',\n              gap: '0.5rem',\n              marginBottom: '0.5rem',\n              justifyContent: 'flex-end'\n            }}>\n              <button\n                onClick={handleSelectAllRoles}\n                style={{\n                  padding: '0.375rem 0.75rem',\n                  fontSize: '12px',\n                  borderRadius: '6px',\n                  border: '1px solid #d1d5db',\n                  background: '#fff',\n                  color: '#374151',\n                  cursor: 'pointer'\n                }}\n              >\n                 Vybrat ve\n              </button>\n              <button\n                onClick={handleDeselectAllRoles}\n                style={{\n                  padding: '0.375rem 0.75rem',\n                  fontSize: '12px',\n                  borderRadius: '6px',\n                  border: '1px solid #d1d5db',\n                  background: '#fff',\n                  color: '#374151',\n                  cursor: 'pointer'\n                }}\n              >\n                 Zruit ve\n              </button>\n            </div>\n\n            {/* Grid s rolemi */}\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\n              gap: '0.5rem',\n              maxHeight: '200px',\n              overflowY: 'auto',\n              padding: '0.5rem',\n              border: '2px solid #e5e7eb',\n              borderRadius: '8px',\n              background: '#f9fafb'\n            }}>\n              {targetRoles.length === 0 ? (\n                <div style={{\n                  gridColumn: '1 / -1',\n                  textAlign: 'center',\n                  padding: '1rem',\n                  color: '#6b7280'\n                }}>\n                  {searchRoleText ? 'dn role nenalezeny' : 'dn dostupn role'}\n                </div>\n              ) : (\n                targetRoles.map(role => {\n                  const isSelected = selectedTargetRoleIds.includes(role.id);\n                  const roleName = role.nazev_role || role.kod_role || `Role ${role.id}`;\n                  const pravaCount = (role.prava_globalni || []).length;\n                  \n                  return (\n                    <label\n                      key={role.id}\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.5rem',\n                        padding: '0.5rem',\n                        background: isSelected ? '#dbeafe' : '#fff',\n                        border: `2px solid ${isSelected ? '#3b82f6' : '#e5e7eb'}`,\n                        borderRadius: '6px',\n                        cursor: 'pointer',\n                        transition: 'all 0.2s',\n                        userSelect: 'none'\n                      }}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={isSelected}\n                        onChange={() => handleToggleTargetRole(role.id)}\n                        style={{\n                          width: '16px',\n                          height: '16px',\n                          cursor: 'pointer'\n                        }}\n                      />\n                      <div style={{ flex: 1, minWidth: 0 }}>\n                        <div style={{\n                          fontSize: '13px',\n                          fontWeight: '600',\n                          color: '#1f2937',\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap'\n                        }}>\n                          {roleName}\n                        </div>\n                        <div style={{\n                          fontSize: '11px',\n                          color: '#6b7280'\n                        }}>\n                          {pravaCount} prv\n                        </div>\n                      </div>\n                    </label>\n                  );\n                })\n              )}\n            </div>\n          </div>\n\n          {/* Vyhledvn prv */}\n          <div style={{ marginBottom: '1rem' }}>\n            <SearchInputStyled\n              type=\"text\"\n              placeholder=\" Hledat prvo...\"\n              value={searchText}\n              onChange={(e) => setSearchText(e.target.value)}\n            />\n          </div>\n\n          {/* Tlatka Vybrat ve / Zruit ve */}\n          <div style={{\n            display: 'flex',\n            gap: '0.5rem',\n            marginBottom: '1rem',\n            justifyContent: 'flex-end'\n          }}>\n            <button\n              onClick={handleSelectAll}\n              style={{\n                padding: '0.5rem 1rem',\n                fontSize: '13px',\n                borderRadius: '6px',\n                border: '1px solid #d1d5db',\n                background: '#fff',\n                color: '#374151',\n                cursor: 'pointer',\n                transition: 'all 0.2s'\n              }}\n            >\n               Vybrat ve ({filteredPrava.length})\n            </button>\n            <button\n              onClick={handleDeselectAll}\n              style={{\n                padding: '0.5rem 1rem',\n                fontSize: '13px',\n                borderRadius: '6px',\n                border: '1px solid #d1d5db',\n                background: '#fff',\n                color: '#374151',\n                cursor: 'pointer',\n                transition: 'all 0.2s'\n              }}\n            >\n               Zruit ve\n            </button>\n          </div>\n\n          {/* Grid s prvy */}\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\n            gap: '0.75rem',\n            maxHeight: '400px',\n            overflowY: 'auto',\n            padding: '0.5rem',\n            border: '2px solid #e5e7eb',\n            borderRadius: '8px',\n            background: '#f9fafb'\n          }}>\n            {filteredPrava.length === 0 ? (\n              <div style={{\n                gridColumn: '1 / -1',\n                textAlign: 'center',\n                padding: '2rem',\n                color: '#6b7280'\n              }}>\n                {searchText ? 'dn prva nenalezena' : 'Role nem dn prva'}\n              </div>\n            ) : (\n              filteredPrava.map(pravo => {\n                const isSelected = selectedPravaIds.includes(pravo.id);\n                return (\n                  <label\n                    key={pravo.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'flex-start',\n                      gap: '0.5rem',\n                      padding: '0.75rem',\n                      background: isSelected ? '#dbeafe' : '#fff',\n                      border: `2px solid ${isSelected ? '#3b82f6' : '#e5e7eb'}`,\n                      borderRadius: '6px',\n                      cursor: 'pointer',\n                      transition: 'all 0.2s',\n                      userSelect: 'none'\n                    }}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={isSelected}\n                      onChange={() => handleTogglePravo(pravo.id)}\n                      style={{\n                        marginTop: '0.25rem',\n                        width: '16px',\n                        height: '16px',\n                        cursor: 'pointer'\n                      }}\n                    />\n                    <div style={{ flex: 1 }}>\n                      <div style={{\n                        fontSize: '13px',\n                        fontWeight: '600',\n                        color: '#1f2937',\n                        marginBottom: '0.25rem'\n                      }}>\n                        {pravo.kod_prava}\n                      </div>\n                      {pravo.popis && (\n                        <div style={{\n                          fontSize: '12px',\n                          color: '#6b7280',\n                          lineHeight: '1.4'\n                        }}>\n                          {pravo.popis}\n                        </div>\n                      )}\n                    </div>\n                  </label>\n                );\n              })\n            )}\n          </div>\n\n          {/* Info o vbru */}\n          <div style={{\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: '#f0f9ff',\n            border: '1px solid #bae6fd',\n            borderRadius: '6px',\n            fontSize: '14px',\n            color: '#0c4a6e'\n          }}>\n            <div style={{ marginBottom: '0.25rem' }}>\n              <strong>Prv k koprovn:</strong> {selectedPravaIds.length} z {sourceRole.prava_globalni.length}\n            </div>\n            <div>\n              <strong>Clovch rol:</strong> {selectedTargetRoleIds.length}\n            </div>\n            {selectedTargetRoleIds.length > 0 && (\n              <div style={{\n                marginTop: '0.5rem',\n                fontSize: '13px',\n                color: '#075985'\n              }}>\n                 Prva budou pidna do {selectedTargetRoleIds.length} {selectedTargetRoleIds.length === 1 ? 'role' : selectedTargetRoleIds.length < 5 ? 'rol' : 'rol'}\n              </div>\n            )}\n          </div>\n        </DialogBody>\n\n        <DialogFooter>\n          <CancelButton onClick={onClose} disabled={isCopying}>\n            <FontAwesomeIcon icon={faTimes} style={{ marginRight: '0.5rem' }} />\n            Zruit\n          </CancelButton>\n          <SaveButton onClick={handleCopyClick} disabled={!canCopy}>\n            <FontAwesomeIcon icon={faCopy} style={{ marginRight: '0.5rem' }} />\n            {isCopying \n              ? 'Kopruji...' \n              : `Koprovat ${selectedPravaIds.length} prv  ${selectedTargetRoleIds.length} ${selectedTargetRoleIds.length === 1 ? 'role' : 'rol'}`\n            }\n          </SaveButton>\n        </DialogFooter>\n      </DialogContent>\n\n      {/* Confirm Dialog pro hromadn koprovn */}\n      <ConfirmDialog\n        isOpen={showConfirmDialog}\n        onClose={() => setShowConfirmDialog(false)}\n        onConfirm={handleConfirmCopy}\n        title=\" Hromadn koprovn prv\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        confirmText=\"Ano, koprovat\"\n        cancelText=\"Zruit\"\n      >\n        <div style={{ marginBottom: '1rem' }}>\n          <p style={{ margin: '0 0 1rem 0', fontSize: '15px', color: '#374151' }}>\n            Chystte se zkoprovat <strong>{selectedPravaIds.length} prv</strong> do <strong>{selectedTargetRoleIds.length} {selectedTargetRoleIds.length === 1 ? 'role' : selectedTargetRoleIds.length < 5 ? 'rol' : 'rol'}</strong>.\n          </p>\n        </div>\n\n        {/* Seznam clovch rol */}\n        <div style={{\n          padding: '1rem',\n          background: '#fffbeb',\n          border: '2px solid #fbbf24',\n          borderRadius: '8px',\n          marginBottom: '1rem'\n        }}>\n          <div style={{\n            fontSize: '14px',\n            fontWeight: '600',\n            color: '#92400e',\n            marginBottom: '0.5rem'\n          }}>\n            Clov role:\n          </div>\n          <ul style={{\n            margin: 0,\n            paddingLeft: '1.5rem',\n            fontSize: '14px',\n            color: '#78350f'\n          }}>\n            {getTargetRolesList().map((roleName, idx) => (\n              <li key={idx} style={{ marginBottom: '0.25rem' }}>{roleName}</li>\n            ))}\n          </ul>\n        </div>\n\n        <p style={{ margin: 0, fontSize: '14px', color: '#6b7280' }}>\n          Tato operace pid vybran prva do vech uvedench rol. Prva, kter role ji m, budou peskoena.\n        </p>\n      </ConfirmDialog>\n    </DialogOverlay>,\n    document.body\n  );\n};\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst RoleTab = () => {\n  const { token, user: { username } = {}, userDetail, hasPermission } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // Kontrola oprvnn pro editaci\n  const canEdit = hasPermission('ADMIN') || hasPermission('DICT_MANAGE');\n  \n  // SuperAdmin pro cleanup funkcionalitu\n  const isSuperAdmin = userDetail?.roles?.some(role => role.kod_role === 'SUPERADMIN');\n\n  // Helper functions for user-specific localStorage\n  const user_id = userDetail?.user_id;\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby zpisu\n    }\n  };\n\n  const [data, setData] = useState([]);\n  const [globalFilter, setGlobalFilter] = useState(() => getUserStorage('role_search', ''));\n  const [columnFilters, setColumnFilters] = useState(() => getUserStorage('role_columnFilters', {}));\n  const [aktivniFilter, setAktivniFilter] = useState(() => getUserStorage('role_aktivniFilter', 'all')); // 'all' | 'aktivni' | 'neaktivni'\n  const [loading, setLoading] = useState(false);\n\n  // Pagination state\n  const [pageSize, setPageSize] = useState(() => getUserStorage('role_pageSize', 25));\n  const [pageIndex, setPageIndex] = useState(() => getUserStorage('role_pageIndex', 0));\n\n  // Dialog states\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState('create'); // 'create' | 'edit'\n  const [editingItem, setEditingItem] = useState(null);\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\n  const [deletingItem, setDeletingItem] = useState(null);\n\n  // Prva dialog\n  const [isPravaDialogOpen, setIsPravaDialogOpen] = useState(false);\n  const [selectedRole, setSelectedRole] = useState(null);\n  const [availablePrava, setAvailablePrava] = useState([]);\n\n  // Copy prva dialog\n  const [isCopyPravaDialogOpen, setIsCopyPravaDialogOpen] = useState(false);\n  const [copySourceRole, setCopySourceRole] = useState(null);\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('role');\n      // Normalizace dat - API vrac \"Popis\" s velkm P, potebujeme \"popis\" s malm p\n      // + Deduplikace prv (FE workaround pro BE bug s duplicitnmi vazbami)\n      const normalizedData = (result || []).map(item => {\n        // Deduplikace prava_globalni podle ID\n        const uniquePrava = item.prava_globalni ? \n          Array.from(new Map(item.prava_globalni.map(p => [p.id, p])).values()) \n          : [];\n        \n        return {\n          ...item,\n          popis: item.Popis || item.popis || '',\n          prava_globalni: uniquePrava\n        };\n      });\n      setData(normalizedData);\n    } catch (error) {\n      showToast?.('Chyba pi natn rol', { type: 'error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && username) {\n      if (cache.role?.loaded && cache.role.data) {\n        // Normalizace dat z cache - API vrac \"Popis\" s velkm P\n        // + Deduplikace prv (FE workaround pro BE bug)\n        const normalizedData = (cache.role.data || []).map(item => {\n          const uniquePrava = item.prava_globalni ? \n            Array.from(new Map(item.prava_globalni.map(p => [p.id, p])).values()) \n            : [];\n          \n          return {\n            ...item,\n            popis: item.Popis || item.popis || '',\n            prava_globalni: uniquePrava\n          };\n        });\n        setData(normalizedData);\n      } else {\n        fetchData();\n      }\n    }\n  }, [token, username, cache.role?.loaded]);\n\n  useEffect(() => {\n    setUserStorage('role_search', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('role_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('role_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('role_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('role_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  const handleAddNew = () => {\n    setDialogMode('create');\n    setEditingItem(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (role) => {\n    setDialogMode('edit');\n    setEditingItem(role);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteClick = (role) => {\n    setDeletingItem(role);\n    setIsConfirmOpen(true);\n  };\n\n  const handleSave = async (formData) => {\n    console.log(' RoleTab handleSave:', { dialogMode, formData, editingItem });\n    \n    try {\n      if (dialogMode === 'create') {\n        await apiv2Dictionaries.createRole({\n          token,\n          username,\n          ...formData\n        });\n        showToast?.('Role byla spn vytvoena', { type: 'success' });\n      } else {\n        await apiv2Dictionaries.updateRole({\n          token,\n          username,\n          id: editingItem.id,\n          ...formData\n        });\n        showToast?.('Role byla spn aktualizovna', { type: 'success' });\n      }\n      setIsDialogOpen(false);\n      invalidateCache('role');\n      fetchData();\n    } catch (error) {\n      console.error(' RoleTab handleSave ERROR:', error);\n      showToast?.(error.message || 'Chyba pi ukldn role', { type: 'error' });\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    try {\n      await apiv2Dictionaries.deleteRole({\n        token,\n        username,\n        id: deletingItem.id\n      });\n      showToast?.('Role byla spn smazna', { type: 'success' });\n      setIsConfirmOpen(false);\n      invalidateCache('role');\n      fetchData();\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi mazn role', { type: 'error' });\n    }\n  };\n\n  // Otevt dialog pro sprvu prv\n  const handleManagePrava = async (role) => {\n    setSelectedRole(role);\n    \n    // Nast vechna dostupn prva\n    try {\n      const pravaData = await loadDictionary('prava');\n      setAvailablePrava(pravaData || []);\n      setIsPravaDialogOpen(true);\n    } catch (error) {\n      showToast?.('Chyba pi natn prv', { type: 'error' });\n    }\n  };\n\n  // Uloit hromadn zmny v prvech\n  const handleSavePravaChanges = async (toAdd, toRemove) => {\n    try {\n      await apiv2Dictionaries.bulkUpdateRolePrava({\n        token,\n        username,\n        role_id: selectedRole.id,\n        prava_to_add: toAdd,\n        prava_to_remove: toRemove\n      });\n      \n      const addedCount = toAdd.length;\n      const removedCount = toRemove.length;\n      const message = [];\n      if (addedCount > 0) message.push(`Pidno: ${addedCount}`);\n      if (removedCount > 0) message.push(`Odebrno: ${removedCount}`);\n      \n      showToast?.(`Prva byla aktualizovna. ${message.join(', ')}`, { type: 'success' });\n      \n      // Invaliduj cache a nati fresh data\n      invalidateCache('role');\n      await fetchData();\n      \n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi aktualizaci prv', { type: 'error' });\n      throw error; // Re-throw aby dialog zstal oteven\n    }\n  };\n\n  // Otevt dialog pro koprovn prv\n  const handleCopyPrava = (role) => {\n    setCopySourceRole(role);\n    setIsCopyPravaDialogOpen(true);\n  };\n\n  // Provst koprovn prv do clov role\n  const handleCopyPravaExecute = async (targetRoleIds, selectedPravaIds) => {\n    try {\n      let totalCopied = 0;\n      let totalSkipped = 0;\n      const results = [];\n\n      // Prochzej vechny clov role\n      for (const targetRoleId of targetRoleIds) {\n        const targetRole = data.find(r => r.id === targetRoleId);\n        if (!targetRole) continue;\n\n        // Zjisti, kter prva clov role NEM (jen ta pidme)\n        const targetPravaIds = (targetRole.prava_globalni || []).map(p => p.id);\n        const pravaToAdd = selectedPravaIds.filter(id => !targetPravaIds.includes(id));\n\n        if (pravaToAdd.length === 0) {\n          totalSkipped++;\n          continue;\n        }\n\n        // Kopruj prva do tto role\n        await apiv2Dictionaries.bulkUpdateRolePrava({\n          token,\n          username,\n          role_id: targetRoleId,\n          prava_to_add: pravaToAdd,\n          prava_to_remove: []\n        });\n\n        totalCopied += pravaToAdd.length;\n        results.push({\n          role: targetRole.nazev_role || targetRole.kod_role,\n          count: pravaToAdd.length\n        });\n      }\n\n      // Zobraz vsledky\n      if (results.length === 0) {\n        showToast?.('Vechny clov role ji maj vybran prva', { type: 'info' });\n      } else if (results.length === 1) {\n        showToast?.(\n          ` Zkoprovno ${results[0].count} prv do role \"${results[0].role}\"`,\n          { type: 'success' }\n        );\n      } else {\n        const summary = results.map(r => `   ${r.role}: ${r.count} prv`).join('\\n');\n        showToast?.(\n          ` Zkoprovno prv do ${results.length} rol:\\n${summary}`,\n          { type: 'success', duration: 5000 }\n        );\n      }\n\n      // Refresh dat\n      invalidateCache('role');\n      await fetchData();\n\n      // Zavt dialog\n      setIsCopyPravaDialogOpen(false);\n      setCopySourceRole(null);\n\n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi koprovn prv', { type: 'error' });\n      throw error;\n    }\n  };\n\n  // Vyistit duplicitn prva (POUZE SUPERADMIN)\n  const handleCleanupDuplicates = async () => {\n    if (!window.confirm(\n      ' POZOR! Tato akce smae duplicitn piazen prv k rolm v databzi.\\n\\n' +\n      'Duplicity vznikly v minulosti a brn sprvnmu fungovn systmu.\\n\\n' +\n      'Tato akce je nevratn. Pokraovat?'\n    )) {\n      return;\n    }\n\n    try {\n      const result = await apiv2Dictionaries.cleanupDuplicatePrava({\n        token,\n        username,\n        dry_run: false\n      });\n\n      const message = result.data?.message || 'Duplicity byly vyitny';\n      const deletedCount = result.data?.deleted_count || 0;\n      \n      showToast?.(\n        `${message}. Odstranno ${deletedCount} duplicitnch zznam.`,\n        { type: 'success' }\n      );\n      \n      // Invaliduj cache a znovu nati data\n      invalidateCache('role');\n      await fetchData();\n      \n    } catch (error) {\n      showToast?.(error.message || 'Chyba pi itn duplicit', { type: 'error' });\n    }\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        accessorKey: 'nazev_role',\n        header: 'Nzev role',\n        size: 375,\n        minSize: 375,\n        maxSize: 375,\n        cell: ({ row }) => (\n          <RoleName>\n            <RoleIcon $inactive={!row.original.aktivni}>\n              <Shield />\n            </RoleIcon>\n            <div>{row.original.nazev_role}</div>\n          </RoleName>\n        ),\n      },\n      {\n        accessorKey: 'popis',\n        header: 'Popis',\n        size: undefined,\n        minSize: 200,\n        cell: ({ row }) => (\n          <div style={{ \n            textAlign: 'left',\n            color: row.original.popis ? '#374151' : '#9ca3af',\n            fontStyle: row.original.popis ? 'normal' : 'italic'\n          }}>\n            {row.original.popis || ''}\n          </div>\n        ),\n      },\n      {\n        id: 'pocet_prav',\n        accessorKey: 'statistiky.pocet_prav',\n        header: 'Poet prv',\n        size: 100,\n        minSize: 100,\n        maxSize: 100,\n        cell: ({ row }) => (\n          <StatBadge $type=\"rights\">\n            {row.original.statistiky?.pocet_prav || 0}\n          </StatBadge>\n        ),\n      },\n      {\n        id: 'pocet_uzivatelu',\n        accessorKey: 'statistiky.pocet_uzivatelu',\n        header: () => (\n          <div style={{ lineHeight: '1.2' }}>\n            Poet<br />uivatel\n          </div>\n        ),\n        size: 100,\n        minSize: 100,\n        maxSize: 100,\n        cell: ({ row }) => (\n          <StatBadge $type=\"users\">\n            {row.original.statistiky?.pocet_uzivatelu || 0}\n          </StatBadge>\n        ),\n      },\n      {\n        accessorKey: 'aktivni',\n        header: 'Aktivn',\n        size: 80,\n        minSize: 80,\n        maxSize: 80,\n        cell: ({ row }) => (\n          <div style={{\n            textAlign: 'center',\n            display: 'flex',\n            justifyContent: 'center',\n            fontSize: '18px'\n          }}\n          title={row.original.aktivni ? 'Aktivn' : 'Neaktivn'}\n          >\n            <FontAwesomeIcon\n              icon={row.original.aktivni ? faCheckCircle : faTimesCircle}\n              style={{ color: row.original.aktivni ? '#16a34a' : '#dc2626' }}\n            />\n          </div>\n        ),\n      },\n      {\n        id: 'actions',\n        size: 110,\n        minSize: 110,\n        maxSize: 110,\n        header: () => (\n          <div style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            fontSize: '16px'\n          }}>\n            <FontAwesomeIcon\n              icon={faBolt}\n              style={{ color: '#eab308' }}\n            />\n          </div>\n        ),\n        cell: ({ row }) => (\n          <ActionButtons>\n            <IconButton\n              $variant=\"expand\"\n              onClick={() => row.toggleExpanded()}\n              title={row.getIsExpanded() ? 'Skrt detaily' : 'Zobrazit detaily'}\n            >\n              <FontAwesomeIcon icon={row.getIsExpanded() ? faChevronUp : faChevronDown} />\n            </IconButton>\n            {canEdit && (\n              <>\n                <IconButton\n                  $variant=\"rights\"\n                  onClick={() => handleManagePrava(row.original)}\n                  title=\"Spravovat prva\"\n                  style={{ color: '#8b5cf6' }}\n                >\n                  <Key size={16} />\n                </IconButton>\n                <IconButton\n                  $variant=\"copy\"\n                  onClick={() => handleCopyPrava(row.original)}\n                  title=\"Koprovat prva do jin role\"\n                  style={{ color: '#3b82f6' }}\n                >\n                  <FontAwesomeIcon icon={faCopy} />\n                </IconButton>\n                <IconButton\n                  $variant=\"edit\"\n                  onClick={() => handleEdit(row.original)}\n                  title=\"Upravit roli\"\n                >\n                  <FontAwesomeIcon icon={faEdit} />\n                </IconButton>\n                <IconButton\n                  $variant=\"delete\"\n                  onClick={() => handleDeleteClick(row.original)}\n                  title=\"Smazat roli\"\n                >\n                  <FontAwesomeIcon icon={faTrash} />\n                </IconButton>\n              </>\n            )}\n          </ActionButtons>\n        ),\n      },\n    ],\n    []\n  );\n\n  // Custom global filter funkce - hled i v poddcch (prvech)\n  const customGlobalFilterFn = (row, columnId, filterValue) => {\n    const searchLower = filterValue.toLowerCase();\n\n    // Hlavn dek - role\n    const roleName = (row.original.nazev_role || '').toLowerCase();\n    const roleDesc = (row.original.popis || '').toLowerCase();\n    const userCount = (row.original.pocet_uzivatelu || '').toString();\n\n    if (roleName.includes(searchLower) || roleDesc.includes(searchLower) || userCount.includes(searchLower)) {\n      return true;\n    }\n\n    // Poddky - prva\n    if (row.original.permissions && Array.isArray(row.original.permissions)) {\n      return row.original.permissions.some(perm => {\n        const permName = (perm.nazev_prava || '').toLowerCase();\n        const permCode = (perm.kod_prava || '').toLowerCase();\n        const permDesc = (perm.popis_prava || '').toLowerCase();\n        return permName.includes(searchLower) || permCode.includes(searchLower) || permDesc.includes(searchLower);\n      });\n    }\n\n    return false;\n  };\n\n  // Filtrovan data podle columnFilters\n  const filteredData = useMemo(() => {\n    if (!data) return [];\n\n    return data.filter(item => {\n      // Aktivn filtr\n      if (aktivniFilter === 'aktivni' && !item.aktivni) return false;\n      if (aktivniFilter === 'neaktivni' && item.aktivni) return false;\n\n      // Column filter - nazev_role\n      if (columnFilters.nazev_role &&\n          !(item.nazev_role || '').toLowerCase().includes(columnFilters.nazev_role.toLowerCase())) {\n        return false;\n      }\n\n      // Column filter - popis\n      if (columnFilters.popis &&\n          !(item.popis || '').toLowerCase().includes(columnFilters.popis.toLowerCase())) {\n        return false;\n      }\n\n      // Column filter - pocet_prav\n      if (columnFilters.pocet_prav &&\n          !(item.statistiky?.pocet_prav || 0).toString().includes(columnFilters.pocet_prav)) {\n        return false;\n      }\n\n      // Column filter - pocet_uzivatelu\n      if (columnFilters.pocet_uzivatelu &&\n          !(item.statistiky?.pocet_uzivatelu || 0).toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, columnFilters, aktivniFilter]);\n\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getExpandedRowModel: getExpandedRowModel(),\n    state: {\n      globalFilter,\n      pagination: { pageSize, pageIndex },\n    },\n    onGlobalFilterChange: setGlobalFilter,\n    globalFilterFn: customGlobalFilterFn,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n  });\n\n  const renderExpandedRow = (row) => {\n    const role = row.original;\n\n    return (\n      <ExpandedRow>\n        <ExpandedCell colSpan={columns.length}>\n          <ExpandedContent>\n            {/* Prva role */}\n            <Section>\n              <SectionHeader>\n                <FontAwesomeIcon icon={faGlobe} />\n                <h4>Prva role (role m {role.statistiky?.pocet_uzivatelu || 0} {role.statistiky?.pocet_uzivatelu === 1 ? 'uivatele' : 'uivatel'})</h4>\n              </SectionHeader>\n              <div style={{\n                fontSize: '0.75rem',\n                color: '#64748b',\n                marginTop: '-0.5rem',\n                marginBottom: '1rem',\n                fontStyle: 'italic'\n              }}>\n                 Jednotliv prva mohou mt vce uivatel dky personalizovanm piazenm\n              </div>\n\n              {role.prava_globalni && role.prava_globalni.length > 0 ? (\n                <PermissionsGrid>\n                  {role.prava_globalni.map(pravo => (\n                    <PermissionCard key={pravo.id}>\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '0.5rem' }}>\n                        <PermissionCode>{pravo.kod_prava}</PermissionCode>\n                        {pravo.pocet_uzivatelu !== undefined && (\n                          <UserCountBadge\n                            title={`Celkem ${pravo.pocet_uzivatelu} ${pravo.pocet_uzivatelu === 1 ? 'uivatel m' : 'uivatel m'} toto prvo (${role.statistiky?.pocet_uzivatelu || 0} z role + personalizovan piazen)`}\n                          >\n                            <Users size={12} />\n                            {pravo.pocet_uzivatelu}\n                          </UserCountBadge>\n                        )}\n                      </div>\n                      <PermissionDesc>{pravo.popis || '-'}</PermissionDesc>\n                      <div style={{ marginTop: '0.5rem' }}>\n                        <StatusBadge $active={pravo.vazba_aktivni && pravo.pravo_aktivni}>\n                          {pravo.vazba_aktivni && pravo.pravo_aktivni ? 'Aktivn' : 'Neaktivn'}\n                        </StatusBadge>\n                      </div>\n                    </PermissionCard>\n                  ))}\n                </PermissionsGrid>\n              ) : (\n                <EmptyState style={{ padding: '2rem' }}>\n                  <p>dn prva nejsou piazena</p>\n                </EmptyState>\n              )}\n            </Section>\n          </ExpandedContent>\n        </ExpandedCell>\n      </ExpandedRow>\n    );\n  };\n\n  return (\n    <Container>\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Hledat v rolch, prvech nebo uivatelch...\"\n            value={globalFilter ?? ''}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <div style={{ display: 'flex', gap: '0.75rem' }}>\n          {canEdit && (\n            <ActionButton $variant=\"primary\" onClick={handleAddNew}>\n              <FontAwesomeIcon icon={faPlus} />\n              Nov role\n            </ActionButton>\n          )}\n          \n          {isSuperAdmin && (\n            <ActionButton \n              $variant=\"secondary\" \n              onClick={handleCleanupDuplicates}\n              title=\"Vyistit duplicitn piazen prv (POUZE SUPERADMIN)\"\n              style={{ \n                background: '#f59e0b',\n                color: 'white'\n              }}\n            >\n              <FontAwesomeIcon icon={faBroom} />\n              Vyistit duplicity\n            </ActionButton>\n          )}\n        </div>\n      </ActionBar>\n\n      <TableWrapper>\n        <TableContainer>\n          {loading ? (\n            <EmptyState>\n              <FontAwesomeIcon icon={faSyncAlt} spin style={{ width: '48px', height: '48px' }} />\n              <h3>Natm role...</h3>\n            </EmptyState>\n          ) : (\n            <StyledTable>\n              <Thead>\n                {table.getHeaderGroups().map((headerGroup) => (\n                  <tr key={headerGroup.id}>\n                    {headerGroup.headers.map((header) => (\n                      <Th\n                        key={header.id}\n                        $sortable={header.column.getCanSort()}\n                        $width={header.column.columnDef.size}\n                        onClick={header.column.getToggleSortingHandler()}\n                      >\n                        {flexRender(header.column.columnDef.header, header.getContext())}\n                        {{\n                          asc: ' ',\n                          desc: ' ',\n                        }[header.column.getIsSorted()] ?? null}\n                      </Th>\n                    ))}\n                  </tr>\n                ))}\n\n                {/* Druh dek - column filtry */}\n                <FilterRow>\n                  {table.getHeaderGroups()[0].headers.map((header) => (\n                    <FilterCell \n                      key={`filter-${header.id}`}\n                      $width={header.column.columnDef.size}\n                    >\n                      {header.id === 'nazev_role' ? (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Hledat nzev role...\"\n                            value={columnFilters.nazev_role || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { nazev_role, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, nazev_role: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.nazev_role && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { nazev_role, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      ) : header.id === 'popis' ? (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"text\"\n                            placeholder=\"Hledat popis...\"\n                            value={columnFilters.popis || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { popis, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, popis: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.popis && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { popis, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      ) : header.id === 'pocet_prav' ? (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"number\"\n                            placeholder=\"Poet...\"\n                            value={columnFilters.pocet_prav || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { pocet_prav, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, pocet_prav: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.pocet_prav && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { pocet_prav, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      ) : header.id === 'pocet_uzivatelu' ? (\n                        <ColumnFilterWrapper>\n                          <FontAwesomeIcon icon={faSearch} />\n                          <ColumnFilterInput\n                            type=\"number\"\n                            placeholder=\"Poet...\"\n                            value={columnFilters.pocet_uzivatelu || ''}\n                            onChange={(e) => {\n                              const value = e.target.value;\n                              setColumnFilters(prev => {\n                                if (!value) {\n                                  const { pocet_uzivatelu, ...rest } = prev;\n                                  return rest;\n                                }\n                                return { ...prev, pocet_uzivatelu: value };\n                              });\n                            }}\n                          />\n                          {columnFilters.pocet_uzivatelu && (\n                            <ColumnClearButton\n                              onClick={() => {\n                                setColumnFilters(prev => {\n                                  const { pocet_uzivatelu, ...rest } = prev;\n                                  return rest;\n                                });\n                              }}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </ColumnClearButton>\n                          )}\n                        </ColumnFilterWrapper>\n                      ) : header.id === 'aktivni' ? (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '32px' }}>\n                          <IconFilterButton\n                            onClick={() => {\n                              if (aktivniFilter === 'all') {\n                                setAktivniFilter('aktivni');\n                              } else if (aktivniFilter === 'aktivni') {\n                                setAktivniFilter('neaktivni');\n                              } else {\n                                setAktivniFilter('all');\n                              }\n                            }}\n                            title={\n                              aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                              aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                              'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                            }\n                          >\n                            {aktivniFilter === 'all' ? (\n                              <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                                <FontAwesomeIcon\n                                  icon={faCheckCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                    color: '#16a34a'\n                                  }}\n                                />\n                                <FontAwesomeIcon\n                                  icon={faTimesCircle}\n                                  style={{\n                                    position: 'absolute',\n                                    left: 0,\n                                    top: 0,\n                                    clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                    color: '#dc2626'\n                                  }}\n                                />\n                              </div>\n                            ) : aktivniFilter === 'aktivni' ? (\n                              <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                            ) : (\n                              <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                            )}\n                          </IconFilterButton>\n                        </div>\n                      ) : header.id === 'actions' ? (\n                        <div style={{ display: 'flex', justifyContent: 'center', gap: '0.25rem' }}>\n                          <IconFilterButton\n                            onClick={() => {\n                              setColumnFilters({});\n                              setAktivniFilter('all');\n                            }}\n                            title=\"Vymazat vechny filtry\"\n                            disabled={Object.keys(columnFilters).length === 0 && aktivniFilter === 'all'}\n                          >\n                            <FontAwesomeIcon icon={faEraser} style={{ fontSize: '14px' }} />\n                          </IconFilterButton>\n                        </div>\n                      ) : null}\n                    </FilterCell>\n                  ))}\n                </FilterRow>\n              </Thead>\n              <Tbody>\n                {table.getRowModel().rows.length === 0 ? (\n                  <tr>\n                    <Td colSpan={columns.length}>\n                      <EmptyState>\n                        <Shield size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                        <h3>dn role</h3>\n                        <p>{globalFilter ? 'Zkuste zmnit vyhledvn' : 'Nejsou k dispozici dn role'}</p>\n                      </EmptyState>\n                    </Td>\n                  </tr>\n                ) : (\n                  table.getRowModel().rows.map((row, index) => {\n                    const isInactive = !row.original.aktivni;\n                    const isEven = index % 2 === 0;\n\n                    return (\n                      <React.Fragment key={row.id}>\n                        <tr\n                          style={{\n                            background: isInactive ? '#f8f9fa' : (isEven ? '#f8fafc' : 'white'),\n                            opacity: isInactive ? 0.7 : 1,\n                            transition: 'all 0.2s ease',\n                          }}\n                          onMouseEnter={(e) => {\n                            e.currentTarget.style.background = isInactive ? '#e9ecef' : '#f0f9ff';\n                          }}\n                          onMouseLeave={(e) => {\n                            e.currentTarget.style.background = isInactive ? '#f8f9fa' : (isEven ? '#f8fafc' : 'white');\n                          }}\n                        >\n                          {row.getVisibleCells().map((cell) => (\n                            <Td \n                              key={cell.id}\n                              $width={cell.column.columnDef.size}\n                            >\n                              {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                            </Td>\n                          ))}\n                        </tr>\n                        {row.getIsExpanded() && renderExpandedRow(row)}\n                      </React.Fragment>\n                    );\n                  })\n                )}\n              </Tbody>\n            </StyledTable>\n          )}\n        </TableContainer>\n\n        {!loading && table.getPageCount() > 0 && (\n          <Pagination>\n            <PageInfo>\n              Zobrazeno {Math.min(\n                pageIndex * pageSize + 1,\n                table.getFilteredRowModel().rows.length\n              )} - {Math.min(\n                (pageIndex + 1) * pageSize,\n                table.getFilteredRowModel().rows.length\n              )}{' '}\n              z {table.getFilteredRowModel().rows.length} rol\n            </PageInfo>\n\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              <span>Zobrazit:</span>\n              <PageSizeSelect\n                value={pageSize}\n                onChange={(e) => {\n                  const newSize = Number(e.target.value);\n                  setPageSize(newSize);\n                  setPageIndex(0);\n                }}\n              >\n                <option value=\"10\">10</option>\n                <option value=\"25\">25</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n                <option value=\"250\">250</option>\n                <option value=\"500\">500</option>\n              </PageSizeSelect>\n\n              <PaginationButton\n                onClick={() => setPageIndex(0)}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={() => setPageIndex(prev => Math.max(0, prev - 1))}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n\n              <span style={{ margin: '0 0.5rem' }}>\n                Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n              </span>\n\n              <PaginationButton\n                onClick={() => setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1))}\n                disabled={pageIndex >= table.getPageCount() - 1}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={() => setPageIndex(table.getPageCount() - 1)}\n                disabled={pageIndex >= table.getPageCount() - 1}\n              >\n                \n              </PaginationButton>\n            </div>\n          </Pagination>\n        )}\n      </TableWrapper>\n\n      {/* Dialog pro vytvoen/pravu role */}\n      <UniversalDictionaryDialog\n        isOpen={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSave={handleSave}\n        editData={editingItem}\n        title={dialogMode === 'create' ? 'Vytvoit novou roli' : 'Upravit roli'}\n        icon={Shield}\n        fields={[\n          { name: 'nazev_role', label: 'Nzev role', type: 'text', required: true },\n          { name: 'popis', label: 'Popis', type: 'textarea', required: false },\n          { name: 'aktivni', label: 'Aktivn', type: 'checkbox', required: false, default: true }\n        ]}\n      />\n\n      {/* Potvrzovac dialog pro smazn */}\n      <DictionaryConfirmDialog\n        isOpen={isConfirmOpen}\n        onClose={() => setIsConfirmOpen(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Smazat roli\"\n        message={`Opravdu chcete smazat roli \"${deletingItem?.nazev_role}\"?`}\n      />\n\n      {/* Dialog pro sprvu prv role */}\n      {isPravaDialogOpen && selectedRole && (\n        <PravaManagementDialog\n          role={selectedRole}\n          availablePrava={availablePrava}\n          onSave={handleSavePravaChanges}\n          onClose={() => setIsPravaDialogOpen(false)}\n        />\n      )}\n\n      {/* Dialog pro koprovn prv mezi rolemi */}\n      {isCopyPravaDialogOpen && copySourceRole && (\n        <CopyPravaDialog\n          sourceRole={copySourceRole}\n          allRoles={data}\n          onCopy={handleCopyPravaExecute}\n          onClose={() => {\n            setIsCopyPravaDialogOpen(false);\n            setCopySourceRole(null);\n          }}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default RoleTab;\n","/**\n * Prva Tab - Sprva prv s plnou CRUD funkcionalitou\n *\n * DB: id, kod_prava, popis, aktivni\n * API: /ciselniky/prava/list, insert, update, delete\n *\n * Features:\n * - TanStack Table s azenm\n * - Globln fulltextov vyhledvn\n * - Sloupcov textov filtry (kod_prava, popis)\n * - Icon filtr pro aktivn/neaktivn\n * - localStorage perzistence filtr\n * - ID jako superscript\n * - Pln CRUD funkcionalita (vytvoen, editace, mazn)\n * - Oprvnn: ADMIN nebo DICT_MANAGE\n *\n * @date 2025-11-17\n */\n\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSearch, faPlus, faEdit, faTrash,\n  faChevronUp, faChevronDown, faTimes,\n  faCheckCircle, faTimesCircle, faExclamationCircle, faBolt, faEraser\n} from '@fortawesome/free-solid-svg-icons';\nimport { Key, Users } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport {\n  getPravaList,\n  createPravo,\n  updatePravo,\n  deletePravo\n} from '../../../services/apiv2Dictionaries';\nimport UniversalDictionaryDialog from '../UniversalDictionaryDialog';\nimport DictionaryConfirmDialog from '../DictionaryConfirmDialog';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Fixn ky sloupc */\n  th:nth-of-type(1), td:nth-of-type(1) { width: auto; }     /* Popis prva */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 200px; }    /* Kd prva */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 140px; }    /* Poet uivatel */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 90px; }     /* Aktivn */\n  th:last-child, td:last-child { width: 100px; }            /* Akce */\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 0.75rem 1rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n`;\n\nconst TableHeaderFilterCell = styled.th`\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e5e7eb;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n  color: #374151;\n  vertical-align: middle;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\n// Column filter components\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnFilter = styled(ColumnFilterInput)``;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PaginationControls = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageButton = styled(PaginationButton)``;\n\nconst PageInfo = styled.span`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst LoadingOverlay = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n`;\n\nconst EmptyState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 1rem;\n    opacity: 0.3;\n  }\n\n  h3 {\n    margin: 0.5rem 0;\n    color: #374151;\n    font-size: 1.125rem;\n  }\n\n  p {\n    margin: 0.5rem 0 0 0;\n    color: #6b7280;\n    font-size: 0.875rem;\n  }\n`;\n\nconst LoadingState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 1rem;\n`;\n\nconst InfoBadge = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  font-size: 0.875rem;\n  color: #475569;\n  white-space: nowrap;\n`;\n\nconst CodeBadge = styled.span`\n  display: inline-block;\n  padding: 4px 8px;\n  background-color: #f1f5f9;\n  border: 1px solid #cbd5e1;\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  font-size: 12px;\n  color: #475569;\n`;\n\nconst Badge = styled.span`\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n`;\n\nconst PermissionBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);\n  border-radius: 6px;\n  font-weight: 500;\n  color: #1e40af;\n`;\n\nconst UserCountBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\n  color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nconst PravaTab = () => {\n  const { token, user, userDetail, hasPermission } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { cache, loadDictionary, invalidateCache } = useContext(DictionaryCacheContext);\n\n  // Kontrola oprvnn pro editaci\n  const canEdit = hasPermission('ADMIN') || hasPermission('DICT_MANAGE');\n\n  // ============= LOCALSTORAGE HELPERS =============\n  const user_id = userDetail?.user_id;\n\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby\n    }\n  };\n\n  // ============= STATE =============\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('prava_globalFilter', '');\n  });\n\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('prava_columnFilters', {});\n  });\n\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('prava_aktivniFilter', 'all');\n  });\n\n  const [sorting, setSorting] = useState(() => {\n    return getUserStorage('prava_sorting', []);\n  });\n\n  const [pageSize, setPageSize] = useState(() => {\n    return getUserStorage('prava_pageSize', 25);\n  });\n\n  const [pageIndex, setPageIndex] = useState(() => {\n    return getUserStorage('prava_pageIndex', 0);\n  });\n\n  // Dialog state\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [dialogMode, setDialogMode] = useState('create');\n  const [editingItem, setEditingItem] = useState(null);\n\n  // Confirm dialog state\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\n  const [deletingItem, setDeletingItem] = useState(null);\n\n  // ============= SAVE TO LOCALSTORAGE =============\n  useEffect(() => {\n    setUserStorage('prava_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('prava_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('prava_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('prava_sorting', sorting);\n  }, [sorting, user_id]);\n\n  useEffect(() => {\n    setUserStorage('prava_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('prava_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============= DATA FETCHING =============\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const result = await loadDictionary('prava');\n      setData(result || []);\n    } catch (error) {\n      showToast(error.message || 'Chyba pi natn prv', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (token && user?.username) {\n      if (cache.prava?.loaded && cache.prava.data) {\n        setData(cache.prava.data);\n        setLoading(false);\n      } else {\n        fetchData();\n      }\n    } else {\n    }\n  }, [token, user?.username, cache.prava?.loaded]);\n\n  // ============= FILTERED DATA =============\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      // Icon filtr - aktivn/neaktivn\n      // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n      const isAktivni = item.aktivni === 1 || item.aktivni === true || item.aktivni === \"1\";\n\n      if (aktivniFilter === 'aktivni' && !isAktivni) return false;\n      if (aktivniFilter === 'neaktivni' && isAktivni) return false;\n\n      // Global filter\n      if (globalFilter) {\n        const searchLower = globalFilter.toLowerCase();\n        const matchGlobal =\n          (item.kod_prava || '').toLowerCase().includes(searchLower) ||\n          (item.popis || '').toLowerCase().includes(searchLower) ||\n          (item.id || '').toString().toLowerCase().includes(searchLower);\n\n        if (!matchGlobal) return false;\n      }\n\n      // Column filters - textov\n      if (columnFilters.kod_prava &&\n          !(item.kod_prava || '').toLowerCase().includes(columnFilters.kod_prava.toLowerCase())) {\n        return false;\n      }\n\n      if (columnFilters.popis &&\n          !(item.popis || '').toLowerCase().includes(columnFilters.popis.toLowerCase())) {\n        return false;\n      }\n\n      // Filtr potu uivatel (seln)\n      if (columnFilters.pocet_uzivatelu &&\n          item.pocet_uzivatelu !== undefined &&\n          !item.pocet_uzivatelu.toString().includes(columnFilters.pocet_uzivatelu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [data, globalFilter, columnFilters, aktivniFilter]);\n\n  // ============= COLUMNS DEFINITION =============\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'popis',\n      header: 'Popis prva',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem' }}>\n          <Key size={16} style={{ color: '#3b82f6', marginTop: '2px' }} />\n          <span style={{ fontWeight: '600', color: row.original.popis ? '#374151' : '#9ca3af' }}>\n            {row.original.popis || '-'}\n            <sup style={{\n              fontSize: '0.65em',\n              opacity: 0.6,\n              marginLeft: '0.25rem',\n              color: '#6b7280',\n              fontWeight: 'normal'\n            }}>\n              #{row.original.id}\n            </sup>\n          </span>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'kod_prava',\n      header: 'Kd prva',\n      cell: ({ getValue }) => (\n        <Badge>{getValue() || ''}</Badge>\n      )\n    },\n    {\n      accessorKey: 'pocet_uzivatelu',\n      header: 'Poet uivatel',\n      cell: ({ row }) => (\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          {row.original.pocet_uzivatelu !== undefined ? (\n            <UserCountBadge\n              title={`${row.original.pocet_uzivatelu} ${row.original.pocet_uzivatelu === 1 ? 'uivatel m' : 'uivatel m'} toto prvo`}\n            >\n              <Users size={12} />\n              {row.original.pocet_uzivatelu}\n            </UserCountBadge>\n          ) : (\n            <span style={{ color: '#9ca3af' }}></span>\n          )}\n        </div>\n      )\n    },\n    {\n      accessorKey: 'aktivni',\n      header: 'Aktivn',\n      cell: ({ row }) => {\n        // Normalizace aktivni pole (me bt 1/0, \"1\"/\"0\" nebo true/false)\n        const isAktivni = row.original.aktivni === 1 || row.original.aktivni === true || row.original.aktivni === \"1\";\n        return (\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <FontAwesomeIcon\n              icon={isAktivni ? faCheckCircle : faTimesCircle}\n              style={{\n                color: isAktivni ? '#22c55e' : '#ef4444',\n                fontSize: '18px'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    ...(canEdit ? [{\n      id: 'actions',\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => (\n        <ActionCell>\n          <IconButton\n            className=\"edit\"\n            onClick={() => handleEdit(row.original)}\n            title=\"Upravit prvo\"\n          >\n            <FontAwesomeIcon icon={faEdit} />\n          </IconButton>\n          <IconButton\n            className=\"delete\"\n            onClick={() => handleDeleteClick(row.original)}\n            title=\"Smazat prvo\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </IconButton>\n        </ActionCell>\n      )\n    }] : [])\n  ], [data]);\n\n  // ============= TABLE INSTANCE =============\n  const table = useReactTable({\n    data: filteredData,\n    columns,\n    state: {\n      sorting,\n      pagination: { pageIndex, pageSize },\n    },\n    onSortingChange: setSorting,\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    manualPagination: false,\n  });\n\n  // ============= HANDLERS =============\n  const handleCreate = () => {\n    setDialogMode('create');\n    setEditingItem(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (item) => {\n    setDialogMode('edit');\n    setEditingItem(item);\n    setIsDialogOpen(true);\n  };\n\n  const handleDeleteClick = (item) => {\n    setDeletingItem(item);\n    setIsConfirmOpen(true);\n  };\n\n  const handleSave = async (formData) => {\n    try {\n      if (dialogMode === 'create') {\n        await createPravo({\n          token,\n          username: user.username,\n          ...formData\n        });\n        showToast('Prvo bylo spn vytvoeno', 'success');\n      } else {\n        await updatePravo({\n          token,\n          username: user.username,\n          id: editingItem.id,\n          ...formData\n        });\n        showToast('Prvo bylo spn aktualizovno', 'success');\n      }\n      setIsDialogOpen(false);\n      invalidateCache('prava');\n      fetchData();\n    } catch (error) {\n      showToast(error.message || 'Chyba pi ukldn prva', 'error');\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    try {\n      await deletePravo({\n        token,\n        username: user.username,\n        id: deletingItem.id\n      });\n      showToast('Prvo bylo spn smazno', 'success');\n      setIsConfirmOpen(false);\n      invalidateCache('prava');\n      fetchData();\n    } catch (error) {\n      showToast(error.message || 'Chyba pi mazn prva', 'error');\n    }\n  };\n\n  const handleAktivniFilterClick = () => {\n    setAktivniFilter(prev => {\n      if (prev === 'all') return 'aktivni';\n      if (prev === 'aktivni') return 'neaktivni';\n      return 'all';\n    });\n  };\n\n  const handleClearFilters = () => {\n    setColumnFilters({});\n    setAktivniFilter('all');\n  };\n\n  // ============= PAGINATION HANDLERS =============\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  // ============= RENDER =============\n  return (\n    <Container>\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Vyhledat v prvech...\"\n            value={globalFilter}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        {canEdit && (\n          <ActionButton $primary onClick={handleCreate} title=\"Vytvoit nov prvo\">\n            <FontAwesomeIcon icon={faPlus} />\n            Nov prvo\n          </ActionButton>\n        )}\n      </ActionBar>\n\n      <TableContainer>\n        {loading ? (\n          <LoadingState>Natm prva...</LoadingState>\n        ) : (\n          <>\n            <Table>\n              <tbody>\n                <TableHeaderRow>\n                  {table.getHeaderGroups()[0].headers.map(header => (\n                    <TableHeaderCell\n                      key={header.id}\n                      style={{\n                        width: header.id === 'aktivni' ? '80px' :\n                               header.id === 'actions' ? '90px' : 'auto',\n                        maxWidth: header.id === 'aktivni' ? '80px' :\n                                  header.id === 'actions' ? '90px' : 'none'\n                      }}\n                    >\n                      <HeaderContent\n                        onClick={header.column.getToggleSortingHandler()}\n                        style={{ cursor: 'pointer' }}\n                      >\n                        <span>\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </span>\n                        {header.column.getIsSorted() && (\n                          <FontAwesomeIcon\n                            icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                            style={{ marginLeft: '0.5rem', fontSize: '0.75rem' }}\n                          />\n                        )}\n                      </HeaderContent>\n                    </TableHeaderCell>\n                  ))}\n                </TableHeaderRow>\n\n                <TableHeaderFilterRow>\n                  <TableHeaderCell>\n                    <ColumnFilterWrapper>\n                      <FontAwesomeIcon icon={faSearch} />\n                      <ColumnFilterInput\n                        type=\"text\"\n                        placeholder=\"Hledat popis...\"\n                        value={columnFilters.popis || ''}\n                        onChange={(e) => setColumnFilters(prev => ({...prev, popis: e.target.value}))}\n                      />\n                      {columnFilters.popis && (\n                        <ColumnClearButton\n                          onClick={() => setColumnFilters(prev => {\n                            const { popis, ...rest } = prev;\n                            return rest;\n                          })}\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </ColumnClearButton>\n                      )}\n                    </ColumnFilterWrapper>\n                  </TableHeaderCell>\n                  <TableHeaderCell>\n                    <ColumnFilterWrapper>\n                      <FontAwesomeIcon icon={faSearch} />\n                      <ColumnFilterInput\n                        type=\"text\"\n                        placeholder=\"Kd...\"\n                        value={columnFilters.kod_prava || ''}\n                        onChange={(e) => setColumnFilters(prev => ({...prev, kod_prava: e.target.value}))}\n                      />\n                      {columnFilters.kod_prava && (\n                        <ColumnClearButton\n                          onClick={() => setColumnFilters(prev => {\n                            const { kod_prava, ...rest } = prev;\n                            return rest;\n                          })}\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </ColumnClearButton>\n                      )}\n                    </ColumnFilterWrapper>\n                  </TableHeaderCell>\n                  <TableHeaderCell>\n                    <ColumnFilterWrapper>\n                      <FontAwesomeIcon icon={faSearch} />\n                      <ColumnFilterInput\n                        type=\"number\"\n                        placeholder=\"Poet...\"\n                        value={columnFilters.pocet_uzivatelu || ''}\n                        onChange={(e) => setColumnFilters(prev => ({...prev, pocet_uzivatelu: e.target.value}))}\n                      />\n                      {columnFilters.pocet_uzivatelu && (\n                        <ColumnClearButton\n                          onClick={() => setColumnFilters(prev => {\n                            const { pocet_uzivatelu, ...rest } = prev;\n                            return rest;\n                          })}\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </ColumnClearButton>\n                      )}\n                    </ColumnFilterWrapper>\n                  </TableHeaderCell>\n                  <TableHeaderCell style={{ width: '90px', maxWidth: '90px' }}>\n                    <div style={{ display: 'flex', justifyContent: 'center' }}>\n                      <IconFilterButton\n                        onClick={handleAktivniFilterClick}\n                        title={\n                          aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                          aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                          'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                        }\n                      >\n                        {aktivniFilter === 'all' ? (\n                          <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                            <FontAwesomeIcon\n                              icon={faCheckCircle}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                color: '#16a34a'\n                              }}\n                            />\n                            <FontAwesomeIcon\n                              icon={faTimesCircle}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                color: '#dc2626'\n                              }}\n                            />\n                          </div>\n                        ) : aktivniFilter === 'aktivni' ? (\n                          <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                        ) : (\n                          <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                        )}\n                      </IconFilterButton>\n                    </div>\n                  </TableHeaderCell>\n                  {canEdit && (\n                    <TableHeaderCell style={{ width: '90px', maxWidth: '90px' }}>\n                      <div style={{ display: 'flex', justifyContent: 'center' }}>\n                        <FilterActionButton\n                          onClick={handleClearFilters}\n                          title=\"Vymazat vechny filtry\"\n                        >\n                          <FontAwesomeIcon icon={faEraser} />\n                        </FilterActionButton>\n                      </div>\n                    </TableHeaderCell>\n                  )}\n                </TableHeaderFilterRow>\n\n                {filteredData.length === 0 ? (\n                  <tr>\n                    <TableCell colSpan={canEdit ? 5 : 4}>\n                      <EmptyState>\n                        <Key size={48} style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                        <h3>{data.length === 0 ? 'dn prva' : 'Nenalezena dn prva'}</h3>\n                        <p>{data.length === 0 ? 'Nejsou k dispozici dn prva' : 'Zkuste zmnit vyhledvn nebo filtry'}</p>\n                      </EmptyState>\n                    </TableCell>\n                  </tr>\n                ) : (\n                  table.getRowModel().rows.map(row => (\n                    <TableRow key={row.id}>\n                      {row.getVisibleCells().map(cell => (\n                        <TableCell\n                          key={cell.id}\n                          style={{\n                            width: cell.column.id === 'aktivni' ? '80px' :\n                                   cell.column.id === 'actions' ? '90px' : 'auto',\n                            maxWidth: cell.column.id === 'aktivni' ? '80px' :\n                                      cell.column.id === 'actions' ? '90px' : 'none'\n                          }}\n                        >\n                          {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  ))\n                )}\n              </tbody>\n            </Table>\n\n            <Pagination>\n              <PaginationInfo>\n                Zobrazeno {Math.min(pageIndex * pageSize + 1, filteredData.length)} - {Math.min((pageIndex + 1) * pageSize, filteredData.length)} z {filteredData.length} prv\n              </PaginationInfo>\n\n              <PaginationControls>\n                <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                  Zobrazit:\n                </span>\n                <PageSizeSelect\n                  value={pageSize}\n                  onChange={(e) => {\n                    const newSize = Number(e.target.value);\n                    setPageSize(newSize);\n                    setPageIndex(0);\n                  }}\n                >\n                  <option value=\"10\">10</option>\n                  <option value=\"25\">25</option>\n                  <option value=\"50\">50</option>\n                  <option value=\"100\">100</option>\n                  <option value=\"250\">250</option>\n                  <option value=\"500\">500</option>\n                </PageSizeSelect>\n\n                <PageButton\n                  onClick={goToFirstPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PageButton>\n                <PageButton\n                  onClick={goToPreviousPage}\n                  disabled={pageIndex === 0}\n                >\n                  \n                </PageButton>\n\n                <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                  Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n                </span>\n\n                <PageButton\n                  onClick={goToNextPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PageButton>\n                <PageButton\n                  onClick={goToLastPage}\n                  disabled={pageIndex >= table.getPageCount() - 1}\n                >\n                  \n                </PageButton>\n              </PaginationControls>\n            </Pagination>\n          </>\n        )}\n      </TableContainer>\n\n      {/* Dialog pro vytvoen/pravu prva */}\n      <UniversalDictionaryDialog\n        isOpen={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSave={handleSave}\n        editData={editingItem}\n        title={dialogMode === 'create' ? 'Vytvoit nov prvo' : 'Upravit prvo'}\n        icon={Key}\n        fields={[\n          { name: 'kod_prava', label: 'Kd prva', type: 'text', required: true },\n          { name: 'popis', label: 'Popis', type: 'textarea', required: false },\n          { name: 'aktivni', label: 'Aktivn', type: 'checkbox', required: false, default: true }\n        ]}\n      />\n\n      {/* Potvrzovac dialog pro smazn */}\n      <DictionaryConfirmDialog\n        isOpen={isConfirmOpen}\n        onClose={() => setIsConfirmOpen(false)}\n        onConfirm={handleConfirmDelete}\n        title=\"Smazat prvo\"\n        message={`Opravdu chcete smazat prvo \"${deletingItem?.kod_prava || deletingItem?.popis}\"?`}\n      />\n    </Container>\n  );\n};\n\nexport default PravaTab;\n","/**\n * DocxUploadAnalyzer - Komponenta pro upload a analzu DOCX soubor\n * @date 2025-10-21\n */\n\nimport React, { useState, useRef, useContext } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faFileWord, faUpload, faSpinner, faCheck, faTimes,\n  faInfoCircle, faDownload, faEye, faExclamationTriangle,\n  faCode, faCalendar, faUser, faHashtag\n} from '@fortawesome/free-solid-svg-icons';\nimport { extractDocxFields, validateDocxFile } from '../../utils/docx/docxProcessor';\nimport { ToastContext } from '../../context/ToastContext';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n`;\n\nconst UploadArea = styled.div`\n  border: 2px dashed ${props => props.$dragOver ? '#3b82f6' : '#d1d5db'};\n  border-radius: 12px;\n  padding: 3rem 2rem;\n  text-align: center;\n  background: ${props => props.$dragOver ? '#f0f9ff' : '#fafbfc'};\n  transition: all 0.2s ease;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #f0f9ff;\n  }\n`;\n\nconst UploadIcon = styled.div`\n  font-size: 3rem;\n  color: ${props => props.$dragOver ? '#3b82f6' : '#9ca3af'};\n  margin-bottom: 1rem;\n`;\n\nconst UploadText = styled.div`\n  color: #374151;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n`;\n\nconst UploadSubtext = styled.div`\n  color: #6b7280;\n  font-size: 0.875rem;\n`;\n\nconst HiddenInput = styled.input`\n  display: none;\n`;\n\nconst ProcessingOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.95);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  z-index: 10;\n`;\n\nconst ProcessingText = styled.div`\n  margin-top: 1rem;\n  color: #374151;\n  font-weight: 500;\n`;\n\nconst ResultsContainer = styled.div`\n  margin-top: 2rem;\n`;\n\nconst FileInfo = styled.div`\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst FileInfoRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst FileInfoLabel = styled.span`\n  font-weight: 500;\n  color: #475569;\n`;\n\nconst FileInfoValue = styled.span`\n  color: #1e293b;\n`;\n\nconst TabContainer = styled.div`\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst TabHeaders = styled.div`\n  display: flex;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n`;\n\nconst TabHeader = styled.button`\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border: none;\n  background: ${props => props.$active ? 'white' : 'transparent'};\n  color: ${props => props.$active ? '#1e40af' : '#64748b'};\n  font-weight: ${props => props.$active ? '600' : '500'};\n  border-bottom: ${props => props.$active ? '2px solid #1e40af' : 'none'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n\n  &:hover {\n    background: ${props => props.$active ? 'white' : '#f1f5f9'};\n  }\n`;\n\nconst TabContent = styled.div`\n  padding: 1.5rem;\n  max-height: 400px;\n  overflow-y: auto;\n`;\n\nconst FieldsList = styled.div`\n  display: grid;\n  gap: 0.75rem;\n`;\n\nconst FieldItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n`;\n\nconst FieldInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst FieldIcon = styled.div`\n  width: 2rem;\n  height: 2rem;\n  background: ${props => {\n    switch (props.$type) {\n      case 'mergefield': return '#dbeafe';\n      case 'bookmark': return '#dcfce7';\n      case 'contentcontrol': return '#fef3c7';\n      case 'custom': return '#fce7f3';\n      default: return '#f3f4f6';\n    }\n  }};\n  color: ${props => {\n    switch (props.$type) {\n      case 'mergefield': return '#1e40af';\n      case 'bookmark': return '#166534';\n      case 'contentcontrol': return '#92400e';\n      case 'custom': return '#be185d';\n      default: return '#374151';\n    }\n  }};\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.875rem;\n`;\n\nconst FieldDetails = styled.div``;\n\nconst FieldName = styled.div`\n  font-weight: 600;\n  color: #1e293b;\n  margin-bottom: 0.25rem;\n`;\n\nconst FieldType = styled.div`\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst MetadataGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n`;\n\nconst MetadataItem = styled.div`\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  padding: 1rem;\n`;\n\nconst MetadataLabel = styled.div`\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: 0.5rem;\n`;\n\nconst MetadataValue = styled.div`\n  font-weight: 600;\n  color: #1e293b;\n  word-break: break-word;\n`;\n\nconst ErrorContainer = styled.div`\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst ErrorText = styled.div`\n  color: #dc2626;\n  font-weight: 500;\n`;\n\nconst ActionButtons = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  margin-top: 1.5rem;\n  justify-content: flex-end;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ${props => props.$primary ? `\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ` : `\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  `}\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst DocxUploadAnalyzer = ({ onAnalysisComplete, onCancel }) => {\n  const [dragOver, setDragOver] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [activeTab, setActiveTab] = useState('fields');\n  const fileInputRef = useRef(null);\n  const { addToast } = useContext(ToastContext);\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    setDragOver(true);\n  };\n\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    setDragOver(false);\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setDragOver(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFileUpload(files[0]);\n    }\n  };\n\n  const handleFileInputChange = (e) => {\n    if (e.target.files.length > 0) {\n      handleFileUpload(e.target.files[0]);\n    }\n  };\n\n  const handleFileUpload = async (file) => {\n    const validation = validateDocxFile(file);\n\n    if (!validation.isValid) {\n      validation.errors.forEach(error => {\n        addToast(error, 'error');\n      });\n      return;\n    }\n\n    setProcessing(true);\n    setAnalysisResult(null);\n\n    try {\n      const result = await extractDocxFields(file);\n\n      if (result.success) {\n        setAnalysisResult(result);\n        addToast(`spn analyzovno ${result.fields.length} pol`, 'success');\n      } else {\n        addToast(`Chyba pi analze: ${result.error}`, 'error');\n      }\n    } catch (error) {\n      console.error('Chyba pi zpracovn souboru:', error);\n      addToast('Nastala neoekvan chyba pi zpracovn souboru', 'error');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const handleAnalysisComplete = () => {\n    onAnalysisComplete?.(analysisResult);\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getFieldIcon = (type) => {\n    switch (type) {\n      case 'mergefield': return faCode;\n      case 'bookmark': return faHashtag;\n      case 'contentcontrol': return faEye;\n      case 'custom': return faUser;\n      default: return faInfoCircle;\n    }\n  };\n\n  return (\n    <Container>\n      <div style={{ position: 'relative' }}>\n        {!analysisResult && (\n          <UploadArea\n            $dragOver={dragOver}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n            onDrop={handleDrop}\n            onClick={() => fileInputRef.current?.click()}\n          >\n            <UploadIcon $dragOver={dragOver}>\n              <FontAwesomeIcon icon={faFileWord} />\n            </UploadIcon>\n            <UploadText>\n              {dragOver ? 'Pethnte DOCX soubor sem' : 'Kliknte nebo pethnte DOCX soubor'}\n            </UploadText>\n            <UploadSubtext>\n              Podporovan formty: DOCX (max. 10MB)\n            </UploadSubtext>\n\n            <HiddenInput\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n              onChange={handleFileInputChange}\n            />\n          </UploadArea>\n        )}\n\n        {processing && (\n          <ProcessingOverlay>\n            <FontAwesomeIcon icon={faSpinner} spin style={{ fontSize: '2rem', color: '#3b82f6' }} />\n            <ProcessingText>Analyzuji DOCX soubor...</ProcessingText>\n          </ProcessingOverlay>\n        )}\n\n        {analysisResult && (\n          <ResultsContainer>\n            <FileInfo>\n              <FileInfoRow>\n                <FileInfoLabel>Nzev souboru:</FileInfoLabel>\n                <FileInfoValue>{analysisResult.fileName}</FileInfoValue>\n              </FileInfoRow>\n              <FileInfoRow>\n                <FileInfoLabel>Velikost:</FileInfoLabel>\n                <FileInfoValue>{formatFileSize(analysisResult.fileSize)}</FileInfoValue>\n              </FileInfoRow>\n              <FileInfoRow>\n                <FileInfoLabel>Posledn prava:</FileInfoLabel>\n                <FileInfoValue>{analysisResult.lastModified.toLocaleString('cs-CZ')}</FileInfoValue>\n              </FileInfoRow>\n              <FileInfoRow>\n                <FileInfoLabel>Nalezen pole:</FileInfoLabel>\n                <FileInfoValue>\n                  <strong>{analysisResult.fields.length}</strong>\n                  {analysisResult.fields.length === 0 && (\n                    <span style={{ color: '#dc2626', marginLeft: '0.5rem' }}>\n                      <FontAwesomeIcon icon={faExclamationTriangle} />\n                      dn pole nenalezena\n                    </span>\n                  )}\n                </FileInfoValue>\n              </FileInfoRow>\n            </FileInfo>\n\n            <TabContainer>\n              <TabHeaders>\n                <TabHeader\n                  $active={activeTab === 'fields'}\n                  onClick={() => setActiveTab('fields')}\n                >\n                  <FontAwesomeIcon icon={faCode} />\n                  Programov pole ({analysisResult.fields.length})\n                </TabHeader>\n                <TabHeader\n                  $active={activeTab === 'metadata'}\n                  onClick={() => setActiveTab('metadata')}\n                >\n                  <FontAwesomeIcon icon={faInfoCircle} />\n                  Metadata dokumentu\n                </TabHeader>\n              </TabHeaders>\n\n              <TabContent>\n                {activeTab === 'fields' && (\n                  <FieldsList>\n                    {analysisResult.fields.length === 0 ? (\n                      <ErrorContainer>\n                        <FontAwesomeIcon icon={faExclamationTriangle} style={{ color: '#dc2626' }} />\n                        <ErrorText>\n                          V dokumentu nebyla nalezena dn programov pole.\n                          Zkontrolujte, zda dokument obsahuje merge fields, bookmarks nebo content controls.\n                        </ErrorText>\n                      </ErrorContainer>\n                    ) : (\n                      analysisResult.fields.map((field, index) => (\n                        <FieldItem key={index}>\n                          <FieldInfo>\n                            <FieldIcon $type={field.type}>\n                              <FontAwesomeIcon icon={getFieldIcon(field.type)} />\n                            </FieldIcon>\n                            <FieldDetails>\n                              <FieldName>{field.name}</FieldName>\n                              <FieldType>{field.type}</FieldType>\n                            </FieldDetails>\n                          </FieldInfo>\n                        </FieldItem>\n                      ))\n                    )}\n                  </FieldsList>\n                )}\n\n                {activeTab === 'metadata' && (\n                  <MetadataGrid>\n                    {Object.entries(analysisResult.metadata).map(([key, value]) => (\n                      <MetadataItem key={key}>\n                        <MetadataLabel>{key}</MetadataLabel>\n                        <MetadataValue>{value || 'Nen k dispozici'}</MetadataValue>\n                      </MetadataItem>\n                    ))}\n                  </MetadataGrid>\n                )}\n              </TabContent>\n            </TabContainer>\n\n            <ActionButtons>\n              <ActionButton onClick={onCancel}>\n                <FontAwesomeIcon icon={faTimes} />\n                Zruit\n              </ActionButton>\n              <ActionButton\n                $primary\n                onClick={handleAnalysisComplete}\n                disabled={analysisResult.fields.length === 0}\n              >\n                <FontAwesomeIcon icon={faCheck} />\n                Pokraovat k mapovn\n              </ActionButton>\n            </ActionButtons>\n          </ResultsContainer>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default DocxUploadAnalyzer;","/**\n * DocxFieldMapper - Komponenta pro mapovn pol mezi DOCX a objednvkami\n * @date 2025-10-21\n */\n\nimport React, { useState, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faFileWord, faSave, faUndo, faCheck, faTimes,\n  faInfoCircle, faExchangeAlt, faSearch, faFilter\n} from '@fortawesome/free-solid-svg-icons';\nimport { getOrderFieldsForMapping, generateFieldsFromApiData } from '../../utils/docx/docxProcessor';\nimport { getDocxOrderData, getDocxOrderEnrichedData } from '../../services/apiDocxOrders';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #f3f4f6;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.25rem;\n  font-weight: 600;\n`;\n\nconst InfoBadge = styled.div`\n  background: #dbeafe;\n  color: #1e40af;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n`;\n\nconst MappingGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr auto 1fr;\n  gap: 1rem;\n  align-items: start;\n`;\n\nconst FieldColumn = styled.div`\n  background: #f9fafb;\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n`;\n\nconst ColumnHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst SearchBox = styled.input`\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst FieldList = styled.div`\n  max-height: 400px;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 3px;\n  }\n`;\n\nconst FieldItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem;\n  margin-bottom: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid ${props => props.$mapped ? '#10b981' : '#e5e7eb'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #f8fafc;\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst FieldInfo = styled.div`\n  flex: 1;\n`;\n\nconst FieldName = styled.div`\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 0.25rem;\n`;\n\nconst FieldType = styled.div`\n  font-size: 0.75rem;\n  color: #6b7280;\n  font-family: 'Courier New', monospace;\n`;\n\nconst FieldGroup = styled.div`\n  margin-bottom: 1rem;\n`;\n\nconst GroupTitle = styled.div`\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid #e5e7eb;\n  font-size: 0.875rem;\n`;\n\nconst MappingConnector = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 0.5rem;\n`;\n\nconst ConnectorIcon = styled.div`\n  background: #3b82f6;\n  color: white;\n  width: 2.5rem;\n  height: 2.5rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 1rem;\n`;\n\nconst ActionButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n  justify-content: flex-end;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ${props => props.$primary ? `\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ` : `\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  `}\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst MappingStatus = styled.div`\n  background: ${props => props.$complete ? '#dcfce7' : '#fef3c7'};\n  color: ${props => props.$complete ? '#166534' : '#92400e'};\n  padding: 0.75rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n`;\n\nconst SelectBox = styled.select`\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst DocxFieldMapper = ({\n  docxFields = [],\n  initialMapping = {},\n  onMappingChange,\n  onSave,\n  onCancel,\n  // Dynamick pole z API\n  useDynamicFields = true,\n  sampleOrderId = null,\n  token = null,\n  username = null\n}) => {\n  const [mapping, setMapping] = useState(initialMapping);\n  const [searchDocx, setSearchDocx] = useState('');\n  const [searchOrder, setSearchOrder] = useState('');\n  const [selectedDocxField, setSelectedDocxField] = useState(null);\n  const [orderFields, setOrderFields] = useState([]);\n  const [loadingFields, setLoadingFields] = useState(false);\n\n  // Dynamick natn pol z API\n  useEffect(() => {\n    const loadFields = async () => {\n      if (!useDynamicFields) {\n        const fields = getOrderFieldsForMapping();\n        setOrderFields(fields);\n        return;\n      }\n\n      if (sampleOrderId && token && username) {\n        setLoadingFields(true);\n        try {\n          console.log(' DocxFieldMapper: Natm ENRICHED dynamick pole z API');\n          //  POUIJ getDocxOrderEnrichedData pro kompletn data vetn poloek, faktur a timestamp pol\n          const apiData = await getDocxOrderEnrichedData({ token, username, objednavka_id: sampleOrderId });\n          const dynamicFields = generateFieldsFromApiData(apiData);\n          setOrderFields(dynamicFields);\n          console.log(' DocxFieldMapper: Enriched dynamick pole natena', {\n            pocet_skupin: dynamicFields.length,\n            skupiny: dynamicFields.map(g => g.group)\n          });\n        } catch (error) {\n          console.error(' DocxFieldMapper: Chyba pi natn enriched dat:', error);\n          const fallbackFields = getOrderFieldsForMapping();\n          setOrderFields(fallbackFields);\n        } finally {\n          setLoadingFields(false);\n        }\n      } else {\n        const fields = getOrderFieldsForMapping();\n        setOrderFields(fields);\n      }\n    };\n\n    loadFields();\n  }, [useDynamicFields, sampleOrderId, token, username]);\n\n  // Filtrovan DOCX pole\n  const filteredDocxFields = docxFields.filter(field =>\n    field.name.toLowerCase().includes(searchDocx.toLowerCase())\n  );\n\n  // Filtrovan pole objednvek\n  const filteredOrderFields = orderFields.map(group => ({\n    ...group,\n    fields: group.fields.filter(field =>\n      field.label.toLowerCase().includes(searchOrder.toLowerCase()) ||\n      field.key.toLowerCase().includes(searchOrder.toLowerCase())\n    )\n  })).filter(group => group.fields.length > 0);\n\n  // Statistiky mapovn\n  const mappingStats = {\n    total: docxFields.length,\n    mapped: Object.keys(mapping).filter(key => mapping[key]).length\n  };\n\n  const handleFieldMapping = (docxFieldName, orderFieldKey) => {\n    const newMapping = {\n      ...mapping,\n      [docxFieldName]: orderFieldKey === '' ? null : orderFieldKey\n    };\n    setMapping(newMapping);\n    onMappingChange?.(newMapping);\n  };\n\n  const handleSave = () => {\n    onSave?.(mapping);\n  };\n\n  const handleReset = () => {\n    setMapping(initialMapping);\n    onMappingChange?.(initialMapping);\n  };\n\n  const isComplete = mappingStats.mapped === mappingStats.total && mappingStats.total > 0;\n\n  return (\n    <Container>\n      <Header>\n        <FontAwesomeIcon icon={faFileWord} style={{ color: '#2563eb', fontSize: '1.5rem' }} />\n        <Title>Mapovn pol DOCX ablony</Title>\n        <InfoBadge>\n          {mappingStats.mapped} / {mappingStats.total} namapovno\n        </InfoBadge>\n      </Header>\n\n      <MappingStatus $complete={isComplete}>\n        <FontAwesomeIcon icon={isComplete ? faCheck : faInfoCircle} />\n        {isComplete\n          ? 'Vechna pole jsou namapovna a pipravena k pouit'\n          : `Zbv namapovat ${mappingStats.total - mappingStats.mapped} pol`\n        }\n      </MappingStatus>\n\n      <MappingGrid>\n        {/* Lev sloupec - DOCX pole */}\n        <FieldColumn>\n          <ColumnHeader>\n            <FontAwesomeIcon icon={faFileWord} />\n            Pole v DOCX ablon\n          </ColumnHeader>\n\n          <SearchBox\n            type=\"text\"\n            placeholder=\"Hledat pole v DOCX...\"\n            value={searchDocx}\n            onChange={e => setSearchDocx(e.target.value)}\n          />\n\n          <FieldList>\n            {filteredDocxFields.map(field => (\n              <FieldItem\n                key={field.name}\n                $mapped={!!mapping[field.name]}\n                onClick={() => setSelectedDocxField(field)}\n              >\n                <FieldInfo>\n                  <FieldName>{field.name}</FieldName>\n                  <FieldType>{field.type}</FieldType>\n                </FieldInfo>\n                {mapping[field.name] && (\n                  <FontAwesomeIcon icon={faCheck} style={{ color: '#10b981' }} />\n                )}\n              </FieldItem>\n            ))}\n          </FieldList>\n        </FieldColumn>\n\n        {/* Stedn sloupec - mapovn */}\n        <MappingConnector>\n          <ConnectorIcon>\n            <FontAwesomeIcon icon={faExchangeAlt} />\n          </ConnectorIcon>\n\n          {selectedDocxField && (\n            <div style={{ textAlign: 'center', minWidth: '200px' }}>\n              <div style={{ marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\n                {selectedDocxField.name}\n              </div>\n              <SelectBox\n                value={mapping[selectedDocxField.name] || ''}\n                onChange={e => handleFieldMapping(selectedDocxField.name, e.target.value)}\n              >\n                <option value=\"\">-- Nevybrno --</option>\n                {orderFields.map(group => (\n                  <optgroup key={group.group} label={group.group}>\n                    {group.fields.map(field => (\n                      <option key={field.key} value={field.key}>\n                        {field.label}\n                      </option>\n                    ))}\n                  </optgroup>\n                ))}\n              </SelectBox>\n            </div>\n          )}\n        </MappingConnector>\n\n        {/* Prav sloupec - pole objednvek */}\n        <FieldColumn>\n          <ColumnHeader>\n            <FontAwesomeIcon icon={faSearch} />\n            Dostupn pole objednvek\n          </ColumnHeader>\n\n          <SearchBox\n            type=\"text\"\n            placeholder=\"Hledat pole objednvek...\"\n            value={searchOrder}\n            onChange={e => setSearchOrder(e.target.value)}\n          />\n\n          <FieldList>\n            {filteredOrderFields.map(group => (\n              <FieldGroup key={group.group}>\n                <GroupTitle>{group.group}</GroupTitle>\n                {group.fields.map(field => {\n                  // Rozdl label na esk nzev a DB pole\n                  const labelParts = field.label?.split('\\n') || [field.label || field.key];\n                  const czechName = labelParts[0]; // esk nzev nebo cel label\n                  const dbFieldName = labelParts[1] || `{${field.key}}`; // {db_pole} nebo fallback\n\n                  return (\n                    <FieldItem\n                      key={field.key}\n                      onClick={() => selectedDocxField && handleFieldMapping(selectedDocxField.name, field.key)}\n                    >\n                      <FieldInfo>\n                        <FieldName>{czechName}</FieldName>\n                        <FieldType>{dbFieldName}  {field.type}</FieldType>\n                      </FieldInfo>\n                    </FieldItem>\n                  );\n                })}\n              </FieldGroup>\n            ))}\n          </FieldList>\n        </FieldColumn>\n      </MappingGrid>\n\n      <ActionButtons>\n        <ActionButton onClick={handleReset}>\n          <FontAwesomeIcon icon={faUndo} />\n          Reset\n        </ActionButton>\n        <ActionButton onClick={onCancel}>\n          <FontAwesomeIcon icon={faTimes} />\n          Zruit\n        </ActionButton>\n        <ActionButton $primary onClick={handleSave}>\n          <FontAwesomeIcon icon={faSave} />\n          Uloit mapovn\n        </ActionButton>\n      </ActionButtons>\n    </Container>\n  );\n};\n\nexport default DocxFieldMapper;","/**\n * DocxTemplateEditor - Hlavn komponenta pro editaci DOCX ablon\n * @date 2025-10-21\n */\n\nimport React, { useState, useContext } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faFileWord, faArrowLeft, faArrowRight, faSave,\n  faCheckCircle, faUpload, faEdit, faDownload\n} from '@fortawesome/free-solid-svg-icons';\nimport { ToastContext } from '../../context/ToastContext';\nimport DocxUploadAnalyzer from './DocxUploadAnalyzer';\nimport DocxFieldMapper from './DocxFieldMapper';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n  margin-bottom: 2rem;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid #f3f4f6;\n`;\n\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst Title = styled.h2`\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.5rem;\n  font-weight: 700;\n`;\n\nconst StepIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  background: #f8fafc;\n  padding: 0.5rem 1rem;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n`;\n\nconst StepItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: ${props => {\n    if (props.$active) return '#1e40af';\n    if (props.$completed) return '#059669';\n    return '#6b7280';\n  }};\n  font-weight: ${props => props.$active ? '600' : '500'};\n  font-size: 0.875rem;\n`;\n\nconst StepDivider = styled.div`\n  width: 1px;\n  height: 1rem;\n  background: #d1d5db;\n`;\n\nconst CloseButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n  }\n`;\n\nconst ContentArea = styled.div`\n  min-height: 400px;\n`;\n\nconst NavigationButtons = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 2rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst NavButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  border: 1px solid;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ${props => props.$primary ? `\n    background: #3b82f6;\n    border-color: #3b82f6;\n    color: white;\n\n    &:hover {\n      background: #2563eb;\n      border-color: #2563eb;\n    }\n  ` : `\n    background: white;\n    border-color: #d1d5db;\n    color: #374151;\n\n    &:hover {\n      background: #f9fafb;\n      border-color: #9ca3af;\n    }\n  `}\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst SuccessMessage = styled.div`\n  background: #ecfdf5;\n  border: 1px solid #a7f3d0;\n  border-radius: 8px;\n  padding: 1.5rem;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst SuccessIcon = styled.div`\n  width: 4rem;\n  height: 4rem;\n  background: #10b981;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n`;\n\nconst SuccessTitle = styled.h3`\n  margin: 0;\n  color: #065f46;\n  font-size: 1.25rem;\n  font-weight: 600;\n`;\n\nconst SuccessText = styled.p`\n  margin: 0;\n  color: #047857;\n  line-height: 1.5;\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst DocxTemplateEditor = ({\n  template = null,\n  onSave,\n  onClose,\n  mode = 'create' // 'create' | 'edit'\n}) => {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [fieldMapping, setFieldMapping] = useState({});\n  const [isComplete, setIsComplete] = useState(false);\n  const { addToast } = useContext(ToastContext);\n\n  const steps = [\n    { id: 1, label: 'Upload & Analza', icon: faUpload },\n    { id: 2, label: 'Mapovn pol', icon: faEdit },\n    { id: 3, label: 'Dokonen', icon: faCheckCircle }\n  ];\n\n  const handleAnalysisComplete = (result) => {\n    setAnalysisResult(result);\n    setCurrentStep(2);\n  };\n\n  const handleMappingChange = (mapping) => {\n    setFieldMapping(mapping);\n  };\n\n  const handleMappingSave = (mapping) => {\n    setFieldMapping(mapping);\n    setCurrentStep(3);\n  };\n\n  const handleFinalSave = async () => {\n    try {\n      const templateData = {\n        fileName: analysisResult.fileName,\n        fields: analysisResult.fields,\n        fieldMapping: fieldMapping,\n        metadata: analysisResult.metadata,\n        documentXml: analysisResult.documentXml\n      };\n\n      await onSave?.(templateData);\n      setIsComplete(true);\n      addToast('DOCX ablona byla spn uloena', 'success');\n    } catch (error) {\n      console.error('Chyba pi ukldn ablony:', error);\n      addToast('Chyba pi ukldn ablony', 'error');\n    }\n  };\n\n  const handleStepBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const handleStepForward = () => {\n    if (currentStep < 3) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const canProceedToMapping = analysisResult && analysisResult.fields.length > 0;\n  const canProceedToFinish = fieldMapping && Object.keys(fieldMapping).length > 0;\n\n  if (isComplete) {\n    return (\n      <Container>\n        <SuccessMessage>\n          <SuccessIcon>\n            <FontAwesomeIcon icon={faCheckCircle} />\n          </SuccessIcon>\n          <SuccessTitle>ablona byla spn vytvoena!</SuccessTitle>\n          <SuccessText>\n            DOCX ablona s {analysisResult?.fields.length || 0} namapovanmi poli\n            je pipravena k pouit v systmu objednvek.\n          </SuccessText>\n          <NavButton $primary onClick={onClose}>\n            <FontAwesomeIcon icon={faArrowLeft} />\n            Zpt na seznam ablon\n          </NavButton>\n        </SuccessMessage>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Header>\n        <HeaderLeft>\n          <FontAwesomeIcon\n            icon={faFileWord}\n            style={{ color: '#2563eb', fontSize: '2rem' }}\n          />\n          <div>\n            <Title>\n              {mode === 'edit' ? 'Editace DOCX ablony' : 'Nov DOCX ablona'}\n            </Title>\n            {template && (\n              <div style={{ color: '#6b7280', fontSize: '0.875rem' }}>\n                Editace: {template.nazev}\n              </div>\n            )}\n          </div>\n        </HeaderLeft>\n\n        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n          <StepIndicator>\n            {steps.map((step, index) => (\n              <React.Fragment key={step.id}>\n                <StepItem\n                  $active={currentStep === step.id}\n                  $completed={currentStep > step.id}\n                >\n                  <FontAwesomeIcon\n                    icon={currentStep > step.id ? faCheckCircle : step.icon}\n                  />\n                  {step.label}\n                </StepItem>\n                {index < steps.length - 1 && <StepDivider />}\n              </React.Fragment>\n            ))}\n          </StepIndicator>\n\n          <CloseButton onClick={onClose}>\n            <FontAwesomeIcon icon={faArrowLeft} />\n            Zruit\n          </CloseButton>\n        </div>\n      </Header>\n\n      <ContentArea>\n        {currentStep === 1 && (\n          <DocxUploadAnalyzer\n            onAnalysisComplete={handleAnalysisComplete}\n            onCancel={onClose}\n          />\n        )}\n\n        {currentStep === 2 && analysisResult && (\n          <DocxFieldMapper\n            docxFields={analysisResult.fields}\n            initialMapping={fieldMapping}\n            onMappingChange={handleMappingChange}\n            onSave={handleMappingSave}\n            onCancel={() => setCurrentStep(1)}\n          />\n        )}\n\n        {currentStep === 3 && (\n          <div style={{ textAlign: 'center', padding: '3rem 1rem' }}>\n            <FontAwesomeIcon\n              icon={faFileWord}\n              style={{ fontSize: '4rem', color: '#3b82f6', marginBottom: '1.5rem' }}\n            />\n            <h3 style={{ margin: '0 0 1rem 0', color: '#1f2937' }}>\n              ablona je pipravena k uloen\n            </h3>\n            <p style={{ color: '#6b7280', marginBottom: '2rem', lineHeight: 1.6 }}>\n              DOCX ablona \"{analysisResult?.fileName}\" s {analysisResult?.fields.length || 0} namapovanmi poli\n              bude uloena do systmu a bude k dispozici pro generovn dokument z objednvek.\n            </p>\n\n            <div style={{\n              background: '#f8fafc',\n              border: '1px solid #e2e8f0',\n              borderRadius: '8px',\n              padding: '1rem',\n              marginBottom: '2rem',\n              textAlign: 'left'\n            }}>\n              <h4 style={{ margin: '0 0 0.5rem 0', color: '#374151' }}>\n                Shrnut mapovn:\n              </h4>\n              <ul style={{ margin: 0, paddingLeft: '1.5rem', color: '#6b7280' }}>\n                {Object.entries(fieldMapping).filter(([, value]) => value).map(([docxField, orderField]) => (\n                  <li key={docxField}>\n                    <strong>{docxField}</strong>  {orderField}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        )}\n      </ContentArea>\n\n      {currentStep < 3 && (\n        <NavigationButtons>\n          <NavButton\n            onClick={handleStepBack}\n            disabled={currentStep === 1}\n          >\n            <FontAwesomeIcon icon={faArrowLeft} />\n            Zpt\n          </NavButton>\n\n          <NavButton\n            $primary\n            onClick={handleStepForward}\n            disabled={\n              (currentStep === 1 && !canProceedToMapping) ||\n              (currentStep === 2 && !canProceedToFinish)\n            }\n          >\n            Dal krok\n            <FontAwesomeIcon icon={faArrowRight} />\n          </NavButton>\n        </NavigationButtons>\n      )}\n\n      {currentStep === 3 && (\n        <NavigationButtons>\n          <NavButton onClick={() => setCurrentStep(2)}>\n            <FontAwesomeIcon icon={faArrowLeft} />\n            Zpt k mapovn\n          </NavButton>\n\n          <NavButton $primary onClick={handleFinalSave}>\n            <FontAwesomeIcon icon={faSave} />\n            Uloit ablonu\n          </NavButton>\n        </NavigationButtons>\n      )}\n    </Container>\n  );\n};\n\nexport default DocxTemplateEditor;","/**\n * Validace DOCX mappingu proti enriched API struktue\n * @date 2025-11-16\n */\n\n/**\n * Definice dostupnch pol z enriched endpointu\n * podle specifikace: docs/DOCX-ENRICHED-ENDPOINT-SPEC.md\n */\nconst ENRICHED_API_STRUCTURE = {\n  // Zkladn pole objednvky (top level)\n  topLevel: [\n    'id',\n    'cislo_objednavky',\n    'dt_objednavky',\n    'predmet',\n    'max_cena_s_dph',\n    'poznamka',\n    'strediska_kod',\n    'druh_objednavky_kod',\n    'stav_workflow_kod',\n    'dt_predpokladany_termin_dodani',\n    'misto_dodani',\n    'zaruka',\n    'polozky_count',\n    'prilohy_count',\n    // Datumov pole workflow\n    'dt_vytvoreni',\n    'dt_aktualizace',\n    'dt_schvaleni',\n    'dt_schvaleni_zamitnutim',\n    'dt_uzavreni',\n    'dt_zruseni',\n    'dt_archivace',\n    'dt_odeslani',\n    'dt_akceptace',\n    'dt_zverejneni',\n    // Dal workflow pole\n    'schvaleni_komentar',\n    'financovani',\n    'stav_objednavky',\n    'dodavatel_zpusob_potvrzeni',\n    'registr_iddt'\n  ],\n\n  // Dodavatel pole (top level)\n  dodavatel: [\n    'dodavatel_id',\n    'dodavatel_nazev',\n    'dodavatel_adresa',\n    'dodavatel_ico',\n    'dodavatel_dic',\n    'dodavatel_zastoupeny',\n    'dodavatel_kontakt_jmeno',\n    'dodavatel_kontakt_email',\n    'dodavatel_kontakt_telefon'\n  ],\n\n  // Enriched uivatel - struktura pro kadho\n  enrichedUserFields: [\n    'id',\n    'cele_jmeno',\n    'jmeno',\n    'prijmeni',\n    'titul_pred',\n    'titul_za',\n    'email',\n    'telefon',\n    'username',\n    'lokalita.id',\n    'lokalita.nazev',\n    'lokalita.kod'\n  ],\n\n  // Enriched uivatel - prefixes\n  enrichedUserPrefixes: [\n    'garant_uzivatel',\n    'garant',\n    'prikazce_uzivatel',\n    'prikazce',\n    'schvalovatel',\n    'uzivatel', // objednatel\n    'objednatel',\n    'odesilatel',\n    'fakturant',\n    'dodavatel_potvrdil',\n    'potvrdil_vecnou_spravnost',\n    'dokoncil'\n  ],\n\n  // Vypotan hodnoty\n  vypocitane: [\n    // Ceny\n    'celkova_cena_bez_dph',\n    'celkova_cena_s_dph',\n    'vypoctene_dph',\n    'celkova_cena_bez_dph_kc',\n    'celkova_cena_s_dph_kc',\n    'vypoctene_dph_kc',\n    \n    // Statistiky\n    'pocet_polozek',\n    'pocet_priloh',\n    \n    // Datum a as\n    'datum_generovani',\n    'cas_generovani',\n    'datum_cas_generovani',\n    \n    // Vybran uivatel\n    'vybrany_uzivatel_cele_jmeno',\n    'vybrany_uzivatel_role',\n    'vybrany_uzivatel_lokalita',\n    \n    // Kombinace jmen pro vechny uivatele\n    // GARANT\n    'garant_jmeno_prijmeni',\n    'garant_prijmeni_jmeno',\n    'garant_cele_jmeno_s_tituly',\n    'garant_cele_jmeno',\n    'garant_jmeno',\n    'garant_prijmeni',\n    'garant_email',\n    'garant_telefon',\n    \n    // PKAZCE\n    'prikazce_jmeno_prijmeni',\n    'prikazce_prijmeni_jmeno',\n    'prikazce_cele_jmeno_s_tituly',\n    'prikazce_cele_jmeno',\n    'prikazce_jmeno',\n    'prikazce_prijmeni',\n    'prikazce_email',\n    'prikazce_telefon',\n    \n    // SCHVALOVATEL\n    'schvalovatel_jmeno_prijmeni',\n    'schvalovatel_prijmeni_jmeno',\n    'schvalovatel_cele_jmeno_s_tituly',\n    'schvalovatel_cele_jmeno',\n    'schvalovatel_jmeno',\n    'schvalovatel_prijmeni',\n    'schvalovatel_email',\n    'schvalovatel_telefon',\n    \n    // OBJEDNATEL (uzivatel)\n    'objednatel_jmeno_prijmeni',\n    'objednatel_prijmeni_jmeno',\n    'objednatel_cele_jmeno_s_tituly',\n    'objednatel_cele_jmeno',\n    'objednatel_jmeno',\n    'objednatel_prijmeni',\n    'objednatel_email',\n    'objednatel_telefon',\n    \n    // ODESLATEL\n    'odesilatel_jmeno_prijmeni',\n    'odesilatel_prijmeni_jmeno',\n    'odesilatel_cele_jmeno_s_tituly',\n    'odesilatel_cele_jmeno',\n    'odesilatel_jmeno',\n    'odesilatel_prijmeni',\n    'odesilatel_email',\n    'odesilatel_telefon',\n    \n    // FAKTURANT\n    'fakturant_jmeno_prijmeni',\n    'fakturant_prijmeni_jmeno',\n    'fakturant_cele_jmeno_s_tituly',\n    'fakturant_cele_jmeno',\n    'fakturant_jmeno',\n    'fakturant_prijmeni',\n    'fakturant_email',\n    'fakturant_telefon'\n  ]\n};\n\n/**\n * Mapa starch (deprecated) pol na nov\n */\nconst DEPRECATED_FIELDS_MAP = {\n  // Ceny - pesun do vypocitane objektu\n  'celkova_cena_bez_dph': {\n    newPath: 'vypocitane.celkova_cena_bez_dph',\n    reason: 'Ceny jsou nyn v objektu vypocitane'\n  },\n  'celkova_cena_s_dph': {\n    newPath: 'vypocitane.celkova_cena_s_dph',\n    reason: 'Ceny jsou nyn v objektu vypocitane'\n  },\n  'vypoctene_dph': {\n    newPath: 'vypocitane.vypoctene_dph',\n    reason: 'DPH je nyn v objektu vypocitane'\n  },\n  \n  // Objednatel -> uzivatel\n  'objednatel.plne_jmeno': {\n    newPath: 'uzivatel.cele_jmeno',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.cele_jmeno': {\n    newPath: 'uzivatel.cele_jmeno',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.jmeno': {\n    newPath: 'uzivatel.jmeno',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.prijmeni': {\n    newPath: 'uzivatel.prijmeni',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.email': {\n    newPath: 'uzivatel.email',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.telefon': {\n    newPath: 'uzivatel.telefon',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.lokalita.nazev': {\n    newPath: 'uzivatel.lokalita.nazev',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  'objednatel.lokalita.kod': {\n    newPath: 'uzivatel.lokalita.kod',\n    reason: 'Enriched endpoint pouv uzivatel msto objednatel'\n  },\n  \n  // Datum\n  'aktualni_datum': {\n    newPath: 'vypocitane.datum_generovani',\n    reason: 'Datum je nyn v objektu vypocitane'\n  }\n};\n\n/**\n * Zkontroluje, zda cesta existuje v enriched API struktue\n */\nfunction isValidPath(path) {\n  // Top level pole\n  if (ENRICHED_API_STRUCTURE.topLevel.includes(path)) {\n    return true;\n  }\n  \n  // Dodavatel pole\n  if (ENRICHED_API_STRUCTURE.dodavatel.includes(path)) {\n    return true;\n  }\n  \n  // Vypotan hodnoty\n  if (path.startsWith('vypocitane.')) {\n    const fieldName = path.substring('vypocitane.'.length);\n    return ENRICHED_API_STRUCTURE.vypocitane.includes(fieldName);\n  }\n  \n  // Enriched uivatel\n  for (const prefix of ENRICHED_API_STRUCTURE.enrichedUserPrefixes) {\n    if (path.startsWith(prefix + '.')) {\n      const fieldName = path.substring(prefix.length + 1);\n      return ENRICHED_API_STRUCTURE.enrichedUserFields.includes(fieldName);\n    }\n  }\n  \n  // Vnoen objekty\n  // Financovn\n  if (path.startsWith('financovani.')) {\n    return ['typ', 'nazev', 'nazev_stavu', 'kod', 'kod_stavu'].includes(path.substring('financovani.'.length));\n  }\n  \n  // Stediska (me bt array)\n  if (path.startsWith('strediska_kod.') || path === 'strediska_kod') {\n    return true;\n  }\n  \n  // Pole v arrays (polozky, prilohy, faktury) - nevalidujeme detailn\n  if (path.startsWith('polozky.') || path.startsWith('prilohy.') || path.startsWith('faktury.')) {\n    return true;\n  }\n  \n  return false;\n}\n\n/**\n * Validuje cel mapping objekt\n * @param {object} mapping - JSON mapping ze ablony\n * @returns {object} - { valid: boolean, errors: array, warnings: array }\n */\nexport function validateDocxMapping(mapping) {\n  const errors = [];\n  const warnings = [];\n  \n  if (!mapping || typeof mapping !== 'object') {\n    return {\n      valid: false,\n      errors: [{ message: 'Mapping nen platn objekt' }],\n      warnings: []\n    };\n  }\n  \n  // Projdi vechna pole v mappingu\n  Object.entries(mapping).forEach(([docxField, apiPath]) => {\n    // Pesko przdn hodnoty\n    if (!apiPath) {\n      warnings.push({\n        docxField,\n        apiPath,\n        type: 'empty',\n        message: `Pole ${docxField} nen namapovno`,\n        severity: 'warning'\n      });\n      return;\n    }\n    \n    // Kontrola deprecated pol\n    if (DEPRECATED_FIELDS_MAP[apiPath]) {\n      const deprecated = DEPRECATED_FIELDS_MAP[apiPath];\n      errors.push({\n        docxField,\n        apiPath,\n        type: 'deprecated',\n        message: `Pole ${apiPath} je zastaral`,\n        suggestion: deprecated.newPath,\n        reason: deprecated.reason,\n        severity: 'error'\n      });\n      return;\n    }\n    \n    // Kontrola validity cesty\n    if (!isValidPath(apiPath)) {\n      errors.push({\n        docxField,\n        apiPath,\n        type: 'invalid',\n        message: `Pole ${apiPath} neexistuje v enriched API`,\n        severity: 'error'\n      });\n    }\n  });\n  \n  return {\n    valid: errors.length === 0,\n    errors,\n    warnings,\n    totalFields: Object.keys(mapping).length,\n    validFields: Object.keys(mapping).length - errors.length - warnings.filter(w => w.type === 'empty').length\n  };\n}\n\n/**\n * Vygeneruje doporuen mapping (automatick oprava)\n * @param {object} mapping - Star mapping\n * @returns {object} - Opraven mapping\n */\nexport function autoFixMapping(mapping) {\n  const fixed = { ...mapping };\n  \n  Object.entries(mapping).forEach(([docxField, apiPath]) => {\n    // Oprav deprecated pole\n    if (DEPRECATED_FIELDS_MAP[apiPath]) {\n      fixed[docxField] = DEPRECATED_FIELDS_MAP[apiPath].newPath;\n    }\n  });\n  \n  return fixed;\n}\n\n/**\n * Vrt seznam vech dostupnch pol pro autocomplete\n * @returns {array} - Array vech validnch cest\n */\nexport function getAllAvailableFields() {\n  const fields = [];\n  \n  // Top level\n  fields.push(...ENRICHED_API_STRUCTURE.topLevel);\n  \n  // Dodavatel\n  fields.push(...ENRICHED_API_STRUCTURE.dodavatel);\n  \n  // Vypotan\n  ENRICHED_API_STRUCTURE.vypocitane.forEach(field => {\n    fields.push(`vypocitane.${field}`);\n  });\n  \n  // Enriched uivatel\n  ENRICHED_API_STRUCTURE.enrichedUserPrefixes.forEach(prefix => {\n    ENRICHED_API_STRUCTURE.enrichedUserFields.forEach(field => {\n      fields.push(`${prefix}.${field}`);\n    });\n  });\n  \n  return fields.sort();\n}\n","/**\n * DocxMappingExpandableSection - Kompaktn DOCX mapovn s enrich poli\n * @date 2025-10-21\n */\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faFileWord, faChevronDown, faExchangeAlt,\n  faCode, faHashtag, faEye, faUser, faInfoCircle, faCopy,\n  faCheck, faTimes, faSpinner, faDownload, faSync, faPlus, faMinus,\n  faExpand, faCompress, faAngleDoubleDown, faAngleDoubleUp, faSearch\n} from '@fortawesome/free-solid-svg-icons';\nimport { extractDocxFields, generateFieldsFromApiData, getOrderFieldsForMapping } from '../../utils/docx/docxProcessor';\nimport { ToastContext } from '../../context/ToastContext';\nimport { validateDocxMapping, getAllAvailableFields } from '../../utils/docx/validateDocxMapping';\nimport { getDocxOrderEnrichedData } from '../../services/apiDocxOrders';\n\n// =============================================================================\n// STYLED COMPONENTS - KOMPAKTN LAYOUT\n// =============================================================================\n\nconst ExpandableSection = styled.div`\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  background: ${props => props.$expanded ? '#f8fafc' : '#fafbfc'};\n  border-bottom: ${props => props.$expanded ? '1px solid #e5e7eb' : 'none'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n`;\n\nconst SectionHeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst SectionIcon = styled.div`\n  width: 2.5rem;\n  height: 2.5rem;\n  background: #6366f1;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 1.125rem;\n`;\n\nconst SectionTitle = styled.h3`\n  margin: 0;\n  color: #1f2937;\n  font-size: 1.125rem;\n  font-weight: 600;\n`;\n\nconst SectionSubtitle = styled.p`\n  margin: 0;\n  color: #6b7280;\n  font-size: 0.875rem;\n`;\n\nconst ExpandIcon = styled.div`\n  transition: transform 0.2s ease;\n  transform: ${props => props.$expanded ? 'rotate(180deg)' : 'rotate(0deg)'};\n  color: #6b7280;\n`;\n\nconst SectionContent = styled.div`\n  max-height: ${props => props.$expanded ? 'none' : '0'};\n  overflow: ${props => props.$expanded ? 'hidden' : 'hidden'};\n  transition: max-height 0.3s ease;\n  background: white;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0; /* Umon sprvn flex shrink */\n`;\n\nconst StatusBadge = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n\n  ${props => {\n    switch (props.$status) {\n      case 'analyzing':\n        return 'background: #fef3c7; color: #92400e; border: 1px solid #fcd34d;';\n      case 'ready':\n        return 'background: #d1fae5; color: #065f46; border: 1px solid #10b981;';\n      case 'error':\n        return 'background: #fee2e2; color: #991b1b; border: 1px solid #f87171;';\n      default:\n        return 'background: #f3f4f6; color: #374151; border: 1px solid #d1d5db;';\n    }\n  }}\n`;\n\nconst RefreshButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 50%;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n    color: #1f2937;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ProcessingOverlay = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  text-align: center;\n  color: #6b7280;\n`;\n\nconst SpinnerIcon = styled.div`\n  font-size: 2rem;\n  margin-bottom: 1rem;\n  color: #6366f1;\n`;\n\n// Kompaktn mapovac layout\nconst CompactMappingContainer = styled.div`\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  flex: 1;\n  min-height: 0; /* Umon sprvn flex shrink */\n  overflow: hidden; /* Zajist, e obsah nepetee */\n`;\n\nconst MappingGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  flex: 1;\n  overflow: hidden;\n  min-height: 0; /* Umon sprvn flex shrink */\n`;\n\nconst DocxFieldsPanel = styled.div`\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0; /* Umon sprvn flex shrink a scrolling */\n  overflow: hidden; /* Zajist, e obsah nepetee */\n`;\n\nconst DatabaseFieldsPanel = styled.div`\n  background: #f0fdf4;\n  border: 2px solid #d1fae5;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0; /* Umon sprvn flex shrink a scrolling */\n  overflow: hidden; /* Zajist, e obsah nepetee */\n`;\n\nconst PanelHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  flex-shrink: 0;\n  background: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n`;\n\nconst PanelHeaderTop = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n`;\n\nconst HeaderIcon = styled.div`\n  font-size: 1rem;\n  color: #6366f1;\n`;\n\nconst HeaderTitle = styled.div`\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #374151;\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 0.375rem 0.75rem 0.375rem 2rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  outline: none;\n  transition: all 0.2s ease;\n\n  &:focus {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\nconst SearchIcon = styled.div`\n  position: absolute;\n  left: 0.5rem;\n  color: #9ca3af;\n  font-size: 0.875rem;\n  pointer-events: none;\n`;\n\nconst ClearSearchButton = styled.button`\n  position: absolute;\n  right: 0.5rem;\n  background: none;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.15s ease;\n\n  &:hover {\n    background: #f3f4f6;\n    color: #6b7280;\n  }\n`;\n\nconst FieldsScrollArea = styled.div`\n  overflow-y: auto; /* auto msto scroll - scrollbar se zobraz jen kdy je poteba */\n  overflow-x: hidden;\n  padding: 0.5rem;\n  flex: 1;\n  min-height: 0; /* Umon sprvn flex shrink */\n\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f1f5f9;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n`;\n\n// Specifick scroll area pro DOCX pole - svtlej\nconst DocxFieldsScrollArea = styled(FieldsScrollArea)`\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f8fafc; /* Lad s DOCX panel pozadm */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1; /* Svtlej ed pro DOCX */\n    border-radius: 4px;\n\n    &:hover {\n      background: #94a3b8;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #cbd5e1 #f1f5f9;\n`;\n\n// Specifick scroll area pro DB pole - zelenkav\nconst DatabaseFieldsScrollArea = styled(FieldsScrollArea)`\n  &::-webkit-scrollbar {\n    width: 8px;\n    background: #f0fdf4; /* Lad s DB panel pozadm */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #dcfce7; /* Svtle zelen */\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #86efac; /* Zelenkav pro DB pole */\n    border-radius: 4px;\n\n    &:hover {\n      background: #4ade80; /* Tmav zelen pi hover */\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #86efac #dcfce7;\n`;\n\nconst DocxFieldCard = styled.div`\n  background: white;\n  border: 1px solid ${props => \n    props.$hasError ? '#ef4444' : \n    props.$mapped ? '#10b981' : '#d1d5db'\n  };\n  border-radius: 6px;\n  margin-bottom: 0.5rem;\n  transition: all 0.2s ease;\n\n  ${props => props.$dragOver && `\n    border-color: #3b82f6;\n    background: #dbeafe;\n  `}\n\n  ${props => props.$hasError && `\n    background: #fef2f2;\n    border-color: #ef4444;\n    border-width: 2px;\n  `}\n\n  ${props => props.$mapped && !props.$hasError && `\n    background: #f0fdf4;\n    border-color: #10b981;\n  `}\n`;\n\nconst FieldHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border-bottom: 1px solid #f3f4f6;\n`;\n\nconst FieldTypeIcon = styled.div`\n  width: 1.5rem;\n  height: 1.5rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n  color: white;\n\n  ${props => {\n    switch (props.$type) {\n      case 'docvariable':\n        return 'background: #3b82f6;';\n      case 'bookmark':\n        return 'background: #10b981;';\n      case 'field':\n        return 'background: #f59e0b;';\n      default:\n        return 'background: #6b7280;';\n    }\n  }}\n`;\n\nconst FieldName = styled.div`\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.875rem;\n`;\n\nconst MappingZone = styled.div`\n  padding: 0.5rem 0.75rem;\n  min-height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: relative;\n\n  ${props => props.$dragOver && `\n    background: #dbeafe;\n    border: 2px dashed #3b82f6;\n    border-radius: 4px;\n  `}\n`;\n\nconst MappedField = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n`;\n\nconst MappedFieldLabel = styled.div`\n  color: ${props => props.$hasError ? '#dc2626' : '#059669'};\n  font-weight: 500;\n  font-size: 0.8rem;\n  flex: 1;\n`;\n\nconst ValidationWarning = styled.div`\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: #dc2626;\n  line-height: 1.3;\n`;\n\nconst ValidationSuggestion = styled.div`\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #f0fdf4;\n  border: 1px solid #bbf7d0;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: #166534;\n  line-height: 1.3;\n  font-family: 'Monaco', 'Menlo', monospace;\n`;\n\nconst MultiMappedFields = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  width: 100%;\n`;\n\nconst MappedFieldChip = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: ${props =>\n    props.$isDragging ? '#f3f4f6' :\n    props.$dragOver ? '#e5e7eb' :\n    props.$isComposed ? '#fef3c7' : '#dcfce7'\n  };\n  border: 1px solid ${props =>\n    props.$isDragging ? '#9ca3af' :\n    props.$dragOver ? '#6b7280' :\n    props.$isComposed ? '#fbbf24' : '#16a34a'\n  };\n  color: ${props =>\n    props.$isDragging ? '#6b7280' :\n    props.$dragOver ? '#374151' :\n    props.$isComposed ? '#92400e' : '#166534'\n  };\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: ${props => props.$isDragging ? 'grabbing' : 'grab'};\n  opacity: ${props => props.$isDragging ? 0.5 : 1};\n  transform: ${props => props.$dragOver ? 'scale(1.02)' : 'scale(1)'};\n  transition: all 0.15s ease;\n  user-select: none;\n\n  &:hover {\n    background: ${props =>\n      props.$isDragging ? '#f3f4f6' :\n      props.$dragOver ? '#e5e7eb' :\n      props.$isComposed ? '#fef08a' : '#bbf7d0'\n    };\n  }\n`;\n\nconst FieldChipText = styled.span`\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: none;\n  pointer-events: none;\n`;\n\nconst ChipRemoveButton = styled.button`\n  background: none;\n  border: none;\n  color: #dc2626;\n  cursor: pointer;\n  padding: 0.125rem;\n  border-radius: 2px;\n  margin-left: 0.25rem;\n  font-size: 0.625rem;\n\n  &:hover {\n    background: rgba(220, 38, 38, 0.1);\n  }\n`;\n\nconst SeparatorIndicator = styled.div`\n  font-size: 0.7rem;\n  color: #6b7280;\n  text-align: center;\n  padding: 0.125rem;\n  font-style: italic;\n`;\n\nconst UnmapButton = styled.button`\n  background: none;\n  border: none;\n  color: #dc2626;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 4px;\n\n  &:hover {\n    background: #fee2e2;\n  }\n`;\n\nconst DropPlaceholder = styled.div`\n  color: #9ca3af;\n  font-size: 0.8rem;\n  font-style: italic;\n`;\n\nconst FieldGroup = styled.div`\n  margin-bottom: 1rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  overflow: hidden;\n`;\n\nconst GroupHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.8rem;\n  padding: 0.5rem 0.75rem;\n  background: #f9fafb;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-bottom: ${props => props.$expanded ? '1px solid #e5e7eb' : 'none'};\n\n  &:hover {\n    background: #f3f4f6;\n  }\n`;\n\nconst GroupToggleIcon = styled.div`\n  transition: transform 0.2s ease;\n  transform: ${props => props.$expanded ? 'rotate(90deg)' : 'rotate(0deg)'};\n  color: #6b7280;\n  font-size: 0.75rem;\n`;\n\nconst GroupFields = styled.div`\n  display: ${props => props.$expanded ? 'flex' : 'none'};\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n`;\n\nconst DatabaseFieldCard = styled.div`\n  background: white;\n  border: 1px solid ${props => props.$isComposed ? '#e879f9' : '#d1fae5'};\n  border-radius: 4px;\n  padding: 0.5rem 0.75rem;\n  cursor: grab;\n  transition: all 0.2s ease;\n  position: relative;\n\n  ${props => props.$isComposed && `\n    background: linear-gradient(135deg, #fef7ff 0%, #fdf4ff 100%);\n    border-left: 3px solid #d946ef;\n  `}\n\n  &:hover {\n    background: ${props => props.$isComposed ? '#fdf2f8' : '#f0fdf4'};\n    border-color: ${props => props.$isComposed ? '#d946ef' : '#10b981'};\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    cursor: grabbing;\n  }\n`;\n\nconst ComposedFieldBadge = styled.span`\n  position: absolute;\n  top: -0.25rem;\n  right: -0.25rem;\n  background: #d946ef;\n  color: white;\n  font-size: 0.625rem;\n  padding: 0.125rem 0.25rem;\n  border-radius: 2px;\n  font-weight: 600;\n  line-height: 1;\n`;\n\nconst ComposedFieldInfo = styled.div`\n  margin-top: 0.25rem;\n  padding-top: 0.25rem;\n  border-top: 1px solid #f3e8ff;\n  font-size: 0.7rem;\n  color: #7c3aed;\n`;\n\nconst FieldComposition = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  margin-top: 0.25rem;\n`;\n\nconst ComposedFieldTag = styled.span`\n  background: #e879f9;\n  color: white;\n  font-size: 0.625rem;\n  padding: 0.125rem 0.25rem;\n  border-radius: 2px;\n  font-weight: 500;\n`;\n\nconst FieldInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n`;\n\nconst FieldLabel = styled.div`\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.8rem;\n  line-height: 1.2;\n`;\n\nconst FieldMeta = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst FieldKey = styled.span`\n  font-family: 'Courier New', monospace;\n  color: #059669;\n  font-size: 0.75rem;\n  flex: 1;\n`;\n\nconst FieldExample = styled.div`\n  color: #059669;\n  font-size: 0.75rem;\n  font-style: italic;\n  opacity: 0.8;\n  display: none; /* Skryt - u se nepouv */\n`;\n\nconst FieldTypeTag = styled.span`\n  background: #e0f2fe;\n  color: #0369a1;\n  font-size: 0.7rem;\n  padding: 0.125rem 0.375rem;\n  border-radius: 3px;\n  font-weight: 500;\n`;\n\n// AI Auto-mapping tlatko\nconst AIAutoMapButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nconst ExpandCollapseButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  color: #374151;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n    color: #1f2937;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\n// =============================================================================\n// HELPER FUNCTIONS\n// =============================================================================\n\n/**\n * Pevede validn API pole z validateDocxMapping na strukturu pro UI\n * @returns {Array} - Pole se strukturou [{group, fields: [{key, label, type}]}]\n */\nfunction convertValidFieldsToGroups() {\n  const allFields = getAllAvailableFields();\n  \n  // Vytvo mapu skupin\n  const groupsMap = {\n    'Zkladn daje': [],\n    'Dodavatel': [],\n    'Vypotan hodnoty': [],\n    'Objednatel': [],\n    'Garant': [],\n    'Pkazce': [],\n    'Schvalovatel': [],\n    'Odeslatel': [],\n    'Fakturant': [],\n    'Potvrdil dodavatel': [],\n    'Potvrdil vcnou sprvnost': [],\n    'Dokonil': []\n  };\n  \n  allFields.forEach(path => {\n    // Rozdl cestu na sti\n    const parts = path.split('.');\n    \n    // Top level pole\n    if (!path.includes('.')) {\n      groupsMap['Zkladn daje'].push({\n        key: path,\n        label: formatFieldLabel(path),\n        type: 'text'\n      });\n      return;\n    }\n    \n    // Dodavatel\n    if (path.startsWith('dodavatel_')) {\n      groupsMap['Dodavatel'].push({\n        key: path,\n        label: formatFieldLabel(path.replace('dodavatel_', '')),\n        type: 'text'\n      });\n      return;\n    }\n    \n    // Vypotan hodnoty\n    if (parts[0] === 'vypocitane') {\n      groupsMap['Vypotan hodnoty'].push({\n        key: path,\n        label: formatFieldLabel(parts[1]),\n        type: 'calculated'\n      });\n      return;\n    }\n    \n    // Enriched uivatel\n    const userPrefixMap = {\n      'uzivatel': 'Objednatel',\n      'garant_uzivatel': 'Garant',\n      'prikazce_uzivatel': 'Pkazce',\n      'schvalovatel': 'Schvalovatel',\n      'odesilatel': 'Odeslatel',\n      'fakturant': 'Fakturant',\n      'dodavatel_potvrdil': 'Potvrdil dodavatel',\n      'potvrdil_vecnou_spravnost': 'Potvrdil vcnou sprvnost',\n      'dokoncil': 'Dokonil'\n    };\n    \n    const prefix = parts[0];\n    if (userPrefixMap[prefix]) {\n      const groupName = userPrefixMap[prefix];\n      const fieldName = parts.slice(1).join('.');\n      groupsMap[groupName].push({\n        key: path,\n        label: formatFieldLabel(fieldName),\n        type: 'user'\n      });\n    }\n  });\n  \n  // Peve mapu na array a odstra przdn skupiny\n  const groups = Object.entries(groupsMap)\n    .filter(([_, fields]) => fields.length > 0)\n    .map(([groupName, fields]) => ({\n      group: groupName,\n      fields: fields.sort((a, b) => a.label.localeCompare(b.label, 'cs'))\n    }));\n  \n  return groups;\n}\n\n/**\n * Formtuje nzev pole pro UI\n * @param {string} fieldName - Nzev pole\n * @returns {string} - Formtovan nzev\n */\nfunction formatFieldLabel(fieldName) {\n  // Odstra podtrtka a peve na title case\n  return fieldName\n    .replace(/_/g, ' ')\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ');\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nconst DocxMappingExpandableSection = ({\n  file,\n  mapping = {},\n  onMappingChange,\n  expanded: controlledExpanded,\n  onExpandChange,\n  //  NOV: Auth parametry pro natn enriched dat\n  token = null,\n  username = null,\n  sampleOrderId = null,\n  useDynamicFields = true\n}) => {\n  const { showToast } = useContext(ToastContext);\n\n  const [internalExpanded, setInternalExpanded] = useState(false);\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [aiMapping, setAiMapping] = useState(false);\n  const [orderFields, setOrderFields] = useState([]);\n  const [draggedField, setDraggedField] = useState(null);\n  const [dragOverTarget, setDragOverTarget] = useState(null);\n\n  // State pro rozbalovac skupiny\n  const [expandedGroups, setExpandedGroups] = useState({});\n\n  // State pro multi-mapping (vce pol na jedno DOCX pole)\n  const [multiMapping, setMultiMapping] = useState({});\n\n  // State pro drag & drop reordering v multi-mappingu\n  const [draggedChip, setDraggedChip] = useState(null);\n  const [dragOverChip, setDragOverChip] = useState(null);\n\n  // State pro search v obou panelech\n  const [docxFieldsSearch, setDocxFieldsSearch] = useState('');\n  const [dbFieldsSearch, setDbFieldsSearch] = useState('');\n\n  // State pro validaci mappingu\n  const [mappingValidation, setMappingValidation] = useState(null);\n\n  const jsonSectionRef = useRef(null);\n\n  const expanded = controlledExpanded !== undefined ? controlledExpanded : internalExpanded;\n\n  // NATN POL - DYNAMICKY Z ENRICHED API nebo staticky\n  useEffect(() => {\n    const loadFields = async () => {\n      //  POKUD MME AUTH PARAMETRY A SAMPLE ORDER ID - NATI ENRICHED DATA\n      if (useDynamicFields && token && username && sampleOrderId) {\n        console.log(' Natm ENRICHED DB pole z API pro sampleOrderId:', sampleOrderId);\n        try {\n          const enrichedData = await getDocxOrderEnrichedData({ \n            token, \n            username, \n            objednavka_id: sampleOrderId \n          });\n          \n          const dynamicFields = generateFieldsFromApiData(enrichedData);\n          setOrderFields(dynamicFields);\n          \n          console.log(' ENRICHED DB pole natena z API:', {\n            pocet_skupin: dynamicFields.length,\n            celkem_poli: dynamicFields.reduce((sum, group) => sum + group.fields.length, 0),\n            skupiny: dynamicFields.map(g => `${g.group} (${g.fields.length})`)\n          });\n        } catch (error) {\n          console.error(' Chyba pi natn enriched dat, fallback na statick pole:', error);\n          // Fallback na statick pole z getOrderFieldsForMapping\n          const staticFields = getOrderFieldsForMapping();\n          setOrderFields(staticFields);\n        }\n      } else {\n        //  FALLBACK: POUIJ STATICK POLE (kompatibilita se starou verz)\n        console.log(' Natm STATICK DB pole (fallback - dn auth parametry)...');\n        const staticFields = getOrderFieldsForMapping();\n        setOrderFields(staticFields);\n        \n        console.log(' STATICK DB pole natena:', {\n          pocet_skupin: staticFields.length,\n          celkem_poli: staticFields.reduce((sum, group) => sum + group.fields.length, 0)\n        });\n      }\n    };\n\n    loadFields();\n  }, [useDynamicFields, token, username, sampleOrderId]); // dn zvislosti - pole jsou statick z ENRICHED_API_STRUCTURE\n\n  // Aktualizuj expandedGroups kdy se zmn orderFields\n  useEffect(() => {\n    if (orderFields.length === 0) return;\n\n    const initialExpanded = {};\n    orderFields.forEach((group, index) => {\n      initialExpanded[group.group] = false; // Vechny skupiny defaultn SBALEN\n    });\n    setExpandedGroups(initialExpanded);\n  }, [orderFields]);\n\n  // Validace mappingu pi kad zmn\n  useEffect(() => {\n    if (!mapping || Object.keys(mapping).length === 0) {\n      setMappingValidation(null);\n      return;\n    }\n\n    const validation = validateDocxMapping(mapping);\n    setMappingValidation(validation);\n\n    if (validation && !validation.valid) {\n      console.log(' Mapping obsahuje chyby:', {\n        errors: validation.errors.length,\n        warnings: validation.warnings.length\n      });\n    }\n  }, [mapping]);\n\n  // Parsuj existujc mapovn a rozlo sloen pole do multi-mapping\n  useEffect(() => {\n    if (!mapping || Object.keys(mapping).length === 0 || orderFields.length === 0) return;\n\n    const newMultiMapping = {};\n    const allFields = orderFields.flatMap(g => g.fields);\n\n    Object.entries(mapping).forEach(([docxField, mappedValue]) => {\n      // Zkontroluj, zda je to sloen mapovn (obsahuje \" + \")\n      if (typeof mappedValue === 'string' && mappedValue.includes(' + ')) {\n        const fieldKeys = mappedValue.split(' + ').map(key => key.trim());\n\n        // Najdi objekty pol pro tyto kle\n        const fieldObjects = fieldKeys.map(key =>\n          allFields.find(field => field.key === key)\n        ).filter(Boolean); // Odstra undefined hodnoty\n\n        // Pokud se podailo najt vechny pole, vytvo multi-mapping\n        if (fieldObjects.length === fieldKeys.length && fieldObjects.length > 1) {\n          newMultiMapping[docxField] = fieldObjects;\n        }\n      }\n    });\n\n    // Aktualizuj multi-mapping pouze pokud se nco zmnilo\n    if (Object.keys(newMultiMapping).length > 0) {\n      setMultiMapping(prev => {\n        const updated = { ...prev, ...newMultiMapping };\n        return updated;\n      });\n    }\n  }, [mapping, orderFields]);\n\n  // Helper funkce - vrt error pro konkrtn DOCX pole\n  const getFieldError = (docxFieldName) => {\n    if (!mappingValidation || !mapping[docxFieldName]) return null;\n    \n    return mappingValidation.errors.find(error => error.docxField === docxFieldName);\n  };\n\n  // Toggle funkce pro skupiny\n  const toggleGroup = (groupName) => {\n    setExpandedGroups(prev => ({\n      ...prev,\n      [groupName]: !prev[groupName]\n    }));\n  };\n\n  // Expand all skupin\n  const expandAllGroups = () => {\n    const allExpanded = {};\n    orderFields.forEach(group => {\n      allExpanded[group.group] = true;\n    });\n    setExpandedGroups(allExpanded);\n  };\n\n  // Collapse all skupin\n  const collapseAllGroups = () => {\n    const allCollapsed = {};\n    orderFields.forEach(group => {\n      allCollapsed[group.group] = false;\n    });\n    setExpandedGroups(allCollapsed);\n  };\n\n  // Zjisti, jestli jsou vechny skupiny rozbalen nebo sbalen\n  const areAllGroupsExpanded = () => {\n    return orderFields.every(group => expandedGroups[group.group]);\n  };\n\n  const areAllGroupsCollapsed = () => {\n    return orderFields.every(group => !expandedGroups[group.group]);\n  };\n\n  useEffect(() => {\n    if (file && expanded && !analysisResult) {\n      analyzeDocxFile(file);\n    }\n  }, [file, expanded]);\n\n  // Reset analzy pi zmn souboru\n  useEffect(() => {\n    if (file) {\n      setAnalysisResult(null);\n      setAnalyzing(false);\n      setMultiMapping({});\n    }\n  }, [file]);\n\n  const analyzeDocxFile = async (docxFile) => {\n    if (!docxFile || analyzing) return;\n\n    setAnalyzing(true);\n    setAnalysisResult(null);\n\n    try {\n      const result = await extractDocxFields(docxFile);\n      setAnalysisResult(result);\n    } catch (error) {\n      console.error(' Chyba pi analze DOCX:', error);\n      setAnalysisResult({\n        success: false,\n        error: error.message || 'Neoekvan chyba pi analze'\n      });\n    } finally {\n      setAnalyzing(false);\n    }\n  };\n\n  const getFieldIcon = (fieldType) => {\n    switch (fieldType) {\n      case 'docvariable': return faHashtag;\n      case 'bookmark': return faEye;\n      case 'field': return faCode;\n      default: return faUser;\n    }\n  };\n\n  const getStatus = () => {\n    if (analyzing) return { status: 'analyzing', text: 'Analyzuji...' };\n    if (analysisResult?.success && analysisResult.fields?.length > 0) {\n      const mappedCount = Object.keys(mapping).length;\n      return {\n        status: 'ready',\n        text: `${analysisResult.fields.length} pol, ${mappedCount} namapovno`\n      };\n    }\n    if (analysisResult?.success && analysisResult.fields?.length === 0) {\n      return { status: 'error', text: 'dn pole nenalezena' };\n    }\n    if (analysisResult && !analysisResult.success) {\n      return { status: 'error', text: 'Chyba pi analze' };\n    }\n    return { status: 'waiting', text: 'Rozbalte pro analzu' };\n  };\n\n  // AI automatick mapovn pol - VYLEPEN VERZE s inteligenc\n  const handleAIAutoMapping = async () => {\n    if (!analysisResult?.fields?.length || aiMapping || !orderFields?.length) {\n      console.warn(' AI mapovn nelze spustit - chyb data nebo u b');\n      return;\n    }\n\n    setAiMapping(true);\n\n    try {\n      // Flatten vechna pole ze vech skupin\n      const allFields = orderFields.flatMap(group => group.fields || []);\n\n      // =========================================================================\n      // INTELIGENTN MAPOVAC PRAVIDLA s vhami\n      // =========================================================================\n      const intelligentRules = [\n        // DATUM pravidla (priorita 100)\n        {\n          docxPatterns: [\n            /datum.*vytvor/i, /date.*creat/i, /datum.*zalozen/i,\n            /datum/i, /date/i, /den/i, /mesic/i, /rok/i\n          ],\n          dbFields: ['objednavky.datum_vytvoreni', 'objednavky.created_at', 'objednavky.datum'],\n          priority: 100,\n          category: 'datum'\n        },\n        {\n          docxPatterns: [/datum.*uprav/i, /date.*modif/i, /datum.*zmeny/i],\n          dbFields: ['objednavky.datum_upravy', 'objednavky.updated_at'],\n          priority: 95,\n          category: 'datum'\n        },\n        {\n          docxPatterns: [/termin/i, /deadline/i, /splatnost/i, /due/i],\n          dbFields: ['objednavky.termin_plneni', 'objednavky.deadline', 'objednavky.termin'],\n          priority: 90,\n          category: 'datum'\n        },\n\n        // SLO/ID pravidla (priorita 85)\n        {\n          docxPatterns: [/cislo.*objednavk/i, /order.*number/i, /^cislo$/i, /^number$/i],\n          dbFields: ['objednavky.cislo_objednavky', 'objednavky.order_number'],\n          priority: 85,\n          category: 'cislo'\n        },\n        {\n          docxPatterns: [/^id$/i, /identifikator/i, /identifier/i],\n          dbFields: ['objednavky.id', 'objednavky.order_id'],\n          priority: 80,\n          category: 'cislo'\n        },\n\n        // NZEV/POPIS pravidla (priorita 75)\n        {\n          docxPatterns: [/nazev/i, /name/i, /title/i, /nadpis/i, /heading/i],\n          dbFields: ['objednavky.nazev', 'objednavky.title', 'objednavky.name'],\n          priority: 75,\n          category: 'text'\n        },\n        {\n          docxPatterns: [/popis/i, /description/i, /desc/i, /text/i],\n          dbFields: ['objednavky.popis', 'objednavky.description'],\n          priority: 70,\n          category: 'text'\n        },\n        {\n          docxPatterns: [/poznamka/i, /note/i, /comment/i, /komentar/i],\n          dbFields: ['objednavky.poznamka', 'objednavky.notes', 'objednavky.interni_poznamka'],\n          priority: 65,\n          category: 'text'\n        },\n\n        // CENA/FINANCE pravidla (priorita 60)\n        {\n          docxPatterns: [/cena.*celk/i, /total.*price/i, /celkem/i, /total/i, /suma/i],\n          dbFields: ['objednavky.celkova_cena', 'objednavky.total_price', 'objednavky.cena_celkem'],\n          priority: 60,\n          category: 'finance'\n        },\n        {\n          docxPatterns: [/cena.*bez.*dph/i, /price.*without.*vat/i, /net.*price/i],\n          dbFields: ['objednavky.cena_bez_dph', 'objednavky.net_price'],\n          priority: 55,\n          category: 'finance'\n        },\n        {\n          docxPatterns: [/dph/i, /vat/i, /tax/i, /dan/i],\n          dbFields: ['objednavky.dph', 'objednavky.vat', 'objednavky.tax'],\n          priority: 50,\n          category: 'finance'\n        },\n        {\n          docxPatterns: [/cena/i, /price/i, /castka/i, /amount/i, /hodnota/i],\n          dbFields: ['objednavky.cena', 'objednavky.price', 'objednavky.amount'],\n          priority: 45,\n          category: 'finance'\n        },\n\n        // STATUS/STAV pravidla (priorita 40)\n        {\n          docxPatterns: [/stav/i, /status/i, /state/i],\n          dbFields: ['objednavky.stav', 'objednavky.status', 'objednavky.state'],\n          priority: 40,\n          category: 'status'\n        },\n\n        // KONTAKTY pravidla (priorita 35)\n        {\n          docxPatterns: [/email/i, /e-mail/i, /mail/i, /posta/i],\n          dbFields: ['objednavky.email', 'objednavky.kontakt_email', 'objednavky.mail'],\n          priority: 35,\n          category: 'kontakt'\n        },\n        {\n          docxPatterns: [/telefon/i, /phone/i, /tel/i, /mobil/i, /gsm/i],\n          dbFields: ['objednavky.telefon', 'objednavky.phone', 'objednavky.mobil'],\n          priority: 30,\n          category: 'kontakt'\n        },\n\n        // DODAVATEL/FIRMA pravidla (priorita 25)\n        {\n          docxPatterns: [/dodavatel/i, /supplier/i, /vendor/i],\n          dbFields: ['objednavky.dodavatel', 'objednavky.supplier', 'objednavky.vendor_name'],\n          priority: 25,\n          category: 'firma'\n        },\n        {\n          docxPatterns: [/firma/i, /company/i, /spolecnost/i],\n          dbFields: ['objednavky.firma', 'objednavky.company', 'objednavky.company_name'],\n          priority: 20,\n          category: 'firma'\n        },\n        {\n          docxPatterns: [/ico/i, /^ic$/i, /company.*id/i],\n          dbFields: ['objednavky.ico', 'objednavky.company_id'],\n          priority: 15,\n          category: 'firma'\n        },\n\n        // ADRESA pravidla (priorita 10)\n        {\n          docxPatterns: [/adresa/i, /address/i],\n          dbFields: ['objednavky.adresa', 'objednavky.address', 'objednavky.dodaci_adresa'],\n          priority: 10,\n          category: 'adresa'\n        }\n      ];\n\n      // =========================================================================\n      // MAPOVAC ALGORITMUS\n      // =========================================================================\n      const newMapping = {};\n      const mappingLog = [];\n\n      analysisResult.fields.forEach(docxField => {\n        const fieldName = docxField.name?.toLowerCase() || '';\n        let bestMatch = null;\n        let bestScore = 0;\n        let matchReason = '';\n\n        // 1. PESN SHODA - nejvy priorita\n        const exactMatch = allFields.find(dbField => {\n          const dbKey = dbField.key?.toLowerCase() || '';\n          const dbLabel = dbField.label?.toLowerCase() || '';\n          return fieldName === dbKey || fieldName === dbLabel;\n        });\n\n        if (exactMatch) {\n          bestMatch = exactMatch;\n          bestScore = 1000; // Maximln skre\n          matchReason = ' Pesn shoda nzvu';\n        }\n\n        // 2. INTELIGENTN PRAVIDLA - hledn podle vzor\n        if (!bestMatch) {\n          for (const rule of intelligentRules) {\n            // Testuj vechny vzory pro toto pravidlo\n            const patternMatches = rule.docxPatterns.some(pattern => pattern.test(fieldName));\n\n            if (patternMatches) {\n              // Najdi prvn dostupn DB pole z pravidla\n              for (const dbFieldKey of rule.dbFields) {\n                const dbField = allFields.find(f => f.key === dbFieldKey);\n                if (dbField && rule.priority > bestScore) {\n                  bestMatch = dbField;\n                  bestScore = rule.priority;\n                  matchReason = ` Inteligentn pravidlo (${rule.category})`;\n                  break; // Pouij prvn nalezen pole z tohoto pravidla\n                }\n              }\n            }\n          }\n        }\n\n        // 3. FUZZY MATCHING - sten shody\n        if (!bestMatch || bestScore < 50) {\n          const fuzzyMatch = findBestFuzzyMatch(fieldName, allFields);\n          if (fuzzyMatch && fuzzyMatch.score > bestScore) {\n            bestMatch = fuzzyMatch.field;\n            bestScore = fuzzyMatch.score;\n            matchReason = ` Fuzzy match (skre: ${fuzzyMatch.score})`;\n          }\n        }\n\n        // 4. APLIKUJ MAPOVN\n        if (bestMatch && bestScore >= 10) { // Minimln threshold\n          newMapping[docxField.name] = bestMatch.key;\n          mappingLog.push({\n            docx: docxField.name,\n            db: bestMatch.key,\n            label: bestMatch.label,\n            score: bestScore,\n            reason: matchReason\n          });\n        }\n      });\n\n      // =========================================================================\n      // HELPER: Fuzzy matching funkce\n      // =========================================================================\n      function findBestFuzzyMatch(docxFieldName, dbFields) {\n        let bestField = null;\n        let bestScore = 0;\n\n        dbFields.forEach(dbField => {\n          const dbKey = (dbField.key || '').toLowerCase();\n          const dbLabel = (dbField.label || '').toLowerCase();\n\n          // Skre podle podobnosti\n          let score = 0;\n\n          // Obsahuje klov slovo\n          const docxWords = docxFieldName.split(/[_\\s-]+/).filter(w => w.length > 2);\n          const dbWords = [...dbKey.split(/[._\\s-]+/), ...dbLabel.split(/[_\\s-]+/)]\n            .filter(w => w.length > 2);\n\n          docxWords.forEach(docxWord => {\n            dbWords.forEach(dbWord => {\n              if (docxWord === dbWord) score += 30; // Pesn shoda slova\n              else if (docxWord.includes(dbWord) || dbWord.includes(docxWord)) score += 15; // sten shoda\n              else if (levenshteinDistance(docxWord, dbWord) <= 2) score += 10; // Podobn slovo\n            });\n          });\n\n          if (score > bestScore) {\n            bestScore = score;\n            bestField = dbField;\n          }\n        });\n\n        return bestScore > 0 ? { field: bestField, score: bestScore } : null;\n      }\n\n      // Levenshtein distance pro men podobnosti string\n      function levenshteinDistance(str1, str2) {\n        const matrix = [];\n        for (let i = 0; i <= str2.length; i++) {\n          matrix[i] = [i];\n        }\n        for (let j = 0; j <= str1.length; j++) {\n          matrix[0][j] = j;\n        }\n        for (let i = 1; i <= str2.length; i++) {\n          for (let j = 1; j <= str1.length; j++) {\n            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {\n              matrix[i][j] = matrix[i - 1][j - 1];\n            } else {\n              matrix[i][j] = Math.min(\n                matrix[i - 1][j - 1] + 1,\n                matrix[i][j - 1] + 1,\n                matrix[i - 1][j] + 1\n              );\n            }\n          }\n        }\n        return matrix[str2.length][str1.length];\n      }\n\n      // =========================================================================\n      // APLIKUJ MAPOVN A LOGUJ VSLEDKY\n      // =========================================================================\n      const finalMapping = { ...mapping, ...newMapping };\n      onMappingChange(finalMapping);\n\n    } catch (error) {\n      console.error(' Chyba pi AI mapovn:', error);\n    } finally {\n      setAiMapping(false);\n      // Dialog zmrn nezavrme - uivatel me pokraovat v editaci mapovn\n    }\n  };\n\n  const handleExpand = () => {\n    const newExpanded = !expanded;\n    if (controlledExpanded === undefined) {\n      setInternalExpanded(newExpanded);\n    }\n    onExpandChange?.(newExpanded);\n  };\n\n  const handleDragStart = (e, field, source) => {\n    setDraggedField({ ...field, source });\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragOver = (e, target) => {\n    e.preventDefault();\n    setDragOverTarget(target);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverTarget(null);\n  };\n\n  const handleDrop = (e, docxFieldName) => {\n    e.preventDefault();\n    setDragOverTarget(null);\n\n    if (draggedField && draggedField.source === 'order') {\n      // Zkontroluj, zda u je nco namapovan na tento DOCX field\n      const existingMapping = mapping[docxFieldName];\n      const existingMultiMapping = multiMapping[docxFieldName];\n\n      if (existingMapping || existingMultiMapping) {\n        // U je nco namapovan - pidej do multi-mapping\n        let currentFields = [];\n\n        if (existingMultiMapping && existingMultiMapping.length > 0) {\n          // U existuje multi-mapping, pidej k nmu\n          currentFields = [...existingMultiMapping];\n        } else if (existingMapping) {\n          // Existuje single mapping, peve na multi-mapping\n          // Najdi field object pro existujc mapovn\n          const existingField = orderFields.flatMap(g => g.fields).find(f => f.key === existingMapping);\n          if (existingField) {\n            currentFields = [existingField];\n          }\n        }\n\n        // Zkontroluj, zda u nen pidan\n        if (!currentFields.find(f => f.key === draggedField.key)) {\n          const newMultiFields = [...currentFields, draggedField];\n\n          // Aktualizuj multi-mapping\n          setMultiMapping(prev => ({\n            ...prev,\n            [docxFieldName]: newMultiFields\n          }));\n\n          // Vytvo sloen mapovn ve formtu pro backend\n          const composedKey = newMultiFields.map(f => f.key).join(' + ');\n          const newMapping = {\n            ...mapping,\n            [docxFieldName]: composedKey\n          };\n          onMappingChange?.(newMapping);\n        }\n      } else {\n        // Jednoduch single mapping\n        const newMapping = {\n          ...mapping,\n          [docxFieldName]: draggedField.key\n        };\n        onMappingChange?.(newMapping);\n\n        console.log(' Namapovno jednoduch pole:', {\n          docxField: docxFieldName,\n          dbField: draggedField.key\n        });\n      }\n    }\n\n    setDraggedField(null);\n  };\n\n  const handleRemoveMapping = (docxFieldName) => {\n    const newMapping = { ...mapping };\n    delete newMapping[docxFieldName];\n    onMappingChange?.(newMapping);\n\n    // Zru i multi-mapping\n    setMultiMapping(prev => {\n      const newMulti = { ...prev };\n      delete newMulti[docxFieldName];\n      return newMulti;\n    });\n  };\n\n  const handleRemoveFromMultiMapping = (docxFieldName, fieldToRemove) => {\n    const currentMultiFields = multiMapping[docxFieldName] || [];\n    const newMultiFields = currentMultiFields.filter(f => f.key !== fieldToRemove.key);\n\n    if (newMultiFields.length === 0) {\n      // Pokud nezstalo dn pole, zru mapovn pln\n      handleRemoveMapping(docxFieldName);\n    } else if (newMultiFields.length === 1) {\n      // Pokud zstalo jen jedno pole, udlej z toho jednoduch mapping\n      setMultiMapping(prev => {\n        const newMulti = { ...prev };\n        delete newMulti[docxFieldName];\n        return newMulti;\n      });\n\n      const newMapping = {\n        ...mapping,\n        [docxFieldName]: newMultiFields[0].key\n      };\n      onMappingChange?.(newMapping);\n    } else {\n      // Aktualizuj multi-mapping\n      setMultiMapping(prev => ({\n        ...prev,\n        [docxFieldName]: newMultiFields\n      }));\n\n      const composedKey = newMultiFields.map(f => f.key).join(' + ');\n      const newMapping = {\n        ...mapping,\n        [docxFieldName]: composedKey\n      };\n      onMappingChange?.(newMapping);\n    }\n  };\n\n  // Funkce pro reordering pol v multi-mappingu\n  const handleChipDragStart = (e, docxFieldName, fieldIndex) => {\n    e.stopPropagation();\n    setDraggedChip({ docxFieldName, fieldIndex });\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleChipDragOver = (e, docxFieldName, fieldIndex) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragOverChip({ docxFieldName, fieldIndex });\n  };\n\n  const handleChipDragLeave = (e) => {\n    e.stopPropagation();\n    setDragOverChip(null);\n  };\n\n  const handleChipDrop = (e, docxFieldName, targetIndex) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!draggedChip || draggedChip.docxFieldName !== docxFieldName) {\n      setDraggedChip(null);\n      setDragOverChip(null);\n      return;\n    }\n\n    const sourceIndex = draggedChip.fieldIndex;\n    if (sourceIndex === targetIndex) {\n      setDraggedChip(null);\n      setDragOverChip(null);\n      return;\n    }\n\n    // Peuspodej pole v multi-mappingu\n    const currentFields = [...multiMapping[docxFieldName]];\n    const [movedField] = currentFields.splice(sourceIndex, 1);\n    currentFields.splice(targetIndex, 0, movedField);\n\n    // Aktualizuj multi-mapping state\n    setMultiMapping(prev => ({\n      ...prev,\n      [docxFieldName]: currentFields\n    }));\n\n    // Aktualizuj hlavn mapping s novm poadm\n    const composedKey = currentFields.map(f => f.key).join(' + ');\n    const newMapping = {\n      ...mapping,\n      [docxFieldName]: composedKey\n    };\n    onMappingChange?.(newMapping);\n\n    setDraggedChip(null);\n    setDragOverChip(null);\n  };\n\n  const handleRefresh = async () => {\n    if (!file || analyzing) return;\n\n    await analyzeDocxFile(file);\n  };\n\n  const status = getStatus();\n\n  return (\n    <ExpandableSection>\n      <SectionHeader $expanded={expanded} onClick={handleExpand}>\n        <SectionHeaderLeft>\n          <SectionIcon>\n            <FontAwesomeIcon icon={faFileWord} />\n          </SectionIcon>\n          <div>\n            <SectionTitle>DOCX Mapovn pol</SectionTitle>\n            <SectionSubtitle>\n              Automatick extrakce a mapovn programovch pol\n            </SectionSubtitle>\n          </div>\n        </SectionHeaderLeft>\n\n        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n          <StatusBadge $status={status.status}>\n            {status.status === 'analyzing' && <FontAwesomeIcon icon={faSpinner} spin />}\n            {status.status === 'ready' && <FontAwesomeIcon icon={faCheck} />}\n            {status.status === 'error' && <FontAwesomeIcon icon={faTimes} />}\n            {status.text}\n          </StatusBadge>\n\n          <ExpandIcon $expanded={expanded}>\n            <FontAwesomeIcon icon={faChevronDown} />\n          </ExpandIcon>\n        </div>\n      </SectionHeader>\n\n      <SectionContent $expanded={expanded}>\n        {!file && (\n          <div style={{ textAlign: 'center', padding: '2rem', color: '#6b7280' }}>\n            <FontAwesomeIcon icon={faFileWord} style={{ fontSize: '3rem', marginBottom: '1rem' }} />\n            <p>Nejdve nahrajte DOCX soubor pro analzu programovch pol</p>\n          </div>\n        )}\n\n        {file && analyzing && (\n          <ProcessingOverlay>\n            <SpinnerIcon>\n              <FontAwesomeIcon icon={faSpinner} spin />\n            </SpinnerIcon>\n            <p>Analyzuji DOCX soubor a hledm programov pole...</p>\n          </ProcessingOverlay>\n        )}\n\n        {file && analysisResult && analysisResult.success && (\n          <CompactMappingContainer>\n            {/* Hlavn mapovac grid */}\n            <MappingGrid>\n              {/* Lev panel - DOCX pole */}\n              <DocxFieldsPanel>\n                <PanelHeader>\n                  <PanelHeaderTop>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                      <HeaderIcon><FontAwesomeIcon icon={faFileWord} /></HeaderIcon>\n                      <HeaderTitle>DOCX Pole ({analysisResult.fields.filter(f => \n                        !docxFieldsSearch || f.name.toLowerCase().includes(docxFieldsSearch.toLowerCase())\n                      ).length}/{analysisResult.fields.length})</HeaderTitle>\n                    </div>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                      <AIAutoMapButton\n                        type=\"button\"\n                        onClick={handleAIAutoMapping}\n                        disabled={aiMapping || !analysisResult.fields.length}\n                      title=\"AI automatick mapovn pol - nevyaduje uloen\"\n                    >\n                      <FontAwesomeIcon icon={aiMapping ? faSpinner : faCode} spin={aiMapping} />\n                      {aiMapping ? 'Mapuji...' : 'AI Map'}\n                    </AIAutoMapButton>\n                    {file && (\n                      <RefreshButton\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleRefresh();\n                        }}\n                        disabled={analyzing}\n                        title=\"Obnovit detekci DOCX pol\"\n                      >\n                        <FontAwesomeIcon\n                          icon={faSync}\n                          spin={analyzing}\n                        />\n                      </RefreshButton>\n                    )}\n                  </div>\n                  </PanelHeaderTop>\n                  \n                  {/* Search box pro DOCX pole */}\n                  <SearchBox>\n                    <SearchIcon>\n                      <FontAwesomeIcon icon={faSearch} />\n                    </SearchIcon>\n                    <SearchInput\n                      type=\"text\"\n                      placeholder=\"Hledat DOCX pole...\"\n                      value={docxFieldsSearch}\n                      onChange={(e) => setDocxFieldsSearch(e.target.value)}\n                    />\n                    {docxFieldsSearch && (\n                      <ClearSearchButton\n                        type=\"button\"\n                        onClick={() => setDocxFieldsSearch('')}\n                        title=\"Vymazat hledn\"\n                      >\n                        <FontAwesomeIcon icon={faTimes} />\n                      </ClearSearchButton>\n                    )}\n                  </SearchBox>\n                </PanelHeader>\n\n                <DocxFieldsScrollArea>\n                  {analysisResult.fields\n                    .filter(field => !docxFieldsSearch || field.name.toLowerCase().includes(docxFieldsSearch.toLowerCase()))\n                    .sort((a, b) => {\n                      // Primrn azen: abecedn podle nzvu\n                      const nameComparison = a.name.localeCompare(b.name, 'cs', {\n                        sensitivity: 'base',\n                        numeric: true\n                      });\n                      if (nameComparison !== 0) return nameComparison;\n\n                      // Sekundrn azen: podle typu pole\n                      const typeOrder = { 'docvariable': 1, 'bookmark': 2, 'field': 3 };\n                      return (typeOrder[a.type] || 4) - (typeOrder[b.type] || 4);\n                    })\n                    .map((field, index) => {\n                      const fieldError = getFieldError(field.name);\n                      return (\n                    <DocxFieldCard\n                      key={index}\n                      $mapped={!!mapping[field.name]}\n                      $hasError={!!fieldError}\n                      $dragOver={dragOverTarget === field.name}\n                    >\n                      <FieldHeader>\n                        <FieldTypeIcon $type={field.type}>\n                          <FontAwesomeIcon icon={getFieldIcon(field.type)} />\n                        </FieldTypeIcon>\n                        <FieldName>\n                          {field.name}\n                          {/*  Zobrazit poet vskyt vedle nzvu pole */}\n                          {field.count && field.count > 1 && (\n                            <span style={{\n                              marginLeft: '0.5rem',\n                              fontSize: '0.75rem',\n                              color: '#6b7280',\n                              fontWeight: '400',\n                              fontStyle: 'italic'\n                            }}>\n                              ({field.count})\n                            </span>\n                          )}\n                        </FieldName>\n                      </FieldHeader>\n\n                      <MappingZone\n                        $mapped={!!mapping[field.name]}\n                        $dragOver={dragOverTarget === field.name}\n                        onDragOver={(e) => handleDragOver(e, field.name)}\n                        onDragLeave={handleDragLeave}\n                        onDrop={(e) => handleDrop(e, field.name)}\n                      >\n                        {multiMapping[field.name] ? (\n                          // Multi-mapping zobrazen\n                          <MultiMappedFields>\n                            {multiMapping[field.name].map((mappedField, idx) => (\n                              <div key={mappedField.key || idx}>\n                                <MappedFieldChip\n                                  $isComposed={mappedField.type === 'composed'}\n                                  $isDragging={draggedChip?.docxFieldName === field.name && draggedChip?.fieldIndex === idx}\n                                  $dragOver={dragOverChip?.docxFieldName === field.name && dragOverChip?.fieldIndex === idx}\n                                  draggable\n                                  onDragStart={(e) => handleChipDragStart(e, field.name, idx)}\n                                  onDragOver={(e) => handleChipDragOver(e, field.name, idx)}\n                                  onDragLeave={handleChipDragLeave}\n                                  onDrop={(e) => handleChipDrop(e, field.name, idx)}\n                                  title=\"Pethnte pro zmnu poad\"\n                                >\n                                  <FieldChipText>\n                                    {mappedField.label || mappedField.key}\n                                  </FieldChipText>\n                                  <ChipRemoveButton\n                                    type=\"button\"\n                                    onClick={() => handleRemoveFromMultiMapping(field.name, mappedField)}\n                                    title=\"Odebrat z mapovn\"\n                                  >\n                                    <FontAwesomeIcon icon={faTimes} />\n                                  </ChipRemoveButton>\n                                </MappedFieldChip>\n                                {idx < multiMapping[field.name].length - 1 && (\n                                  <SeparatorIndicator>+ mezera +</SeparatorIndicator>\n                                )}\n                              </div>\n                            ))}\n                          </MultiMappedFields>\n                        ) : mapping[field.name] ? (\n                          // Single mapping zobrazen\n                          <MappedField>\n                            <MappedFieldLabel $hasError={!!fieldError}>\n                              {orderFields.flatMap(g => g.fields).find(f => f.key === mapping[field.name])?.label || mapping[field.name]}\n                            </MappedFieldLabel>\n                            <UnmapButton\n                              type=\"button\"\n                              onClick={() => handleRemoveMapping(field.name)}\n                            >\n                              <FontAwesomeIcon icon={faTimes} />\n                            </UnmapButton>\n                          </MappedField>\n                        ) : (\n                          <DropPlaceholder>Pethnte pole (nebo vce pol pro sluovn)</DropPlaceholder>\n                        )}\n                      </MappingZone>\n\n                      {/* Validan chyba pod mapovnm */}\n                      {fieldError && (\n                        <>\n                          <ValidationWarning>\n                            {fieldError.type === 'deprecated' && (\n                              <>\n                                 <strong>Zastaral cesta:</strong> <code>{fieldError.apiPath}</code>\n                                <div style={{ marginTop: '0.25rem' }}> {fieldError.reason}</div>\n                              </>\n                            )}\n                            {fieldError.type === 'invalid' && (\n                              <>\n                                 <strong>Neplatn cesta:</strong> <code>{fieldError.apiPath}</code>\n                                <div style={{ marginTop: '0.25rem' }}> Toto pole neexistuje v enriched API</div>\n                              </>\n                            )}\n                          </ValidationWarning>\n                          {fieldError.suggestion && (\n                            <ValidationSuggestion>\n                               Pouijte: <strong>{fieldError.suggestion}</strong>\n                            </ValidationSuggestion>\n                          )}\n                        </>\n                      )}\n                    </DocxFieldCard>\n                      );\n                    })}\n                </DocxFieldsScrollArea>\n              </DocxFieldsPanel>\n\n              {/* Prav panel - DB pole s enrich daty */}\n              <DatabaseFieldsPanel>\n                <PanelHeader>\n                  <PanelHeaderTop>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                      <HeaderIcon><FontAwesomeIcon icon={faDownload} /></HeaderIcon>\n                      <HeaderTitle>Databzov pole ({orderFields.reduce((sum, group) => \n                        sum + group.fields.filter(f => \n                          !dbFieldsSearch || \n                          f.label.toLowerCase().includes(dbFieldsSearch.toLowerCase()) ||\n                          f.key.toLowerCase().includes(dbFieldsSearch.toLowerCase())\n                        ).length, 0)}/{orderFields.reduce((sum, group) => sum + group.fields.length, 0)})</HeaderTitle>\n                    </div>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    <ExpandCollapseButton\n                      type=\"button\"\n                      onClick={areAllGroupsExpanded() ? collapseAllGroups : expandAllGroups}\n                      title={areAllGroupsExpanded() ? 'Sbalit vechny skupiny' : 'Rozbalit vechny skupiny'}\n                    >\n                      <FontAwesomeIcon\n                        icon={areAllGroupsExpanded() ? faAngleDoubleUp : faAngleDoubleDown}\n                      />\n                    </ExpandCollapseButton>\n                  </div>\n                  </PanelHeaderTop>\n                  \n                  {/* Search box pro DB pole */}\n                  <SearchBox>\n                    <SearchIcon>\n                      <FontAwesomeIcon icon={faSearch} />\n                    </SearchIcon>\n                    <SearchInput\n                      type=\"text\"\n                      placeholder=\"Hledat DB pole...\"\n                      value={dbFieldsSearch}\n                      onChange={(e) => setDbFieldsSearch(e.target.value)}\n                    />\n                    {dbFieldsSearch && (\n                      <ClearSearchButton\n                        type=\"button\"\n                        onClick={() => setDbFieldsSearch('')}\n                        title=\"Vymazat hledn\"\n                      >\n                        <FontAwesomeIcon icon={faTimes} />\n                      </ClearSearchButton>\n                    )}\n                  </SearchBox>\n                </PanelHeader>\n\n                <DatabaseFieldsScrollArea>\n                  {orderFields.map(group => {\n                    // Filtruj pole v rmci skupiny podle search termu\n                    const filteredFields = group.fields.filter(field =>\n                      !dbFieldsSearch ||\n                      field.label.toLowerCase().includes(dbFieldsSearch.toLowerCase()) ||\n                      field.key.toLowerCase().includes(dbFieldsSearch.toLowerCase())\n                    );\n                    \n                    // Nezobrazuj skupinu, pokud nem dn filtrovan pole\n                    if (filteredFields.length === 0) return null;\n                    \n                    return (\n                    <FieldGroup key={group.group}>\n                      <GroupHeader\n                        $expanded={expandedGroups[group.group]}\n                        onClick={() => toggleGroup(group.group)}\n                      >\n                        <span>{group.group} ({filteredFields.length}/{group.fields.length})</span>\n                        <GroupToggleIcon $expanded={expandedGroups[group.group]}>\n                          <FontAwesomeIcon icon={faChevronDown} />\n                        </GroupToggleIcon>\n                      </GroupHeader>\n                      <GroupFields $expanded={expandedGroups[group.group]}>\n                        {filteredFields.map(field => {\n                          // Rozdl label na esk nzev a DB pole\n                          const labelParts = field.label?.split('\\n') || [field.label || field.key];\n                          const czechName = labelParts[0]; // esk nzev nebo cel label\n                          const dbFieldName = labelParts[1] || `{${field.key}}`; // {db_pole} nebo fallback\n\n                          return (\n                            <DatabaseFieldCard\n                              key={field.key}\n                              draggable\n                              onDragStart={(e) => handleDragStart(e, field, 'order')}\n                              $isComposed={field.type === 'composed'}\n                            >\n                              {field.type === 'composed' && (\n                                <ComposedFieldBadge>SLOEN</ComposedFieldBadge>\n                              )}\n\n                              <FieldInfo>\n                                <FieldLabel>{czechName}</FieldLabel>\n                                <FieldMeta>\n                                  <FieldKey>{dbFieldName}</FieldKey>\n                                  <FieldTypeTag>{field.type}</FieldTypeTag>\n                                </FieldMeta>\n                              </FieldInfo>\n\n                              {field.type === 'composed' && field.composition && (\n                                <ComposedFieldInfo>\n                                  <div>Skld se z: {field.composition.join(` ${field.separator || ' '} `)}</div>\n                                  {field.template && (\n                                    <div>Formt: {field.template}</div>\n                                  )}\n                                  <FieldComposition>\n                                    {field.composition.map((composedField, idx) => (\n                                      <ComposedFieldTag key={idx}>{composedField}</ComposedFieldTag>\n                                    ))}\n                                  </FieldComposition>\n                                </ComposedFieldInfo>\n                              )}\n                            </DatabaseFieldCard>\n                          );\n                        })}\n                      </GroupFields>\n                    </FieldGroup>\n                    );\n                  })}\n                </DatabaseFieldsScrollArea>\n              </DatabaseFieldsPanel>\n            </MappingGrid>\n          </CompactMappingContainer>\n        )}\n\n        {file && analysisResult && !analysisResult.success && (\n          <div style={{ textAlign: 'center', padding: '2rem', color: '#dc2626' }}>\n            <FontAwesomeIcon icon={faTimes} style={{ fontSize: '3rem', marginBottom: '1rem' }} />\n            <p>Chyba pi analze DOCX souboru: {analysisResult.error}</p>\n          </div>\n        )}\n\n        {file && analysisResult && analysisResult.success && analysisResult.fields.length === 0 && (\n          <div style={{ textAlign: 'center', padding: '2rem', color: '#f59e0b' }}>\n            <FontAwesomeIcon icon={faInfoCircle} style={{ fontSize: '3rem', marginBottom: '1rem' }} />\n            <p>V DOCX souboru nebyla nalezena dn programov pole.</p>\n            <p style={{ fontSize: '0.875rem', marginTop: '0.5rem' }}>\n              Zkontrolujte, zda dokument obsahuje merge fields, bookmarks nebo content controls.\n            </p>\n          </div>\n        )}\n      </SectionContent>\n    </ExpandableSection>\n  );\n};\n\nexport default DocxMappingExpandableSection;","/**\n * DOCX ablony Tab - Sprva DOCX ablon s TanStack Table\n * Implementovno podle Users.js vzhledu a API dokumentace\n * @date 2025-10-20\n */\n\nimport React, { useState, useEffect, useContext, useMemo, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Search, FileText, Calculator, Hash, Package } from 'lucide-react';\nimport {\n  faFileWord, faPlus, faSearch, faEdit, faTrash, faSyncAlt,\n  faDownload, faUpload, faFilter, faTimes, faToggleOn, faToggleOff,\n  faCheckCircle, faTimesCircle, faFileExport, faClock, faBolt, faHdd,\n  faCode, faCheck, faCopy, faInfoCircle, faEye, faExpandArrowsAlt, faCompress,\n  faChevronUp, faChevronDown, faEraser, faSync\n} from '@fortawesome/free-solid-svg-icons';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { ProgressContext } from '../../../context/ProgressContext';\nimport { SelectWithIcon } from '../../CustomSelect';\nimport { getTypyPriloh25 } from '../../../services/api25orders';\nimport {\n  getDocxSablonyList,\n  getDocxSablonaDetail,\n  createDocxSablona,\n  updateDocxSablona,\n  updateDocxSablonaWithFile,\n  reuploadDocxSablona,\n  deleteDocxSablona,\n  deactivateDocxSablona,\n  removeDocxSablonaFile,\n  downloadDocxSablona,\n  downloadDocxSablonaAsFile,\n  verifyDocxSablony,\n  verifySingleDocxSablona\n} from '../../../services/apiv2Dictionaries';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  flexRender,\n} from '@tanstack/react-table';\nimport { prettyDate } from '../../../utils/format';\nimport { removeDiacritics } from '../../../utils/textHelpers';\nimport ConfirmDialog from '../../ConfirmDialog';\nimport DocxTemplateEditor from '../../docx/DocxTemplateEditor';\nimport DocxMappingExpandableSection from '../../docx/DocxMappingExpandableSection.jsx';\n//  DocxPreviewModal odstrann - pouv se univerzln HTML nhled v nov zloce\nimport mammoth from 'mammoth';\nimport JSZip from 'jszip';\nimport { processDocxWithFields } from '../../../utils/docx/processDocx';\nimport { validateDocxMapping, autoFixMapping } from '../../../utils/docx/validateDocxMapping';\n\n// =============================================================================\n// GLOBLN SCROLLBAR STYLY - jednotn design pro celou komponentu\n// =============================================================================\n\nconst scrollbarStyles = `\n  /* Webkit scrollbars (Chrome, Safari, Edge) */\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  /* Firefox scrollbars */\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n`;\n\n// JSON editor specifick scrollbar - tmav ed\nconst jsonScrollbarStyles = `\n  /* Webkit scrollbars (Chrome, Safari, Edge) */\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #64748b; /* Tmav ed */\n    border-radius: 4px;\n\n    &:hover {\n      background: #475569; /* Jet tmav pi hover */\n    }\n  }\n\n  /* Firefox scrollbars */\n  scrollbar-width: thin;\n  scrollbar-color: #64748b #f1f5f9;\n`;\n\n// =============================================================================\n// STYLED COMPONENTS - podle vzoru Users.js\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n\n  @keyframes pulse {\n    0%, 100% {\n      opacity: 0.3;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.1);\n    }\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ${props => props.$primary ? '#3b82f6' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$primary ? '#2563eb' : '#eff6ff'};\n    border-color: ${props => props.$primary ? '#2563eb' : '#2563eb'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n\n  svg {\n    font-size: 1rem;\n    ${props => props.$loading && `\n      animation: spin 1s linear infinite;\n    `}\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n\n  /* Pevn ky pro specifick sloupce */\n  th:nth-of-type(2), td:nth-of-type(2) { width: 147px !important; min-width: 147px !important; max-width: 147px !important; }   /* Typ ablony */\n  th:nth-of-type(3), td:nth-of-type(3) { width: 147px !important; min-width: 147px !important; max-width: 147px !important; }   /* Vytvoeno */\n  th:nth-of-type(4), td:nth-of-type(4) { width: 135px !important; min-width: 135px !important; max-width: 135px !important; }   /* Verze */\n  th:nth-of-type(5), td:nth-of-type(5) { width: 135px !important; min-width: 135px !important; max-width: 135px !important; }   /* Velikost */\n  /* Uivatel (6) - dn pevn ka, dynamicky zabere zbytek */\n  th:nth-of-type(7), td:nth-of-type(7) { width: 150px !important; min-width: 150px !important; max-width: 150px !important; }   /* stka */\n  th:nth-of-type(8), td:nth-of-type(8) { width: 50px !important; min-width: 50px !important; max-width: 50px !important; }   /* Disk */\n  th:nth-of-type(9), td:nth-of-type(9) { width: 50px !important; min-width: 50px !important; max-width: 50px !important; }   /* Aktivn */\n  th:last-child, td:last-child { width: 120px !important; min-width: 120px !important; max-width: 120px !important; }      /* Akce */\n`;\n\nconst TableHeaderRow = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeader = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst TableRow = styled.tr`\n  background: ${props => {\n    if (props.$isInactive) return '#f8f9fa'; // ediv pozad pro neaktivn\n    return props.$isEven ? '#f8fafc' : 'white';\n  }};\n  opacity: ${props => props.$isInactive ? 0.7 : 1};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$isInactive ? '#e9ecef' : '#f9fafb'};\n  }\n`;\n\nconst TableCell = styled.td`\n  vertical-align: middle;\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  align-items: center;\n  justify-content: center;\n\n  .action-row {\n    display: flex;\n    gap: 0.12rem;\n    align-items: center;\n    justify-content: center;\n  }\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem; /* Zmeneno z 2rem na 1.75rem = 28px */\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.download {\n    &:hover {\n      color: #059669;\n      background: #ecfdf5;\n    }\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  svg {\n    position: absolute;\n    left: 0.5rem;\n    color: #9ca3af;\n    font-size: 0.75rem;\n    pointer-events: none;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n`;\n\nconst ColumnClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #ef4444;\n  }\n\n  svg {\n    width: 12px !important;\n    height: 12px !important;\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst IconFilterButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(1.15);\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n`;\n\nconst FilterActionButton = styled.button`\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #6b7280;\n  padding: 0.4rem 0.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationControls = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst Badge = styled.span`\n  display: inline-block;\n  padding: 0.25rem 0.625rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: #e0e7ff;\n  color: #3730a3;\n  font-family: monospace;\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #6b7280;\n\n  svg {\n    margin-bottom: 1rem;\n  }\n\n  h3 {\n    margin: 0 0 0.5rem 0;\n    color: #374151;\n  }\n\n  p {\n    margin: 0;\n  }\n`;\n\n// Upload Modal styles\n// =============================================================================\n// MODAL STYLED COMPONENTS - podle UserManagementModal.js\n// =============================================================================\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\nconst ModalOverlay = styled.div`\n  position: fixed !important;\n  top: ${props => props.$isFullscreen ? '0 !important' : '132px'};\n  left: 0 !important;\n  right: 0 !important;\n  bottom: ${props => props.$isFullscreen ? '0 !important' : '60px'};\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ${props => props.$isFullscreen ? '1050 !important' : '1010'};\n  padding: ${props => props.$isFullscreen ? '0' : '1rem'};\n  cursor: default;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n`;\n\nconst ModalContainer = styled.div`\n  background: white;\n  border-radius: ${props => props.$isFullscreen ? '0' : '16px'};\n  width: ${props => props.$isFullscreen ? '100vw' : '100%'};\n  max-width: ${props => props.$isFullscreen ? 'none' : (props.$expanded ? '1400px' : '900px')};\n  height: ${props => props.$isFullscreen ? '100vh' : 'calc(100vh - 280px)'};\n  max-height: ${props => props.$isFullscreen ? 'none' : 'calc(100vh - 280px)'};\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-shadow: ${props => props.$isFullscreen ? 'none' : '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)'};\n  animation: ${slideInUp} 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n  transition: all 0.3s ease;\n  z-index: ${props => props.$isFullscreen ? '1051 !important' : 'auto'};\n  position: ${props => props.$isFullscreen ? 'relative !important' : 'static'};\n`;\n\nconst ModalHeader = styled.div`\n  padding: 1.25rem 1.5rem 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url('data:image/svg+xml,<svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><g fill=\"%23ffffff\" fill-opacity=\"0.05\"><circle cx=\"30\" cy=\"30\" r=\"1\"/></g></svg>');\n    pointer-events: none;\n  }\n`;\n\nconst ModalHeaderContent = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n  z-index: 1;\n`;\n\nconst HeaderLeft = styled.div`\n  flex: 1;\n`;\n\nconst ModalTitle = styled.h2`\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 700;\n  line-height: 1.2;\n`;\n\nconst ModalSubtitle = styled.p`\n  margin: 0.375rem 0 0 0;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.8125rem;\n  font-weight: 400;\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  cursor: pointer;\n  padding: 0.625rem;\n  border-radius: 10px;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.05);\n  }\n`;\n\nconst ModalBody = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  ${scrollbarStyles}\n`;\n\n// Layout kontejner - rozthne se pes celou vku\nconst UpperSection = styled.div`\n  display: grid;\n  grid-template-columns: ${props => props.$hasMapping ? '1fr 1.8fr' : '1fr'};\n  grid-template-rows: 1fr;\n  gap: ${props => props.$hasMapping ? '1.25rem' : '0'};\n  transition: all 0.3s ease;\n  flex: 1;\n  overflow: hidden;\n  padding: 1rem 1.25rem;\n\n  @media (max-width: 1200px) {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n`;\n\n// Lev sloupec - rozthne se pes celou dostupnou vku\nconst LeftColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  overflow: hidden;\n`;\n\n// Prav sloupec - rozthne se pes celou dostupnou vku a k patice\nconst RightColumn = styled.div`\n  display: ${props => props.$visible ? 'flex' : 'none'};\n  flex-direction: column;\n  opacity: ${props => props.$visible ? 1 : 0};\n  transition: opacity 0.3s ease;\n  overflow: hidden;\n  height: 100%;\n`;\n\n// dek s nzvem a nahrnm plohy\nconst NameAndFileRow = styled.div`\n  display: block;\n  width: 100%;\n`;\n\n// Spodn sekce pro JSON co nejble k hornm sekcm\nconst BottomSection = styled.div`\n  width: 100%;\n  margin-top: 0.5rem;\n`;\n\n// JSON Editor - rozthne se na zbvajc prostor\nconst FullWidthJsonEditor = styled.div`\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`;\n\nconst JsonHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n  background: linear-gradient(135deg, #e2e8f0 0%, #f1f5f9 100%);\n  border-bottom: 1px solid #cbd5e1;\n  flex-shrink: 0;\n`;\n\nconst JsonTitle = styled.h4`\n  margin: 0;\n  color: #1e293b;\n  font-size: 0.85rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n`;\n\nconst JsonActions = styled.div`\n  display: flex;\n  gap: 0.5rem;\n`;\n\nconst CopyButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #475569;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(59, 130, 246, 0.1);\n    color: #3b82f6;\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst JsonEditor = styled.div`\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst JsonTextarea = styled.textarea`\n  width: 100%;\n  height: 150px;\n  background: #1f2937;\n  color: #e5e7eb;\n  border: none;\n  padding: 1rem;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  resize: none;\n  outline: none;\n\n  &::placeholder {\n    color: #6b7280;\n  }\n`;\n\n// Textarea - rozthne se na celou dostupnou vku\nconst FullWidthJsonTextarea = styled.textarea`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  color: transparent;\n  border: none;\n  padding: 0.5rem 1rem; /* Men padding top/bottom */\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'JetBrains Mono', 'Fira Code', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  resize: none;\n  outline: none;\n  overflow: auto; /* Textarea me scrollovat */\n  z-index: 2;\n\n  &::placeholder {\n    color: #94a3b8;\n    font-style: italic;\n  }\n\n  /* JSON Syntax Highlighting simulation pro textarea */\n  ::selection {\n    background: rgba(59, 130, 246, 0.2);\n  }\n\n  ${jsonScrollbarStyles}\n`;\n\n// JSON syntax highlighting overlay component\nconst JsonHighlightContainer = styled.div`\n  position: relative;\n  width: 100%;\n  flex: 1;\n  min-height: 0;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: auto; /* Umon scrollovn */\n  transition: all 0.2s ease;\n\n  &:focus-within {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  ${jsonScrollbarStyles}\n`;\n\nconst JsonHighlightOverlay = styled.pre`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: 0;\n  padding: 0.5rem 1rem; /* Stejn padding jako textarea */\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'JetBrains Mono', 'Fira Code', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  background: transparent;\n  color: #374151; /* Zkladn barva textu */\n  pointer-events: none;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow: auto; /* Overlay me scrollovat, ale bude synchronizovno */\n  z-index: 1;\n\n  /* JSON Syntax Colors pro svtl tma */\n  .json-key {\n    color: #d97706; /* Amber pro kle */\n    font-weight: 600;\n  }\n\n  .json-string {\n    color: #059669; /* Emerald pro etzce */\n  }\n\n  .json-number {\n    color: #2563eb; /* Blue pro sla */\n    font-weight: 500;\n  }\n\n  .json-boolean {\n    color: #7c3aed; /* Purple pro booleany */\n    font-weight: 600;\n  }\n\n  .json-null {\n    color: #dc2626; /* Red pro null */\n    font-weight: 600;\n    font-style: italic;\n  }\n\n  .json-punctuation {\n    color: #64748b; /* Slate pro interpunkci */\n    font-weight: 600;\n  }\n\n  ${jsonScrollbarStyles}\n`;\n\n// Validan komponenty\nconst ValidationPanel = styled.div`\n  margin-top: 0.75rem;\n  border-radius: 6px;\n  background: ${props => props.$type === 'error' ? '#fef2f2' : '#fffbeb'};\n  border: 1px solid ${props => props.$type === 'error' ? '#fecaca' : '#fde68a'};\n  padding: 0.75rem;\n  max-height: 300px;\n  overflow-y: auto;\n  ${scrollbarStyles}\n`;\n\nconst ValidationHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n  color: ${props => props.$type === 'error' ? '#dc2626' : '#d97706'};\n  font-weight: 600;\n  font-size: 0.875rem;\n`;\n\nconst ValidationList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\nconst ValidationItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  border-left: 3px solid ${props => props.$type === 'error' ? '#ef4444' : '#f59e0b'};\n  font-size: 0.8125rem;\n`;\n\nconst ValidationItemHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  color: #1f2937;\n`;\n\nconst ValidationItemBody = styled.div`\n  color: #6b7280;\n  font-size: 0.75rem;\n  line-height: 1.4;\n`;\n\nconst ValidationSuggestion = styled.div`\n  margin-top: 0.25rem;\n  padding: 0.375rem 0.5rem;\n  background: #f0fdf4;\n  border-radius: 3px;\n  border: 1px solid #bbf7d0;\n  color: #166534;\n  font-size: 0.75rem;\n  font-family: 'Monaco', 'Menlo', monospace;\n`;\n\nconst AutoFixButton = styled.button`\n  margin-top: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst ValidationSummary = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem;\n  background: ${props => props.$valid ? '#f0fdf4' : '#fef2f2'};\n  border-radius: 6px;\n  border: 1px solid ${props => props.$valid ? '#bbf7d0' : '#fecaca'};\n  margin-bottom: 0.75rem;\n  font-size: 0.875rem;\n`;\n\nconst FormSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  flex: 1;\n`;\n\nconst FormSectionHeader = styled.div`\n  padding: 1rem 1.25rem 0 1.25rem;\n  flex-shrink: 0;\n`;\n\nconst FormSectionContent = styled.div`\n  padding: 1rem 1.25rem;\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n`;\n\nconst FormGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem 1.25rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst FormGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.75rem;\n`;\n\nconst Label = styled.label`\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: #374151;\n  margin-bottom: 0.375rem;\n  display: block;\n\n  &::after {\n    content: ${props => props.required ? '\" *\"' : '\"\"'};\n    color: #dc2626;\n    margin-left: 2px;\n  }\n`;\n\nconst InputWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: ${props => props.hasTextarea ? '0.75rem' : '50%'};\n    transform: ${props => props.hasTextarea ? 'none' : 'translateY(-50%)'};\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px;\n    height: 16px;\n  }\n\n  input {\n    padding-left: 2rem;\n  }\n\n  textarea {\n    padding-left: 2rem;\n  }\n\n  /* Zpracovn selnho inputu bez spin button */\n  input[type=\"text\"].no-spinner::-webkit-outer-spin-button,\n  input[type=\"text\"].no-spinner::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type=\"text\"].no-spinner {\n    -moz-appearance: textfield;\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  box-sizing: border-box;\n  min-height: 2.5rem; /* Sjednocen vka se StableCustomSelect */\n  padding: ${props => props.hasIcon ? '0.75rem 0.75rem 0.75rem 2rem' : '0.75rem'}; /* Vt padding pro sjednocen */\n  border: 2px solid ${props => props.hasError ? '#dc2626' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem; /* Vt font jako ve StableCustomSelect */\n  transition: all 0.2s ease;\n  background: ${props => props.hasError ? '#fef2f2' : '#ffffff'};\n\n  color: ${props => props.value && props.value !== '' ? '#1f2937' : '#6b7280'};\n  font-weight: ${props => {\n    if (props.disabled) return '400';\n    return props.value && props.value !== '' ? '600' : '400';\n  }};\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.hasError ? 'rgba(220, 38, 38, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:focus + svg {\n    color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem; /* Sjednocen padding */\n  border: 2px solid ${props => props.hasError ? '#dc2626' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem; /* Sjednocen font size */\n  transition: all 0.2s ease;\n  background: ${props => props.hasError ? '#fef2f2' : '#ffffff'};\n  min-height: 2.5rem; /* Sneno na ~2 dky */\n  max-height: 3.5rem; /* Max ~2 dky s paddingem */\n  resize: vertical;\n  font-family: ${props => props.monospace ? 'monospace' : 'inherit'};\n  line-height: 1.2; /* Kompaktnj dkovn */\n\n  /* Stejn logika pro zvraznn jako u Input */\n  color: ${props => props.value && props.value !== '' ? '#1f2937' : '#6b7280'};\n  font-weight: ${props => {\n    if (props.disabled) return '400';\n    return props.value && props.value !== '' ? '600' : '400';\n  }};\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.hasError ? 'rgba(220, 38, 38, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:focus + svg {\n    color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.5rem; /* Men padding */\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.8125rem;\n  transition: all 0.2s ease;\n  background: #ffffff;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst CheckboxLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  color: #374151;\n\n  input[type=\"checkbox\"] {\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    accent-color: #3b82f6;\n  }\n`;\n\nconst SectionHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.625rem;\n  border-bottom: 1px solid #e5e7eb;\n`;\n\nconst SectionIcon = styled.div`\n  width: 1.75rem;\n  height: 1.75rem;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8125rem;\n`;\n\nconst SectionTitle = styled.h3`\n  margin: 0;\n  color: #1f2937;\n  font-size: 0.9375rem;\n  font-weight: 600;\n`;\n\nconst ModalFooter = styled.div`\n  padding: 1.25rem 1.5rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n`;\n\nconst ModalForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n`;\n\nconst FooterLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: #64748b;\n`;\n\nconst FooterRight = styled.div`\n  display: flex;\n  gap: 0.875rem;\n`;\n\nconst Button = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &.cancel {\n    background: white;\n    color: #64748b;\n    border: 2px solid #e2e8f0;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #cbd5e1;\n    }\n  }\n\n  &.primary {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    border: 2px solid transparent;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);\n    }\n\n    &:disabled {\n      background: #e2e8f0;\n      color: #64748b;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n  }\n`;\n\nconst FileDropZone = styled.div`\n  border: 2px dashed #e5e7eb;\n  border-radius: 12px;\n  padding: 0.5rem; /* Sneno o 1em pro vce prostoru */\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: #fafbfc;\n  min-height: 80px; /* Tak sneno pro kompaktnj vzhled */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  user-select: none;\n\n  &:hover, &.drag-over {\n    border-color: #3b82f6;\n    background: linear-gradient(135deg, #eff6ff, #dbeafe);\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);\n  }\n\n  .icon {\n    font-size: 2.5rem;\n    color: #9ca3af;\n    margin-bottom: 0.75rem;\n    transition: all 0.3s ease;\n    pointer-events: none;\n  }\n\n  .text {\n    color: #6b7280;\n    font-weight: 500;\n    font-size: 0.875rem;\n    line-height: 1.4;\n    pointer-events: none;\n  }\n\n  &:hover .icon {\n    color: #3b82f6;\n    transform: scale(1.1);\n  }\n\n  &:hover .text {\n    color: #1f2937;\n  }\n`;\n\n// Verify Modal Components\nconst VerifyStats = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst StatCard = styled.div`\n  padding: 1rem;\n  border-radius: 8px;\n  background: ${props => {\n    if (props.$status === 'success') return '#dcfce7';\n    if (props.$status === 'warning') return '#fef3c7';\n    if (props.$status === 'error') return '#fee2e2';\n    return '#f3f4f6';\n  }};\n  border: 1px solid ${props => {\n    if (props.$status === 'success') return '#bbf7d0';\n    if (props.$status === 'warning') return '#fde68a';\n    if (props.$status === 'error') return '#fecaca';\n    return '#e5e7eb';\n  }};\n`;\n\nconst StatLabel = styled.div`\n  font-size: 0.875rem;\n  color: #6b7280;\n  margin-bottom: 0.25rem;\n`;\n\nconst StatValue = styled.div`\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1f2937;\n`;\n\nconst VerifyDetails = styled.div`\n  margin-top: 1.5rem;\n`;\n\nconst DetailSection = styled.div`\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background: #f9fafb;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n`;\n\nconst DetailLabel = styled.h4`\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #374151;\n`;\n\nconst DetailValue = styled.div`\n  font-family: monospace;\n  font-size: 0.875rem;\n  color: #6b7280;\n  background: white;\n  padding: 0.5rem;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n`;\n\nconst DetailStatus = styled.div`\n  display: inline-block;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ${props => props.$ok ? '#059669' : '#dc2626'};\n  margin-right: 1rem;\n`;\n\nconst ProblemItem = styled.div`\n  padding: 0.5rem;\n  background: white;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  border-left: 3px solid #f59e0b;\n  font-size: 0.875rem;\n`;\n\n// =============================================================================\n// STABLE CUSTOM SELECT COMPONENTS\n// =============================================================================\n\nconst StableSelectWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst StableSelectButton = styled.button`\n  width: 100%;\n  min-height: 2.5rem;\n  padding: 0.75rem 3rem 0.75rem ${props => props.hasIcon ? '2rem' : '1rem'};\n  background: white;\n  border: 2px solid ${props => props.hasError ? '#dc2626' : props.isOpen ? '#3b82f6' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  text-align: left;\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-family: inherit;\n  font-weight: ${props => props.disabled ? '400' : (props.hasValue ? '600' : '400')};\n  color: ${props => props.disabled ? '#9ca3af' : props.hasValue ? '#1f2937' : '#6b7280'};\n\n  &:hover:not(:disabled) {\n    border-color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.hasError ? '#dc2626' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.hasError ? 'rgba(220, 38, 38, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    cursor: not-allowed;\n  }\n\n  /* Chevron ikona */\n  &::after {\n    content: '';\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%) rotate(${props => props.isOpen ? '180deg' : '0deg'});\n    width: 0;\n    height: 0;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n    border-top: 4px solid #6b7280;\n    transition: transform 0.2s ease;\n  }\n`;\n\nconst StableSelectDropdown = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 4000;\n  margin-top: 2px;\n\n  /* Optimalizace pro plynul scrollovn */\n  scroll-behavior: smooth;\n  overscroll-behavior: contain;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f8f9fa;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #d1d5db;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #9ca3af;\n  }\n`;\n\nconst StableSelectSearchBox = styled.div`\n  position: relative;\n  padding: 0.5rem;\n  border-bottom: 1px solid #f3f4f6;\n  background: #f8f9fa;\n`;\n\nconst StableSelectSearchInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 0.75rem 0.5rem 2.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 0.875rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst StableSelectSearchIcon = styled.div`\n  position: absolute;\n  left: 1rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n`;\n\nconst StableSelectOption = styled.div`\n  padding: ${props => props.level === 0 ? '0.75rem 1rem' : '0.5rem 1rem 0.5rem 2rem'};\n  cursor: ${props => props.isHeader ? 'default' : 'pointer'};\n  font-size: 0.875rem;\n  color: ${props => props.level === 0 ? '#111827' : '#4b5563'};\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: ${props =>\n    props.isHeader ? '#f9fafb' :\n    props.selected ? '#eff6ff' : 'white'\n  };\n  border-left: ${props => props.selected ? '3px solid #3b82f6' : '3px solid transparent'};\n  border-bottom: ${props => props.level === 0 ? '1px solid #e5e7eb' : 'none'};\n  font-weight: ${props => props.selected ? '600' : '400'} !important; /* Bold jen pro vybranou monost */\n\n  &:hover {\n    background: ${props =>\n      props.isHeader ? '#f3f4f6' :\n      props.selected ? '#dbeafe' : '#f8fafc'\n    };\n    font-weight: ${props => props.selected ? '600' : '400'} !important; /* Zstv stejn i pi hover */\n  }\n\n  &:last-child {\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n\n  input[type=\"checkbox\"] {\n    margin: 0;\n    cursor: pointer;\n  }\n\n  span {\n    padding-left: ${props => (props.level || 0) * 20}px;\n    font-weight: ${props => props.selected ? '600' : '400'} !important; /* Bold jen pro vybranou monost */\n  }\n`;\n\nconst StableSelectValue = styled.span`\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\n// StableCustomSelect Component\nconst StableCustomSelect = React.memo(({\n  value,\n  onChange,\n  onBlur,\n  options = [],\n  placeholder = \"Vyberte...\",\n  disabled = false,\n  hasError = false,\n  required = false,\n  field,\n  loading = false,\n  loadingText = 'Natn...',\n  icon = null,\n  multiple = false,\n  getOptionLabel,\n  getOptionValue\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [internalScroll, setInternalScroll] = useState(0);\n\n  const wrapperRef = useRef(null);\n  const buttonRef = useRef(null);\n  const searchInputRef = useRef(null);\n\n  // Zpracovn hodnot\n  const normalizedValue = multiple ? (Array.isArray(value) ? value : []) : value;\n\n  // Filtrovan monosti\n  const filteredOptions = useMemo(() => {\n    if (!searchTerm || loading) return options;\n    return options.filter(option => {\n      let label;\n      if (getOptionLabel) {\n        label = getOptionLabel(option, field);\n      } else {\n        // Fallback pro rzn typy objekt\n        if (field === 'strediska' || field === 'strediska_kod') {\n          label = option.label || option.name || option.nazev_stavu || String(option);\n        } else if (field === 'lp_kod') {\n          label = option.cislo_lp ? `${option.cislo_lp} - ${option.nazev_uctu || ''}` : option.label || String(option);\n        } else {\n          label = option.label || option.nazev || option.name || String(option);\n        }\n      }\n      return label.toLowerCase().includes(searchTerm.toLowerCase());\n    });\n  }, [options, searchTerm, loading, getOptionLabel, field]);\n\n  // Display hodnota\n  const displayValue = useMemo(() => {\n    if (multiple) {\n      if (normalizedValue.length === 0) return placeholder;\n      return normalizedValue.map(val => {\n        const option = options.find(opt => {\n          const optVal = getOptionValue ? getOptionValue(opt, field) : (opt.id || opt.value || opt);\n          return optVal === val;\n        });\n        if (option) {\n          // Pouij extern getOptionLabel funkci nebo fallback\n          if (getOptionLabel) {\n            return getOptionLabel(option, field);\n          }\n          // Fallback pro rzn typy objekt\n          if (field === 'strediska' || field === 'strediska_kod') {\n            return option.label || option.name || option.nazev_stavu || String(option);\n          }\n          if (field === 'lp_kod') {\n            return option.cislo_lp ? `${option.cislo_lp} - ${option.nazev_uctu || ''}` : option.label || String(option);\n          }\n          return option.label || option.nazev || option.name || String(option);\n        }\n        return String(val);\n      }).join(', ');\n    } else {\n      if (!normalizedValue) return placeholder;\n      const option = options.find(opt => {\n        const optVal = getOptionValue ? getOptionValue(opt, field) : (opt.id || opt.value || opt);\n        return optVal === normalizedValue;\n      });\n      if (option) {\n        if (getOptionLabel) {\n          return getOptionLabel(option, field);\n        }\n        return option.label || option.nazev || option.name || String(option);\n      }\n      // Pokud nen nalezen option a jde o prikazce nebo schvalovatel s hodnotou 0 nebo null, zobraz \"Neznm\"\n      if ((field === 'prikazce' || field === 'schvalovatel') && (normalizedValue === 0 || normalizedValue === null || normalizedValue === '0')) {\n        return 'Neznm';\n      }\n      return String(normalizedValue);\n    }\n  }, [normalizedValue, options, placeholder, multiple, getOptionLabel, getOptionValue, field]);\n\n  // Zaven pi kliknut mimo\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  // Auto-focus search pi oteven\n  useEffect(() => {\n    if (isOpen && searchInputRef.current && filteredOptions.length > 5) {\n      setTimeout(() => searchInputRef.current?.focus(), 100);\n    }\n  }, [isOpen, filteredOptions.length]);\n\n  // Zachovn scroll pozice\n  useEffect(() => {\n    // Scroll pozice se u neukld kvli zmn na absolute positioning\n  }, [filteredOptions, internalScroll]);\n\n  const handleToggle = () => {\n    if (disabled) return;\n    setIsOpen(prev => !prev);\n    if (isOpen) {\n      setSearchTerm('');\n    }\n  };\n\n  const handleOptionClick = (option) => {\n    // Scroll pozice se u neukld kvli zmn na absolute positioning\n\n    const optionValue = getOptionValue ? getOptionValue(option, field) : (option.id || option.value || option);\n\n    if (multiple) {\n      const currentValues = Array.isArray(normalizedValue) ? normalizedValue : [];\n      const newValues = currentValues.includes(optionValue)\n        ? currentValues.filter(v => v !== optionValue)\n        : [...currentValues, optionValue];\n\n      // Pro multiselect poli pole pmo\n      onChange(newValues);\n      if (onBlur) onBlur(field, newValues);\n    } else {\n      // Pro single select poli hodnotu pmo\n      onChange(optionValue);\n      if (onBlur) onBlur(field, optionValue);\n      setIsOpen(false);\n      setSearchTerm('');\n    }\n  };\n\n  const isSelected = (option) => {\n    const optionValue = getOptionValue ? getOptionValue(option, field) : (option.id || option.value || option);\n    return multiple\n      ? normalizedValue.includes(optionValue)\n      : normalizedValue === optionValue;\n  };\n\n  return (\n    <StableSelectWrapper ref={wrapperRef}>\n      <StableSelectButton\n        ref={buttonRef}\n        type=\"button\"\n        onClick={handleToggle}\n        disabled={disabled}\n        hasError={hasError}\n        isOpen={isOpen}\n        hasValue={multiple ? normalizedValue.length > 0 : !!normalizedValue}\n        hasIcon={!!icon}\n      >\n        {icon && (\n          <span style={{\n            position: 'absolute',\n            left: '12px',\n            color: '#9ca3af',\n            width: '16px',\n            height: '16px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          }}>\n            {React.cloneElement(icon, { size: 16 })}\n          </span>\n        )}\n        <StableSelectValue title={displayValue}>\n          {displayValue}\n        </StableSelectValue>\n      </StableSelectButton>\n\n      {isOpen && !disabled && (\n        <StableSelectDropdown>\n          {filteredOptions.length > 0 && (\n            <StableSelectSearchBox>\n              <StableSelectSearchIcon>\n                <Search size={16} />\n              </StableSelectSearchIcon>\n              <StableSelectSearchInput\n                ref={searchInputRef}\n                type=\"text\"\n                placeholder=\"Vyhledat...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                onClick={(e) => e.stopPropagation()}\n              />\n            </StableSelectSearchBox>\n          )}\n\n          {loading ? (\n            <StableSelectOption>{loadingText}</StableSelectOption>\n          ) : filteredOptions.length > 0 ? (\n            filteredOptions.map((option, index) => {\n              const optionValue = getOptionValue ? getOptionValue(option, field) : (option.id || option.value || option);\n              let optionLabel;\n\n              if (getOptionLabel) {\n                optionLabel = getOptionLabel(option, field);\n              } else {\n                // Fallback pro rzn typy objekt\n                if (field === 'strediska' || field === 'strediska_kod') {\n                  optionLabel = option.label || option.name || option.nazev_stavu || String(option);\n                } else if (field === 'lp_kod') {\n                  optionLabel = option.cislo_lp ? `${option.cislo_lp} - ${option.nazev_uctu || ''}` : option.label || String(option);\n                } else {\n                  optionLabel = option.label || option.nazev || option.name || String(option);\n                }\n              }\n\n              const selected = isSelected(option);\n              const level = option.level || 0;\n              const isHeader = option.isHeader || (level === 0 && !option.value && !option.id);\n\n              return (\n                <StableSelectOption\n                  key={optionValue || index}\n                  selected={selected}\n                  level={level}\n                  isHeader={isHeader}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    // Neumoni kliknout na header\n                    if (!isHeader) {\n                      handleOptionClick(option);\n                    }\n                  }}\n                >\n                  {multiple && !isHeader && (\n                    <input\n                      type=\"checkbox\"\n                      checked={selected}\n                      readOnly\n                      onChange={() => {}} // Przdn handler aby nedval warning\n                    />\n                  )}\n                  <span>{optionLabel}</span>\n                </StableSelectOption>\n              );\n            })\n          ) : (\n            <StableSelectOption>dn vsledky</StableSelectOption>\n          )}\n        </StableSelectDropdown>\n      )}\n    </StableSelectWrapper>\n  );\n});\n\n// =============================================================================\n// JSON SYNTAX HIGHLIGHTING HELPER\n// =============================================================================\n\n// Funkce pro jednoduch JSON syntax highlighting\nconst highlightJsonSyntax = (jsonString) => {\n  if (!jsonString) return '';\n\n  try {\n    // Escape HTML nejdve\n    let highlighted = jsonString\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n\n    // JSON syntax highlighting s CSS tdami\n    highlighted = highlighted\n      // Kle objekt (ped dvojtekou) - dleit: zachovvme uvozovky a dvojteku\n      .replace(/\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"\\s*:/g, '<span class=\"json-key\">\"$1\"</span><span class=\"json-punctuation\">:</span>')\n      // etzce (hodnoty) - pouze ty co nejsou ped dvojtekou\n      .replace(/:\\s*\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, ': <span class=\"json-string\">\"$1\"</span>')\n      // etzce v polch\n      .replace(/\\[\\s*\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, '[<span class=\"json-string\">\"$1\"</span>')\n      .replace(/,\\s*\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/g, ', <span class=\"json-string\">\"$1\"</span>')\n      // sla (vetn zpornch a desetinnch)\n      .replace(/:\\s*(-?\\d+\\.?\\d*([eE][+-]?\\d+)?)/g, ': <span class=\"json-number\">$1</span>')\n      .replace(/\\[\\s*(-?\\d+\\.?\\d*([eE][+-]?\\d+)?)/g, '[<span class=\"json-number\">$1</span>')\n      .replace(/,\\s*(-?\\d+\\.?\\d*([eE][+-]?\\d+)?)/g, ', <span class=\"json-number\">$1</span>')\n      // Boolean hodnoty\n      .replace(/:\\s*(true|false)\\b/g, ': <span class=\"json-boolean\">$1</span>')\n      .replace(/\\[\\s*(true|false)\\b/g, '[<span class=\"json-boolean\">$1</span>')\n      .replace(/,\\s*(true|false)\\b/g, ', <span class=\"json-boolean\">$1</span>')\n      // null hodnoty\n      .replace(/:\\s*null\\b/g, ': <span class=\"json-null\">null</span>')\n      .replace(/\\[\\s*null\\b/g, '[<span class=\"json-null\">null</span>')\n      .replace(/,\\s*null\\b/g, ', <span class=\"json-null\">null</span>')\n      // Interpunkce (zvorky, rky) - ale ne ty u zpracovan\n      .replace(/([{}[\\],])/g, '<span class=\"json-punctuation\">$1</span>');\n\n    return highlighted;\n  } catch (error) {\n    console.error('JSON highlighting error:', error);\n    return jsonString;\n  }\n};\n\n// =============================================================================\n// API SERVICES\n// =============================================================================\n\n// Base URL pro API - vetn api.eeo prefixu\nconst API_BASE_URL = process.env.REACT_APP_API2_BASE_URL || '/api.eeo/';\n\n// Helper funkce pro vytvoen docxApi s aktulnm username - NOV VERZE\nconst createDocxApi = (username) => ({\n  async list(token, filters = {}) {\n    return await getDocxSablonyList({\n      token,\n      username: username || 'system',\n      ...filters\n    });\n  },\n\n  async create(token, formData) {\n    // FormData u obsahuje vechna pole vetn file\n    // Sta jen pidat token do FormData\n    formData.append('token', token);\n    formData.append('username', username || 'system');\n\n    return await createDocxSablona(token, formData);\n  },\n\n  async update(token, id, data) {\n    return await updateDocxSablona({\n      token,\n      username: username || 'system',\n      id,\n      ...data\n    });\n  },\n\n  async updateWithFile(token, id, formData) {\n    // Pro update s monost vmny souboru\n    // FormData u obsahuje vechna pole\n    formData.append('token', token);\n    formData.append('username', username || 'system');\n    formData.append('id', id);\n\n    return await updateDocxSablonaWithFile(token, id, formData);\n  },\n\n  async reupload(token, id, file) {\n    return await reuploadDocxSablona({\n      token,\n      username: username || 'system',\n      id,\n      file\n    });\n  },\n\n  async delete(token, id) {\n    return await deleteDocxSablona({\n      token,\n      username: username || 'system',\n      id\n    });\n  },\n\n  async deactivate(token, id) {\n    return await deactivateDocxSablona({\n      token,\n      username: username || 'system',\n      id\n    });\n  },\n\n  async download(token, id) {\n    return await downloadDocxSablona({\n      token,\n      username: username || 'system',\n      id\n    });\n  },\n\n  async verify(token) {\n    return await verifyDocxSablony({\n      token,\n      username: username || 'system'\n    });\n  },\n\n  async verifySingle(token, id) {\n    return await verifySingleDocxSablona({\n      token,\n      username: username || 'system',\n      id\n    });\n  },\n\n  // Legacy method pro kompatibilitu\n  getDownloadUrl(token, id) {\n    // Toto by se u nemlo pouvat, ale zachovvme pro kompatibilitu\n    return `${process.env.REACT_APP_API2_BASE_URL || '/api.eeo/'}sablona_docx/download?username=${username || 'system'}&token=${token}&id=${id}`;\n  }\n});\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\n// Vchoz hodnoty formule\nconst defaultUploadForm = {\n  file: null,\n  nazev: '',\n  popis: '',\n  typ_dokumentu: '',\n  aktivni: true,\n  verze: '1.0',\n  platnost_od: '',\n  platnost_do: '',\n  castka: '', //  NOV POLE: stka pro ablonu\n  min_cena: '', //  Minimln cena (od)\n  max_cena: '', //  Maximln cena (do)\n  mapovani_json: '',\n  docx_mapping: {}\n};\n\nconst DocxSablonyTab = () => {\n  const { token, user, hasPermission, userDetail } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { start: startProgress, setProgress, done: doneProgress } = useContext(ProgressContext);\n\n  // Vytvoen API instance s aktulnm username\n  const docxApi = useMemo(() => createDocxApi(user?.username), [user?.username]);\n\n  // Helper functions for user-specific localStorage\n  const user_id = userDetail?.user_id;\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby zpisu\n    }\n  };\n\n  // Load data - memoized to prevent useEffect loops\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n      startProgress();\n\n      const result = await docxApi.list(token, {}); // Nati vechny ablony, vetn neaktivnch\n\n      if (result.status === 'ok') {\n        const templates = result.data || [];\n        setData(templates);\n\n        // Spustit automatickou verifikaci existence soubor na pozad\n        // Neblokuje UI, b asynchronn\n        // skipAutoDeactivation = FALSE - automatick deaktivace ZAPNUTA\n        // (Deaktivuje POUZE kdy soubor NEEXISTUJE)\n        verifyFilesInBackground(templates, false);\n\n        //  Zbyten toast odstrann - data se nataj automaticky\n      } else {\n        throw new Error(result.error || 'Chyba pi natn dat');\n      }\n    } catch (error) {\n      console.error('Load error:', error);\n      showToast(error.message || 'Chyba pi natn dat', 'error');\n    } finally {\n      setLoading(false);\n      doneProgress();\n    }\n  }, [token, user?.username, docxApi, startProgress, doneProgress, showToast]);\n\n  // Naten typ dokument - memoized\n  const loadTypyDokumentu = useCallback(async () => {\n    try {\n      setLoadingTypy(true);\n      const typy = await getTypyPriloh25({\n        token,\n        username: user?.username || 'system'\n      });\n\n      // Pidn przdn monosti na zatek\n      const typyOptions = [\n        { value: '', label: 'Vyberte typ dokumentu...' },\n        ...typy\n      ];\n\n      setTypyDokumentu(typyOptions);\n    } catch (error) {\n      console.error('Chyba pi natn typ dokument:', error);\n      showToast('Chyba pi natn typ dokument', 'error');\n      // Fallback na zkladn typy\n      setTypyDokumentu([\n        { value: '', label: 'Vyberte typ dokumentu...' },\n        { value: 'OBJEDNAVKA', label: 'Objednvka' },\n        { value: 'SMLOUVA', label: 'Smlouva' },\n        { value: 'PROTOKOL', label: 'Protokol' }\n      ]);\n    } finally {\n      setLoadingTypy(false);\n    }\n  }, [token, user?.username, showToast]);\n\n  // State\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [globalFilter, setGlobalFilter] = useState(() => {\n    return getUserStorage('docxSablony_globalFilter', '');\n  });\n  const [columnFilters, setColumnFilters] = useState(() => {\n    return getUserStorage('docxSablony_columnFilters', {});\n  });\n  const [aktivniFilter, setAktivniFilter] = useState(() => {\n    return getUserStorage('docxSablony_aktivniFilter', 'all'); // 'all' | 'aktivni' | 'neaktivni'\n  });\n  const [diskFilter, setDiskFilter] = useState(() => {\n    return getUserStorage('docxSablony_diskFilter', 'all'); // 'all' | 'ok' | 'error'\n  });\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editingTemplate, setEditingTemplate] = useState(null);\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\n  const [typyDokumentu, setTypyDokumentu] = useState([]);\n  const [loadingTypy, setLoadingTypy] = useState(false);\n  const [verifyResult, setVerifyResult] = useState(null);\n  const [showVerifyModal, setShowVerifyModal] = useState(false);\n  const [diskStatus, setDiskStatus] = useState({}); // {templateId: {status: 'checking'|'ok'|'error', error?: string}}\n  const [downloadedTemplateFile, setDownloadedTemplateFile] = useState(null); // File objekt pro editaci\n  const [mappingSectionVisible, setMappingSectionVisible] = useState(false); // Kontrola zobrazen mapovn\n  const [jsonCopied, setJsonCopied] = useState(false); // Pro copy feedback\n  //  showPreviewModal a previewTemplate odstranny - pouv se univerzln HTML nhled v nov zloce\n  const [inlinePreviewHtml, setInlinePreviewHtml] = useState(null); // HTML nhled v dialogu\n  const [isDragging, setIsDragging] = useState(false); // Drag & drop state\n  const [isFullscreen, setIsFullscreen] = useState(false); // Fullscreen reim\n  const [showFileReplaceConfirm, setShowFileReplaceConfirm] = useState(false); // Potvrzen vmny souboru\n  const [pendingFileInputId, setPendingFileInputId] = useState(null); // ID file inputu pro opakovan oteven\n  const [inlinePreviewExpanded, setInlinePreviewExpanded] = useState(false); // Rozbalen nhledu\n  const [generatingPreview, setGeneratingPreview] = useState(false); // Loading stav nhledu\n  const [showFileRemoveConfirm, setShowFileRemoveConfirm] = useState(false); // Potvrzen odstrann souboru\n  const [mappingValidation, setMappingValidation] = useState(null); // Validace mappingu\n\n  //  POZNMKA: Backend pouv 'mapovani_json' pro DOCX mapovn (nikoli 'docx_mapping')\n\n  // Pagination state\n  const [pageSize, setPageSize] = useState(() => getUserStorage('docxSablony_pageSize', 25));\n  const [pageIndex, setPageIndex] = useState(() => getUserStorage('docxSablony_pageIndex', 0));\n\n  // Upload form state\n  const [uploadForm, setUploadForm] = useState(defaultUploadForm);\n\n  // Pagination navigation helpers\n  const goToFirstPage = () => {\n    setPageIndex(0);\n  };\n\n  const goToPreviousPage = () => {\n    setPageIndex(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setPageIndex(table.getPageCount() - 1);\n  };\n\n  // Automatick verifikace existence soubor na pozad\n  const verifyFilesInBackground = async (templates, skipAutoDeactivation = false) => {\n    if (!templates || templates.length === 0) {\n      return;\n    }\n\n    try {\n      const verifyResult = await docxApi.verify(token);\n\n      if (verifyResult.status === 'ok' && verifyResult.data) {\n        const diskStatusUpdate = {};\n        const templatesToDeactivate = [];\n\n        // Zpracuj kad template a okamit deaktivuj, pokud soubor neexistuje\n        for (const templateResult of verifyResult.data) {\n          if (templateResult.id) {\n            const fileExists = templateResult.file_exists;\n            const template = templates.find(t => t.id === templateResult.id);\n\n            const statusUpdate = {\n              status: fileExists ? 'ok' : 'error',\n              error: fileExists ? null : 'Soubor neexistuje na disku'\n            };\n\n            //  OKAMIT AKTUALIZACE diskStatus pro tuto ablonu\n            setDiskStatus(prev => ({\n              ...prev,\n              [templateResult.id]: statusUpdate\n            }));\n\n            diskStatusUpdate[templateResult.id] = statusUpdate;\n\n            // OKAMIT deaktivace, pokud soubor neexistuje\n            if (!fileExists && !skipAutoDeactivation) {\n              if (template && (template.aktivni === 1 || template.aktivni === true)) {\n                try {\n                  const deactivateResult = await docxApi.deactivate(token, template.id);\n\n                  if (deactivateResult.success) {\n                    //  OKAMIT AKTUALIZACE LOKLNHO STAVU \n                    // Odstra deaktivovanou ablonu ze seznamu okamit\n                    setData(prevData => {\n                      const newData = prevData.filter(t => t.id !== template.id);\n                      return newData;\n                    });\n\n                    templatesToDeactivate.push({\n                      id: template.id,\n                      nazev: template.nazev,\n                      success: true\n                    });\n                  } else {\n                    templatesToDeactivate.push({\n                      id: template.id,\n                      nazev: template.nazev,\n                      success: false,\n                      error: deactivateResult.message || 'Neznm chyba'\n                    });\n                  }\n                } catch (deactivateError) {\n                  // V ppad chyby se NEODSTRAUJE ze seznamu - zstv viditeln s chybovm statusem\n                  templatesToDeactivate.push({\n                    id: template.id,\n                    nazev: template.nazev,\n                    success: false,\n                    error: deactivateError.message\n                  });\n                }\n              }\n            }\n          }\n        }\n\n        // Poet chybjcch soubor a vsledky deaktivace\n        const missingFiles = Object.values(diskStatusUpdate).filter(status => status.status === 'error').length;\n        const successfulDeactivations = templatesToDeactivate.filter(t => t.success).length;\n        const failedDeactivations = templatesToDeactivate.filter(t => !t.success).length;\n\n        // Spotej chybjc soubory POUZE u AKTIVNCH ablon\n        const templatesWithStatus = verifyResult.data.map(r => {\n          const t = templates.find(x => x.id === r.id);\n          return { ...r, aktivni: t?.aktivni };\n        });\n        const missingActive = templatesWithStatus.filter(t => !t.file_exists && (t.aktivni === 1 || t.aktivni === true)).length;\n\n        // Toast POUZE pro aktivn ablony s chybjcmi soubory\n        if (missingActive > 0) {\n\n          // Notifikace uivateli o vsledcch automatick deaktivace\n          if (successfulDeactivations > 0) {\n            showToast(\n              ` Automaticky deaktivovno ${successfulDeactivations} ablon s chybjcmi soubory na disku`,\n              'warning'\n            );\n          }\n          if (failedDeactivations > 0) {\n            showToast(\n              ` Nepodailo se deaktivovat ${failedDeactivations} ablon`,\n              'error'\n            );\n          }\n\n          // Po deaktivaci znovu nati data ze serveru pro potvrzen, ale rychleji\n          if (successfulDeactivations > 0) {\n            setTimeout(async () => {\n              try {\n                setLoading(true);\n                startProgress();\n\n                const result = await docxApi.list(token, { aktivni: 1 }); // Nateme znovu jen aktivn\n                if (result.status === 'ok') {\n                  const templates = result.data || [];\n                  setData(templates);\n\n                  // Verifikace bez automatick deaktivace\n                  verifyFilesInBackground(templates, true);\n                }\n              } catch (error) {\n                console.error('Chyba pi opakovanm natn:', error);\n                showToast('Chyba pi natn aktualizovanch dat', 'error');\n              } finally {\n                setLoading(false);\n                doneProgress();\n              }\n            }, 500); // Krat zpodn - lokln stav u je aktualizovan\n          }\n        }\n      } else {\n        console.error('X Verifikace selhala - neocekavany status:', verifyResult);\n      }\n    } catch (error) {\n      console.error(' Automatick verifikace se nezdaila:', error);\n    }\n  };\n\n  // Auto-detekce typu dokumentu podle nzvu souboru\n  const detectDocumentType = (filename) => {\n    if (!filename || !typyDokumentu.length) return '';\n\n    const name = filename.toLowerCase();\n\n    // Mapovn klovch slov na typy\n    const keywords = {\n      'objednavka': ['objednavka', 'objednavku', 'order', 'zakzka'],\n      'faktura': ['faktura', 'fakturu', 'invoice', 'ucet'],\n      'smlouva': ['smlouva', 'smlouvu', 'contract', 'dohoda'],\n      'protokol': ['protokol', 'meeting', 'zasedani', 'vysledek'],\n      'kosilka': ['kosilka', 'obal', 'cover'],\n      'schvaleni': ['schvaleni', 'approval', 'potvrzeni'],\n      'jine': ['ostatni', 'other', 'misc']\n    };\n\n    // Hledn shody v nzvech typ z BE\n    for (const typ of typyDokumentu) {\n      if (!typ.value) continue; // Peskoit przdnou monost\n\n      const typName = typ.label.toLowerCase();\n      const typValue = typ.value.toLowerCase();\n\n      // Direct match s nzvem typu\n      if (name.includes(typName) || name.includes(typValue)) {\n        return typ.value;\n      }\n\n      // Match podle klovch slov\n      const typeKeywords = keywords[typValue] || [];\n      for (const keyword of typeKeywords) {\n        if (name.includes(keyword)) {\n          return typ.value;\n        }\n      }\n    }\n\n    return ''; // dn shoda nenalezena\n  };\n\n  // Zaven upload/edit modalu s resetem editanho mdu\n  const handleCloseUploadModal = () => {\n    // Reset editanho mdu\n    setIsEditMode(false);\n    setEditingTemplate(null);\n\n    // Reset fullscreen mdu\n    setIsFullscreen(false);\n\n    // Reset formule\n    setUploadForm({ ...defaultUploadForm });\n\n    // Reset DOCX mapovn stav\n    setDownloadedTemplateFile(null);\n    setMappingSectionVisible(false);\n\n    // Reset inline nhledu\n    setInlinePreviewHtml(null);\n    setInlinePreviewExpanded(false);\n    setGeneratingPreview(false);\n\n    // Zavt modal\n    setShowUploadModal(false);\n  };\n\n  // Reset formule a oteven upload modalu\n  const handleOpenUploadModal = () => {\n    console.log(' Otevrm modal pro pidn nov ablony');\n\n    // Reset editanho mdu\n    setIsEditMode(false);\n    setEditingTemplate(null);\n\n    // Reset formule na vchoz hodnoty\n    setUploadForm({ ...defaultUploadForm });\n\n    // Reset DOCX mapovn stav\n    setDownloadedTemplateFile(null);\n    setMappingSectionVisible(false);\n\n    // Otevt modal\n    setShowUploadModal(true);\n  };\n\n  useEffect(() => {\n    if (token) {\n      loadData();\n      loadTypyDokumentu();\n    }\n  }, [token, loadData, loadTypyDokumentu]);\n\n  // Validace mappingu pi zmn\n  useEffect(() => {\n    try {\n      const mappingToValidate = uploadForm.docx_mapping || JSON.parse(uploadForm.mapovani_json || '{}');\n      \n      if (Object.keys(mappingToValidate).length > 0) {\n        const validation = validateDocxMapping(mappingToValidate);\n        setMappingValidation(validation);\n      } else {\n        setMappingValidation(null);\n      }\n    } catch (error) {\n      // Nevalidn JSON - nastavme chybu\n      setMappingValidation({\n        valid: false,\n        errors: [{ type: 'parse', message: 'Nevalidn JSON formt' }],\n        warnings: [],\n        totalFields: 0,\n        validFields: 0\n      });\n    }\n  }, [uploadForm.docx_mapping, uploadForm.mapovani_json]);\n\n  // Automatick oprava mappingu\n  const handleAutoFixMapping = () => {\n    try {\n      const currentMapping = uploadForm.docx_mapping || JSON.parse(uploadForm.mapovani_json || '{}');\n      const fixedMapping = autoFixMapping(currentMapping);\n      const fixedJson = JSON.stringify(fixedMapping, null, 2);\n      \n      setUploadForm(prev => ({\n        ...prev,\n        docx_mapping: fixedMapping,\n        mapovani_json: fixedJson\n      }));\n      \n      showToast(' Mapping byl automaticky opraven', 'success');\n    } catch (error) {\n      showToast(' Chyba pi oprav mappingu: ' + error.message, 'error');\n    }\n  };\n\n  // Save filters to localStorage when they change\n  useEffect(() => {\n    setUserStorage('docxSablony_globalFilter', globalFilter);\n  }, [globalFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('docxSablony_columnFilters', columnFilters);\n  }, [columnFilters, user_id]);\n\n  useEffect(() => {\n    setUserStorage('docxSablony_aktivniFilter', aktivniFilter);\n  }, [aktivniFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('docxSablony_diskFilter', diskFilter);\n  }, [diskFilter, user_id]);\n\n  useEffect(() => {\n    setUserStorage('docxSablony_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('docxSablony_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // Memoized handlers for better performance\n  const handleVerifyTemplateMemo = useCallback(async (template) => {\n    await handleVerifyTemplate(template);\n  }, [token]);\n\n  const handleDownloadMemo = useCallback(async (template) => {\n    await handleDownload(template);\n  }, [token]);\n\n  const handleDownloadOriginalMemo = useCallback(async (template) => {\n    await handleDownloadOriginal(template);\n  }, [token]);\n\n  const handlePreviewMemo = useCallback(async (template) => {\n    await handlePreview(template);\n  }, [token]);\n\n  const handleEditMemo = useCallback((template) => {\n    handleEdit(template);\n  }, [diskStatus]);\n\n  const handleDeleteClickMemo = useCallback((template) => {\n    handleDeleteClick(template);\n  }, []);\n\n  const handleToggleStatusMemo = useCallback(async (template) => {\n    await handleToggleStatus(template);\n  }, [token]);\n\n  // Table columns\n  const columns = useMemo(() => [\n    {\n      accessorKey: 'nazev',\n      header: () => <div style={{ textAlign: 'left', paddingLeft: '1rem' }}>Nzev ablony</div>,\n      cell: ({ getValue, row }) => (\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '0.5rem', textAlign: 'left', paddingLeft: '1rem' }}>\n          <FileText size={16} style={{ color: '#3b82f6', flexShrink: 0, marginTop: '2px' }} />\n          <div>\n            <div style={{ fontWeight: '600', marginBottom: '0.25rem' }}>\n              {getValue()}\n              {row.original.id && (\n                <sup style={{\n                  fontSize: '0.6rem',\n                  color: '#9ca3af',\n                  fontWeight: 'normal',\n                  marginLeft: '4px'\n                }}>\n                  #{row.original.id}\n                </sup>\n              )}\n            </div>\n            {row.original.popis && (\n              <div style={{ fontSize: '0.8125rem', color: '#6b7280', fontStyle: 'italic' }}>\n                {row.original.popis}\n              </div>\n            )}\n          </div>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'typ_dokumentu',\n      size: 147,\n      maxSize: 147,\n      minSize: 147,\n      header: () => <div style={{ textAlign: 'center' }}>Typ ablony</div>,\n      cell: ({ getValue }) => (\n        <div style={{ textAlign: 'center' }}>\n          <Badge>{getValue() || 'N/A'}</Badge>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'dt_vytvoreni',\n      size: 147,\n      maxSize: 147,\n      minSize: 147,\n      header: () => <div style={{ textAlign: 'center' }}>Vytvoeno</div>,\n      cell: ({ getValue }) => {\n        const dateValue = getValue();\n        if (!dateValue) return <div style={{ textAlign: 'center', color: '#9ca3af' }}></div>;\n\n        const date = new Date(dateValue);\n        const day = String(date.getDate()).padStart(2, '0');\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const year = date.getFullYear();\n        const dateStr = `${day}.${month}.${year}`;\n\n        const hours = String(date.getHours()).padStart(2, '0');\n        const minutes = String(date.getMinutes()).padStart(2, '0');\n        const timeStr = `${hours}:${minutes}`;\n\n        return (\n          <div style={{ fontSize: '0.875rem', textAlign: 'center', lineHeight: '1.4' }}>\n            <div>{dateStr}</div>\n            <div style={{ fontSize: '0.75rem', color: '#6b7280' }}>{timeStr}</div>\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'verze',\n      size: 135,\n      maxSize: 135,\n      minSize: 135,\n      header: () => <div style={{ textAlign: 'center' }}>Verze</div>,\n      cell: ({ getValue }) => (\n        <div style={{ textAlign: 'center' }}>\n          <span style={{ fontFamily: 'monospace' }}>\n            {getValue() || '1.0'}\n          </span>\n        </div>\n      )\n    },\n    {\n      accessorKey: 'velikost_souboru',\n      size: 135,\n      maxSize: 135,\n      minSize: 135,\n      header: () => <div style={{ textAlign: 'center' }}>Velikost</div>,\n      cell: ({ getValue }) => {\n        const bytes = getValue() || 0;\n        const kb = (bytes / 1024).toFixed(1);\n        return <div style={{ textAlign: 'center' }}>{`${kb} KB`}</div>;\n      }\n    },\n    {\n      accessorKey: 'uzivatele',\n      // dn size - dynamicky zabere zbytek dostupnho msta\n      header: () => <div style={{ textAlign: 'left' }}>Uivatel</div>,\n      cell: ({ row }) => {\n        const vytvoril = row.original.vytvoril?.jmeno || '';\n        const aktualizoval = row.original.aktualizoval?.jmeno || '';\n        return (\n          <div\n            style={{ textAlign: 'left', fontSize: '0.875rem' }}\n            title={`Vytvoil: ${vytvoril}\\nAktualizoval: ${aktualizoval}`}\n          >\n            <div style={{ color: '#059669', fontWeight: '500' }}>\n              {vytvoril}\n            </div>\n            <div style={{ color: '#3b82f6', fontWeight: '500', marginTop: '2px' }}>\n              {aktualizoval}\n            </div>\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'castka',\n      size: 150,\n      maxSize: 150,\n      minSize: 150,\n      header: () => <div style={{ textAlign: 'right', paddingRight: '1rem' }}>stka</div>,\n      cell: ({ getValue }) => {\n        const castka = getValue();\n        if (castka === null || castka === undefined) {\n          return <div style={{ textAlign: 'right', paddingRight: '1rem', color: '#9ca3af' }}></div>;\n        }\n        return (\n          <div style={{ textAlign: 'right', paddingRight: '1rem', fontWeight: '600' }}>\n            {new Intl.NumberFormat('cs-CZ', {\n              style: 'currency',\n              currency: 'CZK',\n              maximumFractionDigits: 0\n            }).format(castka)}\n          </div>\n        );\n      }\n    },\n    {\n      id: 'disk_status',\n      size: 50, // Zmeneno z 60 na 50px\n      maxSize: 50,\n      header: () => <div style={{ textAlign: 'center' }}>Disk</div>,\n      cell: ({ row }) => {\n        const template = row.original;\n        const status = diskStatus[template.id];\n\n        return (\n          <div style={{ textAlign: 'center' }}>\n            <FontAwesomeIcon\n              icon={faHdd}\n              onClick={() => handleVerifyTemplateMemo(template)}\n              title={status?.error || 'Kliknte pro kontrolu existence souboru'}\n              style={{\n                color: status?.status === 'checking' ? '#f59e0b' :\n                       status?.status === 'ok' ? '#059669' :\n                       status?.status === 'error' ? '#dc2626' : '#6b7280',\n                cursor: 'pointer',\n                fontSize: '18px',\n                animation: status?.status === 'checking' ? 'pulse 1s infinite' : 'none'\n              }}\n            />\n          </div>\n        );\n      }\n    },\n    {\n      accessorKey: 'aktivni',\n      size: 50, // Zmeneno z 60 na 50px\n      maxSize: 50,\n      header: () => <div style={{ textAlign: 'center' }}>Aktivn</div>,\n      cell: ({ getValue }) => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          fontSize: '18px'\n        }}\n        title={getValue() ? 'Aktivn' : 'Neaktivn'}\n        >\n          <FontAwesomeIcon\n            icon={getValue() ? faCheckCircle : faTimesCircle}\n            style={{ color: getValue() ? '#16a34a' : '#dc2626' }}\n          />\n        </div>\n      )\n    },\n    {\n      id: 'actions',\n      size: 120, // Pesn 428px ikony + mezery + padding\n      maxSize: 120,\n      minSize: 120, // Pevn ka\n      enableResizing: false, // Zakzat mnn velikosti\n      header: () => (\n        <div style={{\n          textAlign: 'center',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          width: '100%'\n        }}>\n          <FontAwesomeIcon\n            icon={faBolt}\n            style={{\n              color: '#eab308',\n              fontSize: '16px'\n            }}\n          />\n        </div>\n      ),\n      cell: ({ row }) => (\n        <ActionCell>\n          <div className=\"action-row\">\n            <IconButton\n              className=\"download-original\"\n              onClick={() => handleDownloadOriginalMemo(row.original)}\n              title=\"Sthnout originln ablonu (bez mapovn)\"\n              style={{ color: '#8b5cf6' }}\n            >\n              <FontAwesomeIcon icon={faFileWord} />\n            </IconButton>\n            <IconButton\n              className=\"download\"\n              onClick={() => handleDownloadMemo(row.original)}\n              title=\"Sthnout\"\n            >\n              <FontAwesomeIcon icon={faDownload} />\n            </IconButton>\n            {(() => {\n              // Zkontroluj mapovn v docx_mapping nebo mapovani_json\n              const mappingSource = row.original.docx_mapping || row.original.mapovani_json;\n              const hasMapping = mappingSource && (\n                typeof mappingSource === 'string'\n                  ? mappingSource !== '{}' && mappingSource.trim() !== ''\n                  : Object.keys(mappingSource).length > 0\n              );\n\n              return (\n                <IconButton\n                  className=\"preview\"\n                  onClick={hasMapping ? () => handlePreviewMemo(row.original) : undefined}\n                  title={hasMapping ? \"Nhled s daty\" : \"Nhled nen dostupn - chyb mapovn pol\"}\n                  disabled={!hasMapping}\n                  style={{\n                    opacity: hasMapping ? 1 : 0.3,\n                    cursor: hasMapping ? 'pointer' : 'not-allowed'\n                  }}\n                >\n                  <FontAwesomeIcon icon={faEye} />\n                </IconButton>\n              );\n            })()}\n          </div>\n          <div className=\"action-row\">\n            <IconButton\n              className={row.original.aktivni ? 'toggle-active' : 'toggle-inactive'}\n              onClick={() => handleToggleStatusMemo(row.original)}\n              title={row.original.aktivni ? 'Deaktivovat ablonu' : 'Aktivovat ablonu'}\n            >\n              <FontAwesomeIcon icon={row.original.aktivni ? faToggleOn : faToggleOff} />\n            </IconButton>\n            <IconButton\n              className=\"edit\"\n              onClick={() => handleEditMemo(row.original)}\n              title=\"Upravit\"\n            >\n              <FontAwesomeIcon icon={faEdit} />\n            </IconButton>\n            {hasPermission('DICT_MANAGE') && (\n              <IconButton\n                className=\"delete\"\n                onClick={() => handleDeleteClickMemo(row.original)}\n                title=\"Smazat pln z disku (hard delete)\"\n              >\n                <FontAwesomeIcon icon={faTrash} />\n              </IconButton>\n            )}\n          </div>\n        </ActionCell>\n      )\n    }\n  ], [diskStatus, hasPermission, handleVerifyTemplateMemo, handleDownloadOriginalMemo, handleDownloadMemo, handlePreviewMemo, handleEditMemo, handleDeleteClickMemo, handleToggleStatusMemo]);\n\n  // Helper funkce pro porovnn selnch hodnot s opertory\n  const compareNumericValue = (itemValue, filterValue) => {\n    if (!filterValue || filterValue.trim() === '') return true;\n\n    const trimmed = filterValue.trim();\n    const operatorMatch = trimmed.match(/^(>=|<=|>|<|=)\\s*(.+)$/);\n\n    if (!operatorMatch) {\n      // Bez opertoru - obsahuje text\n      return String(itemValue || '').toLowerCase().includes(trimmed.toLowerCase());\n    }\n\n    const operator = operatorMatch[1];\n    const valueStr = operatorMatch[2].trim();\n    const compareValue = parseFloat(valueStr);\n\n    if (isNaN(compareValue)) return true; // Neplatn slo - ignorovat\n\n    const numericItemValue = parseFloat(itemValue);\n    if (isNaN(numericItemValue)) return false; // Poloka nem slo\n\n    switch (operator) {\n      case '>': return numericItemValue > compareValue;\n      case '<': return numericItemValue < compareValue;\n      case '>=': return numericItemValue >= compareValue;\n      case '<=': return numericItemValue <= compareValue;\n      case '=': return numericItemValue === compareValue;\n      default: return true;\n    }\n  };\n\n  // Filtrovan data\n  const filteredData = useMemo(() => {\n    return data.filter((item) => {\n      // Filtr aktivn/neaktivn\n      if (aktivniFilter === 'aktivni' && !item.aktivni) return false; // Zobrazit jen aktivn (truthy)\n      if (aktivniFilter === 'neaktivni' && item.aktivni) return false; // Zobrazit jen neaktivn (falsy)\n      // 'all' - zobraz ve (aktivn i neaktivn)\n\n      // Filtr disk status\n      if (diskFilter !== 'all') {\n        const status = diskStatus[item.id];\n        if (diskFilter === 'ok' && status?.status !== 'ok') return false;\n        if (diskFilter === 'error' && status?.status !== 'error') return false;\n      }\n\n      // Global filter (Fulltext) - vyhledvn ve vech sloupcch BEZ DIAKRITIKY\n      if (globalFilter) {\n        const searchNormalized = removeDiacritics(globalFilter);\n\n        // Zskej kompletn jmna uivatel pro vyhledvn\n        // POZOR: V DB je asto cel jmno v jednom poli (nap. \"IT Super ADMIN 1\")\n        const vytvorilJmeno = item.vytvoril?.jmeno || '';\n        const vytvorilPrijmeni = item.vytvoril?.prijmeni || '';\n        const vytvorilUsername = item.vytvoril?.username || '';\n        const vytvorilCele = [vytvorilJmeno, vytvorilPrijmeni, vytvorilUsername].filter(Boolean).join(' ');\n\n        const aktualizovalJmeno = item.aktualizoval?.jmeno || '';\n        const aktualizovalPrijmeni = item.aktualizoval?.prijmeni || '';\n        const aktualizovalUsername = item.aktualizoval?.username || '';\n        const aktualizovalCele = [aktualizovalJmeno, aktualizovalPrijmeni, aktualizovalUsername].filter(Boolean).join(' ');\n\n        // Formtuj datum pro vyhledvn (vetn asu)\n        let dtVytvoreni = '';\n        let dtVytvoreniCas = '';\n        if (item.dt_vytvoreni) {\n          const date = new Date(item.dt_vytvoreni);\n          dtVytvoreni = date.toLocaleDateString('cs-CZ');\n          dtVytvoreniCas = date.toLocaleTimeString('cs-CZ', { hour: '2-digit', minute: '2-digit' });\n        }\n\n        // Formtuj velikost souboru pro vyhledvn\n        const velikostKB = item.velikost_souboru ? (item.velikost_souboru / 1024).toFixed(1) + ' KB' : '';\n\n        // Formtuj stku pro vyhledvn (vetn nuly)\n        const castkaStr = (item.castka !== null && item.castka !== undefined) ? new Intl.NumberFormat('cs-CZ', {\n          style: 'currency',\n          currency: 'CZK',\n          maximumFractionDigits: 0\n        }).format(item.castka) : '';\n\n        // Status aktivn/neaktivn jako text\n        const aktivniText = item.aktivni ? 'aktivn' : 'neaktivn';\n\n        const matchGlobal =\n          removeDiacritics(item.nazev || '').includes(searchNormalized) ||\n          removeDiacritics(item.popis || '').includes(searchNormalized) ||\n          removeDiacritics(item.typ_dokumentu || '').includes(searchNormalized) ||\n          removeDiacritics((item.verze || '').toString()).includes(searchNormalized) ||\n          removeDiacritics(velikostKB).includes(searchNormalized) ||\n          // Uivatel - ROBUSTN hledn (hled i v jednotlivch slovech)\n          removeDiacritics(vytvorilJmeno).includes(searchNormalized) ||\n          removeDiacritics(vytvorilPrijmeni).includes(searchNormalized) ||\n          removeDiacritics(vytvorilUsername).includes(searchNormalized) ||\n          removeDiacritics(vytvorilCele).includes(searchNormalized) ||\n          // Rozdlen jmna na slova a hledn v kadm slov zvl\n          vytvorilJmeno.split(/\\s+/).some(word => removeDiacritics(word).includes(searchNormalized)) ||\n          vytvorilPrijmeni.split(/\\s+/).some(word => removeDiacritics(word).includes(searchNormalized)) ||\n          //\n          removeDiacritics(aktualizovalJmeno).includes(searchNormalized) ||\n          removeDiacritics(aktualizovalPrijmeni).includes(searchNormalized) ||\n          removeDiacritics(aktualizovalUsername).includes(searchNormalized) ||\n          removeDiacritics(aktualizovalCele).includes(searchNormalized) ||\n          // Rozdlen jmna na slova a hledn v kadm slov zvl\n          aktualizovalJmeno.split(/\\s+/).some(word => removeDiacritics(word).includes(searchNormalized)) ||\n          aktualizovalPrijmeni.split(/\\s+/).some(word => removeDiacritics(word).includes(searchNormalized)) ||\n          // Datum a as\n          removeDiacritics(dtVytvoreni).includes(searchNormalized) ||\n          removeDiacritics(dtVytvoreniCas).includes(searchNormalized) ||\n          // stka\n          removeDiacritics(castkaStr).includes(searchNormalized) ||\n          // Nzev souboru\n          removeDiacritics(item.nazev_souboru || '').includes(searchNormalized) ||\n          // Aktivn status\n          removeDiacritics(aktivniText).includes(searchNormalized);\n\n        if (!matchGlobal) return false;\n      }\n\n      // Column filters\n      if (columnFilters.nazev && !(item.nazev || '').toLowerCase().includes(columnFilters.nazev.toLowerCase())) return false;\n      if (columnFilters.typ_dokumentu && !(item.typ_dokumentu || '').toLowerCase().includes(columnFilters.typ_dokumentu.toLowerCase())) return false;\n\n      // seln filtry s opertory\n      if (columnFilters.verze && !compareNumericValue(item.verze, columnFilters.verze)) return false;\n      if (columnFilters.velikost_souboru && !compareNumericValue(item.velikost_souboru, columnFilters.velikost_souboru)) return false;\n\n      if (columnFilters.dt_vytvoreni && !(item.dt_vytvoreni || '').toLowerCase().includes(columnFilters.dt_vytvoreni.toLowerCase())) return false;\n      if (columnFilters.dt_upraveno && !(item.dt_upraveno || '').toLowerCase().includes(columnFilters.dt_upraveno.toLowerCase())) return false;\n\n      return true;\n    });\n  }, [data, globalFilter, columnFilters, aktivniFilter, diskFilter, diskStatus]);\n\n  // Table instance\n  const table = useReactTable({\n    data: filteredData, // U OBSAHUJE n custom global filter\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    // NE getFilteredRowModel - u je filtrovan!\n    getPaginationRowModel: getPaginationRowModel(),\n    columnResizeMode: 'onChange',\n    enableColumnResizing: true,\n    enableGlobalFilter: false, // Vypnout TanStack global filter - mme vlastn!\n    state: {\n      // globalFilter NEN ve state - pouvme custom\n      pagination: { pageSize, pageIndex },\n    },\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n      columnSizing: {\n        verze: 50,\n        velikost_souboru: 80,\n        castka: 80,\n        dt_vytvoreni: 90,\n        dt_aktualizace: 90,\n        aktivni: 70\n      }\n    },\n    // onGlobalFilterChange VYPNUTO - mme vlastn global filter v filteredData\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n  });\n\n  // Handlers\n  const handleUpload = async (e) => {\n    e.preventDefault();\n\n    // Rozpoznat, zda jde o editaci nebo nov nahrn\n    const isEditing = isEditMode && editingTemplate;\n    const action = isEditing ? 'editace' : 'nahrn';\n\n    console.log(` Zahajuji ${action} ablony:`, {\n      isEditing,\n      templateId: editingTemplate?.id,\n      templateName: editingTemplate?.nazev,\n      diskStatus: diskStatus[editingTemplate?.id],\n      hasNewFile: !!uploadForm.file\n    });\n\n    // Validace povinnch pol\n    const errors = [];\n\n    // Pro nov ablony je soubor vdy povinn\n    // Pro editaci je povinn pouze pokud pvodn soubor neexistuje\n    if (isEditing) {\n      const templateDiskStatus = diskStatus[editingTemplate.id];\n      const fileExists = templateDiskStatus?.status === 'ok';\n\n      if (!fileExists && !uploadForm.file) {\n        errors.push('Soubor je povinn - pvodn soubor neexistuje, muste nahrt nov');\n      }\n    } else {\n      if (!uploadForm.file) {\n        errors.push('Soubor je povinn - vyberte DOCX soubor');\n      }\n    }\n\n    if (!uploadForm.nazev?.trim()) {\n      errors.push('Nzev ablony je povinn');\n    }\n\n    if (!uploadForm.typ_dokumentu) {\n      errors.push('Typ dokumentu je povinn');\n    }\n\n    if (errors.length > 0) {\n      showToast(`Vyplte povinn pole:\\n${errors.join('\\n')}`, 'error');\n      return;\n    }\n\n    try {\n      console.log(` DocxSablonyTab ${action.charAt(0).toUpperCase() + action.slice(1)}:`, {\n        username: user?.username || 'system',\n        filename: uploadForm.file?.name,\n        hasToken: !!token,\n        endpoint: isEditing ?\n          `${API_BASE_URL}sablona_docx/update` :\n          `${API_BASE_URL}sablona_docx/create`\n      });\n\n      let result;\n\n      if (isEditing) {\n        // EDITACE - pouij update API\n        if (uploadForm.file) {\n          // S novm souborem\n          const formData = new FormData();\n          formData.append('file', uploadForm.file);\n          formData.append('nazev', uploadForm.nazev);\n          formData.append('popis', uploadForm.popis);\n          formData.append('typ_dokumentu', uploadForm.typ_dokumentu);\n          formData.append('aktivni', uploadForm.aktivni ? '1' : '0');\n          formData.append('verze', uploadForm.verze);\n          formData.append('castka', uploadForm.castka || '0'); //  NOV POLE: stka\n          console.log(' [DOCX Tab] Ukldm stku (s novm souborem):', uploadForm.castka);\n          formData.append('platnost_od', uploadForm.platnost_od);\n          formData.append('platnost_do', uploadForm.platnost_do);\n          //  Backend oekv 'mapovani_json' pro DOCX mapovn\n          if (uploadForm.docx_mapping && Object.keys(uploadForm.docx_mapping).length > 0) {\n            const docxMappingJson = JSON.stringify(uploadForm.docx_mapping);\n            formData.append('mapovani_json', docxMappingJson);\n            console.log(' Ukldm DOCX mapovn (s novm souborem) jako mapovani_json:', {\n              mapping: uploadForm.docx_mapping,\n              jsonString: docxMappingJson,\n              fieldsCount: Object.keys(uploadForm.docx_mapping).length\n            });\n          } else {\n            console.log(' DOCX mapovn je przdn nebo neexistuje (s novm souborem)');\n            formData.append('mapovani_json', uploadForm.mapovani_json || '');\n          }\n\n          result = await docxApi.updateWithFile(token, editingTemplate.id, formData);\n        } else {\n          // Bez novho souboru - pouze metadata\n          const updateData = {\n            nazev: uploadForm.nazev,\n            popis: uploadForm.popis,\n            typ_dokumentu: uploadForm.typ_dokumentu,\n            aktivni: uploadForm.aktivni ? 1 : 0,\n            verze: uploadForm.verze,\n            castka: parseFloat(uploadForm.castka) || 0, //  NOV POLE: stka\n            platnost_od: uploadForm.platnost_od,\n            platnost_do: uploadForm.platnost_do,\n            mapovani_json: uploadForm.mapovani_json\n          };\n\n          console.log(' [DOCX Tab] Ukldm stku (bez novho souboru):', updateData.castka, 'pvodn:', uploadForm.castka);\n\n          // Pidme DOCX mapovn pokud existuje\n          if (uploadForm.docx_mapping && Object.keys(uploadForm.docx_mapping).length > 0) {\n            updateData.docx_mapping = JSON.stringify(uploadForm.docx_mapping);\n            console.log(' Ukldm DOCX mapovn (bez souboru):', {\n              mapping: uploadForm.docx_mapping,\n              jsonString: updateData.docx_mapping,\n              fieldsCount: Object.keys(uploadForm.docx_mapping).length\n            });\n          } else {\n            console.log(' DOCX mapovn je przdn nebo neexistuje (bez souboru)');\n          }\n\n          console.log(' Poslm updateData na backend:', updateData);\n          console.log(' castka v updateData:', updateData.castka, typeof updateData.castka);\n\n          result = await docxApi.update(token, editingTemplate.id, updateData);\n        }\n      } else {\n        // NOV NAHRN\n        const formData = new FormData();\n        formData.append('file', uploadForm.file);\n        formData.append('nazev', uploadForm.nazev);\n        formData.append('popis', uploadForm.popis);\n        formData.append('typ_dokumentu', uploadForm.typ_dokumentu);\n        formData.append('aktivni', uploadForm.aktivni ? '1' : '0');\n        formData.append('verze', uploadForm.verze);\n        formData.append('castka', uploadForm.castka || '0'); //  NOV POLE: stka\n        console.log(' [DOCX Tab] Ukldm stku (pi vytvoen):', uploadForm.castka);\n        formData.append('platnost_od', uploadForm.platnost_od);\n        formData.append('platnost_do', uploadForm.platnost_do);\n        //  Backend oekv 'mapovani_json' pro DOCX mapovn\n        if (uploadForm.docx_mapping && Object.keys(uploadForm.docx_mapping).length > 0) {\n          const docxMappingJson = JSON.stringify(uploadForm.docx_mapping);\n          formData.append('mapovani_json', docxMappingJson);\n          console.log(' Ukldm DOCX mapovn (pi vytvoen) jako mapovani_json:', {\n            mapping: uploadForm.docx_mapping,\n            jsonString: docxMappingJson,\n            fieldsCount: Object.keys(uploadForm.docx_mapping).length\n          });\n        } else {\n          console.log(' DOCX mapovn je przdn nebo neexistuje (pi vytvoen)');\n          formData.append('mapovani_json', uploadForm.mapovani_json || '');\n        }\n\n        result = await docxApi.create(token, formData);\n      }\n\n      console.log(` DOCX ${action.charAt(0).toUpperCase() + action.slice(1)} Result:`, result);\n\n      if (result.status === 'ok') {\n        showToast(\n          isEditing ?\n            ` ablona \"${uploadForm.nazev}\" byla spn aktualizovna` :\n            ' ablona byla spn nahrna',\n          'success'\n        );\n\n        // Vyistit stavy\n        setShowUploadModal(false);\n        setIsEditMode(false);\n        setEditingTemplate(null);\n        setUploadForm({ ...defaultUploadForm });\n\n        // Znovu nast data\n        loadData();\n      } else {\n        // Pokud result obsahuje HTML obsah, zobraz ho\n        if (result.htmlContent) {\n          console.error(' Server vrtil HTML:', result.htmlContent);\n          showToast(` Server Error (${result.status}): ${result.htmlContent.substring(0, 500)}...`, 'error');\n        } else {\n          throw new Error(result.error || `Chyba pi ${action}`);\n        }\n      }\n    } catch (error) {\n      console.error(` ${action.charAt(0).toUpperCase() + action.slice(1)} error (full):`, error);\n\n      // Pokud je to fetch error s response, zkus zskat HTML\n      if (error.response) {\n        console.error(' Response status:', error.response.status);\n        console.error(' Response headers:', error.response.headers);\n        console.error(' Response data:', error.response.data);\n\n        // Zobraz celou HTML response\n        showToast(` Server Error (${error.response.status}): ${JSON.stringify(error.response.data)}`, 'error');\n      } else if (error.message && error.message.includes('Failed to fetch')) {\n        showToast(' Sov chyba: Server neodpovd nebo je nedostupn', 'error');\n      } else {\n        showToast(` ${action.charAt(0).toUpperCase() + action.slice(1)} Error: ${error.message || 'Neznm chyba'}`, 'error');\n      }\n    }\n  };\n\n  const handleToggleStatus = async (template) => {\n    try {\n      const newStatus = !template.aktivni;\n      const action = newStatus ? 'aktivace' : 'deaktivace';\n\n      console.log(` DOCX Template Toggle Status:`, {\n        templateId: template.id,\n        templateName: template.nazev,\n        currentStatus: template.aktivni,\n        newStatus: newStatus,\n        action: action\n      });\n\n      // Okamit aktualizace loklnho stavu\n      setData(prevData =>\n        prevData.map(t =>\n          t.id === template.id\n            ? { ...t, aktivni: newStatus ? 1 : 0 }\n            : t\n        )\n      );\n\n      let result;\n      if (newStatus) {\n        // Aktivace - pouij update API\n        console.log(`API CALL: docxApi.update(token, ${template.id}, { aktivni: 1 })`);\n        result = await docxApi.update(token, template.id, { aktivni: 1 });\n        console.log(`BE RESPONSE aktivace:`, JSON.stringify(result, null, 2));\n      } else {\n        // Deaktivace - pouij deactivate API\n        console.log(`API CALL: docxApi.deactivate(token, ${template.id})`);\n        result = await docxApi.deactivate(token, template.id);\n        console.log(`BE RESPONSE deaktivace:`, JSON.stringify(result, null, 2));\n      }\n\n      console.log(`Kontrola vysledku - newStatus: ${newStatus}, result.status: ${result.status}, result.success: ${result.success}`);\n\n      if ((newStatus && result.status === 'ok') || (!newStatus && result.success)) {\n        showToast(\n          ` ablona \"${template.nazev}\" byla spn ${newStatus ? 'aktivovna' : 'deaktivovna'}`,\n          'success'\n        );\n      } else {\n        // Rollback pi chyb\n        setData(prevData =>\n          prevData.map(t =>\n            t.id === template.id\n              ? { ...t, aktivni: template.aktivni }\n              : t\n          )\n        );\n        throw new Error(result.error || `Chyba pi ${action}`);\n      }\n    } catch (error) {\n      console.error('Toggle status error:', error);\n\n      // Rollback pi chyb\n      setData(prevData =>\n        prevData.map(t =>\n          t.id === template.id\n            ? { ...t, aktivni: template.aktivni }\n            : t\n        )\n      );\n\n      showToast(` Chyba pi zmn stavu: ${error.message}`, 'error');\n    }\n  };\n\n  // Staen originln ablony (bez zpracovn mapovn)\n  const handleDownloadOriginal = async (template) => {\n    try {\n      console.log(' Stahovn originln DOCX ablony:', {\n        templateId: template.id,\n        templateName: template.nazev,\n        username: user?.username\n      });\n\n      setProgress(true);\n      const blob = await docxApi.download(token, template.id);\n\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = template.nazev_souboru || `${template.nazev}.docx`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      showToast(' Originln ablona staena', 'success');\n    } catch (error) {\n      console.error('Download original error:', error);\n      showToast(` Chyba pi stahovn: ${error.message}`, 'error');\n    } finally {\n      setProgress(false);\n    }\n  };\n\n  const handleDownload = async (template) => {\n    try {\n      console.log(' DOCX Download Request:', {\n        templateId: template.id,\n        templateName: template.nazev,\n        username: user?.username,\n        hasMapping: !!(template.docx_mapping || template.mapovani_json)\n      });\n\n      // Zkontroluj, jestli m ablona mapovn\n      const mappingSource = template.docx_mapping || template.mapovani_json;\n      const hasMapping = mappingSource && (\n        typeof mappingSource === 'string'\n          ? mappingSource !== '{}' && mappingSource.trim() !== ''\n          : Object.keys(mappingSource).length > 0\n      );\n\n      if (!hasMapping) {\n        // Bez mapovn - sthni pmo\n        console.log(' Stahuji ablonu bez mapovn (przdn)');\n        const blob = await docxApi.download(token, template.id);\n\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = template.nazev_souboru || `${template.nazev}.docx`;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n        return;\n      }\n\n      // S mapovnm - sthni, napl pole a pak sthni\n      console.log(' Stahuji ablonu s mapovnm - budu plnit pole');\n      setProgress(true);\n\n      // Sthni ablonu jako File\n      const file = await downloadDocxSablonaAsFile({\n        token,\n        username: user?.username,\n        id: template.id,\n        fileName: template.nazev_souboru || 'template.docx'\n      });\n\n      // Parsuj mapovn\n      const mapping = typeof mappingSource === 'string'\n        ? JSON.parse(mappingSource)\n        : mappingSource;\n\n      // Import funkc pro rozen mapovn\n      const { createEnhancedFieldMapping, createFieldValuesFromMapping, getOrderFieldsForMapping } = await import('../../../utils/docx/docxProcessor.js');\n      const { processDocxWithFields } = await import('../../../utils/docx/processDocx.js');\n\n      // Zskej definice pol a vytvo rozen mapovn\n      const orderFields = getOrderFieldsForMapping();\n      const enhancedMapping = createEnhancedFieldMapping(mapping, orderFields);\n\n      // Vytvo field values s podporou sloench pol\n      const fieldValues = createFieldValuesFromMapping(enhancedMapping, null);\n\n      console.log(' Zpracovvm DOCX s rozenmi poli:', fieldValues);\n      console.log(' Zkladn mapovn:', mapping);\n      console.log(' Rozen mapovn:', enhancedMapping);\n\n      // Zpracuj DOCX - rozbal, nahra pole, zabal zpt\n      const result = await processDocxWithFields({\n        file: file,\n        fieldValues: fieldValues,\n        keepEmptyFields: false // Odstra nevyplnn pole\n      });\n\n      if (result.error) {\n        throw new Error(result.error);\n      }\n\n      console.log(' DOCX zpracovn:', result.stats);\n\n      // Sthni vsledn soubor\n      const url = window.URL.createObjectURL(result.blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = template.nazev_souboru || `${template.nazev}.docx`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      showToast(` Staeno s ${result.stats.replacedCount} vyplnnmi poli`, 'success');\n\n    } catch (error) {\n      console.error('Download error:', error);\n      showToast(` Chyba pi stahovn: ${error.message}`, 'error');\n    } finally {\n      setProgress(false);\n    }\n  };\n\n  // ============================================================================\n  // UNIVERZLN HTML NHLED - Spolen funkce pro vechny typy nhledu\n  // ============================================================================\n  const generateUniversalHtmlPreview = async (file, mapping, templateName = '') => {\n    if (!file || !mapping || Object.keys(mapping).length === 0) {\n      throw new Error('Pro nhled je poteba DOCX soubor a definovan mapovn');\n    }\n\n    try {\n      console.log(' Generuji univerzln HTML nhled...', {\n        file: file.name,\n        mappingFields: Object.keys(mapping).length,\n        mapping: mapping\n      });\n\n      // Import funkc pro rozen mapovn\n      const { createEnhancedFieldMapping, createFieldValuesFromMapping, getOrderFieldsForMapping } = await import('../../../utils/docx/docxProcessor.js');\n      const { processDocxWithFields } = await import('../../../utils/docx/processDocx.js');\n\n      // Zskej definice pol\n      const orderFields = getOrderFieldsForMapping();\n\n      // Vytvo rozen mapovn vetn sloench pol\n      const enhancedMapping = createEnhancedFieldMapping(mapping, orderFields);\n\n      // Vytvo field values pro preview (bez skutench dat)\n      const fieldValues = createFieldValuesFromMapping(enhancedMapping, null);\n\n      console.log(' Enhanced mapping:', enhancedMapping);\n      console.log(' Field values pro nhled:', fieldValues);\n\n      // Zpracuj DOCX a nahra pole - rozbal ZIP, nahra v XML, zabal zpt\n      const result = await processDocxWithFields({\n        file: file,\n        fieldValues: fieldValues,\n        keepEmptyFields: true // Zachovat pole bez hodnoty\n      });\n\n      if (result.error) {\n        throw new Error(result.error);\n      }\n\n      console.log(' Statistiky nhrady:', result.stats);\n\n      // Te konvertuj vsledn DOCX na HTML pomoc mammoth\n      const htmlResult = await mammoth.convertToHtml({ arrayBuffer: await result.blob.arrayBuffer() });\n      let html = htmlResult.value;\n\n      // Styluj DB pole v HTML - pouij rozen mapovn pro lep vizualizaci\n      Object.entries(mapping).forEach(([docxField, dbField]) => {\n        // Vytvoit reprezentativn hodnoty podle typu pole\n        let displayValue = '';\n        const dbFieldLower = dbField.toLowerCase();\n\n        if (dbFieldLower.includes('cislo') || dbFieldLower.includes('number')) {\n          displayValue = Math.floor(Math.random() * 90000) + 10000; // 5-cifern slo\n        } else if (dbFieldLower.includes('datum') || dbFieldLower.includes('date')) {\n          displayValue = new Date().toLocaleDateString('cs-CZ');\n        } else if (dbFieldLower.includes('cena') || dbFieldLower.includes('price') || dbFieldLower.includes('amount')) {\n          displayValue = (Math.random() * 50000 + 1000).toLocaleString('cs-CZ', {\n            style: 'currency',\n            currency: 'CZK'\n          });\n        } else if (dbFieldLower.includes('email')) {\n          displayValue = 'priklad@email.cz';\n        } else if (dbFieldLower.includes('telefon') || dbFieldLower.includes('phone')) {\n          displayValue = '+420 777 123 456';\n        } else if (dbFieldLower.includes('adresa') || dbFieldLower.includes('address')) {\n          displayValue = 'Pkladov ulice 123, 110 00 Praha';\n        } else if (dbFieldLower.includes('nazev') || dbFieldLower.includes('jmeno') || dbFieldLower.includes('name')) {\n          displayValue = 'Pkladov jmno/nzev';\n        } else {\n          displayValue = `[${dbField}]`;\n        }\n\n        // Nahra DOCX pole reprezentativnmi hodnotami\n        const regex = new RegExp(`\\\\{${docxField.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\}`, 'g');\n        const styledValue = `<span style=\"background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 3px; font-weight: 600; border: 1px solid #93c5fd;\">${displayValue}</span>`;\n        html = html.replace(regex, styledValue);\n      });\n\n      // Vytvo kompletn HTML dokument s CSS styly\n      const fullHtml = `<!DOCTYPE html>\n<html lang=\"cs\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Nhled DOCX ablony - ${templateName || 'Bez nzvu'}</title>\n  <style>\n    body {\n      font-family: 'Times New Roman', serif;\n      line-height: 1.4;\n      margin: 40px;\n      background: white;\n      color: #000;\n    }\n    h1, h2, h3, h4, h5, h6 {\n      color: #1f2937;\n      margin-top: 1.5em;\n      margin-bottom: 0.5em;\n    }\n    p {\n      margin-bottom: 1em;\n    }\n    table {\n      border-collapse: collapse;\n      width: 100%;\n      margin: 1em 0;\n    }\n    th, td {\n      border: 1px solid #ccc;\n      padding: 8px;\n      text-align: left;\n    }\n    th {\n      background-color: #f5f5f5;\n      font-weight: bold;\n    }\n    .field-highlight {\n      background: #dbeafe !important;\n      color: #1e40af !important;\n      padding: 2px 6px !important;\n      border-radius: 3px !important;\n      font-weight: 600 !important;\n      border: 1px solid #93c5fd !important;\n    }\n  </style>\n</head>\n<body>\n  <div style=\"margin-bottom: 20px; padding: 10px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 6px;\">\n    <strong> Nhled DOCX ablony:</strong> ${templateName || 'Bez nzvu'}<br>\n    <small>Pole jsou zvraznna mode s ukzkovmi hodnotami podle typu</small>\n  </div>\n  ${html}\n</body>\n</html>`;\n\n      // Otevi v nov zloce\n      const blob = new Blob([fullHtml], { type: 'text/html' });\n      const url = URL.createObjectURL(blob);\n      window.open(url, '_blank');\n\n      // Uvolni URL po chvli\n      setTimeout(() => URL.revokeObjectURL(url), 1000);\n\n      console.log(` HTML nhled vygenerovn: ${result.stats.replacedCount} pol nahrazeno (vetn ${Object.keys(enhancedMapping).length - Object.keys(mapping).length} sloench pol)`);\n\n      return { success: true, stats: result.stats, enhancedMapping };\n\n    } catch (error) {\n      console.error(' Chyba pi generovn HTML nhledu:', error);\n      throw error;\n    }\n  };\n\n  // ============================================================================\n  // PREVIEW HANDLER - Oteven nhledu DOCX z tabulky (nyn tak v nov zloce)\n  // ============================================================================\n  const handlePreview = async (template) => {\n    console.log(' Zahajuji preview ablony z tabulky:', template);\n\n    // Zkontroluj, zda m ablona mapovn\n    const mappingSource = template.docx_mapping || template.mapovani_json;\n    const hasMapping = mappingSource &&\n      (typeof mappingSource === 'string' ? mappingSource !== '{}' : Object.keys(mappingSource).length > 0);\n\n    if (!hasMapping) {\n      showToast(' ablona nem definovan mapovn pol. Nejdve upravte ablonu a namapujte pole.', 'warning');\n      return;\n    }\n\n    try {\n      setProgress(30);\n\n      // Sthni DOCX soubor podle ID (guid neexistuje v DB)\n      const file = await downloadDocxSablonaAsFile({\n        token,\n        username: user?.username,\n        id: template.id,\n        fileName: template.nazev_souboru || 'template.docx'\n      });\n\n      if (!file) {\n        throw new Error('Nepodailo se sthnout soubor ablony');\n      }\n\n      console.log(' Soubor pipraven pro preview:', {\n        name: file.name,\n        size: file.size,\n        type: file.type\n      });\n\n      setProgress(60);\n\n      // Pouij univerzln funkci pro HTML nhled\n      let mapping = mappingSource;\n      if (typeof mapping === 'string') {\n        try {\n          mapping = JSON.parse(mapping);\n        } catch (e) {\n          console.warn(' Nepodailo se parsovat mapovn z stringu:', e);\n          mapping = {};\n        }\n      }\n\n      await generateUniversalHtmlPreview(file, mapping, template.nazev);\n      showToast(' Nhled oteven v nov zloce', 'success');\n\n    } catch (error) {\n      console.error(' Chyba pi natn nhledu:', error);\n      showToast(`Chyba pi natn nhledu: ${error.message}`, 'error');\n    } finally {\n      setProgress(false);\n    }\n  };\n\n  const handleEdit = (template) => {\n    // Nastavit editan md\n    setIsEditMode(true);\n    setEditingTemplate(template);\n\n    // Naplnit formul aktulnmi daty ablony\n    let existingDocxMapping = {};\n    try {\n      //  OPRAVA: Backend pouv primrn 'mapovani_json' pro DOCX mapovn\n      const mappingSource = template.mapovani_json || template.docx_mapping;\n\n      if (mappingSource) {\n        existingDocxMapping = typeof mappingSource === 'string'\n          ? JSON.parse(mappingSource)\n          : mappingSource;\n\n        // Nastavit viditelnost mapovac sekce pokud existuje mapovn\n        if (Object.keys(existingDocxMapping).length > 0) {\n          setMappingSectionVisible(true);\n        }\n      } else {\n        setMappingSectionVisible(false);\n      }\n    } catch (error) {\n      console.error(' Chyba pi parsovn DOCX mapovn:', error);\n      existingDocxMapping = {};\n      setMappingSectionVisible(false);\n    }\n\n    // Pipravit mapovani_json pro textarea (mus bt string)\n    let mapovaniJsonString = '';\n    if (template.mapovani_json) {\n      mapovaniJsonString = typeof template.mapovani_json === 'string'\n        ? template.mapovani_json\n        : JSON.stringify(template.mapovani_json, null, 2);\n    } else if (Object.keys(existingDocxMapping).length > 0) {\n      mapovaniJsonString = JSON.stringify(existingDocxMapping, null, 2);\n    }\n\n    const formData = {\n      file: null, // Soubor se nahrv znovu pouze pokud je teba\n      nazev: template.nazev || '',\n      popis: template.popis || '',\n      typ_dokumentu: template.typ_dokumentu || '',\n      aktivni: template.aktivni === 1 || template.aktivni === '1' || template.aktivni === true,\n      verze: template.verze || '1.0',\n      castka: template.castka !== undefined && template.castka !== null ? template.castka : '', //  Sprvn natn (0 je validn hodnota!)\n      platnost_od: template.platnost_od || '',\n      platnost_do: template.platnost_do || '',\n      mapovani_json: mapovaniJsonString,\n      docx_mapping: existingDocxMapping\n    };\n\n    setUploadForm(formData);\n\n    // Zobrazit stejn modal jako pro upload, ale v editanm mdu\n    setShowUploadModal(true);\n\n    // Pokusit se sthnout existujc DOCX soubor pro analzu mapovn\n    // (pouze pokud m soubor na disku status 'ok')\n    const templateDiskStatus = diskStatus[template.id];\n    if (templateDiskStatus?.status === 'ok') {\n      downloadExistingDocxForAnalysis(template);\n    } else {\n      // Soubor na disku neexistuje nebo m chybu - zkusit zobrazit mapovn i bez souboru\n      setDownloadedTemplateFile(null);\n      // Pokud existuje mapovn, zobrazit sekci i bez souboru\n      if (existingDocxMapping && Object.keys(existingDocxMapping).length > 0) {\n        setMappingSectionVisible(true);\n        console.log(' Zobrazuji mapovac sekci s existujcm mapovnm bez DOCX souboru');\n      } else {\n        setMappingSectionVisible(false);\n        console.log(' DOCX soubor nen k dispozici na disku, mapovn nebude zobrazeno');\n      }\n    }\n  };\n\n  const handleDeleteClick = (template) => {\n    setSelectedTemplate(template);\n    setShowConfirmDelete(true);\n  };\n\n  const handleDelete = async () => {\n    if (!selectedTemplate) return;\n\n    try {\n      // Trash tlatko vol vdy jen DICT_MANAGE s deleteAction='delete'\n      console.log(' DOCX Hard Delete Request:', {\n        templateId: selectedTemplate.id,\n        templateName: selectedTemplate.nazev,\n        username: user?.username,\n        userRole: user?.role\n      });\n\n      // Hard delete - skuten smazn z DB i disku\n      const result = await docxApi.delete(token, selectedTemplate.id);\n\n      console.log(' DOCX Hard Delete Result:', result);\n\n      if (result.status === 'ok') {\n        showToast(' ablona a soubor byly spn smazny z disku', 'success');\n        loadData();\n      } else {\n        throw new Error(result.error || 'Chyba pi mazn');\n      }\n    } catch (error) {\n      console.error('Delete error:', error);\n      showToast(error.message || 'Chyba pi mazn ablony', 'error');\n    } finally {\n      setShowConfirmDelete(false);\n      setSelectedTemplate(null);\n    }\n  };\n\n  const handleVerify = async () => {\n    try {\n      startProgress();\n      setVerifyResult(null);\n\n      console.log(' DOCX Verify Request:', {\n        username: user?.username,\n        endpoint: `${API_BASE_URL}sablona_docx/verify`\n      });\n\n      const result = await docxApi.verify(token);\n\n      console.log(' DOCX Verify Result:', result);\n\n      if (result.status === 'ok') {\n        setVerifyResult(result);\n        setShowVerifyModal(true);\n\n        const summary = result.summary;\n        if (summary.integrity_ok) {\n          showToast(` Integrita OK - ${summary.valid_templates}/${summary.total_templates} ablon v podku`, 'success');\n        } else {\n          showToast(` Nalezeny problmy - ${summary.missing_files} chybjcch soubor`, 'warning');\n        }\n      } else {\n        throw new Error(result.error || 'Chyba pi verifikaci');\n      }\n    } catch (error) {\n      console.error('Verify error:', error);\n      showToast(error.message || 'Chyba pi verifikaci ablon', 'error');\n    } finally {\n      doneProgress();\n    }\n  };\n\n  const handleVerifyTemplate = async (template) => {\n    try {\n      // Set checking status\n      setDiskStatus(prev => ({\n        ...prev,\n        [template.id]: { status: 'checking' }\n      }));\n\n      console.log(' DOCX Template Verify Single:', {\n        templateId: template.id,\n        templateName: template.nazev,\n        username: user?.username\n      });\n\n      // Pouij nov verifySingle API\n      const result = await docxApi.verifySingle(token, template.id);\n\n      if (result.status === 'ok' && result.data) {\n        const templateResult = result.data;\n        const status = templateResult.file_exists ? 'ok' : 'error';\n        const error = templateResult.file_exists ? null : 'Soubor neexistuje na disku';\n\n        setDiskStatus(prev => ({\n          ...prev,\n          [template.id]: { status, error }\n        }));\n\n        //  Zbyten toasty odstranny - status je vidt v ikon u ablony\n        // Chybov stavy se zobrazuj ervenou ikonou, OK stavy zelenou\n      } else {\n        throw new Error(result.error || result.message || 'Chyba pi verifikaci ablony');\n      }\n    } catch (error) {\n      console.error('Template verify error:', error);\n      setDiskStatus(prev => ({\n        ...prev,\n        [template.id]: { status: 'error', error: error.message }\n      }));\n      showToast(` Chyba pi verifikaci: ${error.message}`, 'error');\n    }\n  };\n\n  // Kontrola ped otevenm file dialogu\n  const handleFileInputClick = (fileInputId) => {\n    const hasExistingFile = uploadForm.file || downloadedTemplateFile;\n\n    if (hasExistingFile) {\n      // Zobrazit potvrzovac dialog ped otevenm file dialogu\n      setPendingFileInputId(fileInputId);\n      setShowFileReplaceConfirm(true);\n      return;\n    }\n\n    // Pokud nen soubor, pmo otevt file dialog\n    document.getElementById(fileInputId)?.click();\n  };\n\n  const handleFileSelect = (file) => {\n    // Validate file\n    if (!file.name.toLowerCase().endsWith('.docx')) {\n      showToast('Pouze DOCX soubory jsou povoleny', 'error');\n      return;\n    }\n\n    if (file.size > 10 * 1024 * 1024) {\n      showToast('Soubor je pli velk (max 10MB)', 'error');\n      return;\n    }\n\n    // Pmo nahradit soubor\n    performFileReplace(file);\n  };\n\n  const performFileReplace = (file) => {\n    // Nahrazen pedchozho souboru (pouze jeden soubor najednou)\n    const detectedType = detectDocumentType(file.name);\n\n    setUploadForm(prev => ({\n      ...prev,\n      file,\n      // Auto-vyplnn nzvu ze jmna souboru (bez .docx)\n      nazev: prev.nazev || file.name.replace(/\\.docx$/i, ''),\n      // Auto-detekce typu dokumentu\n      typ_dokumentu: prev.typ_dokumentu || detectedType,\n      // Reset mapovn pi vmn souboru\n      json_mapovani: {}\n    }));\n\n    // Pro upload mode se mapovac sekce zobraz automaticky dky JSX podmnce\n    // Pro edit mode potebujeme explicitn nastavit stav a aktualizovat pole\n    if (isEditMode && file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n      setMappingSectionVisible(true);\n\n      // Automaticky extrahuj pole z novho souboru\n      console.log(' Automaticky aktualizuji pole po vbru novho souboru v edit mdu');\n      try {\n        // Import DOCX procesoru pro extrakci pol\n        import('../../../utils/docx/docxProcessor.js').then(({ extractDocxFields }) => {\n          extractDocxFields(file).then(fields => {\n            console.log(' Extrahovan pole z novho souboru:', fields);\n            // Pole se automaticky aktualizuj v DocxMappingExpandableSection komponent\n            showToast(' Pole spn aktualizovna z novho souboru', 'success');\n          }).catch(error => {\n            console.error(' Chyba pi extrakci pol:', error);\n            showToast(' Nepodailo se extrahovat pole z novho souboru', 'warning');\n          });\n        });\n      } catch (error) {\n        console.error(' Chyba pi natn DOCX procesoru:', error);\n      }\n    }\n\n    //  Zbyten toasty odstranny - uivatel vid vybran soubor v UI\n  };\n\n  // Funkce pro odstrann souboru ablony (zachov zznam v DB)\n  const handleRemoveTemplateFile = async (template) => {\n    try {\n      console.log(' Odstrauji soubor ablony:', template);\n\n      await removeDocxSablonaFile({\n        token,\n        username: user?.username || 'system',\n        id: template.id\n      });\n\n      // Refresh seznamu pro aktualizaci disk status\n      await loadData();\n\n      //  Zbyten toast odstrann - uivatel vid zmnu v UI\n\n    } catch (error) {\n      console.error(' Chyba pi odstraovn souboru ablony:', error);\n      showToast(`Chyba pi odstraovn souboru: ${error.message}`, 'error');\n    }\n  };\n\n  // Funkce pro staen existujcho DOCX souboru pi editaci\n  const downloadExistingDocxForAnalysis = async (template) => {\n    try {\n      const file = await downloadDocxSablonaAsFile({\n        token,\n        username: user?.username || 'system',\n        id: template.id,\n        fileName: template.nazev_souboru || `${template.nazev}.docx`\n      });\n\n      setDownloadedTemplateFile(file);\n      setMappingSectionVisible(true);\n      //  Zbyten toast odstrann - intern technick operace\n\n      return file;\n    } catch (error) {\n      console.error(' Chyba pi stahovn DOCX souboru:', error);\n      setDownloadedTemplateFile(null);\n      setMappingSectionVisible(false);\n      showToast(`Soubor nen k dispozici pro analzu: ${error.message}`, 'warning');\n      return null;\n    }\n  };\n\n  // Handler pro zmnu DOCX mapovn\n  const handleDocxMappingChange = (mapping) => {\n    setUploadForm(prev => ({\n      ...prev,\n      docx_mapping: mapping,\n      mapovani_json: JSON.stringify(mapping, null, 2)\n    }));\n\n    //  Mapovn bylo aktualizovno - nhled se generuje pouze manuln na tlatko\n  };\n\n  // Handler pro koprovn JSON\n  const handleCopyJson = async () => {\n    const jsonContent = uploadForm.mapovani_json || JSON.stringify(uploadForm.docx_mapping || {}, null, 2);\n    try {\n      await navigator.clipboard.writeText(jsonContent);\n      setJsonCopied(true);\n      setTimeout(() => setJsonCopied(false), 2000);\n      showToast('JSON mapovn zkoprovno', 'success');\n    } catch (error) {\n      console.error('Chyba pi koprovn:', error);\n      showToast('Chyba pi koprovn JSON', 'error');\n    }\n  };\n\n  // Handler pro generovn inline nhledu\n  // ============================================================================\n  // INLINE PREVIEW HANDLER - Nhled v edit dialogu (nyn tak v nov zloce)\n  // ============================================================================\n  const handleGenerateInlinePreview = async () => {\n    if (!downloadedTemplateFile || !uploadForm.docx_mapping || Object.keys(uploadForm.docx_mapping).length === 0) {\n      showToast(' Pro nhled je poteba DOCX soubor a definovan mapovn', 'warning');\n      return;\n    }\n\n    try {\n      setGeneratingPreview(true);\n\n      // Pouij univerzln funkci pro HTML nhled\n      await generateUniversalHtmlPreview(downloadedTemplateFile, uploadForm.docx_mapping, uploadForm.nazev);\n      showToast(' Nhled oteven v nov zloce', 'success');\n\n    } catch (error) {\n      console.error(' Chyba pi generovn nhledu:', error);\n      showToast(`Chyba pi generovn nhledu: ${error.message}`, 'error');\n    } finally {\n      setGeneratingPreview(false);\n    }\n  };\n\n  return (\n    <Container>\n      <ActionBar>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Hledat v nzvu ablony, typu, verzi, uivateli...\"\n            value={globalFilter ?? ''}\n            onChange={(e) => setGlobalFilter(e.target.value)}\n          />\n          {globalFilter && (\n            <ClearButton onClick={() => setGlobalFilter('')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton onClick={handleOpenUploadModal} $primary>\n          <FontAwesomeIcon icon={faUpload} />\n          Nahrt ablonu\n        </ActionButton>\n      </ActionBar>\n\n      <TableContainer>\n        <Table>\n          <thead>\n            {/* Prvn dek - nzvy sloupc */}\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableHeaderRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => (\n                  <TableHeader\n                    key={header.id}\n                    onClick={header.column.getCanSort() ? header.column.getToggleSortingHandler() : undefined}\n                    style={{ cursor: header.column.getCanSort() ? 'pointer' : 'default' }}\n                  >\n                    <div style={{ display: 'inline-flex', alignItems: 'center', justifyContent: 'center', gap: '0.35rem' }}>\n                      {flexRender(header.column.columnDef.header, header.getContext())}\n                      {header.column.getCanSort() && header.column.getIsSorted() && (\n                        <FontAwesomeIcon\n                          icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                          style={{ fontSize: '0.75em', marginLeft: '0.25rem' }}\n                        />\n                      )}\n                    </div>\n                  </TableHeader>\n                ))}\n              </TableHeaderRow>\n            ))}\n\n            {/* Druh dek - filtry pro jednotliv sloupce */}\n            <TableHeaderRow>\n              {table.getHeaderGroups()[0]?.headers.map(header => (\n                <TableHeader key={`filter-${header.id}`} style={{\n                  padding: '0.5rem',\n                  backgroundColor: '#f8f9fa',\n                  borderTop: '1px solid #e5e7eb'\n                }}>\n                  {header.id === 'actions' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      height: '32px'\n                    }}>\n                      <FilterActionButton\n                        onClick={() => {\n                          setColumnFilters({});\n                          setAktivniFilter('all');\n                          setDiskFilter('all');\n                        }}\n                        title=\"Vymazat vechny filtry sloupc\"\n                        disabled={Object.keys(columnFilters).length === 0 && aktivniFilter === 'all' && diskFilter === 'all'}\n                      >\n                        <FontAwesomeIcon icon={faEraser} />\n                      </FilterActionButton>\n                    </div>\n                  ) : header.id === 'disk_status' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      height: '32px'\n                    }}>\n                      <IconFilterButton\n                        onClick={() => {\n                          // Cyklus: all -> ok -> error -> all\n                          if (diskFilter === 'all') {\n                            setDiskFilter('ok');\n                          } else if (diskFilter === 'ok') {\n                            setDiskFilter('error');\n                          } else {\n                            setDiskFilter('all');\n                          }\n                        }}\n                        title={\n                          diskFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr OK)' :\n                          diskFilter === 'ok' ? 'Zobrazeny pouze OK (kliknte pro filtr chyb)' :\n                          'Zobrazeny pouze chyby (kliknte pro zobrazen vech)'\n                        }\n                      >\n                        {diskFilter === 'all' ? (\n                          <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                            <FontAwesomeIcon\n                              icon={faHdd}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                color: '#059669'\n                              }}\n                            />\n                            <FontAwesomeIcon\n                              icon={faHdd}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                color: '#dc2626'\n                              }}\n                            />\n                          </div>\n                        ) : diskFilter === 'ok' ? (\n                          <FontAwesomeIcon icon={faHdd} style={{ color: '#059669' }} />\n                        ) : (\n                          <FontAwesomeIcon icon={faHdd} style={{ color: '#dc2626' }} />\n                        )}\n                      </IconFilterButton>\n                    </div>\n                  ) : header.column.columnDef.accessorKey === 'aktivni' ? (\n                    <div style={{\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      height: '32px'\n                    }}>\n                      <IconFilterButton\n                        onClick={() => {\n                          // Cyklus: all -> aktivni -> neaktivni -> all\n                          if (aktivniFilter === 'all') {\n                            setAktivniFilter('aktivni');\n                          } else if (aktivniFilter === 'aktivni') {\n                            setAktivniFilter('neaktivni');\n                          } else {\n                            setAktivniFilter('all');\n                          }\n                        }}\n                        title={\n                          aktivniFilter === 'all' ? 'Zobrazeny vechny (kliknte pro filtr aktivnch)' :\n                          aktivniFilter === 'aktivni' ? 'Zobrazeny pouze aktivn (kliknte pro filtr neaktivnch)' :\n                          'Zobrazeny pouze neaktivn (kliknte pro zobrazen vech)'\n                        }\n                      >\n                        {aktivniFilter === 'all' ? (\n                          <div style={{ position: 'relative', width: '20px', height: '20px' }}>\n                            <FontAwesomeIcon\n                              icon={faCheckCircle}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(0 0, 50% 0, 50% 100%, 0 100%)',\n                                color: '#16a34a'\n                              }}\n                            />\n                            <FontAwesomeIcon\n                              icon={faTimesCircle}\n                              style={{\n                                position: 'absolute',\n                                left: 0,\n                                top: 0,\n                                clipPath: 'polygon(50% 0, 100% 0, 100% 100%, 50% 100%)',\n                                color: '#dc2626'\n                              }}\n                            />\n                          </div>\n                        ) : aktivniFilter === 'aktivni' ? (\n                          <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#16a34a' }} />\n                        ) : (\n                          <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626' }} />\n                        )}\n                      </IconFilterButton>\n                    </div>\n                  ) : (\n                    <ColumnFilterWrapper>\n                      <FontAwesomeIcon icon={faSearch} />\n                      <ColumnFilterInput\n                        type=\"text\"\n                        placeholder={`Hledat...`}\n                        value={columnFilters[header.column.columnDef.accessorKey] || ''}\n                        onChange={(e) => {\n                          const newFilters = { ...columnFilters };\n                          if (e.target.value) {\n                            newFilters[header.column.columnDef.accessorKey] = e.target.value;\n                          } else {\n                            delete newFilters[header.column.columnDef.accessorKey];\n                          }\n                          setColumnFilters(newFilters);\n                        }}\n                      />\n                      {columnFilters[header.column.columnDef.accessorKey] && (\n                        <ColumnClearButton\n                          onClick={() => {\n                            const newFilters = { ...columnFilters };\n                            delete newFilters[header.column.columnDef.accessorKey];\n                            setColumnFilters(newFilters);\n                          }}\n                          title=\"Vymazat\"\n                        >\n                          <FontAwesomeIcon icon={faTimes} />\n                        </ColumnClearButton>\n                      )}\n                    </ColumnFilterWrapper>\n                  )}\n                </TableHeader>\n              ))}\n            </TableHeaderRow>\n          </thead>\n          <tbody>\n            {table.getRowModel().rows.length === 0 ? (\n              <tr>\n                <TableCell colSpan={columns.length}>\n                  <EmptyState>\n                    <FontAwesomeIcon icon={faFileWord} size=\"3x\" style={{ marginBottom: '1rem', color: '#d1d5db' }} />\n                    <h3>dn ablony</h3>\n                    <p>Zatm nebyly nahrny dn DOCX ablony.</p>\n                  </EmptyState>\n                </TableCell>\n              </tr>\n            ) : (\n              table.getRowModel().rows.map((row, index) => (\n                <TableRow\n                  key={row.id}\n                  $isEven={index % 2 === 0}\n                  $isInactive={row.original.aktivni === 0}\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell key={cell.id}>\n                      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            )}\n          </tbody>\n        </Table>\n\n        <Pagination>\n          <PaginationInfo>\n            Zobrazeno {Math.min(pageIndex * pageSize + 1, data.length)} - {Math.min((pageIndex + 1) * pageSize, data.length)} z {data.length} ablon\n          </PaginationInfo>\n\n          <PaginationControls>\n            <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n              Zobrazit:\n            </span>\n            <PageSizeSelect\n              value={pageSize}\n              onChange={(e) => {\n                const newSize = Number(e.target.value);\n                setPageSize(newSize);\n                setPageIndex(0);\n              }}\n            >\n              <option value=\"10\">10</option>\n              <option value=\"25\">25</option>\n              <option value=\"50\">50</option>\n              <option value=\"100\">100</option>\n              <option value=\"250\">250</option>\n              <option value=\"500\">500</option>\n            </PageSizeSelect>\n\n            <PageButton\n              onClick={goToFirstPage}\n              disabled={pageIndex === 0}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToPreviousPage}\n              disabled={pageIndex === 0}\n            >\n              \n            </PageButton>\n\n            <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n              Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n            </span>\n\n            <PageButton\n              onClick={goToNextPage}\n              disabled={pageIndex >= table.getPageCount() - 1}\n            >\n              \n            </PageButton>\n            <PageButton\n              onClick={goToLastPage}\n              disabled={pageIndex >= table.getPageCount() - 1}\n            >\n              \n            </PageButton>\n          </PaginationControls>\n        </Pagination>\n      </TableContainer>\n\n      {/* Upload Modal - React Portal pro fullscreen support */}\n      {showUploadModal && createPortal(\n        <div\n          style={{\n            position: 'fixed',\n            top: isFullscreen ? '0' : '132px',\n            left: '0',\n            right: '0',\n            bottom: isFullscreen ? '0' : '60px',\n            background: 'rgba(0, 0, 0, 0.4)',\n            backdropFilter: 'blur(12px)',\n            WebkitBackdropFilter: 'blur(12px)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: '1000',\n            padding: isFullscreen ? '0' : '1rem',\n            cursor: 'default'\n          }}\n        >\n          <div\n            onClick={(e) => e.stopPropagation()}\n            style={{\n              background: 'white',\n              borderRadius: isFullscreen ? '0' : '16px',\n              width: isFullscreen ? '100vw' : '100%',\n              maxWidth: isFullscreen ? 'none' : (\n                ((!isEditMode && uploadForm.file && uploadForm.file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') ||\n                 (isEditMode && downloadedTemplateFile)) ? '1464px' : '900px'  // 1400px + 64px (4rem)\n              ),\n              height: isFullscreen ? '100vh' : 'calc(100vh - 280px)',\n              maxHeight: isFullscreen ? 'none' : 'calc(100vh - 280px)',\n              display: 'flex',\n              flexDirection: 'column',\n              overflow: 'hidden',\n              boxShadow: isFullscreen ? 'none' : '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2)',\n              transition: 'all 0.3s ease',\n              zIndex: '1001'\n            }}\n          >\n            <ModalHeader>\n              <ModalHeaderContent>\n                <HeaderLeft>\n                  <ModalTitle>\n                    {isEditMode ? `Upravit ablonu \"${editingTemplate?.nazev}\"` : 'Nahrt novou ablonu'}\n                  </ModalTitle>\n                  <ModalSubtitle>Nahrajte DOCX soubor a nastavte vlastnosti ablony</ModalSubtitle>\n                </HeaderLeft>\n                <CloseButton onClick={() => setIsFullscreen(!isFullscreen)}>\n                  <FontAwesomeIcon icon={isFullscreen ? faCompress : faExpandArrowsAlt} />\n                </CloseButton>\n              </ModalHeaderContent>\n            </ModalHeader>\n\n            <ModalForm onSubmit={handleUpload}>\n              <ModalBody>\n                {/* Horn sekce - dynamicky se pizpsobuje podle mapovn */}\n                <UpperSection\n                  $hasMapping={\n                    (!isEditMode && uploadForm.file && uploadForm.file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') ||\n                    (isEditMode && downloadedTemplateFile)\n                  }\n                >\n                  {/* Lev sloupec - Detail objednvky + nahrn */}\n                  <LeftColumn>\n                    <FormSection>\n                      <FormSectionHeader>\n                        <SectionHeader>\n                          <SectionIcon></SectionIcon>\n                          <SectionTitle>Detail ablony</SectionTitle>\n                        </SectionHeader>\n                      </FormSectionHeader>\n\n                      <FormSectionContent>\n\n                      {/* Kompaktn info o aktuln ablon pi editaci */}\n                      {isEditMode && editingTemplate && (\n                        <div style={{\n                          marginBottom: '1rem',\n                          padding: '0.75rem',\n                          backgroundColor: '#f8fafc',\n                          borderRadius: '6px',\n                          border: '1px solid #e2e8f0',\n                          fontSize: '0.8rem',\n                          display: 'flex',\n                          flexDirection: 'column',\n                          gap: '0.5rem'\n                        }}>\n                          {/* Prvn dek - Aktuln + ikona stavu + popelnice */}\n                          <div style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'space-between'\n                          }}>\n                            <span style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                              {editingTemplate.nazev_souboru && (\n                                <span\n                                  style={{\n                                    fontSize: '1rem',\n                                    cursor: 'help'\n                                  }}\n                                  title={diskStatus[editingTemplate.id]?.status === 'ok' ? 'Soubor existuje na disku' :\n                                         diskStatus[editingTemplate.id]?.status === 'error' ? 'Soubor neexistuje na disku' :\n                                         'Stav souboru neoven'}\n                                >\n                                  {diskStatus[editingTemplate.id]?.status === 'ok' ? '' :\n                                   diskStatus[editingTemplate.id]?.status === 'error' ? '' :\n                                   ''}\n                                </span>\n                              )}\n                              <strong>Aktuln:</strong>\n                            </span>\n\n                            {/* Popelnice vpravo bez ervenho rmeku */}\n                            {diskStatus[editingTemplate.id]?.status === 'ok' && (\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  setShowFileRemoveConfirm(true);\n                                }}\n                                style={{\n                                  padding: '4px 8px',\n                                  fontSize: '0.875rem',\n                                  color: '#6b7280',\n                                  backgroundColor: 'transparent',\n                                  border: 'none',\n                                  borderRadius: '4px',\n                                  cursor: 'pointer',\n                                  display: 'flex',\n                                  alignItems: 'center'\n                                }}\n                                title=\"Odstranit aktuln soubor\"\n                              >\n                                <FontAwesomeIcon icon={faTrash} />\n                              </button>\n                            )}\n                          </div>\n\n                          {/* Druh dek - nzev souboru */}\n                          <div style={{\n                            paddingLeft: '1.5rem',\n                            color: '#374151',\n                            fontSize: '0.9rem'\n                          }}>\n                            {editingTemplate.nazev_souboru || 'N/A'}\n                          </div>\n\n                          {/* Tet dek - kompaktn file upload */}\n                          <div style={{\n                            paddingLeft: '0.5rem',\n                            paddingRight: '0.5rem',\n                            marginTop: '8px'\n                          }}>\n                            <div style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center', marginBottom: '4px' }}>\n                              {uploadForm.file && (\n                                <button\n                                  type=\"button\"\n                                  onClick={() => {\n                                    setUploadForm(prev => ({ ...prev, file: null }));\n                                    setMappingSectionVisible(false);\n                                  }}\n                                  style={{\n                                    padding: '2px 6px',\n                                    fontSize: '9px',\n                                    color: '#dc2626',\n                                    backgroundColor: '#fef2f2',\n                                    border: '1px solid #fecaca',\n                                    borderRadius: '4px',\n                                    cursor: 'pointer',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: '2px',\n                                    transition: 'all 0.2s ease'\n                                  }}\n                                  onMouseEnter={(e) => {\n                                    e.currentTarget.style.backgroundColor = '#fee2e2';\n                                    e.currentTarget.style.borderColor = '#f87171';\n                                  }}\n                                  onMouseLeave={(e) => {\n                                    e.currentTarget.style.backgroundColor = '#fef2f2';\n                                    e.currentTarget.style.borderColor = '#fecaca';\n                                  }}\n                                >\n                                  <FontAwesomeIcon icon={faTrash} />\n                                  Odstranit\n                                </button>\n                              )}\n                            </div>\n                            <FileDropZone\n                              onClick={() => {\n                                handleFileInputClick('fileInput');\n                              }}\n                              onDragOver={(e) => {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                setIsDragging(true);\n                              }}\n                              onDragLeave={(e) => {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                setIsDragging(false);\n                              }}\n                              onDrop={(e) => {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                setIsDragging(false);\n\n                                const files = Array.from(e.dataTransfer.files);\n                                const docxFile = files.find(file => file.name.endsWith('.docx'));\n                                if (docxFile) {\n                                  handleFileSelect(docxFile);\n                                }\n                              }}\n                              style={{\n                                cursor: 'pointer',\n                                width: '100%',\n                                height: '50px',\n                                backgroundColor: isDragging ? '#f0f9ff' : (uploadForm.file ? '#f0fdf4' : '#f9fafb'),\n                                border: isDragging ? '2px dashed #3b82f6' : (uploadForm.file ? '1px solid #bbf7d0' : '1px dashed #d1d5db'),\n                                borderRadius: '6px',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                padding: '8px',\n                                textAlign: 'center',\n                                transition: 'all 0.2s ease'\n                              }}\n                            >\n                              <div style={{ lineHeight: '1.2' }}>\n                                {uploadForm.file ? (\n                                  <>\n                                    <div style={{ color: '#059669', fontSize: '12px', marginBottom: '2px' }}>\n                                      <FontAwesomeIcon icon={faFileWord} />\n                                      <span style={{ marginLeft: '4px', fontSize: '10px', fontWeight: '500' }}>\n                                        {uploadForm.file.name}\n                                      </span>\n                                    </div>\n                                    <small style={{ color: '#6b7280', fontSize: '9px' }}>\n                                      ({(uploadForm.file.size / 1024 / 1024).toFixed(1)} MB)\n                                    </small>\n                                  </>\n                                ) : (\n                                  <>\n                                    <div style={{ fontSize: '10px', fontWeight: '500', marginBottom: '2px' }}>\n                                      Kliknte pro pidn nebo vmnu DOCX ablony\n                                    </div>\n                                    <small style={{ color: '#6b7280', fontSize: '9px' }}>(max 10MB)</small>\n                                  </>\n                                )}\n                              </div>\n                            </FileDropZone>\n                            <input\n                              id=\"fileInput\"\n                              type=\"file\"\n                              accept=\".docx\"\n                              multiple={false}\n                              style={{ display: 'none' }}\n                              onChange={(e) => {\n                                const file = e.target.files?.[0];\n                                if (file) {\n                                  handleFileSelect(file);\n                                  e.target.value = '';\n                                }\n                              }}\n                            />\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Nzev a Typ pod sebou - bez file uploadu */}\n                      <NameAndFileRow>\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'start' }}>\n                          <FormGroup style={{ flex: '1' }}>\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.5rem' }}>\n                              <Label required>Nzev ablony</Label>\n                              <CheckboxLabel>\n                                <input\n                                  type=\"checkbox\"\n                                  checked={uploadForm.aktivni}\n                                  onChange={(e) => setUploadForm(prev => ({ ...prev, aktivni: e.target.checked }))}\n                                />\n                                Aktivn\n                              </CheckboxLabel>\n                            </div>\n                            <InputWithIcon>\n                              <FileText size={16} />\n                              <Input\n                                type=\"text\"\n                                value={uploadForm.nazev}\n                                onChange={(e) => setUploadForm(prev => ({ ...prev, nazev: e.target.value }))}\n                                required\n                                placeholder=\"nap. Smlouva o dlo, Faktura za sluby, Pracovn smlouva...\"\n                              />\n                            </InputWithIcon>\n                          </FormGroup>\n                        </div>\n\n                        <div style={{ display: 'flex', gap: '1rem' }}>\n                          <FormGroup style={{ flex: '1' }}>\n                            <Label required>Typ dokumentu {loadingTypy && '(nat se...)'}</Label>\n                            <StableCustomSelect\n                              value={uploadForm.typ_dokumentu}\n                              onChange={(value) => setUploadForm(prev => ({ ...prev, typ_dokumentu: value }))}\n                              options={typyDokumentu.map(typ => ({ value: typ.value, label: typ.label }))}\n                              placeholder=\"Vyberte typ dokumentu...\"\n                              icon={<Package size={16} />}\n                              disabled={loadingTypy}\n                              field=\"typ_dokumentu\"\n                            />\n                          </FormGroup>\n\n                          <FormGroup style={{ flex: '0 0 75px' }}>\n                            <Label>Verze</Label>\n                            <InputWithIcon>\n                              <Hash size={16} />\n                              <Input\n                                type=\"text\"\n                                value={uploadForm.verze}\n                                onChange={(e) => setUploadForm(prev => ({ ...prev, verze: e.target.value }))}\n                                placeholder=\"1.0\"\n                                style={{ textAlign: 'center' }}\n                              />\n                            </InputWithIcon>\n                          </FormGroup>\n\n                          <FormGroup style={{ flex: '0 0 120px' }}>\n                            <Label>stka</Label>\n                            <InputWithIcon>\n                              <Calculator size={16} />\n                              <div style={{ position: 'relative' }}>\n                                <Input\n                                  type=\"text\"\n                                  className=\"no-spinner\"\n                                  value={uploadForm.castka ? new Intl.NumberFormat('cs-CZ').format(uploadForm.castka) : ''}\n                                  onChange={(e) => {\n                                    // Odstranit formtovn a ponechat pouze sla a teku\n                                    const value = e.target.value.replace(/[^\\d.,]/g, '').replace(',', '.');\n                                    setUploadForm(prev => ({ ...prev, castka: value }));\n                                  }}\n                                  onBlur={(e) => {\n                                    // Pi oputn pole pouze vyistit formtovn, ale zachovat slo\n                                    const cleanValue = e.target.value.replace(/[^\\d.,]/g, '').replace(',', '.');\n                                    const numValue = parseFloat(cleanValue);\n\n                                    if (!isNaN(numValue)) {\n                                      setUploadForm(prev => ({ ...prev, castka: numValue.toString() }));\n                                    } else if (cleanValue === '') {\n                                      setUploadForm(prev => ({ ...prev, castka: '' }));\n                                    }\n                                    // Jinak ponechej pvodn hodnotu\n                                  }}\n                                  placeholder=\"nap. 25 000\"\n                                  style={{\n                                    textAlign: 'right',\n                                    paddingRight: '35px' // Msto pro \"K\"\n                                  }}\n                                />\n                                <span style={{\n                                  position: 'absolute',\n                                  right: '8px',\n                                  top: '50%',\n                                  transform: 'translateY(-50%)',\n                                  color: '#6b7280',\n                                  fontSize: '14px',\n                                  pointerEvents: 'none'\n                                }}>\n                                  K\n                                </span>\n                              </div>\n                            </InputWithIcon>\n                          </FormGroup>\n                        </div>\n                      </NameAndFileRow>\n\n                      {/* File upload pro create mode - kompaktn obdlnek */}\n                      {!isEditMode && (\n                        <div style={{ marginTop: '16px' }}>\n                          <div style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center', marginBottom: '8px' }}>\n                            {uploadForm.file && (\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  setUploadForm(prev => ({ ...prev, file: null }));\n                                  setMappingSectionVisible(false);\n                                }}\n                                style={{\n                                  padding: '4px 8px',\n                                  fontSize: '10px',\n                                  color: '#dc2626',\n                                  backgroundColor: '#fef2f2',\n                                  border: '1px solid #fecaca',\n                                  borderRadius: '4px',\n                                  cursor: 'pointer',\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: '4px',\n                                  transition: 'all 0.2s ease'\n                                }}\n                                onMouseEnter={(e) => {\n                                  e.currentTarget.style.backgroundColor = '#fee2e2';\n                                  e.currentTarget.style.borderColor = '#f87171';\n                                }}\n                                onMouseLeave={(e) => {\n                                  e.currentTarget.style.backgroundColor = '#fef2f2';\n                                  e.currentTarget.style.borderColor = '#fecaca';\n                                }}\n                              >\n                                <FontAwesomeIcon icon={faTrash} />\n                                Odstranit\n                              </button>\n                            )}\n                          </div>\n                          <FileDropZone\n                            onClick={() => {\n                              handleFileInputClick('fileInputCreate');\n                            }}\n                            onDragOver={(e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              setIsDragging(true);\n                            }}\n                            onDragLeave={(e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              setIsDragging(false);\n                            }}\n                            onDrop={(e) => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              setIsDragging(false);\n\n                              const files = Array.from(e.dataTransfer.files);\n                              const docxFile = files.find(file => file.name.endsWith('.docx'));\n                              if (docxFile) {\n                                handleFileSelect(docxFile);\n                              }\n                            }}\n                            style={{\n                              cursor: 'pointer',\n                              width: '100%',\n                              height: '60px',\n                              backgroundColor: isDragging ? '#f0f9ff' : (uploadForm.file ? '#f0fdf4' : '#f9fafb'),\n                              border: isDragging ? '2px dashed #3b82f6' : (uploadForm.file ? '1px solid #bbf7d0' : '1px dashed #d1d5db'),\n                              borderRadius: '6px',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              padding: '12px',\n                              textAlign: 'center',\n                              transition: 'all 0.2s ease'\n                            }}\n                          >\n                            <div style={{ lineHeight: '1.3' }}>\n                              {uploadForm.file ? (\n                                <>\n                                  <div style={{ color: '#059669', fontSize: '14px', marginBottom: '4px' }}>\n                                    <FontAwesomeIcon icon={faFileWord} />\n                                    <span style={{ marginLeft: '6px', fontSize: '11px', fontWeight: '500' }}>\n                                      {uploadForm.file.name}\n                                    </span>\n                                  </div>\n                                  <small style={{ color: '#6b7280', fontSize: '10px' }}>\n                                    ({(uploadForm.file.size / 1024 / 1024).toFixed(1)} MB)\n                                  </small>\n                                </>\n                              ) : (\n                                <>\n                                  <div style={{ fontSize: '11px', fontWeight: '500', marginBottom: '4px' }}>\n                                    Kliknte pro pidn nebo vmnu DOCX ablony\n                                  </div>\n                                  <small style={{ color: '#6b7280', fontSize: '10px' }}>(max 10MB)</small>\n                                </>\n                              )}\n                            </div>\n                          </FileDropZone>\n                          <input\n                            id=\"fileInputCreate\"\n                            type=\"file\"\n                            accept=\".docx\"\n                            multiple={false}\n                            style={{ display: 'none' }}\n                            onChange={(e) => {\n                              const file = e.target.files?.[0];\n                              if (file) {\n                                handleFileSelect(file);\n                                e.target.value = '';\n                              }\n                            }}\n                          />\n                        </div>\n                      )}\n\n                      {/* Popis pes celou ku */}\n                      <FormGroup>\n                        <Label>Popis</Label>\n                        <InputWithIcon hasTextarea>\n                          <FileText size={16} />\n                          <TextArea\n                            value={uploadForm.popis}\n                            onChange={(e) => setUploadForm(prev => ({ ...prev, popis: e.target.value }))}\n                            placeholder=\"nap. ablona pro smlouvy o dlo s dodavateli, Fakturace za poskytnut sluby, Pracovn smlouvy na dobu uritou...\"\n                            style={{ minHeight: '50px', paddingLeft: '2rem' }}\n                          />\n                        </InputWithIcon>\n                      </FormGroup>\n\n                      {/* JSON Mapovn DOCVARIABLE */}\n                      <FullWidthJsonEditor>\n                          <JsonHeader>\n                            <JsonTitle>\n                              <FontAwesomeIcon icon={faCode} />\n                              JSON\n                            </JsonTitle>\n                            <JsonActions>\n                              <CopyButton\n                                type=\"button\"\n                                onClick={downloadedTemplateFile && uploadForm.docx_mapping && Object.keys(uploadForm.docx_mapping).length > 0 ? handleGenerateInlinePreview : undefined}\n                                disabled={generatingPreview || !downloadedTemplateFile || !uploadForm.docx_mapping || Object.keys(uploadForm.docx_mapping).length === 0}\n                                title={\n                                  generatingPreview ? 'Generuje se nhled...' :\n                                  !downloadedTemplateFile ? 'Nhled nen dostupn - chyb DOCX soubor' :\n                                  !uploadForm.docx_mapping || Object.keys(uploadForm.docx_mapping).length === 0 ? 'Nhled nen dostupn - chyb mapovn pol' :\n                                  'Zobrazit nhled dokumentu s vybranmi daty'\n                                }\n                              >\n                                <FontAwesomeIcon icon={generatingPreview ? faSyncAlt : faEye} spin={generatingPreview} />\n                              </CopyButton>\n                              <CopyButton\n                                type=\"button\"\n                                onClick={handleCopyJson}\n                                title={jsonCopied ? 'JSON bylo zkoprovno do schrnky!' : 'Koprovat JSON mapovn do schrnky'}\n                              >\n                                <FontAwesomeIcon icon={jsonCopied ? faCheck : faCopy} />\n                              </CopyButton>\n                            </JsonActions>\n                          </JsonHeader>\n                          <JsonEditor>\n                            <JsonHighlightContainer>\n                              {/* Syntax highlighted overlay */}\n                              <JsonHighlightOverlay\n                                dangerouslySetInnerHTML={{\n                                  __html: highlightJsonSyntax(\n                                    uploadForm.mapovani_json || JSON.stringify(uploadForm.docx_mapping || {}, null, 2)\n                                  )\n                                }}\n                              />\n\n                              {/* Actual textarea for input - mus bt ve stejnm containeru pro synchronn scroll */}\n                              <FullWidthJsonTextarea\n                                value={uploadForm.mapovani_json || JSON.stringify(uploadForm.docx_mapping || {}, null, 2)}\n                                onChange={(e) => {\n                                  setUploadForm(prev => ({ ...prev, mapovani_json: e.target.value }));\n                                  // Pokusme se parsovat a aktualizovat docx_mapping\n                                  try {\n                                    const parsed = JSON.parse(e.target.value);\n                                    setUploadForm(prev => ({ ...prev, docx_mapping: parsed }));\n                                  } catch (error) {\n                                    // Nevalidn JSON - ignorujeme\n                                  }\n                                }}\n                                onScroll={(e) => {\n                                  // Synchronizuj scroll overlay s textarea\n                                  const overlay = e.target.parentElement.querySelector('pre');\n                                  if (overlay) {\n                                    overlay.scrollTop = e.target.scrollTop;\n                                    overlay.scrollLeft = e.target.scrollLeft;\n                                  }\n                                }}\n                                placeholder={`{\n  \"EVIDENCNI_CISLO\": \"cislo_objednavky\",\n  \"DNAZEV\": \"dodavatel_nazev + dodavatel_kontakt_jmeno\",\n  \"CENA_BEZDPH\": \"ev_cislo_objednavky\"\n}`}\n                                spellCheck={false}\n                                autoComplete=\"off\"\n                                autoCorrect=\"off\"\n                                autoCapitalize=\"off\"\n                                style={{\n                                  caretColor: '#1e293b'\n                                }}\n                              />\n                            </JsonHighlightContainer>\n                          </JsonEditor>\n\n                          {/* Validan panel */}\n                          {mappingValidation && (\n                            <>\n                              {/* Souhrn validace */}\n                              {mappingValidation.totalFields > 0 && (\n                                <ValidationSummary $valid={mappingValidation.valid}>\n                                  <div>\n                                    {mappingValidation.valid ? (\n                                      <>\n                                        <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#059669', marginRight: '0.5rem' }} />\n                                        <strong>Mapping je v podku</strong> - {mappingValidation.validFields}/{mappingValidation.totalFields} pol validnch\n                                      </>\n                                    ) : (\n                                      <>\n                                        <FontAwesomeIcon icon={faTimesCircle} style={{ color: '#dc2626', marginRight: '0.5rem' }} />\n                                        <strong>Nalezeny problmy</strong> - {mappingValidation.errors.length} chyb, {mappingValidation.warnings.length} varovn\n                                      </>\n                                    )}\n                                  </div>\n                                  {!mappingValidation.valid && mappingValidation.errors.some(e => e.type === 'deprecated') && (\n                                    <AutoFixButton onClick={handleAutoFixMapping}>\n                                      <FontAwesomeIcon icon={faSync} />\n                                      Automaticky opravit\n                                    </AutoFixButton>\n                                  )}\n                                </ValidationSummary>\n                              )}\n\n                              {/* Chyby */}\n                              {mappingValidation.errors.length > 0 && (\n                                <ValidationPanel $type=\"error\">\n                                  <ValidationHeader $type=\"error\">\n                                    <FontAwesomeIcon icon={faTimesCircle} />\n                                    Chyby v mappingu ({mappingValidation.errors.length})\n                                  </ValidationHeader>\n                                  <ValidationList>\n                                    {mappingValidation.errors.map((error, index) => (\n                                      <ValidationItem key={index} $type=\"error\">\n                                        <ValidationItemHeader>\n                                          <span>Pole: <code>{error.docxField}</code></span>\n                                        </ValidationItemHeader>\n                                        <ValidationItemBody>\n                                          {error.type === 'deprecated' && (\n                                            <>\n                                              <div> Zastaral cesta: <code>{error.apiPath}</code></div>\n                                              <div style={{ marginTop: '0.25rem', color: '#374151' }}>\n                                                 {error.reason}\n                                              </div>\n                                              {error.suggestion && (\n                                                <ValidationSuggestion>\n                                                   Pouijte: <strong>{error.suggestion}</strong>\n                                                </ValidationSuggestion>\n                                              )}\n                                            </>\n                                          )}\n                                          {error.type === 'invalid' && (\n                                            <>\n                                              <div> Neplatn cesta: <code>{error.apiPath}</code></div>\n                                              <div style={{ marginTop: '0.25rem', color: '#374151' }}>\n                                                 Toto pole neexistuje v enriched API struktue\n                                              </div>\n                                            </>\n                                          )}\n                                          {error.type === 'parse' && (\n                                            <div> {error.message}</div>\n                                          )}\n                                        </ValidationItemBody>\n                                      </ValidationItem>\n                                    ))}\n                                  </ValidationList>\n                                </ValidationPanel>\n                              )}\n\n                              {/* Varovn */}\n                              {mappingValidation.warnings.length > 0 && (\n                                <ValidationPanel $type=\"warning\">\n                                  <ValidationHeader $type=\"warning\">\n                                    <FontAwesomeIcon icon={faInfoCircle} />\n                                    Varovn ({mappingValidation.warnings.length})\n                                  </ValidationHeader>\n                                  <ValidationList>\n                                    {mappingValidation.warnings.map((warning, index) => (\n                                      <ValidationItem key={index} $type=\"warning\">\n                                        <ValidationItemHeader>\n                                          <span>Pole: <code>{warning.docxField}</code></span>\n                                        </ValidationItemHeader>\n                                        <ValidationItemBody>\n                                           {warning.message}\n                                        </ValidationItemBody>\n                                      </ValidationItem>\n                                    ))}\n                                  </ValidationList>\n                                </ValidationPanel>\n                              )}\n                            </>\n                          )}\n                        </FullWidthJsonEditor>\n                      </FormSectionContent>\n                    </FormSection>\n                  </LeftColumn>\n\n                  {/* Prav sloupec - Interaktivn mapovn (dynamicky se zobrazuje) */}\n                  <RightColumn\n                    $visible={\n                      (!isEditMode && uploadForm.file && uploadForm.file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') ||\n                      (isEditMode && (downloadedTemplateFile || (mappingSectionVisible && Object.keys(uploadForm.docx_mapping || {}).length > 0)))\n                    }\n                  >\n                    {/* Upload mode: Zobrazit pokud je vybran DOCX soubor */}\n                    {!isEditMode && uploadForm.file && uploadForm.file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' && (\n                      <DocxMappingExpandableSection\n                        file={uploadForm.file}\n                        mapping={uploadForm.docx_mapping || {}}\n                        onMappingChange={handleDocxMappingChange}\n                        expanded={true}\n                        onExpandChange={() => {}}\n                        style={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}\n                        token={token}\n                        username={user?.username}\n                        sampleOrderId={1}\n                        useDynamicFields={true}\n                      />\n                    )}\n\n                    {/* Edit mode: Zobrazit pokud mme staen DOCX soubor */}\n                    {isEditMode && downloadedTemplateFile && (\n                      <DocxMappingExpandableSection\n                        file={downloadedTemplateFile}\n                        mapping={uploadForm.docx_mapping || {}}\n                        onMappingChange={handleDocxMappingChange}\n                        expanded={mappingSectionVisible}\n                        onExpandChange={setMappingSectionVisible}\n                        style={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}\n                        token={token}\n                        username={user?.username}\n                        sampleOrderId={1}\n                        useDynamicFields={true}\n                      />\n                    )}\n\n                    {/* Edit mode fallback: Zobrazit mapovn i bez DOCX souboru pokud existuje */}\n                    {isEditMode && !downloadedTemplateFile && mappingSectionVisible && Object.keys(uploadForm.docx_mapping || {}).length > 0 && (\n                      <div style={{\n                        padding: '1rem',\n                        border: '1px solid #e5e7eb',\n                        borderRadius: '8px',\n                        backgroundColor: '#f8fafc',\n                        flex: 1,\n                        display: 'flex',\n                        flexDirection: 'column',\n                        overflow: 'hidden'\n                      }}>\n                        <div style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: '0.5rem',\n                          marginBottom: '1rem',\n                          color: '#6b7280',\n                          fontSize: '0.9rem'\n                        }}>\n                          <FontAwesomeIcon icon={faInfoCircle} />\n                          <span>Existujc mapovn pol (bez DOCX souboru pro analzu)</span>\n                        </div>\n                        <div style={{\n                          backgroundColor: 'white',\n                          padding: '1rem',\n                          borderRadius: '6px',\n                          border: '1px solid #e5e7eb',\n                          flex: 1,\n                          overflow: 'auto'\n                        }}>\n                          <pre style={{\n                            margin: 0,\n                            fontSize: '0.8rem',\n                            color: '#374151',\n                            whiteSpace: 'pre-wrap',\n                            wordBreak: 'break-word'\n                          }}>\n                            {JSON.stringify(uploadForm.docx_mapping, null, 2)}\n                          </pre>\n                        </div>\n                      </div>\n                    )}\n                  </RightColumn>\n                </UpperSection>\n              </ModalBody>\n\n              <ModalFooter>\n                <FooterLeft>\n                  <FontAwesomeIcon icon={faUpload} />\n                  Pipraveno k nahrn\n                </FooterLeft>\n                <FooterRight>\n                  <Button type=\"button\" className=\"cancel\" onClick={handleCloseUploadModal}>\n                    <FontAwesomeIcon icon={faTimes} />\n                    Zruit\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    className=\"primary\"\n                    disabled={\n                      !uploadForm.nazev ||\n                      (!isEditMode && !uploadForm.file) ||\n                      (isEditMode && diskStatus[editingTemplate?.id]?.status === 'error' && !uploadForm.file)\n                    }\n                  >\n                    <FontAwesomeIcon icon={faUpload} />\n                    {isEditMode ? 'Uloit zmny' : 'Nahrt ablonu'}\n                  </Button>\n                </FooterRight>\n              </ModalFooter>\n            </ModalForm>\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {/* Confirm Delete Dialog */}\n      <ConfirmDialog\n        isOpen={showConfirmDelete}\n        title=\"Smazat ablonu pln z disku\"\n        message={`Opravdu chcete PLN SMAZAT ablonu \"${selectedTemplate?.nazev}\"?\\n\\n POZOR: Tato akce je nevratn!\\n\\n ablona bude odstranna z databze\\n Fyzick soubor bude smazn z disku\\n Vechny reference na tuto ablonu budou ztraceny\\n\\nPokraovat pouze pokud jste si jisti.`}\n        confirmText=\"Smazat pln z disku\"\n        cancelText=\"Zruit\"\n        onConfirm={handleDelete}\n        onCancel={() => {\n          setShowConfirmDelete(false);\n          setSelectedTemplate(null);\n        }}\n        variant=\"danger\"\n      />\n\n      {/* Verify Results Modal */}\n      {showVerifyModal && verifyResult && (\n        <ModalOverlay onClick={() => setShowVerifyModal(false)}>\n          <ModalContainer onClick={(e) => e.stopPropagation()}>\n            <ModalHeader>\n              <ModalTitle>\n                <FontAwesomeIcon icon={faCheckCircle} />\n                Vsledky verifikace ablon\n              </ModalTitle>\n              <CloseButton onClick={() => setShowVerifyModal(false)}>\n                <FontAwesomeIcon icon={faTimes} />\n              </CloseButton>\n            </ModalHeader>\n\n            <ModalBody>\n              <VerifyStats>\n                <StatCard $status={verifyResult.summary.integrity_ok ? 'success' : 'warning'}>\n                  <StatLabel>Celkov stav</StatLabel>\n                  <StatValue>{verifyResult.summary.integrity_ok ? ' V podku' : ' Problmy'}</StatValue>\n                </StatCard>\n\n                <StatCard>\n                  <StatLabel>Celkem ablon</StatLabel>\n                  <StatValue>{verifyResult.summary.total_templates}</StatValue>\n                </StatCard>\n\n                <StatCard $status=\"success\">\n                  <StatLabel>Platn ablony</StatLabel>\n                  <StatValue>{verifyResult.summary.valid_templates}</StatValue>\n                </StatCard>\n\n                <StatCard $status={verifyResult.summary.missing_files > 0 ? 'error' : 'success'}>\n                  <StatLabel>Chybjc soubory</StatLabel>\n                  <StatValue>{verifyResult.summary.missing_files}</StatValue>\n                </StatCard>\n              </VerifyStats>\n\n              <VerifyDetails>\n                <DetailSection>\n                  <DetailLabel> Upload adres</DetailLabel>\n                  <DetailValue>{verifyResult.upload_directory}</DetailValue>\n                  <DetailStatus $ok={verifyResult.directory_exists}>\n                    {verifyResult.directory_exists ? ' Existuje' : ' Neexistuje'}\n                  </DetailStatus>\n                  <DetailStatus $ok={verifyResult.directory_writable}>\n                    {verifyResult.directory_writable ? ' Zapisovateln' : ' Pouze ten'}\n                  </DetailStatus>\n                </DetailSection>\n\n                {verifyResult.summary.missing_files > 0 && (\n                  <DetailSection>\n                    <DetailLabel> ablony s chybjcmi soubory</DetailLabel>\n                    {verifyResult.templates?.filter(t => !t.file_exists).map(template => (\n                      <ProblemItem key={template.id}>\n                        <strong>{template.nazev}</strong> - chyb soubor: {template.cesta_souboru}\n                      </ProblemItem>\n                    ))}\n                  </DetailSection>\n                )}\n\n                {verifyResult.orphaned_files?.length > 0 && (\n                  <DetailSection>\n                    <DetailLabel> Oputn soubory (nejsou v DB)</DetailLabel>\n                    {verifyResult.orphaned_files.map((file, index) => (\n                      <ProblemItem key={index}>\n                        {file}\n                      </ProblemItem>\n                    ))}\n                  </DetailSection>\n                )}\n              </VerifyDetails>\n            </ModalBody>\n\n            <ModalFooter>\n              <Button\n                type=\"button\"\n                className=\"primary\"\n                onClick={() => setShowVerifyModal(false)}\n              >\n                Zavt\n              </Button>\n            </ModalFooter>\n          </ModalContainer>\n        </ModalOverlay>\n      )}\n\n      {/*  STAR PREVIEW MODAL ODSTRANN - Vechny nhledy se nyn otevraj v nov zloce */}\n\n      {/* Potvrzovac dialog pro vmnu souboru - React Portal */}\n      {showFileReplaceConfirm && createPortal(\n        <div\n          style={{\n            position: 'fixed',\n            top: '0',\n            left: '0',\n            right: '0',\n            bottom: '0',\n            backgroundColor: 'rgba(0, 0, 0, 0.6)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: '1020',\n            padding: '1rem'\n          }}\n          onClick={() => setShowFileReplaceConfirm(false)}\n        >\n          <div\n            onClick={(e) => e.stopPropagation()}\n            style={{\n              background: 'white',\n              borderRadius: '12px',\n              padding: '2rem',\n              maxWidth: '500px',\n              width: '100%',\n              boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n              zIndex: '1021'\n            }}\n          >\n            <h3 style={{ marginTop: 0, marginBottom: '1rem', color: '#1f2937' }}>\n              Potvrdit vmnu souboru\n            </h3>\n            <p style={{ marginBottom: '1.5rem', color: '#6b7280', lineHeight: '1.5' }}>\n              Nahrnm novho souboru dojde k vyresetovn souasnho mapovn pol.\n              Vechna nastaven mapovn mezi DOCX promnnmi a databzovmi poli budou ztracena.\n            </p>\n            <p style={{ marginBottom: '1.5rem', color: '#6b7280', fontWeight: '500' }}>\n              Pejete si pokraovat?\n            </p>\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\n              <button\n                onClick={() => {\n                  setShowFileReplaceConfirm(false);\n                  setPendingFileInputId(null);\n                }}\n                style={{\n                  padding: '0.5rem 1rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '6px',\n                  background: 'white',\n                  color: '#374151',\n                  cursor: 'pointer'\n                }}\n              >\n                Zruit\n              </button>\n              <button\n                onClick={() => {\n                  setShowFileReplaceConfirm(false);\n                  // Otevt file dialog po potvrzen\n                  if (pendingFileInputId) {\n                    document.getElementById(pendingFileInputId)?.click();\n                    setPendingFileInputId(null);\n                  }\n                }}\n                style={{\n                  padding: '0.5rem 1rem',\n                  border: 'none',\n                  borderRadius: '6px',\n                  background: '#dc2626',\n                  color: 'white',\n                  cursor: 'pointer'\n                }}\n              >\n                Pokraovat a resetovat mapovn\n              </button>\n            </div>\n          </div>\n        </div>,\n        document.body\n      )}\n\n      {/* ConfirmDialog pro odstrann souboru */}\n      {showFileRemoveConfirm && createPortal(\n        <ConfirmDialog\n          isOpen={showFileRemoveConfirm}\n          onConfirm={() => {\n            setShowFileRemoveConfirm(false);\n            handleRemoveTemplateFile(editingTemplate);\n          }}\n          onCancel={() => setShowFileRemoveConfirm(false)}\n          title=\"Odstranit soubor ablony\"\n          message={`Opravdu chcete odstranit aktuln soubor ablony? ${isEditMode ? 'Soubor bude smazn i ze vzdlenho disku. ' : ''}Vechna mapovn budou ztracena a bude nutn nahrt nov soubor.`}\n          confirmText=\"Odstranit\"\n          cancelText=\"Zruit\"\n          type=\"danger\"\n        />,\n        document.body\n      )}\n    </Container>\n  );\n};\n\nexport default DocxSablonyTab;\n","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { X, Save, AlertTriangle, User, Calendar, Hash, Building, Plus, Trash2, ChevronDown, Search } from 'lucide-react';\nimport cashbookAPI from '../../services/cashbookService';\nimport { getUsekyList } from '../../services/apiv2Dictionaries';\nimport { AuthContext } from '../../context/AuthContext';\nimport { ToastContext } from '../../context/ToastContext';\nimport DatePicker from '../DatePicker';\n\n// ============================================================================\n// ANIMACE\n// ============================================================================\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\n// ============================================================================\n// STYLED COMPONENTS\n// ============================================================================\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 2rem;\n  animation: fadeIn 0.15s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ModalContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  width: 100%;\n  max-width: 1100px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow:\n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  animation: ${slideInUp} 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ModalHeader = styled.div`\n  padding: 1.5rem 2rem;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n`;\n\nconst ModalTitle = styled.h2`\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  letter-spacing: -0.01em;\n\n  svg {\n    width: 20px;\n    height: 20px;\n    opacity: 0.9;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n`;\n\nconst ModalBody = styled.div`\n  display: grid;\n  grid-template-columns: 420px 1fr;\n  gap: 0;\n  flex: 1;\n  overflow: hidden;\n`;\n\nconst LeftSection = styled.div`\n  padding: 2rem;\n  background: #f8fafc;\n  border-right: 1px solid #e2e8f0;\n  overflow-y: auto;\n`;\n\nconst RightSection = styled.div`\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  gap: 1rem;\n`;\n\nconst SectionTitle = styled.h3`\n  margin: 0 0 1.25rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #64748b;\n  }\n`;\n\nconst WarningBox = styled.div`\n  background: linear-gradient(135deg, #fef2f2 0%, #fff 100%);\n  border-left: 3px solid #ef4444;\n  border-radius: 8px;\n  padding: 0.875rem 1rem;\n  margin-bottom: 1.5rem;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n\n  svg {\n    width: 18px;\n    height: 18px;\n    color: #ef4444;\n    flex-shrink: 0;\n    margin-top: 0.125rem;\n  }\n`;\n\nconst WarningText = styled.div`\n  font-size: 0.8125rem;\n  color: #7f1d1d;\n  line-height: 1.5;\n\n  strong {\n    font-weight: 600;\n  }\n`;\n\nconst FormGroup = styled.div`\n  margin-bottom: 1.5rem;\n`;\n\nconst FormRow = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  color: #1e293b;\n\n  svg {\n    width: 13px;\n    height: 13px;\n    color: #64748b;\n    margin-right: 0.375rem;\n    vertical-align: middle;\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid ${props => props.$error ? '#f87171' : '#e2e8f0'};\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    color: #94a3b8;\n    cursor: not-allowed;\n  }\n`;\n\nconst Textarea = styled.textarea`\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid ${props => props.$error ? '#f87171' : '#e2e8f0'};\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n  resize: vertical;\n  min-height: 60px;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    color: #94a3b8;\n    cursor: not-allowed;\n  }\n`;\n\nconst UsersList = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  min-height: 200px;\n`;\n\nconst UserItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  margin-bottom: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover {\n    border-color: #cbd5e1;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.875rem;\n  flex: 1;\n`;\n\nconst UserIcon = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 600;\n  flex-shrink: 0;\n`;\n\nconst UserDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1;\n  min-width: 0;\n`;\n\nconst UserName = styled.span`\n  font-weight: 600;\n  color: #0f172a;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst UserMeta = styled.span`\n  font-size: 0.75rem;\n  color: #64748b;\n  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;\n`;\n\nconst MainBadge = styled.span`\n  padding: 0.25rem 0.625rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border-radius: 4px;\n  font-size: 0.6875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.02em;\n`;\n\nconst UserActions = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  flex-shrink: 0;\n`;\n\nconst ToggleMainButton = styled.button`\n  background: ${props => props.$isMain ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' : 'white'};\n  border: 1px solid ${props => props.$isMain ? '#10b981' : '#e2e8f0'};\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  color: ${props => props.$isMain ? 'white' : '#64748b'};\n  cursor: pointer;\n  transition: all 0.15s;\n  font-size: 0.75rem;\n  font-weight: 500;\n  white-space: nowrap;\n\n  &:hover {\n    border-color: ${props => props.$isMain ? '#059669' : '#cbd5e1'};\n    transform: translateY(-1px);\n  }\n`;\n\nconst RemoveButton = styled.button`\n  background: white;\n  border: 1px solid #e2e8f0;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  color: #64748b;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n    border-color: #ef4444;\n    color: #ef4444;\n    transform: translateY(-1px);\n  }\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n`;\n\nconst EditDateButton = styled.button`\n  padding: 0.375rem 0.75rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  transition: all 0.15s;\n  white-space: nowrap;\n\n  &:hover {\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    border-color: #3b82f6;\n    color: #3b82f6;\n    transform: translateY(-1px);\n  }\n\n  svg {\n    width: 13px;\n    height: 13px;\n  }\n`;\n\nconst EditModeContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.625rem;\n`;\n\nconst EditDateInputs = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n`;\n\nconst EditDateLabel = styled.label`\n  font-size: 0.75rem;\n  color: #64748b;\n  font-weight: 500;\n  white-space: nowrap;\n`;\n\nconst EditDatePickerWrapper = styled.div`\n  min-width: 140px;\n\n  /* Pepis styl DatePickeru pro men velikost */\n  button {\n    padding: 0.375rem 0.5rem !important;\n    font-size: 0.75rem !important;\n    border-radius: 4px !important;\n  }\n`;\n\nconst EditModeButtons = styled.div`\n  display: flex;\n  gap: 0.375rem;\n  justify-content: flex-end;\n  margin-top: 0.25rem;\n`;\n\nconst SaveEditButton = styled.button`\n  padding: 0.375rem 0.75rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 2px 6px rgba(16, 185, 129, 0.25);\n  }\n`;\n\nconst CancelEditButton = styled.button`\n  padding: 0.375rem 0.75rem;\n  background: #f1f5f9;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #e2e8f0;\n  }\n`;\n\nconst AddUserSection = styled.div`\n  padding: 1.25rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n`;\n\nconst AddUserRow = styled.div`\n  display: flex;\n  gap: 0.625rem;\n  margin-bottom: 0.75rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst CheckboxLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  font-size: 0.8125rem;\n  color: #334155;\n  cursor: pointer;\n  user-select: none;\n\n  input[type=\"checkbox\"] {\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    accent-color: #3b82f6;\n  }\n`;\n\nconst Select = styled.select`\n  flex: 1;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n\n  &:hover {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n`;\n\nconst CustomSelectWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst SelectIcon = styled.div`\n  position: absolute;\n  right: 0.625rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #94a3b8;\n  pointer-events: none;\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nconst UsekDisplay = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  margin-top: 0.5rem;\n  padding: 0.625rem 0.75rem;\n  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n  border: 1px solid #bfdbfe;\n  border-radius: 6px;\n  font-size: 0.8125rem;\n`;\n\nconst UsekBadge = styled.span`\n  padding: 0.25rem 0.5rem;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 0.6875rem;\n  letter-spacing: 0.01em;\n`;\n\nconst UsekName = styled.span`\n  color: #1e40af;\n  font-weight: 500;\n  flex: 1;\n`;\n\nconst AddButton = styled.button`\n  width: 100%;\n  padding: 0.625rem 1rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n`;\n\nconst EmptyUsers = styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n  font-size: 0.875rem;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 0.75rem;\n    opacity: 0.3;\n  }\n`;\n\nconst ModalFooter = styled.div`\n  padding: 1.25rem 2rem;\n  background: white;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  flex-shrink: 0;\n`;\n\nconst Button = styled.button`\n  padding: 0.625rem 1.5rem;\n  border-radius: 6px;\n  font-weight: 500;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n\n  svg {\n    width: 15px;\n    height: 15px;\n  }\n`;\n\nconst CancelButton = styled(Button)`\n  background: white;\n  color: #64748b;\n  border: 1px solid #e2e8f0;\n\n  &:hover {\n    background: #f8fafc;\n    border-color: #cbd5e1;\n  }\n`;\n\nconst SaveButton = styled(Button)`\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  background: #fef2f2;\n  color: #991b1b;\n  padding: 0.75rem 1rem;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    flex-shrink: 0;\n  }\n`;\n\nconst ConfirmDialog = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  z-index: 10001;\n  min-width: 400px;\n  max-width: 500px;\n`;\n\nconst ConfirmOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 10000;\n`;\n\nconst ConfirmTitle = styled.h3`\n  margin: 0 0 1rem 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #dc2626;\n  }\n`;\n\nconst ConfirmMessage = styled.p`\n  margin: 0 0 1.5rem 0;\n  color: #64748b;\n  line-height: 1.6;\n`;\n\nconst ConfirmButtons = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n`;\n\nconst ConfirmButton = styled.button`\n  padding: 0.625rem 1.25rem;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ConfirmCancelButton = styled(ConfirmButton)`\n  background: white;\n  color: #64748b;\n  border: 2px solid #e2e8f0;\n\n  &:hover:not(:disabled) {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n  }\n`;\n\nconst ConfirmDeleteButton = styled(ConfirmButton)`\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  color: white;\n\n  &:hover:not(:disabled) {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);\n  }\n`;\n\n// =============================================================================\n// SEARCHABLE SELECT COMPONENTS\n// =============================================================================\n\nconst SearchableSelectWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst SearchableSelectButton = styled.div`\n  width: 100%;\n  padding: 0.625rem 2.25rem 0.625rem ${props => props.$hasIcon ? '2.5rem' : '0.75rem'};\n  border: 1px solid ${props => props.$error ? '#f87171' : '#e2e8f0'};\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: ${props => props.disabled ? '#f1f5f9' : 'white'};\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  color: ${props => props.$isEmpty ? '#94a3b8' : '#1e293b'};\n  font-weight: ${props => props.$isEmpty ? '400' : '600'};\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  ${props => props.$isOpen && `\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  `}\n\n  .icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n  }\n`;\n\nconst SearchableDropdown = styled.div`\n  position: fixed;\n  max-height: 280px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 999999;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SearchInputWrapper = styled.div`\n  position: relative;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n\n  svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n    pointer-events: none;\n  }\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 0.75rem 2.5rem 0.75rem 2.5rem;\n  border: none;\n  font-size: 0.875rem;\n  outline: none;\n\n  &::placeholder {\n    color: #94a3b8;\n  }\n\n  &:focus {\n    background: #f8fafc;\n  }\n`;\n\nconst SearchClearButton = styled.button`\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #475569;\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 2.25rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n  z-index: 1;\n\n  &:hover {\n    color: #475569;\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n`;\n\nconst DropdownOptions = styled.div`\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst DropdownOption = styled.div`\n  padding: 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n\n  ${props => props.$selected && `\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    color: #1e40af;\n    font-weight: 600;\n  `}\n`;\n\nconst NoResults = styled.div`\n  padding: 1rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n`;\n\n// SearchableSelect Component\nconst SearchableSelect = ({ value, onChange, options, placeholder, disabled, icon }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0, width: 0 });\n  const wrapperRef = React.useRef(null);\n  const buttonRef = React.useRef(null);\n  const dropdownRef = React.useRef(null);\n  const searchInputRef = React.useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      // Kontrola, zda klik nen na tlatku nebo v dropdownu\n      if (\n        wrapperRef.current &&\n        !wrapperRef.current.contains(event.target) &&\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target)\n      ) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  useEffect(() => {\n    if (isOpen && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isOpen]);\n\n  // Calculate dropdown position when opening\n  useEffect(() => {\n    if (isOpen && buttonRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      setDropdownPosition({\n        top: rect.bottom + 4,\n        left: rect.left,\n        width: rect.width\n      });\n    }\n  }, [isOpen]);\n\n  const filteredOptions = options.filter(opt =>\n    opt.label.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const selectedOption = options.find(opt => opt.value === value);\n\n  const handleSelect = (optionValue) => {\n    onChange(optionValue);\n    setIsOpen(false);\n    setSearchTerm('');\n  };\n\n  const handleButtonClick = () => {\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n\n  const handleClear = (e) => {\n    e.stopPropagation();\n    onChange('');\n  };\n\n  return (\n    <SearchableSelectWrapper ref={wrapperRef}>\n      <SearchableSelectButton\n        ref={buttonRef}\n        onClick={handleButtonClick}\n        disabled={disabled}\n        $isEmpty={!selectedOption}\n        $isOpen={isOpen}\n        $hasIcon={!!icon}\n      >\n        {icon && <span className=\"icon\">{icon}</span>}\n        <span style={{ flex: 1 }}>{selectedOption ? selectedOption.label : placeholder}</span>\n        {selectedOption && !disabled && (\n          <ClearButton onClick={handleClear}>\n            <X size={14} />\n          </ClearButton>\n        )}\n        <ChevronDown size={16} style={{ color: '#94a3b8', transition: 'transform 0.2s', transform: isOpen ? 'rotate(180deg)' : 'none' }} />\n      </SearchableSelectButton>\n\n      {isOpen && ReactDOM.createPortal(\n        <SearchableDropdown\n          ref={dropdownRef}\n          style={{\n            position: 'fixed',\n            top: `${dropdownPosition.top}px`,\n            left: `${dropdownPosition.left}px`,\n            width: `${dropdownPosition.width}px`\n          }}\n        >\n          <SearchInputWrapper>\n            <Search size={16} />\n            <SearchInput\n              ref={searchInputRef}\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Hledat...\"\n            />\n            {searchTerm && (\n              <SearchClearButton onClick={() => setSearchTerm('')}>\n                <X size={14} />\n              </SearchClearButton>\n            )}\n          </SearchInputWrapper>\n          <DropdownOptions>\n            {filteredOptions.length > 0 ? (\n              filteredOptions.map((option) => (\n                <DropdownOption\n                  key={option.value}\n                  $selected={option.value === value}\n                  onClick={() => handleSelect(option.value)}\n                >\n                  {option.label}\n                </DropdownOption>\n              ))\n            ) : (\n              <NoResults>dn vsledky</NoResults>\n            )}\n          </DropdownOptions>\n        </SearchableDropdown>,\n        document.body\n      )}\n    </SearchableSelectWrapper>\n  );\n};\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst EditCashboxDialog = ({ isOpen, onClose, onSuccess, cashbox }) => {\n  const { token, user } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n\n  const [formData, setFormData] = useState({\n    nazev: '',\n    kod_pracoviste: '',\n    nazev_pracoviste: '',\n    ciselna_rada_vpd: '',\n    vpd_od_cislo: 1,\n    ciselna_rada_ppd: '',\n    ppd_od_cislo: 1,\n    poznamka: '',\n  });\n\n  const [useky, setUseky] = useState([]);\n  const [selectedUsek, setSelectedUsek] = useState(null);\n  const [users, setUsers] = useState([]);\n  const [availableUsers, setAvailableUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState('');\n  const [isMainUser, setIsMainUser] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [loadingUseky, setLoadingUseky] = useState(false);\n  const [error, setError] = useState('');\n  const [confirmRemove, setConfirmRemove] = useState({ show: false, assignmentId: null, userName: '' });\n  const [editingUserId, setEditingUserId] = useState(null); // ID uivatele kter se edituje\n  const [editValues, setEditValues] = useState({ platne_od: '', platne_do: '' }); // Editan hodnoty\n\n  // Hlavn useEffect - nast ve pi oteven dialogu\n  useEffect(() => {\n    if (isOpen && cashbox && token && user?.username) {\n      // Naplnit formul daty pokladny\n      setFormData({\n        nazev: cashbox.nazev || '',\n        kod_pracoviste: cashbox.kod_pracoviste || '',\n        nazev_pracoviste: cashbox.nazev_pracoviste || '',\n        ciselna_rada_vpd: cashbox.ciselna_rada_vpd || '',\n        vpd_od_cislo: cashbox.vpd_od_cislo || 1,\n        ciselna_rada_ppd: cashbox.ciselna_rada_ppd || '',\n        ppd_od_cislo: cashbox.ppd_od_cislo || 1,\n        poznamka: cashbox.poznamka || '',\n      });\n\n      // Nast piazen uivatele - filtrovat jen aktivn (platne_do NULL nebo v budoucnosti)\n      const allUsers = cashbox.uzivatele || [];\n      const today = new Date().toISOString().split('T')[0];\n      const activeUsers = allUsers.filter(user => {\n        if (!user.platne_do) return true; // NULL = aktivn navdy\n        return user.platne_do > today; // Budouc datum = jet aktivn\n      });\n      setUsers(activeUsers);\n\n      // Nast dostupn uivatele a seky\n      loadAvailableUsers();\n      loadUseky();\n    }\n  }, [isOpen, cashbox, token, user?.username]);\n\n  const loadUseky = async () => {\n    if (!token || !user?.username) return;\n\n    try {\n      setLoadingUseky(true);\n      const usekyData = await getUsekyList({\n        token: token,\n        username: user.username,\n        show_inactive: false\n      });\n      setUseky(usekyData || []);\n\n      // Pokud je nastaven kod_pracoviste, najt odpovdajc sek\n      if (cashbox?.kod_pracoviste && usekyData) {\n        const matchedUsek = usekyData.find(u => u.usek_zkr === cashbox.kod_pracoviste);\n        if (matchedUsek) {\n          setSelectedUsek(matchedUsek);\n        }\n      }\n    } catch (err) {\n      // Error handling\n    } finally {\n      setLoadingUseky(false);\n    }\n  };\n\n  const loadAvailableUsers = async () => {\n    if (!cashbox?.id) return;\n\n    try {\n      setLoading(true);\n      const result = await cashbookAPI.getAvailableUsers(cashbox.id);\n      setAvailableUsers(result.data.uzivatele || []);\n    } catch (err) {\n      // Error handling\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    setError('');\n  };\n\n  const handleUsekChange = (usekId) => {\n    if (!usekId) {\n      // Przdn vbr - vyistit\n      setSelectedUsek(null);\n      setFormData(prev => ({\n        ...prev,\n        kod_pracoviste: '',\n        nazev_pracoviste: ''\n      }));\n      setError('');\n      return;\n    }\n\n    const usek = useky.find(u => String(u.id) === String(usekId));\n    setSelectedUsek(usek || null);\n\n    if (usek) {\n      // Automaticky vyplnit kd a nzev pracovit\n      setFormData(prev => ({\n        ...prev,\n        kod_pracoviste: usek.usek_zkr || '',\n        nazev_pracoviste: usek.usek_nazev || ''\n      }));\n    }\n    setError('');\n  };\n\n  const handleSave = async () => {\n    // Validace\n    if (!formData.ciselna_rada_vpd) {\n      setError('Vyplte selnou adu VPD');\n      return;\n    }\n    if (!formData.ciselna_rada_ppd) {\n      setError('Vyplte selnou adu PPD');\n      return;\n    }\n\n    try {\n      setSaving(true);\n      setError('');\n\n      // 1. Uloit parametry pokladny\n      await cashbookAPI.updateCashbox(cashbox.id, formData);\n\n      // 2. Synchronizovat uivatele (smazat vechny + pidat jen ty co jsou v users state)\n      const usersPayload = users.map(u => ({\n        uzivatel_id: u.uzivatel_id,\n        je_hlavni: u.je_hlavni === 1 || u.je_hlavni === '1' ? 1 : 0,\n        platne_od: u.platne_od || new Date().toISOString().split('T')[0],\n        platne_do: u.platne_do || null,\n        poznamka: u.poznamka || ''\n      }));\n\n      await cashbookAPI.syncCashboxUsers(cashbox.id, usersPayload);\n\n      showToast('Pokladna a uivatel spn uloeni', 'success');\n\n      onSuccess?.();\n      onClose();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Nepodailo se uloit zmny');\n      showToast('Chyba pi ukldn pokladny', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleAddUser = async () => {\n    if (!selectedUser) return;\n\n    try {\n      // isMainUser checkbox znamen \"Zstupce\", take musme invertovat\n      // checked (true) = zstupce (0), unchecked (false) = hlavn (1)\n      const jeHlavni = isMainUser ? 0 : 1;\n      console.log('Pidvm uivatele:', selectedUser, 'checkbox zstupce:', isMainUser, 'je_hlavni:', jeHlavni);\n\n      const result = await cashbookAPI.assignUserToCashbox({\n        pokladna_id: cashbox.id,\n        uzivatel_id: parseInt(selectedUser),\n        je_hlavni: jeHlavni,\n        platne_od: new Date().toISOString().split('T')[0],\n        platne_do: null,\n        poznamka: ''\n      });\n\n      if (result.status === 'ok') {\n        // Reload users list from server\n        const cashboxResult = await cashbookAPI.getCashboxList(true, true);\n        const updatedCashbox = cashboxResult.data.pokladny.find(p => p.id === cashbox.id);\n        if (updatedCashbox) {\n          setUsers(updatedCashbox.uzivatele || []);\n        }\n\n        setSelectedUser('');\n        setIsMainUser(false);\n        await loadAvailableUsers();\n\n        // Find added user name for toast\n        const addedUser = availableUsers.find(u => u.id === parseInt(selectedUser));\n        showToast(`Uivatel \"${addedUser?.name || 'Uivatel'}\" byl spn piazen k pokladn`, 'success');\n\n        // DON'T call onSuccess() - it would reload entire dialog\n      } else {\n        showToast(result.message || 'Chyba pi piazovn uivatele', 'error');\n      }\n    } catch (err) {\n      console.error('Chyba pi pidvn uivatele:', err);\n      showToast('Chyba pi piazovn uivatele k pokladn', 'error');\n    }\n  };\n\n  const handleToggleMain = async (assignmentId, currentStatus, userName) => {\n    try {\n      console.log('Mnm status je_hlavni:', assignmentId, 'current:', currentStatus, 'userName:', userName);\n      const newStatus = currentStatus === 1 ? 0 : 1;\n\n      const result = await cashbookAPI.updateUserMainStatus(assignmentId, newStatus);\n      console.log('Zmna statusu spn');\n\n      if (result.status === 'ok') {\n        // Reload users list from server\n        const cashboxResult = await cashbookAPI.getCashboxList(true, true);\n        const updatedCashbox = cashboxResult.data.pokladny.find(p => p.id === cashbox.id);\n        if (updatedCashbox) {\n          setUsers(updatedCashbox.uzivatele || []);\n        }\n\n        const newStatusText = newStatus === 1 ? 'Hlavn' : 'Zstupce';\n        showToast(`Status uivatele \"${userName}\" zmnn na ${newStatusText}`, 'success');\n\n        // DON'T call onSuccess() - it would reload entire dialog\n      } else {\n        showToast(result.message || 'Chyba pi zmn statusu', 'error');\n      }\n    } catch (err) {\n      console.error('Chyba pi zmn statusu:', err);\n      showToast('Chyba pi zmn statusu uivatele', 'error');\n    }\n  };\n\n  const handleEditUserClick = (user) => {\n    console.log(' Editace platnosti uivatele:', user);\n    setEditingUserId(user.uzivatel_id);\n    setEditValues({\n      platne_od: user.platne_od || new Date().toISOString().split('T')[0],\n      platne_do: user.platne_do || ''\n    });\n  };\n\n  const handleSaveUserDates = (userId) => {\n    console.log(' Ukldm platnost uivatele:', userId, editValues);\n\n    setUsers(prev => prev.map(u => {\n      if (u.uzivatel_id === userId) {\n        return {\n          ...u,\n          platne_od: editValues.platne_od,\n          platne_do: editValues.platne_do || null\n        };\n      }\n      return u;\n    }));\n\n    setEditingUserId(null);\n    setEditValues({ platne_od: '', platne_do: '' });\n    showToast('Platnost piazen zmnna (ulote dialog pro potvrzen)', 'info');\n  };\n\n  const handleCancelEditDates = () => {\n    setEditingUserId(null);\n    setEditValues({ platne_od: '', platne_do: '' });\n  };\n\n  const handleRemoveUserClick = (assignmentId, userName) => {\n    setConfirmRemove({ show: true, assignmentId, userName });\n  };\n\n  const handleRemoveUserConfirm = async () => {\n    const { assignmentId, userName } = confirmRemove;\n    setConfirmRemove({ show: false, assignmentId: null, userName: '' });\n\n    console.log('');\n    console.log('  ODEBRN UIVATELE Z POKLADNY - START');\n    console.log('');\n    console.log(' Assignment ID:', assignmentId);\n    console.log(' Uivatel:', userName);\n    console.log(' Pokladna ID:', cashbox?.id);\n    console.log(' Pokladna slo:', cashbox?.cislo_pokladny);\n\n    try {\n      console.log(' Volm API: cashbookAPI.unassignUserFromCashbox()');\n      console.log('   Parametry:', { assignmentId });\n\n      const result = await cashbookAPI.unassignUserFromCashbox(assignmentId);\n\n      console.log(' API Response:', JSON.stringify(result, null, 2));\n      console.log('   Status:', result?.status);\n      console.log('   Message:', result?.message);\n      console.log('   Data:', result?.data);\n      console.log('   Affected rows:', result?.data?.affected_rows);\n\n      if (result.status === 'ok') {\n        // Kontrola affected_rows - pokud je 0, zznam nebyl aktualizovn\n        const affectedRows = result?.data?.affected_rows;\n\n        if (affectedRows === 0 || affectedRows === '0') {\n          console.warn('  BE vrtilo affected_rows = 0 (dn zmna v DB)');\n          console.warn('   Mon dvody:');\n          console.warn('   1. Zznam s prirazeni_id =', assignmentId, 'neexistuje');\n          console.warn('   2. Zznam u m platne_do nastaven na dnen datum');\n          console.warn('   3. SQL WHERE podmnka je patn');\n          showToast(`VAROVN: Uivatel \"${userName}\" nebyl odebrn - zznam u neexistuje nebo byl ji deaktivovn`, 'warning');\n          console.log('');\n          console.log('  ODEBRN UIVATELE - WARNING (affected_rows = 0)');\n          console.log('');\n\n          // I tak refreshneme data, a vidme aktuln stav\n          console.log(' Natm dostupn uivatele...');\n          await loadAvailableUsers();\n          return;\n        }\n\n        console.log(' BE potvrdilo spn odebrn (affected_rows:', affectedRows, ')');\n\n        // Reload users - remove from local state\n        const oldUsersCount = users.length;\n        setUsers(prev => {\n          const updated = prev.filter(u => u.prirazeni_id !== assignmentId);\n          console.log(' Poet uivatel PED:', oldUsersCount);\n          console.log(' Poet uivatel PO:', updated.length);\n          console.log(' Odebran uivatel byl:', prev.find(u => u.prirazeni_id === assignmentId));\n          console.log(' Zstvajc uivatel:', updated.map(u => ({ id: u.prirazeni_id, name: u.uzivatel_cele_jmeno })));\n          return updated;\n        });\n\n        // Reload available users\n        console.log(' Natm dostupn uivatele...');\n        await loadAvailableUsers();\n\n        // Show success toast\n        showToast(`Uivatel \"${userName}\" byl spn odebrn z pokladny`, 'success');\n        console.log(' Toast zobrazen');\n        console.log('');\n        console.log('  ODEBRN UIVATELE - SUCCESS');\n        console.log('');\n\n      } else {\n        console.error(' BE vrtilo nespn status');\n        console.error('   Status:', result?.status);\n        console.error('   Message:', result?.message);\n        showToast(result.message || 'Chyba pi odebrn uivatele', 'error');\n        console.log('');\n        console.log(' ODEBRN UIVATELE - FAILED (BE status != ok)');\n        console.log('');\n      }\n    } catch (err) {\n      console.error('');\n      console.error(' ODEBRN UIVATELE - ERROR');\n      console.error('');\n      console.error(' Chyba pi odebrn:', err);\n      console.error('   Message:', err?.message);\n      console.error('   Response:', err?.response);\n      console.error('   Response Data:', err?.response?.data);\n      console.error('   Response Status:', err?.response?.status);\n      \n      // Detekce Foreign Key Constraint chyby\n      const errorMsg = err?.message || err?.response?.data?.message || '';\n      if (errorMsg.includes('Integrity constraint violation') || \n          errorMsg.includes('foreign key constraint fails') ||\n          errorMsg.includes('fk_knihy_prirazeni')) {\n        showToast(\n          `Uivatel \"${userName}\" nelze odebrat - m aktivn pokladn knihy. Nejprve je muste ukonit nebo piadit jinmu uivateli.`,\n          'error'\n        );\n      } else {\n        showToast('Chyba pi odebrn uivatele z pokladny', 'error');\n      }\n    }\n  };\n\n  const handleRemoveUserCancel = () => {\n    setConfirmRemove({ show: false, assignmentId: null, userName: '' });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {ReactDOM.createPortal(\n        <ModalOverlay onClick={(e) => e.stopPropagation()}>\n          <ModalContainer onClick={e => e.stopPropagation()}>\n        <ModalHeader>\n          <ModalTitle>\n            <Building />\n            prava pokladny {cashbox?.cislo_pokladny}\n          </ModalTitle>\n          <CloseButton onClick={onClose}>\n            <X size={20} />\n          </CloseButton>\n        </ModalHeader>\n\n        <ModalBody>\n          {/* LEV ST - Parametry pokladny */}\n          <LeftSection>\n            <SectionTitle>\n              <Hash />\n              Parametry pokladny\n            </SectionTitle>\n\n            {error && (\n              <ErrorMessage>\n                <AlertTriangle />\n                {error}\n              </ErrorMessage>\n            )}\n\n            <FormGroup>\n              <Label>\n                <Hash />\n                slo pokladny\n              </Label>\n              <Input\n                type=\"number\"\n                value={cashbox?.cislo_pokladny || ''}\n                disabled\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Label>Nzev pokladny</Label>\n              <Input\n                type=\"text\"\n                value={formData.nazev}\n                onChange={e => handleChange('nazev', e.target.value)}\n                placeholder=\"Pokladna IT oddlen...\"\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Label>\n                <Building />\n                sek (zkratka)\n              </Label>\n              <SearchableSelect\n                value={selectedUsek?.id || ''}\n                onChange={(val) => handleUsekChange(val)}\n                options={useky.map(usek => ({\n                  value: usek.id,\n                  label: `${usek.usek_zkr} - ${usek.usek_nazev}`\n                }))}\n                placeholder=\"Vyberte sek...\"\n                disabled={loadingUseky}\n                icon={<Building size={16} />}\n              />\n\n              {selectedUsek && (\n                <UsekDisplay>\n                  <UsekBadge>{selectedUsek.usek_zkr}</UsekBadge>\n                  <UsekName>{selectedUsek.usek_nazev}</UsekName>\n                </UsekDisplay>\n              )}\n            </FormGroup>\n\n            <FormRow>\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>\n                  <Hash />\n                  VPD prefix *\n                </Label>\n                <Input\n                  type=\"text\"\n                  value={formData.ciselna_rada_vpd}\n                  onChange={e => handleChange('ciselna_rada_vpd', e.target.value)}\n                  placeholder=\"599\"\n                  $error={!formData.ciselna_rada_vpd}\n                />\n              </FormGroup>\n\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>VPD od sla</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.vpd_od_cislo}\n                  onChange={e => handleChange('vpd_od_cislo', parseInt(e.target.value) || 1)}\n                />\n              </FormGroup>\n            </FormRow>\n\n            <FormRow>\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>\n                  <Hash />\n                  PPD prefix *\n                </Label>\n                <Input\n                  type=\"text\"\n                  value={formData.ciselna_rada_ppd}\n                  onChange={e => handleChange('ciselna_rada_ppd', e.target.value)}\n                  placeholder=\"499\"\n                  $error={!formData.ciselna_rada_ppd}\n                />\n              </FormGroup>\n\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>PPD od sla</Label>\n                <Input\n                  type=\"number\"\n                  value={formData.ppd_od_cislo}\n                  onChange={e => handleChange('ppd_od_cislo', parseInt(e.target.value) || 1)}\n                />\n              </FormGroup>\n            </FormRow>\n\n            <FormGroup>\n              <Label>Poznmka</Label>\n              <Textarea\n                value={formData.poznamka}\n                onChange={e => handleChange('poznamka', e.target.value)}\n                placeholder=\"Voliteln poznmka...\"\n                rows={2}\n              />\n            </FormGroup>\n          </LeftSection>\n\n          {/* PRAV ST - Sprva uivatel */}\n          <RightSection>\n            <SectionTitle>\n              <User />\n              Piazen uivatel ({users.length})\n            </SectionTitle>\n\n            <UsersList style={{ marginBottom: 0 }}>\n              {users.length === 0 ? (\n                <EmptyUsers>\n                  <User size={48} />\n                  <div>dn piazen uivatel</div>\n                </EmptyUsers>\n              ) : (\n                users.map(user => {\n                  const isEditing = editingUserId === user.uzivatel_id;\n\n                  return (\n                    <UserItem key={user.prirazeni_id || user.uzivatel_id}>\n                      <UserInfo>\n                        <UserIcon>\n                          <User size={16} />\n                        </UserIcon>\n                        <UserDetails>\n                          <UserName>\n                            {user.uzivatel_cele_jmeno}\n                            {(user.je_hlavni === 1 || user.je_hlavni === '1') ? (\n                              <MainBadge>Hlavn</MainBadge>\n                            ) : (\n                              <MainBadge style={{ background: 'linear-gradient(135deg, #64748b 0%, #475569 100%)' }}>Zstupce</MainBadge>\n                            )}\n                          </UserName>\n\n                          {isEditing ? (\n                            <EditModeContainer>\n                              <EditDateInputs>\n                                <EditDateLabel>Piazena od:</EditDateLabel>\n                                <EditDatePickerWrapper>\n                                  <DatePicker\n                                    value={editValues.platne_od}\n                                    onChange={(newValue) => {\n                                      setEditValues(prev => {\n                                        const newState = { ...prev, platne_od: newValue };\n\n                                        // Pokud je datum \"do\" vyplnn a je men ne nov datum \"od\",\n                                        // nastav datum \"do\" na nov datum \"od\"\n                                        if (newState.platne_do && newValue && newState.platne_do < newValue) {\n                                          newState.platne_do = newValue;\n                                        }\n\n                                        return newState;\n                                      });\n                                    }}\n                                    placeholder=\"Vyberte datum\"\n                                  />\n                                </EditDatePickerWrapper>\n                                <EditDateLabel>do:</EditDateLabel>\n                                <EditDatePickerWrapper>\n                                  <DatePicker\n                                    value={editValues.platne_do}\n                                    onChange={(newValue) => {\n                                      setEditValues(prev => {\n                                        // Pokud je nov datum \"do\" men ne datum \"od\", nastav na datum \"od\"\n                                        if (newValue && prev.platne_od && newValue < prev.platne_od) {\n                                          return { ...prev, platne_do: prev.platne_od };\n                                        }\n                                        return { ...prev, platne_do: newValue };\n                                      });\n                                    }}\n                                    placeholder=\"Nevyplnit = navdy\"\n                                  />\n                                </EditDatePickerWrapper>\n                              </EditDateInputs>\n                              <EditModeButtons>\n                                <SaveEditButton onClick={() => handleSaveUserDates(user.uzivatel_id)}>\n                                   Uloit\n                                </SaveEditButton>\n                                <CancelEditButton onClick={handleCancelEditDates}>\n                                   Zruit\n                                </CancelEditButton>\n                              </EditModeButtons>\n                            </EditModeContainer>\n                          ) : (\n                            <UserMeta>\n                              {user.username}\n                              {user.platne_od && `  Piazena od: ${user.platne_od}`}\n                              {user.platne_do ? `  do: ${user.platne_do}` : '  navdy'}\n                            </UserMeta>\n                          )}\n                        </UserDetails>\n                      </UserInfo>\n\n                      {!isEditing && (\n                        <UserActions>\n                          <EditDateButton\n                            onClick={() => handleEditUserClick(user)}\n                            title=\"Editovat platnost piazen\"\n                          >\n                            <Calendar size={13} />\n                            Piazen\n                          </EditDateButton>\n                          <RemoveButton\n                            onClick={() => handleRemoveUserClick(user.prirazeni_id, user.uzivatel_cele_jmeno)}\n                            title=\"Odebrat uivatele\"\n                          >\n                            <Trash2 />\n                          </RemoveButton>\n                        </UserActions>\n                      )}\n                    </UserItem>\n                  );\n                })\n              )}\n            </UsersList>\n\n            <AddUserSection>\n              <AddUserRow>\n                <SearchableSelect\n                  value={selectedUser}\n                  onChange={(val) => setSelectedUser(val)}\n                  options={availableUsers.map(user => ({\n                    value: user.id,\n                    label: `${user.cele_jmeno} (${user.username})`\n                  }))}\n                  placeholder=\"Vyberte uivatele...\"\n                  disabled={loading}\n                  icon={<User size={16} />}\n                />\n                <AddButton\n                  onClick={handleAddUser}\n                  disabled={!selectedUser || loading}\n                >\n                  <Plus />\n                  Pidat\n                </AddButton>\n              </AddUserRow>\n\n              <CheckboxLabel>\n                <input\n                  type=\"checkbox\"\n                  checked={isMainUser}\n                  onChange={e => setIsMainUser(e.target.checked)}\n                  disabled={loading}\n                />\n                Zstupce (vchoz je hlavn)\n              </CheckboxLabel>\n            </AddUserSection>\n          </RightSection>\n        </ModalBody>\n\n        <ModalFooter>\n          <CancelButton onClick={onClose}>\n            <X />\n            Zruit\n          </CancelButton>\n          <SaveButton onClick={handleSave} disabled={saving}>\n            <Save />\n            {saving ? 'Ukldm...' : 'Uloit zmny'}\n          </SaveButton>\n        </ModalFooter>\n          </ModalContainer>\n        </ModalOverlay>,\n        document.body\n      )}\n\n      {/* Confirm Dialog for User Removal */}\n      {confirmRemove.show && ReactDOM.createPortal(\n        <>\n          <ConfirmOverlay onClick={handleRemoveUserCancel} />\n          <ConfirmDialog>\n            <ConfirmTitle>\n              <AlertTriangle size={24} />\n              Odebrat uivatele?\n            </ConfirmTitle>\n            <ConfirmMessage>\n              Opravdu chcete odebrat uivatele <strong>{confirmRemove.userName}</strong> z tto pokladny?\n            </ConfirmMessage>\n            <ConfirmButtons>\n              <ConfirmCancelButton onClick={handleRemoveUserCancel}>\n                Zruit\n              </ConfirmCancelButton>\n              <ConfirmDeleteButton onClick={handleRemoveUserConfirm}>\n                <Trash2 size={16} />\n                Odebrat\n              </ConfirmDeleteButton>\n            </ConfirmButtons>\n          </ConfirmDialog>\n        </>,\n        document.body\n      )}\n    </>\n  );\n};\n\nexport default EditCashboxDialog;\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { X, Trash2, AlertCircle, Check } from 'lucide-react';\nimport cashbookAPI from '../../services/cashbookService';\n\n// ============================================================================\n// ANIMACE\n// ============================================================================\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\n// ============================================================================\n// STYLED COMPONENTS\n// ============================================================================\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ModalContainer = styled.div`\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 480px;\n  overflow: hidden;\n  box-shadow:\n    0 25px 50px -12px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(255, 255, 255, 0.2);\n  animation: ${slideInUp} 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n`;\n\nconst ModalHeader = styled.div`\n  padding: 1.25rem 1.5rem 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #dc2626 0%, #ef4444 70%, #dc2626 100%);\n  color: white;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url('data:image/svg+xml,<svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><g fill=\"%23ffffff\" fill-opacity=\"0.05\"><circle cx=\"30\" cy=\"30\" r=\"1\"/></g></svg>');\n    pointer-events: none;\n  }\n`;\n\nconst ModalHeaderContent = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n  z-index: 1;\n`;\n\nconst HeaderLeft = styled.div`\n  flex: 1;\n`;\n\nconst ModalTitle = styled.h2`\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 700;\n  line-height: 1.2;\n`;\n\nconst ModalSubtitle = styled.p`\n  margin: 0.375rem 0 0 0;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.8125rem;\n  font-weight: 400;\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  cursor: pointer;\n  padding: 0.625rem;\n  border-radius: 10px;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ModalBody = styled.div`\n  padding: 1.5rem 1.5rem;\n  background: white;\n`;\n\nconst WarningBox = styled.div`\n  padding: 1rem;\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  border: 2px solid #fca5a5;\n  border-radius: 10px;\n  margin-bottom: 1.25rem;\n\n  .warning-header {\n    display: flex;\n    align-items: center;\n    gap: 0.625rem;\n    font-weight: 700;\n    color: #991b1b;\n    font-size: 0.9375rem;\n    margin-bottom: 0.625rem;\n  }\n\n  .warning-text {\n    font-size: 0.8125rem;\n    color: #7f1d1d;\n    line-height: 1.5;\n  }\n`;\n\nconst InfoBox = styled.div`\n  padding: 0.875rem 1rem;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  margin-bottom: 1.25rem;\n\n  .info-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.375rem 0;\n\n    &:not(:last-child) {\n      border-bottom: 1px solid #e2e8f0;\n    }\n  }\n\n  .info-label {\n    font-weight: 600;\n    color: #64748b;\n    font-size: 0.8125rem;\n  }\n\n  .info-value {\n    font-weight: 600;\n    color: #1e293b;\n    font-size: 0.8125rem;\n  }\n`;\n\nconst SuccessMessage = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #dcfce7;\n  border: 2px solid #86efac;\n  border-radius: 8px;\n  color: #166534;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  margin-bottom: 0.875rem;\n`;\n\nconst ErrorMessage = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #fee2e2;\n  border: 2px solid #fca5a5;\n  border-radius: 8px;\n  color: #991b1b;\n  font-weight: 500;\n  margin-bottom: 0.875rem;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-size: 0.8125rem;\n`;\n\nconst ModalFooter = styled.div`\n  padding: 1.25rem 1.5rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 0.875rem;\n`;\n\nconst Button = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\n  &.cancel {\n    background: white;\n    color: #64748b;\n    border: 2px solid #e2e8f0;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #cbd5e1;\n    }\n  }\n\n  &.danger {\n    background: linear-gradient(135deg, #dc2626, #b91c1c);\n    color: white;\n    border: 2px solid transparent;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(220, 38, 38, 0.3);\n    }\n\n    &:disabled {\n      background: #e2e8f0;\n      color: #64748b;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n  }\n\n  &.success {\n    background: linear-gradient(135deg, #10b981, #059669) !important;\n    color: white;\n    border: 2px solid transparent;\n    animation: successPulse 0.5s ease-out;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);\n    }\n  }\n\n  @keyframes successPulse {\n    0% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.05);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n`;\n\nconst LoadingSpinner = styled.div`\n  width: 18px;\n  height: 18px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top-color: white;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n`;\n\n// ============================================================================\n// KOMPONENTA\n// ============================================================================\n\nconst DeleteAssignmentDialog = ({\n  isOpen,\n  onClose,\n  assignment,\n  onSuccess\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isClosing, setIsClosing] = useState(false);\n\n  // Reset pi oteven\n  useEffect(() => {\n    if (isOpen) {\n      setSuccessMessage('');\n      setErrorMessage('');\n      setIsClosing(false);\n    }\n  }, [isOpen]);\n\n  // Esc key handler\n  useEffect(() => {\n    const handleEscKey = (e) => {\n      if (e.key === 'Escape' && isOpen && !loading) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscKey);\n      document.body.style.overflow = 'hidden';\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscKey);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, loading, onClose]);\n\n  const handleDelete = async () => {\n    setLoading(true);\n    setErrorMessage('');\n    setSuccessMessage('');\n\n    try {\n      const result = await cashbookAPI.deleteAssignment(assignment.id);\n\n      if (result.status === 'ok') {\n        setSuccessMessage(' Piazen bylo spn smazno');\n        setIsClosing(true);\n\n        // Zobrazit success stav 1.5 sekundy, pak zavt\n        setTimeout(() => {\n          onSuccess?.();\n          onClose();\n        }, 1500);\n      } else {\n        setErrorMessage(result.message || 'Nepodailo se smazat piazen');\n      }\n    } catch (error) {\n      console.error(' Chyba pi mazn piazen:', error);\n      setErrorMessage(error.message || 'Nepodailo se smazat piazen');\n    } finally {\n      if (!isClosing) {\n        setLoading(false);\n      }\n    }\n  };\n\n  if (!isOpen || !assignment) return null;\n\n  const fullName = [assignment.uzivatel_jmeno, assignment.uzivatel_prijmeni]\n    .filter(Boolean)\n    .join(' ');\n\n  return ReactDOM.createPortal(\n    <ModalOverlay onClick={!loading ? onClose : undefined}>\n      <ModalContainer onClick={(e) => e.stopPropagation()}>\n        <ModalHeader>\n          <ModalHeaderContent>\n            <HeaderLeft>\n              <ModalTitle>Smazat piazen pokladny?</ModalTitle>\n              <ModalSubtitle>\n                Tato akce je nevratn\n              </ModalSubtitle>\n            </HeaderLeft>\n            <CloseButton onClick={onClose} disabled={loading}>\n              <X size={20} />\n            </CloseButton>\n          </ModalHeaderContent>\n        </ModalHeader>\n\n        <ModalBody>\n          {successMessage && (\n            <SuccessMessage>\n              <Check size={20} />\n              {successMessage}\n            </SuccessMessage>\n          )}\n\n          {errorMessage && (\n            <ErrorMessage>\n              <AlertCircle size={20} />\n              <div>{errorMessage}</div>\n            </ErrorMessage>\n          )}\n\n          {!successMessage && (\n            <>\n              <WarningBox>\n                <div className=\"warning-header\">\n                  <AlertCircle size={20} />\n                  Opravdu chcete smazat toto piazen?\n                </div>\n                <div className=\"warning-text\">\n                  Uivatel ztrat pstup k pokladn a nebude moci vytvet nov doklady.\n                  Existujc doklady zstanou zachovny.\n                </div>\n              </WarningBox>\n\n              <InfoBox>\n                <div className=\"info-row\">\n                  <span className=\"info-label\">Uivatel:</span>\n                  <span className=\"info-value\">{fullName}</span>\n                </div>\n                <div className=\"info-row\">\n                  <span className=\"info-label\">Pokladna:</span>\n                  <span className=\"info-value\">{assignment.cislo_pokladny}</span>\n                </div>\n                <div className=\"info-row\">\n                  <span className=\"info-label\">VPD:</span>\n                  <span className=\"info-value\">{assignment.vpd_cislo || ''}</span>\n                </div>\n                <div className=\"info-row\">\n                  <span className=\"info-label\">PPD:</span>\n                  <span className=\"info-value\">{assignment.ppd_cislo || ''}</span>\n                </div>\n              </InfoBox>\n            </>\n          )}\n        </ModalBody>\n\n        <ModalFooter>\n          <Button\n            className=\"cancel\"\n            onClick={onClose}\n            disabled={loading}\n          >\n            <X size={16} />\n            Zruit\n          </Button>\n          <Button\n            className={successMessage ? 'success' : 'danger'}\n            onClick={handleDelete}\n            disabled={loading || isClosing}\n          >\n            {loading ? (\n              <>\n                <LoadingSpinner />\n                Mau...\n              </>\n            ) : successMessage ? (\n              <>\n                <Check size={16} />\n                Smazno!\n              </>\n            ) : (\n              <>\n                <Trash2 size={16} />\n                Ano, smazat\n              </>\n            )}\n          </Button>\n        </ModalFooter>\n      </ModalContainer>\n    </ModalOverlay>,\n    document.body\n  );\n};\n\nexport default DeleteAssignmentDialog;\n","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { X, Save, AlertTriangle, User, Calendar, Hash, Building, Plus, Trash2, ChevronDown, Search } from 'lucide-react';\nimport cashbookAPI from '../../services/cashbookService';\nimport { getUsekyList } from '../../services/apiv2Dictionaries';\nimport { fetchAllUsers } from '../../services/api2auth';\nimport { AuthContext } from '../../context/AuthContext';\nimport { ToastContext } from '../../context/ToastContext';\nimport DatePicker from '../DatePicker';\n\n// ============================================================================\n// ANIMACE\n// ============================================================================\n\nconst slideInUp = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n`;\n\n// ============================================================================\n// STYLED COMPONENTS\n// ============================================================================\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 2rem;\n  animation: fadeIn 0.15s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst ModalContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  width: 100%;\n  max-width: 1100px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow:\n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  animation: ${slideInUp} 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ModalHeader = styled.div`\n  padding: 1.5rem 2rem;\n  background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-shrink: 0;\n`;\n\nconst ModalTitle = styled.h2`\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  letter-spacing: -0.01em;\n\n  svg {\n    width: 20px;\n    height: 20px;\n    opacity: 0.9;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n`;\n\nconst ModalBody = styled.div`\n  display: grid;\n  grid-template-columns: 420px 1fr;\n  gap: 0;\n  flex: 1;\n  overflow: hidden;\n`;\n\nconst LeftSection = styled.div`\n  padding: 2rem;\n  background: #f8fafc;\n  border-right: 1px solid #e2e8f0;\n  overflow-y: auto;\n`;\n\nconst RightSection = styled.div`\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  gap: 1rem;\n`;\n\nconst SectionTitle = styled.h3`\n  margin: 0 0 1.25rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #64748b;\n  }\n`;\n\nconst FormGroup = styled.div`\n  margin-bottom: 1.25rem;\n`;\n\nconst FormRow = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1e293b;\n\n  ${props => props.required && `\n    &::after {\n      content: ' *';\n      color: #dc2626;\n    }\n  `}\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 0.625rem 0.875rem;\n  border: 1px solid ${props => props.hasError ? '#ef4444' : '#cbd5e1'};\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  background: white;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.hasError ? '#ef4444' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.hasError ? 'rgba(239, 68, 68, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n`;\n\nconst ErrorText = styled.div`\n  color: #dc2626;\n  font-size: 0.75rem;\n  margin-top: 0.375rem;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  svg {\n    width: 12px;\n    height: 12px;\n    flex-shrink: 0;\n  }\n`;\n\nconst HintText = styled.div`\n  color: #64748b;\n  font-size: 0.75rem;\n  margin-top: 0.375rem;\n`;\n\nconst Textarea = styled.textarea`\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  transition: all 0.15s;\n  font-family: inherit;\n  background: white;\n  resize: vertical;\n  min-height: 60px;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  }\n\n  &:disabled {\n    background: #f1f5f9;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n`;\n\nconst UsersList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  flex: 1;\n`;\n\nconst UserItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.875rem;\n  background: ${props => props.isMain ? '#ecfdf5' : 'white'};\n  border: 1px solid ${props => props.isMain ? '#10b981' : '#e2e8f0'};\n  border-radius: 8px;\n  transition: all 0.15s;\n\n  &:hover {\n    border-color: ${props => props.isMain ? '#059669' : '#cbd5e1'};\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  }\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex: 1;\n`;\n\nconst UserAvatar = styled.div`\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: ${props => props.isMain ?\n    'linear-gradient(135deg, #059669 0%, #10b981 100%)' :\n    'linear-gradient(135deg, #64748b 0%, #94a3b8 100%)'};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.875rem;\n  flex-shrink: 0;\n`;\n\nconst UserDetails = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst UserName = styled.div`\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1e293b;\n  margin-bottom: 0.125rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst MainBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  padding: 0.125rem 0.5rem;\n  background: #10b981;\n  color: white;\n  border-radius: 4px;\n  font-size: 0.625rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst UserDates = styled.div`\n  font-size: 0.75rem;\n  color: #64748b;\n`;\n\nconst UserActions = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  flex-shrink: 0;\n`;\n\nconst IconButton = styled.button`\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 6px;\n  background: ${props => props.danger ? '#fee2e2' : '#f1f5f9'};\n  color: ${props => props.danger ? '#dc2626' : '#64748b'};\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    background: ${props => props.danger ? '#fecaca' : '#e2e8f0'};\n    color: ${props => props.danger ? '#b91c1c' : '#475569'};\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst AddUserSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  padding: 1rem;\n  background: #f8fafc;\n  border: 1px dashed #cbd5e1;\n  border-radius: 8px;\n`;\n\nconst AddUserForm = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 0.75rem;\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 0.625rem 0.875rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst CheckboxGroup = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #475569;\n  cursor: pointer;\n\n  input[type=\"checkbox\"] {\n    width: 18px;\n    height: 18px;\n    border-radius: 4px;\n    border: 1px solid #cbd5e1;\n    cursor: pointer;\n  }\n`;\n\nconst Button = styled.button`\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  transition: all 0.15s;\n\n  &.primary {\n    background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n    color: white;\n\n    &:hover:not(:disabled) {\n      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n      transform: translateY(-1px);\n    }\n  }\n\n  &.secondary {\n    background: #f1f5f9;\n    color: #475569;\n\n    &:hover:not(:disabled) {\n      background: #e2e8f0;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ModalFooter = styled.div`\n  padding: 1.25rem 2rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n`;\n\nconst InfoMessage = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #64748b;\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: #94a3b8;\n  }\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 0.75rem;\n`;\n\nconst EmptyUsersState = styled.div`\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 0.75rem;\n    opacity: 0.5;\n  }\n\n  p {\n    margin: 0;\n    font-size: 0.875rem;\n  }\n`;\n\n// SearchableSelect styled components\nconst SearchableSelectWrapper = styled.div`\n  position: relative;\n  width: 100%;\n`;\n\nconst SearchableSelectButton = styled.div`\n  width: 100%;\n  padding: 0.625rem 2.25rem 0.625rem ${props => props.$hasIcon ? '2.5rem' : '0.75rem'};\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  background: ${props => props.disabled ? '#f1f5f9' : 'white'};\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n  color: ${props => props.$isEmpty ? '#94a3b8' : '#1e293b'};\n  font-weight: ${props => props.$isEmpty ? '400' : '600'};\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  transition: all 0.15s;\n\n  &:hover:not(:disabled) {\n    border-color: #cbd5e1;\n  }\n\n  ${props => props.$isOpen && `\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.08);\n  `}\n\n  .icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n  }\n`;\n\nconst SearchableDropdown = styled.div`\n  position: fixed;\n  max-height: 280px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 999999;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SearchInputWrapper = styled.div`\n  position: relative;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n\n  svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #94a3b8;\n    pointer-events: none;\n  }\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 0.75rem 2.5rem 0.75rem 2.5rem;\n  border: none;\n  font-size: 0.875rem;\n  outline: none;\n\n  &::placeholder {\n    color: #94a3b8;\n    font-weight: 400;\n  }\n\n  &:focus {\n    background: #f8fafc;\n  }\n`;\n\nconst SearchClearButton = styled.button`\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s;\n\n  &:hover {\n    color: #475569;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 2.25rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  color: #94a3b8;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s;\n\n  &:hover {\n    color: #64748b;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nconst DropdownOptions = styled.div`\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst DropdownOption = styled.div`\n  padding: 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.15s;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n\n  ${props => props.$selected && `\n    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n    color: #1e40af;\n    font-weight: 600;\n  `}\n`;\n\nconst NoResults = styled.div`\n  padding: 1rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.875rem;\n`;\n\nconst UsekDisplay = styled.div`\n  margin-top: 0.625rem;\n  padding: 0.5rem 0.75rem;\n  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n  border: 1px solid #86efac;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n`;\n\nconst UsekBadge = styled.span`\n  padding: 0.25rem 0.5rem;\n  background: #059669;\n  color: white;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  letter-spacing: 0.025em;\n`;\n\nconst UsekName = styled.span`\n  color: #065f46;\n  font-size: 0.875rem;\n  font-weight: 500;\n`;\n\n// SearchableSelect Component\nconst SearchableSelect = ({ value, onChange, options, placeholder, disabled, icon, searchPlaceholder = \"Hledat...\" }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0, width: 0 });\n  const wrapperRef = React.useRef(null);\n  const buttonRef = React.useRef(null);\n  const dropdownRef = React.useRef(null);\n  const searchInputRef = React.useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (\n        wrapperRef.current &&\n        !wrapperRef.current.contains(event.target) &&\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target)\n      ) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  useEffect(() => {\n    if (isOpen && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (isOpen && buttonRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      setDropdownPosition({\n        top: rect.bottom + 4,\n        left: rect.left,\n        width: rect.width\n      });\n    }\n  }, [isOpen]);\n\n  const filteredOptions = options.filter(opt =>\n    opt.label.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const selectedOption = options.find(opt => opt.value === value);\n\n  const handleSelect = (optionValue) => {\n    onChange(optionValue);\n    setIsOpen(false);\n    setSearchTerm('');\n  };\n\n  const handleButtonClick = () => {\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n\n  const handleClear = (e) => {\n    e.stopPropagation();\n    onChange('');\n  };\n\n  return (\n    <SearchableSelectWrapper ref={wrapperRef}>\n      <SearchableSelectButton\n        ref={buttonRef}\n        onClick={handleButtonClick}\n        disabled={disabled}\n        $isEmpty={!selectedOption}\n        $isOpen={isOpen}\n        $hasIcon={!!icon}\n      >\n        {icon && <span className=\"icon\">{icon}</span>}\n        <span style={{ flex: 1 }}>{selectedOption ? selectedOption.label : placeholder}</span>\n        {selectedOption && !disabled && (\n          <ClearButton onClick={handleClear}>\n            <X size={14} />\n          </ClearButton>\n        )}\n        <ChevronDown size={16} style={{ color: '#94a3b8', transition: 'transform 0.2s', transform: isOpen ? 'rotate(180deg)' : 'none' }} />\n      </SearchableSelectButton>\n\n      {isOpen && ReactDOM.createPortal(\n        <SearchableDropdown\n          ref={dropdownRef}\n          style={{\n            position: 'fixed',\n            top: `${dropdownPosition.top}px`,\n            left: `${dropdownPosition.left}px`,\n            width: `${dropdownPosition.width}px`\n          }}\n        >\n          <SearchInputWrapper>\n            <Search size={16} />\n            <SearchInput\n              ref={searchInputRef}\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder={searchPlaceholder}\n            />\n            {searchTerm && (\n              <SearchClearButton onClick={() => setSearchTerm('')}>\n                <X size={14} />\n              </SearchClearButton>\n            )}\n          </SearchInputWrapper>\n          <DropdownOptions>\n            {filteredOptions.length > 0 ? (\n              filteredOptions.map((option) => (\n                <DropdownOption\n                  key={option.value}\n                  $selected={option.value === value}\n                  onClick={() => handleSelect(option.value)}\n                >\n                  {option.label}\n                </DropdownOption>\n              ))\n            ) : (\n              <NoResults>dn vsledky</NoResults>\n            )}\n          </DropdownOptions>\n        </SearchableDropdown>,\n        document.body\n      )}\n    </SearchableSelectWrapper>\n  );\n};\n\n// ============================================================================\n// KOMPONENTA\n// ============================================================================\n\nconst CreateCashboxDialog = ({ isOpen, onClose, onSuccess }) => {\n  const { userDetail, token, user } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n\n  // Stav formule\n  const [formData, setFormData] = useState({\n    cislo_pokladny: '',\n    nazev: '',\n    kod_pracoviste: '',\n    nazev_pracoviste: '',\n    ciselna_rada_vpd: '',\n    vpd_od_cislo: '1',\n    ciselna_rada_ppd: '',\n    ppd_od_cislo: '1',\n    poznamka: ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [uzivatele, setUzivatele] = useState([]);\n  const [useky, setUseky] = useState([]);\n  const [selectedUsek, setSelectedUsek] = useState(null);\n  const [loadingData, setLoadingData] = useState(true);\n\n  // Piazen uivatel\n  const [assignedUsers, setAssignedUsers] = useState([]);\n  const [newUserForm, setNewUserForm] = useState({\n    uzivatel_id: '',\n    je_zastupce: false,\n    platne_od: new Date().toISOString().split('T')[0],\n    platne_do: ''\n  });\n\n  // Nast data pi oteven\n  useEffect(() => {\n    if (isOpen) {\n      loadInitialData();\n    } else {\n      // Reset pi zaven\n      setFormData({\n        cislo_pokladny: '',\n        nazev: '',\n        kod_pracoviste: '',\n        nazev_pracoviste: '',\n        ciselna_rada_vpd: '',\n        vpd_od_cislo: '1',\n        ciselna_rada_ppd: '',\n        ppd_od_cislo: '1',\n        poznamka: ''\n      });\n      setErrors({});\n      setSelectedUsek(null);\n      setAssignedUsers([]);\n      setNewUserForm({\n        uzivatel_id: '',\n        je_zastupce: false,\n        platne_od: new Date().toISOString().split('T')[0],\n        platne_do: ''\n      });\n    }\n  }, [isOpen]);\n\n  const loadInitialData = async () => {\n    if (!token || !user?.username) return;\n\n    setLoadingData(true);\n    try {\n      const [usersResult, usekyResult] = await Promise.all([\n        fetchAllUsers({\n          token: token,\n          username: user.username\n        }),\n        getUsekyList({\n          token: token,\n          username: user.username,\n          show_inactive: false\n        })\n      ]);\n\n      setUzivatele(usersResult || []);\n      setUseky(usekyResult || []);\n    } catch (error) {\n      showToast('Chyba pi natn dat', 'error');\n    } finally {\n      setLoadingData(false);\n    }\n  };\n\n  const handleChange = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: null }));\n    }\n  };\n\n  const handleUsekChange = (usekId) => {\n    if (!usekId) {\n      setSelectedUsek(null);\n      setFormData(prev => ({\n        ...prev,\n        kod_pracoviste: '',\n        nazev_pracoviste: ''\n      }));\n      return;\n    }\n\n    const usek = useky.find(u => String(u.id) === String(usekId));\n    setSelectedUsek(usek || null);\n\n    if (usek) {\n      setFormData(prev => ({\n        ...prev,\n        kod_pracoviste: usek.usek_zkr || '',\n        nazev_pracoviste: usek.usek_nazev || ''\n      }));\n    }\n  };\n\n  // Pidn uivatele\n  const handleAddUser = () => {\n    if (!newUserForm.uzivatel_id) {\n      showToast('Vyberte uivatele', 'error');\n      return;\n    }\n\n    const userId = String(newUserForm.uzivatel_id);\n    const user = uzivatele.find(u => String(u.id) === userId);\n\n    if (!user) {\n      showToast('Uivatel nenalezen', 'error');\n      return;\n    }\n\n    // Kontrola duplikace\n    if (assignedUsers.some(u => String(u.uzivatel_id) === userId)) {\n      showToast('Tento uivatel u je piazen', 'error');\n      return;\n    }\n\n    // Pokud pidvme hlavnho (ne zstupce), odebrat hlavn status ostatnm\n    const jeHlavni = !newUserForm.je_zastupce;\n    if (jeHlavni) {\n      setAssignedUsers(prev => prev.map(u => ({ ...u, je_hlavni: false })));\n    }\n\n    // Jmno me bt v rznch strukturch: prijmeni+jmeno, nebo cele_jmeno, nebo username\n    const userName = user.cele_jmeno ||\n                     `${user.prijmeni || ''} ${user.jmeno || ''}`.trim() ||\n                     user.username ||\n                     'Uivatel';\n\n    const newAssignment = {\n      uzivatel_id: parseInt(userId),\n      uzivatel_jmeno: userName,\n      je_hlavni: jeHlavni,\n      platne_od: newUserForm.platne_od,\n      platne_do: newUserForm.platne_do || null\n    };\n\n    setAssignedUsers(prev => [...prev, newAssignment]);\n\n    // Reset formule\n    setNewUserForm({\n      uzivatel_id: '',\n      je_zastupce: false,\n      platne_od: new Date().toISOString().split('T')[0],\n      platne_do: ''\n    });\n  };\n\n  const handleRemoveUser = (uzivatel_id) => {\n    setAssignedUsers(prev => prev.filter(u => u.uzivatel_id !== uzivatel_id));\n  };\n\n  const handleSetMainUser = (uzivatel_id) => {\n    setAssignedUsers(prev => prev.map(u => ({\n      ...u,\n      je_hlavni: u.uzivatel_id === uzivatel_id\n    })));\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.cislo_pokladny || formData.cislo_pokladny.trim() === '') {\n      newErrors.cislo_pokladny = 'slo pokladny je povinn';\n    }\n\n    if (!formData.nazev || formData.nazev.trim() === '') {\n      newErrors.nazev = 'Nzev je povinn';\n    }\n\n    if (!formData.ciselna_rada_vpd || formData.ciselna_rada_vpd.trim() === '') {\n      newErrors.ciselna_rada_vpd = 'seln ada VPD je povinn';\n    }\n\n    if (!formData.vpd_od_cislo || parseInt(formData.vpd_od_cislo) < 1) {\n      newErrors.vpd_od_cislo = 'VPD od sla mus bt >= 1';\n    }\n\n    if (!formData.ciselna_rada_ppd || formData.ciselna_rada_ppd.trim() === '') {\n      newErrors.ciselna_rada_ppd = 'seln ada PPD je povinn';\n    }\n\n    if (!formData.ppd_od_cislo || parseInt(formData.ppd_od_cislo) < 1) {\n      newErrors.ppd_od_cislo = 'PPD od sla mus bt >= 1';\n    }\n\n    if (assignedUsers.length === 0) {\n      newErrors.users = 'Muste piadit alespo jednoho uivatele';\n      showToast('Pidejte alespo jednoho uivatele', 'error');\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSave = async () => {\n    if (!validateForm()) return;\n\n    setLoading(true);\n    try {\n      // 1. Vytvoen pokladny\n      const cashboxData = {\n        cislo_pokladny: formData.cislo_pokladny,\n        nazev: formData.nazev,\n        kod_pracoviste: formData.kod_pracoviste || null,\n        nazev_pracoviste: formData.nazev_pracoviste || null,\n        ciselna_rada_vpd: formData.ciselna_rada_vpd,\n        vpd_od_cislo: parseInt(formData.vpd_od_cislo),\n        ciselna_rada_ppd: formData.ciselna_rada_ppd,\n        ppd_od_cislo: parseInt(formData.ppd_od_cislo),\n        poznamka: formData.poznamka || null\n      };\n\n      const createResult = await cashbookAPI.createCashbox(cashboxData);\n\n      if (createResult.status !== 'ok') {\n        throw new Error(createResult.message || 'Chyba pi vytven pokladny');\n      }\n\n      const pokladnaId = createResult.data?.pokladna_id;\n      if (!pokladnaId) {\n        throw new Error('Backend nevrtil ID nov pokladny');\n      }\n\n      // 2. Piazen uivatel\n      for (const user of assignedUsers) {\n        const assignmentData = {\n          pokladna_id: pokladnaId,\n          uzivatel_id: user.uzivatel_id,\n          je_hlavni: user.je_hlavni ? 1 : 0,\n          platne_od: user.platne_od,\n          platne_do: user.platne_do || null,\n          poznamka: null\n        };\n\n        await cashbookAPI.assignUserToCashbox(assignmentData);\n      }\n\n      showToast(' Pokladna byla spn vytvoena', 'success');\n      onSuccess?.();\n      onClose();\n\n    } catch (error) {\n      showToast(error.message || 'Chyba pi vytven pokladny', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const availableUsers = uzivatele.filter(\n    u => !assignedUsers.some(au => au.uzivatel_id === u.id)\n  );\n\n  return ReactDOM.createPortal(\n    <ModalOverlay onClick={onClose}>\n      <ModalContainer onClick={(e) => e.stopPropagation()}>\n        <ModalHeader>\n          <ModalTitle>\n            <Plus size={20} />\n            Vytvoit novou pokladnu\n          </ModalTitle>\n          <CloseButton onClick={onClose}>\n            <X size={18} />\n          </CloseButton>\n        </ModalHeader>\n\n        <ModalBody>\n          {/* LEV SEKCE - Informace o pokladn */}\n          <LeftSection>\n            <SectionTitle>\n              <Building size={16} />\n              Zkladn informace\n            </SectionTitle>\n\n            <FormGroup>\n              <Label required>slo pokladny</Label>\n              <Input\n                type=\"text\"\n                value={formData.cislo_pokladny}\n                onChange={(e) => handleChange('cislo_pokladny', e.target.value)}\n                placeholder=\"100\"\n                hasError={!!errors.cislo_pokladny}\n                disabled={loading}\n              />\n              {errors.cislo_pokladny && (\n                <ErrorText>\n                  <AlertTriangle size={12} />\n                  {errors.cislo_pokladny}\n                </ErrorText>\n              )}\n            </FormGroup>\n\n            <FormGroup>\n              <Label required>Nzev pokladny</Label>\n              <Input\n                type=\"text\"\n                value={formData.nazev}\n                onChange={(e) => handleChange('nazev', e.target.value)}\n                placeholder=\"Hlavn pokladna\"\n                hasError={!!errors.nazev}\n                disabled={loading}\n              />\n              {errors.nazev && (\n                <ErrorText>\n                  <AlertTriangle size={12} />\n                  {errors.nazev}\n                </ErrorText>\n              )}\n            </FormGroup>\n\n            <FormGroup>\n              <Label>\n                <Building size={14} style={{ display: 'inline', marginRight: '0.25rem' }} />\n                sek (zkratka)\n              </Label>\n              <SearchableSelect\n                value={selectedUsek?.id || ''}\n                onChange={(val) => handleUsekChange(val)}\n                options={useky.map(usek => ({\n                  value: usek.id,\n                  label: `${usek.usek_zkr} - ${usek.usek_nazev}`\n                }))}\n                placeholder=\"Vyberte sek...\"\n                searchPlaceholder=\"Hledat sek...\"\n                disabled={loadingData}\n                icon={<Building size={16} />}\n              />\n\n              {selectedUsek && (\n                <UsekDisplay>\n                  <UsekBadge>{selectedUsek.usek_zkr}</UsekBadge>\n                  <UsekName>{selectedUsek.usek_nazev}</UsekName>\n                </UsekDisplay>\n              )}\n            </FormGroup>\n\n            <SectionTitle style={{ marginTop: '2rem' }}>\n              <Hash size={16} />\n              seln ady doklad\n            </SectionTitle>\n\n            <FormRow>\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>\n                  <Hash size={14} style={{ display: 'inline', marginRight: '0.25rem' }} />\n                  VPD prefix *\n                </Label>\n                <Input\n                  type=\"text\"\n                  value={formData.ciselna_rada_vpd}\n                  onChange={(e) => handleChange('ciselna_rada_vpd', e.target.value)}\n                  placeholder=\"599\"\n                  hasError={!!errors.ciselna_rada_vpd}\n                  disabled={loading}\n                />\n              </FormGroup>\n\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>VPD od sla</Label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.vpd_od_cislo}\n                  onChange={(e) => handleChange('vpd_od_cislo', e.target.value)}\n                  placeholder=\"1\"\n                  hasError={!!errors.vpd_od_cislo}\n                  disabled={loading}\n                />\n              </FormGroup>\n            </FormRow>\n\n            <FormRow>\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>\n                  <Hash size={14} style={{ display: 'inline', marginRight: '0.25rem' }} />\n                  PPD prefix *\n                </Label>\n                <Input\n                  type=\"text\"\n                  value={formData.ciselna_rada_ppd}\n                  onChange={(e) => handleChange('ciselna_rada_ppd', e.target.value)}\n                  placeholder=\"499\"\n                  hasError={!!errors.ciselna_rada_ppd}\n                  disabled={loading}\n                />\n              </FormGroup>\n\n              <FormGroup style={{ marginBottom: 0 }}>\n                <Label>PPD od sla</Label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.ppd_od_cislo}\n                  onChange={(e) => handleChange('ppd_od_cislo', e.target.value)}\n                  placeholder=\"1\"\n                  hasError={!!errors.ppd_od_cislo}\n                  disabled={loading}\n                />\n              </FormGroup>\n            </FormRow>\n\n            <FormGroup>\n              <Label>Poznmka</Label>\n              <Textarea\n                value={formData.poznamka}\n                onChange={(e) => handleChange('poznamka', e.target.value)}\n                placeholder=\"Voliteln poznmka...\"\n                rows={2}\n                disabled={loading}\n              />\n            </FormGroup>\n          </LeftSection>\n\n          {/* PRAV SEKCE - Piazen uivatel */}\n          <RightSection>\n            <SectionTitle>\n              <User size={16} />\n              Piazen uivatel ({assignedUsers.length})\n            </SectionTitle>\n\n            {/* Seznam piazench uivatel */}\n            <UsersList>\n              {assignedUsers.length === 0 ? (\n                <EmptyUsersState>\n                  <User size={48} />\n                  <p>Zatm nejsou piazeni dn uivatel</p>\n                </EmptyUsersState>\n              ) : (\n                assignedUsers.map(user => (\n                  <UserItem key={user.uzivatel_id} isMain={user.je_hlavni}>\n                    <UserInfo>\n                      <UserAvatar isMain={user.je_hlavni}>\n                        {user.uzivatel_jmeno.substring(0, 2).toUpperCase()}\n                      </UserAvatar>\n                      <UserDetails>\n                        <UserName>\n                          {user.uzivatel_jmeno}\n                          {user.je_hlavni && <MainBadge>Hlavn</MainBadge>}\n                        </UserName>\n                        <UserDates>\n                          {user.platne_od && `Od: ${user.platne_od}`}\n                          {user.platne_do && ` | Do: ${user.platne_do}`}\n                        </UserDates>\n                      </UserDetails>\n                    </UserInfo>\n                    <UserActions>\n                      {!user.je_hlavni && (\n                        <IconButton\n                          onClick={() => handleSetMainUser(user.uzivatel_id)}\n                          title=\"Nastavit jako hlavnho\"\n                        >\n                          <User size={16} />\n                        </IconButton>\n                      )}\n                      <IconButton\n                        danger\n                        onClick={() => handleRemoveUser(user.uzivatel_id)}\n                        title=\"Odebrat\"\n                      >\n                        <Trash2 size={16} />\n                      </IconButton>\n                    </UserActions>\n                  </UserItem>\n                ))\n              )}\n            </UsersList>\n\n            {/* Formul pro pidn uivatele */}\n            <AddUserSection>\n              <SectionTitle style={{ margin: 0 }}>\n                <Plus size={16} />\n                Pidat uivatele\n              </SectionTitle>\n\n              <FormGroup>\n                <Label>Uivatel</Label>\n                <SearchableSelect\n                  value={newUserForm.uzivatel_id}\n                  onChange={(val) => setNewUserForm(prev => ({ ...prev, uzivatel_id: val }))}\n                  options={availableUsers.map(user => ({\n                    value: user.id,\n                    label: user.cele_jmeno || `${user.prijmeni || ''} ${user.jmeno || ''}`.trim() || user.username\n                  }))}\n                  placeholder=\"Vyberte uivatele...\"\n                  searchPlaceholder=\"Hledat uivatele...\"\n                  disabled={loading || loadingData}\n                  icon={<User size={16} />}\n                />\n              </FormGroup>\n\n              <AddUserForm>\n                <div>\n                  <Label>Platn od</Label>\n                  <DatePicker\n                    value={newUserForm.platne_od}\n                    onChange={(newValue) => setNewUserForm(prev => ({ ...prev, platne_od: newValue }))}\n                    placeholder=\"Vyberte datum\"\n                    disabled={loading}\n                  />\n                </div>\n\n                <div>\n                  <Label>Platn do</Label>\n                  <DatePicker\n                    value={newUserForm.platne_do}\n                    onChange={(newValue) => setNewUserForm(prev => ({ ...prev, platne_do: newValue }))}\n                    placeholder=\"Nevyplnit = navdy\"\n                    disabled={loading}\n                  />\n                </div>\n              </AddUserForm>\n\n              <CheckboxGroup style={{ marginBottom: '1rem' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={newUserForm.je_zastupce}\n                  onChange={(e) => setNewUserForm(prev => ({ ...prev, je_zastupce: e.target.checked }))}\n                  disabled={loading}\n                />\n                Zstupce (pokud nezakrtnuto, bude hlavn pokladnk)\n              </CheckboxGroup>\n\n              <Button\n                className=\"secondary\"\n                onClick={handleAddUser}\n                disabled={loading || !newUserForm.uzivatel_id}\n              >\n                <Plus size={16} />\n                Pidat uivatele\n              </Button>\n            </AddUserSection>\n          </RightSection>\n        </ModalBody>\n\n        <ModalFooter>\n          <InfoMessage>\n            <AlertTriangle size={16} />\n            Vechna pole oznaen * jsou povinn\n          </InfoMessage>\n          <ButtonGroup>\n            <Button className=\"secondary\" onClick={onClose} disabled={loading}>\n              <X size={16} />\n              Zruit\n            </Button>\n            <Button className=\"primary\" onClick={handleSave} disabled={loading || loadingData}>\n              <Save size={16} />\n              {loading ? 'Vytvm...' : 'Vytvoit pokladnu'}\n            </Button>\n          </ButtonGroup>\n        </ModalFooter>\n      </ModalContainer>\n    </ModalOverlay>,\n    document.body\n  );\n};\n\nexport default CreateCashboxDialog;\n","import React, { useState } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faExclamationTriangle,\n  faCalculator,\n  faTimes,\n  faSpinner\n} from '@fortawesome/free-solid-svg-icons';\n\nconst ForceRenumberDialog = ({ isOpen, onClose, assignment, onConfirm }) => {\n  const [year, setYear] = useState(new Date().getFullYear());\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isCompleted, setIsCompleted] = useState(false);\n  const [error, setError] = useState(null);\n  const [progress, setProgress] = useState({ current: 0, total: 0, phase: '' });\n  const [resultData, setResultData] = useState(null); //  Uloen vsledku pepotu\n\n  const handleConfirm = async (e) => {\n    console.log(' KLIKNUTO NA PROVST PEPOET - handleConfirm() voln');\n\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log(' Event.preventDefault() a stopPropagation() zavolny');\n    }\n\n    //  Reset vech stav (vetn pedchoz chyby)\n    setIsProcessing(true);\n    setIsCompleted(false);\n    setError(null);\n    setResultData(null);\n    setProgress({ current: 0, total: 0, phase: 'Inicializace...' });\n\n    try {\n      // Simulace progressu (backend zatm nevrac progress)\n      setProgress({ current: 1, total: 4, phase: 'Natn dat pokladny...' });\n\n      //  PO ZMN (commit 945cc8e): Pouv se pokladna_id msto assignment.id\n      const pokladnaId = assignment.pokladna_id;\n      console.log(' Force pepoet START:', { pokladnaId, year });\n\n      const result = await onConfirm(pokladnaId, year);\n\n      console.log(' Force pepoet RESPONSE:', result);\n      console.log(' FULL RESPONSE (vetn debug):', JSON.stringify(result, null, 2));\n\n      if (result && result.status === 'ok') {\n        // spch - zobraz finln progress\n        setProgress({\n          current: 4,\n          total: 4,\n          phase: `Hotovo! Peslovno ${result.data.total_renumbered} poloek`\n        });\n\n        //  Ulo CEL result (vetn debug) pro zobrazen\n        setResultData({\n          ...result.data,\n          debug: result.debug || null  // Pidej debug data pokud existuj\n        });\n\n        // Nastav completed state - dialog zstane oteven\n        setIsCompleted(true);\n        setIsProcessing(false);\n      } else {\n        // Backend vrtil error nebo neexistujc response\n        const errorMsg = result?.message || 'Backend endpoint /cashbook-force-renumber jet nen implementovn';\n        console.error(' Force pepoet ERROR:', errorMsg, result);\n        setError(errorMsg);\n        setProgress({ current: 0, total: 0, phase: '' });\n        setIsProcessing(false);\n      }\n    } catch (err) {\n      console.error(' Force pepoet EXCEPTION:', err);\n      console.error('Error details:', {\n        message: err.message,\n        response: err.response?.data,\n        status: err.response?.status\n      });\n\n      let errorMsg = 'Chyba pi komunikaci se serverem';\n\n      if (err.response?.status === 404) {\n        errorMsg = 'Backend endpoint /cashbook-force-renumber jet nen implementovn (404)';\n      } else if (err.response?.data?.message) {\n        errorMsg = err.response.data.message;\n      } else if (err.message) {\n        errorMsg = err.message;\n      }\n\n      setError(errorMsg);\n      setProgress({ current: 0, total: 0, phase: '' });\n      setIsProcessing(false);\n    }\n  };\n\n  const handleClose = () => {\n    console.log(' ZAVRM DIALOG - handleClose() voln');\n    // Reset state pi zavrn\n    setIsProcessing(false);\n    setIsCompleted(false);\n    setError(null);\n    setProgress({ current: 0, total: 0, phase: '' });\n    setResultData(null);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <Overlay>\n      <DialogBox onClick={(e) => e.stopPropagation()}>\n        <DialogHeader>\n          <WarningIconLarge>\n            <FontAwesomeIcon icon={faExclamationTriangle} />\n          </WarningIconLarge>\n          <h2> FORCE PEPOET DOKLAD</h2>\n          <CloseButton onClick={handleClose} disabled={isProcessing}>\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </DialogHeader>\n\n        <DialogContent>\n          {/*  LEV SLOUPEC - Varovn a popis */}\n          <LeftColumn>\n            <WarningBox>\n              <h3> KRITICK OPERACE</h3>\n              <p>\n                Tato funkce <strong>pesluje vechny doklady</strong> v danm roce\n                vetn <strong>uzavench a zamench msc</strong>!\n              </p>\n            </WarningBox>\n\n            <InfoSection>\n              <h4> Pokladna:</h4>\n              <InfoGrid>\n                <InfoRow>\n                  <InfoLabel>slo:</InfoLabel>\n                  <InfoValue>{assignment.cislo_pokladny}</InfoValue>\n                </InfoRow>\n                <InfoRow>\n                  <InfoLabel>VPD ada:</InfoLabel>\n                  <InfoValue>\n                    {assignment.ciselna_rada_vpd} <small>(od {assignment.vpd_od_cislo || 1})</small>\n                  </InfoValue>\n                </InfoRow>\n                <InfoRow>\n                  <InfoLabel>PPD ada:</InfoLabel>\n                  <InfoValue>\n                    {assignment.ciselna_rada_ppd} <small>(od {assignment.ppd_od_cislo || 1})</small>\n                  </InfoValue>\n                </InfoRow>\n              </InfoGrid>\n            </InfoSection>\n\n            <RisksList>\n              <h4> Dsledky:</h4>\n              <ul>\n                <li> Zmn se <strong>vechna sla doklad</strong> v roce</li>\n                <li> Ignoruje stav msc (aktivn, uzaven, zamen)</li>\n                <li> PDF dokumenty budou mt <strong>jin sla ne DB</strong></li>\n                <li> Operaci <strong>nelze vrtit zpt</strong></li>\n              </ul>\n            </RisksList>\n          </LeftColumn>\n\n          {/*  PRAV SLOUPEC - Rok, Progress a vsledky */}\n          <RightColumn>\n            {/*  Input pro rok - PESUNUT DO PRAVHO SLOUPCE */}\n            <YearInput>\n              <label> Rok pro pepoet:</label>\n              <input\n                type=\"number\"\n                min=\"2020\"\n                max=\"2030\"\n                value={year}\n                onChange={(e) => setYear(parseInt(e.target.value))}\n                disabled={isProcessing || isCompleted}\n              />\n            </YearInput>\n            {(isProcessing || isCompleted) && progress.phase && (\n              <ProgressBox $completed={isCompleted}>\n                <ProgressLabel $completed={isCompleted}>\n                  {isCompleted ? (\n                    <span style={{ fontSize: '1.5rem' }}></span>\n                  ) : (\n                    <FontAwesomeIcon icon={faSpinner} spin />\n                  )}\n                  {progress.phase}\n                </ProgressLabel>\n                {progress.total > 0 && (\n                  <ProgressBarContainer>\n                    <ProgressBarFill\n                      $completed={isCompleted}\n                      style={{ width: `${(progress.current / progress.total) * 100}%` }}\n                    />\n                  </ProgressBarContainer>\n                )}\n              </ProgressBox>\n            )}\n\n            {isCompleted && resultData && (\n              <>\n                <ResultBox>\n                  <ResultHeader>\n                    <span></span>\n                    <h3>Pepoet dokonen!</h3>\n                  </ResultHeader>\n                  <ResultGrid>\n                    <ResultItem $highlight>\n                      <ResultLabel>Celkem peslovno:</ResultLabel>\n                      <ResultValue>{resultData.total_renumbered} poloek</ResultValue>\n                    </ResultItem>\n                    <ResultItem>\n                      <ResultLabel>Rok:</ResultLabel>\n                      <ResultValue>{resultData.year}</ResultValue>\n                    </ResultItem>\n                    <ResultItem>\n                      <ResultLabel> Vdaje (VPD):</ResultLabel>\n                      <ResultValue>{resultData.vpd_renumbered} poloek</ResultValue>\n                    </ResultItem>\n                    <ResultItem>\n                      <ResultLabel> Pjmy (PPD):</ResultLabel>\n                      <ResultValue>{resultData.ppd_renumbered} poloek</ResultValue>\n                    </ResultItem>\n                  </ResultGrid>\n                </ResultBox>\n\n                {/*  ZOBRAZEN DEBUG INFORMAC Z BE */}\n                {resultData.debug && (\n                  <DebugBox>\n                    <DebugHeader>\n                       Debug informace z backendu\n                    </DebugHeader>\n                    <DebugContent>\n                      <pre>{JSON.stringify(resultData.debug, null, 2)}</pre>\n                    </DebugContent>\n                  </DebugBox>\n                )}\n              </>\n            )}\n\n            {error && (\n              <ErrorBox>\n                <FontAwesomeIcon icon={faExclamationTriangle} />\n                {error}\n              </ErrorBox>\n            )}\n\n            {/*  Placeholder pokud jet nic neb */}\n            {!isProcessing && !isCompleted && !error && (\n              <PlaceholderBox>\n                <PlaceholderIcon>\n                  <FontAwesomeIcon icon={faCalculator} />\n                </PlaceholderIcon>\n                <p>Vsledky pepotu se zobraz zde po sputn operace.</p>\n              </PlaceholderBox>\n            )}\n          </RightColumn>\n        </DialogContent>\n\n        <DialogFooter>\n          {/*  Tlatko Zruit - viditeln vdy kdy nen dokoneno spn */}\n          {!isCompleted && (\n            <CancelButton onClick={handleClose} disabled={isProcessing} type=\"button\">\n              {error ? 'Zavt' : 'Zruit'}\n            </CancelButton>\n          )}\n\n          {/*  spch: Tlatko \"Hotovo\" */}\n          {isCompleted ? (\n            <ConfirmButton\n              onClick={handleClose}\n              $variant=\"success\"\n              type=\"button\"\n            >\n              <FontAwesomeIcon icon={faCalculator} />\n              Hotovo\n            </ConfirmButton>\n          ) : (\n            /*  V procesu nebo pipraveno: Tlatko \"Provst pepoet\" / \"Zkusit znovu\" */\n            <ConfirmButton\n              onClick={handleConfirm}\n              disabled={isProcessing}\n              type=\"button\"\n            >\n              {isProcessing ? (\n                <>\n                  <FontAwesomeIcon icon={faSpinner} spin />\n                  Pepotvm...\n                </>\n              ) : error ? (\n                <>\n                  <FontAwesomeIcon icon={faCalculator} />\n                  Zkusit znovu\n                </>\n              ) : (\n                <>\n                  <FontAwesomeIcon icon={faCalculator} />\n                  Provst pepoet\n                </>\n              )}\n            </ConfirmButton>\n          )}\n        </DialogFooter>\n      </DialogBox>\n    </Overlay>\n  );\n};\n\n// ============================================================================\n// STYLED COMPONENTS\n// ============================================================================\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst DialogBox = styled.div`\n  background: white;\n  border-radius: 16px;\n  width: 90%;\n  max-width: 1000px;  /*  ir dialog */\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: slideUp 0.3s ease-out;\n\n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n\nconst DialogHeader = styled.div`\n  background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);\n  color: white;\n  padding: 1.5rem;\n  border-radius: 16px 16px 0 0;\n  position: relative;\n  text-align: center;\n\n  h2 {\n    margin: 0.5rem 0 0 0;\n    font-size: 1.5rem;\n  }\n`;\n\nconst WarningIconLarge = styled.div`\n  font-size: 3rem;\n  color: #fbbf24;\n  animation: pulse 2s ease-in-out infinite;\n\n  @keyframes pulse {\n    0%, 100% {\n      transform: scale(1);\n      filter: drop-shadow(0 0 0 rgba(251, 191, 36, 0));\n    }\n    50% {\n      transform: scale(1.1);\n      filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.5));\n    }\n  }\n`;\n\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  font-size: 1.2rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: background 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst DialogContent = styled.div`\n  padding: 2rem;\n  display: grid;\n  grid-template-columns: 1fr 1fr;  /*  Dva sloupce */\n  gap: 2rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;  /* Na mobilu jeden sloupec */\n  }\n`;\n\nconst LeftColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n\nconst RightColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n\nconst WarningBox = styled.div`\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  border: 2px solid #dc2626;\n  border-radius: 12px;\n  padding: 1rem 1.25rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.1);\n\n  h3 {\n    color: #991b1b;\n    margin: 0 0 0.5rem 0;\n    font-size: 1.1rem;\n  }\n\n  p {\n    margin: 0;\n    color: #7f1d1d;\n    line-height: 1.6;\n  }\n`;\n\nconst InfoSection = styled.div`\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 1.25rem;\n  margin-bottom: 1.5rem;\n\n  h4 {\n    margin: 0 0 1rem 0;\n    color: #374151;\n    font-size: 0.95rem;\n    font-weight: 600;\n  }\n`;\n\nconst InfoGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n`;\n\nconst InfoRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst InfoLabel = styled.div`\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 80px;\n  font-size: 0.9rem;\n`;\n\nconst InfoValue = styled.div`\n  color: #111827;\n  font-family: 'Courier New', monospace;\n  font-weight: 500;\n\n  small {\n    color: #6b7280;\n    font-size: 0.85rem;\n    margin-left: 0.5rem;\n  }\n`;\n\nconst RisksList = styled.div`\n  margin-bottom: 1.5rem;\n  background: #fffbeb;\n  border: 1px solid #fbbf24;\n  border-radius: 12px;\n  padding: 1.25rem;\n\n  h4 {\n    color: #dc2626;\n    margin: 0 0 0.75rem 0;\n    font-size: 0.95rem;\n    font-weight: 600;\n  }\n\n  ul {\n    margin: 0;\n    padding-left: 1.5rem;\n\n    li {\n      margin: 0.5rem 0;\n      color: #78350f;\n      line-height: 1.5;\n    }\n  }\n`;\n\nconst YearInput = styled.div`\n  label {\n    display: block;\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n    color: #374151;\n    font-size: 0.95rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.75rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1.1rem;\n    font-family: 'Courier New', monospace;\n    font-weight: 600;\n    text-align: center;\n    transition: all 0.2s;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &:disabled {\n      background: #f3f4f6;\n      cursor: not-allowed;\n      opacity: 0.6;\n    }\n  }\n`;\n\nconst ProgressBox = styled.div`\n  margin-top: 1.5rem;\n  padding: 1.25rem;\n  background: ${props =>\n    props.$completed\n      ? 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)'\n      : 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)'\n  };\n  border: 2px solid ${props => props.$completed ? '#10b981' : '#3b82f6'};\n  border-radius: 12px;\n  animation: fadeIn 0.3s ease;\n\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-10px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n`;\n\nconst ProgressLabel = styled.div`\n  color: ${props => props.$completed ? '#047857' : '#1e40af'};\n  font-weight: 600;\n  font-size: 0.95rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n\n  svg {\n    color: ${props => props.$completed ? '#10b981' : '#3b82f6'};\n    font-size: 1.1rem;\n  }\n`;\n\nconst ProgressBarContainer = styled.div`\n  width: 100%;\n  height: 8px;\n  background: ${props =>\n    props.$completed\n      ? 'rgba(16, 185, 129, 0.2)'\n      : 'rgba(59, 130, 246, 0.2)'\n  };\n  border-radius: 4px;\n  overflow: hidden;\n`;\n\nconst ProgressBarFill = styled.div`\n  height: 100%;\n  background: ${props =>\n    props.$completed\n      ? 'linear-gradient(90deg, #10b981 0%, #059669 100%)'\n      : 'linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)'\n  };\n  border-radius: 4px;\n  transition: width 0.3s ease;\n  box-shadow: ${props =>\n    props.$completed\n      ? '0 0 10px rgba(16, 185, 129, 0.5)'\n      : '0 0 10px rgba(59, 130, 246, 0.5)'\n  };\n`;\n\nconst ResultBox = styled.div`\n  margin-top: 1rem;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);\n  border: 2px solid #10b981;\n  border-radius: 8px;\n  animation: fadeIn 0.3s ease-in;\n`;\n\nconst ResultHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n\n  span {\n    font-size: 1.5rem;\n  }\n\n  h3 {\n    margin: 0;\n    font-size: 1.1rem;\n    color: #065f46;\n    font-weight: 600;\n  }\n`;\n\nconst ResultGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.75rem;\n`;\n\nconst ResultItem = styled.div`\n  padding: 0.75rem;\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n\n  ${props => props.$highlight && `\n    grid-column: 1 / -1;\n    background: rgba(16, 185, 129, 0.15);\n    border: 1px solid #10b981;\n  `}\n`;\n\nconst ResultLabel = styled.span`\n  font-size: 0.85rem;\n  color: #047857;\n  font-weight: 500;\n`;\n\nconst ResultValue = styled.span`\n  font-size: 1.1rem;\n  color: #065f46;\n  font-weight: 700;\n`;\n\nconst ErrorBox = styled.div`\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #fef2f2;\n  border: 2px solid #ef4444;\n  border-radius: 8px;\n  color: #991b1b;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-weight: 500;\n\n  svg {\n    color: #dc2626;\n    font-size: 1.2rem;\n    flex-shrink: 0;\n  }\n`;\n\nconst PlaceholderBox = styled.div`\n  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);\n  border: 2px dashed #9ca3af;\n  border-radius: 12px;\n  padding: 3rem 2rem;\n  text-align: center;\n  color: #6b7280;\n\n  p {\n    margin: 0.5rem 0 0 0;\n    font-size: 0.95rem;\n  }\n`;\n\nconst PlaceholderIcon = styled.div`\n  font-size: 3rem;\n  color: #9ca3af;\n  margin-bottom: 1rem;\n`;\n\n//  Debug komponenty pro zobrazen backend debug dat\nconst DebugBox = styled.div`\n  background: #1f2937;\n  border: 2px solid #374151;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n`;\n\nconst DebugHeader = styled.div`\n  background: #374151;\n  color: #9ca3af;\n  padding: 0.75rem 1rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  border-bottom: 1px solid #4b5563;\n`;\n\nconst DebugContent = styled.div`\n  padding: 1rem;\n  max-height: 400px;\n  overflow-y: auto;\n\n  pre {\n    margin: 0;\n    color: #d1d5db;\n    font-family: 'Courier New', Courier, monospace;\n    font-size: 0.85rem;\n    line-height: 1.5;\n    white-space: pre-wrap;\n    word-break: break-word;\n  }\n\n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #111827;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #4b5563;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #6b7280;\n  }\n`;\n\nconst DialogFooter = styled.div`\n  padding: 1.5rem 2rem;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-end;\n  background: #f9fafb;\n  border-radius: 0 0 16px 16px;\n`;\n\nconst CancelButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border: 2px solid #d1d5db;\n  background: white;\n  color: #374151;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 0.95rem;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ConfirmButton = styled.button`\n  padding: 0.75rem 1.5rem;\n  border: none;\n  background: ${props =>\n    props.$variant === 'success'\n      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'\n      : 'linear-gradient(135deg, #dc2626 0%, #991b1b 100%)'\n  };\n  color: white;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.95rem;\n  box-shadow: ${props =>\n    props.$variant === 'success'\n      ? '0 2px 8px rgba(16, 185, 129, 0.2)'\n      : '0 2px 8px rgba(220, 38, 38, 0.2)'\n  };\n\n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: ${props =>\n      props.$variant === 'success'\n        ? '0 4px 12px rgba(16, 185, 129, 0.3)'\n        : '0 4px 12px rgba(220, 38, 38, 0.3)'\n    };\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.7;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nexport default ForceRenumberDialog;\n","/**\n * Cashbook Tab - Sprva pokladnch knih a nastaven\n *\n * Obsahuje:\n * - Tabulku piazen pokladen (VPD/PPD sla, uivatel)\n * - Globln nastaven (cashbook_use_prefix)\n * - Admin panel pro sprvu selnch ad\n *\n * @author Frontend Team\n * @date 2025-11-08\n */\n\nimport React, { useState, useEffect, useContext, useMemo, useCallback } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faSearch, faPlus, faMinus, faEdit, faTrash, faSyncAlt, faEraser, faTimes,\n  faCheckCircle, faTimesCircle, faCalculator, faChevronUp, faChevronDown,\n  faCog, faSave, faExclamationTriangle, faBolt\n} from '@fortawesome/free-solid-svg-icons';\nimport { Calculator, Settings, User, DollarSign } from 'lucide-react';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { ToastContext } from '../../../context/ToastContext';\nimport { DictionaryCacheContext } from '../../../context/DictionaryCacheContext';\nimport cashbookAPI from '../../../services/cashbookService';\nimport EditCashboxDialog from '../../cashbook/EditCashboxDialog';\nimport DeleteAssignmentDialog from '../../cashbook/DeleteAssignmentDialog';\nimport CreateCashboxDialog from '../../cashbook/CreateCashboxDialog';\nimport ForceRenumberDialog from '../../cashbook/ForceRenumberDialog';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getExpandedRowModel,\n  flexRender,\n} from '@tanstack/react-table';\n\n// =============================================================================\n// SCROLLBAR STYLES\n// =============================================================================\n\nconst scrollbarStyles = `\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #94a3b8;\n    border-radius: 4px;\n\n    &:hover {\n      background: #64748b;\n    }\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: #94a3b8 #f1f5f9;\n`;\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst SettingsPanel = styled.div`\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);\n`;\n\nconst SettingsTitle = styled.h3`\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #1e40af;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n`;\n\nconst SettingsRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst SettingsLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-weight: 500;\n  color: #0c4a6e;\n\n  input[type=\"checkbox\"] {\n    width: 18px;\n    height: 18px;\n    cursor: pointer;\n  }\n`;\n\nconst SettingsDescription = styled.div`\n  font-size: 0.875rem;\n  color: #475569;\n  margin-top: 0.5rem;\n  line-height: 1.4;\n`;\n\nconst SaveButton = styled.button`\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 1rem;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst ActionBar = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst SearchWrapper = styled.div`\n  position: relative;\n  flex: 1;\n  width: 100%;\n  max-width: 100%;\n`;\n\nconst SearchIcon = styled(FontAwesomeIcon)`\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n  font-size: 1rem;\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: ${props => props.$primary ? 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' : 'white'};\n  color: ${props => props.$primary ? 'white' : '#64748b'};\n  border: 2px solid ${props => props.$primary ? '#3b82f6' : '#e2e8f0'};\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: ${props => props.$primary ? 'linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)' : '#f8fafc'};\n    border-color: ${props => props.$primary ? '#2563eb' : '#cbd5e1'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\nconst TableWrapper = styled.div`\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e2e8f0;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n\n  ${scrollbarStyles}\n`;\n\nconst Thead = styled.thead`\n  position: sticky;\n  top: 0;\n  z-index: 10;\n`;\n\nconst TheadTr = styled.tr`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst Th = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  color: white;\n  font-weight: 600;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: ${props => props.$sortable ? 'pointer' : 'default'};\n  user-select: none;\n\n  &:hover {\n    background: ${props => props.$sortable ? 'rgba(255, 255, 255, 0.1)' : 'transparent'};\n  }\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst Tbody = styled.tbody``;\n\nconst Td = styled.td`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  vertical-align: middle;\n  border-bottom: 1px solid #e2e8f0;\n\n  &:first-of-type {\n    text-align: left;\n  }\n`;\n\nconst Tr = styled.tr`\n  transition: background 0.2s;\n\n  &:hover {\n    background: #f8fafc;\n  }\n\n  &:last-child td {\n    border-bottom: none;\n  }\n`;\n\nconst UserName = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 500;\n  color: #1e293b;\n`;\n\nconst UserIcon = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ${props => props.$inactive ? '#e2e8f0' : 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)'};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  flex-shrink: 0;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst NumberBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.375rem 0.75rem;\n  background: ${props => props.$type === 'vpd' ? '#dcfce7' : '#fef3c7'};\n  color: ${props => props.$type === 'vpd' ? '#15803d' : '#b45309'};\n  border: 1px solid ${props => props.$type === 'vpd' ? '#86efac' : '#fde68a'};\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.875rem;\n`;\n\nconst StatusBadge = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.375rem 0.75rem;\n  background: ${props => props.$active ? '#dcfce7' : '#fee2e2'};\n  color: ${props => props.$active ? '#15803d' : '#991b1b'};\n  border: 1px solid ${props => props.$active ? '#86efac' : '#fca5a5'};\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.75rem;\n\n  svg {\n    font-size: 0.875rem;\n  }\n`;\n\nconst ActionIcons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: ${props => props.$warning ? '#f59e0b' : '#64748b'};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.$warning ? '#fffbeb' : '#f1f5f9'};\n    color: ${props => props.$delete ? '#dc2626' : props.$warning ? '#dc2626' : '#3b82f6'};\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\n// =============================================================================\n// EXPANDABLE ROW STYLES\n// =============================================================================\n\nconst ExpandedContent = styled.div`\n  padding: 1.5rem 2rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  border-bottom: 1px solid #000;\n`;\n\nconst UsersTitle = styled.h4`\n  margin: 0 0 1rem 0;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #475569;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  svg {\n    color: #3b82f6;\n  }\n`;\n\nconst UsersList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n`;\n\nconst UserItem = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  transition: all 0.2s;\n\n  &:hover {\n    border-color: #3b82f6;\n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst UserInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst ExpandedUserIcon = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 0.875rem;\n`;\n\nconst UserDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ExpandedUserName = styled.span`\n  font-weight: 600;\n  color: #1e293b;\n  font-size: 0.875rem;\n`;\n\nconst UserMeta = styled.span`\n  font-size: 0.75rem;\n  color: #64748b;\n`;\n\nconst UserBadges = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst MainBadge = styled.span`\n  padding: 0.25rem 0.5rem;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 600;\n`;\n\nconst RemoveButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 4px;\n  color: white;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\n    transform: translateY(-1px);\n  }\n`;\n\nconst AddUserButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: white;\n  border: 2px dashed #cbd5e1;\n  border-radius: 6px;\n  color: #3b82f6;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    background: #eff6ff;\n    border-color: #3b82f6;\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\nconst EmptyUsers = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: #94a3b8;\n  font-size: 0.875rem;\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background: white;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 0.75rem;\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #9ca3af;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #94a3b8;\n\n  svg {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n    opacity: 0.5;\n  }\n\n  p {\n    font-size: 1rem;\n    margin: 0;\n  }\n`;\n\n// Confirm Dialog Components\nconst ConfirmOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 10000;\n  cursor: pointer;\n`;\n\nconst ConfirmDialog = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  padding: 2rem;\n  min-width: 400px;\n  max-width: 500px;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  z-index: 10001;\n  cursor: default;\n`;\n\nconst ConfirmTitle = styled.h3`\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  color: #dc2626;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst ConfirmMessage = styled.p`\n  margin: 0 0 1.5rem 0;\n  color: #64748b;\n  font-size: 0.95rem;\n  line-height: 1.5;\n\n  strong {\n    color: #1e293b;\n    font-weight: 600;\n  }\n`;\n\nconst ConfirmButtons = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n`;\n\nconst ConfirmButton = styled.button`\n  padding: 0.625rem 1.25rem;\n  border: none;\n  border-radius: 6px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst ConfirmCancelButton = styled(ConfirmButton)`\n  background: white;\n  color: #64748b;\n  border: 1px solid #cbd5e1;\n\n  &:hover {\n    background: #f1f5f9;\n  }\n`;\n\nconst ConfirmDeleteButton = styled(ConfirmButton)`\n  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n  color: white;\n\n  &:hover {\n    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\n    transform: translateY(-1px);\n  }\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst CashbookTab = () => {\n  const { user, hasPermission } = useContext(AuthContext);\n  const { showToast } = useContext(ToastContext);\n  const { invalidateCache } = useContext(DictionaryCacheContext) || {};\n\n  // ============= LOCALSTORAGE HELPERS =============\n  const user_id = user?.user_id;\n\n  const getUserKey = (baseKey) => {\n    const sid = user_id || 'anon';\n    return `${baseKey}_${sid}`;\n  };\n\n  const getUserStorage = (baseKey, defaultValue = null) => {\n    try {\n      const item = localStorage.getItem(getUserKey(baseKey));\n      return item !== null ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n      return defaultValue;\n    }\n  };\n\n  const setUserStorage = (baseKey, value) => {\n    try {\n      localStorage.setItem(getUserKey(baseKey), JSON.stringify(value));\n    } catch (error) {\n      // Ignorovat chyby\n    }\n  };\n\n  // States\n  const [cashboxes, setCashboxes] = useState([]); //  ZMNA: pokladny msto assignments\n  const [loading, setLoading] = useState(true);\n  const [globalSearch, setGlobalSearch] = useState('');\n  const [usePrefixSetting, setUsePrefixSetting] = useState(true);\n  const [settingsSaving, setSettingsSaving] = useState(false);\n\n  // Pagination state\n  const [pageSize, setPageSize] = useState(() => getUserStorage('cashbook_pageSize', 25));\n  const [pageIndex, setPageIndex] = useState(() => getUserStorage('cashbook_pageIndex', 0));\n\n  // Dialog states\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [selectedAssignment, setSelectedAssignment] = useState(null);\n  const [confirmRemove, setConfirmRemove] = useState({ show: false, assignmentId: null, userName: '' });\n  const [forceRenumberDialogOpen, setForceRenumberDialogOpen] = useState(false);\n  const [assignmentToRenumber, setAssignmentToRenumber] = useState(null);\n\n  // Oprvnn\n  const canManage = hasPermission('CASH_BOOK_MANAGE');\n\n  // ============================================================================\n  // PAGINATION PERSISTENCE\n  // ============================================================================\n\n  useEffect(() => {\n    setUserStorage('cashbook_pageSize', pageSize);\n  }, [pageSize, user_id]);\n\n  useEffect(() => {\n    setUserStorage('cashbook_pageIndex', pageIndex);\n  }, [pageIndex, user_id]);\n\n  // ============================================================================\n  // DATA LOADING\n  // ============================================================================\n\n  useEffect(() => {\n    loadData();\n  }, []); //  Vdy nast pi mountu (i po F5)\n\n  // Znovu nast kdy se zmn oprvnn\n  useEffect(() => {\n    if (canManage !== undefined) {\n      loadData();\n    }\n  }, [canManage]);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      //  ZMNA: Nast seznam pokladen (msto assignments)\n      const cashboxResult = await cashbookAPI.getCashboxList(\n        true,  // activeOnly = true (jen aktivn pokladny)\n        true   // includeUsers = true (nast i uivatele)\n      );\n\n      if (cashboxResult.status === 'ok') {\n        const pokladny = cashboxResult.data.pokladny || [];\n        setCashboxes(pokladny);\n      } else {\n        showToast?.('Chyba pi natn pokladen', { type: 'error' });\n      }\n\n      // Nast globln nastaven\n      const settingsResult = await cashbookAPI.getSettings('cashbook_use_prefix');\n\n      if (settingsResult.status === 'ok' && settingsResult.data) {\n        // Backend vrac: {data: {key: 'cashbook_use_prefix', value: '0'}}\n        const value = settingsResult.data.value;\n        const prefixEnabled = value === '1' || value === 1;\n        setUsePrefixSetting(prefixEnabled);\n      }\n    } catch (error) {\n      showToast?.('Chyba pi natn dat', { type: 'error' });\n      console.error('Error loading cashbook data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ============================================================================\n  // HANDLERS\n  // ============================================================================\n\n  const handleSaveSettings = async () => {\n    if (!canManage) {\n      showToast?.('Nemte oprvnn pro sprvu nastaven', { type: 'error' });\n      return;\n    }\n\n    setSettingsSaving(true);\n    try {\n      const valueToSave = usePrefixSetting ? '1' : '0';\n      console.log(' Saving cashbook_use_prefix:', valueToSave);\n\n      const result = await cashbookAPI.updateSetting(\n        'cashbook_use_prefix',\n        valueToSave,\n        'Pouvat prefixovan sla doklad (V599-001)'\n      );\n\n      console.log(' Save result:', result);\n\n      if (result.status === 'ok') {\n        showToast?.('Nastaven uloeno', { type: 'success' });\n\n        // Invalidate cache\n        if (invalidateCache) {\n          invalidateCache(['cashbook', 'settings']);\n        }\n      } else {\n        showToast?.('Chyba pi ukldn nastaven', { type: 'error' });\n      }\n    } catch (error) {\n      showToast?.('Chyba pi ukldn nastaven', { type: 'error' });\n      console.error('Error saving settings:', error);\n    } finally {\n      setSettingsSaving(false);\n    }\n  };\n\n  const handleEdit = (cashbox) => {\n    //  ZMNA: editujeme pokladnu (cashbox) msto assignment\n    setSelectedAssignment(cashbox);\n    setEditDialogOpen(true);\n  };\n\n  const handleEditSuccess = () => {\n    // Po spn editaci znovu nast data\n    loadData();\n    invalidateCache?.('cashbook');\n  };\n\n  // Aktualizovat selectedAssignment kdy se natou nov data\n  useEffect(() => {\n    if (editDialogOpen && selectedAssignment?.id && cashboxes.length > 0) {\n      const updatedCashbox = cashboxes.find(c => c.id === selectedAssignment.id);\n      if (updatedCashbox) {\n        setSelectedAssignment(updatedCashbox);\n      }\n    }\n  }, [cashboxes, editDialogOpen, selectedAssignment?.id]);\n\n  const handleDelete = (cashbox) => {\n    //  ZMNA: maeme pokladnu (cashbox) msto assignment\n    setSelectedAssignment(cashbox);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleDeleteSuccess = () => {\n    // Po spnm smazn znovu nast data\n    loadData();\n    invalidateCache?.('cashbook');\n  };\n\n  const handleAddNew = () => {\n    setAddDialogOpen(true);\n  };\n\n  const handleAddSuccess = () => {\n    // Po spnm vytvoen znovu nast data\n    loadData();\n    invalidateCache?.('cashbook');\n  };\n\n  //  ADMIN: Force pepoet doklad\n  const handleForceRenumber = async (cashbox) => {\n    console.log(' FORCE RENUMBER - pokladna ID:', cashbox.id);\n\n    try {\n      //  PO ZMN (commit 945cc8e): Pmo pout pokladna_id z dku\n      // Vytvoit objekt pro dialog (simulace assignment pro zptnou kompatibilitu s dialogem)\n      const assignmentData = {\n        pokladna_id: cashbox.id,\n        cislo_pokladny: cashbox.cislo_pokladny,\n        nazev: cashbox.nazev,\n        ciselna_rada_vpd: cashbox.ciselna_rada_vpd,\n        ciselna_rada_ppd: cashbox.ciselna_rada_ppd\n      };\n\n      console.log(' FORCE RENUMBER - pouiji pokladnu:', assignmentData);\n\n      setAssignmentToRenumber(assignmentData);\n      setForceRenumberDialogOpen(true);\n    } catch (error) {\n      console.error('Chyba pi pprav force renumber:', error);\n      showToast?.('Chyba pi natn dat pokladny', { type: 'error' });\n    }\n  };\n\n  const handleForceRenumberConfirm = async (pokladnaId, year) => {\n    try {\n      //  PO ZMN (commit 945cc8e): Posl se pokladna_id msto assignment_id\n      const result = await cashbookAPI.forceRenumberDocuments(pokladnaId, year);\n\n      //  SMAZAT LOCALSTORAGE pro vechny uivatele + msce dan pokladny v danm roce\n      if (result && result.status === 'ok') {\n        console.log(' FORCE RENUMBER SPN - mau localStorage pro pokladnu:', pokladnaId, 'rok:', year);\n\n        // Projt vechny localStorage kle a smazat ty, kter pat k tto pokladn a roku\n        const keysToRemove = [];\n        for (let i = 0; i < localStorage.length; i++) {\n          const key = localStorage.key(i);\n          // Format kle: cashbook_{userId}_{year}_{month}\n          // Nememe filtrovat podle pokladna_id (nen v kli), tak smaeme vechny knihy v danm roce\n          if (key && key.startsWith('cashbook_') && key.includes(`_${year}_`)) {\n            keysToRemove.push(key);\n          }\n        }\n\n        console.log(' Mau localStorage kle:', keysToRemove);\n        keysToRemove.forEach(key => localStorage.removeItem(key));\n\n        // Zobrazit toast\n        showToast?.(\n          `Peslovno ${result.data.total_renumbered} poloek. LocalStorage vymazn - obnovte strnku pokladn knihy (F5).`,\n          { type: 'success', timeout: 8000 }\n        );\n      }\n\n      //  DIALOG SE ZAVE SM pes tlatko \"Hotovo\" nebo \"Zavt\"\n      //  NESMME ho zavrat tady automaticky!\n\n      //  Vrtit result (spch i chybu) - dialog rozhodne co zobrazit\n      return result;\n    } catch (error) {\n      console.error('Chyba pi force pepotu:', error);\n\n      //  Nehzet vjimku! Vrtit error objekt pro dialog\n      return {\n        status: 'error',\n        message: error.response?.data?.message || error.message || 'Chyba pi komunikaci se serverem'\n      };\n    }\n  };\n\n  // ============================================================================\n  // EXPANDABLE ROW RENDERING - Seznam uivatel\n  // ============================================================================\n\n  const renderSubComponent = useCallback(({ row }) => {\n    const cashbox = row.original;\n    const allUsers = cashbox.uzivatele || [];\n\n    // Filtrovat jen aktivn piazen (platne_do je NULL nebo v budoucnosti)\n    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD\n    const users = allUsers.filter(user => {\n      if (!user.platne_do) return true; // NULL = aktivn navdy\n      return user.platne_do > today; // Budouc datum = jet aktivn (dnes u ne)\n    });\n\n    if (!canManage) {\n      return null; // Non-admin neme rozbalit\n    }\n\n    return (\n      <ExpandedContent>\n        <UsersTitle>\n          <User size={16} />\n          Piazen ({users.length})\n        </UsersTitle>\n\n        {users.length === 0 ? (\n          <EmptyUsers>\n            dn piazen. Kliknte na \"+ Piadit uivatele\" pro pidn.\n          </EmptyUsers>\n        ) : (\n          <UsersList>\n            {users.map(user => (\n              <UserItem key={user.prirazeni_id}>\n                <UserInfo>\n                  <ExpandedUserIcon>\n                    <User size={16} />\n                  </ExpandedUserIcon>\n                  <UserDetails>\n                    <ExpandedUserName>\n                      {user.uzivatel_cele_jmeno}\n                      {(user.je_hlavni === 1 || user.je_hlavni === '1') ? (\n                        <MainBadge style={{ marginLeft: '0.5rem' }}>Hlavn</MainBadge>\n                      ) : (\n                        <MainBadge style={{ marginLeft: '0.5rem', background: 'linear-gradient(135deg, #64748b 0%, #475569 100%)' }}>Zstupce</MainBadge>\n                      )}\n                    </ExpandedUserName>\n                    <UserMeta>\n                      {user.username}\n                      {user.lokalita_nazev && ` | ${user.lokalita_nazev}`}\n                      {user.usek_nazev && ` | ${user.usek_nazev}`}\n                        Piazena od: {user.platne_od}\n                      {user.platne_do ? `  do: ${user.platne_do}` : '  navdy'}\n                      {user.poznamka && `  ${user.poznamka}`}\n                    </UserMeta>\n                  </UserDetails>\n                </UserInfo>\n\n                <UserBadges>\n                  <RemoveButton\n                    onClick={() => handleUnassignUserClick(user.prirazeni_id, user.uzivatel_cele_jmeno)}\n                    title=\"Odebrat uivatele z pokladny\"\n                  >\n                    <FontAwesomeIcon icon={faTrash} />\n                    Odebrat\n                  </RemoveButton>\n                </UserBadges>\n              </UserItem>\n            ))}\n          </UsersList>\n        )}\n\n        <div style={{ marginTop: '1rem' }}>\n          <AddUserButton onClick={() => handleAssignUser(cashbox.id)}>\n            <FontAwesomeIcon icon={faPlus} />\n            Piadit uivatele\n          </AddUserButton>\n        </div>\n      </ExpandedContent>\n    );\n  }, [canManage]);\n\n  // Placeholder handlery pro assign/unassign (budou implementovny s dialogy)\n  const handleAssignUser = useCallback((cashboxId) => {\n    // TODO: Otevt AssignUserDialog\n    showToast('Funkce piazen uivatele - pipravena pro implementaci', 'info');\n  }, [showToast]);\n\n  // User removal with custom confirm dialog\n  const handleUnassignUserClick = useCallback((assignmentId, userName) => {\n    setConfirmRemove({ show: true, assignmentId, userName });\n  }, []);\n\n  const handleUnassignUserConfirm = useCallback(async () => {\n    const { assignmentId, userName } = confirmRemove;\n    setConfirmRemove({ show: false, assignmentId: null, userName: '' });\n\n    console.log('');\n    console.log('  CASHBOOK TAB - ODEBRN UIVATELE Z PODDKU');\n    console.log('');\n    console.log(' Assignment ID:', assignmentId);\n    console.log(' Uivatel:', userName);\n\n    try {\n      console.log(' Volm API: cashbookAPI.unassignUserFromCashbox()');\n      const result = await cashbookAPI.unassignUserFromCashbox(assignmentId);\n\n      console.log(' API Response:', JSON.stringify(result, null, 2));\n      console.log('   Status:', result?.status);\n      console.log('   Message:', result?.message);\n      console.log('   Affected rows:', result?.data?.affected_rows);\n\n      if (result.status === 'ok') {\n        // Kontrola affected_rows - pokud je 0, zznam nebyl aktualizovn\n        const affectedRows = result?.data?.affected_rows;\n\n        if (affectedRows === 0 || affectedRows === '0') {\n          console.warn('  BE vrtilo affected_rows = 0 (dn zmna v DB)');\n          console.warn('   Mon dvody:');\n          console.warn('   1. Zznam s prirazeni_id =', assignmentId, 'neexistuje');\n          console.warn('   2. Zznam u m platne_do nastaven na dnen datum');\n          console.warn('   3. SQL WHERE podmnka je patn');\n          showToast(`VAROVN: Uivatel \"${userName}\" nebyl odebrn - zznam u neexistuje nebo byl ji deaktivovn`, 'warning');\n          console.log('');\n          console.log('  CASHBOOK TAB - WARNING (affected_rows = 0)');\n          console.log('');\n\n          // I tak refreshneme data, a vidme aktuln stav\n          console.log(' Volm loadData() pro refresh...');\n          loadData();\n          invalidateCache?.('cashbook');\n          return;\n        }\n\n        console.log(' BE potvrdilo spn odebrn (affected_rows:', affectedRows, ')');\n        showToast(`Uivatel \"${userName}\" byl spn odebrn z pokladny`, 'success');\n\n        console.log(' Volm loadData() pro refresh...');\n        loadData(); // Reload data to reflect changes\n        invalidateCache?.('cashbook');\n        console.log(' loadData() zavolno');\n        console.log('');\n        console.log('  CASHBOOK TAB - SUCCESS');\n        console.log('');\n      } else {\n        console.error(' BE vrtilo nespn status:', result?.status);\n        showToast(result.message || 'Chyba pi odebrn uivatele', 'error');\n        console.log('');\n        console.log(' CASHBOOK TAB - FAILED');\n        console.log('');\n      }\n    } catch (error) {\n      console.error('');\n      console.error(' CASHBOOK TAB - ERROR');\n      console.error('');\n      console.error('Error:', error);\n      console.error('Response:', error?.response);\n      console.error('Response Data:', error?.response?.data);\n      showToast('Chyba pi odebrn uivatele z pokladny', 'error');\n    }\n  }, [confirmRemove, showToast, invalidateCache]);\n\n  const handleUnassignUserCancel = useCallback(() => {\n    setConfirmRemove({ show: false, assignmentId: null, userName: '' });\n  }, []);\n\n  // ============================================================================\n  // TABLE COLUMNS -  NOV STRUKTURA: Pokladny msto uivatel\n  // ============================================================================\n\n  const columns = useMemo(\n    () => [\n      {\n        id: 'expander',\n        header: ({ table }) => {\n          const isAllExpanded = table.getIsAllRowsExpanded();\n          return (\n            <IconButton\n              onClick={() => table.toggleAllRowsExpanded()}\n              title={isAllExpanded ? 'Sbalit ve' : 'Rozbalit ve'}\n              style={{ \n                color: 'white',\n              }}\n              onMouseEnter={(e) => e.currentTarget.style.color = '#3b82f6'}\n              onMouseLeave={(e) => e.currentTarget.style.color = 'white'}\n            >\n              <FontAwesomeIcon icon={isAllExpanded ? faMinus : faPlus} />\n            </IconButton>\n          );\n        },\n        cell: ({ row }) => {\n          const userCount = row.original.pocet_uzivatelu || 0;\n          if (userCount === 0) return null;\n\n          return (\n            <IconButton\n              onClick={() => row.toggleExpanded()}\n              title={row.getIsExpanded() ? 'Zabalit uivatele' : 'Rozbalit uivatele'}\n            >\n              <FontAwesomeIcon\n                icon={row.getIsExpanded() ? faMinus : faPlus}\n              />\n            </IconButton>\n          );\n        },\n      },\n      {\n        accessorKey: 'cislo_pokladny',\n        header: 'slo',\n        cell: ({ row }) => (\n          <div style={{ fontWeight: 600, fontSize: '1.125rem', color: '#1e40af' }}>\n            {row.original.cislo_pokladny}\n          </div>\n        ),\n      },\n      {\n        accessorKey: 'nazev',\n        header: 'Nzev pokladny',\n        cell: ({ row }) => (\n          <div>\n            <div style={{ fontWeight: 500 }}>\n              {row.original.nazev || `Pokladna ${row.original.cislo_pokladny}`}\n            </div>\n            {row.original.kod_pracoviste && (\n              <div style={{ fontSize: '0.75rem', color: '#94a3b8', marginTop: '0.125rem' }}>\n                {row.original.kod_pracoviste} - {row.original.nazev_pracoviste}\n              </div>\n            )}\n          </div>\n        ),\n      },\n      {\n        accessorKey: 'ciselna_rada_vpd',\n        header: 'VPD',\n        cell: ({ row }) => (\n          <div>\n            <NumberBadge $type=\"vpd\">\n              V{row.original.ciselna_rada_vpd}\n            </NumberBadge>\n            <div style={{ fontSize: '0.75rem', color: '#64748b', marginTop: '0.25rem' }}>\n              od {row.original.vpd_od_cislo || 1}\n            </div>\n          </div>\n        ),\n      },\n      {\n        accessorKey: 'ciselna_rada_ppd',\n        header: 'PPD',\n        cell: ({ row }) => (\n          <div>\n            <NumberBadge $type=\"ppd\">\n              P{row.original.ciselna_rada_ppd}\n            </NumberBadge>\n            <div style={{ fontSize: '0.75rem', color: '#64748b', marginTop: '0.25rem' }}>\n              od {row.original.ppd_od_cislo || 1}\n            </div>\n          </div>\n        ),\n      },\n      {\n        accessorKey: 'pocet_uzivatelu',\n        header: 'Uivatel',\n        cell: ({ row }) => {\n          const count = row.original.pocet_uzivatelu || 0;\n          return (\n            <div style={{\n              fontSize: '0.875rem',\n              color: count > 0 ? '#059669' : '#94a3b8',\n              fontWeight: count > 0 ? 600 : 400\n            }}>\n              <User style={{ width: '14px', height: '14px', display: 'inline', marginRight: '4px' }} />\n              {count} {count === 1 ? 'uivatel' : count < 5 ? 'uivatel' : 'uivatel'}\n            </div>\n          );\n        },\n      },\n      {\n        accessorKey: 'aktivni',\n        header: 'Status',\n        cell: ({ row }) => (\n          <StatusBadge $active={row.original.aktivni}>\n            <FontAwesomeIcon icon={row.original.aktivni ? faCheckCircle : faTimesCircle} />\n            {row.original.aktivni ? 'Aktivn' : 'Neaktivn'}\n          </StatusBadge>\n        ),\n      },\n      {\n        id: 'actions',\n        header: () => (\n          <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%' }}>\n            <FontAwesomeIcon icon={faBolt} style={{ color: '#eab308', fontSize: '16px' }} />\n          </div>\n        ),\n        cell: ({ row }) => (\n          <ActionIcons>\n            <IconButton\n              onClick={() => handleEdit(row.original)}\n              disabled={!canManage}\n              title=\"Upravit pokladnu (VPD/PPD)\"\n            >\n              <FontAwesomeIcon icon={faEdit} />\n            </IconButton>\n            <IconButton\n              onClick={() => handleDelete(row.original)}\n              disabled={!canManage}\n              $delete\n              title=\"Smazat pokladnu\"\n            >\n              <FontAwesomeIcon icon={faTrash} />\n            </IconButton>\n            {canManage && (\n              <IconButton\n                onClick={() => handleForceRenumber(row.original)}\n                $warning\n                title=\"Force pepoet poad doklad (ADMIN)\"\n              >\n                <FontAwesomeIcon icon={faCalculator} />\n              </IconButton>\n            )}\n          </ActionIcons>\n        ),\n      },\n    ],\n    [canManage]\n  );\n\n  // ============================================================================\n  // TABLE INSTANCE -  S PODPOROU EXPANDOVN\n  // ============================================================================\n\n  const table = useReactTable({\n    data: cashboxes, //  ZMNA: cashboxes msto assignments\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getExpandedRowModel: getExpandedRowModel(), //  PIDNO: Pro expandovn\n    enableExpanding: true, //  Povolit expandovn\n    getRowCanExpand: () => true, //  Vechny dky mohou expandovat\n    initialState: {\n      pagination: { pageSize: 25, pageIndex: 0 },\n    },\n    state: {\n      globalFilter: globalSearch,\n      pagination: { pageSize, pageIndex },\n    },\n    onPaginationChange: (updater) => {\n      const newState = typeof updater === 'function'\n        ? updater({ pageSize, pageIndex })\n        : updater;\n      setPageSize(newState.pageSize);\n      setPageIndex(newState.pageIndex);\n    },\n    globalFilterFn: (row, columnId, filterValue) => {\n      const searchValue = String(filterValue).toLowerCase();\n      const values = [\n        row.original.uzivatel_jmeno,\n        row.original.uzivatel_prijmeni,\n        row.original.uzivatel_id,\n        row.original.cislo_pokladny,\n        row.original.ciselna_rada_vpd,\n        row.original.ciselna_rada_ppd,\n      ].map(v => String(v || '').toLowerCase());\n\n      return values.some(val => val.includes(searchValue));\n    },\n    state: {\n      globalFilter: globalSearch,\n    },\n    onGlobalFilterChange: setGlobalSearch,\n  });\n\n  // ============================================================================\n  // RENDER\n  // ============================================================================\n\n  if (loading) {\n    return (\n      <Container>\n        <EmptyState>\n          <FontAwesomeIcon icon={faSyncAlt} spin />\n          <p>Natn...</p>\n        </EmptyState>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      {/* Global Settings Panel */}\n      {canManage && (\n        <SettingsPanel>\n          <SettingsTitle>\n            <FontAwesomeIcon icon={faCog} />\n            Globln nastaven pokladny\n          </SettingsTitle>\n\n          <SettingsRow>\n            <SettingsLabel>\n              <input\n                type=\"checkbox\"\n                checked={usePrefixSetting}\n                onChange={(e) => setUsePrefixSetting(e.target.checked)}\n              />\n              Pout prefixovan sla doklad\n            </SettingsLabel>\n          </SettingsRow>\n\n          <SettingsDescription>\n            Pokud je zapnuto, sla doklad budou zobrazena ve formtu <strong>V599-001</strong> msto <strong>V001</strong>.\n            <br />\n            Prefix je tvoen z seln ady VPD/PPD piazen uivateli.\n          </SettingsDescription>\n\n          <SaveButton onClick={handleSaveSettings} disabled={settingsSaving}>\n            <FontAwesomeIcon icon={faSave} />\n            {settingsSaving ? 'Ukldm...' : 'Uloit nastaven'}\n          </SaveButton>\n        </SettingsPanel>\n      )}\n\n      {/* Action Bar */}\n      <ActionBar>\n        <SearchWrapper>\n          <SearchIcon icon={faSearch} />\n          <SearchInput\n            type=\"text\"\n            placeholder=\"Hledat v piazench...\"\n            value={globalSearch}\n            onChange={(e) => setGlobalSearch(e.target.value)}\n          />\n          {globalSearch && (\n            <ClearButton onClick={() => setGlobalSearch('')} title=\"Vymazat vyhledvn\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchWrapper>\n\n        {canManage && (\n          <ActionButton onClick={handleAddNew} $primary>\n            <FontAwesomeIcon icon={faPlus} />\n            Pidat pokladnu\n          </ActionButton>\n        )}\n      </ActionBar>\n\n      {/* Table */}\n      <TableWrapper>\n        {table.getRowModel().rows.length === 0 ? (\n          <EmptyState>\n            <FontAwesomeIcon icon={faCalculator} />\n            <p>dn piazen pokladen</p>\n          </EmptyState>\n        ) : (\n          <>\n            <Table>\n              <Thead>\n                {table.getHeaderGroups().map(headerGroup => (\n                  <TheadTr key={headerGroup.id}>\n                    {headerGroup.headers.map(header => (\n                      <Th\n                        key={header.id}\n                        $sortable={header.column.getCanSort()}\n                        onClick={header.column.getToggleSortingHandler()}\n                      >\n                        {flexRender(header.column.columnDef.header, header.getContext())}\n                        {{\n                          asc: ' ',\n                          desc: ' ',\n                        }[header.column.getIsSorted()] ?? null}\n                      </Th>\n                    ))}\n                  </TheadTr>\n                ))}\n              </Thead>\n              <Tbody>\n                {table.getRowModel().rows.map(row => (\n                  <React.Fragment key={row.id}>\n                    {/* Hlavn dek s daty pokladny */}\n                    <Tr>\n                      {row.getVisibleCells().map(cell => (\n                        <Td key={cell.id}>\n                          {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                        </Td>\n                      ))}\n                    </Tr>\n\n                    {/* Expandable dek se seznamem uivatel */}\n                    {row.getIsExpanded() && (\n                      <Tr>\n                        <Td colSpan={row.getVisibleCells().length} style={{ padding: 0 }}>\n                          {renderSubComponent({ row })}\n                        </Td>\n                      </Tr>\n                    )}\n                  </React.Fragment>\n                ))}\n              </Tbody>\n            </Table>\n\n            {/* Pagination */}\n            {table.getPageCount() > 0 && (\n              <Pagination>\n                <PageInfo>\n                  Zobrazeno {Math.min(\n                    pageIndex * pageSize + 1,\n                    table.getFilteredRowModel().rows.length\n                  )} - {Math.min(\n                    (pageIndex + 1) * pageSize,\n                    table.getFilteredRowModel().rows.length\n                  )}{' '}\n                  z {table.getFilteredRowModel().rows.length} pokladen\n                </PageInfo>\n\n                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                  <span>Zobrazit:</span>\n                  <PageSizeSelect\n                    value={pageSize}\n                    onChange={(e) => {\n                      const newSize = Number(e.target.value);\n                      setPageSize(newSize);\n                      setPageIndex(0);\n                    }}\n                  >\n                    <option value=\"10\">10</option>\n                    <option value=\"25\">25</option>\n                    <option value=\"50\">50</option>\n                    <option value=\"100\">100</option>\n                    <option value=\"250\">250</option>\n                    <option value=\"500\">500</option>\n                  </PageSizeSelect>\n\n                  <PaginationButton\n                    onClick={() => setPageIndex(0)}\n                    disabled={pageIndex === 0}\n                  >\n                    \n                  </PaginationButton>\n                  <PaginationButton\n                    onClick={() => setPageIndex(prev => Math.max(0, prev - 1))}\n                    disabled={pageIndex === 0}\n                  >\n                    \n                  </PaginationButton>\n\n                  <span style={{ margin: '0 0.5rem' }}>\n                    Strnka {pageIndex + 1} z {Math.max(1, table.getPageCount())}\n                  </span>\n\n                  <PaginationButton\n                    onClick={() => setPageIndex(prev => Math.min(table.getPageCount() - 1, prev + 1))}\n                    disabled={pageIndex >= table.getPageCount() - 1}\n                  >\n                    \n                  </PaginationButton>\n                  <PaginationButton\n                    onClick={() => setPageIndex(table.getPageCount() - 1)}\n                    disabled={pageIndex >= table.getPageCount() - 1}\n                  >\n                    \n                  </PaginationButton>\n                </div>\n              </Pagination>\n            )}\n          </>\n        )}\n      </TableWrapper>\n\n      {/* Edit Cashbox Dialog -  NOV: Editace pokladny + sprva uivatel */}\n      <EditCashboxDialog\n        isOpen={editDialogOpen}\n        onClose={() => {\n          setEditDialogOpen(false);\n          setSelectedAssignment(null);\n        }}\n        cashbox={selectedAssignment}\n        onSuccess={handleEditSuccess}\n      />\n\n      {/* Delete Assignment Dialog */}\n      <DeleteAssignmentDialog\n        isOpen={deleteDialogOpen}\n        onClose={() => {\n          setDeleteDialogOpen(false);\n          setSelectedAssignment(null);\n        }}\n        assignment={selectedAssignment}\n        onSuccess={handleDeleteSuccess}\n      />\n\n      {/* Create Cashbox Dialog */}\n      <CreateCashboxDialog\n        isOpen={addDialogOpen}\n        onClose={() => setAddDialogOpen(false)}\n        onSuccess={handleAddSuccess}\n      />\n\n      {/*  Force Renumber Dialog (ADMIN) */}\n      {assignmentToRenumber && (\n        <ForceRenumberDialog\n          isOpen={forceRenumberDialogOpen}\n          onClose={() => {\n            setForceRenumberDialogOpen(false);\n            setAssignmentToRenumber(null);\n          }}\n          assignment={assignmentToRenumber}\n          onConfirm={handleForceRenumberConfirm}\n        />\n      )}\n\n      {/* Confirm Dialog for User Removal */}\n      {confirmRemove.show && ReactDOM.createPortal(\n        <>\n          <ConfirmOverlay onClick={handleUnassignUserCancel} />\n          <ConfirmDialog>\n            <ConfirmTitle>\n              <FontAwesomeIcon icon={faExclamationTriangle} />\n              Odebrat uivatele?\n            </ConfirmTitle>\n            <ConfirmMessage>\n              Opravdu chcete odebrat uivatele <strong>{confirmRemove.userName}</strong> z tto pokladny?\n            </ConfirmMessage>\n            <ConfirmButtons>\n              <ConfirmCancelButton onClick={handleUnassignUserCancel}>\n                Zruit\n              </ConfirmCancelButton>\n              <ConfirmDeleteButton onClick={handleUnassignUserConfirm}>\n                <FontAwesomeIcon icon={faTrash} />\n                Odebrat\n              </ConfirmDeleteButton>\n            </ConfirmButtons>\n          </ConfirmDialog>\n        </>,\n        document.body\n      )}\n    </Container>\n  );\n};\n\nexport default CashbookTab;\n","/**\n * SmlouvyFormModal - Formul pro vytvoen/editaci smlouvy\n * \n * Funkce:\n * - Validace vech pol\n * - Auto-vpoet DPH\n * - Kontrola IO\n * - Datepicker pro platnost\n * - Dropdown pro seky, druhy, stavy\n * \n * @author Frontend Team  \n * @date 2025-11-23\n */\n\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faSave, faSpinner, faChevronDown, faFileContract, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { Calculator } from 'lucide-react';\n\nimport AuthContext from '../../../context/AuthContext';\nimport {\n  createSmlouva,\n  updateSmlouva,\n  getDruhySmluv,\n  DRUH_SMLOUVY_OPTIONS_FALLBACK,\n  STAV_SMLOUVY_OPTIONS,\n  SAZBA_DPH_OPTIONS\n} from '../../../services/apiSmlouvy';\nimport DatePicker from '../../DatePicker';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst Modal = styled.div`\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-height: 85vh;\n  max-width: 900px;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  padding: 1.5rem 2rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url('data:image/svg+xml,<svg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><g fill=\"%23ffffff\" fill-opacity=\"0.05\"><circle cx=\"30\" cy=\"30\" r=\"1\"/></g></svg>');\n    pointer-events: none;\n  }\n`;\n\nconst Title = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  color: white;\n  font-weight: 700;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst CloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s;\n  position: relative;\n  z-index: 1;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst Body = styled.div`\n  padding: 1.5rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  flex: 1;\n`;\n\nconst FormGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n\n  @media (min-width: 600px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n`;\n\nconst FormField = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  \n  @media (min-width: 600px) {\n    grid-column: ${props => props.$fullWidth ? 'span 2' : 'span 1'};\n  }\n`;\n\nconst Label = styled.label`\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #475569;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n\n  &.required::after {\n    content: '*';\n    color: #ef4444;\n    margin-left: 0.25rem;\n  }\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem;\n  border: 2px solid ${props => props.$error ? '#ef4444' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: ${props => (props.value && props.value !== '') ? '600' : '400'};\n  color: ${props => (props.value && props.value !== '') ? '#1f2937' : '#6b7280'};\n  transition: all 0.2s ease;\n  background: white;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.$error ? '#ef4444' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.$error ? 'rgba(239, 68, 68, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n`;\n\nconst Select = styled.select`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem;\n  border: 2px solid ${props => props.$error ? '#ef4444' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: ${props => (props.value && props.value !== '') ? '600' : '400'};\n  color: ${props => (props.value && props.value !== '') ? '#1f2937' : '#6b7280'};\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n  padding-right: 2.5rem;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.$error ? '#ef4444' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.$error ? 'rgba(239, 68, 68, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    background-color: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: ${props => (props.value && props.value !== '') ? '600' : '400'};\n  color: inherit;\n  background: white;\n  min-height: 80px;\n  font-family: inherit;\n  resize: vertical;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\n// Currency Input Components\nconst CurrencyInputWrapper = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n`;\n\n// ARES Input Components\nconst InputWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n  display: flex;\n  align-items: center;\n\n  input {\n    padding-right: 40px;\n  }\n`;\n\nconst AresSearchIcon = styled.div`\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #059669;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  z-index: 2;\n\n  &:hover {\n    background-color: #f0fdf4;\n    color: #047857;\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n`;\n\n// ARES Popup Components\nconst AresPopupOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 100000;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n`;\n\nconst AresPopupModal = styled.div`\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 800px;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: slideUp 0.3s ease-out;\n\n  @keyframes slideUp {\n    from {\n      transform: translateY(20px);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n`;\n\nconst AresPopupHeader = styled.div`\n  padding: 1.5rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: linear-gradient(135deg, #059669 0%, #047857 100%);\n  color: white;\n`;\n\nconst AresPopupTitle = styled.h2`\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  color: white;\n\n  svg {\n    width: 24px;\n    height: 24px;\n  }\n`;\n\nconst AresPopupCloseButton = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n`;\n\nconst AresPopupContent = styled.div`\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst AresSearchInputField = styled.input`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.75rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  margin-bottom: 1rem;\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: #059669;\n    box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\nconst AresList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  max-height: 400px;\n  overflow-y: auto;\n`;\n\nconst AresItem = styled.div`\n  padding: 1rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover {\n    border-color: #059669;\n    background-color: #f0fdf4;\n    box-shadow: 0 2px 8px rgba(5, 150, 105, 0.15);\n  }\n`;\n\nconst AresLoadingSpinner = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: #6b7280;\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n`;\n\nconst CurrencySymbol = styled.span`\n  position: absolute;\n  right: 12px;\n  color: ${props => props.disabled ? '#9ca3af' : '#374151'};\n  font-weight: 600;\n  font-size: 0.875rem;\n  pointer-events: none;\n  user-select: none;\n`;\n\nconst StyledCurrencyInput = styled.input`\n  width: 100%;\n  padding: 0.75rem 45px 0.75rem 2.5rem;\n  border: 2px solid ${props => props.$error ? '#ef4444' : '#e5e7eb'};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: ${props => (props.value && props.value !== '') ? '600' : '400'};\n  color: inherit;\n  background: white;\n  text-align: right;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: ${props => props.$error ? '#ef4444' : '#3b82f6'};\n    box-shadow: 0 0 0 3px ${props => props.$error ? 'rgba(239, 68, 68, 0.1)' : 'rgba(59, 130, 246, 0.1)'};\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n`;\n\nconst CalculatorIcon = styled(Calculator)`\n  position: absolute;\n  left: 12px;\n  color: #6b7280;\n  width: 16px;\n  height: 16px;\n`;\n\nconst ToggleSwitch = styled.label`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.75rem;\n  cursor: pointer;\n  padding-top: 0.5rem;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: relative;\n    width: 56px;\n    height: 28px;\n    background-color: #cbd5e1;\n    border-radius: 28px;\n    transition: all 0.3s ease;\n    flex-shrink: 0;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      left: 4px;\n      bottom: 4px;\n      background-color: white;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n    }\n  }\n\n  input:checked + .slider {\n    background-color: #3b82f6;\n  }\n\n  input:checked + .slider::before {\n    transform: translateX(28px);\n  }\n\n  input:focus + .slider {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  .label-text {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #475569;\n  }\n`;\n\nconst ErrorText = styled.span`\n  font-size: 0.8rem;\n  color: #ef4444;\n`;\n\nconst Footer = styled.div`\n  padding: 1.5rem 2rem;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  background: #f9fafb;\n`;\n\nconst Button = styled.button`\n  padding: 0.75rem 1.5rem;\n  background: ${props => props.$variant === 'primary' ? '#3b82f6' : '#f3f4f6'};\n  color: ${props => props.$variant === 'primary' ? 'white' : '#374151'};\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover:not(:disabled) {\n    background: ${props => props.$variant === 'primary' ? '#2563eb' : '#e5e7eb'};\n    transform: translateY(-1px);\n    box-shadow: ${props => props.$variant === 'primary' ? '0 4px 12px rgba(59, 130, 246, 0.3)' : 'none'};\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst InfoText = styled.div`\n  font-size: 0.85rem;\n  color: #64748b;\n  font-style: italic;\n  margin-top: 0.25rem;\n`;\n\nconst SectionHeader = styled.div`\n  grid-column: span 2;\n  margin-top: ${props => props.$first ? '0' : '1rem'};\n  margin-bottom: 0.5rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: ${props => props.$collapsible ? 'pointer' : 'default'};\n  user-select: none;\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n  }\n\n  h3 {\n    margin: 0;\n    font-size: 1rem;\n    font-weight: 600;\n    color: #1e293b;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .toggle-icon {\n    font-size: 0.875rem;\n    color: #64748b;\n    transition: transform 0.2s ease;\n    transform: ${props => props.$collapsed ? 'rotate(0deg)' : 'rotate(180deg)'};\n  }\n`;\n\nconst CollapsibleContent = styled.div`\n  display: ${props => props.$collapsed ? 'none' : 'contents'};\n`;\n\nconst HintBox = styled.div`\n  grid-column: span 2;\n  padding: 0.75rem 1rem;\n  background: #eff6ff;\n  border-left: 3px solid #3b82f6;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  color: #1e40af;\n  margin-bottom: 0.5rem;\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n  }\n`;\n\nconst ThreeColumnRow = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.75rem;\n  overflow: hidden;\n\n  @media (min-width: 600px) {\n    grid-column: span 2;\n  }\n\n  @media (max-width: 599px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst TwoColumnRow = styled.div`\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.75rem;\n  overflow: hidden;\n\n  @media (min-width: 600px) {\n    grid-column: span 2;\n  }\n\n  @media (max-width: 599px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst InnerFormField = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\n// =============================================================================\n// CURRENCY INPUT COMPONENT\n// =============================================================================\n\nfunction CurrencyInput({ \n  fieldName, \n  value, \n  onChange, \n  onBlur, \n  disabled = false, \n  hasError = false, \n  placeholder = '',\n  highlight = false\n}) {\n  const inputRef = useRef(null);\n  const [localValue, setLocalValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n\n  // Format number to Czech format: \"1 234,56\"\n  const formatCurrency = (val) => {\n    if (!val && val !== 0) return '';\n    const num = parseFloat(val.toString().replace(/[^0-9.-]/g, ''));\n    if (isNaN(num)) return '';\n    return num.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ').replace('.', ',');\n  };\n\n  // Initialize local value from props (only when not focused)\n  useEffect(() => {\n    if (!isFocused) {\n      const formattedValue = formatCurrency(value || '');\n      if (localValue !== formattedValue) {\n        setLocalValue(formattedValue);\n      }\n    }\n  }, [value, isFocused]);\n\n  const handleChange = (e) => {\n    const newValue = e.target.value;\n    \n    // Update local value immediately (without formatting)\n    setLocalValue(newValue);\n    \n    // Clean value before sending to onChange\n    const cleanValue = newValue.replace(/[^\\d,.-]/g, '').replace(',', '.');\n    const numValue = parseFloat(cleanValue);\n    const finalValue = isNaN(numValue) ? '' : numValue.toFixed(2);\n    \n    // Call onChange with cleaned value\n    onChange(fieldName, finalValue);\n  };\n\n  const handleFocus = () => {\n    setIsFocused(true);\n  };\n\n  const handleBlurLocal = () => {\n    setIsFocused(false);\n    \n    // Format value on blur\n    const formatted = formatCurrency(localValue);\n    setLocalValue(formatted);\n    \n    // Clean value before sending to onBlur\n    const cleanValue = localValue.replace(/[^\\d,.-]/g, '').replace(',', '.');\n    const numValue = parseFloat(cleanValue);\n    const finalValue = isNaN(numValue) ? '' : numValue.toFixed(2);\n    \n    if (onBlur) {\n      onBlur(fieldName, finalValue);\n    }\n  };\n\n  return (\n    <CurrencyInputWrapper>\n      <InputWithIcon>\n        <CalculatorIcon />\n        <StyledCurrencyInput\n          ref={inputRef}\n          type=\"text\"\n          value={localValue}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlurLocal}\n          disabled={disabled}\n          $error={hasError}\n          $highlight={highlight}\n          placeholder={placeholder}\n        />\n        <CurrencySymbol disabled={disabled}>K</CurrencySymbol>\n      </InputWithIcon>\n    </CurrencyInputWrapper>\n  );\n}\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst SmlouvyFormModal = ({ smlouva, useky, onClose }) => {\n  const { user, token } = useContext(AuthContext);\n  const isEdit = !!smlouva;\n\n  // Form state\n  const [formData, setFormData] = useState({\n    cislo_smlouvy: smlouva?.cislo_smlouvy || '',\n    usek_id: smlouva?.usek_id || '',\n    druh_smlouvy: smlouva?.druh_smlouvy || 'SLUZBY',\n    nazev_firmy: smlouva?.nazev_firmy || '',\n    ico: smlouva?.ico || '',\n    dic: smlouva?.dic || '',\n    nazev_smlouvy: smlouva?.nazev_smlouvy || '',\n    popis_smlouvy: smlouva?.popis_smlouvy || '',\n    platnost_od: smlouva?.platnost_od?.substring(0, 10) || '',\n    platnost_do: smlouva?.platnost_do?.substring(0, 10) || '',\n    hodnota_bez_dph: smlouva?.hodnota_bez_dph || '',\n    hodnota_s_dph: smlouva?.hodnota_s_dph || '',\n    hodnota_plneni_bez_dph: smlouva?.hodnota_plneni_bez_dph || '',\n    hodnota_plneni_s_dph: smlouva?.hodnota_plneni_s_dph || '',\n    sazba_dph: smlouva?.sazba_dph || 21,\n    aktivni: smlouva?.aktivni !== undefined ? smlouva.aktivni : 1,\n    pouzit_v_obj_formu: smlouva?.pouzit_v_obj_formu !== undefined ? smlouva.pouzit_v_obj_formu : 1,\n    stav: smlouva?.stav || 'AKTIVNI',\n    poznamka: smlouva?.poznamka || '',\n    cislo_dms: smlouva?.cislo_dms || '',\n    kategorie: smlouva?.kategorie || ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [showOptionalFields, setShowOptionalFields] = useState(false);\n  const [druhySmluv, setDruhySmluv] = useState(DRUH_SMLOUVY_OPTIONS_FALLBACK);\n  const [loadingDruhy, setLoadingDruhy] = useState(true);\n  \n  //  State pro zvraznn nedvno zmnnch pol\n  const [recentlyChangedFields, setRecentlyChangedFields] = useState(new Set());\n  \n  //  ARES states\n  const [aresPopupOpen, setAresPopupOpen] = useState(false);\n  const [aresSearch, setAresSearch] = useState('');\n  const [aresResults, setAresResults] = useState([]);\n  const [loadingAres, setLoadingAres] = useState(false);\n  \n  //  Ref pro tracking timeout (aby se sprvn istily)\n  const highlightTimeoutsRef = useRef({});\n\n  // =============================================================================\n  // NATEN DRUH SMLUV Z API\n  // =============================================================================\n\n  useEffect(() => {\n    const fetchDruhySmluv = async () => {\n      try {\n        setLoadingDruhy(true);\n        const druhy = await getDruhySmluv({ token, username: user.username });\n        setDruhySmluv(druhy);\n      } catch (err) {\n        console.error('Chyba pi natn druh smluv:', err);\n        // Ponechme fallback hodnoty\n      } finally {\n        setLoadingDruhy(false);\n      }\n    };\n\n    if (user && token) {\n      fetchDruhySmluv();\n    }\n  }, [user, token]);\n\n  // =============================================================================\n  // FIELD CHANGE TRACKING\n  // =============================================================================\n  \n  const markFieldAsChanged = (fieldName) => {\n    // Pokud existuje pedchoz timeout pro toto pole, zru ho\n    if (highlightTimeoutsRef.current[fieldName]) {\n      clearTimeout(highlightTimeoutsRef.current[fieldName]);\n    }\n    \n    // Pidej pole do Set zvraznnch pol\n    setRecentlyChangedFields(prev => new Set(prev).add(fieldName));\n    \n    // Nastav nov timeout pro odstrann zvraznn\n    highlightTimeoutsRef.current[fieldName] = setTimeout(() => {\n      setRecentlyChangedFields(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(fieldName);\n        return newSet;\n      });\n      // Vyisti referenci na timeout\n      delete highlightTimeoutsRef.current[fieldName];\n    }, 2000);\n  };\n  \n  // Cleanup timeout pi unmount\n  useEffect(() => {\n    return () => {\n      // Pi unmount vyisti vechny timeouty\n      Object.values(highlightTimeoutsRef.current).forEach(timeoutId => {\n        clearTimeout(timeoutId);\n      });\n    };\n  }, []);\n  \n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    markFieldAsChanged(field);\n  };\n\n  // =============================================================================\n  // AUTO-CALCULATE DPH\n  // =============================================================================\n\n  const handleHodnotaBezDphChange = (value) => {\n    const bezDph = parseFloat(value) || 0;\n    const sazbaDph = parseFloat(formData.sazba_dph) || 0;\n    const sDph = bezDph * (1 + sazbaDph / 100);\n    \n    setFormData(prev => ({\n      ...prev,\n      hodnota_bez_dph: value,\n      hodnota_s_dph: sDph.toFixed(2)\n    }));\n    \n    markFieldAsChanged('hodnota_bez_dph');\n    markFieldAsChanged('hodnota_s_dph');\n  };\n\n  const handleHodnotaSDphChange = (value) => {\n    const sDph = parseFloat(value) || 0;\n    const sazbaDph = parseFloat(formData.sazba_dph) || 0;\n    const bezDph = sDph / (1 + sazbaDph / 100);\n    \n    setFormData(prev => ({\n      ...prev,\n      hodnota_s_dph: value,\n      hodnota_bez_dph: bezDph.toFixed(2)\n    }));\n    \n    markFieldAsChanged('hodnota_s_dph');\n    markFieldAsChanged('hodnota_bez_dph');\n  };\n\n  const handleSazbaDphChange = (value) => {\n    const sazbaDph = parseFloat(value) || 0;\n    const bezDph = parseFloat(formData.hodnota_bez_dph) || 0;\n    const sDph = bezDph * (1 + sazbaDph / 100);\n    \n    // Pepotat i hodnotu plnn pokud existuje\n    const plneniBezDph = parseFloat(formData.hodnota_plneni_bez_dph) || 0;\n    const plneniSDph = plneniBezDph * (1 + sazbaDph / 100);\n    \n    setFormData(prev => ({\n      ...prev,\n      sazba_dph: value,\n      hodnota_s_dph: sDph.toFixed(2),\n      hodnota_plneni_s_dph: plneniBezDph > 0 ? plneniSDph.toFixed(2) : prev.hodnota_plneni_s_dph\n    }));\n    \n    markFieldAsChanged('sazba_dph');\n    markFieldAsChanged('hodnota_s_dph');\n    if (plneniBezDph > 0) {\n      markFieldAsChanged('hodnota_plneni_s_dph');\n    }\n  };\n\n  const handleHodnotaPlneniBezDphChange = (value) => {\n    const bezDph = parseFloat(value) || 0;\n    const sazbaDph = parseFloat(formData.sazba_dph) || 0;\n    const sDph = bezDph * (1 + sazbaDph / 100);\n    \n    setFormData(prev => ({\n      ...prev,\n      hodnota_plneni_bez_dph: value,\n      hodnota_plneni_s_dph: sDph.toFixed(2)\n    }));\n    \n    markFieldAsChanged('hodnota_plneni_bez_dph');\n    markFieldAsChanged('hodnota_plneni_s_dph');\n  };\n\n  const handleHodnotaPlneniSDphChange = (value) => {\n    const sDph = parseFloat(value) || 0;\n    const sazbaDph = parseFloat(formData.sazba_dph) || 0;\n    const bezDph = sDph / (1 + sazbaDph / 100);\n    \n    setFormData(prev => ({\n      ...prev,\n      hodnota_plneni_s_dph: value,\n      hodnota_plneni_bez_dph: bezDph.toFixed(2)\n    }));\n    \n    markFieldAsChanged('hodnota_plneni_s_dph');\n    markFieldAsChanged('hodnota_plneni_bez_dph');\n  };\n\n  // =============================================================================\n  // VALIDATION\n  // =============================================================================\n\n  const validate = () => {\n    const newErrors = {};\n\n    if (!formData.cislo_smlouvy.trim()) {\n      newErrors.cislo_smlouvy = 'slo smlouvy je povinn';\n    }\n\n    if (!formData.usek_id) {\n      newErrors.usek_id = 'sek je povinn';\n    }\n\n    if (!formData.druh_smlouvy) {\n      newErrors.druh_smlouvy = 'Druh smlouvy je povinn';\n    }\n\n    if (!formData.nazev_firmy.trim()) {\n      newErrors.nazev_firmy = 'Nzev firmy je povinn';\n    }\n    \n    if (!formData.ico.trim()) {\n      newErrors.ico = 'IO je povinn';\n    }\n\n    if (!formData.nazev_smlouvy.trim()) {\n      newErrors.nazev_smlouvy = 'Nzev smlouvy je povinn';\n    }\n\n    if (!formData.platnost_do) {\n      newErrors.platnost_do = 'Platnost do je povinn';\n    }\n\n    if (formData.platnost_od && formData.platnost_do) {\n      if (new Date(formData.platnost_do) < new Date(formData.platnost_od)) {\n        newErrors.platnost_do = 'Datum do mus bt po datu od';\n      }\n    }\n\n    if (!formData.hodnota_bez_dph || parseFloat(formData.hodnota_bez_dph) < 0) {\n      newErrors.hodnota_bez_dph = 'Poten stav bez DPH je povinn a nesm bt zporn';\n    }\n\n    if (!formData.hodnota_s_dph || parseFloat(formData.hodnota_s_dph) < 0) {\n      newErrors.hodnota_s_dph = 'Poten stav s DPH je povinn a nesm bt zporn';\n    }\n\n    if (formData.ico && !/^\\d{8}$/.test(formData.ico)) {\n      newErrors.ico = 'IO mus obsahovat 8 slic';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // =============================================================================\n  // SAVE\n  // =============================================================================\n\n  const handleSave = async () => {\n    if (!validate()) {\n      // Chyby jsou ji zobrazeny inline v errors state\n      return;\n    }\n\n    try {\n      setSaving(true);\n\n      // Pprava dat - oeten przdnch datum (poslat null msto przdnho stringu)\n      const dataToSave = {\n        ...formData,\n        platnost_od: formData.platnost_od || null,\n        platnost_do: formData.platnost_do || null\n      };\n\n      if (isEdit) {\n        await updateSmlouva({\n          token: token,\n          username: user.username,\n          id: smlouva.id,\n          smlouvaData: dataToSave\n        });\n        // spn aktualizace - zavt modal a reloadnout data\n      } else {\n        await createSmlouva({\n          token: token,\n          username: user.username,\n          smlouvaData: dataToSave\n        });\n        // spn vytvoen - zavt modal a reloadnout data\n      }\n\n      onClose(true);\n    } catch (err) {\n      // Pevedeme systmov chyby na lidsky iteln zprvy\n      let userMessage = err.message;\n      \n      // SQL chyby - neplatn datum\n      if (err.message.includes('Invalid datetime format') || err.message.includes('Incorrect date')) {\n        userMessage = 'Neplatn formt data. Zkontrolujte, prosm, zadan data.';\n      }\n      // SQL chyby - duplicitn zznam\n      else if (err.message.includes('Duplicate entry')) {\n        userMessage = 'Smlouva s tmto slem ji existuje.';\n      }\n      // SQL chyby - ciz kl\n      else if (err.message.includes('foreign key constraint')) {\n        userMessage = 'Chyba propojen dat. Zkontrolujte vybran poloky.';\n      }\n      // SQL chyby - obecn\n      else if (err.message.includes('SQLSTATE')) {\n        userMessage = 'Chyba pi ukldn dat. Zkontrolujte vyplnn daje.';\n      }\n      \n      // Zobrazme error inline v modalu\n      setErrors(prev => ({ ...prev, _global: userMessage }));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // =============================================================================\n  // ARES FUNKCE\n  // =============================================================================\n\n  const handleAresSearch = () => {\n    const currentName = formData.nazev_firmy || '';\n    const currentICO = formData.ico || '';\n    const searchTerm = currentName || currentICO;\n\n    setAresSearch(searchTerm);\n    setAresPopupOpen(true);\n    if (searchTerm && searchTerm.length >= 2) {\n      fetchAresData(searchTerm);\n    }\n  };\n\n  const fetchAresData = async (searchTerm = '') => {\n    const trimmedSearchTerm = searchTerm?.trim();\n    if (!trimmedSearchTerm || trimmedSearchTerm.length < 3) {\n      setAresResults([]);\n      return;\n    }\n\n    try {\n      setLoadingAres(true);\n\n      // Check if search term is numeric (IO) or text (nzev)\n      const isICO = /^\\d+$/.test(trimmedSearchTerm);\n\n      if (isICO) {\n        // Search by IO - direct endpoint\n        const url = `https://ares.gov.cz/ekonomicke-subjekty-v-be/rest/ekonomicke-subjekty/${trimmedSearchTerm}`;\n        const response = await fetch(url, {\n          method: 'GET',\n          headers: { 'Accept': 'application/json' }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          const result = {\n            ico: data.ico,\n            dic: data.dic || '',\n            nazev: data.obchodniJmeno || '',\n            adresa: data.sidlo?.textovaAdresa || ''\n          };\n          setAresResults([result]);\n        } else {\n          setAresResults([]);\n        }\n      } else {\n        // Search by nzev - search endpoint\n        const url = 'https://ares.gov.cz/ekonomicke-subjekty-v-be/rest/ekonomicke-subjekty/vyhledat';\n        \n        const requestData = {\n          obchodniJmeno: trimmedSearchTerm,\n          pocet: 25\n        };\n\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(requestData)\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          const results = (data.ekonomickeSubjekty || []).map(item => ({\n            ico: item.ico,\n            dic: item.dic || '',\n            nazev: item.obchodniJmeno || '',\n            adresa: item.sidlo?.textovaAdresa || ''\n          }));\n          setAresResults(results);\n        } else {\n          setAresResults([]);\n        }\n      }\n\n    } catch (error) {\n      setAresResults([]);\n      console.error('Chyba pi pipojen k ARES:', error);\n    } finally {\n      setLoadingAres(false);\n    }\n  };\n\n  const handleAresSearchChange = (e) => {\n    const value = e.target.value;\n    setAresSearch(value);\n\n    // Debounce search\n    if (value.length >= 2) {\n      clearTimeout(window.aresSearchTimeout);\n      window.aresSearchTimeout = setTimeout(() => {\n        fetchAresData(value);\n      }, 500);\n    } else {\n      setAresResults([]);\n    }\n  };\n\n  const handleAresSelect = (aresItem) => {\n    setFormData(prev => ({\n      ...prev,\n      nazev_firmy: aresItem.nazev || '',\n      ico: aresItem.ico || '',\n      dic: aresItem.dic || ''\n    }));\n\n    setAresPopupOpen(false);\n    setAresSearch('');\n    setAresResults([]);\n  };\n\n  // =============================================================================\n  // OSTATN HANDLERY\n  // =============================================================================\n\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    \n    // Zvrazni pole po zmn\n    markFieldAsChanged(field);\n    \n    // Clear error for this field\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[field];\n        return newErrors;\n      });\n    }\n  };\n\n  // =============================================================================\n  // RENDER\n  // =============================================================================\n\n  return ReactDOM.createPortal(\n    <Overlay>\n      <Modal>\n        <Header>\n          <Title>\n            {isEdit ? 'Upravit smlouvu' : 'Nov smlouva'}\n          </Title>\n          <CloseButton onClick={() => !saving && onClose(false)}>\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </Header>\n\n        {errors._global && (\n          <div style={{ padding: '1rem 1.5rem', background: '#fee2e2', borderLeft: '4px solid #dc2626', color: '#dc2626', fontWeight: 600 }}>\n             {errors._global}\n          </div>\n        )}\n\n        <Body>\n          <FormGrid>\n            {/* === ZKLADN DAJE === */}\n            <SectionHeader $first>\n              <h3>Zkladn daje</h3>\n            </SectionHeader>\n\n            <HintBox>\n              Povinn poloky jsou oznaeny hvzdikou (*). DPH se pot automaticky.\n            </HintBox>\n\n            {/* slo smlouvy */}\n            <FormField>\n              <Label className=\"required\">slo smlouvy</Label>\n              <Input\n                type=\"text\"\n                value={formData.cislo_smlouvy}\n                onChange={(e) => handleChange('cislo_smlouvy', e.target.value)}\n                $error={errors.cislo_smlouvy}\n                $highlight={recentlyChangedFields.has('cislo_smlouvy')}\n                placeholder=\"nap. S-147/750309/26/23\"\n              />\n              {errors.cislo_smlouvy && <ErrorText>{errors.cislo_smlouvy}</ErrorText>}\n            </FormField>\n\n            {/* sek */}\n            <FormField>\n              <Label className=\"required\">sek</Label>\n              <Select\n                value={formData.usek_id}\n                onChange={(e) => handleChange('usek_id', e.target.value)}\n                $error={errors.usek_id}\n                $highlight={recentlyChangedFields.has('usek_id')}\n              >\n                <option value=\"\">Vyberte sek</option>\n                {useky.map(usek => (\n                  <option key={usek.id} value={usek.id}>\n                    {usek.usek_zkr} - {usek.usek_nazev}\n                  </option>\n                ))}\n              </Select>\n              {errors.usek_id && <ErrorText>{errors.usek_id}</ErrorText>}\n            </FormField>\n\n            {/* Druh smlouvy */}\n            <FormField>\n              <Label className=\"required\">Druh smlouvy</Label>\n              <Select\n                value={formData.druh_smlouvy}\n                onChange={(e) => handleChange('druh_smlouvy', e.target.value)}\n                $error={errors.druh_smlouvy}\n                $highlight={recentlyChangedFields.has('druh_smlouvy')}\n                disabled={loadingDruhy}\n              >\n                {loadingDruhy ? (\n                  <option value=\"\">Natm druhy smluv...</option>\n                ) : (\n                  druhySmluv.map(opt => (\n                    <option key={opt.value} value={opt.value} title={opt.popis}>\n                      {opt.label}\n                    </option>\n                  ))\n                )}\n              </Select>\n              {errors.druh_smlouvy && <ErrorText>{errors.druh_smlouvy}</ErrorText>}\n              {formData.druh_smlouvy && druhySmluv.find(d => d.value === formData.druh_smlouvy)?.popis && (\n                <InfoText>\n                  {druhySmluv.find(d => d.value === formData.druh_smlouvy).popis}\n                </InfoText>\n              )}\n            </FormField>\n\n            {/* Checkboxy: Aktivn + Pouit v obj. formuli */}\n            <FormField $fullWidth style={{ \n              display: 'grid', \n              gridTemplateColumns: '1fr 1fr', \n              gap: '1rem',\n              alignItems: 'start'\n            }}>\n              {/* Aktivn */}\n              <div>\n                <Label>Stav smlouvy</Label>\n                <ToggleSwitch>\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.aktivni === 1}\n                    onChange={(e) => handleChange('aktivni', e.target.checked ? 1 : 0)}\n                  />\n                  <span className=\"slider\" />\n                  <span className=\"label-text\">{formData.aktivni === 1 ? ' Aktivn' : ' Neaktivn'}</span>\n                </ToggleSwitch>\n              </div>\n\n              {/* Pout v obj. formuli */}\n              <div>\n                <Label>Pouit v objednvkch</Label>\n                <ToggleSwitch>\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.pouzit_v_obj_formu === 1}\n                    onChange={(e) => handleChange('pouzit_v_obj_formu', e.target.checked ? 1 : 0)}\n                  />\n                  <span className=\"slider\" />\n                  <span className=\"label-text\">\n                    {formData.pouzit_v_obj_formu === 1 \n                      ? ' Pout v obj. formuli' \n                      : ' Pouze faktury'}\n                  </span>\n                </ToggleSwitch>\n                {formData.pouzit_v_obj_formu === 1 ? (\n                  <InfoText style={{ marginTop: '0.5rem' }}>\n                     Smlouva se nabz pi vytven objednvek\n                  </InfoText>\n                ) : (\n                  <InfoText style={{ marginTop: '0.5rem', color: '#f59e0b' }}>\n                     Pouze v modulu faktur\n                  </InfoText>\n                )}\n              </div>\n            </FormField>\n\n            {/* === DODAVATEL === */}\n            <SectionHeader>\n              <h3>Dodavatel</h3>\n            </SectionHeader>\n\n            {/* Nzev firmy */}\n            <FormField $fullWidth>\n              <Label className=\"required\">Nzev firmy</Label>\n              <Input\n                type=\"text\"\n                value={formData.nazev_firmy}\n                onChange={(e) => handleChange('nazev_firmy', e.target.value)}\n                $error={errors.nazev_firmy}\n                $highlight={recentlyChangedFields.has('nazev_firmy')}\n                placeholder=\"nap. Alter Audit, s.r.o.\"\n              />\n              {errors.nazev_firmy && <ErrorText>{errors.nazev_firmy}</ErrorText>}\n            </FormField>\n\n            {/* IO */}\n            <FormField>\n              <Label className=\"required\">IO</Label>\n              <InputWithIcon>\n                <Input\n                  type=\"text\"\n                  value={formData.ico}\n                  onChange={(e) => handleInputChange('ico', e.target.value)}\n                  $error={errors.ico}\n                  placeholder=\"8 slic\"\n                  maxLength=\"8\"\n                />\n                <AresSearchIcon\n                  onClick={handleAresSearch}\n                  title=\"Ovit a nast daje z ARES\"\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"/>\n                    <path d=\"M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5\"/>\n                    <path d=\"M3 12c0 1.66 4.03 3 9 3s9-1.34 9-3\"/>\n                  </svg>\n                </AresSearchIcon>\n              </InputWithIcon>\n              {errors.ico && <ErrorText>{errors.ico}</ErrorText>}\n            </FormField>\n\n            {/* DI */}\n            <FormField>\n              <Label>DI</Label>\n              <Input\n                type=\"text\"\n                value={formData.dic}\n                onChange={(e) => handleChange('dic', e.target.value)}\n                $highlight={recentlyChangedFields.has('dic')}\n                placeholder=\"nap. CZ12345678\"\n              />\n            </FormField>\n\n            {/* === NZEV A POPIS === */}\n            <SectionHeader>\n              <h3>Nzev a popis</h3>\n            </SectionHeader>\n\n            {/* Nzev smlouvy */}\n            <FormField $fullWidth>\n              <Label className=\"required\">Nzev smlouvy</Label>\n              <Input\n                type=\"text\"\n                value={formData.nazev_smlouvy}\n                onChange={(e) => handleChange('nazev_smlouvy', e.target.value)}\n                $error={errors.nazev_smlouvy}\n                placeholder=\"nap. Smlouva o poskytovn poradenskch slueb\"\n              />\n              {errors.nazev_smlouvy && <ErrorText>{errors.nazev_smlouvy}</ErrorText>}\n            </FormField>\n\n            {/* Popis smlouvy */}\n            <FormField $fullWidth>\n              <Label>Popis smlouvy</Label>\n              <TextArea\n                value={formData.popis_smlouvy}\n                onChange={(e) => handleChange('popis_smlouvy', e.target.value)}\n                $highlight={recentlyChangedFields.has('popis_smlouvy')}\n                placeholder=\"Detailn popis smlouvy (nepovinn)...\"\n              />\n            </FormField>\n\n            {/* === PLATNOST A HODNOTA === */}\n            <SectionHeader>\n              <h3>Platnost a hodnota</h3>\n            </SectionHeader>\n\n            {/* Prvn dek: Platnost od | Platnost do | Sazba DPH */}\n            <ThreeColumnRow>\n              {/* Platnost od */}\n              <InnerFormField>\n                <Label>Platnost od</Label>\n                <DatePicker\n                  value={formData.platnost_od}\n                  onChange={(value) => handleChange('platnost_od', value)}\n                  placeholder=\"Vyberte datum od\"\n                  hasError={!!errors.platnost_od}\n                  highlight={recentlyChangedFields.has('platnost_od')}\n                />\n                {errors.platnost_od && <ErrorText>{errors.platnost_od}</ErrorText>}\n              </InnerFormField>\n\n              {/* Platnost do */}\n              <InnerFormField>\n                <Label className=\"required\">Platnost do</Label>\n                <DatePicker\n                  value={formData.platnost_do}\n                  onChange={(value) => handleChange('platnost_do', value)}\n                  placeholder=\"Vyberte datum do\"\n                  hasError={!!errors.platnost_do}\n                  highlight={recentlyChangedFields.has('platnost_do')}\n                />\n                {errors.platnost_do && <ErrorText>{errors.platnost_do}</ErrorText>}\n              </InnerFormField>\n\n              {/* Sazba DPH */}\n              <InnerFormField>\n                <Label>Sazba DPH (%)</Label>\n                <Select\n                  value={formData.sazba_dph}\n                  onChange={(e) => handleSazbaDphChange(e.target.value)}\n                  $highlight={recentlyChangedFields.has('sazba_dph')}\n                >\n                  {SAZBA_DPH_OPTIONS.map(opt => (\n                    <option key={opt.value} value={opt.value}>{opt.label}</option>\n                  ))}\n                </Select>\n              </InnerFormField>\n            </ThreeColumnRow>\n\n            {/* Druh dek: Hodnota plnn bez DPH | Hodnota plnn s DPH | (przdn) */}\n            <ThreeColumnRow>\n              {/* Hodnota plnn bez DPH */}\n              <InnerFormField>\n                <Label>Hodnota plnn bez DPH (K)</Label>\n                <CurrencyInput\n                  fieldName=\"hodnota_plneni_bez_dph\"\n                  value={formData.hodnota_plneni_bez_dph}\n                  onChange={(fieldName, value) => handleHodnotaPlneniBezDphChange(value)}\n                  highlight={recentlyChangedFields.has('hodnota_plneni_bez_dph')}\n                  placeholder=\"0,00\"\n                />\n                <InfoText> Hodnota s DPH se dopot</InfoText>\n              </InnerFormField>\n\n              {/* Hodnota plnn s DPH */}\n              <InnerFormField>\n                <Label>Hodnota plnn s DPH (K)</Label>\n                <CurrencyInput\n                  fieldName=\"hodnota_plneni_s_dph\"\n                  value={formData.hodnota_plneni_s_dph}\n                  onChange={(fieldName, value) => handleHodnotaPlneniSDphChange(value)}\n                  highlight={recentlyChangedFields.has('hodnota_plneni_s_dph')}\n                  placeholder=\"0,00\"\n                />\n              </InnerFormField>\n\n              {/* Przdn sloupec */}\n              <InnerFormField></InnerFormField>\n            </ThreeColumnRow>\n\n            {/* Tet dek: Poten stav bez DPH | Poten stav s DPH | (przdn) */}\n            <ThreeColumnRow>\n              {/* Poten stav bez DPH */}\n              <InnerFormField>\n                <Label className=\"required\">Poten stav bez DPH (K)</Label>\n                <CurrencyInput\n                  fieldName=\"hodnota_bez_dph\"\n                  value={formData.hodnota_bez_dph}\n                  onChange={(fieldName, value) => handleHodnotaBezDphChange(value)}\n                  hasError={!!errors.hodnota_bez_dph}\n                  highlight={recentlyChangedFields.has('hodnota_bez_dph')}\n                  placeholder=\"0,00\"\n                />\n                {errors.hodnota_bez_dph && <ErrorText>{errors.hodnota_bez_dph}</ErrorText>}\n                <InfoText> Hodnota s DPH se dopot</InfoText>\n              </InnerFormField>\n\n              {/* Poten stav s DPH */}\n              <InnerFormField>\n                <Label className=\"required\">Poten stav s DPH (K)</Label>\n                <CurrencyInput\n                  fieldName=\"hodnota_s_dph\"\n                  value={formData.hodnota_s_dph}\n                  onChange={(fieldName, value) => handleHodnotaSDphChange(value)}\n                  hasError={!!errors.hodnota_s_dph}\n                  highlight={recentlyChangedFields.has('hodnota_s_dph')}\n                  placeholder=\"0,00\"\n                />\n                {errors.hodnota_s_dph && <ErrorText>{errors.hodnota_s_dph}</ErrorText>}\n              </InnerFormField>\n\n              {/* Przdn sloupec */}\n              <InnerFormField></InnerFormField>\n            </ThreeColumnRow>\n\n            {/* === VOLITELN DAJE === */}\n            <SectionHeader \n              $collapsible \n              $collapsed={!showOptionalFields}\n              onClick={() => setShowOptionalFields(!showOptionalFields)}\n            >\n              <h3>Voliteln daje</h3>\n              <FontAwesomeIcon icon={faChevronDown} className=\"toggle-icon\" />\n            </SectionHeader>\n\n            <CollapsibleContent $collapsed={!showOptionalFields}>\n              {/* slo DMS */}\n              <FormField>\n                <Label>slo DMS</Label>\n                <Input\n                  type=\"text\"\n                  value={formData.cislo_dms}\n                  onChange={(e) => handleChange('cislo_dms', e.target.value)}\n                  placeholder=\"nap. DMS-2025-123\"\n                />\n              </FormField>\n\n              {/* Kategorie */}\n              <FormField>\n                <Label>Kategorie</Label>\n                <Input\n                  type=\"text\"\n                  value={formData.kategorie}\n                  onChange={(e) => handleChange('kategorie', e.target.value)}\n                  placeholder=\"nap. IT, Poradenstv\"\n                />\n              </FormField>\n\n              {/* Poznmka */}\n              <FormField $fullWidth>\n                <Label>Intern poznmka</Label>\n                <TextArea\n                  value={formData.poznamka}\n                  onChange={(e) => handleChange('poznamka', e.target.value)}\n                  $highlight={recentlyChangedFields.has('poznamka')}\n                  placeholder=\"Intern poznmka (nezobrazuje se veejn)...\"\n                />\n              </FormField>\n            </CollapsibleContent>\n          </FormGrid>\n        </Body>\n\n        <Footer>\n          <Button onClick={() => !saving && onClose(false)} disabled={saving}>\n            Zruit\n          </Button>\n          <Button $variant=\"primary\" onClick={handleSave} disabled={saving}>\n            {saving ? (\n              <>\n                <FontAwesomeIcon icon={faSpinner} spin />\n                Ukldm...\n              </>\n            ) : (\n              <>\n                <FontAwesomeIcon icon={faSave} />\n                {isEdit ? 'Uloit zmny' : 'Pidat smlouvu'}\n              </>\n            )}\n          </Button>\n        </Footer>\n      </Modal>\n\n      {/* ARES Popup */}\n      {aresPopupOpen && ReactDOM.createPortal(\n        <AresPopupOverlay onClick={() => {\n          setAresPopupOpen(false);\n          setAresSearch('');\n          setAresResults([]);\n        }}>\n          <AresPopupModal onClick={(e) => e.stopPropagation()}>\n            <AresPopupHeader>\n              <AresPopupTitle>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"/>\n                  <path d=\"M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5\"/>\n                  <path d=\"M3 12c0 1.66 4.03 3 9 3s9-1.34 9-3\"/>\n                </svg>\n                ARES - Vyhledvn firem\n              </AresPopupTitle>\n              <AresPopupCloseButton\n                onClick={() => {\n                  setAresPopupOpen(false);\n                  setAresSearch('');\n                  setAresResults([]);\n                }}\n              >\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\n                </svg>\n              </AresPopupCloseButton>\n            </AresPopupHeader>\n\n            <AresPopupContent>\n              <AresSearchInputField\n                type=\"text\"\n                placeholder=\"Vyhledat podle nzvu firmy nebo IO...\"\n                value={aresSearch}\n                onChange={handleAresSearchChange}\n                autoFocus\n              />\n\n              <AresList>\n                {loadingAres ? (\n                  <AresLoadingSpinner>\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}>\n                      <path d=\"M21 12a9 9 0 11-6.219-8.56\"/>\n                    </svg>\n                    <span style={{ marginLeft: '12px' }}>Vyhledvm v ARES...</span>\n                  </AresLoadingSpinner>\n                ) : aresResults.length > 0 ? (\n                  aresResults.map((aresItem, index) => (\n                    <AresItem key={index} onClick={() => handleAresSelect(aresItem)}>\n                      <div style={{ fontWeight: '600', color: '#111827', marginBottom: '8px' }}>\n                        {aresItem.nazev}\n                      </div>\n                      <div style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '4px' }}>\n                        {aresItem.adresa}\n                      </div>\n                      <div style={{ fontSize: '0.875rem', color: '#6b7280' }}>\n                        IO: {aresItem.ico} {aresItem.dic && ` DI: ${aresItem.dic}`}\n                      </div>\n                    </AresItem>\n                  ))\n                ) : aresSearch.length >= 2 ? (\n                  <div style={{ padding: '2rem', textAlign: 'center', color: '#6b7280' }}>\n                    dn vsledky nenalezeny\n                  </div>\n                ) : (\n                  <div style={{ padding: '2rem', textAlign: 'center', color: '#6b7280' }}>\n                    Zadejte nzev firmy nebo IO pro vyhledn\n                  </div>\n                )}\n              </AresList>\n            </AresPopupContent>\n          </AresPopupModal>\n        </AresPopupOverlay>,\n        document.body\n      )}\n    </Overlay>,\n    document.body\n  );\n};\n\nexport default SmlouvyFormModal;\n","/**\n * SmlouvyDetailModal - Detail smlouvy se statistikami a objednvkami\n * \n * Funkce:\n * - Zobrazen vech daj smlouvy\n * - Seznam navzanch objednvek\n * - Statistiky erpn\n * - Progress bar erpn\n * - Tlatko pro pepoet erpn\n * - Tlatko pro editaci\n * \n * @author Frontend Team\n * @date 2025-11-23\n */\n\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faTimes, faEdit, faSyncAlt, faSpinner, faFileContract,\n  faBuilding, faCalendar, faMoneyBillWave, faChartLine, faExclamationTriangle, faBolt\n} from '@fortawesome/free-solid-svg-icons';\nimport { useNavigate } from 'react-router-dom';\n\nimport ConfirmDialog from '../../ConfirmDialog';\n\nimport { useContext } from 'react';\nimport AuthContext from '../../../context/AuthContext';\nimport { prepocetCerpaniSmluv } from '../../../services/apiSmlouvy';\nimport draftManager from '../../../services/DraftManager';\nimport { isValidConcept, hasDraftChanges } from '../../../utils/draftUtils';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 0.5rem;\n`;\n\nconst Modal = styled.div`\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  height: 98vh;\n  max-width: 98vw;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n`;\n\nconst Header = styled.div`\n  padding: 0.875rem 1.25rem;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  border-radius: 8px 8px 0 0;\n`;\n\nconst Title = styled.h2`\n  margin: 0;\n  font-size: 1.125rem;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst HeaderButtons = styled.div`\n  display: flex;\n  gap: 0.5rem;\n`;\n\nconst HeaderButton = styled.button`\n  padding: 0.5rem 0.75rem;\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    transform: translateY(-1px);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst Body = styled.div`\n  padding: 0.875rem;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst Section = styled.div`\n  margin-bottom: 1rem;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst SectionTitle = styled.h3`\n  font-size: 0.875rem;\n  color: #1e293b;\n  margin-bottom: 0.625rem;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.5rem 0.625rem;\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  border-radius: 4px;\n  font-weight: 600;\n`;\n\nconst InfoGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.625rem;\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst InfoItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem 0.625rem;\n  background: #f8fafc;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n`;\n\nconst InfoLabel = styled.span`\n  font-size: 0.7rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n`;\n\nconst InfoValue = styled.span`\n  font-size: 0.875rem;\n  color: #1e293b;\n  font-weight: 500;\n`;\n\nconst Badge = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ${props => props.$color || '#e2e8f0'};\n  color: white;\n  display: inline-block;\n`;\n\nconst ProgressSection = styled.div`\n  background: #f8fafc;\n  padding: 0.875rem;\n  border-radius: 6px;\n  margin-bottom: 0.875rem;\n  border: 2px solid #e2e8f0;\n`;\n\nconst ProgressTitle = styled.div`\n  font-size: 0.9rem;\n  color: #64748b;\n  margin-bottom: 0.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 20px;\n  background: #e2e8f0;\n  border-radius: 10px;\n  overflow: hidden;\n  position: relative;\n  margin-bottom: 0.625rem;\n`;\n\nconst ProgressFill = styled.div`\n  height: 100%;\n  background: ${props => {\n    const percent = parseFloat(props.$percent) || 0;\n    if (percent >= 90) return 'linear-gradient(to right, #dc2626, #ef4444)';\n    if (percent >= 75) return 'linear-gradient(to right, #d97706, #f59e0b)';\n    if (percent >= 50) return 'linear-gradient(to right, #2563eb, #3b82f6)';\n    return 'linear-gradient(to right, #059669, #10b981)';\n  }};\n  width: ${props => Math.min(parseFloat(props.$percent) || 0, 100)}%;\n  transition: width 0.5s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.85rem;\n`;\n\nconst StatsGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.625rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst StatCard = styled.div`\n  background: white;\n  padding: 0.625rem;\n  border-radius: 6px;\n  border: 1px solid #e2e8f0;\n  text-align: center;\n`;\n\nconst StatValue = styled.div`\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: ${props => props.$color || '#1e293b'};\n  margin-bottom: 0.125rem;\n`;\n\nconst StatLabel = styled.div`\n  font-size: 0.75rem;\n  color: #64748b;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.9rem;\n`;\n\nconst Thead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 0.5rem 0.625rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst Tbody = styled.tbody``;\n\nconst Tr = styled.tr`\n  border-bottom: 1px solid #e2e8f0;\n\n  &:hover {\n    background: #f8fafc;\n  }\n`;\n\nconst Td = styled.td`\n  padding: 0.5rem 0.625rem;\n  font-size: 0.875rem;\n`;\n\nconst EmptyState = styled.div`\n  padding: 2rem;\n  text-align: center;\n  color: #94a3b8;\n  font-size: 0.9rem;\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst SmlouvyDetailModal = ({ smlouva, onClose, onEdit }) => {\n  const { user, token, user_id } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [recalculating, setRecalculating] = useState(false);\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  \n  // State pro draft warning dialog\n  const [showDraftWarning, setShowDraftWarning] = useState(false);\n  const [orderToEdit, setOrderToEdit] = useState(null);\n  const [currentDraftData, setCurrentDraftData] = useState(null);\n\n  const { smlouva: smlouvaData, objednavky, statistiky } = smlouva;\n\n  // =============================================================================\n  // HANDLERS\n  // =============================================================================\n\n  const handleEditOrder = async (obj) => {\n    //  KONTROLA DRAFTU - obdobn jako v Orders25List.js\n    // Zkontroluj, jestli existuje validn koncept nebo editace pro JINOU objednvku\n    \n    draftManager.setCurrentUser(user_id);\n    const hasDraft = await draftManager.hasDraft();\n\n    let shouldShowConfirmDialog = false;\n    let draftDataToStore = null;\n    let isDraftForThisOrder = false;\n\n    if (hasDraft) {\n      try {\n        const draftData = await draftManager.loadDraft();\n\n        //  KONTROLA OWNERSHIP: Pat draft k TTO objednvce?\n        const draftOrderId = draftData.savedOrderId || draftData.formData?.id;\n        const currentOrderId = obj.id;\n\n        //  Pokud draft pat k TTO objednvce, NEPTAT SE!\n        if (draftOrderId && currentOrderId && String(draftOrderId) === String(currentOrderId)) {\n          shouldShowConfirmDialog = false; // Draft pat k tto objednvce - pouij ho tie\n          isDraftForThisOrder = true;\n        } else {\n          //  Draft pat k JIN objednvce - zeptej se\n          const hasNewConcept = isValidConcept(draftData);\n          const hasDbChanges = hasDraftChanges(draftData);\n          shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n          if (shouldShowConfirmDialog) {\n            draftDataToStore = draftData; // Ulo pro zobrazen v modalu\n          }\n        }\n\n      } catch (error) {\n        console.error('Chyba pi natn draft dat:', error);\n        shouldShowConfirmDialog = false;\n      }\n    }\n\n    //  OPTIMALIZACE: Pokud draft pat k TTO objednvce, rovnou naviguj bez reload\n    if (isDraftForThisOrder) {\n      // Draft u existuje pro tuto objednvku - pouze naviguj na formul\n      // NEMAZAT draft, NENATAT znovu z DB\n      navigate(`/order-form-25?edit=${obj.id}`);\n      return;\n    }\n\n    // KONTROLA: Pokud existuje draft pro JINOU objednvku, zobraz confirm\n    if (shouldShowConfirmDialog) {\n      setCurrentDraftData(draftDataToStore);\n      setOrderToEdit(obj);\n      setShowDraftWarning(true);\n      return;\n    }\n\n    //  dn draft nebo draft nepat k jin objednvce - jdi rovnou\n    navigate(`/order-form-25?edit=${obj.id}`);\n  };\n\n  const handleDraftWarningConfirm = () => {\n    setShowDraftWarning(false);\n    // Sma star draft a otevi novou objednvku\n    draftManager.setCurrentUser(user_id);\n    draftManager.deleteDraft();\n    \n    if (orderToEdit) {\n      navigate(`/order-form-25?edit=${orderToEdit.id}`);\n    }\n  };\n\n  const handleDraftWarningCancel = () => {\n    setShowDraftWarning(false);\n    setOrderToEdit(null);\n    setCurrentDraftData(null);\n  };\n\n  const handlePrepocet = async () => {\n    setShowConfirm(false);\n    try {\n      setRecalculating(true);\n      setSuccessMessage(null);\n      setErrorMessage(null);\n      await prepocetCerpaniSmluv({\n        token: token,\n        username: user.username,\n        cislo_smlouvy: smlouvaData.cislo_smlouvy,\n        usek_id: null\n      });\n      setSuccessMessage('pn bylo spn pepotno. Pro zobrazen aktualizovanch dat zavete a znovu otevete detail.');\n    } catch (err) {\n      setErrorMessage('Chyba pi pepotu: ' + err.message);\n    } finally {\n      setRecalculating(false);\n    }\n  };\n\n  // =============================================================================\n  // FORMAT HELPERS\n  // =============================================================================\n\n  const formatCurrency = (value) => {\n    const num = parseFloat(value) || 0;\n    return new Intl.NumberFormat('cs-CZ', {\n      style: 'currency',\n      currency: 'CZK',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(num);\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return '-';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('cs-CZ');\n  };\n\n  const formatDateTime = (dateString) => {\n    if (!dateString) return '-';\n    const date = new Date(dateString);\n    return date.toLocaleString('cs-CZ');\n  };\n\n  const getStavColor = (stav) => {\n    switch (stav) {\n      case 'AKTIVNI': return '#10b981';\n      case 'UKONCENA': return '#6b7280';\n      case 'PRERUSENA': return '#f59e0b';\n      case 'PRIPRAVOVANA': return '#3b82f6';\n      default: return '#6b7280';\n    }\n  };\n\n  // =============================================================================\n  // RENDER\n  // =============================================================================\n\n  return ReactDOM.createPortal(\n    <Overlay onClick={(e) => e.target === e.currentTarget && onClose()}>\n      <Modal>\n        <Header>\n          <Title>\n            <FontAwesomeIcon icon={faFileContract} />\n            Detail smlouvy\n          </Title>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n            <HeaderButtons>\n              <HeaderButton onClick={onEdit}>\n                <FontAwesomeIcon icon={faEdit} />\n                Upravit\n              </HeaderButton>\n              <HeaderButton onClick={() => setShowConfirm(true)} disabled={recalculating}>\n                <FontAwesomeIcon icon={recalculating ? faSpinner : faSyncAlt} spin={recalculating} />\n                Pepotat erpn\n              </HeaderButton>\n            </HeaderButtons>\n            <CloseButton onClick={onClose}>\n              <FontAwesomeIcon icon={faTimes} />\n            </CloseButton>\n          </div>\n        </Header>\n\n        {successMessage && (\n          <div style={{ padding: '1rem 1.5rem', background: '#f0fdf4', borderLeft: '4px solid #10b981', color: '#047857', fontWeight: 600 }}>\n             {successMessage}\n          </div>\n        )}\n        {errorMessage && (\n          <div style={{ padding: '1rem 1.5rem', background: '#fee2e2', borderLeft: '4px solid #dc2626', color: '#dc2626', fontWeight: 600 }}>\n             {errorMessage}\n          </div>\n        )}\n\n        <Body>\n          {/* Progress Section */}\n          <ProgressSection>\n            <ProgressTitle>\n              <span>erpn smlouvy</span>\n              <span style={{ fontWeight: 600, fontSize: '1rem' }}>\n                {formatCurrency(smlouvaData.cerpano_celkem)} / {formatCurrency(smlouvaData.hodnota_s_dph)}\n              </span>\n            </ProgressTitle>\n            <ProgressBar>\n              <ProgressFill $percent={smlouvaData.procento_cerpani}>\n                {parseFloat(smlouvaData.procento_cerpani || 0).toFixed(1)}%\n              </ProgressFill>\n            </ProgressBar>\n            <StatsGrid>\n              <StatCard>\n                <StatValue $color=\"#3b82f6\">\n                  {formatCurrency(smlouvaData.cerpano_celkem)}\n                </StatValue>\n                <StatLabel>erpno</StatLabel>\n              </StatCard>\n              <StatCard>\n                <StatValue $color=\"#10b981\">\n                  {formatCurrency(smlouvaData.zbyva)}\n                </StatValue>\n                <StatLabel>Zbv</StatLabel>\n              </StatCard>\n              <StatCard>\n                <StatValue>{statistiky?.pocet_objednavek || 0}</StatValue>\n                <StatLabel>Objednvek</StatLabel>\n              </StatCard>\n            </StatsGrid>\n          </ProgressSection>\n\n          {/* Zkladn daje */}\n          <Section>\n            <SectionTitle>\n              <FontAwesomeIcon icon={faFileContract} />\n              Zkladn daje\n            </SectionTitle>\n            <InfoGrid>\n              <InfoItem>\n                <InfoLabel>slo smlouvy</InfoLabel>\n                <InfoValue>\n                  <strong>{smlouvaData.cislo_smlouvy}</strong>\n                </InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>sek</InfoLabel>\n                <InfoValue>{smlouvaData.usek_zkr}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Druh smlouvy</InfoLabel>\n                <InfoValue>{smlouvaData.druh_smlouvy}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Stav</InfoLabel>\n                <InfoValue>\n                  <Badge $color={getStavColor(smlouvaData.stav)}>\n                    {smlouvaData.stav}\n                  </Badge>\n                </InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Nzev smlouvy</InfoLabel>\n                <InfoValue>{smlouvaData.nazev_smlouvy}</InfoValue>\n              </InfoItem>\n              {smlouvaData.popis_smlouvy && (\n                <InfoItem style={{ gridColumn: '1 / -1' }}>\n                  <InfoLabel>Popis</InfoLabel>\n                  <InfoValue>{smlouvaData.popis_smlouvy}</InfoValue>\n                </InfoItem>\n              )}\n            </InfoGrid>\n          </Section>\n\n          {/* Smluvn strana */}\n          <Section>\n            <SectionTitle>\n              <FontAwesomeIcon icon={faBuilding} />\n              Smluvn strana\n            </SectionTitle>\n            <InfoGrid>\n              <InfoItem>\n                <InfoLabel>Nzev firmy</InfoLabel>\n                <InfoValue>{smlouvaData.nazev_firmy}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>IO</InfoLabel>\n                <InfoValue>{smlouvaData.ico || '-'}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>DI</InfoLabel>\n                <InfoValue>{smlouvaData.dic || '-'}</InfoValue>\n              </InfoItem>\n            </InfoGrid>\n          </Section>\n\n          {/* Platnost a finance */}\n          <Section>\n            <SectionTitle>\n              <FontAwesomeIcon icon={faMoneyBillWave} />\n              Platnost a finance\n            </SectionTitle>\n            <InfoGrid>\n              <InfoItem>\n                <InfoLabel>Platnost od</InfoLabel>\n                <InfoValue>{formatDate(smlouvaData.platnost_od)}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Platnost do</InfoLabel>\n                <InfoValue>{formatDate(smlouvaData.platnost_do)}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Sazba DPH</InfoLabel>\n                <InfoValue>{smlouvaData.sazba_dph}%</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Hodnota bez DPH</InfoLabel>\n                <InfoValue>{formatCurrency(smlouvaData.hodnota_bez_dph)}</InfoValue>\n              </InfoItem>\n              <InfoItem>\n                <InfoLabel>Hodnota s DPH</InfoLabel>\n                <InfoValue>\n                  <strong>{formatCurrency(smlouvaData.hodnota_s_dph)}</strong>\n                </InfoValue>\n              </InfoItem>\n            </InfoGrid>\n          </Section>\n\n          {/* Dodaten informace */}\n          {(smlouvaData.cislo_dms || smlouvaData.kategorie || smlouvaData.poznamka) && (\n            <Section>\n              <SectionTitle>Dodaten informace</SectionTitle>\n              <InfoGrid>\n                {smlouvaData.cislo_dms && (\n                  <InfoItem>\n                    <InfoLabel>slo DMS</InfoLabel>\n                    <InfoValue>{smlouvaData.cislo_dms}</InfoValue>\n                  </InfoItem>\n                )}\n                {smlouvaData.kategorie && (\n                  <InfoItem>\n                    <InfoLabel>Kategorie</InfoLabel>\n                    <InfoValue>{smlouvaData.kategorie}</InfoValue>\n                  </InfoItem>\n                )}\n                {smlouvaData.poznamka && (\n                  <InfoItem style={{ gridColumn: '1 / -1' }}>\n                    <InfoLabel>Poznmka</InfoLabel>\n                    <InfoValue>{smlouvaData.poznamka}</InfoValue>\n                  </InfoItem>\n                )}\n              </InfoGrid>\n            </Section>\n          )}\n\n          {/* Statistiky objednvek */}\n          {statistiky && (\n            <Section>\n              <SectionTitle>\n                <FontAwesomeIcon icon={faChartLine} />\n                Statistiky objednvek\n              </SectionTitle>\n              <InfoGrid>\n                <InfoItem>\n                  <InfoLabel>Prmrn objednvka</InfoLabel>\n                  <InfoValue>{formatCurrency(statistiky.prumerna_objednavka)}</InfoValue>\n                </InfoItem>\n                <InfoItem>\n                  <InfoLabel>Nejvt objednvka</InfoLabel>\n                  <InfoValue>{formatCurrency(statistiky.nejvetsi_objednavka)}</InfoValue>\n                </InfoItem>\n                <InfoItem>\n                  <InfoLabel>Nejmen objednvka</InfoLabel>\n                  <InfoValue>{formatCurrency(statistiky.nejmensi_objednavka)}</InfoValue>\n                </InfoItem>\n              </InfoGrid>\n            </Section>\n          )}\n\n          {/* Seznam objednvek */}\n          <Section>\n            <SectionTitle>\n              <FontAwesomeIcon icon={faFileContract} />\n              Navzan objednvky ({objednavky?.length || 0})\n            </SectionTitle>\n            {objednavky && objednavky.length > 0 ? (\n              <Table>\n                <Thead>\n                  <tr>\n                    <TableHeaderCell>Ev. slo</TableHeaderCell>\n                    <TableHeaderCell>Pedmt</TableHeaderCell>\n                    <TableHeaderCell style={{ textAlign: 'right' }}>stka s DPH</TableHeaderCell>\n                    <TableHeaderCell style={{ textAlign: 'center' }}>Datum piazen</TableHeaderCell>\n                    <TableHeaderCell style={{ textAlign: 'center' }}>Stav</TableHeaderCell>\n                    <TableHeaderCell style={{ textAlign: 'center' }}>\n                      <FontAwesomeIcon icon={faBolt} style={{ color: '#eab308', fontSize: '16px' }} />\n                    </TableHeaderCell>\n                  </tr>\n                </Thead>\n                <Tbody>\n                  {objednavky.map((obj, index) => (\n                    <Tr key={obj.id} style={{ background: index % 2 === 0 ? '#f8fafc' : 'white' }}>\n                      <Td><strong>{obj.ev_cislo}</strong></Td>\n                      <Td>{obj.predmet}</Td>\n                      <Td style={{ textAlign: 'right', fontWeight: 600 }}>{formatCurrency(obj.castka_s_dph)}</Td>\n                      <Td style={{ textAlign: 'center' }}>{formatDateTime(obj.dt_prirazeni)}</Td>\n                      <Td style={{ textAlign: 'center' }}>\n                        <Badge $color=\"#3b82f6\">{obj.stav}</Badge>\n                      </Td>\n                      <Td>\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                          <button\n                            onClick={() => handleEditOrder(obj)}\n                            title=\"Editovat objednvku\"\n                            style={{\n                              width: '1.75rem',\n                              height: '1.75rem',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              border: 'none',\n                              borderRadius: '6px',\n                              background: 'transparent',\n                              color: '#6b7280',\n                              cursor: 'pointer',\n                              transition: 'all 0.2s ease'\n                            }}\n                            onMouseEnter={(e) => {\n                              e.currentTarget.style.color = '#3b82f6';\n                              e.currentTarget.style.background = '#eff6ff';\n                            }}\n                            onMouseLeave={(e) => {\n                              e.currentTarget.style.color = '#6b7280';\n                              e.currentTarget.style.background = 'transparent';\n                            }}\n                          >\n                            <FontAwesomeIcon icon={faEdit} />\n                          </button>\n                        </div>\n                      </Td>\n                    </Tr>\n                  ))}\n                </Tbody>\n              </Table>\n            ) : (\n              <EmptyState>\n                dn objednvky nejsou k tto smlouv piazeny\n              </EmptyState>\n            )}\n          </Section>\n\n          {/* Metadata */}\n          <Section>\n            <SectionTitle>Metadata</SectionTitle>\n            <InfoGrid>\n              <InfoItem>\n                <InfoLabel>Vytvoeno</InfoLabel>\n                <InfoValue>{formatDateTime(smlouvaData.dt_vytvoreni)}</InfoValue>\n              </InfoItem>\n              {smlouvaData.dt_aktualizace && (\n                <InfoItem>\n                  <InfoLabel>Aktualizovno</InfoLabel>\n                  <InfoValue>{formatDateTime(smlouvaData.dt_aktualizace)}</InfoValue>\n                </InfoItem>\n              )}\n              {smlouvaData.posledni_prepocet && (\n                <InfoItem>\n                  <InfoLabel>Posledn pepoet</InfoLabel>\n                  <InfoValue>{formatDateTime(smlouvaData.posledni_prepocet)}</InfoValue>\n                </InfoItem>\n              )}\n            </InfoGrid>\n          </Section>\n        </Body>\n      </Modal>\n\n      <ConfirmDialog\n        isOpen={showConfirm}\n        title=\"Pepoet erpn smlouvy\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        onConfirm={handlePrepocet}\n        onClose={() => setShowConfirm(false)}\n      >\n        <p>Opravdu chcete pepotat erpn tto smlouvy?</p>\n        <p style={{ marginTop: '1rem', color: '#f59e0b', fontWeight: 600 }}>\n           Operace me trvat nkolik sekund.\n        </p>\n      </ConfirmDialog>\n\n      <ConfirmDialog\n        isOpen={showDraftWarning}\n        title=\"Rozdlan objednvka\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        onConfirm={handleDraftWarningConfirm}\n        onClose={handleDraftWarningCancel}\n        confirmText=\"Ano, pokraovat\"\n        cancelText=\"Ne, zruit\"\n      >\n        {currentDraftData && (() => {\n          const formData = currentDraftData.formData || currentDraftData;\n          const draftTitle = formData.ev_cislo || formData.cislo_objednavky || formData.predmet || ' KONCEPT ';\n          const isNewConcept = isValidConcept(currentDraftData);\n\n          return (\n            <>\n              <p style={{ background: '#fef3c7', padding: '0.75rem', borderRadius: '6px', border: '1px solid #f59e0b', margin: '0.5rem 0' }}>\n                <strong>Pozor:</strong> Mte rozepracovanou {isNewConcept ? 'novou objednvku' : 'editaci objednvky'}{' '}\n                <strong>{draftTitle}</strong>\n                . Pepnutm na jinou objednvku pijdete o neuloen zmny!\n              </p>\n              <p style={{ marginTop: '1rem', color: '#f59e0b', fontWeight: 600 }}>\n                 Pokud budete pokraovat, rozdlan objednvka bude smazna.\n              </p>\n              <p style={{ marginTop: '0.5rem', fontSize: '0.9rem', color: '#64748b' }}>\n                Chcete pokraovat a otevt tuto objednvku?\n              </p>\n            </>\n          );\n        })()}\n      </ConfirmDialog>\n\n    </Overlay>,\n    document.body\n  );\n};\n\nexport default SmlouvyDetailModal;\n","/**\n * SmlouvyImportModal - Hromadn import smluv z Excel/CSV\n * \n * Funkce:\n * - Drag & drop nebo file upload\n * - Parsovn Excel/CSV pomoc XLSX\n * - Mapovn sloupc na DB pole\n * - Preview dat ped importem\n * - Validace dat\n * - Progress indiktor\n * - Vsledky importu s chybami\n * \n * @author Frontend Team\n * @date 2025-11-23\n */\n\nimport React, { useState, useCallback } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faTimes, faFileUpload, faCheckCircle, faExclamationTriangle,\n  faDownload, faSpinner\n} from '@fortawesome/free-solid-svg-icons';\nimport * as XLSX from 'xlsx';\n\nimport ConfirmDialog from '../../ConfirmDialog';\n\nimport { useContext } from 'react';\nimport AuthContext from '../../../context/AuthContext';\nimport { bulkImportSmlouvy, DRUH_SMLOUVY_OPTIONS } from '../../../services/apiSmlouvy';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 0.5rem;\n`;\n\nconst Modal = styled.div`\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  height: 98vh;\n  max-width: 98vw;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n`;\n\nconst Header = styled.div`\n  padding: 1.25rem 1.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  border-radius: 12px 12px 0 0;\n`;\n\nconst Title = styled.h2`\n  margin: 0;\n  font-size: 1.5rem;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: white;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst Body = styled.div`\n  padding: 1.25rem;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst Footer = styled.div`\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n`;\n\nconst Button = styled.button`\n  padding: 0.75rem 1.5rem;\n  background: ${props => \n    props.$variant === 'primary' ? '#3b82f6' :\n    props.$variant === 'success' ? '#10b981' :\n    props.$variant === 'danger' ? '#ef4444' : '#6b7280'};\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst UploadZone = styled.div`\n  border: 2px dashed ${props => props.$dragOver ? '#3b82f6' : '#cbd5e1'};\n  border-radius: 8px;\n  padding: 3rem;\n  text-align: center;\n  background: ${props => props.$dragOver ? '#eff6ff' : '#f8fafc'};\n  transition: all 0.2s;\n  cursor: pointer;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #eff6ff;\n  }\n`;\n\nconst UploadIcon = styled.div`\n  font-size: 3rem;\n  color: #94a3b8;\n  margin-bottom: 1rem;\n`;\n\nconst UploadText = styled.div`\n  font-size: 1.1rem;\n  color: #475569;\n  margin-bottom: 0.5rem;\n`;\n\nconst UploadHint = styled.div`\n  font-size: 0.9rem;\n  color: #94a3b8;\n`;\n\nconst FileInput = styled.input`\n  display: none;\n`;\n\nconst InfoBox = styled.div`\n  background: #eff6ff;\n  border: 1px solid #bfdbfe;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  color: #1e40af;\n  font-size: 0.9rem;\n`;\n\nconst PreviewSection = styled.div`\n  margin-top: 1.5rem;\n`;\n\nconst SectionTitle = styled.h3`\n  font-size: 1rem;\n  color: #1e293b;\n  margin-bottom: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 0.75rem;\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  border-radius: 6px;\n  font-weight: 600;\n`;\n\nconst PreviewTable = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.85rem;\n  margin-bottom: 1rem;\n`;\n\nconst PreviewThead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 0.75rem 1rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst PreviewTh = styled.th`\n  padding: 0.75rem 1rem;\n  text-align: center;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst PreviewTd = styled.td`\n  padding: 0.5rem;\n  border: 1px solid #e2e8f0;\n`;\n\nconst PreviewTr = styled.tr`\n  &:nth-of-type(even) {\n    background: #f8fafc;\n  }\n`;\n\nconst ValidationWarning = styled.div`\n  background: #fef3c7;\n  border: 1px solid #fcd34d;\n  border-radius: 6px;\n  padding: 0.75rem;\n  margin-top: 0.5rem;\n  color: #92400e;\n  font-size: 0.85rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n`;\n\nconst ResultsBox = styled.div`\n  background: ${props => props.$success ? '#d1fae5' : '#fee2e2'};\n  border: 1px solid ${props => props.$success ? '#6ee7b7' : '#fca5a5'};\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-top: 1rem;\n`;\n\nconst ResultsSummary = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 0.875rem;\n  margin-bottom: 0.875rem;\n`;\n\nconst ResultStat = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n`;\n\nconst ResultLabel = styled.span`\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n`;\n\nconst ResultValue = styled.span`\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ${props => props.$color || '#1e293b'};\n`;\n\nconst ErrorList = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  background: white;\n  border-radius: 6px;\n  padding: 1rem;\n`;\n\nconst ErrorItem = styled.div`\n  padding: 0.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  font-size: 0.85rem;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst CheckboxLabel = styled.label`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  color: #475569;\n  cursor: pointer;\n\n  input {\n    cursor: pointer;\n  }\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst SmlouvyImportModal = ({ useky, onClose }) => {\n  const { user, token } = useContext(AuthContext);\n\n  const [dragOver, setDragOver] = useState(false);\n  const [file, setFile] = useState(null);\n  const [parsedData, setParsedData] = useState([]);\n  const [importing, setImporting] = useState(false);\n  const [importResults, setImportResults] = useState(null);\n  const [overwriteExisting, setOverwriteExisting] = useState(false);\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // =============================================================================\n  // FILE HANDLING\n  // =============================================================================\n\n  const handleFileSelect = useCallback((selectedFile) => {\n    if (!selectedFile) return;\n\n    const validTypes = [\n      'application/vnd.ms-excel',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'text/csv'\n    ];\n\n    if (!validTypes.includes(selectedFile.type) && !selectedFile.name.match(/\\.(xlsx?|csv)$/i)) {\n      setErrorMessage('Prosm vyberte Excel (.xlsx, .xls) nebo CSV soubor');\n      return;\n    }\n\n    setFile(selectedFile);\n    setErrorMessage(null);\n    parseFile(selectedFile);\n  }, []);\n\n  const parseFile = useCallback((file) => {\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      try {\n        const data = new Uint8Array(e.target.result);\n        const workbook = XLSX.read(data, { type: 'array' });\n        const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(firstSheet, { defval: null });\n\n        // Helper pro konverzi Excel data na YYYY-MM-DD\n        const excelDateToString = (value) => {\n          if (!value) return null;\n          if (typeof value === 'string' && value.match(/^\\d{4}-\\d{2}-\\d{2}/)) {\n            return value.split('T')[0]; // Ozne as pokud je\n          }\n          if (typeof value === 'number') {\n            const excelEpoch = new Date(1899, 11, 30);\n            const date = new Date(excelEpoch.getTime() + value * 86400000);\n            return date.toISOString().split('T')[0];\n          }\n          return null;\n        };\n\n        // Map column names to DB fields dle BE dokumentace + reln Excel formt\n        const mapped = jsonData.map(row => ({\n          cislo_smlouvy: row['slo smlouvy'] || row['cislo_smlouvy'] || null,\n          usek_zkr: row['sek'] || row['tvar'] || row['usek_zkr'] || null,\n          druh_smlouvy: row['Druh smlouvy'] || row['druh_smlouvy'] || 'SLUBY',\n          nazev_firmy: row['Partner'] || row['Dodavatel'] || row['Nzev firmy'] || row['nazev_firmy'] || null,\n          ico: row['IO'] || row['ICO'] || row['ico'] || null,\n          dic: row['DI'] || row['DIC'] || row['dic'] || null,\n          nazev_smlouvy: row['Nzev'] || row['Pedmt smlouvy'] || row['Nzev smlouvy'] || row['nazev_smlouvy'] || null,\n          popis_smlouvy: row['Popis'] || row['popis_smlouvy'] || null,\n          platnost_od: excelDateToString(row['Platn od'] || row['Platnost od'] || row['platnost_od']),\n          platnost_do: excelDateToString(row['Platn do'] || row['Platnost do'] || row['platnost_do']),\n          \n          // DLEIT: Sprvn mapovn dle BE dokumentace!\n          // POZOR: Excel m mezery za \"s DPH \" a \"bez DPH \"\n          hodnota_bez_dph: row['ZBV bez DPH '] || row['ZBV bez DPH'] || row['Zbyva bez DPH'] || row['Hodnota bez DPH'] || row['hodnota_bez_dph'] || null,\n          hodnota_s_dph: row['ZBV s DPH'] || row['Zbyva s DPH'] || row['Hodnota s DPH'] || row['hodnota_s_dph'] || null,\n          sazba_dph: row['Sazba DPH'] || row['sazba_dph'] || 21,\n          \n          hodnota_plneni_bez_dph: row['Pedpokldan hodnota bez DPH'] || row['Predpokladana hodnota bez DPH'] || row['hodnota_plneni_bez_dph'] || null,\n          hodnota_plneni_s_dph: row['Pedpokldan hodnota s DPH '] || row['Pedpokldan hodnota s DPH'] || row['Predpokladana hodnota s DPH'] || row['hodnota_plneni_s_dph'] || null,\n          \n          aktivni: row['Aktivn'] || row['aktivni'] || 1,\n          poznamka: row['Poznmka'] || row['poznamka'] || `Import z Excelu ${new Date().toLocaleDateString('cs-CZ')}`,\n          cislo_dms: row['slo DMS'] || row['cislo_dms'] || null,\n          kategorie: row['Kategorie'] || row['kategorie'] || null\n        }));\n\n        setParsedData(mapped);\n        setErrorMessage(null);\n      } catch (err) {\n        setErrorMessage('Chyba pi parsovn souboru: ' + err.message);\n      }\n    };\n\n    reader.readAsArrayBuffer(file);\n  }, []);\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    setDragOver(true);\n  };\n\n  const handleDragLeave = () => {\n    setDragOver(false);\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setDragOver(false);\n    const droppedFile = e.dataTransfer.files[0];\n    handleFileSelect(droppedFile);\n  };\n\n  // =============================================================================\n  // IMPORT\n  // =============================================================================\n\n  const handleImportClick = () => {\n    if (parsedData.length === 0) {\n      setErrorMessage('Nejsou dn data k importu');\n      return;\n    }\n    setShowConfirm(true);\n  };\n\n  const handleImport = async () => {\n    setShowConfirm(false);\n    try {\n      setImporting(true);\n      setErrorMessage(null);\n\n      const result = await bulkImportSmlouvy({\n        token: token,\n        username: user.username,\n        data: parsedData,\n        overwrite_existing: overwriteExisting,\n        // Metadata o souboru pro BE log\n        nazev_souboru: file.name,\n        typ_souboru: file.name.split('.').pop().toUpperCase(),\n        velikost_souboru: file.size\n      });\n\n      setImportResults(result);\n    } catch (err) {\n      setErrorMessage('Chyba pi importu: ' + err.message);\n    } finally {\n      setImporting(false);\n    }\n  };\n\n  // =============================================================================\n  // DOWNLOAD TEMPLATE\n  // =============================================================================\n\n  const handleDownloadTemplate = () => {\n    const template = [\n      {\n        'slo smlouvy': 'S-147/750309/26/23',\n        'tvar': 'KM',\n        'Druh smlouvy': 'SLUBY',\n        'Dodavatel': 'Nemocnice Na Homolce',\n        'IO': '12345678',\n        'DI': 'CZ12345678',\n        'Pedmt smlouvy': 'Dodvka zdravotnickho materilu',\n        'Popis': 'Detailn popis smlouvy',\n        'Platnost od': '2025-01-01',\n        'Platnost do': '2025-12-31',\n        'ZBV bez DPH': 413223.14,\n        'ZBV s DPH': 500000.00,\n        'Sazba DPH': 21,\n        'Pedpokldan hodnota bez DPH': 330578.51,\n        'Pedpokldan hodnota s DPH': 400000.00,\n        'Aktivn': 1,\n        'Poznmka': 'Test import',\n        'slo DMS': 'DMS-2025-001',\n        'Kategorie': 'ZDRAVOTNICTVI'\n      }\n    ];\n\n    const ws = XLSX.utils.json_to_sheet(template);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Smlouvy');\n    XLSX.writeFile(wb, 'smlouvy_sablona.xlsx');\n  };\n\n  // =============================================================================\n  // HELPERS\n  // =============================================================================\n\n  // Konverze Excel data (integer) na formtovan datum\n  const formatExcelDate = (value) => {\n    if (!value) return '-';\n    \n    // Pokud je to u string ve formtu YYYY-MM-DD, vrtme formtovan\n    if (typeof value === 'string' && value.match(/^\\d{4}-\\d{2}-\\d{2}/)) {\n      const date = new Date(value);\n      return date.toLocaleDateString('cs-CZ');\n    }\n    \n    // Pokud je to Excel serial number (integer)\n    if (typeof value === 'number') {\n      // Excel pot dny od 1.1.1900 (ale m bug s rokem 1900)\n      const excelEpoch = new Date(1899, 11, 30);\n      const date = new Date(excelEpoch.getTime() + value * 86400000);\n      return date.toLocaleDateString('cs-CZ');\n    }\n    \n    return value;\n  };\n\n  // =============================================================================\n  // VALIDATION - ZRUENO (BE ji nevaliduje povinn pole)\n  // =============================================================================\n\n  const warnings = [];\n\n  // =============================================================================\n  // RENDER\n  // =============================================================================\n\n  return ReactDOM.createPortal(\n    <Overlay onClick={(e) => e.target === e.currentTarget && !importing && onClose(false)}>\n      <Modal>\n        <Header>\n          <Title>\n            <FontAwesomeIcon icon={faFileUpload} />\n            Import smluv z Excel/CSV\n          </Title>\n          <CloseButton onClick={() => !importing && onClose(importResults !== null)}>\n            <FontAwesomeIcon icon={faTimes} />\n          </CloseButton>\n        </Header>\n\n        {errorMessage && (\n          <div style={{ padding: '1rem 1.5rem', background: '#fee2e2', borderLeft: '4px solid #dc2626', color: '#dc2626', fontWeight: 600 }}>\n             {errorMessage}\n          </div>\n        )}\n\n        <Body>\n          {!importResults ? (\n            <>\n              <InfoBox>\n                <strong> Formt importu:</strong>\n                <ul style={{ margin: '0.5rem 0 0 0', paddingLeft: '1.5rem' }}>\n                  <li>Excel (.xlsx, .xls) nebo CSV soubor</li>\n                  <li>Prvn dek mus obsahovat nzvy sloupc</li>\n                  <li><strong>Povinn sloupce:</strong> slo smlouvy, sek, Partner, Nzev, Platn do</li>\n                  <li><strong>Voliteln:</strong> IO, Pedpokldan hodnota bez/s DPH, ZBV bez/s DPH</li>\n                  <li><strong>DLEIT:</strong> \"ZBV s DPH\" = poten stav smlouvy, \"Pedpokldan hodnota s DPH\" = maximln plnn</li>\n                  <li>Datum se zadv ve formtu Excel (automaticky se pevede)</li>\n                </ul>\n              </InfoBox>\n\n              <Button onClick={handleDownloadTemplate} style={{ marginBottom: '1rem' }}>\n                <FontAwesomeIcon icon={faDownload} />\n                Sthnout ablonu\n              </Button>\n\n              {!file ? (\n                <>\n                  <UploadZone\n                    $dragOver={dragOver}\n                    onDragOver={handleDragOver}\n                    onDragLeave={handleDragLeave}\n                    onDrop={handleDrop}\n                    onClick={() => document.getElementById('file-input').click()}\n                  >\n                    <UploadIcon>\n                      <FontAwesomeIcon icon={faFileUpload} />\n                    </UploadIcon>\n                    <UploadText>\n                      Pethnte soubor sem nebo kliknte pro vbr\n                    </UploadText>\n                    <UploadHint>\n                      Excel (.xlsx, .xls) nebo CSV\n                    </UploadHint>\n                  </UploadZone>\n                  <FileInput\n                    id=\"file-input\"\n                    type=\"file\"\n                    accept=\".xlsx,.xls,.csv\"\n                    onChange={(e) => handleFileSelect(e.target.files[0])}\n                  />\n                </>\n              ) : (\n                <>\n                  <PreviewSection>\n                    <SectionTitle>\n                      <FontAwesomeIcon icon={faCheckCircle} style={{ color: '#10b981' }} />\n                      Soubor naten: {file.name}\n                    </SectionTitle>\n\n                    <div style={{ marginTop: '1rem' }}>\n                      <strong>Nhled dat ({parsedData.length} dk):</strong>\n                    </div>\n\n                    <PreviewTable>\n                      <PreviewThead>\n                        <tr>\n                          <PreviewTh>slo smlouvy</PreviewTh>\n                          <PreviewTh>sek</PreviewTh>\n                          <PreviewTh>Nzev</PreviewTh>\n                          <PreviewTh>IO</PreviewTh>\n                          <PreviewTh>Partner</PreviewTh>\n                          <PreviewTh>Pedpokl. bez DPH</PreviewTh>\n                          <PreviewTh>Pedpokl. s DPH</PreviewTh>\n                          <PreviewTh>Platn do</PreviewTh>\n                          <PreviewTh>ZBV bez DPH</PreviewTh>\n                          <PreviewTh>ZBV s DPH</PreviewTh>\n                        </tr>\n                      </PreviewThead>\n                      <tbody>\n                        {parsedData.slice(0, 10).map((row, index) => (\n                          <PreviewTr key={index}>\n                            <PreviewTd>{row.cislo_smlouvy || '-'}</PreviewTd>\n                            <PreviewTd>{row.usek_zkr || '-'}</PreviewTd>\n                            <PreviewTd>{row.nazev_smlouvy || '-'}</PreviewTd>\n                            <PreviewTd>{row.ico || '-'}</PreviewTd>\n                            <PreviewTd>{row.nazev_firmy || '-'}</PreviewTd>\n                            <PreviewTd>{row.hodnota_plneni_bez_dph || '-'}</PreviewTd>\n                            <PreviewTd>{row.hodnota_plneni_s_dph || '-'}</PreviewTd>\n                            <PreviewTd>{formatExcelDate(row.platnost_do)}</PreviewTd>\n                            <PreviewTd>{row.hodnota_bez_dph || '-'}</PreviewTd>\n                            <PreviewTd>{row.hodnota_s_dph || '-'}</PreviewTd>\n                          </PreviewTr>\n                        ))}\n                      </tbody>\n                    </PreviewTable>\n\n                    {parsedData.length > 10 && (\n                      <div style={{ color: '#64748b', fontSize: '0.85rem' }}>\n                        ... zobrazeno prvnch 10 z {parsedData.length} dk\n                      </div>\n                    )}\n                  </PreviewSection>\n\n                  <div style={{ marginTop: '1rem' }}>\n                    <CheckboxLabel>\n                      <input\n                        type=\"checkbox\"\n                        checked={overwriteExisting}\n                        onChange={(e) => setOverwriteExisting(e.target.checked)}\n                      />\n                      Pepsat existujc smlouvy (podle sla smlouvy)\n                    </CheckboxLabel>\n                  </div>\n                </>\n              )}\n            </>\n          ) : (\n            <ResultsBox $success={importResults.chyb === 0}>\n              <SectionTitle>\n                <FontAwesomeIcon\n                  icon={importResults.chyb === 0 ? faCheckCircle : faExclamationTriangle}\n                  style={{ color: importResults.chyb === 0 ? '#10b981' : '#f59e0b' }}\n                />\n                Vsledky importu\n              </SectionTitle>\n\n              <ResultsSummary>\n                <ResultStat>\n                  <ResultLabel>Celkem dk</ResultLabel>\n                  <ResultValue>{importResults.celkem_radku}</ResultValue>\n                </ResultStat>\n                <ResultStat>\n                  <ResultLabel>spn</ResultLabel>\n                  <ResultValue $color=\"#10b981\">{importResults.uspesne_importovano}</ResultValue>\n                </ResultStat>\n                <ResultStat>\n                  <ResultLabel>Aktualizovno</ResultLabel>\n                  <ResultValue $color=\"#3b82f6\">{importResults.aktualizovano}</ResultValue>\n                </ResultStat>\n                <ResultStat>\n                  <ResultLabel>Peskoeno</ResultLabel>\n                  <ResultValue $color=\"#f59e0b\">{importResults.preskoceno_duplicit}</ResultValue>\n                </ResultStat>\n                <ResultStat>\n                  <ResultLabel>Chyb</ResultLabel>\n                  <ResultValue $color=\"#ef4444\">{importResults.chyb}</ResultValue>\n                </ResultStat>\n              </ResultsSummary>\n\n              {importResults.chybove_zaznamy && importResults.chybove_zaznamy.length > 0 && (\n                <>\n                  <div style={{ marginTop: '1rem', marginBottom: '0.5rem', fontWeight: 600 }}>\n                    Chybov zznamy:\n                  </div>\n                  <ErrorList>\n                    {importResults.chybove_zaznamy.map((err, index) => (\n                      <ErrorItem key={index}>\n                        <strong>dek {err.row}:</strong> {err.cislo_smlouvy || '(neznm slo)'}<br />\n                        <span style={{ color: '#dc2626' }}>{err.error}</span>\n                      </ErrorItem>\n                    ))}\n                  </ErrorList>\n                </>\n              )}\n\n              <div style={{ marginTop: '1rem', fontSize: '0.85rem', color: '#64748b' }}>\n                as importu: {importResults.cas_importu_ms} ms\n              </div>\n            </ResultsBox>\n          )}\n        </Body>\n\n        <Footer>\n          <div>\n            {importing && (\n              <span style={{ color: '#64748b', fontSize: '0.9rem' }}>\n                <FontAwesomeIcon icon={faSpinner} spin /> Probh import...\n              </span>\n            )}\n          </div>\n          <div style={{ display: 'flex', gap: '0.5rem' }}>\n            {!importResults ? (\n              <>\n                {file && (\n                  <Button onClick={() => { setFile(null); setParsedData([]); }}>\n                    Zruit\n                  </Button>\n                )}\n                <Button\n                  $variant=\"success\"\n                  onClick={handleImport}\n                  disabled={!file || parsedData.length === 0 || importing}\n                >\n                  {importing ? (\n                    <>\n                      <FontAwesomeIcon icon={faSpinner} spin />\n                      Importuji...\n                    </>\n                  ) : (\n                    <>\n                      <FontAwesomeIcon icon={faCheckCircle} />\n                      Importovat ({parsedData.length})\n                    </>\n                  )}\n                </Button>\n              </>\n            ) : (\n              <Button $variant=\"primary\" onClick={() => onClose(true)}>\n                Zavt\n              </Button>\n            )}\n          </div>\n        </Footer>\n      </Modal>\n\n      <ConfirmDialog\n        isOpen={showConfirm}\n        title=\"Potvrzen importu smluv\"\n        icon={faExclamationTriangle}\n        variant={overwriteExisting ? 'danger' : 'warning'}\n        onConfirm={handleImport}\n        onClose={() => setShowConfirm(false)}\n      >\n        <p>Opravdu chcete importovat <strong>{parsedData.length} smluv</strong>?</p>\n        {overwriteExisting && (\n          <p style={{ marginTop: '1rem', color: '#dc2626', fontWeight: 600 }}>\n             <strong>POZOR:</strong> Existujc smlouvy budou pepsny!\n          </p>\n        )}\n      </ConfirmDialog>\n    </Overlay>,\n    document.body\n  );\n};\n\nexport default SmlouvyImportModal;\n","/**\n * SmlouvyTab - Sprva smluv v selnkch\n * \n * Funkce:\n * - Seznam smluv s filtry (sek, druh, stav, platnost, fulltext)\n * - Vytvoen/editace smlouvy\n * - Hromadn import z Excel/CSV\n * - Detail smlouvy se statistikami a objednvkami\n * - Manuln pepoet erpn\n * - Soft delete (deaktivace)\n * \n * @author Frontend Team\n * @date 2025-11-23\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlus, faEdit, faTrash, faEye, faFileImport, faSyncAlt,\n  faSearch, faFilter, faDownload, faCheckCircle, faTimesCircle, faBolt, faTimes,\n  faChevronDown, faChevronUp, faToggleOn, faToggleOff, faExclamationTriangle\n} from '@fortawesome/free-solid-svg-icons';\nimport { FileText } from 'lucide-react';\n\n// TanStack Table\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  flexRender,\n  createColumnHelper\n} from '@tanstack/react-table';\n\n// Dialogs\nimport ConfirmDialog from '../../ConfirmDialog';\n\n// API Services\nimport {\n  getSmlouvyList,\n  getSmlouvaDetail,\n  createSmlouva,\n  updateSmlouva,\n  deleteSmlouva,\n  prepocetCerpaniSmluv,\n  DRUH_SMLOUVY_OPTIONS,\n  STAV_SMLOUVY_OPTIONS,\n  getStavSmlouvyColor,\n  getStavSmlouvyLabel\n} from '../../../services/apiSmlouvy';\n\nimport { getUsekyList } from '../../../services/apiv2Dictionaries';\n\n// Context\nimport { useContext } from 'react';\nimport AuthContext from '../../../context/AuthContext';\n\n// Common Components\nimport { SmartTooltip } from '../../../styles/SmartTooltip';\nimport DatePicker from '../../DatePicker';\n\n// Local Components\nimport SmlouvyFormModal from './SmlouvyFormModal';\nimport SmlouvyDetailModal from './SmlouvyDetailModal';\nimport SmlouvyImportModal from './SmlouvyImportModal';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst Container = styled.div`\n  padding: 1rem;\n`;\n\nconst ToolbarContainer = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n`;\n\nconst ButtonGroup = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid ${props => \n    props.$variant === 'primary' ? '#3b82f6' :\n    props.$variant === 'success' ? '#10b981' :\n    props.$variant === 'warning' ? '#f59e0b' : '#3b82f6'};\n  border-radius: 8px;\n  background: ${props => \n    props.$variant === 'primary' ? '#3b82f6' :\n    props.$variant === 'success' ? '#10b981' :\n    props.$variant === 'warning' ? '#f59e0b' : 'white'};\n  color: ${props => \n    props.$variant === 'primary' || props.$variant === 'success' || props.$variant === 'warning' ? 'white' : '#3b82f6'};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => \n      props.$variant === 'primary' ? '#2563eb' :\n      props.$variant === 'success' ? '#059669' :\n      props.$variant === 'warning' ? '#d97706' : '#eff6ff'};\n    border-color: ${props => \n      props.$variant === 'primary' ? '#2563eb' :\n      props.$variant === 'success' ? '#059669' :\n      props.$variant === 'warning' ? '#d97706' : '#2563eb'};\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n`;\n\nconst FilterSection = styled.div`\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  display: ${props => props.$visible ? 'block' : 'none'};\n`;\n\nconst FilterGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n`;\n\nconst FilterField = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.3rem;\n`;\n\nconst FilterLabel = styled.label`\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #475569;\n`;\n\nconst FilterSelectWithIcon = styled.div`\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n`;\n\nconst FilterSelect = styled.select`\n  width: 100%;\n  box-sizing: border-box;\n  padding: ${props => props.hasIcon ? '0.75rem 1.75rem 0.75rem 2.5rem' : '0.75rem 1.75rem 0.75rem 0.75rem'};\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  color: #1f2937;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  /* Custom dropdown arrow */\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n\n  /* Styling pro placeholder option */\n  option[value=\"\"] {\n    color: #9ca3af;\n    font-weight: 400;\n  }\n\n  option {\n    color: #1f2937;\n    font-weight: 500;\n    padding: 0.5rem;\n  }\n`;\n\nconst FilterInput = styled.input`\n  padding: 0.5rem;\n  border: 1px solid #cbd5e1;\n  border-radius: 4px;\n  font-size: 0.9rem;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n  }\n`;\n\n\n\nconst ToggleSwitch = styled.label`\n  position: relative;\n  display: inline-block;\n  width: 56px;\n  height: 28px;\n  cursor: pointer;\n  flex-shrink: 0;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #cbd5e1;\n    border-radius: 28px;\n    transition: all 0.3s ease;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      left: 4px;\n      bottom: 4px;\n      background-color: white;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n    }\n  }\n\n  input:checked + span {\n    background-color: #3b82f6;\n  }\n\n  input:checked + span::before {\n    transform: translateX(28px);\n  }\n\n  input:focus + span {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst SearchBox = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  max-width: 100%;\n\n  svg.search-icon {\n    position: absolute;\n    left: 0.75rem;\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 1rem;\n  }\n\n  input {\n    width: 100%;\n    padding: 0.5rem 2.5rem 0.5rem 2.5rem;\n    border: 2px solid #d1d5db;\n    border-radius: 8px;\n    font-size: 1rem;\n    transition: border-color 0.2s ease;\n\n    &:focus {\n      outline: none;\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  z-index: 1;\n\n  &:hover {\n    color: #dc2626;\n    transform: translateY(-50%) scale(1.2);\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst StatsBar = styled.div`\n  background: white;\n  padding: 1rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  border: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst StatItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.2rem;\n`;\n\nconst StatLabel = styled.span`\n  font-size: 0.75rem;\n  color: #64748b;\n  text-transform: uppercase;\n  font-weight: 600;\n`;\n\nconst StatValue = styled.span`\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: ${props => props.$color || '#1e293b'};\n`;\n\nconst TableContainer = styled.div`\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst Thead = styled.thead`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  user-select: none;\n  cursor: ${props => props.$sortable ? 'pointer' : 'default'};\n\n  &:first-of-type {\n    text-align: left;\n  }\n\n  &:hover {\n    background: ${props => props.$sortable ? 'rgba(255, 255, 255, 0.1)' : 'transparent'};\n  }\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  user-select: none;\n`;\n\nconst TableHeaderFilterRow = styled.tr`\n  background: #f8f9fa;\n  border-top: 1px solid #e5e7eb;\n`;\n\nconst TableHeaderFilterCell = styled.th`\n  padding: 0.5rem 0.75rem;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e5e7eb;\n`;\n\nconst ColumnFilterWrapper = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  \n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 14px !important;\n    height: 14px !important;\n  }\n`;\n\nconst ColumnFilterInput = styled.input`\n  width: 100%;\n  padding: 0.5rem 0.75rem 0.5rem 2.25rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n  \n  &::placeholder {\n    color: #9ca3af;\n  }\n`;\n\nconst ColumnFilterSelect = styled.select`\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  background: white;\n  cursor: pointer;\n  \n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst Tbody = styled.tbody``;\n\nconst TableRow = styled.tr`\n  background: ${props => props.$isEven ? '#f8fafc' : 'white'};\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n`;\n\nconst TableCell = styled.td`\n  padding: 1rem 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n  text-align: center;\n\n  &:first-of-type {\n    text-align: left;\n    white-space: nowrap;\n  }\n\n  &:nth-of-type(2),\n  &:nth-of-type(3),\n  &:nth-of-type(4),\n  &:nth-of-type(5) {\n    text-align: left;\n  }\n\n  &:nth-of-type(3) {\n    max-width: 200px;\n    word-wrap: break-word;\n    white-space: normal;\n  }\n\n  &:nth-of-type(4) {\n    max-width: 300px;\n    word-wrap: break-word;\n    white-space: normal;\n  }\n\n  &:nth-of-type(7) {\n    white-space: nowrap;\n    min-width: 150px;\n  }\n`;\n\nconst Badge = styled.span`\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  background: ${props => props.$color || '#e2e8f0'};\n  color: white;\n  display: inline-block;\n`;\n\nconst StatusBadge = Badge;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  max-width: 150px;\n  height: 8px;\n  background: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst ProgressFill = styled.div`\n  height: 100%;\n  background: ${props => {\n    const percent = parseFloat(props.$percent) || 0;\n    if (percent >= 90) return '#ef4444';\n    if (percent >= 75) return '#f59e0b';\n    if (percent >= 50) return '#3b82f6';\n    return '#10b981';\n  }};\n  width: ${props => Math.min(parseFloat(props.$percent) || 0, 100)}%;\n  transition: width 0.3s;\n`;\n\nconst Pagination = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst PaginationButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst PageInfo = styled.span`\n  font-size: 0.875rem;\n  color: #6b7280;\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #1f2937;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst ActionCell = styled.div`\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n`;\n\nconst IconButton = styled.button`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.75rem;\n  height: 1.75rem;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: #1e293b;\n    background: #f1f5f9;\n  }\n\n  &.view {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.edit {\n    &:hover {\n      color: #3b82f6;\n      background: #eff6ff;\n    }\n  }\n\n  &.delete {\n    &:hover {\n      color: #dc2626;\n      background: #fef2f2;\n    }\n  }\n\n  &.toggle-active {\n    &:hover {\n      color: #10b981;\n      background: #f0fdf4;\n    }\n  }\n\n  &.toggle-inactive {\n    &:hover {\n      color: #6b7280;\n      background: #f9fafb;\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst EmptyState = styled.div`\n  padding: 3rem;\n  text-align: center;\n  color: #64748b;\n`;\n\nconst EmptyIcon = styled.div`\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.3;\n`;\n\nconst EmptyText = styled.div`\n  font-size: 1.1rem;\n  margin-bottom: 0.5rem;\n`;\n\nconst EmptyHint = styled.div`\n  font-size: 0.9rem;\n  color: #94a3b8;\n`;\n\n// =============================================================================\n// CONSTANTS & HELPERS\n// =============================================================================\n\nconst FILTERS_STORAGE_KEY = 'smlouvy_filters';\nconst SHOW_FILTERS_STORAGE_KEY = 'smlouvy_showFilters';\n\n// Helper funkce pro naten filtr z localStorage\nconst loadFiltersFromStorage = () => {\n  try {\n    const saved = localStorage.getItem(FILTERS_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    console.warn(' Chyba pi natn filtr smluv z localStorage:', error);\n  }\n  return null;\n};\n\n// Helper funkce pro uloen filtr do localStorage\nconst saveFiltersToStorage = (filters) => {\n  try {\n    localStorage.setItem(FILTERS_STORAGE_KEY, JSON.stringify(filters));\n  } catch (error) {\n    console.warn(' Chyba pi ukldn filtr smluv do localStorage:', error);\n  }\n};\n\n// Helper funkce pro naten stavu showFilters z localStorage\nconst loadShowFiltersFromStorage = () => {\n  try {\n    const saved = localStorage.getItem(SHOW_FILTERS_STORAGE_KEY);\n    return saved === 'true';\n  } catch (error) {\n    return false;\n  }\n};\n\n// Helper funkce pro uloen stavu showFilters do localStorage\nconst saveShowFiltersToStorage = (show) => {\n  try {\n    localStorage.setItem(SHOW_FILTERS_STORAGE_KEY, show.toString());\n  } catch (error) {\n    console.warn(' Chyba pi ukldn stavu filtr do localStorage:', error);\n  }\n};\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst SmlouvyTab = () => {\n  const { user, token } = useContext(AuthContext);\n\n  // State\n  const [smlouvy, setSmlouvy] = useState([]);\n  const [useky, setUseky] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Filters - nast z localStorage pi inicializaci\n  const [showFilters, setShowFilters] = useState(() => loadShowFiltersFromStorage());\n  const [filters, setFilters] = useState(() => {\n    const savedFilters = loadFiltersFromStorage();\n    return savedFilters || {\n      search: '',\n      usek_id: '',\n      druh_smlouvy: '',\n      stav: '',\n      platnost_od: '',\n      platnost_do: '',\n      show_inactive: false\n    };\n  });\n\n  // TanStack Table state\n  const [sorting, setSorting] = useState([]);\n  const [columnFilters, setColumnFilters] = useState({\n    cislo_smlouvy: '',\n    nazev_firmy: '',\n    ico: '',\n    nazev_smlouvy: '',\n    usek_zkr: '',\n    druh_smlouvy: '',\n    stav: '',\n    pouzit_v_obj_formu: ''\n  });\n\n  // Pagination\n  const [pageSize, setPageSize] = useState(() => {\n    try {\n      const saved = localStorage.getItem('smlouvy_pageSize');\n      return saved ? parseInt(saved, 10) : 25;\n    } catch {\n      return 25;\n    }\n  });\n  const [pageIndex, setPageIndex] = useState(0);\n\n  // Modals\n  const [formModalOpen, setFormModalOpen] = useState(false);\n  const [detailModalOpen, setDetailModalOpen] = useState(false);\n  const [importModalOpen, setImportModalOpen] = useState(false);\n  const [editingSmlouva, setEditingSmlouva] = useState(null);\n  const [viewingSmlouva, setViewingSmlouva] = useState(null);\n\n  // Confirm Dialog\n  const [confirmDialog, setConfirmDialog] = useState({\n    isOpen: false,\n    title: '',\n    message: '',\n    variant: 'warning',\n    onConfirm: null\n  });\n\n  // =============================================================================\n  // DATA LOADING\n  // =============================================================================\n\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const [smlouvyResult, usekyResult] = await Promise.all([\n        getSmlouvyList({\n          token: token,\n          username: user.username,\n          ...filters\n        }),\n        getUsekyList({\n          token: token,\n          username: user.username,\n          show_inactive: false\n        })\n      ]);\n\n      setSmlouvy(smlouvyResult.data);\n      setUseky(usekyResult);\n    } catch (err) {\n      console.error('[SMLOUVY]  Error loading data:', err);\n      console.error('[SMLOUVY]  Error details:', {\n        message: err.message,\n        response: err.response?.data,\n        status: err.response?.status\n      });\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [user, filters]);\n\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  // =============================================================================\n  // PERSISTENCE - Ukldn filtr do localStorage\n  // =============================================================================\n\n  useEffect(() => {\n    saveFiltersToStorage(filters);\n  }, [filters]);\n\n  useEffect(() => {\n    saveShowFiltersToStorage(showFilters);\n  }, [showFilters]);\n\n  // =============================================================================\n  // LOCAL FILTERING\n  // =============================================================================\n\n  const filteredSmlouvy = useMemo(() => {\n    return smlouvy.filter(smlouva => {\n      // Aktivn/neaktivn\n      if (!filters.show_inactive && smlouva.aktivni !== 1) {\n        return false;\n      }\n\n      // Fulltext search\n      if (filters.search) {\n        const searchLower = filters.search.toLowerCase();\n        const matches = (\n          (smlouva.cislo_smlouvy || '').toLowerCase().includes(searchLower) ||\n          (smlouva.nazev_smlouvy || '').toLowerCase().includes(searchLower) ||\n          (smlouva.nazev_firmy || '').toLowerCase().includes(searchLower) ||\n          (smlouva.popis_smlouvy || '').toLowerCase().includes(searchLower)\n        );\n        if (!matches) return false;\n      }\n\n      // sek\n      if (filters.usek_id && smlouva.usek_id !== parseInt(filters.usek_id)) {\n        return false;\n      }\n\n      // Druh smlouvy\n      if (filters.druh_smlouvy && smlouva.druh_smlouvy !== filters.druh_smlouvy) {\n        return false;\n      }\n\n      // Stav\n      if (filters.stav && smlouva.stav !== filters.stav) {\n        return false;\n      }\n\n      // Datumov rozsah - smlouva mus pokrvat (obsahovat) zadan datum\n      if (filters.platnost_od) {\n        const filterOd = new Date(filters.platnost_od);\n        const smlouvaOd = new Date(smlouva.platnost_od);\n        const smlouvaDo = new Date(smlouva.platnost_do);\n        \n        // Smlouva mus pokrvat datum \"od\" (me zanat dve nebo ve stejn den a konit pozdji nebo ve stejn den)\n        if (filterOd < smlouvaOd || filterOd > smlouvaDo) {\n          return false;\n        }\n      }\n\n      if (filters.platnost_do) {\n        const filterDo = new Date(filters.platnost_do);\n        const smlouvaOd = new Date(smlouva.platnost_od);\n        const smlouvaDo = new Date(smlouva.platnost_do);\n        \n        // Smlouva mus pokrvat datum \"do\" (me zanat dve nebo ve stejn den a konit pozdji nebo ve stejn den)\n        if (filterDo < smlouvaOd || filterDo > smlouvaDo) {\n          return false;\n        }\n      }\n\n      // Column filters (druh dek)\n      if (columnFilters.cislo_smlouvy && !(smlouva.cislo_smlouvy || '').toLowerCase().includes(columnFilters.cislo_smlouvy.toLowerCase())) {\n        return false;\n      }\n      if (columnFilters.nazev_firmy && !(smlouva.nazev_firmy || '').toLowerCase().includes(columnFilters.nazev_firmy.toLowerCase())) {\n        return false;\n      }\n      if (columnFilters.ico && !(smlouva.ico || '').toLowerCase().includes(columnFilters.ico.toLowerCase())) {\n        return false;\n      }\n      if (columnFilters.nazev_smlouvy && !(smlouva.nazev_smlouvy || '').toLowerCase().includes(columnFilters.nazev_smlouvy.toLowerCase())) {\n        return false;\n      }\n      if (columnFilters.usek_zkr && !(smlouva.usek_zkr || '').toLowerCase().includes(columnFilters.usek_zkr.toLowerCase())) {\n        return false;\n      }\n      if (columnFilters.druh_smlouvy && smlouva.druh_smlouvy !== columnFilters.druh_smlouvy) {\n        return false;\n      }\n      if (columnFilters.stav && smlouva.stav !== columnFilters.stav) {\n        return false;\n      }\n      if (columnFilters.pouzit_v_obj_formu !== '' && smlouva.pouzit_v_obj_formu !== parseInt(columnFilters.pouzit_v_obj_formu)) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [smlouvy, filters, columnFilters]);\n\n  // =============================================================================\n  // PAGINATION - useEffects (ped table)\n  // =============================================================================\n\n  // Save pageSize to localStorage\n  useEffect(() => {\n    try {\n      localStorage.setItem('smlouvy_pageSize', pageSize.toString());\n    } catch (error) {\n      console.warn(' Chyba pi ukldn pageSize:', error);\n    }\n  }, [pageSize]);\n\n  // Reset pageIndex when filters change\n  useEffect(() => {\n    setPageIndex(0);\n  }, [filters]);\n\n  // =============================================================================\n  // STATISTICS\n  // =============================================================================\n\n  const statistics = useMemo(() => {\n    //  AKTIVN = kde aktivni != 0 (nebo aktivni === true / aktivni === 1)\n    const aktivniSmlouvy = filteredSmlouvy.filter(s => s.aktivni == 1 || s.aktivni === true);\n    \n    //  PRAVIDLO: Pokud je show_inactive=false, vylouit smlouvy kde aktivni==0\n    const smlouvyProStatistiku = filters.show_inactive \n      ? filteredSmlouvy      // Zobrazuj se i neaktivn  sest vechny zobrazen\n      : aktivniSmlouvy;       // Nezobrazuj se neaktivn  sest jen kde aktivni!=0\n    \n    //  CELKEM ERPNO: Podle pravidla ve\n    const celkemCerpano = smlouvyProStatistiku.reduce((sum, s) => sum + (parseFloat(s.cerpano_celkem) || 0), 0);\n    \n    //  CELKOV LIMIT: Sest hodnota_s_dph (poten stav)\n    const celkemLimit = smlouvyProStatistiku.reduce((sum, s) => sum + (parseFloat(s.hodnota_s_dph) || 0), 0);\n    //  ZBV: Poten stav - erpno\n    const celkemZbyva = celkemLimit - celkemCerpano;\n    \n    //  CELKOV PLNN: Informativn souet maximlnch plnn (nepouv se ve vpotech)\n    const celkemPlneni = smlouvyProStatistiku.reduce((sum, s) => sum + (parseFloat(s.hodnota_plneni_s_dph) || 0), 0);\n    \n    //  PRMRN ERPN: Potme vi hodnota_s_dph\n    const prumerneCerpani = aktivniSmlouvy.length > 0 \n      ? aktivniSmlouvy.reduce((sum, s) => {\n          const pocatecniStav = parseFloat(s.hodnota_s_dph) || 0;\n          const cerpano = parseFloat(s.cerpano_celkem) || 0;\n          return sum + (pocatecniStav > 0 ? (cerpano / pocatecniStav) * 100 : 0);\n        }, 0) / aktivniSmlouvy.length \n      : 0;\n\n    return {\n      pocet_celkem: filteredSmlouvy.length,\n      pocet_aktivnich: aktivniSmlouvy.length,\n      celkem_cerpano: celkemCerpano,\n      celkem_limit: celkemLimit,\n      celkem_zbyva: celkemZbyva,\n      celkem_plneni: celkemPlneni,\n      prumerne_cerpani: prumerneCerpani\n    };\n  }, [filteredSmlouvy, filters.show_inactive]);\n\n  // =============================================================================\n  // HANDLERS\n  // =============================================================================\n\n  const handleCreate = () => {\n    setEditingSmlouva(null);\n    setFormModalOpen(true);\n  };\n\n  const handleEdit = (smlouva) => {\n    setEditingSmlouva(smlouva);\n    setFormModalOpen(true);\n  };\n\n  const handleView = async (smlouva) => {\n    try {\n      const detail = await getSmlouvaDetail({\n        token: token,\n        username: user.username,\n        id: smlouva.id\n      });\n      setViewingSmlouva(detail);\n      setDetailModalOpen(true);\n    } catch (err) {\n      console.error('Chyba pi natn detailu:', err);\n      setError('Chyba pi natn detailu: ' + err.message);\n    }\n  };\n\n  const handleToggleStatus = async (smlouva) => {\n    const isActive = smlouva.aktivni == 1 || smlouva.aktivni === true;\n    const action = isActive ? 'deaktivovat' : 'aktivovat';\n\n    setConfirmDialog({\n      isOpen: true,\n      title: isActive ? 'Deaktivace smlouvy' : 'Aktivace smlouvy',\n      message: isActive ? (\n        <>\n          <p>Opravdu chcete deaktivovat smlouvu <strong>{smlouva.cislo_smlouvy}</strong>?</p>\n          <p style={{ marginTop: '1rem', color: '#dc2626', fontWeight: 600 }}>\n             Smlouva se nebude nabzet v objednvkch a nebude se potat do statistik erpn.\n          </p>\n        </>\n      ) : (\n        <>\n          <p>Opravdu chcete aktivovat smlouvu <strong>{smlouva.cislo_smlouvy}</strong>?</p>\n          <p style={{ marginTop: '1rem', color: '#10b981', fontWeight: 600 }}>\n             Smlouva se bude nabzet v objednvkch a bude se potat do statistik erpn.\n          </p>\n        </>\n      ),\n      variant: isActive ? 'warning' : 'success',\n      onConfirm: async () => {\n        try {\n          await updateSmlouva({\n            token: token,\n            username: user.username,\n            id: smlouva.id,\n            smlouvaData: {\n              aktivni: isActive ? 0 : 1\n            }\n          });\n          console.log(`Smlouva byla ${isActive ? 'deaktivovna' : 'aktivovna'}:`, smlouva.cislo_smlouvy);\n          loadData();\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        } catch (err) {\n          console.error(`Chyba pi ${action}:`, err);\n          setError(`Chyba pi ${action}: ` + err.message);\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        }\n      }\n    });\n  };\n\n  const handleDelete = async (smlouva) => {\n    setConfirmDialog({\n      isOpen: true,\n      title: 'Smazn smlouvy',\n      message: (\n        <>\n          <p>Opravdu chcete trvale smazat smlouvu <strong>{smlouva.cislo_smlouvy}</strong>?</p>\n          <p style={{ marginTop: '1rem', color: '#dc2626', fontWeight: 600 }}>\n             Tato akce je <strong>NEVRATN</strong>!\n          </p>\n          <p style={{ marginTop: '0.5rem', fontSize: '0.9rem', color: '#64748b' }}>\n            Tip: Pokud chcete smlouvu jen doasn skrt, pouijte radji deaktivaci.\n          </p>\n        </>\n      ),\n      variant: 'danger',\n      onConfirm: async () => {\n        try {\n          await deleteSmlouva({\n            token: token,\n            username: user.username,\n            id: smlouva.id\n          });\n          console.log('Smlouva byla smazna:', smlouva.cislo_smlouvy);\n          loadData();\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        } catch (err) {\n          console.error('Chyba pi mazn:', err);\n          setError('Chyba pi mazn: ' + err.message);\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        }\n      }\n    });\n  };\n\n  const handlePrepocetCerpani = async () => {\n    setConfirmDialog({\n      isOpen: true,\n      title: 'Pepoet erpn smluv',\n      message: (\n        <>\n          <p>Opravdu chcete pepotat erpn <strong>vech smluv</strong>?</p>\n          <p style={{ marginTop: '1rem', color: '#f59e0b', fontWeight: 600 }}>\n             Tato operace me trvat nkolik sekund.\n          </p>\n          <p style={{ marginTop: '0.5rem', fontSize: '0.9rem', color: '#64748b' }}>\n            Systm projde vechny objednvky a aktualizuje stky na jednotlivch smlouvch.\n          </p>\n        </>\n      ),\n      variant: 'warning',\n      onConfirm: async () => {\n        try {\n          const result = await prepocetCerpaniSmluv({\n            token: token,\n            username: user.username,\n            cislo_smlouvy: null,\n            usek_id: null\n          });\n          console.log('Pepoet dokonen:', result);\n          loadData();\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        } catch (err) {\n          console.error('Chyba pi pepotu:', err);\n          setError('Chyba pi pepotu: ' + err.message);\n          setConfirmDialog({ ...confirmDialog, isOpen: false });\n        }\n      }\n    });\n  };\n\n  const handleFilterChange = (field, value) => {\n    setFilters(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  // =============================================================================\n  // TANSTACK TABLE - COLUMNS & INSTANCE\n  // =============================================================================\n\n  const columnHelper = createColumnHelper();\n\n  const columns = useMemo(() => [\n    columnHelper.accessor('cislo_smlouvy', {\n      header: 'slo smlouvy',\n      cell: info => <strong>{info.getValue()}</strong>,\n      enableSorting: true\n    }),\n    columnHelper.accessor('nazev_firmy', {\n      header: 'Firma',\n      cell: info => info.getValue(),\n      enableSorting: true\n    }),\n    columnHelper.accessor('ico', {\n      header: 'IO',\n      cell: info => info.getValue() || '---',\n      enableSorting: true\n    }),\n    columnHelper.accessor('nazev_smlouvy', {\n      header: 'Nzev smlouvy',\n      cell: info => info.getValue(),\n      enableSorting: true\n    }),\n    columnHelper.accessor('usek_zkr', {\n      header: 'sek',\n      cell: info => info.getValue(),\n      enableSorting: true\n    }),\n    columnHelper.accessor('platnost_od', {\n      header: 'Platnost',\n      cell: info => {\n        const row = info.row.original;\n        return (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.1rem', fontSize: '0.875rem', whiteSpace: 'nowrap' }}>\n            {row.platnost_od && <div><strong>Od:</strong> {formatDate(row.platnost_od)}</div>}\n            <div><strong>Do:</strong> {formatDate(row.platnost_do)}</div>\n          </div>\n        );\n      },\n      enableSorting: true,\n      sortingFn: (rowA, rowB) => {\n        const a = rowA.original.platnost_od ? new Date(rowA.original.platnost_od).getTime() : 0;\n        const b = rowB.original.platnost_od ? new Date(rowB.original.platnost_od).getTime() : 0;\n        return a - b;\n      }\n    }),\n    columnHelper.accessor('hodnota_s_dph', {\n      header: 'Poten stav s DPH',\n      cell: info => (\n        <span style={{ color: '#1e40af', fontWeight: '600' }}>\n          {formatCurrency(info.getValue())}\n        </span>\n      ),\n      enableSorting: true,\n      sortingFn: (rowA, rowB) => {\n        const a = parseFloat(rowA.original.hodnota_s_dph) || 0;\n        const b = parseFloat(rowB.original.hodnota_s_dph) || 0;\n        return a - b;\n      }\n    }),\n    columnHelper.accessor('cerpano_celkem', {\n      header: 'erpn s DPH',\n      cell: info => {\n        const row = info.row.original;\n        const pocatecniStav = parseFloat(row.hodnota_s_dph) || 0;\n        const cerpano = parseFloat(info.getValue()) || 0;\n        const percent = pocatecniStav > 0 ? (cerpano / pocatecniStav) * 100 : 0;\n        return (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.3rem' }}>\n            <ProgressBar>\n              <ProgressFill $percent={percent} />\n            </ProgressBar>\n            <small>{percent.toFixed(1)}%</small>\n            <strong>{formatCurrency(cerpano)}</strong>\n          </div>\n        );\n      },\n      enableSorting: true,\n      sortingFn: (rowA, rowB) => {\n        const a = parseFloat(rowA.original.cerpano_celkem) || 0;\n        const b = parseFloat(rowB.original.cerpano_celkem) || 0;\n        return a - b;\n      }\n    }),\n    columnHelper.accessor('zbyva', {\n        id: 'zbyva',\n        header: 'Zbv s DPH',\n        cell: info => {\n          const zbyva = parseFloat(info.getValue()) || 0;\n          return (\n            <span style={{ \n              color: zbyva >= 0 ? '#10b981' : '#dc2626',\n              fontWeight: '600'\n            }}>\n              {formatCurrency(zbyva)}\n            </span>\n          );\n        },\n        enableSorting: true,\n        sortingFn: (rowA, rowB) => {\n          const a = parseFloat(rowA.original.zbyva) || 0;\n          const b = parseFloat(rowB.original.zbyva) || 0;\n          return a - b;\n        }\n      }\n    ),\n    columnHelper.accessor('pouzit_v_obj_formu', {\n      header: 'Pouit',\n      cell: info => {\n        const value = info.getValue();\n        return (\n          <SmartTooltip content={value === 1 ? 'Pout v obj. formuli pi objednvkch' : 'Pouze v modulu faktur'}>\n            <span style={{ \n              fontSize: '0.875rem',\n              display: 'inline-block',\n              padding: '0.25rem 0.5rem',\n              borderRadius: '4px',\n              backgroundColor: value === 1 ? '#dbeafe' : '#fef3c7',\n              color: value === 1 ? '#1e40af' : '#92400e',\n              fontWeight: '500'\n            }}>\n              {value === 1 ? ' Obj. formul' : ' Faktury'}\n            </span>\n          </SmartTooltip>\n        );\n      },\n      enableSorting: true\n    }),\n    columnHelper.accessor('stav', {\n      header: 'Stav',\n      cell: info => (\n        <StatusBadge $color={getStavSmlouvyColor(info.getValue())}>\n          {getStavSmlouvyLabel(info.getValue())}\n        </StatusBadge>\n      ),\n      enableSorting: true\n    }),\n    columnHelper.display({\n      id: 'actions',\n      header: () => (\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%' }}>\n          <FontAwesomeIcon icon={faBolt} style={{ color: '#eab308', fontSize: '16px' }} />\n        </div>\n      ),\n      cell: props => (\n        <ActionCell>\n          <SmartTooltip content=\"Detail smlouvy\">\n            <IconButton onClick={() => handleView(props.row.original)} className=\"view\">\n              <FontAwesomeIcon icon={faEye} />\n            </IconButton>\n          </SmartTooltip>\n          <SmartTooltip content=\"Upravit smlouvu\">\n            <IconButton onClick={() => handleEdit(props.row.original)} className=\"edit\">\n              <FontAwesomeIcon icon={faEdit} />\n            </IconButton>\n          </SmartTooltip>\n          <SmartTooltip content={props.row.original.aktivni ? \"Deaktivovat\" : \"Aktivovat\"}>\n            <IconButton \n              onClick={() => handleToggleStatus(props.row.original)} \n              className={props.row.original.aktivni ? \"toggle-active\" : \"toggle-inactive\"}\n            >\n              <FontAwesomeIcon icon={props.row.original.aktivni ? faToggleOn : faToggleOff} />\n            </IconButton>\n          </SmartTooltip>\n          <SmartTooltip content=\"Smazat smlouvu\">\n            <IconButton onClick={() => handleDelete(props.row.original)} className=\"delete\">\n              <FontAwesomeIcon icon={faTrash} />\n            </IconButton>\n          </SmartTooltip>\n        </ActionCell>\n      )\n    })\n  ], [handleView, handleEdit, handleToggleStatus, handleDelete]);\n\n  const table = useReactTable({\n    data: filteredSmlouvy,\n    columns,\n    state: {\n      sorting\n    },\n    onSortingChange: setSorting,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel()\n  });\n\n  // =============================================================================\n  // PAGINATION - data a handlers (po table)\n  // =============================================================================\n\n  // Get sorted rows\n  const sortedRows = table.getSortedRowModel().rows;\n\n  // Paginated data - pout seazen rows z TanStack Table\n  const paginatedRows = useMemo(() => {\n    const startIndex = pageIndex * pageSize;\n    const endIndex = startIndex + pageSize;\n    return sortedRows.slice(startIndex, endIndex);\n  }, [sortedRows, pageIndex, pageSize]);\n\n  const totalPages = Math.ceil(sortedRows.length / pageSize);\n\n  // Pagination handlers\n  const goToFirstPage = () => setPageIndex(0);\n  const goToPreviousPage = () => setPageIndex(prev => Math.max(0, prev - 1));\n  const goToNextPage = () => setPageIndex(prev => Math.min(totalPages - 1, prev + 1));\n  const goToLastPage = () => setPageIndex(totalPages - 1);\n\n  const handleResetFilters = () => {\n    setFilters({\n      search: '',\n      usek_id: '',\n      druh_smlouvy: '',\n      stav: '',\n      platnost_od: '',\n      platnost_do: '',\n      show_inactive: false\n    });\n  };\n\n  const handleFormClose = (reload) => {\n    setFormModalOpen(false);\n    setEditingSmlouva(null);\n    if (reload) {\n      loadData();\n    }\n  };\n\n  const handleDetailClose = () => {\n    setDetailModalOpen(false);\n    setViewingSmlouva(null);\n  };\n\n  const handleImportClose = (reload) => {\n    setImportModalOpen(false);\n    if (reload) {\n      loadData();\n    }\n  };\n\n  // =============================================================================\n  // FORMAT HELPERS\n  // =============================================================================\n\n  const formatCurrency = (value) => {\n    const num = parseFloat(value) || 0;\n    return new Intl.NumberFormat('cs-CZ', {\n      style: 'currency',\n      currency: 'CZK',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(num);\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return '-';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('cs-CZ');\n  };\n\n\n\n  // =============================================================================\n  // RENDER\n  // =============================================================================\n\n  return (\n    <Container>\n      {/* Toolbar */}\n      <ToolbarContainer>\n        <SearchBox>\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Hledat podle sla, nzvu, firmy...\"\n            value={filters.search}\n            onChange={(e) => handleFilterChange('search', e.target.value)}\n          />\n          {filters.search && (\n            <ClearButton onClick={() => handleFilterChange('search', '')} title=\"Vymazat\">\n              <FontAwesomeIcon icon={faTimes} />\n            </ClearButton>\n          )}\n        </SearchBox>\n\n        <ActionButton onClick={() => setShowFilters(!showFilters)}>\n          <FontAwesomeIcon icon={showFilters ? faChevronUp : faChevronDown} />\n          {showFilters ? 'Skrt filtry' : 'Rozen filtr'}\n        </ActionButton>\n\n        <ActionButton $variant=\"primary\" onClick={handleCreate}>\n          <FontAwesomeIcon icon={faPlus} />\n          Pidat smlouvu\n        </ActionButton>\n        <ActionButton $variant=\"success\" onClick={() => setImportModalOpen(true)}>\n          <FontAwesomeIcon icon={faFileImport} />\n          Import z Excel\n        </ActionButton>\n        <ActionButton $variant=\"warning\" onClick={handlePrepocetCerpani}>\n          <FontAwesomeIcon icon={faSyncAlt} />\n          Pepotat erpn\n        </ActionButton>\n      </ToolbarContainer>\n\n      {/* Filters */}\n      <FilterSection $visible={showFilters}>\n        <FilterGrid>\n          <FilterField>\n            <FilterLabel>sek</FilterLabel>\n            <FilterSelect\n              value={filters.usek_id}\n              onChange={(e) => handleFilterChange('usek_id', e.target.value)}\n            >\n              <option value=\"\">Vechny seky</option>\n              {useky.map(usek => (\n                <option key={usek.id} value={usek.id}>\n                  {usek.usek_zkr} - {usek.usek_nazev}\n                </option>\n              ))}\n            </FilterSelect>\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel>Druh smlouvy</FilterLabel>\n            <FilterSelect\n              value={filters.druh_smlouvy}\n              onChange={(e) => handleFilterChange('druh_smlouvy', e.target.value)}\n            >\n              <option value=\"\">Vechny druhy</option>\n              {DRUH_SMLOUVY_OPTIONS.map(opt => (\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\n              ))}\n            </FilterSelect>\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel>Stav</FilterLabel>\n            <FilterSelect\n              value={filters.stav}\n              onChange={(e) => handleFilterChange('stav', e.target.value)}\n            >\n              <option value=\"\">Vechny stavy</option>\n              {STAV_SMLOUVY_OPTIONS.map(opt => (\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\n              ))}\n            </FilterSelect>\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel>Platnost od</FilterLabel>\n            <DatePicker\n              value={filters.platnost_od}\n              onChange={(value) => handleFilterChange('platnost_od', value)}\n              placeholder=\"Vyberte datum od\"\n            />\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel>Platnost do</FilterLabel>\n            <DatePicker\n              value={filters.platnost_do}\n              onChange={(value) => handleFilterChange('platnost_do', value)}\n              placeholder=\"Vyberte datum do\"\n            />\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel style={{ marginBottom: '0.3rem' }}>&nbsp;</FilterLabel>\n            <div style={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: '0.75rem',\n              height: '46px'\n            }}>\n              <ToggleSwitch>\n                <input\n                  type=\"checkbox\"\n                  checked={filters.show_inactive}\n                  onChange={(e) => handleFilterChange('show_inactive', e.target.checked)}\n                />\n                <span />\n              </ToggleSwitch>\n              <span style={{ fontSize: '0.875rem', fontWeight: '500', color: '#475569' }}>Zobrazit neaktivn</span>\n            </div>\n          </FilterField>\n\n          <FilterField>\n            <FilterLabel style={{ marginBottom: '0.3rem' }}>&nbsp;</FilterLabel>\n            <ActionButton onClick={handleResetFilters} style={{ width: '100%', height: '46px' }}>Vymazat filtry</ActionButton>\n          </FilterField>\n        </FilterGrid>\n      </FilterSection>\n\n      {/* Statistics */}\n      <StatsBar>\n        <StatItem>\n          <StatLabel>Smluv celkem</StatLabel>\n          <StatValue>{statistics.pocet_celkem}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Aktivnch</StatLabel>\n          <StatValue $color=\"#10b981\">{statistics.pocet_aktivnich}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Celkov limit</StatLabel>\n          <StatValue>{formatCurrency(statistics.celkem_limit)}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Celkem erpno</StatLabel>\n          <StatValue $color=\"#3b82f6\">{formatCurrency(statistics.celkem_cerpano)}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Zbv</StatLabel>\n          <StatValue $color=\"#10b981\">{formatCurrency(statistics.celkem_zbyva)}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Celkov plnn</StatLabel>\n          <StatValue $color=\"#6b7280\">{formatCurrency(statistics.celkem_plneni)}</StatValue>\n        </StatItem>\n        <StatItem>\n          <StatLabel>Prmrn erpn</StatLabel>\n          <StatValue>{statistics.prumerne_cerpani.toFixed(1)}%</StatValue>\n        </StatItem>\n      </StatsBar>\n\n      {error && (\n        <div style={{ padding: '1rem', background: '#fee2e2', color: '#dc2626', borderRadius: '8px', marginBottom: '1rem' }}>\n          {error}\n        </div>\n      )}\n\n      {/* Table */}\n      <TableContainer>\n        <Table>\n          <Thead>\n            {/* Prvn dek - nzvy sloupc s azenm */}\n            {table.getHeaderGroups().map(headerGroup => (\n              <tr key={headerGroup.id}>\n                {headerGroup.headers.map(header => (\n                  <TableHeaderCell\n                    key={header.id}\n                    $sortable={header.column.getCanSort()}\n                    onClick={header.column.getToggleSortingHandler()}\n                  >\n                    {header.isPlaceholder ? null : (\n                      <HeaderContent>\n                        <span>\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </span>\n                        {header.column.getIsSorted() && (\n                          <FontAwesomeIcon\n                            icon={header.column.getIsSorted() === 'asc' ? faChevronUp : faChevronDown}\n                            style={{ fontSize: '0.75rem' }}\n                          />\n                        )}\n                      </HeaderContent>\n                    )}\n                  </TableHeaderCell>\n                ))}\n              </tr>\n            ))}\n\n              {/* Druh dek - sloupcov filtry */}\n              <TableHeaderFilterRow>\n                {/* slo smlouvy */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterWrapper>\n                    <FontAwesomeIcon icon={faSearch} />\n                    <ColumnFilterInput\n                      type=\"text\"\n                      placeholder=\"Hledat slo...\"\n                      value={columnFilters.cislo_smlouvy}\n                      onChange={(e) => setColumnFilters(prev => ({...prev, cislo_smlouvy: e.target.value}))}\n                    />\n                  </ColumnFilterWrapper>\n                </TableHeaderFilterCell>\n                {/* Firma */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterWrapper>\n                    <FontAwesomeIcon icon={faSearch} />\n                    <ColumnFilterInput\n                      type=\"text\"\n                      placeholder=\"Hledat firmu...\"\n                      value={columnFilters.nazev_firmy}\n                      onChange={(e) => setColumnFilters(prev => ({...prev, nazev_firmy: e.target.value}))}\n                    />\n                  </ColumnFilterWrapper>\n                </TableHeaderFilterCell>\n                {/* IO */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterWrapper>\n                    <FontAwesomeIcon icon={faSearch} />\n                    <ColumnFilterInput\n                      type=\"text\"\n                      placeholder=\"Hledat IO...\"\n                      value={columnFilters.ico}\n                      onChange={(e) => setColumnFilters(prev => ({...prev, ico: e.target.value}))}\n                    />\n                  </ColumnFilterWrapper>\n                </TableHeaderFilterCell>\n                {/* Nzev smlouvy */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterWrapper>\n                    <FontAwesomeIcon icon={faSearch} />\n                    <ColumnFilterInput\n                      type=\"text\"\n                      placeholder=\"Hledat nzev...\"\n                      value={columnFilters.nazev_smlouvy}\n                      onChange={(e) => setColumnFilters(prev => ({...prev, nazev_smlouvy: e.target.value}))}\n                    />\n                  </ColumnFilterWrapper>\n                </TableHeaderFilterCell>\n                {/* sek */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterWrapper>\n                    <FontAwesomeIcon icon={faSearch} />\n                    <ColumnFilterInput\n                      type=\"text\"\n                      placeholder=\"Hledat sek...\"\n                      value={columnFilters.usek_zkr}\n                      onChange={(e) => setColumnFilters(prev => ({...prev, usek_zkr: e.target.value}))}\n                    />\n                  </ColumnFilterWrapper>\n                </TableHeaderFilterCell>\n                {/* Platnost - przdn buka */}\n                <TableHeaderFilterCell />\n                {/* Poten stav - przdn buka */}\n                <TableHeaderFilterCell />\n                {/* erpn - przdn buka */}\n                <TableHeaderFilterCell />\n                {/* Zbv - przdn buka */}\n                <TableHeaderFilterCell />\n                {/* Pouit */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterSelect\n                    value={columnFilters.pouzit_v_obj_formu}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, pouzit_v_obj_formu: e.target.value}))}\n                  >\n                    <option value=\"\">Ve</option>\n                    <option value=\"1\"> Obj. formul</option>\n                    <option value=\"0\"> Faktury</option>\n                  </ColumnFilterSelect>\n                </TableHeaderFilterCell>\n                {/* Stav */}\n                <TableHeaderFilterCell>\n                  <ColumnFilterSelect\n                    value={columnFilters.stav}\n                    onChange={(e) => setColumnFilters(prev => ({...prev, stav: e.target.value}))}\n                  >\n                    <option value=\"\">Vechny</option>\n                    {STAV_SMLOUVY_OPTIONS.map(opt => (\n                      <option key={opt.value} value={opt.value}>{opt.label}</option>\n                    ))}\n                  </ColumnFilterSelect>\n                </TableHeaderFilterCell>\n                {/* Akce - przdn buka */}\n                <TableHeaderFilterCell />\n              </TableHeaderFilterRow>\n            </Thead>\n            <Tbody>\n              {loading ? (\n                <tr>\n                  <TableCell colSpan={columns.length} style={{ textAlign: 'center', padding: '2rem' }}>\n                    Natm smlouvy...\n                  </TableCell>\n                </tr>\n              ) : paginatedRows.length === 0 ? (\n                <tr>\n                  <TableCell colSpan={columns.length} style={{ textAlign: 'center', padding: '2rem' }}>\n                    <EmptyState>\n                      <EmptyIcon><FileText size={48} /></EmptyIcon>\n                      <EmptyText>{smlouvy.length === 0 ? 'dn smlouvy' : 'Nenalezeny dn smlouvy'}</EmptyText>\n                      <EmptyHint>{smlouvy.length === 0 ? 'Vytvote novou smlouvu pomoc tlatka \"Pidat smlouvu\"' : 'Zkuste zmnit vyhledvn nebo filtry'}</EmptyHint>\n                    </EmptyState>\n                  </TableCell>\n                </tr>\n              ) : (\n                paginatedRows.map((row, index) => (\n                  <TableRow key={row.id} $isEven={index % 2 === 0}>\n                    {row.getVisibleCells().map(cell => (\n                      <TableCell key={cell.id}>\n                        {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))\n              )}\n            </Tbody>\n          </Table>\n\n          {/* Pagination */}\n          <Pagination>\n            <PageInfo>\n              Zobrazeno {Math.min(pageIndex * pageSize + 1, sortedRows.length)} - {Math.min((pageIndex + 1) * pageSize, sortedRows.length)} z {sortedRows.length} smluv\n            </PageInfo>\n\n            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n              <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                Zobrazit:\n              </span>\n              <PageSizeSelect\n                value={pageSize}\n                onChange={(e) => {\n                  const newSize = Number(e.target.value);\n                  setPageSize(newSize);\n                  setPageIndex(0);\n                }}\n              >\n                <option value=\"10\">10</option>\n                <option value=\"25\">25</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n                <option value=\"250\">250</option>\n                <option value=\"500\">500</option>\n              </PageSizeSelect>\n\n              <PaginationButton\n                onClick={goToFirstPage}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={goToPreviousPage}\n                disabled={pageIndex === 0}\n              >\n                \n              </PaginationButton>\n\n              <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                Strnka {pageIndex + 1} z {Math.max(1, totalPages)}\n              </span>\n\n              <PaginationButton\n                onClick={goToNextPage}\n                disabled={pageIndex >= totalPages - 1}\n              >\n                \n              </PaginationButton>\n              <PaginationButton\n                onClick={goToLastPage}\n                disabled={pageIndex >= totalPages - 1}\n              >\n                \n              </PaginationButton>\n            </div>\n          </Pagination>\n        </TableContainer>\n\n      {/* Modals */}\n      {formModalOpen && (\n        <SmlouvyFormModal\n          smlouva={editingSmlouva}\n          useky={useky}\n          onClose={handleFormClose}\n        />\n      )}\n\n      {detailModalOpen && viewingSmlouva && (\n        <SmlouvyDetailModal\n          smlouva={viewingSmlouva}\n          onClose={handleDetailClose}\n          onEdit={() => {\n            handleDetailClose();\n            handleEdit(viewingSmlouva.smlouva);\n          }}\n        />\n      )}\n\n      {importModalOpen && (\n        <SmlouvyImportModal\n          useky={useky}\n          onClose={handleImportClose}\n        />\n      )}\n\n      {/* Confirm Dialog */}\n      <ConfirmDialog\n        isOpen={confirmDialog.isOpen}\n        title={confirmDialog.title}\n        icon={faExclamationTriangle}\n        variant={confirmDialog.variant}\n        onConfirm={confirmDialog.onConfirm}\n        onClose={() => setConfirmDialog({ ...confirmDialog, isOpen: false })}\n      >\n        {confirmDialog.message}\n      </ConfirmDialog>\n    </Container>\n  );\n};\n\nexport default SmlouvyTab;\n","/**\n * selnky - Kompletn sprva selnk systmu\n *\n * Modern strnka s tab navigac pro sprvu vech selnk:\n * - Lokality, Pozice, seky, Organizace\n * - Stavy, Role, Prva (read-only)\n * - DOCX ablony\n *\n * @author Frontend Team\n * @date 2025-10-19\n */\n\nimport React, { useState } from 'react';\nimport styled from '@emotion/styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBook, faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport { Building, Briefcase, Network, Building2, Circle, Shield, Key, FileText, Calculator, FileSignature } from 'lucide-react';\nimport { SmartTooltip } from '../styles/SmartTooltip';\n\n// Import Tab komponent\nimport LokalityTab from '../components/dictionaries/tabs/LokalityTab';\nimport PoziceTab from '../components/dictionaries/tabs/PoziceTab';\nimport UsekyTab from '../components/dictionaries/tabs/UsekyTab';\nimport OrganizaceTab from '../components/dictionaries/tabs/OrganizaceTab';\nimport StavyTab from '../components/dictionaries/tabs/StavyTab';\nimport RoleTab from '../components/dictionaries/tabs/RoleTab';\nimport PravaTab from '../components/dictionaries/tabs/PravaTab';\nimport DocxSablonyTab from '../components/dictionaries/tabs/DocxSablonyTab';\nimport CashbookTab from '../components/dictionaries/tabs/CashbookTab';\nimport SmlouvyTab from '../components/dictionaries/tabs/SmlouvyTab';\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst TitlePanel = styled.div`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n`;\n\nconst PageTitle = styled.h1`\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n`;\n\nconst RefreshIcon = styled.button`\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.5rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n`;\n\nconst PageDivider = styled.div`\n  height: 1px;\n  background: linear-gradient(to right, transparent, #e5e7eb 50%, transparent);\n  margin: 1rem 0;\n`;\n\nconst TabContainer = styled.div`\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n`;\n\nconst TabHeader = styled.div`\n  display: flex;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n  overflow-x: auto;\n\n  /* Hide scrollbar ale zachovat funkcionalitu */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nconst Tab = styled.button`\n  flex: 0 0 auto;\n  min-width: 160px;\n  padding: 0.6rem 1.2rem;\n  background: ${props => props.$active ? 'white' : 'transparent'};\n  border: none;\n  border-bottom: 3px solid ${props => props.$active ? '#3b82f6' : 'transparent'};\n  color: ${props => props.$active ? '#3b82f6' : '#64748b'};\n  font-weight: ${props => props.$active ? '600' : '500'};\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-content: center;\n\n  &:hover {\n    background: ${props => props.$active ? 'white' : '#f1f5f9'};\n    color: ${props => props.$active ? '#3b82f6' : '#3b82f6'};\n  }\n\n  svg {\n    width: 18px;\n    height: 18px;\n  }\n`;\n\n// =============================================================================\n// KOMPONENTA\n// =============================================================================\n\nconst DictionariesNew = () => {\n  // Load active tab from localStorage with fallback\n  const [activeTab, setActiveTab] = useState(() => {\n    try {\n      return localStorage.getItem('dictionaries_activeTab') || 'docx';\n    } catch {\n      return 'docx';\n    }\n  });\n\n  // Save active tab to localStorage when it changes\n  const handleTabChange = (tabKey) => {\n    setActiveTab(tabKey);\n    try {\n      localStorage.setItem('dictionaries_activeTab', tabKey);\n    } catch (error) {\n      // Ignorovat chyby localStorage\n    }\n  };\n\n  // Refresh all dictionaries - force re-render by setting key\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  const handleRefreshAllDictionaries = () => {\n    // Clear all localStorage cache for dictionaries\n    const keys = Object.keys(localStorage);\n    keys.forEach(key => {\n      // Clear filter states, page states, etc. but keep activeTab\n      if (\n        (key.includes('lokality_') ||\n         key.includes('pozice_') ||\n         key.includes('useky_') ||\n         key.includes('organizace_') ||\n         key.includes('stavy_') ||\n         key.includes('role_') ||\n         key.includes('prava_') ||\n         key.includes('docx_') ||\n         key.includes('cashbook_') ||\n         key.includes('smlouvy_')) &&\n        key !== 'dictionaries_activeTab'\n      ) {\n        try {\n          localStorage.removeItem(key);\n        } catch (e) {\n          // Ignorovat\n        }\n      }\n    });\n\n    // Force re-render of all tabs by incrementing key\n    setRefreshKey(prev => prev + 1);\n  };\n\n  // Function to get Czech display name for active tab\n  const getTabDisplayName = (tabKey) => {\n    const tabNames = {\n      'lokality': 'Lokality',\n      'pozice': 'Pozice',\n      'useky': 'seky',\n      'organizace': 'Organizace',\n      'stavy': 'Stavy',\n      'role': 'Role',\n      'prava': 'Prva',\n      'docx': 'DOCX ablony',\n      'cashbook': 'Pokladn knihy',\n      'smlouvy': 'Smlouvy'\n    };\n    return tabNames[tabKey] || 'selnky';\n  };\n\n  return (\n    <PageContainer>\n      {/* Header */}\n      <TitlePanel>\n        <PageTitle>\n          <FontAwesomeIcon icon={faBook} />\n          selnky - {getTabDisplayName(activeTab)}\n        </PageTitle>\n        <SmartTooltip text=\"Obnovit vechny selnky z databze (force reload)\" icon=\"warning\" preferredPosition=\"bottom\">\n          <RefreshIcon\n            onClick={handleRefreshAllDictionaries}\n          >\n            <FontAwesomeIcon icon={faSyncAlt} />\n          </RefreshIcon>\n        </SmartTooltip>\n      </TitlePanel>\n\n      {/* Tab Navigation */}\n      <TabContainer>\n        <TabHeader>\n          <Tab $active={activeTab === 'docx'} onClick={() => handleTabChange('docx')}>\n            <FileText size={18} />\n            DOCX ablony\n          </Tab>\n          <Tab $active={activeTab === 'cashbook'} onClick={() => handleTabChange('cashbook')}>\n            <Calculator size={18} />\n            Pokladn knihy\n          </Tab>\n          <Tab $active={activeTab === 'smlouvy'} onClick={() => handleTabChange('smlouvy')}>\n            <FileSignature size={18} />\n            Smlouvy\n          </Tab>\n          <Tab $active={activeTab === 'lokality'} onClick={() => handleTabChange('lokality')}>\n            <Building size={18} />\n            Lokality\n          </Tab>\n          <Tab $active={activeTab === 'pozice'} onClick={() => handleTabChange('pozice')}>\n            <Briefcase size={18} />\n            Pozice\n          </Tab>\n          <Tab $active={activeTab === 'prava'} onClick={() => handleTabChange('prava')}>\n            <Key size={18} />\n            Prva\n          </Tab>\n          <Tab $active={activeTab === 'role'} onClick={() => handleTabChange('role')}>\n            <Shield size={18} />\n            Role\n          </Tab>\n          <Tab $active={activeTab === 'stavy'} onClick={() => handleTabChange('stavy')}>\n            <Circle size={18} />\n            Stavy\n          </Tab>\n          <Tab $active={activeTab === 'useky'} onClick={() => handleTabChange('useky')}>\n            <Network size={18} />\n            seky\n          </Tab>\n          <Tab $active={activeTab === 'organizace'} onClick={() => handleTabChange('organizace')}>\n            <Building2 size={18} />\n            Organizace\n          </Tab>\n        </TabHeader>\n\n        {/* Tab Content - kad tab je samostatn komponent */}\n        {activeTab === 'docx' && <DocxSablonyTab key={`docx-${refreshKey}`} />}\n        {activeTab === 'cashbook' && <CashbookTab key={`cashbook-${refreshKey}`} />}\n        {activeTab === 'smlouvy' && <SmlouvyTab key={`smlouvy-${refreshKey}`} />}\n        {activeTab === 'lokality' && <LokalityTab key={`lokality-${refreshKey}`} />}\n        {activeTab === 'pozice' && <PoziceTab key={`pozice-${refreshKey}`} />}\n        {activeTab === 'prava' && <PravaTab key={`prava-${refreshKey}`} />}\n        {activeTab === 'role' && <RoleTab key={`role-${refreshKey}`} />}\n        {activeTab === 'stavy' && <StavyTab key={`stavy-${refreshKey}`} />}\n        {activeTab === 'useky' && <UsekyTab key={`useky-${refreshKey}`} />}\n        {activeTab === 'organizace' && <OrganizaceTab key={`organizace-${refreshKey}`} />}\n      </TabContainer>\n    </PageContainer>\n  );\n};\n\nexport default DictionariesNew;\n","/**\n * Utility funkce pro prci s textem\n */\n\n/**\n * Odstran diakritiku z textu (esk hky a rky)\n * Uiten pro vyhledvn bez ohledu na diakritiku\n *\n * @param {string} text - Text k normalizaci\n * @returns {string} Text bez diakritiky v lowercase\n *\n * @example\n * removeDiacritics('Pli luouk k')\n * // returns 'prilis zlutoucky kun'\n */\nexport const removeDiacritics = (text) => {\n  if (!text) return '';\n  return text\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, ''); // Odstran diakritick znaky\n};\n\n/**\n * Formtuje jmno uivatele vetn titul\n *\n * @param {object} user - Objekt uivatele s fields: titul_pred, jmeno, prijmeni, titul_za\n * @returns {string} Formtovan cel jmno s tituly\n *\n * @example\n * formatUserDisplayName({ titul_pred: 'Ing.', jmeno: 'Jan', prijmeni: 'Novk', titul_za: 'Ph.D.' })\n * // returns 'Ing. Jan Novk, Ph.D.'\n */\nexport const formatUserDisplayName = (user) => {\n  if (!user) return '';\n\n  const { titul_pred, jmeno, prijmeni, titul_za } = user;\n\n  // Sprvn poad: Titul ped + Jmno + Pjmen + Titul za\n  const titul_pred_str = titul_pred ? titul_pred + ' ' : '';\n  const jmeno_str = jmeno || '';\n  const prijmeni_str = prijmeni || '';\n  const titul_za_str = titul_za ? ', ' + titul_za : '';\n\n  return `${titul_pred_str}${jmeno_str} ${prijmeni_str}${titul_za_str}`\n    .replace(/\\s+/g, ' ')\n    .trim();\n};\n\n/**\n * Zsk zobraziteln jmno uivatele z ID nebo enriched objektu\n *\n * @param {number|string} userId - ID uivatele\n * @param {object} enrichedUser - Enriched objekt uivatele (s tituly)\n * @param {object} usersMap - Mapa uivatel (userId -> user data)\n * @returns {string} Zobraziteln jmno nebo 'Neznm'\n */\nexport const getUserDisplayName = (userId, enrichedUser = null, usersMap = {}) => {\n  if (enrichedUser) {\n    return formatUserDisplayName(enrichedUser);\n  }\n\n  if (userId && usersMap[userId]) {\n    // Pokud mme objekt s displayName, pouij ho\n    if (typeof usersMap[userId] === 'object' && usersMap[userId].displayName) {\n      return usersMap[userId].displayName;\n    }\n    // Pokud je to star formt (pouze string), pouij ho\n    if (typeof usersMap[userId] === 'string') {\n      return usersMap[userId];\n    }\n  }\n\n  return 'Neznm';\n};\n","/**\n * API sluby pro smlouvy\n * \n * Endpointy:\n * - POST /ciselniky/smlouvy/list - seznam smluv s filtry\n * - POST /ciselniky/smlouvy/detail - detail smlouvy + objednvky + statistiky\n * - POST /ciselniky/smlouvy/insert - vytvoen smlouvy\n * - POST /ciselniky/smlouvy/update - aktualizace smlouvy\n * - POST /ciselniky/smlouvy/delete - smazn smlouvy\n * - POST /ciselniky/smlouvy/bulk-import - hromadn import z Excel/CSV\n * - POST /ciselniky/smlouvy/prepocet-cerpani - pepoet erpn\n * \n * @author Frontend Team\n * @date 2025-11-23\n */\n\nimport axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API2_BASE_URL || '/api.eeo/';\n\nconst api = axios.create({\n  baseURL: `${API_BASE_URL}`,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// =============================================================================\n// ERROR HANDLING\n// =============================================================================\n\nconst handleApiError = (error, defaultMessage = 'Chyba serveru') => {\n  if (error.response) {\n    const { status, data } = error.response;\n    const errorMessage = data?.err || data?.error || data?.message || defaultMessage;\n\n    switch (status) {\n      case 401:\n        throw new Error('Neplatn token. Pihlaste se znovu.');\n      case 403:\n        throw new Error('Nemte oprvnn k tto akci.');\n      case 404:\n        throw new Error('Zznam nebyl nalezen.');\n      case 400:\n        throw new Error(errorMessage);\n      case 409:\n        throw new Error(errorMessage); // Duplicita\n      default:\n        throw new Error(errorMessage);\n    }\n  } else if (error.request) {\n    throw new Error('Server neodpovd. Zkontrolujte pipojen.');\n  } else {\n    throw new Error(error.message || defaultMessage);\n  }\n};\n\nconst checkResponse = (response, operation = 'operace') => {\n  if (response.data?.err) {\n    throw new Error(response.data.err);\n  }\n  if (response.data?.status === 'error') {\n    throw new Error(response.data.message || `${operation} se nezdaila`);\n  }\n  if (response.data?.status !== 'ok') {\n    throw new Error(`${operation} se nezdaila - neplatn status`);\n  }\n  return response.data;\n};\n\n// =============================================================================\n// API FUNKCE\n// =============================================================================\n\n/**\n * Nate seznam smluv s filtry\n */\nexport async function getSmlouvyList({\n  token,\n  username,\n  show_inactive = false,\n  usek_id = null,\n  druh_smlouvy = null,\n  stav = null,\n  search = null,\n  platnost_od = null,\n  platnost_do = null,\n  limit = 1000,\n  offset = 0\n}) {\n  try {\n    const payload = {\n      username,\n      token,\n      show_inactive,\n      usek_id,\n      druh_smlouvy,\n      stav,\n      search,\n      platnost_od,\n      platnost_do,\n      limit,\n      offset\n    };\n\n    const response = await api.post('ciselniky/smlouvy/list', payload);\n\n    return checkResponse(response, 'Natn smluv');\n  } catch (error) {\n    handleApiError(error, 'Chyba pi natn smluv');\n    throw error;\n  }\n}\n\n/**\n * Nate detail smlouvy vetn objednvek a statistik\n */\nexport async function getSmlouvaDetail({ token, username, id }) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/detail', {\n      username,\n      token,\n      id\n    });\n\n    const data = checkResponse(response, 'Natn detailu smlouvy');\n    return data.data || null;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi natn detailu smlouvy');\n    throw error;\n  }\n}\n\n/**\n * Vytvo novou smlouvu\n */\nexport async function createSmlouva({ token, username, smlouvaData }) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/insert', {\n      username,\n      token,\n      ...smlouvaData\n    });\n\n    const data = checkResponse(response, 'Vytven smlouvy');\n    return data.data;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi vytven smlouvy');\n    throw error;\n  }\n}\n\n/**\n * Aktualizuje existujc smlouvu\n */\nexport async function updateSmlouva({ token, username, id, smlouvaData }) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/update', {\n      username,\n      token,\n      id,\n      ...smlouvaData\n    });\n\n    const data = checkResponse(response, 'Aktualizace smlouvy');\n    return data.data;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi aktualizaci smlouvy');\n    throw error;\n  }\n}\n\n/**\n * Smae smlouvu\n */\nexport async function deleteSmlouva({ token, username, id }) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/delete', {\n      username,\n      token,\n      id\n    });\n\n    const data = checkResponse(response, 'Mazn smlouvy');\n    return data.data;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi mazn smlouvy');\n    throw error;\n  }\n}\n\n/**\n * Hromadn import smluv z Excel/CSV\n */\nexport async function bulkImportSmlouvy({\n  token,\n  username,\n  data,\n  overwrite_existing = false,\n  nazev_souboru = null,\n  typ_souboru = null,\n  velikost_souboru = null\n}) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/bulk-import', {\n      username,\n      token,\n      data,\n      overwrite_existing,\n      nazev_souboru,\n      typ_souboru,\n      velikost_souboru\n    });\n\n    const result = checkResponse(response, 'Import smluv');\n    return result.data;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi importu smluv');\n    throw error;\n  }\n}\n\n/**\n * Pepot erpn smluv\n */\nexport async function prepocetCerpaniSmluv({\n  token,\n  username,\n  cislo_smlouvy = null,\n  usek_id = null\n}) {\n  try {\n    const response = await api.post('ciselniky/smlouvy/prepocet-cerpani', {\n      username,\n      token,\n      cislo_smlouvy,\n      usek_id\n    });\n\n    const data = checkResponse(response, 'Pepoet erpn');\n    return data.data;\n  } catch (error) {\n    handleApiError(error, 'Chyba pi pepotu erpn');\n    throw error;\n  }\n}\n\n// =============================================================================\n// KONSTANTY PRO FRONTEND\n// =============================================================================\n\n/**\n * Nate druhy smluv z selnku\n * @param {string} token - Auth token\n * @param {string} username - Username\n * @returns {Promise<Array>} Seznam druh smluv\n */\nexport const getDruhySmluv = async ({ token, username }) => {\n  try {\n    const response = await api.post('/ciselniky/stavy/list', {\n      token,\n      username,\n      typ_objektu: 'DRUH_SMLOUVY'\n    });\n\n    if (response.data.status === 'ok' && response.data.data) {\n      // Pevod na formt pro dropdown (kod_stavu jako value, nazev_stavu jako label)\n      return response.data.data.map(druh => ({\n        value: druh.kod_stavu,\n        label: druh.nazev_stavu,\n        popis: druh.popis\n      }));\n    }\n\n    return [];\n  } catch (error) {\n    console.error('Chyba pi natn druh smluv:', error);\n    // Fallback na zkladn druhy pokud API sele\n    return DRUH_SMLOUVY_OPTIONS_FALLBACK;\n  }\n};\n\n// Fallback hodnoty pro ppad selhn API (backward compatibility)\nexport const DRUH_SMLOUVY_OPTIONS_FALLBACK = [\n  { value: 'SLUZBY', label: 'Smlouva o poskytovn slueb' },\n  { value: 'KUPNI', label: 'Kupn smlouva' },\n  { value: 'RAMCOVA', label: 'Rmcov smlouva' }\n];\n\n// Export pro backward compatibility (bude deprecated)\nexport const DRUH_SMLOUVY_OPTIONS = DRUH_SMLOUVY_OPTIONS_FALLBACK;\n\n// Stavy smluv - BE vrac ENUM bez diakritiky (AKTIVNI, UKONCENA, PRERUSENA, PRIPRAVOVANA, NEAKTIVNI)\n// \n// NEAKTIVNI = soft delete, smlouva existuje v DB ale nen aktivn (aktivni = 0)\n// PRIPRAVOVANA = smlouva vytvoen, ale platnost jet nezaala (dnes < platnost_od)\n// AKTIVNI = platn smlouva v aktulnm obdob (platnost_od <= dnes <= platnost_do)\n// UKONCENA = smlouva vyprela (dnes > platnost_do)\n// PRERUSENA = smlouva doasn peruena (manuln nastaven)\nexport const STAV_SMLOUVY_OPTIONS = [\n  { value: 'AKTIVNI', label: 'Platn', color: '#10b981', icon: '', popis: 'Smlouva je v platnosti a lze ji pouvat' },\n  { value: 'UKONCENA', label: 'Vyprela', color: '#dc2626', icon: '', popis: 'Smlouva pekroila datum konce platnosti' },\n  { value: 'PRERUSENA', label: 'Peruena', color: '#f59e0b', icon: '', popis: 'Smlouva je doasn pozastavena' },\n  { value: 'PRIPRAVOVANA', label: 'Pipraven', color: '#f97316', icon: '', popis: 'Smlouva ek na zatek platnosti' },\n  { value: 'NEAKTIVNI', label: 'Neaktivn', color: '#6b7280', icon: '', popis: 'Smlouva je deaktivovna (soft delete)' }\n];\n\n// Helper funkce pro prci se stavy smluv\nexport const getStavSmlouvyConfig = (stav) => {\n  return STAV_SMLOUVY_OPTIONS.find(opt => opt.value === stav) || {\n    value: stav,\n    label: stav,\n    color: '#6b7280',\n    icon: ''\n  };\n};\n\nexport const getStavSmlouvyLabel = (stav) => {\n  return getStavSmlouvyConfig(stav).label;\n};\n\nexport const getStavSmlouvyColor = (stav) => {\n  return getStavSmlouvyConfig(stav).color;\n};\n\nexport const SAZBA_DPH_OPTIONS = [\n  { value: 0, label: '0% (osvobozeno)' },\n  { value: 12, label: '12% (snen)' },\n  { value: 21, label: '21% (zkladn)' }\n];\n","/**\n * DOCX Orders API Service\n * Speciln endpoint pro natn dat objednvek pro DOCX generovn\n *\n * Endpoint: POST /api.eeo/sablona_docx/order-data\n * Datum: 22. jna 2025\n *\n * Klov vlastnosti:\n * - Bez ID pol (pro ist DOCX ablony)\n * - Boolean jako \"ano\"/\"\" msto true/false\n * - Null hodnoty jako przdn stringy\n * - Vnoen objekty (objednatel, dodavatel, stav)\n * - DOCX template ptelsk formty\n */\n\nimport axios from 'axios';\n\n// Axios instance pro DOCX order data endpoint\nconst apiDocxOrders = axios.create({\n  baseURL: process.env.REACT_APP_API2_BASE_URL,\n  headers: { 'Content-Type': 'application/json' }\n});\n\n// Response interceptor pro error handling\napiDocxOrders.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Check for authentication errors\n    if (error.response?.status === 401 || error.response?.status === 403) {\n      if (typeof window !== 'undefined') {\n        const event = new CustomEvent('authError', {\n          detail: { message: 'Vae pihlen vyprelo. Pihlaste se prosm znovu.' }\n        });\n        window.dispatchEvent(event);\n      }\n    }\n\n    // Check for HTML response (login page instead of JSON)\n    const responseText = error.response?.data || '';\n    if (typeof responseText === 'string' && responseText.includes('<!doctype')) {\n      if (typeof window !== 'undefined') {\n        const event = new CustomEvent('authError', {\n          detail: { message: 'Vae pihlen vyprelo. Obnovte strnku a pihlaste se znovu.' }\n        });\n        window.dispatchEvent(event);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n/**\n * Normalize error messages from API responses\n */\nexport function normalizeDocxOrdersError(err) {\n  if (err.response?.data?.message) return err.response.data.message;\n  if (err.response?.data?.error) return err.response.data.error;\n  if (err.response?.data?.err) return err.response.data.err;\n  if (err.response?.data) return err.response.data;\n  if (err.message) return err.message;\n  return 'Neznm chyba pi komunikaci se serverem';\n}\n\n/**\n * Zsk data objednvky optimalizovan pro DOCX generovn\n *\n * @param {Object} params - Parametry poadavku\n * @param {string} params.token - Autentifikan token\n * @param {string} params.username - Uivatelsk jmno\n * @param {number} params.objednavka_id - ID objednvky\n * @returns {Promise<Object>} - DOCX ptelsk data objednvky\n */\nexport async function getDocxOrderData({ token, username, objednavka_id }) {\n  if (!token || !username) {\n    throw new Error('Chyb pstupov token nebo uivatelsk jmno. Pihlaste se prosm znovu.');\n  }\n\n  if (objednavka_id === null || objednavka_id === undefined) {\n    throw new Error('Chyb ID objednvky.');\n  }\n\n  try {\n    const payload = {\n      token,\n      username,\n      objednavka_id: parseInt(objednavka_id)\n    };\n\n    const response = await apiDocxOrders.post('sablona_docx/order-data', payload, { timeout: 8000 });\n\n    if (response.status !== 200) {\n      const error = 'Neoekvan kd odpovdi pi natn DOCX dat objednvky';\n      throw new Error(error);\n    }\n\n    const data = response.data;\n\n    if (data.err) {\n      throw new Error(data.err);\n    }\n\n    if (data.status === 'ok' && data.data) {\n      return data.data;\n    }\n\n    throw new Error('Neoekvan struktura odpovdi ze serveru');\n\n  } catch (error) {\n    console.error(' Chyba pi natn DOCX order data:', error);\n    throw new Error(normalizeDocxOrdersError(error));\n  }\n}\n\n/**\n *  NOV ENDPOINT - Zsk ENRICHED data objednvky pro DOCX generovn\n * \n * Tento endpoint vrac KOMPLETN data vetn:\n * - Enriched uivatelskch objekt (s lokalitami, telefony, emaily)\n * - Vypotanch hodnot (ceny, DPH, kombinace jmen)\n * - Seznamu uivatel pro vbr podpisu\n * - Poloek a ploh objednvky\n *\n * @param {Object} params - Parametry poadavku\n * @param {string} params.token - Autentifikan token\n * @param {string} params.username - Uivatelsk jmno\n * @param {number} params.objednavka_id - ID objednvky\n * @returns {Promise<Object>} - Kompletn enriched data\n * \n * @see docs/DOCX-ENRICHED-ENDPOINT-SPEC.md\n */\nexport async function getDocxOrderEnrichedData({ token, username, objednavka_id }) {\n  if (!token || !username) {\n    throw new Error('Chyb pstupov token nebo uivatelsk jmno. Pihlaste se prosm znovu.');\n  }\n\n  if (objednavka_id === null || objednavka_id === undefined) {\n    throw new Error('Chyb ID objednvky.');\n  }\n\n  try {\n    const payload = {\n      token,\n      username,\n      objednavka_id: parseInt(objednavka_id)\n    };\n\n    const response = await apiDocxOrders.post(\n      'sablona_docx/order-enriched-data', \n      payload, \n      { timeout: 10000 }\n    );\n\n    if (response.status !== 200) {\n      throw new Error('Neoekvan kd odpovdi pi natn enriched dat');\n    }\n\n    const data = response.data;\n\n    if (data.err) {\n      throw new Error(data.err);\n    }\n\n    if (data.status === 'ok' && data.data) {\n      return data.data;\n    }\n\n    throw new Error('Neoekvan struktura odpovdi ze serveru');\n\n  } catch (error) {\n    console.error(' Chyba pi natn DOCX enriched data:', error);\n    throw new Error(normalizeDocxOrdersError(error));\n  }\n}\n\n/**\n * Testovac funkce pro oven struktury dat\n */\nexport function validateDocxOrderData(orderData) {\n  const requiredFields = [\n    'cislo_objednavky',\n    'nazev_objednavky',\n    'objednatel',\n    'dodavatel',\n    'stav',\n    'polozky',\n    'celkova_cena_s_dph'\n  ];\n\n  const missingFields = requiredFields.filter(field => !orderData[field]);\n\n  if (missingFields.length > 0) {\n    console.warn(' Chybjc pole v DOCX order data:', missingFields);\n    return false;\n  }\n\n  // Kontrola vnoench objekt\n  if (!orderData.objednatel?.plne_jmeno) {\n    console.warn(' Chyb objednatel.plne_jmeno v DOCX order data');\n    return false;\n  }\n\n  if (!orderData.dodavatel?.nazev) {\n    console.warn(' Chyb dodavatel.nazev v DOCX order data');\n    return false;\n  }\n\n  return true;\n}\n\nexport default {\n  getDocxOrderData,\n  getDocxOrderEnrichedData, //  NOV FUNKCE\n  validateDocxOrderData,\n  normalizeDocxOrdersError\n};"],"names":["extractDocxFields","async","_zipContent$file","_zipContent$file2","_zipContent$file3","zipContent","JSZip","file","documentXml","Error","appXml","coreXml","fields","extractFieldsFromXml","success","metadata","extractMetadata","fileName","name","fileSize","size","lastModified","Date","error","console","message","docVariableRegex","match","exec","fieldName","push","type","fullMatch","position","index","instrTextRegex","fieldMatch","some","f","source","pRegex","pMatch","pXml","instrTexts","instrRegex","instrMatch","length","combinedInstr","join","replace","trim","fieldRegex","mergeFieldRegex","bookmarkRegex","contentControlRegex","customFieldRegex","fieldCounts","forEach","field","key","concat","reduce","acc","find","_objectSpread","count","sort","a","b","localeCompare","appData","extractXmlValue","appVersion","totalTime","application","totalEditTime","title","creator","created","modified","xml","tagName","regex","RegExp","getOrderFieldsForMapping","group","label","example","createEnhancedFieldMapping","mapping","orderFields","enhanced","Object","keys","k","docxFieldName","composition","template","sourceField","idx","separator","map","createFieldValuesFromMapping","orderData","arguments","undefined","fieldValues","entries","_ref","docxField","dbField","getValueFromOrderData","fieldKey","includes","values","split","part","fieldPart","rawValue","getNestedValue","formatFieldValue","filter","val","result","fieldMatches","cleanFieldName","combinedValue","formattedValue","value","fieldLower","toLowerCase","numValue","parseFloat","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","date","getTime","toLocaleDateString","toLocaleTimeString","hour","minute","String","obj","path","startsWith","polozky","Array","isArray","sum","item","cena_s_dph","cena_bez_dph","nazev","popis","n","mnozstvi","Set","jednotka","j","dodavatel_nazev","d","katalogove_cislo","p","cena","endsWith","basePath","objPart","current","jmeno_cele","jmeno","uzivatel_jmeno","prijmeni","uzivatel_prijmeni","celJemeno","garant_jmeno","garant_prijmeni","schvalovatel_jmeno","schvalovatel_prijmeni","generateFieldsFromApiData","apiData","warn","groups","prefixToCzechName","createField","czechName","toString","test","getFieldType","substring","detectGroupFromKey","underscoreMatch","prefix","dotMatch","lowerKey","dynamicGroups","baseFields","orderKeyFields","_ref5","groupInfo","groupName","_ref2","fullKey","JSON","stringify","_ref3","nestedKey","nestedValue","_ref4","itemKey","itemValue","processObject","charAt","toUpperCase","slice","arrayFields","_ref6","_ref7","dateFields","dateOnlyFields","unshift","keyFieldsWithoutDates","basicFields","staticFields","staticDateGroup","g","existingDateGroup","existingKeys","missingDateFields","log","fakturyGroup","vypocitaneGroup","systemGroup","staticUserGroup","existingUserGroup","missingFields","uniqueGroups","seenGroupNames","has","add","processDocxWithFields","keepEmptyFields","zip","content","arrayBuffer","loadedZip","loadAsync","parser","window","DOMParser","serializer","XMLSerializer","xmlDoc","parseFromString","replacedCount","skippedCount","processNode","node","childNodes","runs","i","nodeType","localName","beginIdx","endIdx","instr","r","getAttribute","foundEnd","m","r2","n2","nInstr","textContent","original","uppercase","lowercase","hledaneVarianty","firstR","firstChild","removeChild","tNew","createElementNS","namespaceURI","appendChild","del","from","documentElement","serializeToString","newDocx","generateAsync","nahrazeno","ponechano","celkemPoli","dostupnaData","uspesnost","blob","stats","totalFields","slideInUp","keyframes","_templateObject","_taggedTemplateLiteral","DialogOverlay","styled","div","_templateObject2","DialogContainer","_templateObject3","props","$large","DialogHeader","_templateObject4","DialogTitle","h2","_templateObject5","CloseButton","button","_templateObject6","DialogBody","_templateObject7","DialogFooter","_templateObject8","FormRow","_templateObject9","$columns","FormGroup","_templateObject0","Label","_templateObject1","RequiredStar","span","_templateObject10","Input","input","_templateObject11","$hasError","TextArea","textarea","_templateObject12","CheckboxWrapper","_templateObject13","Checkbox","_templateObject14","ErrorMessage","_templateObject15","Button","_templateObject16","PrimaryButton","_templateObject17","SecondaryButton","_templateObject18","isOpen","onClose","onSave","editData","icon","Icon","selectOptions","formData","setFormData","useState","errors","setErrors","isSaving","setIsSaving","useEffect","normalized","defaults","default","handleChange","prev","newErrors","renderField","hasError","_jsx","onChange","e","target","placeholder","disabled","CustomSelect","options","_jsxs","children","checked","checkboxLabel","ReactDOM","onClick","currentTarget","stopPropagation","X","color","onSubmit","preventDefault","validate","required","errorMessage","validationError","submit","rows","row","rowIndex","Math","floor","rowFields","AlertTriangle","Save","document","body","IconWrapper","HeaderContent","h3","DialogMessage","CancelButton","DangerButton","onConfirm","confirmText","loading","Trash2","Container","ActionBar","ActionButton","$primary","SearchBox","ClearButton","TableContainer","Table","table","TableHeaderRow","tr","TableHeaderCell","th","TableHeaderFilterRow","$isFirstColumn","TableRow","$isEven","TableCell","td","ActionCell","IconButton","Pagination","PageInfo","PaginationButtons","PageButton","PageSizeSelect","select","IconFilterButton","_templateObject19","FilterActionButton","_templateObject20","ColumnFilterWrapper","_templateObject21","ColumnFilterInput","_templateObject22","ColumnClearButton","_templateObject23","_templateObject24","Badge","_templateObject25","$type","_templateObject26","UserCountBadge","_templateObject27","EmptyState","_templateObject28","LokalityTab","_cache$lokality2","_deleteDialog$item","token","user","userDetail","useContext","AuthContext","showToast","ToastContext","cache","loadDictionary","invalidateCache","DictionaryCacheContext","user_id","getUserKey","baseKey","sid","getUserStorage","defaultValue","localStorage","getItem","parse","setUserStorage","setItem","data","setData","setLoading","globalFilter","setGlobalFilter","aktivniFilter","setAktivniFilter","columnFilters","setColumnFilters","sorting","setSorting","pageSize","setPageSize","pageIndex","setPageIndex","editDialog","setEditDialog","open","deleteDialog","setDeleteDialog","fetchData","_cache$lokality","username","lokality","loaded","filteredData","useMemo","isAktivni","aktivni","typ","parent_id","parent","id","pocet_uzivatelu","columns","accessorKey","header","enableSorting","cell","getValue","style","display","alignItems","gap","textAlign","MapPin","marginTop","fontSize","fontWeight","marginLeft","parentId","justifyContent","Users","FontAwesomeIcon","faCheckCircle","faTimesCircle","width","faBolt","className","faEdit","faTrash","useReactTable","initialState","pagination","state","onGlobalFilterChange","onSortingChange","onPaginationChange","updater","newState","getCoreRowModel","getSortedRowModel","getFilteredRowModel","getPaginationRowModel","dialogFields","faSearch","faTimes","faPlus","getHeaderGroups","headers","headerIndex","maxWidth","column","getCanSort","getToggleSortingHandler","cursor","flexRender","columnDef","getContext","getIsSorted","faChevronUp","faChevronDown","_objectWithoutProperties","_excluded","_excluded2","_excluded3","_excluded4","handleAktivniFilterClick","height","left","top","clipPath","handleClearFilters","faEraser","getRowModel","colSpan","marginBottom","getVisibleCells","cellIndex","min","marginRight","newSize","Number","goToFirstPage","goToPreviousPage","max","margin","getPageCount","goToNextPage","goToLastPage","UniversalDictionaryDialog","initialData","updateLokalita","createLokalita","DictionaryConfirmDialog","_Fragment","deleteLokalita","onCancel","cancelText","TableHeaderFilterCell","PaginationButton","LoadingOverlay","PoziceTab","_cache$pozice2","isDialogOpen","setIsDialogOpen","dialogMode","setDialogMode","editingItem","setEditingItem","isConfirmOpen","setIsConfirmOpen","deletingItem","setDeletingItem","_cache$pozice","pozice","searchLower","usekText","usek_zkr","usek_nazev","usek_popis","nazev_pozice","usek","getParentName","Briefcase","opacity","usekZkr","usekNazev","usekPopis","flexDirection","handleEdit","handleDeleteClick","manualPagination","faSyncAlt","spin","handleCreate","_header$id","removed","_toPropertyKey","_header$id2","_header$id3","_header$id4","_header$id5","_header$id6","_header$id7","_header$id8","React","createPozice","updatePozice","mode","deletePozice","UsekyTab","_cache$useky2","refreshDictionary","_cache$useky","useky","Network","padding","createUsek","updateUsek","deleteUsek","InfoText","OrganizaceTab","_cache$organizace2","_cache$organizace","organizace","nazev_organizace","ico","mesto","email","adresa","kontakt","zastoupeny","Building","ulice_cislo","psc","telefon","aktivniValue","_excluded5","_excluded6","_excluded7","_excluded8","_excluded9","_excluded0","_excluded1","_excluded10","createOrganizace","updateOrganizace","deleteOrganizace","TypeBadge","StavyTab","_cache$stavy2","_cache$stavy","stavy","nazev_stavu","kod_stavu","typ_objektu","Circle","headerGroup","rest","updateStav","createStav","deleteStav","scrollbarStyles","$variant","$active","TableWrapper","StyledTable","Thead","thead","Th","$sortable","$width","Tbody","tbody","Td","FilterRow","FilterCell","RoleName","RoleIcon","$inactive","StatusBadge","StatBadge","ActionButtons","ExpandedRow","ExpandedCell","ExpandedContent","Section","$last","SectionHeader","PermissionsGrid","_templateObject29","PermissionCard","_templateObject30","PermissionCode","_templateObject31","PermissionDesc","_templateObject32","_templateObject33","_templateObject34","_templateObject35","_templateObject36","_templateObject37","_templateObject38","_templateObject39","_templateObject40","_templateObject41","_templateObject42","$visible","_templateObject43","_templateObject44","_templateObject45","_templateObject46","_templateObject47","_templateObject48","_templateObject49","_templateObject50","_templateObject51","_templateObject52","DialogContent","_templateObject53","_templateObject54","_templateObject55","_templateObject56","_templateObject57","PravaGrid","_templateObject58","PravaSection","_templateObject59","PravaList","_templateObject60","PravoItem","_templateObject61","PravoInfo","_templateObject62","PravoButton","_templateObject63","EmptyMessage","_templateObject64","_templateObject65","_templateObject66","SearchInputStyled","_templateObject67","_templateObject68","SaveButton","_templateObject69","PravaManagementDialog","role","availablePrava","searchAssigned","setSearchAssigned","searchAvailable","setSearchAvailable","pendingChanges","setPendingChanges","toAdd","toRemove","changesCount","hasChanges","assignedPrava","originalAssigned","prava_globalni","addedPrava","_p$kod_prava","_p$popis","kod_prava","availableToAssign","originalAssignedIds","wasOriginallyAssigned","isPendingAdd","isPendingRemove","_p$kod_prava2","_p$popis2","createPortal","Shield","nazev_role","pravo","background","borderColor","borderWidth","handleLocalRemove","handleLocalAdd","CopyPravaDialog","sourceRole","allRoles","onCopy","selectedTargetRoleIds","setSelectedTargetRoleIds","selectedPravaIds","setSelectedPravaIds","searchText","setSearchText","searchRoleText","setSearchRoleText","isCopying","setIsCopying","showConfirmDialog","setShowConfirmDialog","filteredPrava","search","_p$kod_prava3","_p$popis3","targetRoles","filtered","kod_role","canCopy","faCopy","handleSelectAllRoles","borderRadius","border","handleDeselectAllRoles","gridTemplateColumns","maxHeight","overflowY","gridColumn","isSelected","roleName","pravaCount","transition","userSelect","handleToggleTargetRole","roleId","flex","minWidth","overflow","textOverflow","whiteSpace","handleSelectAll","handleDeselectAll","handleTogglePravo","pravoId","lineHeight","handleCopyClick","ConfirmDialog","faExclamationTriangle","variant","paddingLeft","RoleTab","_userDetail$roles","_cache$role2","hasPermission","canEdit","isSuperAdmin","roles","isPravaDialogOpen","setIsPravaDialogOpen","selectedRole","setSelectedRole","setAvailablePrava","isCopyPravaDialogOpen","setIsCopyPravaDialogOpen","copySourceRole","setCopySourceRole","normalizedData","uniquePrava","Map","Popis","_cache$role","minSize","maxSize","fontStyle","_row$original$statist","statistiky","pocet_prav","_row$original$statist2","_ref8","toggleExpanded","getIsExpanded","pravaData","handleManagePrava","Key","handleCopyPrava","_item$statistiky","_item$statistiky2","getExpandedRowModel","globalFilterFn","customGlobalFilterFn","columnId","filterValue","roleDesc","userCount","permissions","perm","permName","nazev_prava","permCode","permDesc","popis_prava","renderExpandedRow","_role$statistiky","_role$statistiky2","faGlobe","_role$statistiky3","vazba_aktivni","pravo_aktivni","handleAddNew","confirm","_result$data","_result$data2","apiv2Dictionaries","dry_run","deletedCount","deleted_count","faBroom","_asc$desc$header$colu","asc","desc","isInactive","isEven","onMouseEnter","onMouseLeave","role_id","prava_to_add","prava_to_remove","addedCount","removedCount","targetRoleIds","totalCopied","totalSkipped","results","targetRoleId","targetRole","targetPravaIds","pravaToAdd","summary","duration","PaginationInfo","PaginationControls","LoadingState","PravaTab","_cache$prava2","_cache$prava","prava","createPravo","updatePravo","deletePravo","$dragOver","$mapped","$complete","$completed","ENRICHED_API_STRUCTURE","topLevel","dodavatel","enrichedUserFields","enrichedUserPrefixes","vypocitane","DEPRECATED_FIELDS_MAP","newPath","reason","validateDocxMapping","warnings","apiPath","deprecated","suggestion","severity","isValidPath","valid","validFields","w","ExpandableSection","$expanded","SectionHeaderLeft","SectionIcon","SectionTitle","SectionSubtitle","ExpandIcon","SectionContent","$status","RefreshButton","ProcessingOverlay","SpinnerIcon","CompactMappingContainer","MappingGrid","DocxFieldsPanel","DatabaseFieldsPanel","PanelHeader","PanelHeaderTop","HeaderIcon","HeaderTitle","SearchInput","SearchIcon","ClearSearchButton","FieldsScrollArea","DocxFieldsScrollArea","DatabaseFieldsScrollArea","DocxFieldCard","FieldHeader","FieldTypeIcon","FieldName","MappingZone","MappedField","MappedFieldLabel","ValidationWarning","ValidationSuggestion","MultiMappedFields","MappedFieldChip","$isDragging","$isComposed","FieldChipText","ChipRemoveButton","SeparatorIndicator","UnmapButton","DropPlaceholder","FieldGroup","GroupHeader","GroupToggleIcon","GroupFields","DatabaseFieldCard","ComposedFieldBadge","ComposedFieldInfo","FieldComposition","ComposedFieldTag","FieldInfo","FieldLabel","FieldMeta","FieldKey","FieldTypeTag","AIAutoMapButton","ExpandCollapseButton","onMappingChange","expanded","controlledExpanded","onExpandChange","sampleOrderId","useDynamicFields","internalExpanded","setInternalExpanded","analysisResult","setAnalysisResult","analyzing","setAnalyzing","aiMapping","setAiMapping","setOrderFields","draggedField","setDraggedField","dragOverTarget","setDragOverTarget","expandedGroups","setExpandedGroups","multiMapping","setMultiMapping","draggedChip","setDraggedChip","dragOverChip","setDragOverChip","docxFieldsSearch","setDocxFieldsSearch","dbFieldsSearch","setDbFieldsSearch","mappingValidation","setMappingValidation","useRef","enrichedData","getDocxOrderEnrichedData","objednavka_id","dynamicFields","pocet_skupin","celkem_poli","skupiny","loadFields","initialExpanded","validation","newMultiMapping","allFields","flatMap","mappedValue","fieldKeys","fieldObjects","Boolean","areAllGroupsExpanded","every","analyzeDocxFile","docxFile","getFieldIcon","fieldType","faHashtag","faEye","faCode","faUser","handleDragLeave","handleRemoveMapping","newMapping","newMulti","handleChipDragLeave","status","getStatus","_analysisResult$field","_analysisResult$field2","text","mappedCount","handleExpand","newExpanded","faFileWord","faSpinner","faCheck","_analysisResult$field3","intelligentRules","docxPatterns","dbFields","priority","category","mappingLog","findBestFuzzyMatch","bestField","bestScore","dbKey","dbLabel","score","docxWords","dbWords","docxWord","dbWord","levenshteinDistance","str1","str2","matrix","_docxField$name","bestMatch","matchReason","exactMatch","_dbField$key","_dbField$label","rule","pattern","dbFieldKey","fuzzyMatch","docx","db","finalMapping","handleRefresh","faSync","nameComparison","sensitivity","numeric","typeOrder","_orderFields$flatMap$","fieldError","onDragOver","handleDragOver","onDragLeave","onDrop","handleDrop","existingMapping","existingMultiMapping","currentFields","existingField","newMultiFields","composedKey","mappedField","fieldIndex","draggable","onDragStart","handleChipDragStart","dataTransfer","effectAllowed","handleChipDragOver","handleChipDrop","targetIndex","sourceIndex","movedField","splice","handleRemoveFromMultiMapping","fieldToRemove","faDownload","collapseAllGroups","allCollapsed","expandAllGroups","allExpanded","faAngleDoubleUp","faAngleDoubleDown","filteredFields","toggleGroup","_field$label","labelParts","dbFieldName","handleDragStart","composedField","faInfoCircle","jsonScrollbarStyles","$loading","TableHeader","$isInactive","ModalOverlay","$isFullscreen","ModalContainer","ModalHeader","ModalHeaderContent","HeaderLeft","ModalTitle","ModalSubtitle","ModalBody","UpperSection","$hasMapping","LeftColumn","RightColumn","NameAndFileRow","FullWidthJsonEditor","JsonHeader","JsonTitle","h4","JsonActions","CopyButton","JsonEditor","FullWidthJsonTextarea","JsonHighlightContainer","JsonHighlightOverlay","pre","ValidationPanel","ValidationHeader","ValidationList","ValidationItem","ValidationItemHeader","ValidationItemBody","AutoFixButton","ValidationSummary","$valid","FormSection","FormSectionHeader","FormSectionContent","InputWithIcon","hasTextarea","hasIcon","monospace","CheckboxLabel","_templateObject70","_templateObject71","ModalFooter","_templateObject72","ModalForm","form","_templateObject73","FooterLeft","_templateObject74","FooterRight","_templateObject75","_templateObject76","FileDropZone","_templateObject77","VerifyStats","_templateObject78","StatCard","_templateObject79","StatLabel","_templateObject80","StatValue","_templateObject81","VerifyDetails","_templateObject82","DetailSection","_templateObject83","DetailLabel","_templateObject84","DetailValue","_templateObject85","DetailStatus","_templateObject86","$ok","ProblemItem","_templateObject87","StableSelectWrapper","_templateObject88","StableSelectButton","_templateObject89","hasValue","StableSelectDropdown","_templateObject90","StableSelectSearchBox","_templateObject91","StableSelectSearchInput","_templateObject92","StableSelectSearchIcon","_templateObject93","StableSelectOption","_templateObject94","level","isHeader","selected","StableSelectValue","_templateObject95","StableCustomSelect","onBlur","loadingText","multiple","getOptionLabel","getOptionValue","setIsOpen","searchTerm","setSearchTerm","internalScroll","setInternalScroll","wrapperRef","buttonRef","searchInputRef","normalizedValue","filteredOptions","option","cislo_lp","nazev_uctu","displayValue","opt","handleClickOutside","event","contains","addEventListener","removeEventListener","setTimeout","_searchInputRef$curre","focus","ref","handleToggle","Search","optionValue","optionLabel","currentValues","newValues","v","handleOptionClick","readOnly","highlightJsonSyntax","jsonString","highlighted","API_BASE_URL","process","defaultUploadForm","typ_dokumentu","verze","platnost_od","platnost_do","castka","min_cena","max_cena","mapovani_json","docx_mapping","DocxSablonyTab","_table$getHeaderGroup","_diskStatus$editingTe","_diskStatus$editingTe2","_diskStatus$editingTe3","_diskStatus$editingTe4","_diskStatus$editingTe5","_diskStatus$editingTe6","_verifyResult$templat","_verifyResult$orphane","start","startProgress","setProgress","done","doneProgress","ProgressContext","docxApi","createDocxApi","list","filters","getDocxSablonyList","create","append","createDocxSablona","update","updateDocxSablona","updateWithFile","updateDocxSablonaWithFile","reupload","reuploadDocxSablona","delete","deleteDocxSablona","deactivate","deactivateDocxSablona","download","downloadDocxSablona","verify","verifyDocxSablony","verifySingle","verifySingleDocxSablona","getDownloadUrl","loadData","useCallback","templates","verifyFilesInBackground","loadTypyDokumentu","setLoadingTypy","typyOptions","getTypyPriloh25","setTypyDokumentu","diskFilter","setDiskFilter","showUploadModal","setShowUploadModal","showEditModal","setShowEditModal","isEditMode","setIsEditMode","editingTemplate","setEditingTemplate","showConfirmDelete","setShowConfirmDelete","selectedTemplate","setSelectedTemplate","typyDokumentu","loadingTypy","verifyResult","setVerifyResult","showVerifyModal","setShowVerifyModal","diskStatus","setDiskStatus","downloadedTemplateFile","setDownloadedTemplateFile","mappingSectionVisible","setMappingSectionVisible","jsonCopied","setJsonCopied","inlinePreviewHtml","setInlinePreviewHtml","isDragging","setIsDragging","isFullscreen","setIsFullscreen","showFileReplaceConfirm","setShowFileReplaceConfirm","pendingFileInputId","setPendingFileInputId","inlinePreviewExpanded","setInlinePreviewExpanded","generatingPreview","setGeneratingPreview","showFileRemoveConfirm","setShowFileRemoveConfirm","uploadForm","setUploadForm","skipAutoDeactivation","diskStatusUpdate","templatesToDeactivate","templateResult","fileExists","file_exists","t","statusUpdate","deactivateResult","prevData","deactivateError","successfulDeactivations","failedDeactivations","templatesWithStatus","x","mappingToValidate","handleVerifyTemplateMemo","handleVerifyTemplate","handleDownloadMemo","handleDownload","handleDownloadOriginalMemo","handleDownloadOriginal","handlePreviewMemo","handlePreview","handleEditMemo","handleDeleteClickMemo","handleToggleStatusMemo","handleToggleStatus","FileText","flexShrink","dateValue","day","getDate","padStart","month","getMonth","year","getFullYear","dateStr","hours","getHours","minutes","getMinutes","timeStr","fontFamily","kb","toFixed","_row$original$vytvori","_row$original$aktuali","vytvoril","aktualizoval","paddingRight","Intl","NumberFormat","currency","format","_ref9","faHdd","animation","_ref0","enableResizing","_ref1","mappingSource","hasMapping","faToggleOn","faToggleOff","compareNumericValue","trimmed","operatorMatch","operator","valueStr","compareValue","numericItemValue","_item$vytvoril","_item$vytvoril2","_item$vytvoril3","_item$aktualizoval","_item$aktualizoval2","_item$aktualizoval3","searchNormalized","removeDiacritics","vytvorilJmeno","vytvorilPrijmeni","vytvorilUsername","vytvorilCele","aktualizovalJmeno","aktualizovalPrijmeni","aktualizovalUsername","aktualizovalCele","dtVytvoreni","dtVytvoreniCas","dt_vytvoreni","velikostKB","velikost_souboru","castkaStr","aktivniText","word","nazev_souboru","dt_upraveno","columnResizeMode","enableColumnResizing","enableGlobalFilter","columnSizing","dt_aktualizace","newStatus","action","templateId","templateName","currentStatus","url","URL","createObjectURL","createElement","href","click","revokeObjectURL","downloadDocxSablonaAsFile","enhancedMapping","generateUniversalHtmlPreview","mappingFields","html","mammoth","_ref10","dbFieldLower","random","styledValue","fullHtml","Blob","existingDocxMapping","mapovaniJsonString","templateDiskStatus","downloadExistingDocxForAnalysis","handleFileInputClick","fileInputId","_document$getElementB","getElementById","handleFileSelect","performFileReplace","detectedType","filename","keywords","typName","typValue","typeKeywords","keyword","detectDocumentType","json_mapovani","then","_ref11","catch","handleDocxMappingChange","handleOpenUploadModal","faUpload","backgroundColor","borderTop","newFilters","right","bottom","backdropFilter","WebkitBackdropFilter","zIndex","boxShadow","faCompress","faExpandArrowsAlt","_uploadForm$nazev","isEditing","hasNewFile","_uploadForm$file","hasToken","endpoint","FormData","docxMappingJson","fieldsCount","updateData","htmlContent","response","files","accept","_e$target$files","Package","Hash","Calculator","cleanValue","transform","pointerEvents","_e$target$files2","minHeight","jsonContent","navigator","clipboard","writeText","dangerouslySetInnerHTML","__html","parsed","onScroll","overlay","parentElement","querySelector","scrollTop","scrollLeft","spellCheck","autoComplete","autoCorrect","autoCapitalize","caretColor","handleAutoFixMapping","fixedMapping","fixed","autoFixMapping","fixedJson","warning","DocxMappingExpandableSection","wordBreak","handleCloseUploadModal","userRole","integrity_ok","total_templates","valid_templates","missing_files","upload_directory","directory_exists","directory_writable","cesta_souboru","orphaned_files","_document$getElementB2","removeDocxSablonaFile","handleRemoveTemplateFile","LeftSection","RightSection","$error","Textarea","UsersList","UserItem","UserInfo","UserIcon","UserDetails","UserName","UserMeta","MainBadge","UserActions","RemoveButton","$isMain","EditDateButton","EditModeContainer","EditDateInputs","EditDateLabel","EditDatePickerWrapper","EditModeButtons","SaveEditButton","CancelEditButton","AddUserSection","AddUserRow","UsekDisplay","UsekBadge","UsekName","AddButton","EmptyUsers","ConfirmOverlay","ConfirmTitle","ConfirmMessage","ConfirmButtons","ConfirmButton","ConfirmCancelButton","ConfirmDeleteButton","SearchableSelectWrapper","SearchableSelectButton","$hasIcon","$isEmpty","$isOpen","SearchableDropdown","SearchInputWrapper","SearchClearButton","DropdownOptions","DropdownOption","$selected","NoResults","SearchableSelect","dropdownPosition","setDropdownPosition","dropdownRef","rect","getBoundingClientRect","selectedOption","handleButtonClick","ChevronDown","handleSelect","onSuccess","cashbox","kod_pracoviste","nazev_pracoviste","ciselna_rada_vpd","vpd_od_cislo","ciselna_rada_ppd","ppd_od_cislo","poznamka","setUseky","selectedUsek","setSelectedUsek","users","setUsers","availableUsers","setAvailableUsers","selectedUser","setSelectedUser","isMainUser","setIsMainUser","saving","setSaving","loadingUseky","setLoadingUseky","setError","confirmRemove","setConfirmRemove","show","assignmentId","userName","editingUserId","setEditingUserId","editValues","setEditValues","platne_od","platne_do","allUsers","uzivatele","today","toISOString","activeUsers","loadAvailableUsers","loadUseky","usekyData","getUsekyList","show_inactive","matchedUsek","u","err","cashbookAPI","getAvailableUsers","handleCancelEditDates","handleRemoveUserCancel","cislo_pokladny","usekId","handleUsekChange","parseInt","User","uzivatel_id","uzivatel_cele_jmeno","je_hlavni","DatePicker","newValue","handleSaveUserDates","userId","handleEditUserClick","Calendar","handleRemoveUserClick","prirazeni_id","cele_jmeno","jeHlavni","assignUserToCashbox","pokladna_id","updatedCashbox","getCashboxList","pokladny","addedUser","Plus","updateCashbox","usersPayload","syncCashboxUsers","_err$response","_err$response$data","unassignUserFromCashbox","affected_rows","affectedRows","oldUsersCount","updated","_err$response2","_err$response3","_err$response4","_err$response4$data","errorMsg","WarningBox","InfoBox","SuccessMessage","LoadingSpinner","assignment","successMessage","setSuccessMessage","setErrorMessage","isClosing","setIsClosing","handleEscKey","fullName","Check","AlertCircle","vpd_cislo","ppd_cislo","deleteAssignment","ErrorText","isMain","UserAvatar","UserDates","danger","AddUserForm","CheckboxGroup","InfoMessage","ButtonGroup","EmptyUsersState","searchPlaceholder","setUzivatele","loadingData","setLoadingData","assignedUsers","setAssignedUsers","newUserForm","setNewUserForm","je_zastupce","loadInitialData","usersResult","usekyResult","Promise","all","fetchAllUsers","au","handleSetMainUser","handleRemoveUser","handleAddUser","newAssignment","validateForm","_createResult$data","cashboxData","createResult","createCashbox","pokladnaId","assignmentData","Overlay","DialogBox","WarningIconLarge","InfoSection","InfoGrid","InfoRow","InfoLabel","InfoValue","RisksList","YearInput","ProgressBox","ProgressLabel","ProgressBarContainer","ProgressBarFill","ResultBox","ResultHeader","ResultGrid","ResultItem","$highlight","ResultLabel","ResultValue","ErrorBox","PlaceholderBox","PlaceholderIcon","DebugBox","DebugHeader","DebugContent","setYear","isProcessing","setIsProcessing","isCompleted","setIsCompleted","progress","total","phase","resultData","setResultData","handleClose","total_renumbered","vpd_renumbered","ppd_renumbered","debug","faCalculator","SettingsPanel","SettingsTitle","SettingsRow","SettingsLabel","SettingsDescription","SearchWrapper","TheadTr","Tr","NumberBadge","ActionIcons","$warning","$delete","UsersTitle","ExpandedUserIcon","ExpandedUserName","UserBadges","AddUserButton","CashbookTab","cashboxes","setCashboxes","globalSearch","setGlobalSearch","usePrefixSetting","setUsePrefixSetting","settingsSaving","setSettingsSaving","editDialogOpen","setEditDialogOpen","deleteDialogOpen","setDeleteDialogOpen","addDialogOpen","setAddDialogOpen","selectedAssignment","setSelectedAssignment","forceRenumberDialogOpen","setForceRenumberDialogOpen","assignmentToRenumber","setAssignmentToRenumber","canManage","cashboxResult","settingsResult","getSettings","c","renderSubComponent","lokalita_nazev","handleUnassignUserClick","handleAssignUser","cashboxId","handleUnassignUserConfirm","_error$response2","handleUnassignUserCancel","isAllExpanded","getIsAllRowsExpanded","toggleAllRowsExpanded","faMinus","handleDelete","handleForceRenumber","enableExpanding","getRowCanExpand","searchValue","faCog","valueToSave","updateSetting","faSave","EditCashboxDialog","handleEditSuccess","DeleteAssignmentDialog","handleDeleteSuccess","CreateCashboxDialog","handleAddSuccess","ForceRenumberDialog","forceRenumberDocuments","keysToRemove","removeItem","timeout","_error$response","_error$response$data","Modal","Header","Title","Body","FormGrid","FormField","$fullWidth","Select","CurrencyInputWrapper","AresSearchIcon","AresPopupOverlay","AresPopupModal","AresPopupHeader","AresPopupTitle","AresPopupCloseButton","AresPopupContent","AresSearchInputField","AresList","AresItem","AresLoadingSpinner","CurrencySymbol","StyledCurrencyInput","CalculatorIcon","ToggleSwitch","Footer","$first","$collapsible","$collapsed","CollapsibleContent","HintBox","ThreeColumnRow","InnerFormField","CurrencyInput","highlight","inputRef","localValue","setLocalValue","isFocused","setIsFocused","formatCurrency","num","finalValue","onFocus","handleFocus","handleBlurLocal","formatted","_smlouva$platnost_od","_smlouva$platnost_do","_druhySmluv$find","smlouva","isEdit","cislo_smlouvy","usek_id","druh_smlouvy","nazev_firmy","dic","nazev_smlouvy","popis_smlouvy","hodnota_bez_dph","hodnota_s_dph","hodnota_plneni_bez_dph","hodnota_plneni_s_dph","sazba_dph","pouzit_v_obj_formu","stav","cislo_dms","kategorie","showOptionalFields","setShowOptionalFields","druhySmluv","setDruhySmluv","DRUH_SMLOUVY_OPTIONS_FALLBACK","loadingDruhy","setLoadingDruhy","recentlyChangedFields","setRecentlyChangedFields","aresPopupOpen","setAresPopupOpen","aresSearch","setAresSearch","aresResults","setAresResults","loadingAres","setLoadingAres","highlightTimeoutsRef","druhy","getDruhySmluv","fetchDruhySmluv","markFieldAsChanged","clearTimeout","newSet","timeoutId","fetchAresData","trimmedSearchTerm","fetch","method","ok","_data$sidlo","json","obchodniJmeno","sidlo","textovaAdresa","requestData","pocet","ekonomickeSubjekty","_item$sidlo","_global","borderLeft","handleInputChange","maxLength","handleAresSearch","currentName","currentICO","viewBox","fill","stroke","strokeWidth","cx","cy","rx","ry","sazbaDph","sDph","plneniBezDph","plneniSDph","handleSazbaDphChange","SAZBA_DPH_OPTIONS","handleHodnotaPlneniBezDphChange","bezDph","handleHodnotaPlneniSDphChange","handleHodnotaBezDphChange","handleHodnotaSDphChange","dataToSave","updateSmlouva","smlouvaData","createSmlouva","userMessage","x1","y1","x2","y2","aresSearchTimeout","autoFocus","aresItem","handleAresSelect","HeaderButtons","HeaderButton","InfoItem","$color","ProgressSection","ProgressTitle","ProgressBar","ProgressFill","percent","$percent","StatsGrid","onEdit","navigate","useNavigate","recalculating","setRecalculating","showConfirm","setShowConfirm","showDraftWarning","setShowDraftWarning","orderToEdit","setOrderToEdit","currentDraftData","setCurrentDraftData","objednavky","formatDate","dateString","formatDateTime","faFileContract","cerpano_celkem","procento_cerpani","zbyva","pocet_objednavek","getStavColor","faBuilding","faMoneyBillWave","faChartLine","prumerna_objednavka","nejvetsi_objednavka","nejmensi_objednavka","ev_cislo","predmet","castka_s_dph","dt_prirazeni","draftManager","setCurrentUser","shouldShowConfirmDialog","draftDataToStore","isDraftForThisOrder","hasDraft","_draftData$formData","draftData","loadDraft","draftOrderId","savedOrderId","currentOrderId","hasNewConcept","isValidConcept","hasDbChanges","hasDraftChanges","handleEditOrder","posledni_prepocet","prepocetCerpaniSmluv","handleDraftWarningConfirm","deleteDraft","handleDraftWarningCancel","draftTitle","cislo_objednavky","isNewConcept","UploadZone","UploadIcon","UploadText","UploadHint","FileInput","PreviewSection","PreviewTable","PreviewThead","PreviewTh","PreviewTd","PreviewTr","ResultsBox","$success","ResultsSummary","ResultStat","ErrorList","ErrorItem","dragOver","setDragOver","setFile","parsedData","setParsedData","importing","setImporting","importResults","setImportResults","overwriteExisting","setOverwriteExisting","selectedFile","parseFile","reader","FileReader","onload","Uint8Array","workbook","XLSX","firstSheet","Sheets","SheetNames","jsonData","sheet_to_json","defval","excelDateToString","excelEpoch","mapped","readAsArrayBuffer","handleImport","bulkImportSmlouvy","overwrite_existing","typ_souboru","pop","formatExcelDate","faFileUpload","chyb","celkem_radku","uspesne_importovano","aktualizovano","preskoceno_duplicit","chybove_zaznamy","cas_importu_ms","handleDownloadTemplate","ws","json_to_sheet","wb","book_new","book_append_sheet","droppedFile","ToolbarContainer","FilterSection","FilterGrid","FilterField","FilterLabel","FilterSelect","StatsBar","StatItem","ColumnFilterSelect","EmptyIcon","EmptyText","EmptyHint","FILTERS_STORAGE_KEY","SHOW_FILTERS_STORAGE_KEY","SmlouvyTab","smlouvy","setSmlouvy","showFilters","setShowFilters","loadShowFiltersFromStorage","setFilters","savedFilters","loadFiltersFromStorage","saved","_unused","formModalOpen","setFormModalOpen","detailModalOpen","setDetailModalOpen","importModalOpen","setImportModalOpen","editingSmlouva","setEditingSmlouva","viewingSmlouva","setViewingSmlouva","confirmDialog","setConfirmDialog","smlouvyResult","getSmlouvyList","saveFiltersToStorage","saveShowFiltersToStorage","filteredSmlouvy","filterOd","smlouvaOd","smlouvaDo","filterDo","statistics","aktivniSmlouvy","s","smlouvyProStatistiku","celkemCerpano","celkemLimit","celkemZbyva","celkemPlneni","prumerneCerpani","pocatecniStav","cerpano","pocet_celkem","pocet_aktivnich","celkem_cerpano","celkem_limit","celkem_zbyva","celkem_plneni","prumerne_cerpani","handleView","detail","getSmlouvaDetail","isActive","deleteSmlouva","handleFilterChange","columnHelper","createColumnHelper","accessor","info","sortingFn","rowA","rowB","SmartTooltip","getStavSmlouvyColor","getStavSmlouvyLabel","sortedRows","paginatedRows","startIndex","endIndex","totalPages","ceil","handleDetailClose","faFileImport","DRUH_SMLOUVY_OPTIONS","STAV_SMLOUVY_OPTIONS","handleResetFilters","isPlaceholder","SmlouvyFormModal","reload","SmlouvyDetailModal","SmlouvyImportModal","PageContainer","TitlePanel","PageTitle","h1","RefreshIcon","TabContainer","TabHeader","Tab","DictionariesNew","activeTab","setActiveTab","handleTabChange","tabKey","refreshKey","setRefreshKey","faBook","preferredPosition","handleRefreshAllDictionaries","FileSignature","Building2","normalize","api","axios","baseURL","handleApiError","defaultMessage","request","checkResponse","_response$data","_response$data2","_response$data3","operation","limit","offset","payload","post","druh","getStavSmlouvyConfig","apiDocxOrders","normalizeDocxOrdersError","_err$response2$data","_err$response3$data","interceptors","use","_error$response3","CustomEvent","dispatchEvent","responseText","reject"],"sourceRoot":""}