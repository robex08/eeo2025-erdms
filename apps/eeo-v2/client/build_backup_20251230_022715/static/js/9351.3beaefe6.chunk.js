"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[9351],{4509:(n,e,t)=>{t.d(e,{T_:()=>l});var r,o,a,i=t(57528),s=t(45903);const l=s.A.div(r||(r=(0,i.A)(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n\n  /* Tooltip element */\n  .tooltip,\n  .cache-tooltip {\n    position: absolute;\n    top: calc(100% + 10px);\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.67);\n    color: white;\n    padding: 0.5rem 0.875rem;\n    border-radius: 8px;\n    border: 1px solid rgba(255, 255, 255, 0.4);\n    font-size: 0.85rem;\n    font-weight: 600;\n    white-space: nowrap;\n    box-shadow:\n      0 6px 20px rgba(0, 0, 0, 0.4),\n      0 2px 8px rgba(0, 0, 0, 0.25),\n      inset 0 1px 0 rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    /* Ikonka na za\u010d\xe1tku tooltip\u016f */\n    &::before {\n      content: '\u2139\ufe0f';\n      font-size: 1rem;\n      flex-shrink: 0;\n    }\n\n    /* Varianty ikon pomoc\xed data-icon atributu */\n    &[data-icon=\"info\"]::before { content: '\u2139\ufe0f'; }\n    &[data-icon=\"success\"]::before { content: '\u2705'; }\n    &[data-icon=\"warning\"]::before { content: '\u26a0\ufe0f'; }\n    &[data-icon=\"error\"]::before { content: '\u274c'; }\n    &[data-icon=\"database\"]::before { content: '\ud83d\udcbe'; }\n    &[data-icon=\"cache\"]::before { content: '\u26a1'; }\n    &[data-icon=\"time\"]::before { content: '\u23f1\ufe0f'; }\n    &[data-icon=\"calendar\"]::before { content: '\ud83d\udcc5'; }\n    &[data-icon=\"none\"]::before { content: none; }\n\n    backdrop-filter: blur(10px);\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    z-index: 999999;\n    line-height: 1.6;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n    /* \u0160ipka nahoru */\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 8px solid transparent;\n      border-bottom-color: rgba(0, 0, 0, 0.67);\n      filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n    }\n  }\n\n  /* Varianty pozicov\xe1n\xed */\n  .tooltip-top,\n  .tooltip.top {\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-right,\n  .tooltip.right {\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  .tooltip-left,\n  .tooltip.left {\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  }\n\n  /* Multi-line tooltips */\n  .tooltip-multiline,\n  .tooltip.multiline {\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  }\n\n  /* Zobrazen\xed p\u0159i hover */\n  &:hover .tooltip,\n  &:hover .cache-tooltip {\n    opacity: 1;\n  }\n"]))),d=s.A.div(o||(o=(0,i.A)(["\n  position: absolute;\n  top: calc(100% + 10px);\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.67);\n  color: white;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  font-size: 0.85rem;\n  font-weight: 600;\n  white-space: nowrap;\n  box-shadow:\n    0 6px 20px rgba(0, 0, 0, 0.4),\n    0 2px 8px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(10px);\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  z-index: 999999;\n  line-height: 1.6;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 8px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.67);\n    filter: drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.3));\n  }\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n"])),n=>n.$visible&&"\n    opacity: 1;\n  ",n=>"top"===n.$position&&"\n    top: auto;\n    bottom: calc(100% + 10px);\n\n    &::after {\n      bottom: auto;\n      top: 100%;\n      border-bottom-color: transparent;\n      border-top-color: rgba(0, 0, 0, 0.67);\n    }\n  ",n=>"right"===n.$position&&"\n    top: 50%;\n    left: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: auto;\n      right: 100%;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-right-color: rgba(0, 0, 0, 0.67);\n    }\n  ",n=>"left"===n.$position&&"\n    top: 50%;\n    left: auto;\n    right: calc(100% + 10px);\n    transform: translateY(-50%);\n\n    &::after {\n      top: 50%;\n      left: 100%;\n      right: auto;\n      bottom: auto;\n      transform: translateY(-50%);\n      border-bottom-color: transparent;\n      border-left-color: rgba(0, 0, 0, 0.67);\n    }\n  ",n=>n.$multiline&&"\n    white-space: normal;\n    max-width: 300px;\n    text-align: center;\n  ");(0,s.A)(d)(a||(a=(0,i.A)(["\n  padding: 0.375rem 0.625rem;\n  font-size: 0.8rem;\n"])))},49351:(n,e,t)=>{t.r(e),t.d(e,{default:()=>wr});var r,o,a,i,s,l,d,c,p,x,u,g,b,h,m,f,v,y,j,w,k,A=t(89379),z=t(57528),S=t(65043),C=t(97950),_=t(32730),P=t(75949),N=t(33637),F=t(45903),D=t(83910),I=t(97929),L=t(70579);const E=F.A.div(r||(r=(0,z.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(3px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n"]))),T=F.A.div(o||(o=(0,z.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n  max-width: 700px;\n  width: 100%;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),$=F.A.div(a||(a=(0,z.A)(["\n  padding: 1.5rem;\n  border-bottom: 2px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n"]))),O=F.A.h2(i||(i=(0,z.A)(["\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),M=F.A.button(s||(s=(0,z.A)(["\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),R=F.A.div(l||(l=(0,z.A)(["\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n"]))),H=F.A.div(d||(d=(0,z.A)(["\n  margin-bottom: 1.5rem;\n"]))),V=F.A.div(c||(c=(0,z.A)(["\n  width: 100%;\n  height: 32px;\n  background: #e5e7eb;\n  border-radius: 16px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n"]))),Z=F.A.div(p||(p=(0,z.A)(["\n  height: 100%;\n  background: linear-gradient(90deg, #10b981 0%, #059669 100%);\n  transition: width 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: 600;\n  font-size: 0.875rem;\n\n  ","\n"])),n=>n.error&&"\n    background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);\n  "),K=F.A.div(x||(x=(0,z.A)(["\n  margin-top: 0.5rem;\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.875rem;\n"]))),B=F.A.div(u||(u=(0,z.A)(["\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n"])),n=>"success"===n.type?"#ecfdf5":"error"===n.type?"#fef2f2":"#f3f4f6",n=>"success"===n.type?"#10b981":"error"===n.type?"#ef4444":"#d1d5db"),Y=F.A.div(g||(g=(0,z.A)(["\n  font-weight: 600;\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"])),n=>"success"===n.type?"#065f46":"error"===n.type?"#991b1b":"#374151"),W=F.A.div(b||(b=(0,z.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 0.75rem;\n  margin-top: 0.75rem;\n"]))),U=F.A.div(h||(h=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  font-size: 0.875rem;\n"]))),J=F.A.span(m||(m=(0,z.A)(["\n  color: #6b7280;\n"]))),q=F.A.span(f||(f=(0,z.A)(["\n  font-weight: 600;\n  color: ",";\n"])),n=>"success"===n.type?"#10b981":"error"===n.type?"#ef4444":"info"===n.type?"#3b82f6":"#374151"),G=F.A.div(v||(v=(0,z.A)(["\n  max-height: 300px;\n  overflow-y: auto;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n"]))),Q=F.A.div(y||(y=(0,z.A)(["\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: #f9fafb;\n  }\n"]))),X=(0,F.A)(D.g)(j||(j=(0,z.A)(["\n  animation: spin 1s linear infinite;\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]))),nn=F.A.div(w||(w=(0,z.A)(["\n  padding: 1rem 1.5rem;\n  border-top: 2px solid #e5e7eb;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  background: #f9fafb;\n"]))),en=F.A.button(k||(k=(0,z.A)(["\n  padding: 0.625rem 1.25rem;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n\n  ","\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"])),n=>n.primary?"\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n    }\n  ":"\n    background: white;\n    color: #374151;\n    border: 2px solid #d1d5db;\n\n    &:hover:not(:disabled) {\n      border-color: #9ca3af;\n    }\n  "),tn=n=>{var e,t;let{isOpen:r,onClose:o,selectedOrderIds:a,onImportComplete:i,importFunction:s}=n;const[l,d]=(0,S.useState)(!1),[c,p]=(0,S.useState)(0),[x,u]=(0,S.useState)(null),[g,b]=(0,S.useState)(""),[h,m]=(0,S.useState)(0),[f,v]=(0,S.useState)(0),[y,j]=(0,S.useState)(null),[w,k]=(0,S.useState)(null),[A,z]=(0,S.useState)(new Set),[_,P]=(0,S.useState)("");(0,S.useEffect)(()=>{r&&(d(!1),p(0),u(null),b(""),m(0),v(0),j(null),k(null),z(new Set),P(""))},[r]);const N=()=>{l||(y&&y.imported_count>0&&i&&i(),o())},F=(null===y||void 0===y||null===(e=y.results)||void 0===e?void 0:e.filter(n=>{var e,t,r,o,a,i;if(!_)return!0;const s=_.toLowerCase();if(null!==(e=n.cislo_objednavky)&&void 0!==e&&e.toLowerCase().includes(s))return!0;if(null!==(t=n.status)&&void 0!==t&&t.toLowerCase().includes(s))return!0;if(null!==(r=n.error)&&void 0!==r&&r.toLowerCase().includes(s))return!0;if(null!==(o=n.new_id)&&void 0!==o&&o.toString().includes(s))return!0;if(null!==(a=n.polozky_count)&&void 0!==a&&a.toString().includes(s))return!0;if(null!==(i=n.prilohy_count)&&void 0!==i&&i.toString().includes(s))return!0;if(n.prilohy_details&&Array.isArray(n.prilohy_details))for(const p of n.prilohy_details){var l,d,c;if(null!==(l=p.soubor)&&void 0!==l&&l.toLowerCase().includes(s))return!0;if(null!==(d=p.popis)&&void 0!==d&&d.toLowerCase().includes(s))return!0;if(null!==(c=p.error)&&void 0!==c&&c.toLowerCase().includes(s))return!0}return!1}))||[];if(!r)return null;const tn=a.length,rn=(null===y||void 0===y||null===(t=y.results)||void 0===t?void 0:t.length)||0,on=(null===y||void 0===y?void 0:y.imported_count)||0,an=(null===y||void 0===y?void 0:y.updated_count)||0,sn=(null===y||void 0===y?void 0:y.failed_count)||0;return C.createPortal((0,L.jsx)(E,{onClick:n=>n.target===n.currentTarget&&N(),children:(0,L.jsxs)(T,{children:[(0,L.jsxs)($,{children:[(0,L.jsxs)(O,{children:[(0,L.jsx)(D.g,{icon:I.$MS}),"Import star\xfdch objedn\xe1vek"]}),(0,L.jsx)(M,{onClick:N,disabled:l,children:(0,L.jsx)(D.g,{icon:I.GRI})})]}),(0,L.jsxs)(R,{children:[!l&&!y&&!w&&(0,L.jsxs)("div",{children:[(0,L.jsxs)("p",{style:{marginBottom:"1rem",color:"#6b7280"},children:["P\u0159ipraveno k importu ",(0,L.jsx)("strong",{children:tn})," objedn\xe1vek ze star\xe9 datab\xe1ze do nov\xe9ho syst\xe9mu."]}),(0,L.jsxs)(B,{children:[(0,L.jsx)(Y,{children:"\u2139\ufe0f Co se bude d\xedt:"}),(0,L.jsxs)("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#6b7280",fontSize:"0.875rem"},children:[(0,L.jsxs)("li",{children:["Na\u010dten\xed objedn\xe1vek ze star\xe9 DB: ",(0,L.jsx)("strong",{style:{color:"#2563eb",fontFamily:"monospace"},children:"objednavky0123"})]}),(0,L.jsxs)("li",{children:["Na\u010dten\xed p\u0159\xedloh z tabulky: ",(0,L.jsx)("strong",{style:{color:"#2563eb",fontFamily:"monospace"},children:"pripojene_odokumenty0123"})]}),(0,L.jsx)("li",{children:"Kontrola duplicit podle eviden\u010dn\xedho \u010d\xedsla"}),(0,L.jsx)("li",{children:"Vytvo\u0159en\xed/aktualizace z\xe1znamu v nov\xe9 DB (orders25)"}),(0,L.jsx)("li",{children:"Import polo\u017eek a p\u0159\xedloh s vazbou na objedn\xe1vku"}),(0,L.jsx)("li",{children:"Extrakce LP k\xf3d\u016f z pozn\xe1mek"})]})]})]}),l&&(0,L.jsxs)(H,{children:[(0,L.jsx)(V,{children:(0,L.jsxs)(Z,{style:{width:"".concat(c,"%")},children:[c,"%"]})}),(0,L.jsxs)(K,{children:[(0,L.jsx)(X,{icon:I.z1G})," Prob\xedh\xe1 import objedn\xe1vek..."]}),x&&(0,L.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#e0f2fe",borderRadius:"6px",border:"1px solid #0284c7",fontSize:"0.875rem"},children:[(0,L.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,L.jsxs)("strong",{style:{color:"#075985"},children:["reading"===g&&"\ud83d\udcd6 \u010cten\xed dat...","inserting"===g&&"\u2795 Vkl\xe1d\xe1n\xed nov\xe9 objedn\xe1vky...","updating"===g&&"\u270f\ufe0f Aktualizace objedn\xe1vky...","waiting"===g&&"\u23f3 \u010cek\xe1n\xed na server...",!g&&"\u2699\ufe0f Zpracov\xe1n\xed..."]})}),(0,L.jsxs)("div",{style:{color:"#0c4a6e"},children:[(0,L.jsx)("strong",{children:"waiting"===g?"Status:":"Objedn\xe1vka:"})," ",x]}),f>0&&(0,L.jsxs)("div",{style:{color:"#0c4a6e",marginTop:"0.25rem"},children:[(0,L.jsx)("strong",{children:"Pr\u016fb\u011bh:"})," ",h," / ",f," objedn\xe1vek"]})]}),(0,L.jsx)("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#fef3c7",borderRadius:"6px",border:"1px solid #f59e0b"},children:(0,L.jsxs)("p",{style:{margin:0,fontSize:"0.875rem",color:"#92400e"},children:["\u23f1\ufe0f ",(0,L.jsx)("strong",{children:"Import m\u016f\u017ee trvat n\u011bkolik minut."})," Pros\xedm neopou\u0161t\u011bjte tuto str\xe1nku a po\u010dkejte na dokon\u010den\xed. Syst\xe9m zpracov\xe1v\xe1 ",a.length," objedn\xe1vek v\u010detn\u011b p\u0159\xedloh a polo\u017eek."]})})]}),w&&(0,L.jsxs)(B,{type:"error",children:[(0,L.jsxs)(Y,{type:"error",children:[(0,L.jsx)(D.g,{icon:I.s0Q}),"Chyba p\u0159i importu"]}),(0,L.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem"},children:w})]}),y&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(B,{type:0===sn?"success":"error",children:[(0,L.jsxs)(Y,{type:0===sn?"success":"error",children:[(0,L.jsx)(D.g,{icon:0===sn?I.SGM:I.s0Q}),0===sn?"Import dokon\u010den \xfasp\u011b\u0161n\u011b":"Import dokon\u010den s chybami"]}),(0,L.jsxs)(W,{children:[(0,L.jsxs)(U,{children:[(0,L.jsx)(J,{children:"Celkem:"}),(0,L.jsx)(q,{children:rn})]}),(0,L.jsxs)(U,{children:[(0,L.jsx)(J,{children:"Nov\xfdch:"}),(0,L.jsx)(q,{type:"success",children:on})]}),(0,L.jsxs)(U,{children:[(0,L.jsx)(J,{children:"Aktualizovan\xfdch:"}),(0,L.jsx)(q,{type:"info",children:an})]}),(0,L.jsxs)(U,{children:[(0,L.jsx)(J,{children:"Selhalo:"}),(0,L.jsx)(q,{type:"error",children:sn})]})]})]}),y.results&&y.results.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,L.jsx)("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem",color:"#374151"},children:"Detail importovan\xfdch objedn\xe1vek:"}),(0,L.jsxs)("div",{style:{position:"relative",marginTop:"0.75rem"},children:[(0,L.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Vyhledat objedn\xe1vku (\u010d\xedslo, status, chyba)...",value:_,onChange:n=>P(n.target.value),style:{width:"100%",padding:"0.625rem 0.875rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s"},onFocus:n=>n.target.style.borderColor="#3b82f6",onBlur:n=>n.target.style.borderColor="#d1d5db"}),_&&(0,L.jsx)("button",{onClick:()=>P(""),style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#9ca3af",cursor:"pointer",padding:"0.25rem",fontSize:"1rem"},title:"Vymazat vyhled\xe1v\xe1n\xed",children:"\u2715"})]}),_&&(0,L.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#6b7280"},children:["Nalezeno: ",(0,L.jsx)("strong",{children:F.length})," z ",y.results.length]})]}),(0,L.jsx)(G,{children:F.map((n,e)=>{const t=A.has(e),r="OK"===n.status,o="INSERT"===n.operation;return(0,L.jsx)(Q,{children:(0,L.jsxs)("div",{style:{width:"100%"},children:[(0,L.jsxs)("div",{onClick:()=>(n=>{z(e=>{const t=new Set(e);return t.has(n)?t.delete(n):t.add(n),t})})(e),style:{cursor:"pointer",padding:"0.625rem 0.75rem",transition:"all 0.2s",borderRadius:"6px",background:t?"#f9fafb":"transparent",display:"flex",alignItems:"center",gap:"0.75rem"},onMouseEnter:n=>n.currentTarget.style.background="#f9fafb",onMouseLeave:n=>n.currentTarget.style.background=t?"#f9fafb":"transparent",children:[(0,L.jsx)("div",{style:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"bold",color:"#6b7280",border:"1.5px solid #d1d5db",borderRadius:"3px",background:"white",flexShrink:0},children:t?"\u2212":"+"}),(0,L.jsx)("div",{style:{fontSize:"1.125rem",flexShrink:0,color:r?"#10b981":"#ef4444"},children:r?"\u2713":"\u2717"}),(0,L.jsx)("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"#111827",minWidth:"200px"},children:n.cislo_objednavky}),(0,L.jsx)("div",{style:{width:"1px",height:"20px",background:"#d1d5db",flexShrink:0}}),r&&(0,L.jsx)("div",{style:{fontSize:"0.75rem",fontWeight:600,padding:"0.125rem 0.5rem",borderRadius:"3px",backgroundColor:o?"#d1fae5":"#dbeafe",color:o?"#065f46":"#1e40af",whiteSpace:"nowrap",flexShrink:0},children:o?"NOV\xc1":"AKTUALIZACE"}),!r&&(0,L.jsx)("div",{style:{fontSize:"0.75rem",fontWeight:600,padding:"0.125rem 0.5rem",borderRadius:"3px",backgroundColor:"#fee2e2",color:"#991b1b",whiteSpace:"nowrap",flexShrink:0},children:"CHYBA"})]}),t&&(0,L.jsx)("div",{style:{paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"0.5rem",paddingBottom:"0.625rem",background:"#f9fafb"},children:r?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:{display:"flex",gap:"1.25rem",fontSize:"0.8125rem",color:"#6b7280",flexWrap:"wrap",marginBottom:"0.625rem",paddingLeft:"2.5rem"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"\u2713 Status: "}),(0,L.jsx)("strong",{style:{color:"#10b981"},children:"\xdasp\u011bch"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"ID v nov\xe9 DB: "}),(0,L.jsx)("strong",{style:{color:"#374151"},children:n.new_id||"N/A"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Polo\u017eky: "}),(0,L.jsx)("strong",{style:{color:"#374151"},children:n.polozky_count})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"P\u0159\xedlohy: "}),(0,L.jsx)("strong",{style:{color:"#374151"},children:n.prilohy_count})]})]}),n.prilohy_details&&n.prilohy_details.length>0&&(0,L.jsxs)("div",{style:{marginTop:"0.625rem",paddingTop:"0.625rem",paddingLeft:"2.5rem",borderTop:"1px dashed #d1d5db"},children:[(0,L.jsx)("div",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#374151",marginBottom:"0.375rem"},children:"\ud83d\udcce P\u0159\xedlohy:"}),(0,L.jsx)("div",{style:{paddingLeft:"1.25rem",fontSize:"0.75rem",color:"#6b7280"},children:n.prilohy_details.map((n,e)=>(0,L.jsxs)("div",{style:{marginBottom:"0.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,L.jsx)("span",{style:{color:"OK"===n.status?"#10b981":"#ef4444",fontSize:"0.875rem"},children:"OK"===n.status?"\u2713":"\u2717"}),(0,L.jsx)("span",{style:{color:"#374151"},children:n.soubor}),n.popis&&(0,L.jsxs)("span",{style:{color:"#9ca3af"},children:["(",n.popis,")"]}),n.error&&(0,L.jsxs)("span",{style:{color:"#ef4444"},children:["- ",n.error]})]},e))})]})]}):(0,L.jsxs)("div",{style:{fontSize:"0.8125rem",color:"#dc2626",padding:"0.5rem",background:"#fee2e2",borderRadius:"4px",borderLeft:"3px solid #ef4444"},children:[(0,L.jsx)("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"\u2717 Chyba p\u0159i importu:"}),(0,L.jsx)("div",{children:n.error||"Nezn\xe1m\xe1 chyba"})]})})]})},e)})})]})]})]}),(0,L.jsxs)(nn,{children:[!y&&!w&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(en,{onClick:N,disabled:l,children:"Zru\u0161it"}),(0,L.jsx)(en,{primary:!0,onClick:async()=>{d(!0),p(0),k(null),j(null),v(a.length),m(0),b("reading"),u("P\u0159ipojov\xe1n\xed k datab\xe1zi...");let n=null;try{u("Odes\xedl\xe1n\xed dat na server...");const e=()=>{let e=0;const t=a.length;n=setInterval(()=>{e=Math.min(e+5,90),p(e);const n=Math.floor(e/100*t);if(m(n),e>=90)b("waiting"),u("\u010cek\xe1n\xed na server...");else{const n=["reading","inserting","updating"],e=n[Math.floor(Math.random()*n.length)];b(e)}},500)};e();const t=await s(a,{onProgress:e=>{if(n&&(clearInterval(n),n=null),p(e.percentage),m(e.current),v(e.total),e.last_result){const n=e.last_result;"INSERT"===n.operation?b("inserting"):"UPDATE"===n.operation?b("updating"):b("reading"),u(n.cislo_objednavky||"#".concat(n.old_id))}},onComplete:n=>{p(100),b(""),u("Import dokon\u010den!")},onError:n=>{throw n}});if(n&&(clearInterval(n),n=null),p(100),b(""),u("Import dokon\u010den!"),!t||!t.results)throw new Error("Neplatn\xe1 odpov\u011b\u010f ze serveru: ".concat(JSON.stringify(t)));j(t)}catch(e){n&&(clearInterval(n),n=null);let t="Nezn\xe1m\xe1 chyba p\u0159i importu";if(e.message&&e.message.includes("Import timeout"))t=e.message;else if("Network Error"===e.message)t="\u274c Chyba p\u0159ipojen\xed k serveru.\n\nMo\u017en\xe9 p\u0159\xed\u010diny:\n\u2022 Backend server neb\u011b\u017e\xed nebo je nedostupn\xfd\n\u2022 Nespr\xe1vn\xe1 API URL v konfiguraci\n\u2022 CORS probl\xe9m (Access-Control-Allow-Origin)\n\u2022 Firewall blokuje spojen\xed";else if(e.response){const n=e.response.status,r=e.response.data;if(400===n&&null!==r&&void 0!==r&&r.validation_errors){const n=r.validation_errors;t="\u274c Valida\u010dn\xed chyba - n\u011bkter\xe9 objedn\xe1vky nelze importovat:\n\n",Object.entries(n).forEach(n=>{let[e,r]=n;t+="Objedn\xe1vka ".concat(e,":\n"),Array.isArray(r)?r.forEach(n=>t+="  \u2022 ".concat(n,"\n")):t+="  \u2022 ".concat(r,"\n")})}else t=(null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.message)||(null===r||void 0===r?void 0:r.detail)||"\u274c Server error (".concat(n,"): ").concat(e.response.statusText,"\n\n")+"Backend odm\xedtl request. Zkontrolujte:\n\u2022 Form\xe1t pos\xedlan\xfdch dat\n\u2022 Opr\xe1vn\u011bn\xed u\u017eivatele\n\u2022 Logy na backendu pro detaily"}else t=e.request?"\u274c Server neodpov\u011bd\u011bl na request.\n\nMo\u017en\xe9 p\u0159\xed\u010diny:\n\u2022 Backend server zamrzl b\u011bhem zpracov\xe1n\xed\n\u2022 Import trv\xe1 p\u0159\xedli\u0161 dlouho (p\u0159et\xed\u017een\xfd server)\n\u2022 S\xed\u0165ov\xfd timeout\n\nZkuste:\n1. Zkontrolovat zda backend b\u011b\u017e\xed\n2. Importovat m\xe9n\u011b objedn\xe1vek najednou\n3. Zkontrolovat logy backendu":e.message||"Nezn\xe1m\xe1 chyba p\u0159i importu";k(t),p(0),b(""),u("")}finally{n&&(clearInterval(n),n=null),d(!1)}},disabled:l,children:l?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(X,{icon:I.z1G})," Importuji..."]}):"Importovat (".concat(tn,")")})]}),(y||w)&&(0,L.jsx)(en,{primary:!0,onClick:N,children:"Zav\u0159\xedt"})]})]})}),document.body)};var rn,on=t(65757),an=t(58931),sn=t(47111),ln=t(76361),dn=t(59042),cn=t(83290);const pn=(0,cn.AH)(rn||(rn=(0,z.A)(['\n  :root {\n    --app-primary: #202d65; /* canonical header blue */\n    --app-primary-dark: #162248; /* slightly darker for hover states */\n  }\n\n  .orders-page {\n    padding: 1rem;\n  }\n\n  /* Generic highlight styling for search matches within Orders pages */\n  .orders-page mark {\n    background: #ffe78f;\n    color: inherit;\n    padding: 0 0px; /* keep text height consistent */\n    border-radius: 2px;\n    font-weight: 600;\n  }\n\n  .orders-table,\n  .orders-header,\n  .filter-box,\n  .summary-boxes,\n  .stats-box,\n  input,\n  select,\n  textarea,\n  button {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  .orders-table {\n    padding: 1rem;\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n    overflow-x: auto;\n    display: block;\n  }\n\n  /* modern card-like table container */\n  .orders-table {\n    background: #ffffff;\n    border-radius: 10px;\n    box-shadow: 0 8px 24px rgba(16,24,64,0.06);\n    padding: 12px;\n  }\n\n  .orders-table table {\n    width: 100%;\n    border-collapse: collapse;\n  }\n\n  .orders-table th,\n  .orders-table td {\n    border: 1px solid #ddd;\n    padding: 10px;\n    text-align: left;\n    word-wrap: break-word;\n    font-size: 19.32px;\n  }\n\n  .orders-table thead {\n    background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  }\n\n  .orders-table th {\n    background: transparent;\n    color: #fff;\n    font-weight: 700;\n    text-align: center;\n    font-size: 13px;\n    padding: 14px 12px;\n    text-transform: uppercase;\n    letter-spacing: 0.6px;\n    cursor: pointer;\n    transition: all .12s ease;\n  }\n\n  /* Odstran\u011bno problematick\xe9 thead:hover pravidlo kter\xe9 zp\u016fsobovalo b\u011blen\xed z\xe1hlav\xed */\n\n  /* Table styling dle OrdersListNew.js */\n  .orders-table table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: auto;\n  }\n\n  /* Sticky header styling jako v OrdersListNew */\n  .orders-table thead tr:first-of-type {\n    background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  }\n\n  .orders-table thead tr:first-of-type th {\n    position: sticky;\n    top: 0;\n    z-index: 3;\n    background: transparent;\n    color: #fff;\n    padding: 12px 8px;\n    text-align: center;\n    vertical-align: middle;\n    font-weight: 700;\n    border-bottom: 1px solid #e6eef8;\n    box-shadow: 0 1px 0 0 rgba(255,255,255,0.12) inset;\n  }\n\n  /* Zru\u0161\xed ne\u017e\xe1douc\xed hover efekt jako v OrdersListNew */\n  .orders-table thead th:hover {\n    background-color: transparent !important;\n    background: transparent !important;\n  }\n\n  /* Apply zebra and hover only when row highlighting (status colors) is OFF.\n     We toggle via a class on the page root: .orders-page.colors-on/.colors-off */\n  .orders-page:not(.colors-on) .orders-table tr:nth-of-type(even) {\n    background-color: #fbfcff;\n  }\n\n  .orders-page:not(.colors-on) .orders-table tr:hover {\n    background-color: #f6f7ff;\n  }\n\n  /* When colors are ON, make sure no generic hover/zebra leaks through from elsewhere */\n  .orders-page.colors-on .orders-table tr:nth-of-type(even) { background-color: transparent !important; }\n  .orders-page.colors-on .orders-table tr:hover { background-color: inherit !important; }\n\n  .orders-table td {\n    font-size: 15px;\n    padding: 12px 14px;\n  }\n\n  /* Dashboard tiles active state */\n  .summary-boxes .summary-box {\n    cursor: pointer;\n    transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease;\n    border: 1px solid rgba(2,6,23,0.06);\n  }\n  .summary-boxes .summary-box:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 18px rgba(2,6,23,0.08);\n  }\n  .summary-boxes .summary-box.active {\n    outline: 2px solid #3b82f6;\n    outline-offset: -2px;\n    box-shadow: 0 10px 22px rgba(59,130,246,0.18);\n    border-color: rgba(59,130,246,0.45);\n  }\n\n  /* Make the first (expander) column narrow and visually lighter */\n  .orders-table td:first-of-type, .orders-table th:first-of-type {\n    width: 48px;\n    text-align: center;\n    padding: 6px;\n  }\n\n  /* header expander button - subtle white */\n  .orders-table th .header-expander {\n    background: transparent;\n    border: none !important;\n    box-shadow: none !important;\n    color: #fff;\n    width: auto;\n    height: auto;\n    padding: 0;\n    line-height: 1;\n    display:inline-flex; align-items:center; justify-content:center;\n    font-size:14px;\n  }\n  /* Ensure SVG icons inside the header expander are white and small */\n  .orders-table th .header-expander svg {\n    color: #fff !important;\n    fill: #fff !important;\n    stroke: #fff !important;\n    width: 14px;\n    height: 14px;\n  }\n  /* ensure internal paths also white */\n  .orders-table th .header-expander svg path,\n  .orders-table th .header-expander svg rect,\n  .orders-table th .header-expander svg line {\n    fill: #fff !important;\n    stroke: #fff !important;\n  }\n  /* force button text/icon color */\n  .orders-table th .header-expander {\n    color: #fff !important;\n  }\n  /* legacy Orders page header expander support */\n  .orders-page .header-expander {\n    background: transparent;\n    border: none !important;\n    box-shadow: none !important;\n    color: #fff !important;\n    font-size: 14px;\n    padding: 0;\n    line-height: 1;\n  }\n\n  /* row expander - small circular, subtle border */\n  .orders-table .expander-btn {\n    background: transparent;\n    border: none !important;\n    width: auto;\n    height: auto;\n    padding: 0 4px;\n    font-size: 14px;\n    line-height: 1;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n  }\n  .orders-table .expander-btn:hover { opacity: 0.85; }\n\n  /* Softer cell borders and slightly smaller font for a modern look */\n  .orders-table th, .orders-table td {\n    border-color: #eef0f6;\n    font-size: 15px;\n  }\n\n  /* Checkbox styling */\n  .orders-table input[type="checkbox"] {\n    width: 15px;\n    height: 15px;\n    cursor: pointer;\n    margin: 0;\n    accent-color: var(--app-primary);\n  }\n\n  .orders-table th input[type="checkbox"] {\n    transform: scale(1.05);\n  }\n\n  /* Action button look inside table */\n  .orders-table .action-button, .orders-table button[title] {\n    background: transparent;\n    border: 1px solid #e6e6f0;\n    padding: 6px 8px;\n    border-radius: 8px;\n    color: #170d79;\n    cursor: pointer;\n  }\n  .orders-table .action-button:hover, .orders-table button[title]:hover { background:#f3f4ff; transform: translateY(-1px); }\n\n  /* Subrow panel visual improvements */\n  .subrow-column {\n    background-color: #fff;\n    border: 1px solid #f1f3fb;\n    box-shadow: 0 1px 2px rgba(18,24,48,0.04);\n    padding: 14px;\n  }\n\n  .orders-table td.centered {\n    text-align: center;\n  }\n\n  .orders-table td.right-aligned {\n    text-align: right;\n    font-weight: bold;\n  }\n\n  .orders-table td.centered-cell {\n    text-align: center;\n    font-weight: bold;\n  }\n\n  .orders-table td.right-aligned-cell {\n    text-align: right;\n    font-weight: bold;\n  }\n\n  .orders2025 .orders-header.orders2025-header {\n    padding: 0.5em 0 0 !important;\n  }\n\n  .orders2025 .filter-box {\n    margin-top: 0 !important;\n  }\n\n  .orders-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0.5em 0 0.75em;\n  }\n\n  .orders-header .page-title {\n    display: inline-flex;\n    align-items: center;\n    gap: 10px;\n    margin: 0;\n  }\n\n  .total-orders {\n    font-size: 18px;\n    color: #666;\n    text-align: right;\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 5px;\n    margin-top: 20px;\n    position: relative;\n  }\n\n  .rows-per-page {\n    position: absolute;\n    right: 0;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 14px;\n    color: #170d79;\n  }\n\n  .rows-per-page label {\n    font-weight: bold;\n    color: #170d79;\n    font-size: 18px;\n  }\n\n  .rows-per-page select {\n    padding: 8px 12px;\n    border: 1px solid #dfe6fb;\n    border-radius: 6px;\n    font-size: 14px;\n    background-color: white;\n    color: #170d79;\n    cursor: pointer;\n    transition: background-color 0.18s ease, color 0.18s ease, border-color 0.18s ease;\n  }\n\n  .rows-per-page select:hover {\n    background-color: #f0f0f0;\n  }\n\n  .rows-per-page select:focus {\n    outline: none;\n    border-color: #2e2766;\n  }\n\n  .pagination-button {\n    padding: 8px 12px;\n    background-color: var(--app-primary);\n    color: white;\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 15px;\n    box-shadow: 0 6px 14px rgba(16,24,64,0.08);\n  }\n\n  .pagination-button:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n\n  .pagination-button:hover:not(:disabled) {\n    background-color: var(--app-primary-dark);\n  }\n\n  .pagination-number {\n    padding: 8px 12px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #fff;\n    color: #202d65;\n    font-size: 16px;\n    cursor: pointer;\n    line-height: 1;\n    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;\n  }\n\n  .pagination-number.active {\n    background-color: var(--app-primary);\n    color: #fff;\n    border-color: var(--app-primary);\n  }\n\n  .pagination-number:hover {\n    background-color: #f3f4f6;\n  }\n\n  .pagination-number.active {\n    background-color: var(--app-primary);\n    color: #fff;\n    border-color: var(--app-primary);\n  }\n\n  .pagination-ellipsis {\n    color: #666;\n    padding: 0 4px;\n  }\n\n  .error-message {\n    color: red;\n    font-weight: bold;\n    margin-top: 20px;\n  }\n\n  .subrow-group {\n    margin-bottom: 10px;\n  }\n\n  .subrow-group h4 {\n    margin: 0;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n  }\n\n  .subrow-details {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    margin-top: 5px;\n  }\n\n  .subrow-item {\n    flex: 1 1 calc(33.333% - 20px);\n    min-width: 200px;\n  }\n\n  .subrow-item.zverejneno-invalid {\n    background-color: lightcoral;\n  }\n\n  .subrow-grid {\n    display: flex;\n    gap: 20px;\n    margin-top: 10px;\n  }\n\n  .subrow-column {\n    flex: 1;\n    background-color: #fff;\n    padding: 12px;\n    border: 1px solid #f1f3fb;\n    border-radius: 8px;\n    box-sizing: border-box;\n  }\n\n  .subrow-column h4 {\n    margin: 0 0 10px;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n  }\n\n  .subrow-item {\n    margin-bottom: 8px;\n    font-size: 14px;\n    color: #222;\n  }\n\n  .subrow-box {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #f9f9f9;\n    margin-top: 10px;\n    text-align: left; /* ensure default left alignment inside subrow area */\n  }\n\n  .subrow-item h4 {\n    margin: 0 0 10px;\n    font-size: 16px;\n    color: #170d79;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 5px;\n    text-align: left; /* left-align subrow section titles */\n  }\n\n  .subrow-item p {\n    margin: 5px 0;\n    font-size: 14px;\n    color: #333;\n    text-align: left; /* left-align subrow paragraph content */\n  }\n\n  .filter-box {\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    padding: 15px;\n    margin-bottom: 20px;\n    background-color: #f9f9f9;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    box-sizing: border-box;\n  }\n\n  .filter-input-wrapper {\n    position: relative;\n    flex: 1;\n    margin-right: 12px; /* smaller gap so input stretches to selects */\n  }\n\n  .filter-input {\n    width: 100%;\n    padding: 10px 10px 10px 36px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 19.32px;\n    box-sizing: border-box;\n  }\n\n  .search-icon {\n    position: absolute;\n    left: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #6b7280;\n    pointer-events: none;\n    font-size: 16px;\n  }\n\n  .clear-filter-button {\n    position: absolute;\n    right: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: none;\n    border: none;\n    font-size: 16px;\n    color: #666;\n    cursor: pointer;\n    padding: 0;\n  }\n\n  .clear-filter-button:hover {\n    color: #000;\n  }\n\n  .filter-group {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex-shrink: 0;\n  }\n\n  .filter-select {\n    padding: 8px 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 16px;\n    line-height: 1.2;\n    white-space: nowrap;\n    text-align: right;\n    text-align-last: right;\n  }\n\n  .filter-select option {\n    text-align: left;\n  }\n\n  .filter-buttons {\n    display: flex;\n    gap: 10px;\n    margin-right: 20px;\n  }\n\n  .filter-button {\n    padding: 10px 15px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    color: #333;\n    font-size: 14px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, color 0.3s ease;\n  }\n\n  .filter-button:hover {\n    background-color: #e0e0e0;\n  }\n\n  .filter-button.active {\n    background-color: #202d65;\n    color: white;\n    border-color: #170d79;\n  }\n\n  .orders-boxes {\n    display: flex;\n    flex-wrap: nowrap;\n    gap: 12px;\n    margin-bottom: 16px;\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    box-sizing: border-box;\n  }\n\n  .orders-box {\n    flex: 1;\n    min-width: 300px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #fff;\n    font-size: 16px;\n    font-weight: bold;\n    text-align: center;\n    box-sizing: border-box;\n    box-shadow: none;\n  }\n\n  .orders-box.stats-box {\n    flex: 0 0 63%;\n    margin-right: 1px;\n  }\n  .orders-box.overview-box {\n    flex: 1 1 auto;\n  }\n\n  .overview-box {\n    background-color: #fff;\n  }\n\n  .stats-box {\n    position: relative;\n    padding: 12px;\n    border: none;\n    border-radius: 10px;\n    background-color: #fff;\n    box-shadow: none;\n    min-height: 210px;\n  }\n\n  .stats-box canvas,\n  .stats-box table {\n    border: none;\n    box-shadow: none;\n  }\n\n  @media (max-width: 768px) {\n    .orders-box {\n      flex: 1 1 100%;\n    }\n  }\n\n  .collapse-line {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 20px;\n    color: #888;\n    font-weight: normal;\n    position: relative;\n  }\n\n  .dashboard-label {\n    font-size: 14px;\n    color: #aaa;\n    font-weight: normal;\n  }\n\n  .collapse-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 16px;\n    color: #aaa;\n    display: flex;\n    align-items: center;\n    transition: color 0.3s ease;\n    position: relative;\n    z-index: 2;\n    pointer-events: auto;\n    padding: 6px 10px; /* bigger hit area */\n    border-radius: 6px;\n  }\n\n  .collapse-button.caret {\n    transition: color .25s ease, transform .25s ease;\n  }\n  .collapse-button.caret svg {\n    transition: transform .25s ease;\n  }\n  /* rotate chevron when expanded (we rely on DOM state replacement, so no extra class; left for potential future) */\n  .collapse-button.caret[title*=\'Sbalit\'] svg {\n    transform: translateY(-1px);\n  }\n\n  .collapse-button:hover {\n    color: #666;\n    background: rgba(0,0,0,0.03);\n  }\n\n  .collapse-button:focus-visible {\n    outline: 2px solid #94a3b8;\n    outline-offset: 2px;\n  }\n\n  .divider-line {\n    flex-grow: 1;\n    border: none;\n    border-top: 1px solid #ddd;\n    margin: 0 10px;\n    pointer-events: none; /* do not block the caret click */\n  }\n\n  .action-icons {\n    display: flex;\n    gap: 5px;\n    justify-content: flex-start; /* align left as requested */\n  }\n\n  .action-button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #170d79;\n    font-size: 16px;\n    transition: color 0.3s ease;\n  }\n\n  .action-button:hover {\n    color: #2e2766;\n  }\n\n  .action-button:focus {\n    outline: none;\n  }\n\n  .action-icons button {\n    padding: 0px;\n    margin: 0 1px;\n    border: none;\n    background: none;\n    cursor: pointer;\n  }\n\n  .action-icons button:hover {\n    background-color: #f0f0f0;\n    border-radius: 4px;\n  }\n\n  .action-icons svg {\n    width: 16px;\n    height: 16px;\n    margin: 0;\n    vertical-align: middle;\n  }\n\n  /* View-only mode (disabled actions) revamped */\n  .orders-page.view-only .action-icons.view-only-disabled {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 2px;\n    opacity: 0.55;\n  }\n  .orders-page.view-only .action-icons.view-only-disabled .view-only-text {\n    font-size: 9px;\n    font-weight: 600;\n    letter-spacing: 0.5px;\n    text-transform: uppercase;\n    color: #402080;\n    line-height: 1;\n    pointer-events: none;\n    user-select: none;\n  }\n  .orders-page.view-only .action-icons.view-only-disabled .icons-row {\n    display: flex;\n    gap: 5px;\n    justify-content: center;\n    pointer-events: none; /* block interactions */\n  }\n  .orders-page.view-only .action-icons.view-only-disabled button,\n  .orders-page.view-only .action-icons.view-only-disabled button * {\n    cursor: not-allowed !important;\n  }\n\n  .stats-box h3 {\n    margin-bottom: 20px;\n    font-size: 18px;\n    color: #333;\n    text-align: center;\n  }\n\n  .stats-box canvas {\n    max-width: 100%;\n    height: auto;\n    margin: 0 auto;\n  }\n\n  .chart-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n  }\n\n  .chart-legend {\n    flex: 1;\n    max-width: 200px;\n  }\n\n  .chart-legend ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .chart-legend li {\n    margin-bottom: 10px;\n    font-size: 14px;\n    color: #333;\n  }\n\n  .chart-wrapper {\n    flex: 1 1 520px;\n    max-width: 312px;\n    max-height: 312px;\n    height: 500px;\n    overflow: hidden;\n  }\n\n  .chart-wrapper canvas {\n    max-width: 100%;\n    max-height: 100%;\n    height: 500px;\n  }\n\n  .chart-legend-above {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    gap: 10px;\n  }\n\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n  }\n\n  .legend-color {\n    width: 15px;\n    height: 15px;\n    border-radius: 3px;\n    display: inline-block;\n    background-color: var(--app-primary);\n  }\n\n  .legend-text {\n    font-size: 18px;\n    font-weight: normal;\n    color: #333;\n    white-space: nowrap;\n  }\n\n  .legend-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    padding: 10px;\n    font-size: 14px;\n    color: #333;\n    margin-top: 20px;\n    align-items: flex-start;\n  }\n\n  .stats-header {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 20px;\n  }\n\n  .stats-icon {\n    font-size: 24px;\n    color: #170d79;\n  }\n\n  .header-with-icon {\n    display: flex;\n    align-items: center;\n    gap: 20px;\n    margin-bottom: 20px;\n  }\n\n  .header-icon-large {\n    font-size: 28px;\n    color: #170d79;\n  }\n\n  .header-with-icon h1 {\n    font-size: 20px;\n    color: #333;\n    margin: 0;\n  }\n\n  .summary-boxes {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    width: 100%;\n    margin-top: 10px;\n    gap: 12px; /* uniform gap between tiles */\n    align-items: stretch;\n  }\n  /* Make tiles flow left-to-right with consistent sizing; adjust base tile size by screen */\n  @media (min-width: 1400px) {\n    .summary-boxes { gap: 14px; }\n  }\n  @media (max-width: 640px) {\n    .summary-boxes { gap: 10px; }\n  }\n  .summary-box {\n    padding: 14px 16px 16px;\n    border: 1px solid #e3e6ef;\n    border-radius: 10px;\n    background: linear-gradient(180deg,#fafbff 0%, #f3f5fa 100%);\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 12px;\n    text-align: left;\n    position: relative;\n    min-height: 86px;\n    box-shadow: 0 1px 2px rgba(20,24,40,0.05), 0 0 0 1px #e6eaf2;\n    transition: box-shadow .18s ease, transform .18s ease;\n    flex: 1 1 160px; /* allow tiles to grow, shrink, and have a sensible base width */\n    max-width: 1fr; /* let flex determine width; keep consistent flow */\n    box-sizing: border-box;\n  }\n  .summary-box:hover {\n    box-shadow: 0 4px 12px rgba(20,24,40,0.12), 0 0 0 1px #d3d9e4;\n    transform: translateY(-2px);\n  }\n  .summary-box .summary-icon {\n    font-size: 36px; /* slightly reduced for a cleaner look */\n    line-height: 1;\n    margin: 0;\n    flex-shrink: 0;\n    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.08));\n  }\n  /* Vnit\u0159n\xed textov\xfd blok \u2013 dodate\u010dn\xfd padding aby text nep\u016fsobil nama\u010dkan\u011b */\n  .summary-box .summary-icon + div {\n    padding: 2px 0 0;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    flex: 1;\n  }\n  .summary-box h3 {\n    margin: 0;\n    font-size: 11px;\n    letter-spacing: .55px;\n    font-weight: 600;\n    text-transform: uppercase;\n    color: #4a4f5e;\n    line-height: 1.15;\n    white-space: nowrap;\n  }\n  .summary-box p {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 700;\n    color: #12141a;\n    line-height: 1.1;\n    letter-spacing: .25px;\n  }\n  /* Make the total price tile visually prominent but not overly wide */\n  .summary-box.total-price {\n    /* align with flex tiles: slightly larger growth so it becomes a bit more prominent */\n    flex: 1.5 1 220px; /* grow more than others but still respect shrinking */\n    max-width: 520px;\n    min-width: 200px;\n    justify-content: center; /* center icon + text horizontally for nicer look */\n    gap: 14px;\n  }\n  /* Only allow spanning multiple columns on very wide screens where there\'s room */\n  @media (min-width: 1400px) {\n    .summary-box.total-price { grid-column: span 2; }\n  }\n  @media (max-width: 900px) {\n    .summary-box.total-price { max-width: none; min-width: 140px; justify-content: flex-start; }\n  }\n  /* Prevent price overflow: allow wrapping and scale long numbers */\n  .summary-box.total-price p {\n    white-space: normal; /* allow wrap */\n    word-break: break-word;\n    overflow-wrap: anywhere;\n    display: block;\n    font-size: 18px; /* base */\n    text-align: center;\n  }\n  /* If the number becomes very long, reduce font-size slightly to keep it in the tile */\n  .summary-box.total-price p.long-number {\n    font-size: 15px;\n    line-height: 1.05;\n  }\n  .summary-box small { display:block; font-size:11px; color:#6b7280; margin-top:2px; }\n\n  .floating-add-button {\n    position: fixed;\n    bottom: 60px;\n    right: 20px;\n    background-color: rgba(63, 61, 158, 0.6);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    font-size: 24px;\n    z-index: 1000;\n    transition: background-color 0.3s ease;\n  }\n\n  .floating-add-button:hover {\n    background-color: rgba(63, 61, 158, 0.8);\n  }\n\n  .floating-add-button::after {\n    position: absolute;\n    bottom: 70px;\n    right: 50%;\n    transform: translateX(50%);\n    background-color: #333;\n    color: white;\n    padding: 5px 10px;\n    border-radius: 5px;\n    font-size: 12px;\n    white-space: nowrap;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 0.3s ease, visibility 0.3s ease;\n  }\n\n  .floating-add-button:hover::after {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  .tabs {\n    display: flex;\n    justify-content: flex-start;\n    gap: 10px;\n    margin-bottom: 20px;\n  }\n\n  .tab-button {\n    padding: 7px 15px; /* ~25% m\xe9n\u011b */\n    border: 1px solid #ddd;\n    border-radius: 5px 5px 0 0;\n    background-color: #f9f9f9;\n    color: #333;\n    cursor: pointer;\n    font-size: 15px; /* z 20px na 15px (-25%) */\n    line-height: 1.25;\n    transition: background-color 0.25s ease, color 0.25s ease;\n  }\n\n  .tab-button.active {\n    background-color: #202d65;\n    color: white;\n    border-bottom: none;\n  }\n\n  .tab-button:hover:not(.active) {\n    background-color: #e0e0e0;\n  }\n\n  .tab-content {\n    padding: 20px;\n    border-radius: 0 5px 5px 5px;\n    background-color: #fff;\n  }\n\n  .empty-tab-content {\n    text-align: center;\n    color: #666;\n    font-size: 14px;\n  }\n\n  .legend-chart-container {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n    align-items: flex-start;\n  }\n\n  @media (max-width: 768px) {\n    .legend-chart-container {\n      flex-direction: column;\n      align-items: center;\n    }\n\n    .chart-wrapper {\n      max-width: 300px;\n      max-height: 300px;\n    }\n  }\n\n  input,\n  select,\n  textarea {\n    height: 40px;\n    font-size: 16px;\n    box-sizing: border-box;\n  }\n\n  input[type="date"],\n  input[type="text"] {\n    height: 40px;\n    font-size: 16px;\n    box-sizing: border-box;\n  }\n\n  .refresh-icon {\n    margin-left: 10px;\n    color: #4caf50;\n    cursor: pointer;\n    transition: transform 0.3s ease, color 0.3s ease;\n  }\n\n  .refresh-icon:hover {\n    color: #388e3c;\n    transform: rotate(360deg);\n  }\n\n  .modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: rgba(0, 0, 0, 0.4);\n    z-index: 1000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .modal-content {\n    background: #fff;\n    max-width: 1100px;\n    width: 95vw;\n    min-width: 350px;\n    max-height: 95vh;\n    overflow: auto;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    box-shadow: 0 2px 24px rgba(0, 0, 0, 0.25);\n  }\n\n  .floating-add-button {\n    position: fixed;\n    bottom: 32px;\n    right: 32px;\n    background: #4f46e5;\n    color: #fff;\n    border: none;\n    border-radius: 50%;\n    width: 56px;\n    height: 56px;\n    font-size: 2rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    cursor: pointer;\n    transition: background 0.2s;\n    z-index: 1100;\n  }\n  .floating-add-button:hover {\n    background: #3730a3;\n  }\n\n  .modal-content button[title="Zav\u0159\xedt"] {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    background: transparent;\n    border: none;\n    font-size: 2rem;\n    color: #666;\n    cursor: pointer;\n    transition: color 0.2s;\n  }\n  .modal-content button[title="Zav\u0159\xedt"]:hover {\n    color: #222;\n  }\n\n  .progress-bar-container {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  .progress-bar-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 5px;\n    background-color: #e0e0e0;\n    z-index: 1000;\n  }\n\n  .progress-bar {\n    height: 100%;\n    background-color: #4caf50;\n    transition: width 0.3s ease-in-out;\n  }\n\n  .statistics-container table {\n    width: 100%;\n    border-collapse: separate;\n    border-spacing: 0 6px; /* space between rows for card effect */\n  }\n  .statistics-container thead th {\n    background: #f4f6f9;\n    font-weight: 600;\n    font-size: 12px;\n    text-transform: uppercase;\n    letter-spacing: .5px;\n    padding: 8px 10px;\n    color: #334155;\n    position: sticky;\n    top: 0;\n    z-index: 2;\n    border-bottom: 1px solid #e2e8f0;\n  }\n  .statistics-container tbody tr {\n    background: #ffffff;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.05), 0 0 0 1px #e5e7eb;\n    transition: box-shadow .15s ease, transform .15s ease;\n  }\n  .statistics-container tbody tr:hover {\n    box-shadow: 0 4px 10px rgba(0,0,0,0.08), 0 0 0 1px #cbd5e1;\n  }\n  .statistics-container tbody td {\n    padding: 6px 10px;\n    font-size: 14px;\n    border-top: 1px solid #f1f5f9;\n  }\n  .statistics-container tbody td:first-of-type {\n    /* remove left accent for cleaner look */\n    border-left: none;\n    border-radius: 4px 0 0 4px;\n  }\n  .statistics-container tbody td:last-of-type {\n    border-radius: 0 4px 4px 0;\n  }\n  .statistics-container tbody tr + tr td:first-of-type {\n    border-top: 1px solid #f1f5f9;\n  }\n  .statistics-container .sub-table-wrapper {\n    background: #fafafa;\n    margin: 2px 0 4px 0;\n    padding: 6px 8px 8px 18px; /* reduced left indent */\n    border-left: none; /* removed blue bar */\n    border-radius: 4px;\n  }\n  .statistics-container .sub-table-wrapper table {\n    border-spacing: 0;\n    width: 100%;\n  }\n  .statistics-container .sub-table-wrapper td {\n    background: transparent;\n    box-shadow: none;\n    padding: 4px 6px;\n    font-size: 13px;\n  }\n  .statistics-container .sub-table-wrapper tr td:first-of-type {\n    padding-left: calc(150px + 10px); /* align with LP column under main header (P\u0159\xedkazce ~150px + gap) */\n  }\n  .statistics-container .value-positive { color: #059669; font-weight: 600; }\n  .statistics-container .value-negative { color: #dc2626; font-weight: 600; }\n  .statistics-container .lp-code { font-weight: 600; color: #334155; }\n  .statistics-container .lp-account { color: #64748b; font-size: 11px; }\n  .statistics-container .lp-sub-first {\n    padding-left: calc(150px + 30px); /* align under LP column (expander ~30 + P\u0159\xedkazce 150) */\n    text-align: left;\n  }\n  .statistics-container .lp-sub-row td { background: #ffffff; font-size: 13px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty { background: #f5f7fa; width: 30px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty + td.lp-sub-empty { width:150px; }\n  .statistics-container .lp-sub-row td.lp-sub-empty + td.lp-sub-empty + td.lp-sub-empty { width:100px; }\n  .statistics-container .lp-sub-row td.lp-sub-lp { font-weight: 600; color: #334155; background:#ffffff; }\n']))),xn=()=>(0,L.jsx)(cn.mL,{styles:pn});var un,gn,bn,hn,mn,fn,vn,yn,jn,wn,kn,An,zn,Sn,Cn,_n,Pn,Nn,Fn,Dn,In,Ln,En,Tn,$n,On,Mn,Rn,Hn,Vn,Zn,Kn,Bn,Yn,Wn,Un,Jn,qn,Gn,Qn,Xn,ne,ee,te,re,oe,ae,ie=t(15537),se=t(27837);const le=n=>{let{orderId:e,onClose:t}=n;const{token:r,fullName:o}=(0,S.useContext)(se.cy),[a,i]=(0,S.useState)("order"),[s,l]=(0,S.useState)({}),[d,c]=(0,S.useState)(null),[p,x]=(0,S.useState)([]),[u,g]=(0,S.useState)([]),[b,h]=(0,S.useState)([]),[m,f]=(0,S.useState)([]),[v,y]=(0,S.useState)(!1),[j,w]=(0,S.useState)(null),k=(0,S.useRef)({}),C=n=>n<1024?"".concat(n," B"):n<1048576?"".concat((n/1024).toFixed(2)," KB"):"".concat((n/1048576).toFixed(2)," MB"),_=n=>{const e=Date.now(),t=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9.]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),r=n.split(".").pop();return"".concat(t,"-").concat(e,".").concat(r)},N=n=>{const{name:e,value:t}=n.target;l(n=>(0,A.A)((0,A.A)({},n),{},{[e]:t}))},F=n=>{if(!n||"00.00.0000"===n)return"";const[e,t,r]=n.split(".");return"".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(e.padStart(2,"0"))};(0,S.useEffect)(()=>{(async()=>{try{var n,t,o,a,i,s,d,p,x,u,g,b,h,m,f,v,y,j,w;if(k.current[e])return void l(k.current[e]);const c=e?await(0,ie.p)({id:e,token:r}):{},A={partner_nazev:(null===(n=c[0])||void 0===n?void 0:n.partner_nazev)||"",partner_adresa:(null===(t=c[0])||void 0===t?void 0:t.partner_adresa)||"",partner_ic:(null===(o=c[0])||void 0===o?void 0:o.partner_ic)||"",poznamka:null!==(a=c[0])&&void 0!==a&&a.evidencni_c?"Eviden\u010dn\xed \u010d\xedslo: ".concat(c[0].evidencni_c):"",datum_p:F(null===(i=c[0])||void 0===i?void 0:i.datum_p),cena:(null===(s=c[0])||void 0===s?void 0:s.cena)||"0",cena_rok:(null===(d=c[0])||void 0===d?void 0:d.cena_rok)||"0",druh_sml:(null===(p=c[0])||void 0===p?void 0:p.druh_sml)||"",obsah:(null===(x=c[0])||void 0===x?void 0:x.obsah)||"",tt_vyrc:(null===(u=c[0])||void 0===u?void 0:u.tt_vyrc)||"",tt_dinfo:(null===(g=c[0])||void 0===g?void 0:g.tt_dinfo)||"",zverejnit:"Ano"===(null===(b=c[0])||void 0===b?void 0:b.zverejnit),dt_zverejneni:F(null===(h=c[0])||void 0===h?void 0:h.dt_zverejneni),idds:(null===(m=c[0])||void 0===m?void 0:m.idds)||"",garant:(null===(f=c[0])||void 0===f?void 0:f.garant)||"",evidencni_c:(null===(v=c[0])||void 0===v?void 0:v.evidencni_c)||"",userCreator:(null===(y=c[0])||void 0===y?void 0:y.userCreator)||"Nezn\xe1m\xfd u\u017eivatel",faktura:"Ano"===(null===(j=c[0])||void 0===j?void 0:j.faktura),pokladni_dok:"Ano"===(null===(w=c[0])||void 0===w?void 0:w.pokladni_dok)};k.current[e]=A,l(A),e&&localStorage.setItem("orderData",JSON.stringify(c))}catch(A){try{const n=(0,P.tV)(A)||"";c("chyba_serveru"===n||"server_error"===n?"Chyba na serveru. Zkuste to pros\xedm pozd\u011bji.":"Nepoda\u0159ilo se na\u010d\xedst data objedn\xe1vky.")}catch(z){c("Nepoda\u0159ilo se na\u010d\xedst data objedn\xe1vky.")}}})();(async()=>{try{const n=await(0,ie.gY)({token:r});Array.isArray(n)?x(n):x([])}catch(n){x([])}})(),(async()=>{try{const n=await(0,ie.bn)({token:r});h(n||[])}catch(d){try{const n=(0,P.tV)(d)||"";c("chyba_serveru"===n||"server_error"===n?"Chyba na serveru. Zkuste to pros\xedm pozd\u011bji.":"Nepoda\u0159ilo se na\u010d\xedst garanty.")}catch(n){c("Nepoda\u0159ilo se na\u010d\xedst garanty.")}}})()},[e,r,s]);const E=(0,S.useCallback)(async n=>{try{const e=await fetch(n,{method:"HEAD"});if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));const t=e.headers.get("Content-Length");return t?parseInt(t,10):0}catch(d){return 0}},[]),T=(0,S.useCallback)(n=>"".concat("https://eeo.zachranka.cz/prilohy/").concat(n),[]),$=(0,S.useCallback)(async()=>{const n=await Promise.all(m.map(async n=>{const e=T(n.soubor),t=await E(e);return(0,A.A)((0,A.A)({},n),{},{size:t})}));f(n)},[m,T,E]);(0,S.useEffect)(()=>{(async()=>{if(e){y(!0),w(null);try{const n=await(0,ie.Bv)({id:e,token:r});f(n||[])}catch(d){w("Nepoda\u0159ilo se na\u010d\xedst p\u0159\xedlohy.")}finally{y(!1)}}})()},[e,r]),(0,S.useEffect)(()=>{m.length>0&&$()},[m,$]),(0,S.useEffect)(()=>{if(null==e){const n=(new Date).toISOString().split("T")[0];l(e=>(0,A.A)((0,A.A)({},e),{},{datum_p:n,cena:"0",cena_rok:"0",userCreator:o||"Nezn\xe1m\xfd u\u017eivatel"}))}},[e,o]),(0,S.useEffect)(()=>{e&&l(n=>(0,A.A)((0,A.A)({},n),{},{cena:n.cena||"0",cena_rok:n.cena_rok||"0"}))},[e]);const O=n=>{const{name:e,value:t}=n.target;l(n=>(0,A.A)((0,A.A)({},n),{},{[e]:t}))},M=n=>{const{name:e,checked:t}=n.target;l(n=>(0,A.A)((0,A.A)({},n),{},{[e]:t?"Ano":"Ne"}))},R=n=>{i(n)};if(d)return(0,L.jsx)("div",{className:"error-message",children:d});const H=(0,cn.AH)(un||(un=(0,z.A)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n  "]))),V=(0,cn.AH)(gn||(gn=(0,z.A)(["\n    background-color: #fff;\n    border-radius: 10px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    width: 70%;\n    max-width: 900px;\n    max-height: 90%;\n    overflow-y: auto;\n    padding: 20px;\n    position: relative;\n    /* Posun pod fixn\xed hlavi\u010dku (+ menu). Pou\u017eij glob\xe1ln\xed prom\u011bnnou, fallback ~96+48 = 144px */\n  /* Posun zv\u011bt\u0161en o ~3em aby hlavi\u010dka formul\xe1\u0159e nebyla v kolizi s menu */\n  /* Posun zv\u011bt\u0161en je\u0161t\u011b o +1em (p\u016fvodn\u011b +3em) na \u017e\xe1dost: v\xedce prostoru pod fixn\xed hlavi\u010dkou */\n  margin-top: calc(var(--app-fixed-offset, 144px) + 4em);\n  "]))),Z=(0,cn.AH)(bn||(bn=(0,z.A)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n    position: relative;\n    h2 {\n      margin: 0;\n      color: #3f3688;\n      font-size: 18px;\n    }\n  "]))),K=(0,cn.AH)(hn||(hn=(0,z.A)(["\n    background: none;\n    border: none;\n    font-size: 20px;\n    cursor: pointer;\n    color: #f44336;\n    &:hover {\n      color: #d32f2f;\n    }\n  "]))),B=(0,cn.AH)(mn||(mn=(0,z.A)(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 20px;\n  "]))),Y=(0,cn.AH)(fn||(fn=(0,z.A)(["\n    flex: 1;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    cursor: pointer;\n    text-align: center;\n    transition: background-color 0.3s ease;\n    font-size: 16px;\n    &.active {\n      background-color: #3f3688;\n      color: #fff;\n    }\n  "]))),W=(0,cn.AH)(vn||(vn=(0,z.A)(["\n    margin-bottom: 20px;\n  "]))),U=(0,cn.AH)(yn||(yn=(0,z.A)(["\n    font-size: 18px;\n    font-weight: bold;\n    color: #3f3688;\n    margin-bottom: 10px;\n    text-align: left;\n  "]))),J=(0,cn.AH)(jn||(jn=(0,z.A)(["\n    margin-bottom: 20px;\n    padding: 15px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    background-color: #f9f9f9;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  "]))),q=(0,cn.AH)(wn||(wn=(0,z.A)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20px;\n  "]))),G=(0,cn.AH)(kn||(kn=(0,z.A)(["\n    flex: 1 1 auto;\n    min-width: 150px;\n    &.narrow {\n      flex: 1 1 30%;\n      min-width: 150px;\n    }\n  "]))),Q=(0,cn.AH)(An||(An=(0,z.A)(["\n    display: block;\n    margin-bottom: 15px;\n    font-size: 16px;\n    font-weight: bold;\n    color: #333;\n  "]))),X=(0,cn.AH)(zn||(zn=(0,z.A)(["\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 14px;\n    box-sizing: border-box;\n    background-color: #fff;\n    transition: border-color 0.3s ease, box-shadow 0.3s ease;\n    &:focus {\n      outline: none;\n      border-color: #3f3688;\n      box-shadow: 0 0 5px rgba(63, 54, 136, 0.5);\n    }\n  "]))),nn=(0,cn.AH)(Sn||(Sn=(0,z.A)(["\n    text-align: right;\n  "]))),en=(0,cn.AH)(Cn||(Cn=(0,z.A)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 1%;\n  "]))),tn=(0,cn.AH)(_n||(_n=(0,z.A)(["\n    display: flex;\n    gap: 1%;\n  "]))),rn=(0,cn.AH)(Pn||(Pn=(0,z.A)(["\n    font-size: 14px;\n    color: #666;\n  "]))),on=(0,cn.AH)(Nn||(Nn=(0,z.A)(["\n    border: 2px dashed #ddd;\n    border-radius: 5px;\n    padding: 20px;\n    text-align: center;\n    color: #666;\n    background-color: #f9f9f9;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n    &:hover {\n      background-color: #e0e0e0;\n    }\n    &:active {\n      background-color: #d0d0d0;\n    }\n  "]))),an=(0,cn.AH)(Fn||(Fn=(0,z.A)(["\n    margin-top: 20px;\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    background-color: #f9f9f9;\n    h4 {\n      margin-bottom: 10px;\n      font-size: 16px;\n      color: #3f3688;\n    }\n  "]))),sn=(0,cn.AH)(Dn||(Dn=(0,z.A)(["\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-bottom: 10px;\n    &.marked-for-deletion {\n      background-color: #ffe6e6;\n      border: 1px solid #ffcccc;\n      .file-name {\n        color: gray;\n        text-decoration: line-through;\n      }\n      .remove-file-button {\n        background-color: green;\n        color: white;\n        &:hover {\n          background-color: #006400;\n        }\n      }\n    }\n  "]))),ln=(0,cn.AH)(In||(In=(0,z.A)(["\n    font-size: 16px;\n    font-weight: bold;\n  "]))),dn=(0,cn.AH)(Ln||(Ln=(0,z.A)(["\n    flex: 1;\n    font-size: 14px;\n    color: #333;\n    &.clickable {\n      color: #3f3688;\n      text-decoration: underline;\n      cursor: pointer;\n      &:hover {\n        color: #2e2766;\n      }\n    }\n  "]))),pn=(0,cn.AH)(En||(En=(0,z.A)(["\n    font-size: 12px;\n    color: #666;\n    margin-left: 5px;\n  "]))),xn=(0,cn.AH)(Tn||(Tn=(0,z.A)(["\n    flex: 2;\n    padding: 8px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    font-size: 14px;\n  "]))),le=(0,cn.AH)($n||($n=(0,z.A)(["\n    padding: 5px 10px;\n    background-color: #f44336;\n    color: #fff;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 14px;\n    &:hover {\n      background-color: #d32f2f;\n    }\n  "]))),de=(0,cn.AH)(On||(On=(0,z.A)(["\n    display: inline-flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 20px;\n    background-color: #3f3688;\n    color: #fff;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 16px;\n    font-weight: bold;\n    transition: background-color 0.3s ease, box-shadow 0.3s ease;\n    position: relative;\n    overflow: hidden;\n    &:hover {\n      background-color: #2e2766;\n      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    }\n    .upload-icon {\n      font-size: 18px;\n    }\n    .file-input {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n      cursor: pointer;\n    }\n  "]))),ce=(0,cn.AH)(Mn||(Mn=(0,z.A)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 10px;\n  "])));return(0,L.jsx)("div",{css:H,children:(0,L.jsxs)("div",{css:V,children:[(0,L.jsxs)("div",{css:Z,children:[(0,L.jsx)("h2",{children:e?"Editace objedn\xe1vky":"P\u0159idat objedn\xe1vku"}),s.evidencni_c&&(0,L.jsx)("span",{css:(0,cn.AH)(Rn||(Rn=(0,z.A)(["color: green; font-size: 1.2em; font-weight: bold; margin-left: auto;"]))),children:s.evidencni_c}),(0,L.jsx)("button",{css:K,onClick:t,children:"\u2716"})]}),(0,L.jsxs)("div",{css:B,children:[(0,L.jsx)("button",{css:[Y,"order"===a&&(0,cn.AH)(Hn||(Hn=(0,z.A)([".active"])))],className:"order"===a?"active":"",onClick:()=>R("order"),children:"Objedn\xe1vka"}),(0,L.jsx)("button",{css:[Y,"technical"===a&&(0,cn.AH)(Vn||(Vn=(0,z.A)([".active"])))],className:"technical"===a?"active":"",onClick:()=>R("technical"),children:"Ostatn\xed informace"}),(0,L.jsx)("button",{css:[Y,"attachments"===a&&(0,cn.AH)(Zn||(Zn=(0,z.A)([".active"])))],className:"attachments"===a?"active":"",onClick:()=>R("attachments"),children:"P\u0159\xedlohy"})]}),(0,L.jsxs)("form",{onSubmit:n=>{n.preventDefault();m.filter(n=>n.markedForDeletion).map(n=>n.id);t()},children:["order"===a&&(0,L.jsxs)("div",{css:W,children:[(0,L.jsxs)("div",{css:J,children:[(0,L.jsx)("h4",{css:U,children:"Objedn\xe1vka"}),(0,L.jsxs)("div",{css:q,children:[(0,L.jsxs)("label",{css:[G,(0,cn.AH)(Kn||(Kn=(0,z.A)([".narrow"])))],children:["Datum:",(0,L.jsx)("input",{type:"date",name:"datum_p",value:s.datum_p||"",onChange:O,css:X})]}),(0,L.jsxs)("label",{css:[G,(0,cn.AH)(Bn||(Bn=(0,z.A)([".narrow"])))],children:["Cena bez DPH:",(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1%"},children:[(0,L.jsx)("input",{type:"text",name:"cena",value:s.cena||"",onChange:N,css:[X,nn]}),(0,L.jsx)("button",{type:"button",onClick:()=>{const n=(n=>{const e=parseFloat(n.replace(",","."))||0;return Math.round(1.21*e).toString().replace(".",",")})(s.cena);l(e=>(0,A.A)((0,A.A)({},e),{},{cena_rok:n}))},style:{background:"none",border:"none",cursor:"pointer",color:"#3f3688"},title:"Vypo\u010d\xedtat cenu s DPH",children:(0,L.jsx)(D.g,{icon:I.yqK})})]})]}),(0,L.jsxs)("label",{css:[G,(0,cn.AH)(Yn||(Yn=(0,z.A)([".narrow"])))],children:["Cena s DPH:",(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1%"},children:[(0,L.jsx)("input",{type:"text",name:"cena_rok",value:s.cena_rok||"",onChange:N,css:[X,nn]}),(0,L.jsx)("button",{type:"button",onClick:()=>{const n=(n=>{const e=parseFloat(n.replace(",","."))||0;return Math.round(e/1.21).toString().replace(".",",")})(s.cena_rok);l(e=>(0,A.A)((0,A.A)({},e),{},{cena:n}))},style:{background:"none",border:"none",cursor:"pointer",color:"#3f3688"},title:"Vypo\u010d\xedtat cenu bez DPH",children:(0,L.jsx)(D.g,{icon:I.yqK})})]})]})]}),(0,L.jsxs)("div",{css:q,children:[(0,L.jsxs)("div",{css:[G,(0,cn.AH)(Wn||(Wn=(0,z.A)([".narrow"])))],children:[(0,L.jsx)("label",{htmlFor:"faktura",children:"Faktura"}),(0,L.jsx)("input",{type:"checkbox",id:"faktura",name:"faktura",checked:s.faktura||!1,onChange:M})]}),(0,L.jsxs)("div",{css:[G,(0,cn.AH)(Un||(Un=(0,z.A)([".narrow"])))],children:[(0,L.jsx)("label",{htmlFor:"pokladni_dok",children:"Pokl.doklad"}),(0,L.jsx)("input",{type:"checkbox",id:"pokladni_dok",name:"pokladni_dok",checked:s.pokladni_dok||!1,onChange:M})]}),(0,L.jsxs)("div",{css:[G,(0,cn.AH)(Jn||(Jn=(0,z.A)([".narrow"])))],children:[(0,L.jsx)("label",{htmlFor:"garant",children:"Garant"}),(0,L.jsxs)("select",{id:"garant",name:"garant",value:s.garant||"",onChange:n=>{const e=n.target.value;l(n=>(0,A.A)((0,A.A)({},n),{},{garant:e}))},css:X,className:"select-with-arrow",style:{width:"250px",paddingRight:"1.75rem"},children:[(0,L.jsx)("option",{value:"",children:"Vyberte garanta"}),b.map(n=>(0,L.jsx)("option",{value:n.garant,children:n.garant},n.id))]})]})]})]}),(0,L.jsxs)("div",{css:J,children:[(0,L.jsx)("h4",{css:U,children:"Informace o partnerovi"}),(0,L.jsxs)("label",{css:Q,children:["Obchodn\xed jm\xe9no:",(0,L.jsx)("input",{type:"text",name:"partner_nazev",value:s.partner_nazev||"",onChange:O,css:X})]}),(0,L.jsxs)("label",{css:Q,children:["Adresa:",(0,L.jsx)("input",{type:"text",name:"partner_adresa",value:s.partner_adresa||"",onChange:O,css:X})]}),(0,L.jsxs)("label",{css:Q,children:["I\u010c:",(0,L.jsx)("input",{type:"text",name:"partner_ic",value:s.partner_ic||"",onChange:O,css:X})]})]}),(0,L.jsxs)("div",{css:J,children:[(0,L.jsx)("h4",{css:U,children:"Registr smluv"}),(0,L.jsxs)("div",{css:(0,cn.AH)(qn||(qn=(0,z.A)(["display: flex; flex-wrap: wrap; gap: 20px;"]))),children:[(0,L.jsxs)("label",{css:(0,cn.AH)(Gn||(Gn=(0,z.A)(["display: flex; align-items: center; gap: 10px; font-size: 16px;"]))),children:["Zve\u0159ejnit:",(0,L.jsx)("input",{type:"checkbox",name:"zverejnit",checked:s.zverejnit||!1,onChange:M,css:X})]}),(0,L.jsxs)("label",{children:["Datum zve\u0159ejn\u011bn\xed:",(0,L.jsx)("input",{type:"date",name:"dt_zverejneni",value:s.dt_zverejneni||"",onChange:O,css:X})]}),(0,L.jsxs)("label",{children:["Identifik\xe1tor:",(0,L.jsx)("input",{type:"text",name:"idds",value:s.idds||"",onChange:O,css:X})]})]})]})]}),"technical"===a&&(0,L.jsxs)("div",{css:W,children:[(0,L.jsx)("h3",{children:"Ostatn\xed informace"}),(0,L.jsxs)("div",{css:J,children:[(0,L.jsxs)("label",{css:Q,children:["Druh:",(0,L.jsxs)("select",{name:"druh_sml",value:s.druh_sml||"",onChange:n=>{const e=n.target.value;l(n=>(0,A.A)((0,A.A)({},n),{},{druh_sml:e}))},css:X,className:"select-with-arrow",style:{paddingRight:"1.75rem"},children:[(0,L.jsx)("option",{value:"",children:"Vyberte druh"}),p.map(n=>(0,L.jsx)("option",{value:n.druh,children:n.druh},n.id))]})]}),(0,L.jsxs)("label",{css:Q,children:["Obsah:",(0,L.jsx)("textarea",{name:"obsah",value:s.obsah||"",onChange:O,rows:"2",css:(0,cn.AH)(Qn||(Qn=(0,z.A)(["\n                      font-size: 14px;\n                      line-height: 1.5;\n                      resize: vertical;\n                      background-color: #fff;\n                      height: auto;\n                      width: 100%;\n                      padding: 8px;\n                      border: 1px solid #ddd;\n                      border-radius: 5px;\n                    "])))})]}),(0,L.jsxs)("label",{css:Q,children:["Pozn\xe1mka:",(0,L.jsx)("textarea",{name:"poznamka",value:s.poznamka||"",onChange:O,rows:"2",css:(0,cn.AH)(Xn||(Xn=(0,z.A)(["\n                      font-size: 14px;\n                      line-height: 1.5;\n                      resize: vertical;\n                      background-color: #fff;\n                      height: auto;\n                      width: 100%;\n                      padding: 8px;\n                      border: 1px solid #ddd;\n                      border-radius: 5px;\n                    "])))})]})]}),(0,L.jsxs)("div",{css:J,children:[(0,L.jsx)("h4",{css:U,children:"Transportn\xed technika"}),(0,L.jsxs)("div",{css:q,children:[(0,L.jsxs)("label",{css:[G,(0,cn.AH)(ne||(ne=(0,z.A)([".narrow"]))),Q],children:["V\xfdrobn\xed \u010d\xedslo:",(0,L.jsx)("input",{type:"text",name:"tt_vyrc",value:s.tt_vyrc||"",onChange:O,css:X})]}),(0,L.jsxs)("label",{css:[G,(0,cn.AH)(ee||(ee=(0,z.A)([".narrow"]))),Q],children:["Dodate\u010dn\xe9 informace:",(0,L.jsx)("input",{type:"text",name:"tt_dinfo",value:s.tt_dinfo||"",onChange:O,css:X})]})]})]})]}),"attachments"===a&&(0,L.jsxs)("div",{css:W,children:[(0,L.jsx)("h3",{children:"P\u0159\xedlohy"}),(0,L.jsxs)("div",{css:J,children:[(0,L.jsx)("div",{css:on,onDragOver:n=>{n.preventDefault(),n.stopPropagation(),n.dataTransfer.dropEffect="copy"},onDrop:n=>{n.preventDefault(),n.stopPropagation();const e=Array.from(n.dataTransfer.files).map(n=>{const e=_(n.name);return{file:n,description:n.name,safeFilename:e}});g(n=>[...n,...e])},children:"P\u0159et\xe1hn\u011bte soubory sem"}),(0,L.jsx)("div",{css:ce,children:(0,L.jsxs)("button",{css:de,children:[(0,L.jsx)(D.g,{icon:I.JmV,className:"upload-icon"}),"Vyberte soubor",(0,L.jsx)("input",{type:"file",multiple:!0,onChange:n=>{const e=Array.from(n.target.files).map(n=>{const e=_(n.name);return{file:n,description:n.name,safeFilename:e}});g(n=>[...n,...e])},className:"file-input"})]})}),u.length>0&&(0,L.jsxs)("div",{css:an,children:[(0,L.jsx)("h4",{children:"Seznam nov\u011b p\u0159ipojen\xfdch p\u0159\xedloh"}),u.map((n,e)=>(0,L.jsxs)("div",{css:sn,children:[(0,L.jsx)("span",{css:[dn,(0,cn.AH)(te||(te=(0,z.A)([".clickable"])))],onClick:()=>(n=>{const e=URL.createObjectURL(n);window.open(e,"_blank")})(n.file),title:"Klikn\u011bte pro otev\u0159en\xed",children:n.file.name}),(0,L.jsxs)("span",{css:pn,children:["(",C(n.file.size),")"]}),(0,L.jsx)("input",{type:"text",placeholder:"Popis souboru",value:n.description,onChange:n=>((n,e)=>{g(t=>t.map((t,r)=>r===n?(0,A.A)((0,A.A)({},t),{},{description:e}):t))})(e,n.target.value),css:xn}),(0,L.jsx)("button",{type:"button",css:le,onClick:()=>(n=>{g(e=>e.filter((e,t)=>t!==n))})(e),children:"Odebrat"})]},e))]}),v?(0,L.jsx)("div",{style:{display:"none"}}):j?(0,L.jsx)("p",{css:(0,cn.AH)(re||(re=(0,z.A)(["color: #f44336; font-weight: bold;"]))),children:j}):m.length>0&&(0,L.jsxs)("div",{css:an,children:[(0,L.jsx)("h4",{children:"Seznam ji\u017e p\u0159ipojen\xfdch p\u0159\xedloh"}),m.map(n=>(0,L.jsxs)("div",{css:[sn,n.markedForDeletion&&(0,cn.AH)(oe||(oe=(0,z.A)([".marked-for-deletion"])))],style:{opacity:n.markedForDeletion?.6:1,transition:"opacity 0.2s ease-in-out"},children:[(0,L.jsx)("span",{css:ln,style:{color:n.markedForDeletion?"red":"green",marginRight:"10px"},title:n.markedForDeletion?"Ozna\u010deno k odstran\u011bn\xed":"Aktivn\xed",children:n.markedForDeletion?"\u2716":"\u2714"}),(0,L.jsx)("a",{href:T(n.soubor),target:"_blank",rel:"noopener noreferrer",css:[dn,(0,cn.AH)(ae||(ae=(0,z.A)([".clickable"])))],title:"Klikn\u011bte pro otev\u0159en\xed",style:{textDecoration:n.markedForDeletion?"line-through":"none",color:n.markedForDeletion?"gray":"#3f3d9e"},children:n.soubor}),(0,L.jsxs)("span",{css:pn,children:["(",n.size?C(n.size):"",")"]}),(0,L.jsx)("input",{type:"text",placeholder:"Popis souboru",value:n.popis||"",onChange:e=>{return t=n.id,r=e.target.value,void f(n=>n.map(n=>n.id===t?(0,A.A)((0,A.A)({},n),{},{popis:r}):n));var t,r},css:xn,disabled:n.markedForDeletion}),(0,L.jsx)("button",{type:"button",css:le,style:{backgroundColor:n.markedForDeletion?"green":"red",color:"white"},onClick:()=>{return e=n.id,void f(n=>n.map(n=>n.id===e?(0,A.A)((0,A.A)({},n),{},{markedForDeletion:!n.markedForDeletion}):n));var e},children:n.markedForDeletion?"Obnovit":"Odebrat"})]},n.id))]})]})]}),(0,L.jsxs)("div",{css:en,children:[(0,L.jsx)("div",{css:rn,children:s.userCreator&&(0,L.jsxs)("p",{children:["Vytvo\u0159il: ",(0,L.jsx)("strong",{children:s.userCreator})]})}),(0,L.jsxs)("div",{css:tn,children:[(0,L.jsx)("button",{type:"submit",children:e?"Aktualizuj":"P\u0159idat"}),(0,L.jsx)("button",{type:"button",onClick:t,children:"Zru\u0161"})]})]})]})]})})};var de=t(6058);ln.t1.register(ln.Bs,ln.m_,ln.s$,dn.A);const ce=n=>{let{filteredOrders:e,selectedYear:t,lpsData:r}=n;const o=(0,S.useMemo)(()=>t||localStorage.getItem("orders_yearFilter")||"V\u0161echny roky",[t]),[a,i]=(0,S.useState)(()=>localStorage.getItem("statistics_activeTab")||"overview");(0,S.useEffect)(()=>{localStorage.setItem("statistics_activeTab",a)},[a]);const s=(0,S.useMemo)(()=>e.reduce((n,e)=>n+(parseFloat(e.cena_rok)||0),0),[e]),l=(0,S.useMemo)(()=>{const n=e.reduce((n,e)=>{const t=e.garant||"neuvedeno";return n[t]||(n[t]={count:0,totalPrice:0}),n[t].count+=1,n[t].totalPrice+=parseFloat(e.cena_rok)||0,n},{});return Object.entries(n).map(n=>{let[e,t]=n;return{section:e,count:t.count,totalPrice:t.totalPrice,percentage:(t.totalPrice/s*100).toFixed(2)}})},[e,s]),d=(0,S.useMemo)(()=>{const n=l.map(n=>n.section);return{labels:n,datasets:[{data:l.map(n=>n.totalPrice),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#8DD3C7"].slice(0,n.length)}]}},[l]),c=(0,S.useMemo)(()=>({plugins:{legend:{display:!1},tooltip:{callbacks:{label:n=>{const e=n.raw,t=(e/s*100).toFixed(2),r=e.toLocaleString("cs-CZ");return"".concat(t,"% (").concat(r," K\u010d)")}}},datalabels:{display:n=>n.dataset.data[n.dataIndex]/s*100>=6,formatter:(n,e)=>{const t=(n/s*100).toFixed(2);return"".concat(t,"%")},color:"#fff",font:{weight:"bold",size:14},align:"end",offset:12}}}),[s]),p=(0,S.useMemo)(()=>{if(!r.length)return[];const n="V\u0161echny roky"===o?new Date("2000-01-01"):new Date("".concat(o,"-01-01")),t="V\u0161echny roky"===o?new Date("2099-12-31"):new Date("".concat(o,"-12-31")),a={},i=n=>{if(!n)return null;const[e,t,r]=n.split(".").map(Number);return new Date(r,t-1,e)};return r.forEach(r=>{const o=i(r.platne_od),s=i(r.platne_do);if((!o||o>=n)&&(!s||s<=t)){const n=r.kategorie||"neuvedeno";a[n]||(a[n]={jmeno:r.jmeno||"neuvedeno",garant:r.garant_id||"neuvedeno",kategorie:n,budget:0,ordersCount:0,ordersPrice:0,subRows:[]});const t={cisloLP:r.cislo_lp||"neuvedeno",cisloUctu:r.cislo_uctu||"",nazevUctu:r.nazev_uctu||"",budget:parseFloat(r.vyse_financniho_kryti)||0,ordersCount:0,ordersPrice:0};e.forEach(n=>{n.cislo_lp===r.cislo_lp&&(t.ordersCount+=1,t.ordersPrice+=parseFloat(n.cena_rok)||0)});const o=a[n].subRows.find(n=>n.cisloLP===t.cisloLP);o?o.budget+=t.budget:a[n].subRows.push(t)}}),Object.values(a).forEach(n=>{n.budget=n.subRows.reduce((n,e)=>n+e.budget,0),n.ordersCount=n.subRows.reduce((n,e)=>n+e.ordersCount,0),n.ordersPrice=n.subRows.reduce((n,e)=>n+e.ordersPrice,0)}),Object.values(a)},[r,e,o]),x=(0,S.useMemo)(()=>[{id:"expander",header:n=>{let{table:e}=n;const t=e.getIsAllRowsExpanded();return(0,L.jsx)("button",{onClick:()=>e.toggleAllRowsExpanded(),style:{cursor:"pointer",background:"none",border:"none",fontSize:"16px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},title:t?"Sbalit v\u0161e":"Rozbalit v\u0161e",children:t?"\u2212":"+"})},size:30,cell:n=>{let{row:e}=n;return(0,L.jsx)("button",{onClick:n=>{n.stopPropagation(),e.toggleExpanded()},style:{cursor:"pointer",background:"none",border:"none",fontSize:"16px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.getIsExpanded()?"\u2212":"+"})}},{accessorKey:"jmeno",header:"P\u0159\xedkazce",size:150},{accessorKey:"garant",header:"\xdasek",size:100,cell:n=>(0,L.jsx)("div",{style:{textAlign:"center"},children:n.getValue()})},{accessorKey:"kategorie",header:"LP",size:80},{accessorKey:"budget",header:"Budget",size:120,cell:n=>(0,L.jsxs)("div",{style:{textAlign:"right",padding:"0 5px"},children:[n.getValue().toLocaleString("cs-CZ")," K\u010d"]})},{accessorKey:"ordersCount",header:"OBJ (KS)",size:80,cell:n=>(0,L.jsx)("div",{style:{textAlign:"center",padding:"0 5px"},children:n.getValue()})},{accessorKey:"ordersPrice",header:"Cena s DPH (OBJ)",size:120,cell:n=>(0,L.jsxs)("div",{style:{textAlign:"right",padding:"0 5px"},children:[n.getValue().toLocaleString("cs-CZ")," K\u010d"]})},{id:"difference",header:"Zb\xfdv\xe1",size:120,cell:n=>{let{row:e}=n;const t=e.original.budget-e.original.ordersPrice,r=t>0?"green":"red";return(0,L.jsxs)("div",{style:{textAlign:"right",color:r,padding:"0 5px"},children:[t.toLocaleString("cs-CZ")," K\u010d"]})}}],[]),u=(0,an.N4)({data:"limitedPromises"===a?p:[],columns:x,getCoreRowModel:(0,sn.HT)(),getExpandedRowModel:(0,sn.D0)(),getRowCanExpand:n=>{var e;return(null===(e=n.original.subRows)||void 0===e?void 0:e.length)>0}});return(0,L.jsxs)("div",{className:"statistics-container",children:[(0,L.jsxs)("div",{className:"tabs",children:[(0,L.jsx)("button",{className:"tab-button ".concat("overview"===a?"active":""),onClick:()=>i("overview"),children:"P\u0159ehled dle \xfasek\u016f"}),(0,L.jsx)("button",{className:"tab-button ".concat("limitedPromises"===a?"active":""),onClick:()=>i("limitedPromises"),children:"Limitovan\xe9 p\u0159\xedsliby"})]}),(0,L.jsx)("div",{className:"tab-content",children:(()=>{switch(a){case"overview":return(0,L.jsxs)("div",{className:"legend-chart-container",children:[(0,L.jsx)("div",{className:"legend-container",children:l.map((n,e)=>(0,L.jsxs)("div",{className:"legend-item",children:[(0,L.jsx)("span",{className:"legend-color",style:{backgroundColor:d.datasets[0].backgroundColor[e]}}),(0,L.jsxs)("span",{className:"legend-text",children:[n.section,": ",n.count," Ks : ",n.totalPrice.toLocaleString("cs-CZ")," K\u010d (",n.percentage,"%)"]})]},e))}),(0,L.jsx)("div",{className:"chart-wrapper",children:(0,L.jsx)(de.Fq,{data:d,options:c})})]});case"limitedPromises":return(0,L.jsx)("div",{className:"limited-promises-table-wrapper",children:(0,L.jsxs)("table",{className:"limited-promises-table",children:[(0,L.jsx)("thead",{children:u.getHeaderGroups().map(n=>(0,L.jsx)("tr",{children:n.headers.map(n=>(0,L.jsx)("th",{children:(0,an.Kv)(n.column.columnDef.header,n.getContext())},n.id))},n.id))}),(0,L.jsx)("tbody",{children:u.getRowModel().rows.map(n=>(0,L.jsxs)(S.Fragment,{children:[(0,L.jsx)("tr",{className:"lp-main-row",children:n.getVisibleCells().map(n=>(0,L.jsx)("td",{children:(0,an.Kv)(n.column.columnDef.cell,n.getContext())},n.id))}),n.getIsExpanded()&&(0,L.jsx)(L.Fragment,{children:n.original.subRows.map((n,e)=>{const t=n.budget-n.ordersPrice;return(0,L.jsxs)("tr",{className:"lp-sub-row",children:[(0,L.jsx)("td",{className:"lp-sub-empty"}),(0,L.jsx)("td",{className:"lp-sub-empty"}),(0,L.jsx)("td",{className:"lp-sub-empty"}),(0,L.jsxs)("td",{className:"lp-sub-lp",children:[(0,L.jsx)("span",{className:"lp-code",children:n.cisloLP})," ",(0,L.jsxs)("span",{className:"lp-account",children:["(",n.cisloUctu,")"]}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{className:"lp-account",children:n.nazevUctu})]}),(0,L.jsxs)("td",{style:{textAlign:"right"},children:[n.budget.toLocaleString("cs-CZ")," K\u010d"]}),(0,L.jsx)("td",{style:{textAlign:"center"},children:n.ordersCount}),(0,L.jsxs)("td",{style:{textAlign:"right"},children:[n.ordersPrice.toLocaleString("cs-CZ")," K\u010d"]}),(0,L.jsx)("td",{style:{textAlign:"right"},children:(0,L.jsxs)("span",{className:t>0?"value-positive":"value-negative",children:[t.toLocaleString("cs-CZ")," K\u010d"]})})]},e)})})]},n.id))})]})});default:return(0,L.jsx)("p",{children:"Obsah zat\xedm nen\xed k dispozici."})}})()})]})};var pe,xe,ue,ge,be,he,me,fe,ve,ye,je,we,ke,Ae,ze,Se,Ce,_e,Pe,Ne,Fe,De,Ie,Le,Ee,Te,$e,Oe,Me,Re,He,Ve,Ze,Ke,Be,Ye,We,Ue,Je,qe,Ge,Qe,Xe,nt,et,tt,rt,ot,at,it,st,lt,dt,ct,pt,xt,ut,gt,bt,ht=t(88720),mt=t(4509);ln.t1.register(ln.Bs,ln.m_,ln.s$,dn.A);const ft=F.A.div(pe||(pe=(0,z.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  color: white;\n"]))),vt=F.A.div(xe||(xe=(0,z.A)(["\n  border-bottom: 3px solid #e5e7eb;\n  margin-bottom: 2rem;\n"]))),yt=F.A.h2(ue||(ue=(0,z.A)(["\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  margin: 0;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-left: auto;\n"]))),jt=F.A.div(ge||(ge=(0,z.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),wt=F.A.label(be||(be=(0,z.A)(["\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),kt=F.A.label(he||(he=(0,z.A)(["\n  font-weight: 600;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-left: 1rem;\n"]))),At=F.A.div(me||(me=(0,z.A)(["\n  position: relative;\n  width: auto;\n  min-width: 240px;\n  z-index: 10000;\n"]))),zt=F.A.div(fe||(fe=(0,z.A)(["\n  position: relative;\n  width: auto;\n  min-width: 150px;\n  z-index: 10000;\n"]))),St=F.A.button(ve||(ve=(0,z.A)(["\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n"]))),Ct=F.A.div(ye||(ye=(0,z.A)(["\n  position: absolute;\n  top: calc(100% + 0.5rem);\n  left: 0;\n  right: 0;\n  background: rgba(30, 64, 175, 0.98);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  backdrop-filter: blur(12px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 10001;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: rgba(59, 130, 246, 0.8);\n    border-radius: 4px;\n  }\n"]))),_t=F.A.div(je||(je=(0,z.A)(["\n  padding: 0.75rem 1rem;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.15s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  &:first-of-type {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n  }\n\n  &:last-of-type {\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n  }\n"]))),Pt=F.A.button(we||(we=(0,z.A)(["\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  width: 100%;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n  }\n"]))),Nt=F.A.div(ke||(ke=(0,z.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  margin-top: 0.5rem;\n  background: #1e40af;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n  max-height: 400px;\n  overflow-y: auto;\n  z-index: 10001;\n  backdrop-filter: blur(8px);\n\n  /* Scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 12px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(30, 64, 175, 0.3);\n    border-radius: 6px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(96, 165, 250, 0.9));\n    border-radius: 6px;\n    border: 2px solid rgba(30, 64, 175, 0.3);\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, rgba(59, 130, 246, 1), rgba(96, 165, 250, 1));\n  }\n\n  /* Firefox scrollbar */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(59, 130, 246, 0.8) rgba(30, 64, 175, 0.3);\n"]))),Ft=F.A.div(Ae||(Ae=(0,z.A)(["\n  padding: 0.75rem 1rem;\n  color: white;\n  cursor: ",";\n  font-size: 0.95rem;\n  transition: background 0.15s ease;\n  pointer-events: ",";\n\n  ","\n\n  ","\n\n  ","\n"])),n=>n.disabled?"default":"pointer",n=>n.disabled?"none":"auto",n=>n.separator&&"\n    border-top: 1px solid rgba(255, 255, 255, 0.3);\n    padding: 0.5rem 1rem;\n    text-align: center;\n    color: rgba(255, 255, 255, 0.7);\n  ",n=>n.action&&"\n    font-weight: 600;\n    color: rgba(255, 255, 255, 0.9);\n  ",n=>!n.disabled&&!n.separator&&"\n    &:hover {\n      background: #2563eb;\n    }\n  "),Dt=F.A.div(ze||(ze=(0,z.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),It=F.A.button(Se||(Se=(0,z.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.5rem;\n  width: 36px;\n  height: 36px;\n  border-radius: 6px;\n  cursor: ",";\n  transition: all 0.2s;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: ",";\n\n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    font-size: 1rem;\n  }\n"])),n=>n.disabled?"not-allowed":"pointer",n=>n.disabled?.5:1),Lt=F.A.div(Ce||(Ce=(0,z.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(248, 250, 252, 0.95);\n  backdrop-filter: blur(",");\n  -webkit-backdrop-filter: blur(",");\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  opacity: ",";\n  transition: opacity 0.5s ease-in-out, backdrop-filter 0.6s ease-in-out;\n  pointer-events: ",";\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n"])),n=>n.$visible?"8px":"0px",n=>n.$visible?"8px":"0px",n=>n.$visible?1:0,n=>n.$visible?"auto":"none"),Et=F.A.div(_e||(_e=(0,z.A)(["\n  width: 64px;\n  height: 64px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #f59e0b;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1.5rem;\n  transform: scale(",");\n  transition: transform 0.5s ease-in-out;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg) scale(1); }\n    100% { transform: rotate(360deg) scale(1); }\n  }\n"])),n=>n.$visible?1:.8),Tt=F.A.div(Pe||(Pe=(0,z.A)(["\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #374151;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  transform: translateY(",");\n  opacity: ",";\n  transition: transform 0.5s ease-in-out 0.1s, opacity 0.5s ease-in-out 0.1s;\n"])),n=>n.$visible?"0":"10px",n=>n.$visible?1:0),$t=F.A.div(Ne||(Ne=(0,z.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n  text-align: center;\n  transform: translateY(",");\n  opacity: ",";\n  transition: transform 0.5s ease-in-out 0.15s, opacity 0.5s ease-in-out 0.15s;\n"])),n=>n.$visible?"0":"10px",n=>n.$visible?1:0),Ot=F.A.div(Fe||(Fe=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n"]))),Mt=F.A.div(De||(De=(0,z.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n"]))),Rt=F.A.div(Ie||(Ie=(0,z.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),Ht=F.A.button(Le||(Le=(0,z.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Vt=F.A.select(Ee||(Ee=(0,z.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n"]))),Zt=F.A.div(Te||(Te=(0,z.A)(["\n  filter: blur(",");\n  transition: filter 0.6s ease-in-out;\n  pointer-events: ",";\n"])),n=>n.$blurred?"3px":"0px",n=>n.$blurred?"none":"auto"),Kt=(0,F.A)(mt.T_)($e||($e=(0,z.A)(["\n  margin-left: 0.75rem;\n"]))),Bt=F.A.span(Oe||(Oe=(0,z.A)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background: ",";\n  color: white;\n  font-size: 0.8rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  cursor: help;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);\n  }\n\n  svg {\n    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n  }\n"])),n=>n.fromCache?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"),Yt=F.A.div(Me||(Me=(0,z.A)(["\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n"]))),Wt=F.A.div(Re||(Re=(0,z.A)(["\n  display: grid;\n  grid-template-columns: minmax(350px, 400px) repeat(auto-fit, minmax(180px, 220px));\n  gap: clamp(0.8rem, 1.5vw, 1.65rem);\n  margin-bottom: 1.5rem;\n  align-items: start;\n  justify-content: start;\n  overflow-x: auto;\n\n  @media (max-width: 1400px) {\n    grid-template-columns: minmax(320px, 350px) repeat(auto-fit, minmax(160px, 200px));\n    gap: clamp(0.7rem, 1.3vw, 1.4rem);\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: minmax(300px, 330px) repeat(auto-fit, minmax(150px, 180px));\n    gap: clamp(0.6rem, 1.2vw, 1.3rem);\n  }\n\n  @media (max-width: 900px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.2rem);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: clamp(0.8rem, 2vw, 1.15rem);\n  }\n\n  @media (max-width: 600px) {\n    grid-template-columns: 1fr;\n    gap: clamp(0.6rem, 2vw, 0.9rem);\n  }\n\n  @media (min-width: 1600px) {\n    grid-template-columns: minmax(400px, 450px) repeat(auto-fit, minmax(200px, 250px));\n    gap: clamp(1.2rem, 1.8vw, 2rem);\n  }\n"]))),Ut=F.A.div(He||(He=(0,z.A)(["\n  background: linear-gradient(145deg, #ffffff, #f9fafb);\n  border-radius: 16px;\n  padding: clamp(1.25rem, 1.5vw, 1.75rem);\n  border-left: 6px solid ",";\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 2px 4px rgba(0, 0, 0, 0.06);\n\n  transition: all 0.3s ease;\n  grid-row: span 2;\n  grid-column: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: fit-content;\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 8px 20px rgba(0, 0, 0, 0.12),\n      0 4px 8px rgba(0, 0, 0, 0.08);\n  }\n\n  @media (max-width: 1200px) {\n    grid-row: span 1;\n    grid-column: span 2;\n    min-height: clamp(140px, 15vh, 180px);\n  }\n\n  @media (max-width: 900px) {\n    grid-column: span 1;\n    min-height: clamp(120px, 14vh, 160px);\n    padding: clamp(1rem, 1.2vw, 1.5rem);\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(110px, 13vh, 150px);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(100px, 12vh, 130px);\n    padding: clamp(0.8rem, 1vw, 1.25rem);\n  }\n"])),n=>n.$color||"#3b82f6"),Jt=F.A.div(Ve||(Ve=(0,z.A)(["\n  background: ",";\n  border-radius: 12px;\n  padding: clamp(0.8rem, 1vw, 1rem);\n  border-left: 4px solid ",";\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n\n  transition: all 0.25s ease;\n  min-height: clamp(90px, 10vh, 120px);\n  min-width: clamp(160px, 18vw, 220px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: relative;\n  cursor: ",";\n  width: 100%;\n  box-sizing: border-box;\n\n  &:hover {\n    transform: ",";\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n    ","\n  }\n\n  ","\n\n  @media (max-width: 1400px) {\n    min-height: clamp(85px, 9vh, 110px);\n    min-width: clamp(150px, 16vw, 200px);\n  }\n\n  @media (max-width: 1200px) {\n    min-height: clamp(80px, 8vh, 105px);\n    min-width: clamp(140px, 15vw, 190px);\n  }\n\n  @media (max-width: 900px) {\n    min-height: clamp(75px, 8vh, 100px);\n    min-width: 100%;\n  }\n\n  @media (max-width: 768px) {\n    min-height: clamp(70px, 7vh, 95px);\n    padding: clamp(0.7rem, 0.8vw, 0.9rem);\n  }\n\n  @media (max-width: 600px) {\n    min-height: clamp(65px, 6vh, 85px);\n    padding: clamp(0.6rem, 0.7vw, 0.8rem);\n  }\n"])),n=>n.$isActive?"linear-gradient(145deg, ".concat(n.$color||"#3b82f6","20, ").concat(n.$color||"#3b82f6","10)"):"linear-gradient(145deg, #ffffff, #f9fafb)",n=>n.$color||"#3b82f6",n=>n.$clickable?"pointer":"default",n=>n.$clickable?"translateY(-2px)":"translateY(-1px)",n=>n.$clickable&&"\n      background: linear-gradient(145deg, ".concat(n.$color||"#3b82f6","25, ").concat(n.$color||"#3b82f6","15);\n    "),n=>n.$isActive&&"\n    border-left-width: 6px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ".concat(n.$color||"#3b82f6","40;\n  ")),qt=F.A.div(Ze||(Ze=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n"]))),Gt=F.A.div(Ke||(Ke=(0,z.A)(["\n  color: ",";\n  font-size: 1.25rem;\n  opacity: 0.7;\n"])),n=>n.$color||"#64748b"),Qt=F.A.div(Be||(Be=(0,z.A)(["\n  font-size: clamp(0.75rem, 1.2vw, 0.875rem);\n  color: #64748b;\n  font-weight: 500;\n  text-align: left;\n  line-height: 1.4;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  @media (max-width: 1200px) {\n    white-space: normal;\n    line-height: 1.3;\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(0.7rem, 1.1vw, 0.825rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(0.65rem, 1vw, 0.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.6rem, 0.9vw, 0.75rem);\n  }\n"]))),Xt=F.A.div(Ye||(Ye=(0,z.A)(["\n  font-size: clamp(1.25rem, 2.5vw, 1.875rem);\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1.2;\n  text-align: left;\n\n  @media (max-width: 1400px) {\n    font-size: clamp(1.2rem, 2.3vw, 1.75rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.15rem, 2.2vw, 1.65rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.1rem, 2.1vw, 1.6rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1rem, 2vw, 1.5rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(0.95rem, 1.8vw, 1.3rem);\n  }\n"]))),nr=F.A.div(We||(We=(0,z.A)(["\n  font-size: clamp(1.25rem, 2.5vw, 1.75rem);\n  font-weight: 700;\n  color: #1e293b;\n  text-align: center;\n  line-height: 1.1;\n  margin-bottom: 0.5rem;\n\n  @media (max-width: 1400px) {\n    font-size: clamp(1.15rem, 2.3vw, 1.6rem);\n  }\n\n  @media (max-width: 1200px) {\n    font-size: clamp(1.3rem, 2.6vw, 2rem);\n  }\n\n  @media (max-width: 900px) {\n    font-size: clamp(1.2rem, 2.4vw, 1.9rem);\n  }\n\n  @media (max-width: 768px) {\n    font-size: clamp(1.1rem, 2.2vw, 1.8rem);\n  }\n\n  @media (max-width: 600px) {\n    font-size: clamp(1rem, 2vw, 1.6rem);\n  }\n"]))),er=F.A.div(Ue||(Ue=(0,z.A)(["\n  font-size: 1rem;\n  color: #64748b;\n  font-weight: 600;\n  text-align: center;\n  margin-bottom: 1rem;\n\n  @media (max-width: 480px) {\n    font-size: 0.875rem;\n  }\n"]))),tr=F.A.div(Je||(Je=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  margin-top: auto;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n"]))),rr=F.A.div(qe||(qe=(0,z.A)(["\n  flex: 1;\n  padding: 0.75rem;\n  border-radius: 8px;\n  border-left: 3px solid ",";\n  background: ",";\n"])),n=>n.$color||"#d1d5db",n=>n.$bg||"rgba(0, 0, 0, 0.02)"),or=F.A.div(Ge||(Ge=(0,z.A)(["\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: ",";\n  margin-bottom: 0.25rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"])),n=>n.$color||"#6b7280"),ar=F.A.div(Qe||(Qe=(0,z.A)(["\n  font-size: 0.875rem;\n  font-weight: 700;\n  color: #1f2937;\n"]))),ir=F.A.div(Xe||(Xe=(0,z.A)(["\n  position: relative;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  margin-top: 1em;\n\n  /* Shadow indik\xe1tory na okraj\xedch kdy\u017e je mo\u017en\xe9 scrollovat */\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 40px;\n    pointer-events: none;\n    z-index: 10;\n    transition: opacity 0.3s ease;\n  }\n\n  /* Lev\xfd shadow - kdy\u017e nen\xed na za\u010d\xe1tku */\n  &::before {\n    left: 0;\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ",";\n    border-radius: 8px 0 0 8px;\n  }\n\n  /* Prav\xfd shadow - kdy\u017e nen\xed na konci */\n  &::after {\n    right: 0;\n    background: linear-gradient(to left, rgba(0, 0, 0, 0.1), transparent);\n    opacity: ",";\n    border-radius: 0 8px 8px 0;\n  }\n"])),n=>n.$showLeftShadow?1:0,n=>n.$showRightShadow?1:0),sr=F.A.div(nt||(nt=(0,z.A)(["\n  /* Horizont\xe1ln\xed scrollov\xe1n\xed kdy\u017e se tabulka nevejde */\n  overflow-x: auto;\n  overflow-y: visible;\n  position: relative;\n\n  /* Smooth scrolling pro lep\u0161\xed UX */\n  scroll-behavior: smooth;\n\n  /* Skryt\xfd scrollbar - m\xe1me \u0161ipky pro navigaci */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Firefox - skryt\xfd scrollbar */\n  scrollbar-width: none;\n"]))),lr=F.A.button(et||(et=(0,z.A)(["\n  position: fixed;\n  left: 50px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 9999;\n\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  border: 2px solid #e5e7eb;\n  background: ",";\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  /* Zobrazit kdy\u017e: 1) je pot\u0159eba scrollovat A 2) je hover nad tabulkou NEBO nad \u0161ipkou */\n  opacity: ",";\n  pointer-events: ",";\n  transform: translateY(-50%); /* V\u017edy stejn\xe1 velikost, \u017e\xe1dn\xfd scale */\n\n  &:hover:not(:disabled) {\n    background: rgba(248, 250, 252, 0.98);\n    border-color: #3b82f6;\n    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(-50%) scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  svg {\n    width: 22px;\n    height: 22px;\n    color: #3b82f6;\n  }\n"])),n=>n.$arrowHovered?"rgba(255, 255, 255, 0.98)":"rgba(255, 255, 255, 0.25)",n=>n.$visible&&(n.$tableHovered||n.$arrowHovered)?1:0,n=>n.$visible&&(n.$tableHovered||n.$arrowHovered)?"auto":"none"),dr=(0,F.A)(lr)(tt||(tt=(0,z.A)(["\n  left: auto;\n  right: 50px;\n"]))),cr=F.A.table(rt||(rt=(0,z.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),pr=F.A.thead(ot||(ot=(0,z.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),xr=F.A.tr(at||(at=(0,z.A)(["\n  background: ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;\n  }\n"])),n=>n.$isEven?"#f8fafc":"white"),ur=F.A.th(it||(it=(0,z.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),gr=F.A.td(st||(st=(0,z.A)(["\n  padding: 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n"]))),br=F.A.button(lt||(lt=(0,z.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #3b82f6;\n  font-size: 1.25rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n"]))),hr=F.A.div(dt||(dt=(0,z.A)(["\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-top: 2px solid #e5e7eb;\n  border-bottom: 2px solid #000000;\n"]))),mr=F.A.div(ct||(ct=(0,z.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));\n  gap: 1rem;\n\n  @media (max-width: 1600px) {\n    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  }\n\n  @media (max-width: 1200px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  }\n"]))),fr=F.A.div(pt||(pt=(0,z.A)(["\n  background: white;\n  border-radius: 8px;\n  padding: 1.25rem;\n  border-left: 4px solid #3b82f6;\n  box-shadow:\n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\n    inset 0 1px 0 rgba(255, 255, 255, 0.6);\n\n  position: relative;\n  transform: translateZ(0);\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\n      0 4px 6px -2px rgba(0, 0, 0, 0.05),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  }\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.02) 100%);\n    border-radius: 8px;\n    pointer-events: none;\n  }\n\n  ","\n"])),n=>n.$fullWidth&&"\n    grid-column: 1 / -1;\n  "),vr=F.A.h4(xt||(xt=(0,z.A)(["\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #0a0a0a;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n"]))),yr=F.A.div(ut||(ut=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 1.5rem;\n  padding: 0.45rem 0;\n  border-bottom: 1px dashed #e5e7eb;\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]))),jr=(F.A.span(gt||(gt=(0,z.A)(["\n  font-weight: 600;\n  color: #0a0a0a;\n  flex-shrink: 0;\n  white-space: nowrap;\n  max-width: 45%;\n"]))),F.A.span(bt||(bt=(0,z.A)(["\n  color: #0a0a0a;\n  text-align: right;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  flex: 1;\n  min-width: 0;\n  line-height: 1.5;\n"])))),wr=()=>{const{token:n,user:e,userDetail:t,hasPermission:r}=(0,S.useContext)(se.cy),o=null===e||void 0===e?void 0:e.username,{showToast:a}=(0,S.useContext)(ht.$o),[i,s]=(0,S.useState)([]),[l,d]=(0,S.useState)(!0),[c,p]=(0,S.useState)(null),[x,u]=(0,S.useState)([]),[g,b]=(0,S.useState)(null),[h,m]=(0,S.useState)(null),[f,v]=(0,S.useState)(null),[y,j]=(0,S.useState)(new Set),w=(null===t||void 0===t?void 0:t.user_id)||(null===e||void 0===e?void 0:e.id),k=n=>{const e=w||"anon";return"".concat(n,"_").concat(e)},z=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const t=localStorage.getItem(k(n));return null!==t?JSON.parse(t):e}catch(c){return e}},F=(n,e)=>{try{localStorage.setItem(k(n),JSON.stringify(e)),"orders_dbSource"===n&&localStorage.setItem(n,e)}catch(c){}},[E,T]=(0,S.useState)(()=>z("orders_globalFilter","")),[$,O]=(0,S.useState)(()=>z("orders_garantFilter","")),[M,R]=(0,S.useState)(()=>z("orders_druhFilter","")),[H,V]=(0,S.useState)(()=>z("orders_isCollapsed",!1)),[Z,K]=(0,S.useState)(()=>z("orders_isStatsCollapsed",!0)),[B,Y]=(0,S.useState)(()=>z("orders_isFilterCollapsed",!1)),[W,U]=(0,S.useState)(()=>z("orders_sorting",[{id:"datum_p",desc:!0}])),[J,q]=(0,S.useState)({}),{setProgress:G,start:Q,done:X,reset:nn}=(0,S.useContext)(_.z),[en,rn]=(0,S.useState)(!1),[ln,dn]=(0,S.useState)(null),[cn,pn]=(0,S.useState)(!1),[un,gn]=(0,S.useState)(!1),[bn,hn]=(0,S.useState)(!1),[mn,fn]=(0,S.useState)(!1),vn=(new Date).getFullYear(),[yn,jn]=(0,S.useState)(()=>z("orders_yearFilter",vn.toString())),[wn,kn]=(0,S.useState)(()=>z("orders_selectedMonth","last-quarter")),[An,zn]=(0,S.useState)(()=>{const n=z("orders_selectedMonth","last-quarter");return n&&!["all","last-month","last-quarter","last-half"].includes(n)}),[Sn,Cn]=(0,S.useState)(()=>{const n=z("orders_pageSize",null);return n?parseInt(n,10):25}),[_n,Pn]=(0,S.useState)(()=>{const n=z("orders_pageIndex",null);return n?parseInt(n,10):0});(0,S.useEffect)(()=>{F("orders_pageSize",Sn.toString())},[Sn]),(0,S.useEffect)(()=>{F("orders_pageIndex",_n.toString())},[_n]);const[Nn,Fn]=(0,S.useState)(()=>z("orders_dbSource","objednavky0123")),[Dn,In]=(0,S.useState)(!1),[Ln,En]=(0,S.useState)(!1),[Tn,$n]=(0,S.useState)(!1),[On,Mn]=(0,S.useState)(!1),[Rn,Hn]=(0,S.useState)(!1),[Vn,Zn]=(0,S.useState)(!1),Kn=(0,S.useRef)(null),Bn=(0,S.useRef)(null),Yn=(0,S.useCallback)(n=>{if(Bn.current=n,n){const e=()=>{Hn(!0)},t=()=>{Hn(!1)};return n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t),()=>{n.removeEventListener("mouseenter",e),n.removeEventListener("mouseleave",t)}}},[]),Wn=(0,S.useCallback)(n=>{if(Kn.current=n,n){const e=()=>{const e=n.scrollLeft,t=n.scrollWidth-n.clientWidth,r=e<t-5;In(e>5),En(r),$n(e>1),Mn(e<t-1)};setTimeout(e,100);const t=()=>{e()};return n.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",e),()=>{n.removeEventListener("scroll",t),window.removeEventListener("resize",e)}}},[]);(0,S.useEffect)(()=>{try{localStorage.setItem("orders_dbSource",Nn)}catch(c){}},[]);const Un=(0,S.useMemo)(()=>"objednavky,objednavky0103,objednavky0121,objednavky0123".split(",").map(n=>n.trim()),[]),Jn=(0,S.useCallback)(n=>{if("objednavky"===n)return"pripojene_dokumenty";const e=n.match(/^objednavky(\d+.*)$/);return e?"pripojene_odokumenty".concat(e[1]):"pripojene_odokumenty0123"},[]),[qn,Gn]=(0,S.useState)(!1),Qn=(0,S.useRef)(null),[Xn,ne]=(0,S.useState)(!1),ee=(0,S.useRef)(null),te=(0,S.useMemo)(()=>{const n=[];for(let e=vn;e>=2016;e--)n.push(e.toString());return n.push("V\u0161echny roky"),n},[vn]),re=((0,S.useMemo)(()=>""!==E||""!==$||""!==M||yn!==vn.toString()||un||bn||mn,[E,$,M,yn,vn,un,bn,mn]),n=>{T(n),F("orders_globalFilter",n)}),[oe,ae]=(0,S.useState)(!1),ie=(0,S.useRef)(null),de=async e=>{if(!n||!o)return void a("Nejste p\u0159ihl\xe1\u0161eni",{type:"error"});try{if(on.A.clear(),w){const n="orders_cache_".concat(w,"_").concat(e);localStorage.removeItem(n)}}catch(i){}Fn(e),F("orders_dbSource",e),ae(!1),a("\ud83d\udd04 P\u0159ep\xedn\xe1m na datab\xe1zi ".concat(e,"..."),{type:"info",duration:2e3});const t=setTimeout(()=>{d(!1),X(),a("\u23f0 Na\u010d\xedt\xe1n\xed trv\xe1 p\u0159\xedli\u0161 dlouho, zkuste to znovu",{type:"error"})},3e4),r=performance.now();try{d(!0),Q(),G(10);const{yearFrom:t,yearTo:i}=_e(yn),l=e,c=Jn(l);let p;G(20),p=await(0,P.rX)({yearFrom:t,yearTo:i,token:n,username:o,tabulkaObj:l,tabulkaOpriloh:c});const x=performance.now(),u=Math.round(x-r);if(b("database"),m(new Date),v(u),G(60),G(70),p&&Array.isArray(p)){const n=Ce(p).map(n=>(0,A.A)((0,A.A)({},n),{},{prilohy:parseInt(n.prilohy,10)||0,cislo_lp:n.cislo_lp,subRows:[{Partner:["<strong>Partner: ".concat(n.partner_nazev||"neuvedeno","</strong>"),"Adresa: ".concat(n.partner_adresa||"neuvedeno"),"I\u010c: ".concat(n.partner_ic||"neuvedeno")],"Transportn\xed technika":["Transportn\xed: ".concat(n.tt_vyrc||"neuvedeno"),"Dopl\u0148uj\xedc\xed info: ".concat(n.tt_dinfo||"neuvedeno")]},{"Zve\u0159ejn\u011bno v registru":{title:"Zve\u0159ejn\u011bno v registru".concat("Ano"===n.zverejnit?" \u2714":""),details:["<strong>Datum zve\u0159ejn\u011bn\xed:</strong> ".concat(n.dt_zverejneni||"neuvedeno"),"<strong>IDRS:</strong> ".concat(n.idds||"neuvedeno")],background:"Ano"===n.zverejnit&&"00.00.0000"===n.dt_zverejneni?"lightcoral":""},"Auto\u0159i":["<strong>Vytvo\u0159il:</strong> ".concat(n.userCreator||"neuvedeno"," dne ").concat(n.dt_pridani),"<strong>Aktualizoval:</strong> ".concat(n.userUpdater||"neuvedeno"," dne ").concat(n.dt_modifikace)]},{"Obsah a pozn\xe1mka":["Obsah: ".concat(n.obsah||"neuvedeno"),"Pozn\xe1mka: ".concat(n.poznamka||"neuvedeno")]}]}));G(80),s(n),G(90),await new Promise(n=>setTimeout(n,600)),d(!1),X(),a("\u2705 Na\u010dteno ".concat(p.length," objedn\xe1vek z datab\xe1ze ").concat(l),{type:"success",duration:4e3})}else s([]),d(!1),X(),a("\u26a0\ufe0f Datab\xe1ze ".concat(l," neobsahuje \u017e\xe1dn\xe1 data"),{type:"warning"})}catch(i){clearTimeout(t),p((0,P.xU)(i)||"Nepoda\u0159ilo se na\u010d\xedst data z vybran\xe9 datab\xe1ze."),d(!1),X(),a("\u274c Chyba p\u0159i na\u010d\xedt\xe1n\xed dat",{type:"error"})}finally{clearTimeout(t)}};(0,S.useEffect)(()=>{const n=n=>{ie.current&&!ie.current.contains(n.target)&&ae(!1)};return oe&&document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[oe]),(0,S.useEffect)(()=>{(async()=>{if(n&&o)try{const e=await(0,P.Xi)({token:n,username:o});u(Array.isArray(e)?e:[])}catch(e){}})()},[n,o]);(0,S.useEffect)(()=>{if(!qn)return;const n=n=>{Qn.current&&!Qn.current.contains(n.target)&&Gn(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[qn]),(0,S.useEffect)(()=>{if(!Xn)return;const n=n=>{ee.current&&!ee.current.contains(n.target)&&ne(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[Xn]),(0,S.useEffect)(()=>{if(!oe)return;const n=n=>{ie.current&&!ie.current.contains(n.target)&&ae(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[oe]);const pe=n=>{"show-more"!==n?"show-less"!==n?(w&&on.A.clear(),kn(n),F("orders_selectedMonth",n),ne(!1)):zn(!1):zn(!0)},xe=(0,S.useCallback)(n=>n&&"string"===typeof n?n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",[]),ue=(0,S.useCallback)(n=>{if(!n||"string"!==typeof n)return"neuvedeno";const e=n.match(/\b(LPPT|LPZOS|LPIA|LPL|LPN|LPR|LPP|LPT|LPIT)\s*\d+(?:\/\d+)?\b/i);return e?e[0].split("/")[0].replace(/\s+/g,"").replace(/(\D)0+(\d)/,"$1$2"):"neuvedeno"},[]),ge=(0,S.useCallback)((n,e,t,r,o,a,i)=>n.filter(n=>{var s;const l=Object.values(n).some(n=>xe(String(n)).includes(xe(e))),d=null===(s=n.subRows)||void 0===s?void 0:s.some(n=>Object.values(n).some(n=>xe(String(n)).includes(xe(e)))),c=!t||xe(n.garant)===xe(t),p=!r||xe(n.druh_sml)===xe(r),x=!o||"Ano"===n.faktura,u=!a||"Ano"===n.pokladni_dok,g=!i||"Ano"===n.zverejnit;return(l||d)&&c&&p&&x&&u&&g}),[xe]),be=(0,S.useMemo)(()=>ge(i,E,$,M,un,bn,mn),[i,E,$,M,un,bn,mn,ge]),he=(0,S.useMemo)(()=>be.reduce((n,e)=>n+(parseFloat(e.cena_rok)||0),0),[be]),me=(0,S.useMemo)(()=>be.length,[be]),fe=(0,S.useMemo)(()=>be.filter(n=>"Ano"===n.faktura).length,[be]),ve=(0,S.useMemo)(()=>be.filter(n=>"Ano"===n.pokladni_dok).length,[be]),ye=(0,S.useMemo)(()=>be.filter(n=>"Ano"===n.zverejnit).length,[be]),je=(0,S.useMemo)(()=>be.reduce((n,e)=>n+(parseInt(e.prilohy,10)||0),0),[be]),we=(0,S.useMemo)(()=>i.reduce((n,e)=>n+(parseFloat(e.cena_rok)||0),0),[i]),ke=(0,S.useMemo)(()=>i.length,[i]),Ae=(0,S.useMemo)(()=>0===y.size?0:be.filter(n=>y.has(n.id)).reduce((n,e)=>n+(parseFloat(e.cena_rok)||0),0),[be,y]),ze=(0,S.useCallback)(n=>{if(n){const n=new Set(be.map(n=>n.id));j(n)}else j(new Set)},[be]),Se=(0,S.useCallback)((n,e)=>{j(t=>{const r=new Set(t);return e?r.add(n):r.delete(n),r})},[]),Ce=(0,S.useCallback)(n=>n.map(n=>{let e="neuvedeno";if(n.objMetaData&&""!==n.objMetaData.trim())try{e=JSON.parse(n.objMetaData).cislo_lp||"neuvedeno"}catch(t){}return"neuvedeno"===e&&n.poznamka&&(e=ue(n.poznamka)),(0,A.A)((0,A.A)({},n),{},{garant:n.garant||"neuvedeno",druh_sml:n.druh_sml||"neuvedeno",cislo_lp:e})}),[ue]),_e=(0,S.useCallback)((n,e)=>{const t="V\u0161echny roky"===n?(new Date).getFullYear():parseInt(n,10);if("V\u0161echny roky"===n)return{yearFrom:"2016-01-01",yearTo:"2099-12-31"};if(e>="1"&&e<="12"){const n=parseInt(e,10),r=new Date(t,n,0).getDate();return{yearFrom:"".concat(t,"-").concat(String(n).padStart(2,"0"),"-01"),yearTo:"".concat(t,"-").concat(String(n).padStart(2,"0"),"-").concat(r)}}if("1-3"===e)return{yearFrom:"".concat(t,"-01-01"),yearTo:"".concat(t,"-03-31")};if("4-6"===e)return{yearFrom:"".concat(t,"-04-01"),yearTo:"".concat(t,"-06-30")};if("7-9"===e)return{yearFrom:"".concat(t,"-07-01"),yearTo:"".concat(t,"-09-30")};if("10-12"===e)return{yearFrom:"".concat(t,"-10-01"),yearTo:"".concat(t,"-12-31")};const r=new Date;if("last-month"===e){const n=new Date(r.getFullYear(),r.getMonth()-1,1),e=new Date(r.getFullYear(),r.getMonth(),0);return{yearFrom:"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),yearTo:"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}}if("last-quarter"===e){const n=new Date(r.getFullYear(),r.getMonth()-3,1);return{yearFrom:"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),yearTo:"".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0"))}}if("last-half"===e){const n=new Date(r.getFullYear(),r.getMonth()-6,1);return{yearFrom:"".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),yearTo:"".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0"))}}return{yearFrom:"".concat(t,"-01-01"),yearTo:"".concat(t,"-12-31")}},[]);(0,S.useEffect)(()=>{(async()=>{if(!n||!o)return;const e=performance.now();try{d(!0),Q(),G(20);const{yearFrom:t,yearTo:r}=_e(yn,wn),a=Nn||"objednavky0123",i=Jn(a);let l;if(w){const s=await on.A.getOrders(w,async()=>await(0,P.rX)({yearFrom:t,yearTo:r,token:n,username:o,tabulkaObj:a,tabulkaOpriloh:i}),{yearFrom:t,yearTo:r,type:"old-orders",dbSource:a});l=s.data;const d=performance.now(),c=Math.round(d-e);b(s.fromCache?"cache":"database"),m(new Date),v(c)}else{l=await(0,P.rX)({yearFrom:t,yearTo:r,token:n,username:o,tabulkaObj:a,tabulkaOpriloh:i});const s=performance.now(),d=Math.round(s-e);b("database"),m(new Date),v(d)}G(60);const c=Array.isArray(l)?Ce(l).map(n=>(0,A.A)((0,A.A)({},n),{},{prilohy:parseInt(n.prilohy,10)||0,cislo_lp:n.cislo_lp,subRows:[{Partner:["<strong>Partner: ".concat(n.partner_nazev||"neuvedeno","</strong>"),"Adresa: ".concat(n.partner_adresa||"neuvedeno"),"I\u010c: ".concat(n.partner_ic||"neuvedeno")],"Transportn\xed technika":["Transportn\xed: ".concat(n.tt_vyrc||"neuvedeno"),"Dopl\u0148uj\xedc\xed info: ".concat(n.tt_dinfo||"neuvedeno")]},{"Zve\u0159ejn\u011bno v registru":{title:"Zve\u0159ejn\u011bno v registru".concat("Ano"===n.zverejnit?" \u2714":""),details:["<strong>Datum zve\u0159ejn\u011bn\xed:</strong> ".concat(n.dt_zverejneni||"neuvedeno"),"<strong>IDRS:</strong> ".concat(n.idds||"neuvedeno")],background:"Ano"===n.zverejnit&&"00.00.0000"===n.dt_zverejneni?"lightcoral":""},"Auto\u0159i":["<strong>Vytvo\u0159il:</strong> ".concat(n.userCreator||"neuvedeno"," dne ").concat(n.dt_pridani),"<strong>Aktualizoval:</strong> ".concat(n.userUpdater||"neuvedeno"," dne ").concat(n.dt_modifikace)]},{"Obsah a pozn\xe1mka":["Obsah: ".concat(n.obsah||"neuvedeno"),"Pozn\xe1mka: ".concat(n.poznamka||"neuvedeno")]}]})):[];G(80),s(c),G(90),await new Promise(n=>setTimeout(n,600)),d(!1),X()}catch(t){try{const n=(0,P.tV)(t)||"";p("chyba_serveru"===n||"server_error"===n?"Chyba na serveru. Zkuste to pros\xedm pozd\u011bji.":(0,P.xU)(t)||"Nepoda\u0159ilo se na\u010d\xedst data.")}catch(r){p((0,P.xU)(t)||"Nepoda\u0159ilo se na\u010d\xedst data.")}try{const n=(0,P.tV)(t)||"";if("chyba_serveru"===n||"server_error"===n)try{setTimeout(()=>{nn&&nn()},2200)}catch(r){}}catch(r){}d(!1),X()}})()},[yn,wn,X,Ce,G,Q,n,o,w,Jn,Nn,_e]),(0,S.useEffect)(()=>{F("orders_sorting",W)},[W]);const Pe=n=>isNaN(n)?"neuvedeno":"".concat(Number(n).toLocaleString("cs-CZ"),",- K\u010d"),Ne=(0,S.useCallback)((n,e)=>{if(!e)return n;const t=new RegExp("(".concat(e,")"),"gi");return n.replace(t,"<mark>$1</mark>")},[]),Fe=(0,S.useCallback)((n,e)=>"string"!==typeof n?n:(0,L.jsx)("span",{dangerouslySetInnerHTML:{__html:Ne(n,e)}}),[Ne]),[De,Ie]=(0,S.useState)({}),[Le,Ee]=(0,S.useState)({}),Te=(0,S.useMemo)(()=>[{id:"select",header:n=>{let{table:e}=n;const t=be.map(n=>n.id),r=t.length>0&&t.every(n=>y.has(n)),o=t.some(n=>y.has(n));return(0,L.jsx)("input",{type:"checkbox",checked:r,ref:n=>{n&&(n.indeterminate=o&&!r)},onChange:n=>ze(n.target.checked),title:"Vybrat v\u0161e",style:{cursor:"pointer"}})},size:50,cell:n=>{let{row:e}=n;return(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)("input",{type:"checkbox",checked:y.has(e.original.id),onChange:n=>{n.stopPropagation(),Se(e.original.id,n.target.checked)},onClick:n=>n.stopPropagation(),style:{cursor:"pointer"}})})}},{id:"expander",header:n=>{let{table:e}=n;const t=e.getIsAllRowsExpanded();return(0,L.jsx)(br,{onClick:()=>e.toggleAllRowsExpanded(),title:t?"SBALIT V\u0160E":"ROZBALIT V\u0160E",children:(0,L.jsx)(D.g,{icon:t?I.EZy:I.QLR})})},size:50,cell:n=>{let{row:e}=n;return(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)(br,{onClick:n=>{n.stopPropagation(),e.toggleExpanded()},title:e.getIsExpanded()?"SBALIT":"ROZBALIT",children:(0,L.jsx)(D.g,{icon:e.getIsExpanded()?I.EZy:I.QLR})})})}},{accessorKey:"datum_p",header:"DATUM",cell:n=>n.getValue(),sortingFn:(n,e)=>{const[t,r,o]=n.original.datum_p.split(".").map(Number),[a,i,s]=e.original.datum_p.split(".").map(Number);return new Date(o,r-1,t)-new Date(s,i-1,a)}},{accessorKey:"faktura",header:(0,L.jsx)("span",{title:"Faktura",children:"F"}),size:50,cell:n=>(0,L.jsx)("div",{className:"centered-cell",children:"Ano"===n.getValue()?"\u2714":""})},{accessorKey:"pokladni_dok",header:(0,L.jsx)("span",{title:"Pokladn\xed doklad",children:"P"}),size:50,cell:n=>(0,L.jsx)("div",{className:"centered-cell",children:"Ano"===n.getValue()?"\u2714":""})},{accessorKey:"zverejnit",header:(0,L.jsx)("span",{title:"Zve\u0159ejn\u011bno v registru",children:"R"}),size:50,cell:n=>(0,L.jsx)("div",{className:"centered-cell",children:"Ano"===n.getValue()?"\u2714":""})},{accessorKey:"evidencni_c",header:"EV.\u010c\xcdSLO",cell:n=>Fe(n.getValue(),E)},{accessorKey:"garant",header:"\xdaSEK",cell:n=>n.getValue()},{accessorKey:"userCreator",header:"VYTVO\u0158IL",cell:n=>Fe(n.getValue(),E)},{accessorKey:"druh_sml",header:"DRUH",cell:n=>n.getValue()},{accessorKey:"partner_nazev",header:"PARTNER",cell:n=>Fe(n.getValue(),E)},{accessorKey:"cena",header:"CENA",cell:n=>(0,L.jsx)("div",{style:{textAlign:"right"},children:Pe(n.getValue())})},{accessorKey:"cena_rok",header:"CENA S DPH",cell:n=>(0,L.jsx)("div",{style:{textAlign:"right"},children:Pe(n.getValue())})},{accessorKey:"cislo_lp",header:"LP",cell:n=>(0,L.jsx)("div",{className:"centered-cell",children:n.getValue()})},{accessorKey:"prilohy",header:(0,L.jsx)(D.g,{icon:I.WMI,title:"P\u0159\xedlohy"}),size:50,cell:n=>{let{row:e}=n;return(0,L.jsx)("div",{className:"centered-cell",children:e.original.prilohy})}},{accessorKey:"actions",header:"AKCE",size:90,cell:n=>{let{row:e}=n;return(0,L.jsxs)("div",{className:"action-icons view-only-disabled",title:"Pouze n\xe1hled",children:[(0,L.jsx)("div",{className:"view-only-text",children:"VIEW ONLY"}),(0,L.jsxs)("div",{className:"icons-row",children:[(0,L.jsx)("button",{className:"action-button",disabled:!0,children:(0,L.jsx)(D.g,{icon:I.MT7})}),(0,L.jsx)("button",{className:"action-button",disabled:!0,children:(0,L.jsx)(D.g,{icon:I.jPR})}),(0,L.jsx)("button",{className:"action-button",disabled:!0,children:(0,L.jsx)(D.g,{icon:I.h8M})}),(0,L.jsx)("button",{className:"action-button",disabled:!0,children:(0,L.jsx)(D.g,{icon:I.yLS})})]})]})}}],[Fe,E,y,ze,Se]),$e=(0,an.N4)({data:be,columns:Te,state:{globalFilter:E,sorting:W,expanded:J,pagination:{pageIndex:_n,pageSize:Sn}},onGlobalFilterChange:T,onSortingChange:U,onExpandedChange:q,onPaginationChange:n=>{if("function"===typeof n){const e=n({pageIndex:_n,pageSize:Sn});Pn(e.pageIndex),Cn(e.pageSize)}},getCoreRowModel:(0,sn.HT)(),getSortedRowModel:(0,sn.h5)(),getPaginationRowModel:(0,sn.kW)(),getExpandedRowModel:(0,sn.D0)(),getRowCanExpand:n=>{var e;return(null===(e=n.original.subRows)||void 0===e?void 0:e.length)>0},manualPagination:!1}),Oe=e=>{var t;return(0,L.jsx)("tr",{children:(0,L.jsx)("td",{colSpan:Te.length,style:{padding:0},children:(0,L.jsx)(hr,{children:(0,L.jsxs)(mr,{children:[null===(t=e.original.subRows)||void 0===t?void 0:t.map((n,t)=>(0,L.jsx)(S.Fragment,{children:Object.entries(n).map(n=>{let[e,t]=n;const r="Obsah a pozn\xe1mka"===e;return"Zve\u0159ejn\u011bno v registru"===e?(0,L.jsxs)(fr,{children:[(0,L.jsx)(vr,{children:t.title}),t.details.map((n,e)=>(0,L.jsx)(yr,{children:(0,L.jsx)(jr,{style:{textAlign:"left",width:"100%"},dangerouslySetInnerHTML:{__html:Ne(n,E)}})},e))]},e):(0,L.jsxs)(fr,{$fullWidth:r,children:[(0,L.jsx)(vr,{children:e}),t.map((n,e)=>(0,L.jsx)(yr,{children:(0,L.jsx)(jr,{style:{textAlign:"left",width:"100%"},dangerouslySetInnerHTML:{__html:Ne(n,E)}})},e))]},e)})},"".concat(e.id,"-subrow-").concat(t))),(0,L.jsxs)(fr,{$fullWidth:!0,children:[(0,L.jsxs)(vr,{children:[(0,L.jsxs)("span",{children:["P\u0159\xedlohy (",e.original.prilohy,")"]}),e.original.prilohy>0&&(0,L.jsx)("button",{onClick:()=>(async e=>{try{Ee(n=>(0,A.A)((0,A.A)({},n),{},{[e]:!0}));const t=await(0,P.yD)({id:e,token:n,username:o});Array.isArray(t)?Ie(n=>(0,A.A)((0,A.A)({},n),{},{[e]:t})):Ie(n=>(0,A.A)((0,A.A)({},n),{},{[e]:[]}))}catch(t){Ie(n=>(0,A.A)((0,A.A)({},n),{},{[e]:[]}))}finally{Ee(n=>(0,A.A)((0,A.A)({},n),{},{[e]:!1}))}})(e.original.id),disabled:Le[e.original.id],title:"Na\u010d\xedst p\u0159\xedlohy",style:{padding:"4px",backgroundColor:"transparent",color:"#3b82f6",border:"none",cursor:"pointer",fontSize:"1.125rem"},children:(0,L.jsx)(D.g,{icon:I.cbP})})]}),De[e.original.id]&&De[e.original.id].length>0?(0,L.jsx)("div",{children:De[e.original.id].map((n,e)=>{var t;const r=n.soubor||"",o=null===(t=r.split(".").pop())||void 0===t?void 0:t.toLowerCase(),a=["pdf","jpg","jpeg","png","gif","svg","webp","bmp","txt","html","htm","xml","json","csv","mp4","webm","ogg","mp3","wav"].includes(o);return(0,L.jsx)(yr,{children:(0,L.jsxs)(jr,{style:{textAlign:"left",width:"100%"},children:[(0,L.jsx)("a",(0,A.A)((0,A.A)({href:"".concat("https://eeo.zachranka.cz/prilohy/").concat(n.soubor),target:"_blank",rel:"noopener noreferrer"},!a&&{download:r}),{},{style:{color:"#3b82f6",textDecoration:"underline",fontWeight:600},children:n.soubor})),n.popis&&(0,L.jsxs)("span",{style:{color:"#64748b",marginLeft:"0.5rem"},children:[": ",n.popis]})]})},e)})}):(0,L.jsx)(yr,{children:(0,L.jsx)(jr,{style:{textAlign:"left",color:"#9ca3af"},children:De[e.original.id]?"\u017d\xe1dn\xe9 p\u0159\xedlohy":"P\u0159\xedlohy nebyly na\u010dteny"})})]})]})})})})};if(c)return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(xn,{}),(0,L.jsx)("div",{className:"error-message",children:c})]});return(0,L.jsxs)("div",{className:"orders-page ".concat("view-only"),style:{position:"relative"},children:[(0,L.jsx)(xn,{}),(0,L.jsxs)(Lt,{$visible:l,children:[(0,L.jsx)(Et,{$visible:l}),(0,L.jsx)(Tt,{$visible:l,children:"Na\u010d\xedt\xe1n\xed objedn\xe1vek"}),(0,L.jsx)($t,{$visible:l,children:"Zpracov\xe1v\xe1m data z datab\xe1ze..."})]}),(0,L.jsxs)(Zt,{$blurred:l,children:[!1,(0,L.jsxs)(ft,{children:[(0,L.jsxs)(jt,{children:[(0,L.jsxs)(wt,{children:[(0,L.jsx)(D.g,{icon:I.BEE}),"Rok:"]}),(0,L.jsxs)(zt,{ref:Qn,children:[(0,L.jsxs)(St,{onClick:()=>{Gn(n=>!n)},children:[(0,L.jsx)("span",{children:yn}),(0,L.jsx)(D.g,{icon:qn?I.w2A:I.Jt$})]}),qn&&(0,L.jsx)(Ct,{children:te.map(e=>(0,L.jsx)(_t,{onClick:()=>(async e=>{const t=performance.now();try{jn(e),F("orders_yearFilter",e),Gn(!1),d(!0),Q(),G(20);const r="V\u0161echny roky"===e?"2016-01-01":"".concat(e,"-01-01"),a="V\u0161echny roky"===e?"2099-12-31":"".concat(e,"-12-31"),i=Nn||"objednavky0123",l=Jn(i);let c;if(w){const e=await on.A.getOrders(w,async()=>await(0,P.rX)({yearFrom:r,yearTo:a,token:n,username:o,tabulkaObj:i,tabulkaOpriloh:l}),{yearFrom:r,yearTo:a,type:"old-orders",dbSource:i});c=e.data;const s=performance.now(),d=Math.round(s-t);b(e.fromCache?"cache":"database"),m(new Date),v(d)}else{c=await(0,P.rX)({yearFrom:r,yearTo:a,token:n,username:o,tabulkaObj:i,tabulkaOpriloh:l});const e=performance.now(),s=Math.round(e-t);b("database"),m(new Date),v(s)}G(60);const p=Array.isArray(c)?Ce(c).map(n=>(0,A.A)((0,A.A)({},n),{},{prilohy:parseInt(n.prilohy,10)||0,cislo_lp:n.cislo_lp,subRows:[{Partner:["<strong>Partner: ".concat(n.partner_nazev||"neuvedeno","</strong>"),"Adresa: ".concat(n.partner_adresa||"neuvedeno"),"I\u010c: ".concat(n.partner_ic||"neuvedeno")],"Transportn\xed technika":["Transportn\xed: ".concat(n.tt_vyrc||"neuvedeno"),"Dopl\u0148uj\xedc\xed info: ".concat(n.tt_dinfo||"neuvedeno")]},{"Zve\u0159ejn\u011bno v registru":{title:"Zve\u0159ejn\u011bno v registru".concat("Ano"===n.zverejnit?" \u2714":""),details:["<strong>Datum zve\u0159ejn\u011bn\xed:</strong> ".concat(n.dt_zverejneni||"neuvedeno"),"<strong>IDRS:</strong> ".concat(n.idds||"neuvedeno")],background:"Ano"===n.zverejnit&&"00.00.0000"===n.dt_zverejneni?"lightcoral":""},"Auto\u0159i":["<strong>Vytvo\u0159il:</strong> ".concat(n.userCreator||"neuvedeno"," dne ").concat(n.dt_pridani),"<strong>Aktualizoval:</strong> ".concat(n.userUpdater||"neuvedeno"," dne ").concat(n.dt_modifikace)]},{"Obsah a pozn\xe1mka":["Obsah: ".concat(n.obsah||"neuvedeno"),"Pozn\xe1mka: ".concat(n.poznamka||"neuvedeno")]}]})):[];G(80),s(p),G(90),await new Promise(n=>setTimeout(n,600)),d(!1),X()}catch(r){p("Nepoda\u0159ilo se na\u010d\xedst data."),d(!1),X()}})(e),children:e},e))})]}),(0,L.jsxs)(kt,{children:[(0,L.jsx)(D.g,{icon:I.BEE}),"Obdob\xed:"]}),(0,L.jsxs)(At,{ref:ee,children:[(0,L.jsxs)(Pt,{onClick:()=>{ne(n=>!n)},children:[(0,L.jsx)("span",{children:(Me=wn,{all:"V\u0161echny m\u011bs\xedce","last-month":"Posledn\xed m\u011bs\xedc","last-quarter":"Posledn\xed kvart\xe1l","last-half":"Posledn\xed p\u016flrok",1:"Leden",2:"\xdanor",3:"B\u0159ezen",4:"Duben",5:"Kv\u011bten",6:"\u010cerven",7:"\u010cervenec",8:"Srpen",9:"Z\xe1\u0159\xed",10:"\u0158\xedjen",11:"Listopad",12:"Prosinec","1-3":"Q1 (Leden-B\u0159ezen)","4-6":"Q2 (Duben-\u010cerven)","7-9":"Q3 (\u010cervenec-Z\xe1\u0159\xed)","10-12":"Q4 (\u0158\xedjen-Prosinec)"}[Me]||Me)}),(0,L.jsx)(D.g,{icon:Xn?I.w2A:I.Jt$})]}),Xn&&(0,L.jsxs)(Nt,{children:[(0,L.jsx)(Ft,{onClick:()=>pe("all"),children:"V\u0161echny m\u011bs\xedce"}),(0,L.jsx)(Ft,{onClick:()=>pe("last-month"),children:"Posledn\xed m\u011bs\xedc"}),(0,L.jsx)(Ft,{onClick:()=>pe("last-quarter"),children:"Posledn\xed kvart\xe1l"}),(0,L.jsx)(Ft,{onClick:()=>pe("last-half"),children:"Posledn\xed p\u016flrok"}),An?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ft,{separator:!0,disabled:!0,children:"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"}),(0,L.jsx)(Ft,{onClick:()=>pe("1"),children:"Leden"}),(0,L.jsx)(Ft,{onClick:()=>pe("2"),children:"\xdanor"}),(0,L.jsx)(Ft,{onClick:()=>pe("3"),children:"B\u0159ezen"}),(0,L.jsx)(Ft,{onClick:()=>pe("4"),children:"Duben"}),(0,L.jsx)(Ft,{onClick:()=>pe("5"),children:"Kv\u011bten"}),(0,L.jsx)(Ft,{onClick:()=>pe("6"),children:"\u010cerven"}),(0,L.jsx)(Ft,{onClick:()=>pe("7"),children:"\u010cervenec"}),(0,L.jsx)(Ft,{onClick:()=>pe("8"),children:"Srpen"}),(0,L.jsx)(Ft,{onClick:()=>pe("9"),children:"Z\xe1\u0159\xed"}),(0,L.jsx)(Ft,{onClick:()=>pe("10"),children:"\u0158\xedjen"}),(0,L.jsx)(Ft,{onClick:()=>pe("11"),children:"Listopad"}),(0,L.jsx)(Ft,{onClick:()=>pe("12"),children:"Prosinec"}),(0,L.jsx)(Ft,{separator:!0,disabled:!0,children:"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"}),(0,L.jsx)(Ft,{onClick:()=>pe("1-3"),children:"Q1 (Leden-B\u0159ezen)"}),(0,L.jsx)(Ft,{onClick:()=>pe("4-6"),children:"Q2 (Duben-\u010cerven)"}),(0,L.jsx)(Ft,{onClick:()=>pe("7-9"),children:"Q3 (\u010cervenec-Z\xe1\u0159\xed)"}),(0,L.jsx)(Ft,{onClick:()=>pe("10-12"),children:"Q4 (\u0158\xedjen-Prosinec)"}),(0,L.jsx)(Ft,{separator:!0,disabled:!0,children:"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"}),(0,L.jsx)(Ft,{action:!0,onClick:()=>pe("show-less"),children:"\u2796 Zobrazit m\xe9n\u011b"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ft,{separator:!0,disabled:!0,children:"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"}),(0,L.jsx)(Ft,{action:!0,onClick:()=>pe("show-more"),children:"\u2795 Zobrazit dal\u0161\xed..."})]})]})]}),(0,L.jsxs)(wt,{style:{marginLeft:"2rem"},children:[(0,L.jsx)(D.g,{icon:I.hem}),"Datab\xe1ze:"]}),(0,L.jsxs)(zt,{ref:ie,children:[(0,L.jsxs)(St,{onClick:()=>{ae(n=>!n)},children:[(0,L.jsx)("span",{style:{fontFamily:"monospace",fontSize:"0.9rem"},children:Nn}),(0,L.jsx)(D.g,{icon:oe?I.w2A:I.Jt$})]}),oe&&(0,L.jsx)(Ct,{children:Un.map(n=>(0,L.jsxs)(_t,{onClick:()=>de(n),style:{fontFamily:"monospace",fontSize:"0.9rem",background:n===Nn?"rgba(255, 255, 255, 0.2)":"transparent"},children:[n,n===Nn&&" \u2713"]},n))})]}),(0,L.jsxs)(Dt,{children:[(0,L.jsx)(It,{onClick:()=>de(Nn),title:"Aktualizovat seznam objedn\xe1vek (force reload z datab\xe1ze)",disabled:l,children:(0,L.jsx)(D.g,{icon:I.OtC,spin:l})}),r&&(r("ORDER_MANAGE")||r("ORDER_IMPORT"))&&(0,L.jsx)(It,{onClick:async()=>{0!==y.size?pn(!0):a("Nevybrali jste \u017e\xe1dn\xe9 objedn\xe1vky k p\u0159evodu",{type:"warning"})},disabled:0===y.size,title:0===y.size?"Vyberte objedn\xe1vky k p\u0159evodu":"P\u0159ev\xe9st ".concat(y.size," vybran\xfdch objedn\xe1vek do nov\xe9 DB"),children:(0,L.jsx)(D.g,{icon:I.dmS})})]})]}),(0,L.jsxs)(yt,{children:[g&&(0,L.jsxs)(Kt,{children:[(0,L.jsx)(Bt,{fromCache:"cache"===g,children:(0,L.jsx)(D.g,{icon:"cache"===g?I.b6I:I.hem})}),(0,L.jsxs)("div",{className:"tooltip top","data-icon":"none",children:["cache"===g?"\u26a1 Na\u010dteno z cache (pam\u011bti) - rychl\xe9 zobrazen\xed bez dotazu na datab\xe1zi":"\ud83d\udcbe Na\u010dteno z datab\xe1ze - aktu\xe1ln\xed data p\u0159\xedmo ze serveru",h&&(0,L.jsxs)("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",opacity:.8},children:["\ud83d\udcc5 ",new Date(h).toLocaleTimeString("cs-CZ"),null!==f&&(0,L.jsxs)("span",{style:{marginLeft:"0.5rem"},children:["\u23f1\ufe0f ",f,"ms"]})]})]})]}),"Seznam objedn\xe1vek",(0,L.jsx)(D.g,{icon:I.p4e})]})]}),(0,L.jsx)(vt,{}),(0,L.jsxs)("div",{style:{opacity:l?.6:1,transition:"opacity 0.3s ease"},children:[!H&&(0,L.jsx)(Yt,{children:(0,L.jsxs)(Wt,{children:[(0,L.jsxs)(Ut,{$color:"#4caf50",children:[(0,L.jsxs)("div",{children:[(0,L.jsxs)(nr,{children:[Math.round(we).toLocaleString("cs-CZ"),"\xa0K\u010d"]}),(0,L.jsx)(er,{children:"Celkov\xe1 cena s DPH za obdob\xed"}),(0,L.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#64748b",textAlign:"center",marginBottom:"1rem"},children:["Celkem: ",ke," ",1===ke?"objedn\xe1vka":"objedn\xe1vek"," za obdob\xed"]}),(()=>{if(y.size>0)return(0,L.jsxs)("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(100, 116, 139, 0.2)"},children:[(0,L.jsxs)("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#3b82f6",textAlign:"center",marginBottom:"0.25rem"},children:[Math.round(Ae).toLocaleString("cs-CZ"),"\xa0K\u010d"]}),(0,L.jsxs)("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#3b82f6",textAlign:"center"},children:["Celkov\xe1 cena za vybran\xe9 (",y.size,")"]})]});return(E||$||M||un||bn||mn)&&be.length<i.length?(0,L.jsxs)("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px solid rgba(100, 116, 139, 0.2)"},children:[(0,L.jsxs)("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f59e0b",textAlign:"center",marginBottom:"0.25rem"},children:[Math.round(he).toLocaleString("cs-CZ"),"\xa0K\u010d"]}),(0,L.jsxs)("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#f59e0b",textAlign:"center"},children:["Celkov\xe1 cena za vybran\xe9 (",be.length,")"]})]}):null})()]}),(0,L.jsxs)(tr,{children:[(0,L.jsxs)(rr,{$color:"#ff5722",$bg:"rgba(255, 87, 34, 0.08)",children:[(0,L.jsx)(or,{$color:"#bf360c",children:"P\u0159\xedlohy"}),(0,L.jsx)(ar,{children:je})]}),(0,L.jsxs)(rr,{$color:"#ff9800",$bg:"rgba(255, 152, 0, 0.08)",children:[(0,L.jsx)(or,{$color:"#e65100",children:"S fakturou"}),(0,L.jsx)(ar,{children:fe})]})]})]}),(0,L.jsxs)(Jt,{$color:"#2196f3",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:me}),(0,L.jsx)(Gt,{$color:"#2196f3",children:(0,L.jsx)(D.g,{icon:I.p4e})})]}),(0,L.jsx)(Qt,{children:"Celkov\xfd po\u010det za obdob\xed"})]}),(0,L.jsxs)(Jt,{$color:"#ff5722",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:je}),(0,L.jsx)(Gt,{$color:"#ff5722",children:(0,L.jsx)(D.g,{icon:I.WMI})})]}),(0,L.jsx)(Qt,{children:"P\u0159ipojen\xe9 p\u0159\xedlohy za obdob\xed"})]}),(0,L.jsxs)(Jt,{$color:"#ff9800",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:fe}),(0,L.jsx)(Gt,{$color:"#ff9800",children:(0,L.jsx)(D.g,{icon:I.DO5})})]}),(0,L.jsx)(Qt,{children:"S fakturou za obdob\xed"})]}),(0,L.jsxs)(Jt,{$color:"#9c27b0",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:ve}),(0,L.jsx)(Gt,{$color:"#9c27b0",children:(0,L.jsx)(D.g,{icon:I.E_u})})]}),(0,L.jsx)(Qt,{children:"S pokladn\xedm dokladem za obdob\xed"})]}),(0,L.jsxs)(Jt,{$color:"#3f51b5",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:ye}),(0,L.jsx)(Gt,{$color:"#3f51b5",children:(0,L.jsx)(D.g,{icon:I.Bwz})})]}),(0,L.jsx)(Qt,{children:"Zve\u0159ejn\u011bn\xe9 v registru za obdob\xed"})]}),(0,L.jsxs)(Jt,{$color:"#4caf50",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:0}),(0,L.jsx)(Gt,{$color:"#4caf50",children:(0,L.jsx)(D.g,{icon:I.SGM})})]}),(0,L.jsx)(Qt,{children:"Vy\u0159\xedzen\xe9"})]}),(0,L.jsxs)(Jt,{$color:"#f44336",children:[(0,L.jsxs)(qt,{children:[(0,L.jsx)(Xt,{children:0}),(0,L.jsx)(Gt,{$color:"#f44336",children:(0,L.jsx)(D.g,{icon:I.s0Q})})]}),(0,L.jsx)(Qt,{children:"Nevy\u0159\xedzen\xe9"})]})]})}),(0,L.jsxs)("div",{className:"collapse-line",style:{marginTop:"0.5rem",marginBottom:"2.5rem"},children:[(0,L.jsx)("span",{className:"dashboard-label",children:"Dashboard - p\u0159ehled"}),(0,L.jsx)("hr",{className:"divider-line"}),(0,L.jsx)("button",{className:"collapse-button",onClick:()=>{const n=!H;V(n),F("orders_isCollapsed",n)},children:(0,L.jsx)(D.g,{icon:H?I.Jt$:I.w2A})})]}),!Z&&(0,L.jsx)("div",{className:"orders-boxes",children:(0,L.jsxs)("div",{className:"orders-box stats-box",style:{flex:"1 1 100%"},children:[(0,L.jsxs)("div",{className:"header-with-icon",children:[(0,L.jsx)(D.g,{icon:I.W1p,className:"header-icon-large"}),(0,L.jsx)("h1",{className:"page-title",children:"Statistika objedn\xe1vek"})]}),(0,L.jsx)(ce,{filteredOrders:be,selectedYear:yn,lpsData:x})]})}),(0,L.jsxs)("div",{className:"collapse-line",style:{marginTop:"0.5rem",marginBottom:"2.5rem"},children:[(0,L.jsx)("span",{className:"dashboard-label",children:"Grafy a statistiky"}),(0,L.jsx)("hr",{className:"divider-line"}),(0,L.jsx)("button",{className:"collapse-button",onClick:()=>{const n=!Z;K(n),F("orders_isStatsCollapsed",n)},children:(0,L.jsx)(D.g,{icon:Z?I.Jt$:I.w2A})})]})]}),y.size>0&&(0,L.jsx)("div",{className:"total-orders",children:(0,L.jsxs)("span",{style:{color:"#f59e0b",fontWeight:"bold"},children:["Vybr\xe1no: ",y.size]})}),(0,L.jsxs)("div",{className:"filter-box",style:{display:B?"none":"flex"},children:[(0,L.jsxs)("div",{className:"filter-buttons",children:[(0,L.jsx)("button",{className:"filter-button ".concat(un?"active":""),onClick:()=>gn(n=>!n),title:"Faktura",children:"F"}),(0,L.jsx)("button",{className:"filter-button ".concat(bn?"active":""),onClick:()=>hn(n=>!n),title:"Pokladn\xed doklad",children:"P"}),(0,L.jsx)("button",{className:"filter-button ".concat(mn?"active":""),onClick:()=>fn(n=>!n),title:"Zve\u0159ejnit v registru",children:"R"})]}),(0,L.jsxs)("div",{className:"filter-input-wrapper",children:[(0,L.jsx)("div",{className:"search-icon",children:(0,L.jsx)(D.g,{icon:I.MjD})}),(0,L.jsx)("input",{type:"text",placeholder:"Rychl\xfd filtr...",value:E,onChange:n=>re(n.target.value),className:"filter-input"}),E&&(0,L.jsx)("button",{className:"clear-filter-button",onClick:()=>re(""),"aria-label":"Vy\u010distit",children:"\xd7"})]}),(0,L.jsxs)("div",{className:"filter-group",children:[(0,L.jsxs)("select",{value:$,onChange:n=>(n=>{O(n),F("orders_garantFilter",n)})(n.target.value),className:"filter-select select-with-arrow",children:[(0,L.jsx)("option",{value:"",children:"V\u0161echny \xfaseky"}),[...new Set(i.map(n=>n.garant))].map(n=>(0,L.jsx)("option",{value:n,children:n},n))]}),(0,L.jsxs)("select",{value:M,onChange:n=>(n=>{R(n),F("orders_druhFilter",n)})(n.target.value),className:"filter-select select-with-arrow",children:[(0,L.jsx)("option",{value:"",children:"V\u0161echny druhy"}),[...new Set(i.map(n=>n.druh_sml))].map(n=>(0,L.jsx)("option",{value:n,children:n},n))]})]})]}),(0,L.jsxs)("div",{className:"collapse-line",style:{marginTop:"0.5rem",marginBottom:"2.5rem"},children:[(0,L.jsx)("span",{className:"dashboard-label",children:"Filter objedn\xe1vek"}),(0,L.jsx)("hr",{className:"divider-line"}),(0,L.jsx)("button",{className:"collapse-button",onClick:()=>{const n=!B;Y(n),F("orders_isFilterCollapsed",n)},children:(0,L.jsx)(D.g,{icon:B?I.Jt$:I.w2A})})]}),(0,L.jsx)(ir,{ref:Yn,$showLeftShadow:Tn,$showRightShadow:On,children:(0,L.jsxs)(sr,{ref:Wn,children:[(0,L.jsxs)(cr,{children:[(0,L.jsx)(pr,{children:$e.getHeaderGroups().map(n=>(0,L.jsx)("tr",{children:n.headers.map(n=>{const e=n.column.getCanSort&&n.column.getCanSort(),t=n.column.getIsSorted&&n.column.getIsSorted();let r=null;return"asc"===t?r=(0,L.jsx)("span",{style:{marginLeft:6,opacity:.95},children:(0,L.jsx)(D.g,{icon:I.w2A,style:{fontSize:"12px",color:"#fff"}})}):"desc"===t&&(r=(0,L.jsx)("span",{style:{marginLeft:6,opacity:.95},children:(0,L.jsx)(D.g,{icon:I.Jt$,style:{fontSize:"12px",color:"#fff"}})})),(0,L.jsx)(ur,{style:{width:n.column.getSize?n.column.getSize():void 0},onClick:e?n.column.getToggleSortingHandler():void 0,title:e?"asc"===t?"\u0158azeno vzestupn\u011b \u2013 klik pro sestupn\u011b":"desc"===t?"\u0158azeno sestupn\u011b \u2013 klik pro zru\u0161en\xed":"Klik pro \u0159azen\xed":void 0,children:n.isPlaceholder?null:(0,L.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%"},children:[(0,an.Kv)(n.column.columnDef.header,n.getContext()),r]})},n.id)})},n.id))}),(0,L.jsx)("tbody",{children:$e.getRowModel().rows.map((n,e)=>(0,L.jsxs)(S.Fragment,{children:[(0,L.jsx)(xr,{$isEven:e%2===0,onDoubleClick:()=>n.toggleExpanded(),style:{cursor:"pointer"},children:n.getVisibleCells().map(n=>(0,L.jsx)(gr,{onClick:()=>(n=>{n&&navigator.clipboard.writeText(n).catch(n=>{console.error("Nepoda\u0159ilo se zkop\xedrovat text: ",n)})})(n.getValue()),style:{cursor:"copy"},children:Fe((0,an.Kv)(n.column.columnDef.cell,n.getContext()),E)},n.id))}),n.getIsExpanded()&&Oe(n)]},n.id))})]}),(0,L.jsxs)(Ot,{children:[(0,L.jsxs)(Mt,{children:["Zobrazeno ",$e.getRowModel().rows.length," z ",be.length," objedn\xe1vek",be.length!==i.length&&(0,L.jsxs)("span",{children:[" (filtrov\xe1no z ",i.length,")"]})]}),(0,L.jsxs)(Rt,{children:[(0,L.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,L.jsxs)(Vt,{value:Sn,onChange:n=>{const e=parseInt(n.target.value);Cn(e),Pn(0)},children:[(0,L.jsx)("option",{value:10,children:"10"}),(0,L.jsx)("option",{value:25,children:"25"}),(0,L.jsx)("option",{value:50,children:"50"}),(0,L.jsx)("option",{value:100,children:"100"}),(0,L.jsx)("option",{value:250,children:"250"})]}),(0,L.jsx)(Ht,{onClick:()=>{Pn(0)},disabled:!$e.getCanPreviousPage(),children:"\xab\xab"}),(0,L.jsx)(Ht,{onClick:()=>{Pn(n=>Math.max(0,n-1))},disabled:!$e.getCanPreviousPage(),children:"\u2039"}),(0,L.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",$e.getState().pagination.pageIndex+1," z ",$e.getPageCount()]}),(0,L.jsx)(Ht,{onClick:()=>{Pn(n=>Math.min($e.getPageCount()-1,n+1))},disabled:!$e.getCanNextPage(),children:"\u203a"}),(0,L.jsx)(Ht,{onClick:()=>{Pn($e.getPageCount()-1)},disabled:!$e.getCanNextPage(),children:"\xbb\xbb"})]})]})]})}),(0,C.createPortal)((0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(lr,{$visible:Dn,$tableHovered:Rn,$arrowHovered:Vn,onClick:()=>{const n=Kn.current;if(!n)return;const e=.8*n.clientWidth;n.scrollBy({left:-e,behavior:"smooth"})},onMouseEnter:()=>Zn(!0),onMouseLeave:()=>Zn(!1),disabled:!Dn,"aria-label":"Scrollovat doleva",children:(0,L.jsx)(D.g,{icon:I.Wzs})}),(0,L.jsx)(dr,{$visible:Ln,$tableHovered:Rn,$arrowHovered:Vn,onClick:()=>{const n=Kn.current;if(!n)return;const e=.8*n.clientWidth;n.scrollBy({left:e,behavior:"smooth"})},onMouseEnter:()=>Zn(!0),onMouseLeave:()=>Zn(!1),disabled:!Ln,"aria-label":"Scrollovat doprava",children:(0,L.jsx)(D.g,{icon:I.XkK})})]}),document.body),(0,L.jsx)(L.Fragment,{children:en&&(0,L.jsx)(le,{orderId:ln,onClose:()=>{rn(!1),dn(null)},onOrderUpdated:()=>{de(Nn)}})})]}),(0,L.jsx)(tn,{isOpen:cn,onClose:()=>{pn(!1),j(new Set)},selectedOrderIds:Array.from(y),onImportComplete:()=>{de(Nn),j(new Set),a("Import byl \xfasp\u011b\u0161n\u011b dokon\u010den",{type:"success"})},importFunction:async function(t){let{onProgress:r,onComplete:a,onError:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Nn||"objednavky0123",l=Jn(s);if(!n||!o||null===e||void 0===e||!e.id){const n=new Error("Chyb\xed p\u0159ihla\u0161ovac\xed \xfadaje! Token/username/userId nejsou nastaveny.");throw i&&i(n),n}try{try{return await(0,N.Bp)({token:n,username:o,userId:null===e||void 0===e?void 0:e.id,oldOrderIds:t,tabulkaObj:s,tabulkaOpriloh:l,onProgress:r,onComplete:a,onError:i})}catch(d){const r=await(0,N.Tz)({token:n,username:o,userId:null===e||void 0===e?void 0:e.id,oldOrderIds:t,tabulkaObj:s,tabulkaOpriloh:l});return a&&a({imported_count:r.imported_count,updated_count:r.updated_count,failed_count:r.failed_count,total_count:r.total_count}),r}}catch(c){throw i&&i(c),c}}})]});var Me}}}]);
//# sourceMappingURL=9351.3beaefe6.chunk.js.map