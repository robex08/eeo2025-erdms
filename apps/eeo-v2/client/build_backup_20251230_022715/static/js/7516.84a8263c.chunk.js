/*! For license information please see 7516.84a8263c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[7516],{13190:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},13679:(e,n,t)=>{t.r(n),t.d(n,{default:()=>po});var r,i,o,a,s,l,c,d,p,u,h,m,g,x,f,b,v,y,j,k,w=t(89379),A=t(57528),z=t(65043),_=t(97950),S=t(27837),C=t(32730),E=t(88720),$=t(75949),I=t(33637),N=t(83910),M=t(97929),P=t(45903),L=t(58931),T=t(47111),D=t(19439),R=t(51833),O=t(83290),V=t(70579),H=t(12432),U=(t(93803),t(80219),t(66598),t(69436),V.Fragment,function(e,n,t){return H.h.call(n,"css")?V.jsx(H.E,(0,H.c)(e,n),t):V.jsx(e,n,t)}),F=function(e,n,t){return H.h.call(n,"css")?V.jsxs(H.E,(0,H.c)(e,n),t):V.jsxs(e,n,t)};const W=(0,O.AH)(r||(r=(0,A.A)(["\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 999999;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),B=(0,O.AH)(i||(i=(0,A.A)(["\n  background: #fff;\n  padding: 20px;\n  border-radius: 12px;\n  box-shadow: 0 10px 30px rgba(2, 6, 23, 0.25);\n  max-width: 92%;\n  width: 500px;\n  box-sizing: border-box;\n  font-family: var(--app-font-family, Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, 'Inter', 'Helvetica Neue', Arial, sans-serif);\n"]))),Z=(0,O.AH)(o||(o=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: 12px;\n  border-bottom: 2px solid #eef2f7;\n  margin-bottom: 16px;\n"]))),Y=(0,O.AH)(a||(a=(0,A.A)(["\n  font-size: 18px;\n  font-weight: 700;\n  color: #111827;\n"]))),J=(0,O.AH)(s||(s=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 6px;\n  border-radius: 6px;\n  &:hover {\n    background: #f3f4f6;\n    color: #374151;\n  }\n"]))),K=(0,O.AH)(l||(l=(0,A.A)(["\n  margin-bottom: 20px;\n"]))),G=(0,O.AH)(c||(c=(0,A.A)(["\n  display: block;\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 8px;\n  font-size: 14px;\n"]))),q=(0,O.AH)(d||(d=(0,A.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),Q=(0,O.AH)(p||(p=(0,A.A)(["\n  width: 100%;\n  padding: 10px 40px 10px 12px;\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.2s;\n  box-sizing: border-box;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &.error {\n    border-color: #dc2626;\n  }\n\n  &.success {\n    border-color: #16a34a;\n  }\n"]))),X=(0,O.AH)(u||(u=(0,A.A)(["\n  position: absolute;\n  right: 10px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 6px;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    color: #374151;\n  }\n"]))),ee=(0,O.AH)(h||(h=(0,A.A)(["\n  margin-top: 12px;\n  padding: 12px;\n  background: #f9fafb;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n"]))),ne=(0,O.AH)(m||(m=(0,A.A)(["\n  font-size: 13px;\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 8px;\n"]))),te=(0,O.AH)(g||(g=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: #6b7280;\n  margin-bottom: 4px;\n\n  &.valid {\n    color: #16a34a;\n  }\n\n  &.invalid {\n    color: #dc2626;\n  }\n"]))),re=(0,O.AH)(x||(x=(0,A.A)(["\n  color: #dc2626;\n  font-size: 13px;\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: #fef2f2;\n  border-radius: 6px;\n  border: 1px solid #fecaca;\n"]))),ie=(0,O.AH)(f||(f=(0,A.A)(["\n  background: #eff6ff;\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  border: 1px solid #bfdbfe;\n"]))),oe=(0,O.AH)(b||(b=(0,A.A)(["\n  font-size: 12px;\n  font-weight: 600;\n  color: #1e40af;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 4px;\n"]))),ae=(0,O.AH)(v||(v=(0,A.A)(["\n  font-size: 14px;\n  color: #1e293b;\n  font-weight: 500;\n"]))),se=(0,O.AH)(y||(y=(0,A.A)(["\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 24px;\n"]))),le=(0,O.AH)(j||(j=(0,A.A)(["\n  background: white;\n  color: #374151;\n  border: 2px solid #d1d5db;\n  padding: 10px 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover {\n    background: #f8fafc;\n    border-color: #9ca3af;\n  }\n"]))),ce=(0,O.AH)(k||(k=(0,A.A)(["\n  background: #3b82f6;\n  color: white;\n  border: 2px solid #3b82f6;\n  padding: 10px 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #2563eb;\n    border-color: #2563eb;\n  }\n\n  &:disabled {\n    background: #9ca3af;\n    border-color: #9ca3af;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n"]))),de=e=>{let{isOpen:n,onClose:t,onConfirm:r,userData:i}=e;const[o,a]=(0,z.useState)(""),[s,l]=(0,z.useState)(""),[c,d]=(0,z.useState)(!1),[p,u]=(0,z.useState)(!1),[h,m]=(0,z.useState)(""),[g,x]=(0,z.useState)({password:!1,confirm:!1});if((0,z.useEffect)(()=>{n||(a(""),l(""),d(!1),u(!1),m(""),x({password:!1,confirm:!1}))},[n]),!n)return null;const f=(e=>({minLength:e.length>=8,hasUpperCase:/[A-Z]/.test(e),hasLowerCase:/[a-z]/.test(e),hasNumber:/[0-9]/.test(e),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(e)}))(o),b=Object.values(f).every(e=>e),v=o===s,y=b&&v&&o.length>0,j=e=>g[e]?"password"===e?b?"success":"error":"confirm"===e?v&&s.length>0?"success":"error":"":"";return _.createPortal(U("div",{css:W,role:"dialog","aria-modal":"true",children:F("div",{css:B,children:[F("div",{css:Z,children:[U("div",{css:Y,children:"Reset hesla"}),U("button",{"aria-label":"Zav\u0159\xedt",css:J,onClick:t,children:F("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[U("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i&&F("div",{css:ie,children:[U("div",{css:oe,children:"U\u017eivatel:"}),F("div",{css:ae,style:{fontSize:"16px",fontWeight:700},children:[i.fullName||"".concat(i.surname||""," ").concat(i.name||"").trim()||i.username,i.username&&F("span",{style:{fontWeight:500,color:"#64748b",marginLeft:"8px"},children:["(",i.username,")"]})]}),i.email&&"N/A"!==i.email&&U("div",{css:ae,style:{fontSize:"13px",color:"#64748b",marginTop:"4px",fontWeight:400},children:i.email})]}),F("form",{onSubmit:e=>{e.preventDefault(),y?r(o):m("Pros\xedm opravte chyby ve formul\xe1\u0159i")},children:[F("div",{css:K,children:[U("label",{css:G,children:"Nov\xe9 heslo *"}),F("div",{css:q,children:[U("input",{css:Q,type:c?"text":"password",value:o,onChange:e=>a(e.target.value),onBlur:()=>{x(e=>(0,w.A)((0,w.A)({},e),{},{password:!0}))},placeholder:"Zadejte nov\xe9 heslo",className:j("password"),autoComplete:"new-password"}),U("button",{type:"button",css:X,onClick:()=>d(!c),"aria-label":c?"Skr\xfdt heslo":"Zobrazit heslo",children:U(N.g,{icon:c?M.k6j:M.pS3})})]}),F("div",{css:ee,children:[U("div",{css:ne,children:"Po\u017eadavky na heslo:"}),F("div",{css:te,className:f.minLength?"valid":"invalid",children:[U(N.g,{icon:f.minLength?M.SGM:M.s0Q}),"Minim\xe1ln\u011b 8 znak\u016f"]}),F("div",{css:te,className:f.hasUpperCase?"valid":"invalid",children:[U(N.g,{icon:f.hasUpperCase?M.SGM:M.s0Q}),"Alespo\u0148 jedno velk\xe9 p\xedsmeno (A-Z)"]}),F("div",{css:te,className:f.hasLowerCase?"valid":"invalid",children:[U(N.g,{icon:f.hasLowerCase?M.SGM:M.s0Q}),"Alespo\u0148 jedno mal\xe9 p\xedsmeno (a-z)"]}),F("div",{css:te,className:f.hasNumber?"valid":"invalid",children:[U(N.g,{icon:f.hasNumber?M.SGM:M.s0Q}),"Alespo\u0148 jedna \u010d\xedslice (0-9)"]}),F("div",{css:te,className:f.hasSpecialChar?"valid":"invalid",children:[U(N.g,{icon:f.hasSpecialChar?M.SGM:M.s0Q}),"Alespo\u0148 jeden speci\xe1ln\xed znak (!@#$%^&*...)"]})]})]}),F("div",{css:K,children:[U("label",{css:G,children:"Potvrdit heslo *"}),F("div",{css:q,children:[U("input",{css:Q,type:p?"text":"password",value:s,onChange:e=>l(e.target.value),onBlur:()=>{x(e=>(0,w.A)((0,w.A)({},e),{},{confirm:!0}))},placeholder:"Zadejte heslo znovu",className:j("confirm"),autoComplete:"new-password"}),U("button",{type:"button",css:X,onClick:()=>u(!p),"aria-label":p?"Skr\xfdt heslo":"Zobrazit heslo",children:U(N.g,{icon:p?M.k6j:M.pS3})})]}),g.confirm&&!v&&s.length>0&&U("div",{css:re,children:"Hesla se neshoduj\xed"})]}),h&&U("div",{css:re,children:h}),F("div",{css:se,children:[U("button",{type:"button",css:le,onClick:t,children:"Zru\u0161it"}),U("button",{type:"submit",css:ce,disabled:!y,children:"Resetovat heslo"})]})]})]})}),document.body)};var pe=t(1356),ue=t(40614),he=t(14459),me=t(42489),ge=t(95264),xe=t(36210),fe=t(77819),be=t(77737),ve=t(77784);const ye=(0,ve.A)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);var je=t(94651),ke=t(35087);const we=(0,ve.A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var Ae,ze,_e,Se,Ce,Ee,$e,Ie,Ne,Me,Pe,Le,Te,De,Re,Oe,Ve,He,Ue,Fe,We,Be,Ze,Ye,Je,Ke,Ge,qe,Qe,Xe,en,nn,tn,rn,on,an,sn,ln,cn,dn,pn,un,hn,mn,gn,xn,fn,bn,vn=t(35327),yn=t(91286),jn=t(39292),kn=t(28006),wn=t(13190),An=t(88693),zn=t(63974),_n=t(91867);const Sn=(0,O.i7)(Ae||(Ae=(0,A.A)(["\n  0% {\n    opacity: 0;\n    transform: translateY(20px) scale(0.95);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n"]))),Cn=P.A.div(ze||(ze=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),En=P.A.div(_e||(_e=(0,A.A)(["\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 900px;\n  max-height: 92vh;\n  overflow: hidden;\n  box-shadow:\n    0 25px 50px -12px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(255, 255, 255, 0.2);\n  animation: "," 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n"])),Sn),$n=P.A.div(Se||(Se=(0,A.A)(['\n  padding: 1.25rem 1.5rem 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #1f2a57 0%, #2563eb 70%, #1d4ed8 100%);\n  color: white;\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url(\'data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23ffffff" fill-opacity="0.05"><circle cx="30" cy="30" r="1"/></g></svg>\');\n    pointer-events: none;\n  }\n']))),In=P.A.div(Ce||(Ce=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: relative;\n  z-index: 1;\n"]))),Nn=P.A.div(Ee||(Ee=(0,A.A)(["\n  flex: 1;\n"]))),Mn=P.A.h2($e||($e=(0,A.A)(["\n  margin: 0;\n  color: white;\n  font-size: 1.25rem;\n  font-weight: 700;\n  line-height: 1.2;\n"]))),Pn=P.A.p(Ie||(Ie=(0,A.A)(["\n  margin: 0.375rem 0 0 0;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.8125rem;\n  font-weight: 400;\n"]))),Ln=P.A.button(Ne||(Ne=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  cursor: pointer;\n  padding: 0.625rem;\n  border-radius: 10px;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(1.05);\n  }\n"]))),Tn=P.A.div(Me||(Me=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  padding: 1rem 1.5rem 0;\n  background: white;\n  border-bottom: 2px solid #e2e8f0;\n"]))),Dn=P.A.button(Pe||(Pe=(0,A.A)(["\n  padding: 0.625rem 1.25rem;\n  border: none;\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: 0.8125rem;\n  cursor: pointer;\n  border-radius: 10px 10px 0 0;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  position: relative;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  ","\n"])),e=>e.$active?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"transparent",e=>e.$active?"white":"#64748b",e=>e.$active?"600":"500",e=>e.$active?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"#f1f5f9",e=>e.$active?"white":"#3b82f6",e=>e.$active&&"\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: -2px;\n      left: 0;\n      right: 0;\n      height: 2px;\n      background: linear-gradient(90deg, #3b82f6, #1d4ed8);\n    }\n  "),Rn=P.A.div(Le||(Le=(0,A.A)(["\n  max-height: calc(92vh - 220px);\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f8fafc;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #94a3b8;\n  }\n"]))),On=P.A.div(Te||(Te=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  background: white;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid #f1f5f9;\n  }\n"]))),Vn=P.A.div(De||(De=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem 1.25rem; /* row-gap column-gap */\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Hn=P.A.div(Re||(Re=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr); /* 3 sloupce pro Username | Heslo | Vynutit zm\u011bnu */\n  gap: 1rem 1.25rem; /* row-gap column-gap */\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Un=P.A.div(Oe||(Oe=(0,A.A)(["\n  display: grid;\n  grid-template-columns: 0.7fr 1.5fr 1.5fr 0.8fr; /* Titul p\u0159ed (u\u017e\u0161\xed) | P\u0159\xedjmen\xed | Jm\xe9no | Titul za (u\u017e\u0161\xed) */\n  gap: 1rem 1.25rem; /* row-gap column-gap */\n\n  @media (max-width: 1024px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Fn=P.A.div(Ve||(Ve=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  grid-column: ",";\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n  }\n"])),e=>e.$fullWidth?"span 2":"span 1"),Wn=P.A.label(He||(He=(0,A.A)(["\n  font-weight: 600;\n  font-size: 0.8125rem;\n  color: #374151;\n  margin-bottom: 0.375rem;\n  display: block;\n\n  &::after {\n    content: ",";\n    color: #dc2626;\n    margin-left: 2px;\n  }\n"])),e=>e.required?'" *"':'""'),Bn=(P.A.span(Ue||(Ue=(0,A.A)(["\n  color: #dc2626;\n"]))),P.A.div(Fe||(Fe=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.625rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 15px !important;\n    height: 15px !important;\n  }\n"])))),Zn=P.A.div(We||(We=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.625rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 15px !important;\n    height: 15px !important;\n  }\n"]))),Yn=P.A.div(Be||(Be=(0,A.A)(["\n  position: absolute;\n  right: 0.625rem;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 0.375rem;\n  z-index: 2;\n"]))),Jn=P.A.div(Ze||(Ze=(0,A.A)(["\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  background: rgba(248, 250, 252, 0.9);\n  border: 1px solid #e2e8f0;\n  \n  svg {\n    width: 14px !important;\n    height: 14px !important;\n    color: #64748b !important;\n  }\n  \n  &:hover {\n    background: #f1f5f9;\n    border-color: #cbd5e1;\n    \n    svg {\n      color: #334155 !important;\n    }\n  }\n  \n  &:active {\n    transform: scale(0.95);\n    background: #e2e8f0;\n  }\n"]))),Kn=P.A.input(Ye||(Ye=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.625rem 5rem 0.625rem 2.25rem; /* V\xedce m\xedsta vpravo pro ikony */\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.8125rem;\n  transition: all 0.2s ease;\n  background: ",";\n\n  color: ",";\n  font-weight: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n"])),e=>e.hasError?"#dc2626":"#e5e7eb",e=>e.hasError?"#fef2f2":"#ffffff",e=>e.value&&""!==e.value?"#1f2937":"#6b7280",e=>e.disabled?"400":e.value&&""!==e.value?"600":"400",e=>e.hasError?"#dc2626":"#3b82f6",e=>e.hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)"),Gn=P.A.input(Je||(Je=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.8125rem;\n  transition: all 0.2s ease;\n  background: ",";\n\n  /* Zv\xfdrazn\u011bn\xe9 vypln\u011bn\xe9 hodnoty vs. placeholder - slad\u011bno s CustomSelect */\n  color: ",";\n  font-weight: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &:focus + svg {\n    color: ",";\n  }\n\n  &:disabled {\n    background: #f9fafb;\n    color: #6b7280;\n    cursor: not-allowed;\n  }\n\n  /* Sjednocen\xed placeholder barvy se selecty */\n  &::placeholder {\n    color: #9ca3af;\n    opacity: 1;\n    font-weight: 400;\n  }\n"])),e=>e.hasIcon?"0.625rem 0.625rem 0.625rem 2.25rem":"0.625rem",e=>e.hasError?"#dc2626":"#e5e7eb",e=>e.hasError?"#fef2f2":"#ffffff",e=>e.value&&""!==e.value?"#1f2937":"#6b7280",e=>e.disabled?"400":e.value&&""!==e.value?"600":"400",e=>e.hasError?"#dc2626":"#3b82f6",e=>e.hasError?"rgba(220, 38, 38, 0.1)":"rgba(59, 130, 246, 0.1)",e=>e.hasError?"#dc2626":"#3b82f6"),qn=P.A.div(Ke||(Ke=(0,A.A)(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n\n  input {\n    padding-left: 2.25rem;\n    padding-right: ",";\n  }\n\n  .search-icon {\n    position: absolute;\n    left: 0.625rem;\n    color: #9ca3af;\n    pointer-events: none;\n  }\n\n  .clear-icon {\n    position: absolute;\n    right: 0.625rem;\n    color: #9ca3af;\n    cursor: pointer;\n    transition: color 0.2s;\n\n    &:hover {\n      color: #dc2626;\n    }\n  }\n"])),e=>e.hasValue?"2.25rem":"0.625rem"),Qn=P.A.span(Ge||(Ge=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #dc2626;\n  margin-top: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n"]))),Xn=(P.A.div(qe||(qe=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.625rem;\n  border-bottom: 1px solid #e5e7eb;\n"]))),P.A.div(Qe||(Qe=(0,A.A)(["\n  width: 1.75rem;\n  height: 1.75rem;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8125rem;\n"]))),P.A.h3(Xe||(Xe=(0,A.A)(["\n  margin: 1.5rem 0 0.875rem 0;\n  padding-bottom: 0.5rem;\n  color: #64748b;\n  font-size: 0.8125rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  border-bottom: 1px solid #e5e7eb;\n\n  &:first-of-type {\n    margin-top: 0;\n  }\n"])))),et=P.A.div(en||(en=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n  gap: 0.625rem;\n  max-height: 350px;\n  overflow-y: auto;\n  padding: 0.875rem;\n  background: #f9fafb;\n  border-radius: 8px;\n  border: 2px solid #e5e7eb;\n"]))),nt=P.A.label(nn||(nn=(0,A.A)(["\n  position: relative;\n  display: inline-block;\n  width: 56px;\n  height: 28px;\n  cursor: pointer;\n  flex-shrink: 0;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #cbd5e1;\n    border-radius: 28px;\n    transition: all 0.3s ease;\n\n    &::before {\n      content: '';\n      position: absolute;\n      height: 20px;\n      width: 20px;\n      left: 4px;\n      bottom: 4px;\n      background-color: white;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n    }\n  }\n\n  input:checked + span {\n    background-color: #3b82f6;\n  }\n\n  input:checked + span::before {\n    transform: translateX(28px);\n  }\n\n  input:focus + span {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"]))),tt=P.A.div(tn||(tn=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  height: 2.375rem; /* Same height as input (padding 0.625rem top/bottom + border + content) */\n"]))),rt=P.A.div(rn||(rn=(0,A.A)(["\n  font-size: 0.8125rem;\n  color: ",";\n  font-weight: ",";\n  transition: all 0.3s ease;\n"])),e=>e.$active?"#16a34a":"#64748b",e=>e.$active?"600":"400"),it=P.A.label(on||(on=(0,A.A)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n  padding: 0.625rem;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    border-color: #3b82f6;\n    background: #f0f9ff;\n  }\n"])),e=>e.$checked?"#3b82f6":"#e5e7eb"),ot=P.A.input(an||(an=(0,A.A)(["\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  margin-top: 2px;\n  accent-color: #3b82f6;\n"]))),at=P.A.div(sn||(sn=(0,A.A)(["\n  flex: 1;\n"]))),st=P.A.div(ln||(ln=(0,A.A)(["\n  font-weight: 600;\n  color: #1e293b;\n  font-size: 0.8125rem;\n  margin-bottom: 0.25rem;\n"]))),lt=P.A.div(cn||(cn=(0,A.A)(["\n  font-size: 0.75rem;\n  color: #64748b;\n  line-height: 1.4;\n"]))),ct=P.A.div(dn||(dn=(0,A.A)(["\n  padding: 1.25rem 1.5rem;\n  background: #f8fafc;\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n"]))),dt=P.A.div(pn||(pn=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: #64748b;\n"]))),pt=P.A.div(un||(un=(0,A.A)(["\n  display: flex;\n  gap: 0.875rem;\n"]))),ut=P.A.button(hn||(hn=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1.25rem;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.8125rem;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\n  &.cancel {\n    background: white;\n    color: #64748b;\n    border: 2px solid #e2e8f0;\n\n    &:hover {\n      background: #f8fafc;\n      border-color: #cbd5e1;\n    }\n  }\n\n  &.primary {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    color: white;\n    border: 2px solid transparent;\n\n    &:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);\n    }\n\n    &:disabled {\n      background: #e2e8f0;\n      color: #64748b;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n  }\n\n  /* \ud83c\udfaf Success stav po \xfasp\u011b\u0161n\xe9m ulo\u017een\xed */\n  &.success {\n    background: linear-gradient(135deg, #10b981, #059669) !important;\n    color: white;\n    border: 2px solid transparent;\n    animation: successPulse 0.5s ease-out;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4);\n    }\n  }\n\n  @keyframes successPulse {\n    0% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.05);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n"]))),ht=P.A.div(mn||(mn=(0,A.A)(["\n  width: 18px;\n  height: 18px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top-color: white;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n"]))),mt=P.A.div(gn||(gn=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #dcfce7;\n  border: 2px solid #86efac;\n  border-radius: 8px;\n  color: #166534;\n  font-weight: 500;\n  font-size: 0.8125rem;\n  margin-bottom: 0.875rem;\n"]))),gt=P.A.div(xn||(xn=(0,A.A)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n  padding: 0.875rem;\n  background: #fee2e2;\n  border: 2px solid #fca5a5;\n  border-radius: 8px;\n  color: #991b1b;\n  font-weight: 500;\n  margin-bottom: 0.875rem;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 0.75rem;\n  max-height: 350px;\n  overflow-y: auto;\n"]))),xt=P.A.div(fn||(fn=(0,A.A)(["\n  text-align: center;\n  padding: 2rem 1rem;\n  color: #9ca3af;\n  font-size: 0.8125rem;\n"]))),ft=P.A.label(bn||(bn=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #4b5563;\n  cursor: pointer;\n  user-select: none;\n  white-space: nowrap;\n  padding: 0.5rem 0.75rem;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  background: ",";\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n    border-color: ",';\n  }\n\n  input[type="checkbox"] {\n    cursor: pointer;\n    width: 16px;\n    height: 16px;\n    accent-color: #3b82f6;\n  }\n\n  span {\n    font-weight: ',";\n    color: ",";\n  }\n"])),e=>e.$checked?"#eff6ff":"white",e=>e.$checked?"#3b82f6":"#e5e7eb",e=>e.$checked?"#dbeafe":"#f9fafb",e=>e.$checked?"#2563eb":"#d1d5db",e=>e.$checked?"600":"500",e=>e.$checked?"#1e40af":"#4b5563"),bt=e=>{let{isOpen:n,onClose:t,mode:r,userData:i=null,onSuccess:o,addToast:a}=e;const{token:s,user:l,userDetail:c}=(0,z.useContext)(S.cy),{triggerActivity:d}=(0,pe.v5)(),[p,u]=(0,z.useState)("detail"),[h,m]=(0,z.useState)(!1),[g,x]=(0,z.useState)(!1),[f,b]=(0,z.useState)(!1),[v,y]=(0,z.useState)(!1),[j,k]=(0,z.useState)({}),[A,C]=(0,z.useState)(""),[E,I]=(0,z.useState)(""),N=(0,z.useMemo)(()=>!(!c||!c.roles)&&c.roles.some(e=>"SUPERADMIN"===e.kod_role||"ADMINISTRATOR"===e.kod_role),[c]),[M,P]=(0,z.useState)({}),[L,T]=(0,z.useState)({}),[D,R]=(0,z.useState)(new Set),[O,H]=(0,z.useState)({username:"",password:"",jmeno:"",prijmeni:"",titul_pred:"",titul_za:"",email:"",telefon:"",usek_id:null,lokalita_id:null,pozice_id:null,organizace_id:null,aktivni:1,vynucena_zmena_hesla:0,roles:[],direct_rights:[]}),[U,F]=(0,z.useState)([]),[W,B]=(0,z.useState)([]),[Z,Y]=(0,z.useState)([]),[J,K]=(0,z.useState)([]),[G,q]=(0,z.useState)([]),[Q,X]=(0,z.useState)([]),[ee,ne]=(0,z.useState)(""),[te,re]=(0,z.useState)(""),[ie,oe]=(0,z.useState)(!1),[ae,se]=(0,z.useState)(!1),[le,ce]=(0,z.useState)(new Set),de=(0,z.useMemo)(()=>{if(!ee.trim())return J;const e=ee.toLowerCase();return J.filter(n=>(n.nazev_role||n.nazev||"").toLowerCase().includes(e)||(n.popis||"").toLowerCase().includes(e))},[J,ee]),ve=(0,z.useMemo)(()=>{let e=G;if(ie&&(e=e.filter(e=>{const n=Number(e.id),t=le.has(n),r=O.direct_rights.includes(n);return!(t||r)})),te.trim()){const n=te.toLowerCase();e=e.filter(e=>(e.popis||"").toLowerCase().includes(n)||(e.kod_prava||"").toLowerCase().includes(n))}return e},[G,te,ie,le,O.direct_rights]);(0,z.useEffect)(()=>{n&&s&&null!==l&&void 0!==l&&l.username&&(Ae(),x(!1),b(!1))},[n,s,l]),(0,z.useEffect)(()=>{if(n&&"edit"===r&&i){var e,t,o,a,s,l;const n={usek_id:i.usek_id||(null===(e=i.usek)||void 0===e?void 0:e.id)||null,lokalita_id:i.lokalita_id||(null===(t=i.lokalita)||void 0===t?void 0:t.id)||(i.lokalita_nazev?null===(o=U.find(e=>e.nazev===i.lokalita_nazev))||void 0===o?void 0:o.id:null)||null,pozice_id:i.pozice_id||(null===(a=i.pozice)||void 0===a?void 0:a.id)||(i.nazev_pozice?null===(s=W.find(e=>e.nazev_pozice===i.nazev_pozice))||void 0===s?void 0:s.id:null)||null,organizace_id:i.organizace_id||(null===(l=i.organizace)||void 0===l?void 0:l.id)||null};let r=[];Array.isArray(i.roles)&&(r=i.roles.map(e=>{let n=null;if("object"===typeof e&&null!==e){if(e.id||e.role_id)n=e.id||e.role_id;else if(e.nazev_role||e.kod_role){const t=J.find(n=>n.nazev_role===e.nazev_role||n.kod_role===e.kod_role);n=null===t||void 0===t?void 0:t.id}}else n=e;return null!=n?Number(n):null}).filter(e=>null!=e));let c=[];Array.isArray(i.direct_rights)&&(c=i.direct_rights.map(e=>{let n=null;if("object"===typeof e&&null!==e){if(e.id||e.pravo_id)n=e.id||e.pravo_id;else if(e.kod_prava){const t=G.find(n=>n.kod_prava===e.kod_prava);n=null===t||void 0===t?void 0:t.id}}else n=e;return null!=n?Number(n):null}).filter(e=>null!=e));const d={username:i.username||"",password:"",jmeno:i.jmeno||i.name||"",prijmeni:i.prijmeni||i.surname||"",titul_pred:i.titul_pred||"",titul_za:i.titul_za||"",email:i.email||"",telefon:i.telefon||"",usek_id:n.usek_id,lokalita_id:n.lokalita_id,pozice_id:n.pozice_id,organizace_id:n.organizace_id,aktivni:"Ano"===i.aktivni||1===i.aktivni||"1"===i.aktivni?1:0,vynucena_zmena_hesla:1===i.vynucena_zmena_hesla||"1"===i.vynucena_zmena_hesla?1:0,roles:r,direct_rights:c};H(d),k({}),C(""),I("")}else n&&"create"===r&&(H({username:"",password:"",jmeno:"",prijmeni:"",titul_pred:"",titul_za:"",email:"",telefon:"",usek_id:null,lokalita_id:null,pozice_id:null,organizace_id:null,aktivni:1,vynucena_zmena_hesla:0,roles:[],direct_rights:[]}),k({}),C(""),I(""))},[n,r,i]);const Ae=async()=>{y(!0);try{const[e,n,t,r,i,o]=await Promise.all([(0,$.u$)({token:s,username:l.username}),(0,$.b6)({token:s,username:l.username}),(0,$.St)({token:s,username:l.username}),(0,$.rM)({token:s,username:l.username}),(0,$.Xx)({token:s,username:l.username}),(0,$.wc)({token:s,username:l.username})]),a=(e=>{if(!Array.isArray(e)||0===e.length)return[];const n=[],t=e.filter(e=>"\u0158editelstv\xed"===e.typ||!e.parent_id||null===e.parent_id||""===e.parent_id),r=e.filter(e=>"\u0158editelstv\xed"!==e.typ&&e.parent_id&&null!==e.parent_id&&""!==e.parent_id);t.sort((e,n)=>(e.nazev||"").localeCompare(n.nazev||"","cs")),t.forEach(e=>{n.push((0,w.A)((0,w.A)({},e),{},{level:0,isParent:!0,displayLabel:e.nazev}));const t=r.filter(n=>String(n.parent_id)===String(e.id));t.sort((e,n)=>(e.nazev||"").localeCompare(n.nazev||"","cs")),t.forEach(t=>{n.push((0,w.A)((0,w.A)({},t),{},{level:1,isParent:!1,parentId:e.id,displayLabel:t.nazev}))})});const i=new Set(n.map(e=>e.id)),o=e.filter(e=>!i.has(e.id));return o.length>0&&o.forEach(e=>{n.push((0,w.A)((0,w.A)({},e),{},{level:1,isParent:!1,isOrphan:!0,displayLabel:"\u26a0\ufe0f ".concat(e.nazev)}))}),n})(e||[]),c=(r||[]).sort((e,n)=>{const t=(e.nazev_role||e.nazev||"").toLowerCase(),r=(n.nazev_role||n.nazev||"").toLowerCase();return t.localeCompare(r,"cs")}),d=(i||[]).sort((e,n)=>{const t=(e.kod_prava||e.nazev||"").toLowerCase(),r=(n.kod_prava||n.nazev||"").toLowerCase();return t.localeCompare(r,"cs")});F(a),B(n||[]),Y(t||[]),K(c),q(d),X(o||[])}catch(e){I("Chyba p\u0159i na\u010d\xedt\xe1n\xed dat. Zkuste to pros\xedm znovu.")}finally{y(!1)}},ze=e=>{P(n=>(0,w.A)((0,w.A)({},n),{},{[e]:!n[e]})),M[e]||T(n=>(0,w.A)((0,w.A)({},n),{},{[e]:""}))},_e=(e,n,t)=>{if(!n)return e;const r=n.toLowerCase();return e.filter(e=>{var n,i,o,a,s;return"usek_id"===t?(null===(n=e.usek_nazev)||void 0===n?void 0:n.toLowerCase().includes(r))||(null===(i=e.usek_zkr)||void 0===i?void 0:i.toLowerCase().includes(r)):"lokalita_id"===t?null===(o=e.nazev)||void 0===o?void 0:o.toLowerCase().includes(r):"pozice_id"===t?null===(a=e.nazev_pozice)||void 0===a?void 0:a.toLowerCase().includes(r):"organizace_id"!==t||(null===(s=e.nazev)||void 0===s?void 0:s.toLowerCase().includes(r))})},Se=(e,n)=>e?"usek_id"===n?"".concat(e.usek_nazev," (").concat(e.usek_zkr,")"):"lokalita_id"===n?e.displayLabel||e.nazev:"pozice_id"===n?e.nazev_pozice:"organizace_id"===n?e.nazev:"":"",Ce=(e,n)=>{H(t=>(0,w.A)((0,w.A)({},t),{},{[e]:n})),j[e]&&k(n=>(0,w.A)((0,w.A)({},n),{},{[e]:null}))};(0,z.useEffect)(()=>{n&&O.roles&&O.roles.length>0&&s&&null!==l&&void 0!==l&&l.username?(async e=>{if(e&&0!==e.length)try{const n=new Set;for(const t of e){const e=await(0,$.Ox)({token:s,username:l.username,roleId:t});e&&e.prava&&Array.isArray(e.prava)&&e.prava.forEach(e=>{e.id&&n.add(Number(e.id))})}ce(n)}catch(n){ce(new Set)}else ce(new Set)})(O.roles):n&&ce(new Set)},[O.roles,n,s,null===l||void 0===l?void 0:l.username]),(0,z.useEffect)(()=>{n||ce(new Set)},[n]);const Ee=(e,n)=>{H(t=>{const r=t[e]||[],i=r.includes(n);return(0,w.A)((0,w.A)({},t),{},{[e]:i?r.filter(e=>e!==n):[...r,n]})})};return n?_.createPortal((0,V.jsx)(Cn,{children:(0,V.jsxs)(En,{onClick:e=>e.stopPropagation(),onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},children:[(0,V.jsx)($n,{children:(0,V.jsxs)(In,{children:[(0,V.jsxs)(Nn,{children:[(0,V.jsx)(Mn,{children:"create"===r?"P\u0159idat nov\xe9ho u\u017eivatele":"Upravit u\u017eivatele"}),(0,V.jsx)(Pn,{children:"create"===r?"Vypl\u0148te z\xe1kladn\xed \xfadaje u\u017eivatele":"Aktualizujte informace o u\u017eivateli ".concat([null===i||void 0===i?void 0:i.titul_pred,null===i||void 0===i?void 0:i.jmeno,null===i||void 0===i?void 0:i.prijmeni,null===i||void 0===i?void 0:i.titul_za].filter(Boolean).join(" "))})]}),(0,V.jsx)(Ln,{onClick:t,disabled:h,children:(0,V.jsx)(ue.A,{size:20})})]})}),(0,V.jsxs)(Tn,{children:[(0,V.jsxs)(Dn,{$active:"detail"===p,onClick:()=>u("detail"),children:[(0,V.jsx)(he.A,{size:16}),"Detail u\u017eivatele"]}),(0,V.jsxs)(Dn,{$active:"roles"===p,onClick:()=>u("roles"),children:[(0,V.jsx)(me.A,{size:16}),"Role (",O.roles.length,")"]}),(0,V.jsxs)(Dn,{$active:"rights"===p,onClick:()=>u("rights"),children:[(0,V.jsx)(me.A,{size:16}),"P\u0159\xedm\xe1 pr\xe1va (",O.direct_rights.length,"/",le.size,")"]}),(0,V.jsxs)(Dn,{$active:"organization"===p,onClick:()=>u("organization"),children:[(0,V.jsx)(ge.A,{size:16}),"Organizace"]})]}),(0,V.jsxs)(Rn,{children:[A&&(0,V.jsxs)(mt,{children:[(0,V.jsx)(xe.A,{size:20}),A]}),E&&(0,V.jsxs)(gt,{children:[(0,V.jsx)("div",{style:{flexShrink:0},children:(0,V.jsx)(fe.A,{size:20})}),(0,V.jsx)("div",{style:{flex:1},children:E})]}),v?(0,V.jsxs)(xt,{children:[(0,V.jsx)(ht,{}),(0,V.jsx)("div",{style:{marginTop:"1rem"},children:"Na\u010d\xedt\xe1n\xed dat..."})]}):(0,V.jsxs)(V.Fragment,{children:["detail"===p&&(0,V.jsxs)(On,{children:[(0,V.jsx)(Xn,{children:"P\u0159ihla\u0161ovac\xed \xfadaje"}),(0,V.jsxs)(Hn,{children:[(0,V.jsxs)(Fn,{children:[(0,V.jsxs)(Wn,{required:!0,children:["Username","edit"===r&&!N&&(0,V.jsxs)("span",{style:{fontSize:"0.7rem",color:"#9ca3af",fontWeight:400},children:[" ","(zm\u011bna pouze pro SUPERADMIN/ADMINISTRATOR)"]})]}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(he.A,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.username,onChange:e=>Ce("username",e.target.value),disabled:"edit"===r&&!N,placeholder:"novak.jan",hasError:!!j.username})]}),j.username&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.username]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsxs)(Wn,{required:"create"===r,children:["Heslo","edit"===r&&(0,V.jsx)("span",{style:{fontSize:"0.75rem",color:"#9ca3af",fontWeight:400},children:" (ponechat pr\xe1zdn\xe9)"})]}),(0,V.jsxs)(Zn,{children:[(0,V.jsx)(be.A,{size:16}),(0,V.jsx)(Kn,{type:ae?"text":"password",value:O.password,onChange:e=>Ce("password",e.target.value),placeholder:"edit"===r?"Nov\xe9 heslo (voliteln\xe9)":"Heslo",autoComplete:"new-password",hasError:!!j.password}),(0,V.jsxs)(Yn,{children:[(0,V.jsx)(Jn,{onClick:()=>{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"high";const t="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="0123456789",o="!@#$%^&*()_+-=[]{}|;:,.<>?";let a=t,s="";"medium"!==n&&"high"!==n||(a+=r+i),"high"===n&&(a+=o),"high"===n&&(s+=t.charAt(Math.floor(26*Math.random())),s+=r.charAt(Math.floor(26*Math.random())),s+=i.charAt(Math.floor(10*Math.random())),s+=o.charAt(Math.floor(26*Math.random())),e-=4);for(let l=0;l<e;l++)s+=a.charAt(Math.floor(Math.random()*a.length));return s.split("").sort(()=>Math.random()-.5).join("")}(12,"high");Ce("password",e)},title:"Vygenerovat n\xe1hodn\xe9 heslo",children:(0,V.jsx)(ye,{})}),(0,V.jsx)(Jn,{onClick:()=>{se(!ae)},title:ae?"Skr\xfdt heslo":"Zobrazit heslo",children:ae?(0,V.jsx)(je.A,{}):(0,V.jsx)(ke.A,{})})]})]}),j.password&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.password]}),O.password&&(0,V.jsx)(_n.Ay,{password:O.password,showRequirements:!0})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Vynutit zm\u011bnu"}),(0,V.jsxs)(tt,{children:[(0,V.jsxs)(nt,{children:[(0,V.jsx)("input",{type:"checkbox",checked:1===O.vynucena_zmena_hesla,onChange:e=>Ce("vynucena_zmena_hesla",e.target.checked?1:0)}),(0,V.jsx)("span",{})]}),(0,V.jsx)(rt,{$active:1===O.vynucena_zmena_hesla,children:1===O.vynucena_zmena_hesla?"Vynutit":"Norm\xe1ln\xed"})]})]})]}),(0,V.jsx)(Xn,{children:"Osobn\xed \xfadaje"}),(0,V.jsxs)(Un,{children:[(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Titul p\u0159ed"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(we,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.titul_pred,onChange:e=>Ce("titul_pred",e.target.value),placeholder:"Ing."})]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{required:!0,children:"P\u0159\xedjmen\xed"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(he.A,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.prijmeni,onChange:e=>Ce("prijmeni",e.target.value),placeholder:"Nov\xe1k",hasError:!!j.prijmeni})]}),j.prijmeni&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.prijmeni]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{required:!0,children:"Jm\xe9no"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(he.A,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.jmeno,onChange:e=>Ce("jmeno",e.target.value),placeholder:"Jan",hasError:!!j.jmeno})]}),j.jmeno&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.jmeno]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Titul za"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(we,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.titul_za,onChange:e=>Ce("titul_za",e.target.value),placeholder:"Ph.D."})]})]})]}),(0,V.jsxs)(Un,{style:{marginTop:"1rem"},children:[(0,V.jsxs)(Fn,{$fullWidth:!0,children:[(0,V.jsx)(Wn,{required:!0,children:"Email"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(vn.A,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,type:"email",value:O.email,onChange:e=>Ce("email",e.target.value),placeholder:"jan.novak@example.com",hasError:!!j.email})]}),j.email&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.email]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{required:!0,children:"Telefon"}),(0,V.jsxs)(Bn,{children:[(0,V.jsx)(yn.A,{size:16}),(0,V.jsx)(Gn,{hasIcon:!0,value:O.telefon,onChange:e=>Ce("telefon",e.target.value),placeholder:"+420 123 456 789",hasError:!!j.telefon})]}),j.telefon&&(0,V.jsxs)(Qn,{children:[(0,V.jsx)(fe.A,{size:12}),j.telefon]})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Aktivn\xed"}),(0,V.jsxs)(tt,{children:[(0,V.jsxs)(nt,{children:[(0,V.jsx)("input",{type:"checkbox",checked:1===O.aktivni,onChange:e=>Ce("aktivni",e.target.checked?1:0)}),(0,V.jsx)("span",{})]}),(0,V.jsx)(rt,{$active:1===O.aktivni,children:1===O.aktivni?"Aktivn\xed":"Neaktivn\xed"})]})]})]})]}),"roles"===p&&(0,V.jsxs)(On,{children:[(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,V.jsxs)(Xn,{style:{marginBottom:0},children:["P\u0159i\u0159azen\xe9 role",(0,V.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:400,color:"#9ca3af",marginLeft:"0.5rem"},children:["(",O.roles.length," vybr\xe1no",de.length!==J.length?", zobrazeno ".concat(de.length):"",")"]})]}),(0,V.jsxs)(qn,{hasValue:!!ee,children:[(0,V.jsx)(jn.A,{size:16,className:"search-icon"}),(0,V.jsx)(Gn,{type:"text",placeholder:"Vyhledat roli...",value:ee,onChange:e=>ne(e.target.value),style:{width:"290px"}}),ee&&(0,V.jsx)(ue.A,{size:16,className:"clear-icon",onClick:()=>ne("")})]})]}),0===J.length?(0,V.jsx)(xt,{children:"\u017d\xe1dn\xe9 role k dispozici"}):0===de.length?(0,V.jsx)(xt,{children:"\u017d\xe1dn\xe9 role nenalezeny"}):(0,V.jsx)(et,{children:de.map(e=>{const n=Number(e.id),t=O.roles.includes(n);return(0,V.jsxs)(it,{$checked:t,children:[(0,V.jsx)(ot,{type:"checkbox",checked:t,onChange:()=>Ee("roles",n)}),(0,V.jsxs)(at,{children:[(0,V.jsx)(st,{children:e.nazev_role||e.nazev}),e.popis&&(0,V.jsx)(lt,{children:e.popis})]})]},e.id)})})]}),"rights"===p&&(0,V.jsxs)(On,{children:[(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,V.jsxs)(Xn,{style:{marginBottom:0},children:["P\u0159\xedm\xe1 pr\xe1va u\u017eivatele",(0,V.jsxs)("span",{style:{fontSize:"0.875rem",fontWeight:400,color:"#9ca3af",marginLeft:"0.5rem"},children:["(",O.direct_rights.length,"/",le.size,"/",ve.length,")"]})]}),(0,V.jsxs)("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[(0,V.jsxs)(ft,{$checked:ie,title:"Zobrazit pouze pr\xe1va, kter\xe1 u\u017eivatel NEM\xc1 (nejsou za\u0161krtnut\xe1)",children:[(0,V.jsx)("input",{type:"checkbox",checked:ie,onChange:e=>oe(e.target.checked)}),(0,V.jsx)("span",{children:"Jen nep\u0159i\u0159azen\xe1"})]}),(0,V.jsxs)(qn,{hasValue:!!te,children:[(0,V.jsx)(jn.A,{size:16,className:"search-icon"}),(0,V.jsx)(Gn,{type:"text",placeholder:"Vyhledat pr\xe1vo...",value:te,onChange:e=>re(e.target.value),style:{width:"290px"}}),te&&(0,V.jsx)(ue.A,{size:16,className:"clear-icon",onClick:()=>re("")})]})]})]}),0===G.length?(0,V.jsx)(xt,{children:"\u017d\xe1dn\xe1 pr\xe1va k dispozici"}):0===ve.length?(0,V.jsx)(xt,{children:"\u017d\xe1dn\xe1 pr\xe1va nenalezena"}):(0,V.jsx)(et,{children:ve.map(e=>{const n=Number(e.id),t=le.has(n),r=O.direct_rights.includes(n),i=t||r;return(0,V.jsxs)(it,{$checked:i,style:{opacity:t&&!r?.7:1,background:t&&!r?"#f0f9ff":void 0},children:[(0,V.jsx)(ot,{type:"checkbox",checked:i,disabled:t&&!r,onChange:()=>Ee("direct_rights",n),style:{cursor:t&&!r?"not-allowed":"pointer"}}),(0,V.jsxs)(at,{children:[(0,V.jsxs)(st,{style:{fontFamily:"monospace"},children:[e.kod_prava||e.nazev,t&&!r&&(0,V.jsx)("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#0284c7",fontWeight:600},children:"(z role)"})]}),e.popis&&(0,V.jsx)(lt,{children:e.popis})]})]},e.id)})})]}),"organization"===p&&(0,V.jsxs)(On,{children:[(0,V.jsx)(Xn,{children:"Organiza\u010dn\xed za\u0159azen\xed"}),(0,V.jsxs)(Vn,{children:[(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"\xdasek"}),(0,V.jsx)(zn.A,{icon:(0,V.jsx)(ge.A,{size:16}),value:O.usek_id||"",onChange:e=>Ce("usek_id",e.target.value||""),options:Q,placeholder:"-- Vyberte \xfasek --",field:"usek_id",selectStates:M,setSelectStates:P,searchStates:L,setSearchStates:T,touchedSelectFields:D,setTouchedSelectFields:R,toggleSelect:ze,filterOptions:_e,getOptionLabel:Se})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Lokalita"}),(0,V.jsx)(zn.A,{icon:(0,V.jsx)(kn.A,{size:16}),value:O.lokalita_id||"",onChange:e=>Ce("lokalita_id",e.target.value||""),options:U,placeholder:"-- Vyberte lokalitu --",field:"lokalita_id",selectStates:M,setSelectStates:P,searchStates:L,setSearchStates:T,touchedSelectFields:D,setTouchedSelectFields:R,toggleSelect:ze,filterOptions:_e,getOptionLabel:Se})]}),(0,V.jsxs)(Fn,{children:[(0,V.jsx)(Wn,{children:"Pozice"}),(0,V.jsx)(zn.A,{icon:(0,V.jsx)(wn.A,{size:16}),value:O.pozice_id||"",onChange:e=>Ce("pozice_id",e.target.value||""),options:W,placeholder:"-- Vyberte pozici --",field:"pozice_id",selectStates:M,setSelectStates:P,searchStates:L,setSearchStates:T,touchedSelectFields:D,setTouchedSelectFields:R,toggleSelect:ze,filterOptions:_e,getOptionLabel:Se})]}),(0,V.jsxs)(Fn,{style:{gridColumn:"1 / -1"},children:[(0,V.jsx)(Wn,{children:"Organizace"}),(0,V.jsx)(zn.A,{icon:(0,V.jsx)(ge.A,{size:16}),value:O.organizace_id||"",onChange:e=>Ce("organizace_id",e.target.value||""),options:Z,placeholder:"-- Vyberte organizaci --",field:"organizace_id",selectStates:M,setSelectStates:P,searchStates:L,setSearchStates:T,touchedSelectFields:D,setTouchedSelectFields:R,toggleSelect:ze,filterOptions:_e,getOptionLabel:Se})]})]})]})]})]}),(0,V.jsxs)(ct,{children:[(0,V.jsx)(dt,{}),(0,V.jsxs)(pt,{children:[(0,V.jsxs)(ut,{type:"button",className:"cancel",onClick:t,disabled:h,children:[(0,V.jsx)(ue.A,{size:16}),"Zru\u0161it"]}),(0,V.jsx)(ut,{type:"button",className:g?"success":"primary",onClick:async()=>{if(!h&&!f){if(C(""),I(""),!(()=>{const e={};return(!O.username||O.username.length<3)&&(e.username="Username mus\xed m\xedt alespo\u0148 3 znaky"),O.username&&!/^[a-zA-Z0-9._-]+$/.test(O.username)&&(e.username="Username m\u016f\u017ee obsahovat pouze p\xedsmena, \u010d\xedslice, te\u010dky, poml\u010dky a podtr\u017e\xedtka"),"create"===r&&(O.password?O.password.length<8?e.password="Heslo mus\xed m\xedt alespo\u0148 8 znak\u016f":(0,_n.xp)(O.password)||(e.password="Heslo mus\xed obsahovat alespo\u0148 8 znak\u016f, mal\xe9 a velk\xe9 p\xedsmeno, \u010d\xedslo a speci\xe1ln\xed znak"):e.password="Heslo je povinn\xe9"),"edit"===r&&O.password&&(O.password.length<8?e.password="Heslo mus\xed m\xedt alespo\u0148 8 znak\u016f":(0,_n.xp)(O.password)||(e.password="Heslo mus\xed obsahovat alespo\u0148 8 znak\u016f, mal\xe9 a velk\xe9 p\xedsmeno, \u010d\xedslo a speci\xe1ln\xed znak")),O.jmeno&&O.jmeno.trim()||(e.jmeno="Jm\xe9no je povinn\xe9"),O.prijmeni&&O.prijmeni.trim()||(e.prijmeni="P\u0159\xedjmen\xed je povinn\xe9"),O.email&&O.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.email)||(e.email="Neplatn\xfd form\xe1t emailu"):e.email="Email je povinn\xfd",O.telefon&&O.telefon.trim()||(e.telefon="Telefon je povinn\xfd"),k(e),0===Object.keys(e).length})())return I("Opravte pros\xedm chyby ve formul\xe1\u0159i"),void u("detail");m(!0);try{var e,n;const u={jmeno:O.jmeno,prijmeni:O.prijmeni,titul_pred:(null===(e=O.titul_pred)||void 0===e?void 0:e.trim())||"",titul_za:(null===(n=O.titul_za)||void 0===n?void 0:n.trim())||"",email:O.email||null,telefon:O.telefon||null,usek_id:O.usek_id||null,lokalita_id:O.lokalita_id||null,pozice_id:O.pozice_id||null,organizace_id:O.organizace_id||null,aktivni:O.aktivni,vynucena_zmena_hesla:O.vynucena_zmena_hesla,roles:O.roles,direct_rights:O.direct_rights};let h;if("create"===r){const e=(0,w.A)({token:s,username:l.username,new_username:O.username,password:O.password},u);h=await(0,$.kg)(e);const n="".concat(O.prijmeni||""," ").concat(O.jmeno||"").trim()||O.username;C("U\u017eivatel ".concat(n," byl \xfasp\u011b\u0161n\u011b vytvo\u0159en")),a&&a("\u2713 Nov\xfd u\u017eivatel ".concat(n," (").concat(O.username,") byl \xfasp\u011b\u0161n\u011b vytvo\u0159en a ulo\u017een do datab\xe1ze"),{type:"success"})}else{var c,p,g;const e=(0,w.A)((0,w.A)({id:parseInt(i.id),token:s,username:l.username},u),{},{password:O.password||null}),n=i.username,t=O.username!==n;t&&N?e.new_username=O.username:t&&!N&&a&&a("Nem\xe1te opr\xe1vn\u011bn\xed ke zm\u011bn\u011b username",{type:"warning"}),h=await(0,$.TK)(e);const r="".concat(O.prijmeni||""," ").concat(O.jmeno||"").trim()||O.username;let o="U\u017eivatel ".concat(r," byl \xfasp\u011b\u0161n\u011b aktualizov\xe1n");var v;if(null!==(c=h.data)&&void 0!==c&&c.username_changed&&null!==(p=h.data)&&void 0!==p&&p.old_username&&null!==(g=h.data)&&void 0!==g&&g.new_username&&(o+=" (username zm\u011bn\u011bn: ".concat(h.data.old_username," \u2192 ").concat(h.data.new_username,")")),C(o),a)null!==(v=h.data)&&void 0!==v&&v.username_changed?a("\u2713 ".concat(o),{type:"success"}):a("\u2713 Zm\u011bny u\u017eivatele ".concat(r," (").concat(O.username,") byly \xfasp\u011b\u0161n\u011b ulo\u017eeny do datab\xe1ze"),{type:"success"})}if(d(),x(!0),f)return;b(!0);const m=h.data;setTimeout(()=>{t(),o&&setTimeout(()=>{o(m)},100)},1500)}catch(y){let e=y.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed u\u017eivatele";y.response?e+="\n\n\ud83d\udce1 Backend Response:\n".concat(JSON.stringify(y.response,null,2)):y.data&&(e+="\n\n\ud83d\udce1 Error Data:\n".concat(JSON.stringify(y.data,null,2))),y.status&&(e+="\n\n\ud83d\udd34 HTTP Status: ".concat(y.status)),I(e),a&&a("\u2717 ".concat(y.message||"Chyba p\u0159i ukl\xe1d\xe1n\xed u\u017eivatele do datab\xe1ze"),{type:"error"})}finally{f||m(!1)}}},disabled:h||v||g,children:h?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ht,{}),"Ukl\xe1d\xe1m..."]}):g?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(xe.A,{size:16}),"Ulo\u017eeno"]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(An.A,{size:16}),"create"===r?"Vytvo\u0159it u\u017eivatele":"Ulo\u017eit zm\u011bny"]})})]})]})]})}),document.body):null};var vt,yt,jt,kt;const wt=P.A.div(vt||(vt=(0,A.A)(["\n  position: fixed;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15), 0 4px 12px rgba(0, 0, 0, 0.1);\n  padding: 0.5rem 0;\n  min-width: 220px;\n  z-index: 999999;\n  font-size: 0.875rem;\n  animation: fadeIn 0.15s ease-out;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: scale(0.95) translateY(-8px);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1) translateY(0);\n    }\n  }\n"]))),At=P.A.button(yt||(yt=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  width: 100%;\n  padding: 0.65rem 1rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  transition: all 0.15s;\n  text-align: left;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    color: #94a3b8;\n\n    &:hover {\n      background: transparent;\n      color: #94a3b8;\n    }\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: ",";\n  }\n\n  &:hover svg {\n    color: ",";\n  }\n\n  &:disabled svg {\n    color: #94a3b8;\n  }\n"])),e=>e.danger?"#dc2626":e.success?"#16a34a":"#0f172a",e=>e.danger?"#fee2e2":e.success?"#dcfce7":"#f1f5f9",e=>e.danger?"#991b1b":e.success?"#15803d":"#0369a1",e=>e.danger?"#dc2626":e.success?"#16a34a":"#64748b",e=>e.danger?"#991b1b":e.success?"#15803d":"#0369a1"),zt=P.A.div(jt||(jt=(0,A.A)(["\n  height: 1px;\n  background: #e2e8f0;\n  margin: 0.5rem 0;\n"]))),_t=P.A.span(kt||(kt=(0,A.A)(["\n  flex: 1;\n  font-weight: 500;\n"]))),St=e=>{let{x:n,y:t,user:r,onClose:i,onEdit:o,onDelete:a,onToggleActive:s,canEdit:l=!0,canDelete:c=!1,selectedData:d=null}=e;const p=(0,z.useRef)(null),[u,h]=(0,z.useState)(!1),[m,g]=(0,z.useState)(null);(0,z.useEffect)(()=>{(async()=>{try{if(navigator.clipboard&&navigator.clipboard.readText){const n=await navigator.clipboard.readText();h(n&&n.trim().length>0);try{const e=JSON.parse(n);e&&"object"===typeof e&&g(e)}catch(e){g(n)}}}catch(n){const e=localStorage.getItem("clipboard_data");if(h(!!e),e)try{g(JSON.parse(e))}catch(t){g(e)}}})()},[]);const x=async()=>{let e,n="";d&&d.value?(e=d.value,n='bu\u0148ka: "'.concat(e.substring(0,50)).concat(e.length>50?"...":"",'"')):(e=JSON.stringify(r,null,2),n="u\u017eivatel ".concat(r.username||r.id));try{const t="string"===typeof e?e:JSON.stringify(e);if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t);else{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}const r={data:e,description:n,type:d?"cell":"row",timestamp:Date.now()};localStorage.setItem("clipboard_data",JSON.stringify(r)),h(!0),g(e)}catch(t){}},f=async()=>{await x();const e={action:"cut",data:d||r,type:d?"cell":"row",userId:r.id||r.username,timestamp:Date.now()};localStorage.setItem("clipboard_action",JSON.stringify(e))},b=async()=>{try{let t=null;try{if(navigator.clipboard&&navigator.clipboard.readText){const e=await navigator.clipboard.readText();e&&(t={data:e,type:"external"})}}catch(e){}if(!t){const e=localStorage.getItem("clipboard_data");if(e)try{t=JSON.parse(e)}catch(n){t={data:e,type:"text"}}}t&&t.data&&alert("Vlo\u017eeno: ".concat(t.description||"data ze schr\xe1nky"))}catch(e){}},v=!0===(null===r||void 0===r?void 0:r.active)||1===(null===r||void 0===r?void 0:r.active)||1===(null===r||void 0===r?void 0:r.is_active)||!0===(null===r||void 0===r?void 0:r.is_active)||1===(null===r||void 0===r?void 0:r.aktivni)||!0===(null===r||void 0===r?void 0:r.aktivni);(0,z.useEffect)(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&i()},n=e=>{if("Escape"===e.key)i();else if(e.ctrlKey||e.metaKey)switch(e.key){case"c":case"C":e.preventDefault(),x(),i();break;case"x":case"X":e.preventDefault(),f(),i();break;case"v":case"V":u&&(e.preventDefault(),b(),i())}};return setTimeout(()=>{document.addEventListener("mousedown",e),document.addEventListener("keydown",n)},50),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",n)}},[i]);const y=(()=>{if(!p.current)return{left:n,top:t};const e=p.current.getBoundingClientRect(),r=window.innerWidth,i=window.innerHeight;let o=n,a=t;return n+e.width>r&&(o=r-e.width-10),t+e.height>i&&(a=i-e.height-10),{left:o,top:a}})();return _.createPortal((0,V.jsxs)(wt,{ref:p,style:{left:"".concat(y.left,"px"),top:"".concat(y.top,"px")},children:[(0,V.jsxs)(At,{onClick:()=>{f(),i()},title:"Vystrihnout ".concat(d?"obsah bu\u0148ky":"cel\xfd \u0159\xe1dek"," (Ctrl+X)"),children:[(0,V.jsx)(N.g,{icon:M.GC3}),(0,V.jsx)(_t,{children:"Vystrihnout"})]}),(0,V.jsxs)(At,{onClick:()=>{x(),i()},title:"Kop\xedrovat ".concat(d?"obsah bu\u0148ky":"cel\xfd \u0159\xe1dek"," (Ctrl+C)"),children:[(0,V.jsx)(N.g,{icon:M.jPR}),(0,V.jsx)(_t,{children:"Kop\xedrovat"})]}),(0,V.jsxs)(At,{disabled:!u,onClick:()=>{u&&(b(),i())},title:u?"Vlo\u017eit ze schr\xe1nky".concat(m?" (".concat("string"===typeof m?m.substring(0,30)+"...":"strukturovan\xe1 data",")"):""):"Schr\xe1nka je pr\xe1zdn\xe1",children:[(0,V.jsx)(N.g,{icon:M.R9T}),(0,V.jsx)(_t,{children:"Vlo\u017eit"})]}),(0,V.jsx)(zt,{}),(0,V.jsxs)(At,{disabled:!l,onClick:()=>{l&&(o(r),i())},title:l?"Editovat u\u017eivatele":"Nem\xe1te opr\xe1vn\u011bn\xed k editaci tohoto u\u017eivatele",children:[(0,V.jsx)(N.g,{icon:M.MT7}),(0,V.jsx)(_t,{children:"Editovat u\u017eivatele"})]}),(0,V.jsx)(zt,{}),(0,V.jsxs)(At,{success:!v,danger:v,onClick:()=>{s(r,v),i()},title:v?"Zak\xe1zat u\u017eivatele":"Povolit u\u017eivatele",children:[(0,V.jsx)(N.g,{icon:v?M.c7y:M.pCJ}),(0,V.jsx)(_t,{children:v?"Zak\xe1zat u\u017eivatele":"Povolit u\u017eivatele"})]}),(0,V.jsx)(zt,{}),(0,V.jsxs)(At,{danger:!0,onClick:()=>{a(r),i()},title:c?"Trvale smazat u\u017eivatele z datab\xe1ze":"Nem\xe1te opr\xe1vn\u011bn\xed ke smaz\xe1n\xed - u\u017eivatel bude pouze deaktivov\xe1n",children:[(0,V.jsx)(N.g,{icon:c?M.yLS:M.bB2}),(0,V.jsx)(_t,{children:c?"Smazat u\u017eivatele":"Deaktivovat u\u017eivatele"})]}),(0,V.jsx)(zt,{}),(0,V.jsxs)(At,{onClick:()=>i(),children:[(0,V.jsx)(N.g,{icon:M.GRI}),(0,V.jsx)(_t,{children:"Storno"})]})]}),document.body)};var Ct,Et,$t,It,Nt,Mt,Pt,Lt,Tt,Dt,Rt,Ot,Vt,Ht,Ut,Ft,Wt,Bt,Zt,Yt,Jt,Kt,Gt,qt,Qt,Xt,er,nr,tr,rr,ir,or,ar,sr,lr,cr,dr,pr,ur,hr,mr,gr,xr,fr,br,vr,yr,jr,kr,wr,Ar,zr,_r,Sr,Cr,Er,$r,Ir,Nr,Mr,Pr,Lr,Tr,Dr,Rr,Or,Vr,Hr,Ur,Fr,Wr,Br,Zr=t(200),Yr=t(37087);const Jr=P.A.div(Ct||(Ct=(0,A.A)(["\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n\n  @keyframes pulse {\n    0%, 100% {\n      opacity: 0.3;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.1);\n    }\n  }\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]))),Kr=P.A.div(Et||(Et=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n"]))),Gr=P.A.div($t||($t=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),qr=P.A.button(It||(It=(0,A.A)(["\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  width: 42px;\n  height: 42px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.4);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"]))),Qr=P.A.h1(Nt||(Nt=(0,A.A)(["\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n"]))),Xr=P.A.div(Mt||(Mt=(0,A.A)(["\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 3px solid #e5e7eb;\n"]))),ei=P.A.button(Pt||(Pt=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 2px solid #3b82f6;\n  border-radius: 8px;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n"])),e=>e.$primary?"#3b82f6":"white",e=>e.$primary?"white":"#3b82f6",e=>e.$primary?"#2563eb":"#eff6ff",e=>(e.$primary,"#2563eb")),ni=P.A.div(Lt||(Lt=(0,A.A)(["\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n"]))),ti=P.A.div(Tt||(Tt=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(12, 1fr);\n  gap: 1.5rem;\n\n  @media (max-width: 1200px) {\n    grid-template-columns: repeat(6, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n"]))),ri=P.A.div(Dt||(Dt=(0,A.A)(["\n  grid-column: span 3;\n  grid-row: span 2;\n  background: linear-gradient(145deg, #ffffff, #f9fafb);\n  border-radius: 12px;\n  padding: 1rem;\n  border-left: 4px solid ",";\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n  transition: all 0.25s ease;\n  min-height: 260px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n  }\n\n  @media (max-width: 1200px) {\n    grid-column: span 3;\n  }\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n    grid-row: span 1;\n    min-height: 200px;\n  }\n"])),e=>e.$color||"#16a34a"),ii=P.A.div(Rt||(Rt=(0,A.A)(["\n  grid-column: span 3;\n  background: ",";\n  border-radius: 12px;\n  padding: 1rem;\n  border-left: 4px solid ",";\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n  transition: all 0.25s ease;\n  cursor: ",";\n  min-height: 120px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  &:hover {\n    transform: ",";\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n    ","\n  }\n\n  ","\n\n  @media (max-width: 1200px) {\n    grid-column: span 3;\n  }\n\n  @media (max-width: 768px) {\n    grid-column: span 1;\n    min-height: 100px;\n  }\n"])),e=>e.$isActive?"linear-gradient(145deg, ".concat(e.$color||"#3b82f6","20, ").concat(e.$color||"#3b82f6","10)"):"linear-gradient(145deg, #ffffff, #f9fafb)",e=>e.$color||"#3b82f6",e=>e.$clickable?"pointer":"default",e=>e.$clickable?"translateY(-2px)":"translateY(-1px)",e=>e.$clickable&&"\n      background: linear-gradient(145deg, ".concat(e.$color||"#3b82f6","25, ").concat(e.$color||"#3b82f6","15);\n    "),e=>e.$isActive&&"\n    border-left-width: 6px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ".concat(e.$color||"#3b82f6","40;\n  ")),oi=(P.A.div(Ot||(Ot=(0,A.A)(["\n  background: ",";\n  border-radius: 12px;\n  padding: 1rem;\n  border-left: 4px solid ",";\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.06),\n    0 1px 3px rgba(0, 0, 0, 0.04);\n  transition: all 0.25s ease;\n  cursor: ",";\n\n  &:hover {\n    transform: ",";\n    box-shadow:\n      0 4px 12px rgba(0, 0, 0, 0.1),\n      0 2px 6px rgba(0, 0, 0, 0.06);\n    ","\n  }\n\n  ","\n"])),e=>e.$isActive?"linear-gradient(145deg, ".concat(e.$color||"#3b82f6","20, ").concat(e.$color||"#3b82f6","10)"):"linear-gradient(145deg, #ffffff, #f9fafb)",e=>e.$color||"#3b82f6",e=>e.$clickable?"pointer":"default",e=>e.$clickable?"translateY(-2px)":"translateY(-1px)",e=>e.$clickable&&"\n      background: linear-gradient(145deg, ".concat(e.$color||"#3b82f6","25, ").concat(e.$color||"#3b82f6","15);\n    "),e=>e.$isActive&&"\n    border-left-width: 6px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ".concat(e.$color||"#3b82f6","40;\n  ")),P.A.div(Vt||(Vt=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n"])))),ai=P.A.div(Ht||(Ht=(0,A.A)(["\n  color: ",";\n  font-size: 1.25rem;\n  opacity: 0.7;\n"])),e=>e.$color||"#64748b"),si=P.A.div(Ut||(Ut=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n  font-weight: 500;\n  text-align: left;\n  line-height: 1.4;\n"]))),li=P.A.div(Ft||(Ft=(0,A.A)(["\n  font-size: 1.875rem;\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1.2;\n  text-align: left;\n"]))),ci=P.A.div(Wt||(Wt=(0,A.A)(["\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 60%, #e2e8f0 100%);\n  border: 1px solid #cbd5e1;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n"]))),di=P.A.div(Bt||(Bt=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n"]))),pi=P.A.h3(Zt||(Zt=(0,A.A)(["\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),ui=(P.A.button(Yt||(Yt=(0,A.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #3b82f6;\n  font-size: 1.25rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n"]))),P.A.div(Jt||(Jt=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n  margin-top: 1rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"])))),hi=P.A.div(Kt||(Kt=(0,A.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),mi=P.A.label(Gt||(Gt=(0,A.A)(["\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #374151;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),gi=P.A.div(qt||(qt=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n"]))),xi=P.A.button(Qt||(Qt=(0,A.A)(["\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 14px !important;\n    height: 14px !important;\n  }\n"]))),fi=P.A.input(Xt||(Xt=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: ",";\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  background: white;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n  }\n"])),e=>e.hasIcon?"0.75rem 2.5rem 0.75rem 2.5rem":"0.75rem"),bi=P.A.div(er||(er=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 16px !important;\n    height: 16px !important;\n  }\n"]))),vi=P.A.select(nr||(nr=(0,A.A)(["\n  width: 100%;\n  box-sizing: border-box;\n  padding: ",";\n  border: 2px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  color: #1f2937;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  appearance: none;\n  -moz-appearance: none;\n  -webkit-appearance: none;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &:hover {\n    border-color: #3b82f6;\n  }\n\n  /* Custom dropdown arrow */\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n\n  /* Styling pro placeholder option */\n  option[value=\"\"] {\n    color: #9ca3af;\n    font-weight: 400;\n  }\n\n  option {\n    color: #1f2937;\n    font-weight: 500;\n\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 0.5rem center;\n  background-size: 16px 16px;\n"])),e=>e.hasIcon?"0.75rem 1.75rem 0.75rem 2.5rem":"0.75rem 1.75rem 0.75rem 0.75rem"),yi=P.A.button(tr||(tr=(0,A.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 2px solid #dc2626;\n  border-radius: 8px;\n  background: white;\n  color: #dc2626;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #fef2f2;\n    transform: translateY(-1px);\n  }\n"]))),ji=P.A.div(rr||(rr=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  /* Shadow indik\xe1tory na kraj\xedch */\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 40px;\n    pointer-events: none;\n    z-index: 2;\n    transition: opacity 0.3s ease;\n  }\n\n  /* Lev\xfd shadow */\n  &::before {\n    left: 0;\n    background: linear-gradient(to right, rgba(0,0,0,0.1), transparent);\n    opacity: ",";\n  }\n\n  /* Prav\xfd shadow */\n  &::after {\n    right: 0;\n    background: linear-gradient(to left, rgba(0,0,0,0.1), transparent);\n    opacity: ",";\n  }\n"])),e=>e.$showLeftShadow?1:0,e=>e.$showRightShadow?1:0),ki=P.A.div(ir||(ir=(0,A.A)(["\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow-x: auto;\n  overflow-y: visible;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  scroll-behavior: smooth;\n\n  /* Skryt\xfd scrollbar - m\xe1me \u0161ipky pro navigaci */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Firefox - skryt\xfd scrollbar */\n  scrollbar-width: none;\n"]))),wi=P.A.button(or||(or=(0,A.A)(["\n  position: fixed;\n  left: 50px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 9999;\n\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  border: 2px solid #e5e7eb;\n  background: ",";\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  /* Zobrazit kdy\u017e: 1) je pot\u0159eba scrollovat A 2) je hover nad tabulkou NEBO nad \u0161ipkou */\n  opacity: ",";\n  pointer-events: ",";\n  transform: translateY(-50%); /* V\u017edy stejn\xe1 velikost, \u017e\xe1dn\xfd scale */\n\n  &:hover:not(:disabled) {\n    background: rgba(248, 250, 252, 0.98);\n    border-color: #3b82f6;\n    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(-50%) scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  svg {\n    width: 22px;\n    height: 22px;\n    color: #3b82f6;\n  }\n"])),e=>e.$arrowHovered?"rgba(255, 255, 255, 0.98)":"rgba(255, 255, 255, 0.25)",e=>e.$visible&&(e.$tableHovered||e.$arrowHovered)?1:0,e=>e.$visible&&(e.$tableHovered||e.$arrowHovered)?"auto":"none"),Ai=(0,P.A)(wi)(ar||(ar=(0,A.A)(["\n  left: auto;\n  right: 50px;\n"]))),zi=P.A.table(sr||(sr=(0,A.A)(["\n  width: 100%;\n  border-collapse: collapse;\n"]))),_i=P.A.thead(lr||(lr=(0,A.A)(["\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n"]))),Si=P.A.tr(cr||(cr=(0,A.A)(["\n  background: ",";\n\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: "," !important;\n  }\n"])),e=>e.$showHighlighting?!1===e.$isActive?"#fef2f2":"#f0fdf4":e.$isEven?"#f8fafc":"white",e=>e.$showHighlighting&&!1===e.$isActive?"#fee2e2":e.$showHighlighting&&!0===e.$isActive?"#dcfce7":"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"),Ci=P.A.th(dr||(dr=(0,A.A)(["\n  padding: 1rem 0.75rem;\n  text-align: center;\n  font-weight: 600;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n  user-select: none;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  font-size: 0.875rem;\n  letter-spacing: 0.025em;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"]))),Ei=P.A.td(pr||(pr=(0,A.A)(["\n  padding: 0.75rem;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  font-size: 0.875rem;\n"]))),$i=P.A.button(ur||(ur=(0,A.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #3b82f6;\n  font-size: 1.25rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: #eff6ff;\n  }\n"]))),Ii=P.A.div(hr||(hr=(0,A.A)(["\n  padding: 1.5rem;\n  background: #f9fafb;\n  border-top: 2px solid #3b82f6;\n  border-bottom: 1px solid #d1d5db;\n"]))),Ni=P.A.div(mr||(mr=(0,A.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  gap: 1rem;\n"]))),Mi=P.A.div(gr||(gr=(0,A.A)(["\n  background: white;\n  border-radius: 8px;\n  padding: 1.25rem;\n  border-left: 4px solid #3b82f6;\n  box-shadow:\n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06);\n\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow:\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\n      0 4px 6px -2px rgba(0, 0, 0, 0.05);\n  }\n"]))),Pi=P.A.h4(xr||(xr=(0,A.A)(["\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1e293b;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Li=P.A.div(fr||(fr=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 1rem;\n  padding: 0.45rem 0;\n  border-bottom: 1px dashed #e5e7eb;\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]))),Ti=P.A.span(br||(br=(0,A.A)(["\n  font-weight: 600;\n  color: #64748b;\n  flex-shrink: 0;\n  white-space: nowrap;\n"]))),Di=P.A.span(vr||(vr=(0,A.A)(["\n  color: #1f2937;\n  text-align: right;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  flex: 1;\n  line-height: 1.5;\n"]))),Ri=P.A.div(yr||(yr=(0,A.A)(["\n  display: flex;\n  gap: 0.12rem;\n  justify-content: center;\n  align-items: center;\n"]))),Oi=P.A.button(jr||(jr=(0,A.A)(["\n  padding: 0.375rem;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: 4px;\n  color: #64748b;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 28px;\n  min-height: 28px;\n\n  &:hover {\n    background: #f1f5f9;\n    color: #1e293b;\n  }\n\n  &.toggle-active:hover {\n    color: #16a34a;\n    background: #f0fdf4;\n  }\n\n  &.toggle-inactive:hover {\n    color: #dc2626;\n    background: #fef2f2;\n  }\n\n  &.reset:hover {\n    color: #f59e0b;\n    background: #fffbeb;\n  }\n\n  &.edit:hover {\n    color: #3b82f6;\n    background: #eff6ff;\n  }\n\n  &.delete:hover {\n    color: #dc2626;\n    background: #fef2f2;\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n"]))),Vi=P.A.span(kr||(kr=(0,A.A)(["\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n\n  ","\n"])),e=>e.$active?"\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #86efac;\n  ":"\n    background: #fee2e2;\n    color: #991b1b;\n    border: 1px solid #fca5a5;\n  "),Hi=P.A.div(wr||(wr=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),Ui=P.A.div(Ar||(Ar=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #64748b;\n  font-weight: 500;\n"]))),Fi=P.A.div(zr||(zr=(0,A.A)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n"]))),Wi=P.A.button(_r||(_r=(0,A.A)(["\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  color: #374151;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Bi=P.A.select(Sr||(Sr=(0,A.A)(["\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n  color: #374151;\n  font-weight: 500;\n"]))),Zi=P.A.div(Cr||(Cr=(0,A.A)(["\n  position: relative;\n  width: 100%;\n\n  > svg:first-of-type {\n    position: absolute;\n    left: 0.5rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af;\n    z-index: 1;\n    pointer-events: none;\n    width: 12px !important;\n    height: 12px !important;\n  }\n"]))),Yi=P.A.button(Er||(Er=(0,A.A)(["\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.15rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 16px;\n  height: 16px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 10px !important;\n    height: 10px !important;\n  }\n"]))),Ji=P.A.input($r||($r=(0,A.A)(["\n  width: 100%;\n  padding: 0.5rem 2rem 0.5rem 2rem;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  background: #f9fafb;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    background: white;\n    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #9ca3af;\n    font-size: 0.75rem;\n  }\n"]))),Ki=P.A.button(Ir||(Ir=(0,A.A)(["\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #6b7280;\n  padding: 0.4rem 0.5rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  min-height: 32px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n    color: #3b82f6;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n"]))),Gi=P.A.button(Nr||(Nr=(0,A.A)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  svg {\n    width: 20px;\n    height: 20px;\n  }\n"]))),qi=P.A.div(Mr||(Mr=(0,A.A)(["\n  color: #dc2626;\n  font-weight: 600;\n  margin-top: 2rem;\n  padding: 1rem;\n  background: #fef2f2;\n  border-left: 4px solid #dc2626;\n  border-radius: 8px;\n"]))),Qi=P.A.div(Pr||(Pr=(0,A.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(248, 250, 252, 0.95);\n  backdrop-filter: blur(",");\n  -webkit-backdrop-filter: blur(",");\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  opacity: ",";\n  transition: opacity 0.5s ease-in-out, backdrop-filter 0.6s ease-in-out;\n  pointer-events: ",";\n\n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n"])),e=>e.$visible?"8px":"0px",e=>e.$visible?"8px":"0px",e=>e.$visible?1:0,e=>e.$visible?"auto":"none"),Xi=P.A.div(Lr||(Lr=(0,A.A)(["\n  width: 64px;\n  height: 64px;\n  border: 4px solid #e2e8f0;\n  border-top: 4px solid #3b82f6;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1.5rem;\n  transform: scale(",");\n  transition: transform 0.5s ease-in-out;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg) scale(1); }\n    100% { transform: rotate(360deg) scale(1); }\n  }\n"])),e=>e.$visible?1:.8),eo=P.A.div(Tr||(Tr=(0,A.A)(["\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #374151;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  transform: translateY(",");\n  opacity: ",";\n  transition: transform 0.5s ease-in-out 0.1s, opacity 0.5s ease-in-out 0.1s;\n"])),e=>e.$visible?"0":"10px",e=>e.$visible?1:0),no=P.A.div(Dr||(Dr=(0,A.A)(["\n  font-size: 0.875rem;\n  color: #6b7280;\n  text-align: center;\n  transform: translateY(",");\n  opacity: ",";\n  transition: transform 0.5s ease-in-out 0.15s, opacity 0.5s ease-in-out 0.15s;\n"])),e=>e.$visible?"0":"10px",e=>e.$visible?1:0),to=P.A.div(Rr||(Rr=(0,A.A)(["\n  filter: blur(",");\n  transition: filter 0.6s ease-in-out;\n  pointer-events: ",";\n"])),e=>e.$blurred?"3px":"0px",e=>e.$blurred?"none":"auto"),ro=P.A.div(Or||(Or=(0,A.A)(["\n  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n  border: 2px solid #0ea5e9;\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  color: white;\n  font-family: 'Courier New', monospace;\n  box-shadow: 0 8px 32px rgba(14, 165, 233, 0.3);\n"]))),io=P.A.div(Vr||(Vr=(0,A.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.75rem;\n  border-bottom: 2px solid rgba(14, 165, 233, 0.3);\n"]))),oo=P.A.h3(Hr||(Hr=(0,A.A)(["\n  margin: 0;\n  color: #0ea5e9;\n  font-size: 1.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),ao=P.A.div(Ur||(Ur=(0,A.A)(["\n  max-height: 400px;\n  overflow-y: auto;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid rgba(14, 165, 233, 0.2);\n"]))),so=P.A.div(Fr||(Fr=(0,A.A)(["\n  margin-bottom: 1rem;\n  &:last-child { margin-bottom: 0; }\n"]))),lo=P.A.div(Wr||(Wr=(0,A.A)(["\n  color: #0ea5e9;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n"]))),co=P.A.pre(Br||(Br=(0,A.A)(["\n  margin: 0;\n  color: #e2e8f0;\n  font-size: 0.75rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-all;\n  background: rgba(0, 0, 0, 0.2);\n  padding: 0.75rem;\n  border-radius: 6px;\n  border-left: 3px solid #0ea5e9;\n"]))),po=()=>{var e;const{token:n,username:t,userDetail:r,hasPermission:i}=(0,z.useContext)(S.cy),{start:o,setProgress:a,done:s,reset:l}=(0,z.useContext)(C.z),{showToast:c}=(0,z.useContext)(E.$o)||{},[d,p]=(0,z.useState)([]),[u,h]=(0,z.useState)(!0),[m,g]=(0,z.useState)(null),x=null===r||void 0===r?void 0:r.user_id,f=e=>{const n=x||"anon";return"".concat(e,"_").concat(n)},b=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const t=localStorage.getItem(f(e));return null!==t?JSON.parse(t):n}catch(m){return n}},v=(e,n)=>{try{localStorage.setItem(f(e),JSON.stringify(n))}catch(m){}},[y,j]=(0,z.useState)(()=>b("users_globalFilter","")),[k,A]=(0,z.useState)(()=>b("users_departmentFilter","")),[P,O]=(0,z.useState)(()=>b("users_groupFilter","")),[H,U]=(0,z.useState)(()=>b("users_locationFilter","")),[F,W]=(0,z.useState)(()=>b("users_positionFilter","")),[B,Z]=(0,z.useState)(()=>b("users_statusFilter","all")),[Y,J]=(0,z.useState)(()=>b("users_showFilters",!1)),[K,G]=(0,z.useState)(()=>b("users_showExpandedFilters",!1)),[q,Q]=(0,z.useState)(()=>b("users_columnFilters",{})),[X,ee]=(0,z.useState)(()=>b("users_showRowHighlighting",!0)),[ne,te]=(0,z.useState)(()=>b("users_showDashboard",!0)),[re,ie]=(0,z.useState)(()=>b("users_pageSize",25)),[oe,ae]=(0,z.useState)(()=>b("users_pageIndex",0)),[se,le]=(0,z.useState)(()=>b("users_sorting",[])),[ce,pe]=(0,z.useState)({}),[ue,he]=(0,z.useState)({}),[me,ge]=(0,z.useState)(""),[xe,fe]=(0,z.useState)({isOpen:!1,mode:"create",userData:null}),[be,ve]=(0,z.useState)(()=>{const e=b("users_ordersCountCache",null);if(e&&e.timestamp){if(Date.now()-e.timestamp<6e5)return e.data||{}}return{}}),[ye,je]=(0,z.useState)(!1),[ke,we]=(0,z.useState)(()=>{const e=b("users_ordersCountCache",null);return(null===e||void 0===e?void 0:e.loadTime)||null}),[Ae,ze]=(0,z.useState)(!1),[_e,Se]=(0,z.useState)(!1),[Ce,Ee]=(0,z.useState)(null),[$e,Ie]=(0,z.useState)(null),[Ne,Me]=(0,z.useState)([]),[Pe,Le]=(0,z.useState)(()=>b("users_showDebug",!1)),[Te,De]=(0,z.useState)(null),[Re,Oe]=(0,z.useState)(null),[Ve,He]=(0,z.useState)(!1),[Ue,Fe]=(0,z.useState)(!1),[We,Be]=(0,z.useState)(!1),[Ze,Ye]=(0,z.useState)(!1),[Je,Ke]=(0,z.useState)(!1),[Ge,qe]=(0,z.useState)(!1),[Qe,Xe]=(0,z.useState)(0),[en,nn]=(0,z.useState)(!1),tn=(0,z.useRef)(null),rn=(0,z.useRef)(null),on=(0,z.useCallback)(e=>{rn.current&&(rn.current.removeEventListener("mouseenter",ln),rn.current.removeEventListener("mouseleave",cn)),rn.current=e,e&&(e.addEventListener("mouseenter",ln),e.addEventListener("mouseleave",cn))},[]),an=(0,z.useCallback)(e=>{tn.current&&(tn.current.removeEventListener("scroll",sn),window.removeEventListener("resize",sn)),tn.current=e,e&&(e.addEventListener("scroll",sn),window.addEventListener("resize",sn),setTimeout(()=>sn(),100))},[]),sn=(0,z.useCallback)(()=>{if(!tn.current)return;const{scrollLeft:e,scrollWidth:n,clientWidth:t}=tn.current;He(e>5),Fe(e<n-t-5),Be(e>1),Ye(e<n-t-1)},[]),ln=(0,z.useCallback)(()=>{Ke(!0)},[]),cn=(0,z.useCallback)(()=>{Ke(!1)},[]),dn=(0,z.useCallback)(()=>{if(tn.current){const e=.8*tn.current.clientWidth;tn.current.scrollBy({left:-e,behavior:"smooth"})}},[]),pn=(0,z.useCallback)(()=>{if(tn.current){const e=.8*tn.current.clientWidth;tn.current.scrollBy({left:e,behavior:"smooth"})}},[]),un=(0,z.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{g(null),h(!0),e||o();const r=await(0,$.Ym)({token:n,username:t,_cacheBust:Date.now()});if(De(r),e||a(60),!Array.isArray(r))throw new Error("API nevr\xe1tilo pole u\u017eivatel\u016f");const i={};r.forEach(e=>{const n=e.id||e.user_id;i[n]=(i[n]||0)+1});const l=Object.entries(i).filter(e=>{let[n,t]=e;return t>1});l.length>0&&(console.warn("\u26a0\ufe0f DUPLICITN\xcd U\u017dIVATEL\xc9 Z API:",l),console.warn("\ud83d\udccb Detail duplicitn\xedch u\u017eivatel\u016f:",l.map(e=>{let[n]=e;return r.filter(e=>(e.id||e.user_id)==n)})));const c=r.map(e=>{var n,t,r,i,o,a,s,l,c,d,p,u,h,m,g,x;return{id:e.id||e.user_id,username:e.username||e.prihlas_jmeno||"N/A",surname:e.prijmeni||e.surname||"N/A",name:e.jmeno||e.name||"N/A",titul_pred:e.titul_pred||"",titul_za:e.titul_za||"",fullName:[e.titul_pred,e.prijmeni||e.surname,e.jmeno||e.name,e.titul_za].filter(Boolean).join(" ")||"N/A",email:e.email||"N/A",location:(null===(n=e.lokalita_nazev)||void 0===n?void 0:n.trim())||(null===(t=e.lokalita)||void 0===t?void 0:t.trim())||(null===(r=e.location)||void 0===r?void 0:r.trim())||"",department:(null===(i=e.usek_zkr)||void 0===i?void 0:i.trim())||(null===(o=e.usek_nazev)||void 0===o?void 0:o.trim())||(null===(a=e.department)||void 0===a?void 0:a.trim())||(null===(s=e.oddeleni)||void 0===s?void 0:s.trim())||"",position:(null===(l=e.nazev_pozice)||void 0===l?void 0:l.trim())||(null===(c=e.pozice_nazev)||void 0===c?void 0:c.trim())||"object"===typeof e.pozice&&(null===(d=e.pozice)||void 0===d||null===(p=d.nazev_pozice)||void 0===p?void 0:p.trim())||"object"===typeof e.pozice&&(null===(u=e.pozice)||void 0===u||null===(h=u.nazev)||void 0===h?void 0:h.trim())||"string"===typeof e.pozice&&e.pozice.trim()||(null===(m=e.funkce)||void 0===m?void 0:m.trim())||(null===(g=e.position)||void 0===g?void 0:g.trim())||(null===(x=e.title)||void 0===x?void 0:x.trim())||"",phone:e.phone||e.telefon||"N/A",active:1===e.aktivni||"1"===e.aktivni||!0===e.aktivni||"a"===e.active||!0===e.active,vynucena_zmena_hesla:1===e.vynucena_zmena_hesla||"1"===e.vynucena_zmena_hesla||!0===e.vynucena_zmena_hesla?1:0,roles:e.roles||[],direct_rights:e.direct_rights||[],group_name:e.roles&&e.roles.length>0?e.roles.map(e=>e.nazev_role||e.nazev).filter(Boolean).sort((e,n)=>e.localeCompare(n,"cs")).join(", "):e.group_name||e.nazev_role||"Bez role",dt_activity:e.dt_activity||e.dt_posledni_aktivita||e.posl_aktivita||null}});p(c),e||s()}catch(r){if(g("Nepoda\u0159ilo se na\u010d\xedst u\u017eivatele. Zkuste to pros\xedm znovu."),c&&c("Chyba p\u0159i na\u010d\xedt\xe1n\xed u\u017eivatel\u016f",{type:"error"}),!e){try{s()}catch(i){}try{const e=(0,$.tV)(r)||"";"chyba_serveru"!==e&&"server_error"!==e||setTimeout(()=>{l&&l()},2200)}catch(d){}}}finally{setTimeout(()=>h(!1),500)}},[n,t,o,a,s,l,c,Qe]);(0,z.useEffect)(()=>{n&&t?(un(en),en&&nn(!1)):(g("Chyb\xed autentiza\u010dn\xed token nebo u\u017eivatelsk\xe9 jm\xe9no. P\u0159ihlaste se pros\xedm znovu."),h(!1))},[n,t,un,en]);const hn=(0,z.useCallback)(async()=>{if(n&&t)try{const e=await(0,$.JT)({token:n,username:t});Me(e||[])}catch(m){}},[n,t]);(0,z.useEffect)(()=>{hn();const e=setInterval(hn,3e4);return()=>clearInterval(e)},[hn]);const mn=(0,z.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!d.length||!n||!t)return;if(!e){const e=b("users_ordersCountCache",null);if(e&&e.timestamp&&e.data){if(Date.now()-e.timestamp<6e5)return ve(e.data),void we(e.loadTime)}}const r=performance.now();je(!0);const i={};d.forEach(e=>{e.id&&(i[e.id]=void 0)}),ve(i);const o=d.map(async e=>{if(!e.id)return{user:e,count:0,error:"No user ID"};try{var r;const i=new Promise((e,n)=>setTimeout(()=>n(new Error("Request timeout")),1e4)),o=(0,I.nG)({token:n,username:t,user_id:e.id}),a=(null===(r=(await Promise.race([o,i])).data)||void 0===r?void 0:r.total_orders_count)||0;return ve(n=>(0,w.A)((0,w.A)({},n),{},{[e.id]:a})),{user:e,count:a,error:null}}catch(i){return ve(n=>(0,w.A)((0,w.A)({},n),{},{[e.id]:0})),{user:e,count:0,error:i.message}}}),a=await Promise.allSettled(o);const s={};a.forEach((e,n)=>{if("fulfilled"===e.status){const{user:n,count:t,error:r}=e.value;s[n.id]=t,r?0:0}else{0;const e=d[n];e&&e.id&&(s[e.id]=0)}}),ve(s),je(!1);const l=performance.now(),c=Math.round(l-r);we(c),v("users_ordersCountCache",{data:s,timestamp:Date.now(),loadTime:c})},[d,n,t]);(0,z.useEffect)(()=>{d.length>0&&n&&t&&mn(!1)},[d.length,n,t]);const gn=(0,z.useMemo)(()=>{const e=d.length,n=d.filter(e=>e.active).length,t=e-n,r={};d.forEach(e=>{const n=e.department||"Bez \xfaseku";r[n]=(r[n]||0)+1});const i={};return d.forEach(e=>{const n=e.group_name||"Bez skupiny";i[n]=(i[n]||0)+1}),{total:e,active:n,inactive:t,departments:r,groups:i}},[d]),xn=(0,z.useCallback)(e=>e?String(e).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",[]),fn=(0,z.useMemo)(()=>d.filter(e=>{if("active"===B&&!e.active)return!1;if("inactive"===B&&e.active)return!1;if(y){const n=xn(y);if(!(xn(e.username).includes(n)||xn(e.fullName).includes(n)||xn(e.email).includes(n)||xn(e.location).includes(n)||xn(e.department).includes(n)||xn(e.position).includes(n)||xn(e.group_name).includes(n)))return!1}if(k&&e.department!==k)return!1;if(P&&e.group_name!==P)return!1;if(H&&e.location!==H)return!1;if(F&&e.position!==F)return!1;if(q.username&&!xn(e.username).includes(xn(q.username)))return!1;if(q.fullName&&!xn(e.fullName).includes(xn(q.fullName)))return!1;if(q.email&&!xn(e.email).includes(xn(q.email)))return!1;if(q.location&&!xn(e.location).includes(xn(q.location)))return!1;if(q.department&&!xn(e.department).includes(xn(q.department)))return!1;if(q.position&&!xn(e.position).includes(xn(q.position)))return!1;if(q.group_name&&!xn(e.group_name).includes(xn(q.group_name)))return!1;if(q.rights_count){const n=q.rights_count.toLowerCase(),t=new Map;e.roles&&e.roles.forEach(e=>{e.rights&&e.rights.forEach(e=>{const n=e.kod_prava||e.nazev;n&&t.set(n,!0)})}),e.direct_rights&&e.direct_rights.forEach(e=>{const n=e.kod_prava||e.nazev;n&&t.set(n,!0)});const r=t.size;if(!String(r).includes(n))return!1}if(q.orders_count){const n=q.orders_count.toLowerCase(),t=be[e.id]||0;if(!String(t).includes(n))return!1}return!0}),[d,y,B,k,P,H,F,q,xn]),bn=(0,z.useMemo)(()=>[{id:"expander",header:"",size:50,cell:e=>{let{row:n}=e;return(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)($i,{onClick:()=>{pe(e=>(0,w.A)((0,w.A)({},e),{},{[n.id]:!e[n.id]}))},children:(0,V.jsx)(N.g,{icon:ce[n.id]?M.EZy:M.QLR})})})}},{accessorKey:"username",header:"Username",size:180,maxSize:180,cell:e=>{let{row:n}=e;return(0,V.jsxs)("div",{style:{fontWeight:600,color:"#1e293b"},children:[n.original.username,(0,V.jsxs)("span",{style:{fontSize:"0.75rem",color:"#94a3b8",marginLeft:"0.5rem",fontWeight:400,verticalAlign:"super"},children:["#",n.original.id]})]})}},{accessorKey:"fullName",header:"Jm\xe9no",size:160,maxSize:160,cell:e=>(0,V.jsx)("div",{style:{fontWeight:500},children:e.getValue()})},{accessorKey:"email",header:"E-mail",cell:e=>(0,V.jsx)("div",{children:e.getValue()})},{accessorKey:"phone",header:"Telefon",cell:e=>(0,V.jsx)("div",{style:{textAlign:"center"},children:e.getValue()})},{accessorKey:"location",header:"Lokalita",cell:e=>{const n=e.getValue();return(0,V.jsx)("div",{style:{textAlign:"center",fontSize:"0.875rem",color:n?"inherit":"#9ca3af",fontStyle:n?"normal":"italic"},children:n||"\u2014"})}},{accessorKey:"department",header:"\xdasek",cell:e=>{const n=e.getValue();return(0,V.jsx)("div",{style:{textAlign:"center",color:n?"inherit":"#9ca3af",fontStyle:n?"normal":"italic"},children:n||"\u2014"})}},{accessorKey:"position",header:"Pozice",cell:e=>{const n=e.getValue();return(0,V.jsx)("div",{style:{textAlign:"center",fontSize:"0.875rem",fontWeight:500,color:n?"inherit":"#9ca3af",fontStyle:n?"normal":"italic"},children:n||"\u2014"})}},{accessorKey:"group_name",header:"Role",cell:e=>(0,V.jsx)("div",{style:{textAlign:"left",fontWeight:500,paddingLeft:"1rem"},children:e.getValue()})},{id:"rights_count",header:"Pr\xe1va",cell:e=>{let{row:n}=e;const t=new Map;n.original.roles&&Array.isArray(n.original.roles)&&n.original.roles.forEach(e=>{e.rights&&Array.isArray(e.rights)&&e.rights.forEach(e=>{const n=e.kod_prava||e.nazev||e.name||e.code;n&&t.set(n,!0)})}),n.original.direct_rights&&Array.isArray(n.original.direct_rights)&&n.original.direct_rights.forEach(e=>{const n=e.kod_prava||e.nazev||e.name||e.code;n&&t.set(n,!0)});const r=t.size;return(0,V.jsx)("div",{style:{textAlign:"center",fontWeight:600,color:r>0?"#16a34a":"#94a3b8",fontSize:"0.875rem"},children:r>0?r:"0"})}},{id:"orders_count",header:"Objedn\xe1vky",accessorFn:e=>be[e.id]||0,cell:e=>{let{row:n}=e;const t=be[n.original.id],r=void 0===t;return(0,V.jsx)("div",{style:{textAlign:"center",fontWeight:600,color:r?"#94a3b8":t>0?"#3b82f6":"#94a3b8",fontSize:"0.875rem",position:"relative"},title:r?"Na\u010d\xedt\xe1m po\u010det objedn\xe1vek...":"Po\u010det objedn\xe1vek: ".concat(t),children:r?(0,V.jsx)("span",{style:{animation:"pulse 0.8s ease-in-out infinite",opacity:.7,fontSize:"0.7rem"},children:"\u27f3"}):(0,V.jsx)("span",{style:{fontWeight:t>0?700:400,color:t>0?"#3b82f6":"#94a3b8"},children:t})})}},{accessorKey:"vynucena_zmena_hesla",header:"Vynucen\xed",size:80,maxSize:80,cell:e=>{let{row:n}=e;const t=1===n.original.vynucena_zmena_hesla;return(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.1rem",cursor:"pointer",padding:"4px"},title:t?"U\u017eivatel mus\xed zm\u011bnit heslo p\u0159i p\u0159\xed\u0161t\xedm p\u0159ihl\xe1\u0161en\xed":"Norm\xe1ln\xed p\u0159ihla\u0161ov\xe1n\xed",onClick:()=>jn(n.original),children:(0,V.jsx)(N.g,{icon:t?M.zpE:M.wRm,style:{color:t?"#f59e0b":"#94a3b8",transition:"color 0.2s ease"}})})}},{accessorKey:"active",header:"Status",size:80,maxSize:80,cell:e=>{let{row:n}=e;return(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",fontSize:"1.25rem"},title:n.original.active?"Aktivn\xed":"Neaktivn\xed",children:(0,V.jsx)(N.g,{icon:n.original.active?M.SGM:M.s0Q,style:{color:n.original.active?"#16a34a":"#dc2626"}})})}},{id:"actions",size:160,maxSize:160,header:()=>(0,V.jsx)("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,V.jsx)(N.g,{icon:M.zm_,style:{color:"#eab308",fontSize:"16px"}})}),cell:e=>{let{row:n}=e;const r=n.original.username===t,o=i&&i("USER_DELETE");return(0,V.jsxs)(Ri,{children:[(0,V.jsx)(Oi,{className:n.original.active?"toggle-active":"toggle-inactive",title:r?"Nem\u016f\u017eete deaktivovat s\xe1m sebe":n.original.active?"Deaktivovat u\u017eivatele":"Aktivovat u\u017eivatele",onClick:r?void 0:()=>yn(n.original),disabled:r,style:{opacity:r?.4:1,cursor:r?"not-allowed":"pointer"},children:(0,V.jsx)(N.g,{icon:n.original.active?M.npb:M.tKC})}),(0,V.jsx)(Oi,{className:"reset",title:"Resetovat heslo",onClick:()=>kn(n.original),children:(0,V.jsx)(N.g,{icon:M.bMg})}),(0,V.jsx)(Oi,{className:"edit",title:"Upravit u\u017eivatele",onClick:()=>wn(n.original),children:(0,V.jsx)(N.g,{icon:M.MT7})}),(0,V.jsx)(Oi,{className:"delete",title:r?"Nem\u016f\u017eete smazat s\xe1m sebe":o?"Trvale smazat u\u017eivatele z datab\xe1ze":"Deaktivovat u\u017eivatele (nem\xe1te pr\xe1vo USER_DELETE)",onClick:r?void 0:()=>An(n.original),disabled:r,style:{opacity:r?.4:1,cursor:r?"not-allowed":"pointer"},children:(0,V.jsx)(N.g,{icon:M.yLS})})]})}}],[ce,be,i]),vn=(0,L.N4)({data:fn,columns:bn,getRowId:e=>String(e.id),state:{globalFilter:y,sorting:se,pagination:{pageSize:re,pageIndex:oe}},onGlobalFilterChange:j,onSortingChange:le,getCoreRowModel:(0,T.HT)(),getSortedRowModel:(0,T.h5)(),getFilteredRowModel:(0,T.hM)(),getExpandedRowModel:(0,T.D0)(),getPaginationRowModel:(0,T.kW)(),enableExpanding:!0,getRowCanExpand:()=>!0,manualPagination:!1});(0,z.useEffect)(()=>{vn&&(vn.setPageSize(re),vn.setPageIndex(oe))},[re,oe,vn]),(0,z.useEffect)(()=>{v("users_globalFilter",y)},[y,x]),(0,z.useEffect)(()=>{v("users_departmentFilter",k)},[k,x]),(0,z.useEffect)(()=>{v("users_groupFilter",P)},[P,x]),(0,z.useEffect)(()=>{v("users_locationFilter",H)},[H,x]),(0,z.useEffect)(()=>{v("users_positionFilter",F)},[F,x]),(0,z.useEffect)(()=>{v("users_statusFilter",B)},[B,x]),(0,z.useEffect)(()=>{v("users_showFilters",Y)},[Y,x]),(0,z.useEffect)(()=>{v("users_showExpandedFilters",K)},[K,x]),(0,z.useEffect)(()=>{v("users_columnFilters",q)},[q,x]),(0,z.useEffect)(()=>{v("users_showRowHighlighting",X)},[X,x]),(0,z.useEffect)(()=>{v("users_showDashboard",ne)},[ne,x]),(0,z.useEffect)(()=>{v("users_showDebug",Pe)},[Pe,x]),(0,z.useEffect)(()=>{v("users_sorting",se)},[se]),(0,z.useEffect)(()=>{if(vn&&vn.getPageCount()>0){const e=vn.getPageCount()-1;oe>e&&(ae(0),v("users_pageIndex",0),vn.setPageIndex(0))}},[oe,vn]);const yn=e=>{e.username!==t?(Ee(e),Ie("toggle"),ze(!0)):c&&c("Nem\u016f\u017eete deaktivovat s\xe1m sebe",{type:"warning"})},jn=async e=>{const r=1===e.vynucena_zmena_hesla,i=!r;console.log("\ud83d\udd04 Toggle force password change:",{userId:e.id,currentValue:r,newValue:i,userData:e});try{o(),a(30);const r=await(0,$.iK)({token:n,username:t,id:e.id,vynucena_zmena_hesla:i?1:0});console.log("\u2705 Toggle API result:",r),a(70);const l=d.map(n=>n.id===e.id?(0,w.A)((0,w.A)({},n),{},{vynucena_zmena_hesla:i?1:0}):n);if(p(l),a(100),s(),c){const n=e.fullName||e.username,t=i?"vynut\xed zm\u011bnu hesla":"zru\u0161\xed vynucen\xed zm\u011bny hesla";c("\u2713 U\u017eivatel ".concat(n," - ").concat(t),{type:"success"})}}catch(m){s();const n=m.message||"Chyba p\u0159i zm\u011bn\u011b nastaven\xed hesla";c&&c("\u2717 ".concat(n),{type:"error"})}},kn=e=>{Ee(e),Se(!0)},wn=async e=>{try{var r;let o=null;try{o=await(0,$.VU)({token:n,username:t,id:e.id})}catch(i){console.error("\u274c handleEditUser - API error:",i)}if(!o||!o.usek_id&&(null===(r=o.usek)||void 0===r||!r.id)){const n=null===Te||void 0===Te?void 0:Te.find(n=>(n.id||n.user_id)===e.id);n&&(o=(0,w.A)((0,w.A)((0,w.A)({},o),n),{},{id:n.id||n.user_id,username:n.username||n.prihlas_jmeno,jmeno:n.jmeno||n.name,prijmeni:n.prijmeni||n.surname}))}fe({isOpen:!0,mode:"edit",userData:o})}catch(m){c&&c("Chyba p\u0159i na\u010d\xedt\xe1n\xed detailu u\u017eivatele",{type:"error"})}},An=e=>{e.username!==t?(Ee(e),Ie("delete"),ze(!0)):c&&c("Nem\u016f\u017eete smazat s\xe1m sebe",{type:"warning"})},zn=(0,z.useCallback)(function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.preventDefault();let r=null;const i=e.target;if(t)r=t;else if(i&&i.closest("td")){var o;const e=i.closest("td");r={value:(null===(o=e.textContent)||void 0===o?void 0:o.trim())||"",element:e}}Oe({x:e.clientX,y:e.clientY,user:n,selectedData:r})},[]),_n=(0,z.useCallback)(()=>{null!==Re&&void 0!==Re&&Re.user&&wn(Re.user),Oe(null)},[Re]),Sn=(0,z.useCallback)(()=>{null!==Re&&void 0!==Re&&Re.user&&An(Re.user),Oe(null)},[Re]),Cn=(0,z.useCallback)(()=>{null!==Re&&void 0!==Re&&Re.user&&(Ee(Re.user),Ie("toggle"),ze(!0)),Oe(null)},[Re]),En=()=>{Z(e=>"all"===e?"active":"active"===e?"inactive":"all")},$n=()=>{Q({})},In=()=>{if(Object.values(ce).some(e=>e))pe({});else{const e={};fn.forEach((n,t)=>{e[t]=!0}),pe(e)}},Nn=()=>{ee(!X)},Mn=()=>{c&&c("Aktualizuji po\u010dty objedn\xe1vek z datab\xe1ze...",{type:"info"}),mn(!0)},Pn=()=>{const e=!ne;te(e),v("users_showDashboard",e)},Ln=(0,z.useMemo)(()=>[...new Set(d.map(e=>e.department))].sort(),[d]),Tn=(0,z.useMemo)(()=>[...new Set(d.map(e=>e.group_name))].sort(),[d]),Dn=(0,z.useMemo)(()=>[...new Set(d.map(e=>e.location))].sort(),[d]),Rn=(0,z.useMemo)(()=>[...new Set(d.map(e=>e.position))].sort(),[d]);return u&&0===d.length?(0,V.jsxs)(Qi,{$visible:!0,children:[(0,V.jsx)(Xi,{$visible:!0}),(0,V.jsx)(eo,{$visible:!0,children:"Na\u010d\xedt\xe1m u\u017eivatele..."}),(0,V.jsx)(no,{$visible:!0,children:"Pros\xedm \u010dekejte"})]}):m&&0===d.length?(0,V.jsx)(Jr,{children:(0,V.jsx)(qi,{children:m})}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(Jr,{children:[(0,V.jsxs)(Qi,{$visible:u,children:[(0,V.jsx)(Xi,{$visible:u}),(0,V.jsx)(eo,{$visible:u,children:"Aktualizuji data..."}),(0,V.jsx)(no,{$visible:u,children:"Pros\xedm \u010dekejte"})]}),(0,V.jsxs)(to,{$blurred:u,children:[(0,V.jsxs)(Kr,{children:[(0,V.jsx)(Gr,{children:(0,V.jsx)(Yr.z,{text:"Obnovit seznam u\u017eivatel\u016f z datab\xe1ze (force reload)",icon:"warning",preferredPosition:"bottom",children:(0,V.jsx)(qr,{onClick:un,children:(0,V.jsx)(N.g,{icon:M.OtC})})})}),(0,V.jsxs)(Qr,{children:["Spr\xe1va u\u017eivatel\u016f",(0,V.jsx)(N.g,{icon:M.gdJ})]})]}),(0,V.jsxs)(Xr,{children:[!ne&&(0,V.jsx)(Yr.z,{text:"Zobrazit p\u0159ehledov\xfd dashboard",icon:"info",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:Pn,children:[(0,V.jsx)(N.g,{icon:M.uGS}),"Dashboard"]})}),!Y&&(0,V.jsx)(Yr.z,{text:"Zobrazit pokro\u010dil\xe9 filtry",icon:"info",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:()=>{J(!0),v("users_showFilters",!0)},children:[(0,V.jsx)(N.g,{icon:M.mRM}),"Filtr"]})}),(0,V.jsx)(Yr.z,{text:"Export seznamu u\u017eivatel\u016f do CSV",icon:"success",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:()=>{c&&c("Export u\u017eivatel\u016f bude dostupn\xfd brzy",{type:"info"})},children:[(0,V.jsx)(N.g,{icon:M.o1d}),"Export"]})}),(0,V.jsx)(Yr.z,{text:"Vytvo\u0159it nov\xe9ho u\u017eivatele",icon:"success",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{$primary:!0,onClick:()=>{fe({isOpen:!0,mode:"create",userData:null})},children:[(0,V.jsx)(N.g,{icon:M.QLR}),"P\u0159idat u\u017eivatele"]})})]}),Pe&&Te&&(0,V.jsxs)(ro,{children:[(0,V.jsxs)(io,{children:[(0,V.jsxs)(oo,{children:[(0,V.jsx)(N.g,{icon:M.IP$}),"\ud83d\udd0d DEBUG - Surov\xe1 data z API (users/list)"]}),(0,V.jsxs)(ei,{onClick:()=>{const e=!Pe;Le(e),v("users_showDebug",e)},children:[(0,V.jsx)(N.g,{icon:M.GRI}),"Skr\xfdt debug"]})]}),(0,V.jsxs)(ao,{children:[(0,V.jsxs)(so,{children:[(0,V.jsx)(lo,{children:"\ud83d\udcca Z\xe1kladn\xed info:"}),(0,V.jsx)(co,{children:"Po\u010det u\u017eivatel\u016f: ".concat(Te.length,"\nU\u017eivatel\xe9 s ID: ").concat(Te.map(e=>"".concat(e.id||e.user_id," (").concat(e.username||e.prihlas_jmeno,")")).join(", "))})]}),(0,V.jsxs)(so,{children:[(0,V.jsx)(lo,{children:"\ud83d\uded2 Po\u010dty objedn\xe1vek:"}),(0,V.jsx)(co,{children:"Na\u010dteno po\u010dt\u016f: ".concat(Object.keys(be).length,"\n").concat(Object.entries(be).map(e=>{let[n,t]=e;const r=d.find(e=>e.id===parseInt(n));return"  - User ".concat(n," (").concat((null===r||void 0===r?void 0:r.username)||"Nezn\xe1m\xfd","): ").concat(void 0===t?"na\u010d\xedt\xe1...":t)}).join("\n"),"\n\nStav ordersCount:\n").concat(JSON.stringify(be,null,2))})]}),Te[0]&&(0,V.jsxs)(so,{children:[(0,V.jsx)(lo,{children:"\ud83d\udcdd Prvn\xed u\u017eivatel (struktura):"}),(0,V.jsx)(co,{children:JSON.stringify(Te[0],null,2)})]}),(0,V.jsxs)(so,{children:[(0,V.jsx)(lo,{children:"\ud83d\uddc2\ufe0f V\u0161echna data (JSON):"}),(0,V.jsx)(co,{children:JSON.stringify(Te,null,2)})]})]})]}),ne&&(0,V.jsxs)(ni,{children:[(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,V.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsx)(N.g,{icon:M.uGS,style:{color:"#3b82f6"}}),"Dashboard u\u017eivatel\u016f"]}),(0,V.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:(0,V.jsx)(Yr.z,{text:"Skr\xfdt dashboard a zobrazit pouze tabulku u\u017eivatel\u016f",icon:"info",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:Pn,children:[(0,V.jsx)(N.g,{icon:M.GRI}),"Skr\xfdt"]})})})]}),(0,V.jsxs)(ti,{children:[(0,V.jsxs)(ri,{$color:"#16a34a",children:[(0,V.jsxs)(oi,{style:{marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,V.jsxs)(si,{style:{fontSize:"0.875rem",fontWeight:600,color:"#16a34a",margin:0},children:[(0,V.jsx)(N.g,{icon:M.pCJ,style:{marginRight:"0.5rem"}}),"Aktivn\xed u\u017eivatel\xe9 (",Ne.length,")"]}),(0,V.jsx)("button",{onClick:hn,style:{background:"none",border:"none",cursor:"pointer",color:"#16a34a",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(22, 163, 74, 0.1)",e.currentTarget.style.transform="rotate(180deg)"},onMouseLeave:e=>{e.currentTarget.style.background="none",e.currentTarget.style.transform="rotate(0deg)"},title:"Obnovit seznam",children:(0,V.jsx)(N.g,{icon:M.OtC,size:"sm"})})]}),(0,V.jsx)("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.35rem",paddingRight:"0.25rem"},children:0===Ne.length?(0,V.jsx)("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"#9ca3af",fontSize:"0.875rem"},children:"\u017d\xe1dn\xed aktivn\xed u\u017eivatel\xe9"}):Ne.slice(0,8).map((e,n)=>{const t=new Date,r=new Date(e.dt_posledni_aktivita),i=Math.floor((t-r)/1e3),o=Math.floor(i/60),a=i<270?"active":i<300?"warning":"inactive";let s="";s=i<60?"".concat(i,"s"):"".concat(o,"m");const l=(0,D.fn)(r);return(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.35rem 0.5rem",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="rgba(0, 0, 0, 0.02)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,V.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",flexShrink:0,background:"active"===a?"#22c55e":"warning"===a?"#f59e0b":"#ef4444"}}),(0,V.jsx)("div",{style:{fontSize:"0.875rem",color:"#1f2937",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:e.cele_jmeno}),(0,V.jsx)("div",{style:{fontSize:"0.75rem",color:"#9ca3af",fontWeight:400,whiteSpace:"nowrap",flexShrink:0,minWidth:"150px",textAlign:"right"},children:l}),(0,V.jsx)("div",{style:{fontSize:"0.75rem",color:"#9ca3af",fontWeight:400,flexShrink:0,minWidth:"40px",textAlign:"right"},children:s})]},n)})})]}),(0,V.jsxs)(ii,{$color:"#3b82f6",$clickable:!0,$isActive:"all"===B,onClick:()=>Z("all"),title:"Klikn\u011bte pro zobrazen\xed v\u0161ech u\u017eivatel\u016f",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:gn.total}),(0,V.jsx)(ai,{$color:"#3b82f6",children:(0,V.jsx)(N.g,{icon:M.gdJ})})]}),(0,V.jsx)(si,{children:"Celkem u\u017eivatel\u016f v syst\xe9mu"})]}),(0,V.jsxs)(ii,{$color:"#16a34a",$clickable:!0,$isActive:"active"===B,onClick:()=>Z("active"),title:"Klikn\u011bte pro filtrov\xe1n\xed pouze aktivn\xedch u\u017eivatel\u016f",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:gn.active}),(0,V.jsx)(ai,{$color:"#16a34a",children:(0,V.jsx)(N.g,{icon:M.pCJ})})]}),(0,V.jsx)(si,{children:"Aktivn\xed u\u017eivatel\xe9"})]}),(0,V.jsxs)(ii,{$color:"#dc2626",$clickable:!0,$isActive:"inactive"===B,onClick:()=>Z("inactive"),title:"Klikn\u011bte pro filtrov\xe1n\xed pouze neaktivn\xedch u\u017eivatel\u016f",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:gn.inactive}),(0,V.jsx)(ai,{$color:"#dc2626",children:(0,V.jsx)(N.g,{icon:M.c7y})})]}),(0,V.jsx)(si,{children:"Neaktivn\xed u\u017eivatel\xe9"})]}),(0,V.jsxs)(ii,{$color:"#f59e0b",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:Object.keys(gn.departments).length}),(0,V.jsx)(ai,{$color:"#f59e0b",children:(0,V.jsx)(N.g,{icon:M.URI})})]}),(0,V.jsx)(si,{children:"Po\u010det \xfasek\u016f"})]}),(0,V.jsxs)(ii,{$color:"#8b5cf6",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:Object.keys(gn.groups).length}),(0,V.jsx)(ai,{$color:"#8b5cf6",children:(0,V.jsx)(N.g,{icon:M.V2x})})]}),(0,V.jsx)(si,{children:"Po\u010det skupin/rol\xed"})]}),(0,V.jsxs)(ii,{$color:"#ec4899",children:[(0,V.jsxs)(oi,{children:[(0,V.jsx)(li,{children:Object.keys(be).length>0?Object.values(be).filter(e=>e>0).length:"..."}),(0,V.jsx)(ai,{$color:"#ec4899",children:(0,V.jsx)(N.g,{icon:M.pCJ})})]}),(0,V.jsx)(si,{children:"U\u017eivatel\u016f s objedn\xe1vkami"})]})]})]}),Y&&(0,V.jsxs)(ci,{children:[(0,V.jsxs)(di,{children:[(0,V.jsxs)(pi,{children:[(0,V.jsx)(N.g,{icon:M.mRM}),"Filtry a vyhled\xe1v\xe1n\xed"]}),(0,V.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,V.jsx)(Yr.z,{text:"Vymazat v\u0161echny filtry a zobrazit v\u0161echny u\u017eivatele",icon:"warning",preferredPosition:"bottom",children:(0,V.jsxs)(yi,{onClick:()=>{j(""),A(""),O(""),U(""),W(""),Z("all"),Q({})},children:[(0,V.jsx)(N.g,{icon:M.IP$}),"Vymazat filtry"]})}),(0,V.jsx)(Yr.z,{text:K?"Skr\xfdt roz\u0161\xed\u0159en\xe9 filtry (zobrazit pouze z\xe1kladn\xed vyhled\xe1v\xe1n\xed)":"Zobrazit roz\u0161\xed\u0159en\xe9 filtry (role, organizace, stav...)",icon:"info",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:()=>{const e=!K;G(e),v("users_showExpandedFilters",e)},children:[(0,V.jsx)(N.g,{icon:K?M.w2A:M.Jt$}),K?"Skr\xfdt filtr":"Roz\u0161\xed\u0159en\xfd filtr"]})}),(0,V.jsx)(Yr.z,{text:"Skr\xfdt cel\xfd panel filtr\u016f a vyhled\xe1v\xe1n\xed",icon:"info",preferredPosition:"bottom",children:(0,V.jsxs)(ei,{onClick:()=>J(!1),children:[(0,V.jsx)(N.g,{icon:M.GRI}),"Skr\xfdt"]})})]})]}),(0,V.jsxs)(hi,{style:{gridColumn:"1 / -1"},children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.MjD}),"Fulltext vyhled\xe1v\xe1n\xed"]}),(0,V.jsxs)(gi,{children:[(0,V.jsx)(N.g,{icon:M.MjD}),(0,V.jsx)(fi,{type:"text",placeholder:"Hledat v u\u017eivatelsk\xe9m jm\xe9nu, jm\xe9n\u011b, emailu, lokalit\u011b, pozici, \xfaseku, skupin\u011b...",value:y,onChange:e=>j(e.target.value),hasIcon:!0}),y&&(0,V.jsx)(xi,{onClick:()=>j(""),title:"Vymazat",children:(0,V.jsx)(N.g,{icon:M.GRI})})]})]}),K&&(0,V.jsxs)(ui,{style:{marginTop:"1rem"},children:[(0,V.jsxs)(hi,{children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.McB}),"Status u\u017eivatele"]}),(0,V.jsxs)(bi,{children:[(0,V.jsx)(N.g,{icon:M.McB}),(0,V.jsxs)(vi,{value:B,onChange:e=>Z(e.target.value),hasIcon:!0,children:[(0,V.jsx)("option",{value:"all",children:"V\u0161ichni u\u017eivatel\xe9"}),(0,V.jsx)("option",{value:"active",children:"Pouze aktivn\xed"}),(0,V.jsx)("option",{value:"inactive",children:"Pouze neaktivn\xed"})]})]})]}),(0,V.jsxs)(hi,{children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.Pcr}),"Lokalita"]}),(0,V.jsxs)(bi,{children:[(0,V.jsx)(N.g,{icon:M.Pcr}),(0,V.jsxs)(vi,{value:H,onChange:e=>U(e.target.value),hasIcon:!0,children:[(0,V.jsx)("option",{value:"",children:"V\u0161echny lokality"}),Dn.map(e=>(0,V.jsx)("option",{value:e,children:e},e))]})]})]}),(0,V.jsxs)(hi,{children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.u4D}),"Pozice"]}),(0,V.jsxs)(bi,{children:[(0,V.jsx)(N.g,{icon:M.u4D}),(0,V.jsxs)(vi,{value:F,onChange:e=>W(e.target.value),hasIcon:!0,children:[(0,V.jsx)("option",{value:"",children:"V\u0161echny pozice"}),Rn.map(e=>(0,V.jsx)("option",{value:e,children:e},e))]})]})]}),(0,V.jsxs)(hi,{children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.URI}),"\xdasek"]}),(0,V.jsxs)(bi,{children:[(0,V.jsx)(N.g,{icon:M.URI}),(0,V.jsxs)(vi,{value:k,onChange:e=>A(e.target.value),hasIcon:!0,children:[(0,V.jsx)("option",{value:"",children:"V\u0161echny \xfaseky"}),Ln.map(e=>(0,V.jsx)("option",{value:e,children:e},e))]})]})]}),(0,V.jsxs)(hi,{children:[(0,V.jsxs)(mi,{children:[(0,V.jsx)(N.g,{icon:M.V2x}),"Role"]}),(0,V.jsxs)(bi,{children:[(0,V.jsx)(N.g,{icon:M.V2x}),(0,V.jsxs)(vi,{value:P,onChange:e=>O(e.target.value),hasIcon:!0,children:[(0,V.jsx)("option",{value:"",children:"V\u0161echny skupiny"}),Tn.map(e=>(0,V.jsx)("option",{value:e,children:e},e))]})]})]})]})]}),(0,V.jsx)(ji,{ref:on,$showLeftShadow:We,$showRightShadow:Ze,children:(0,V.jsxs)(ki,{ref:an,children:[(0,V.jsxs)(zi,{children:[(0,V.jsxs)(_i,{children:[vn.getHeaderGroups().map(e=>(0,V.jsx)("tr",{children:e.headers.map(e=>(0,V.jsx)(Ci,{onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,style:(0,w.A)({cursor:e.column.getCanSort()?"pointer":"default"},"expander"===e.id?{width:"50px",textAlign:"center"}:{}),children:(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,L.Kv)(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&e.column.getIsSorted()&&(0,V.jsx)(N.g,{icon:"asc"===e.column.getIsSorted()?M.w2A:M.Jt$})]})},e.id))},e.id)),(0,V.jsx)("tr",{children:null===(e=vn.getHeaderGroups()[0])||void 0===e?void 0:e.headers.map(e=>(0,V.jsx)(Ci,{style:(0,w.A)({padding:"0.5rem",backgroundColor:"#f8f9fa",borderTop:"1px solid #e5e7eb"},"expander"===e.id?{width:"50px",textAlign:"center"}:{}),children:"expander"===e.id?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"32px"},children:(0,V.jsx)(Ki,{onClick:In,title:Object.values(ce).some(e=>e)?"Sbalit v\u0161echny \u0159\xe1dky":"Rozbalit v\u0161echny \u0159\xe1dky",children:(0,V.jsx)(N.g,{icon:Object.values(ce).some(e=>e)?M.EZy:M.QLR})})}):"actions"===e.id?(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3px",height:"32px"},children:[(0,V.jsx)(Ki,{onClick:$n,title:"Vymazat filtry sloupc\u016f",children:(0,V.jsx)(N.g,{icon:M.IP$})}),(0,V.jsx)(Ki,{onClick:Mn,title:ye?"Na\u010d\xedt\xe1m po\u010dty objedn\xe1vek...":ke?"Aktualizovat po\u010dty objedn\xe1vek (posledn\xed na\u010dten\xed: ".concat((ke/1e3).toFixed(2),"s)"):"Aktualizovat po\u010dty objedn\xe1vek",disabled:ye,style:{position:"relative",background:ye?"#94a3b8":"#16a34a",color:"white",borderColor:ye?"#94a3b8":"#16a34a",opacity:ye?.7:1},children:(0,V.jsx)(N.g,{icon:ye?M.OtC:M._Ro})}),(0,V.jsx)(Ki,{onClick:Nn,title:X?"Vypnout podbarven\xed \u0159\xe1dk\u016f podle statusu":"Zapnout podbarven\xed \u0159\xe1dk\u016f podle statusu",className:X?"active":"",children:(0,V.jsx)(N.g,{icon:M.fyG})})]}):"active"===e.id?(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,V.jsxs)(Gi,{onClick:En,title:"all"===B?"Zobrazit v\u0161e":"active"===B?"Jen aktivn\xed":"Jen neaktivn\xed",children:["all"===B&&(0,V.jsxs)("svg",{viewBox:"0 0 512 512",style:{width:"20px",height:"20px"},children:[(0,V.jsxs)("defs",{children:[(0,V.jsx)("clipPath",{id:"clip-left-status",children:(0,V.jsx)("rect",{x:"0",y:"0",width:"256",height:"512"})}),(0,V.jsx)("clipPath",{id:"clip-right-status",children:(0,V.jsx)("rect",{x:"256",y:"0",width:"256",height:"512"})})]}),(0,V.jsx)("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z",fill:"#22c55e",clipPath:"url(#clip-left-status)"}),(0,V.jsx)("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z",fill:"#ef4444",clipPath:"url(#clip-right-status)"})]}),"active"===B&&(0,V.jsx)(N.g,{icon:M.SGM,style:{color:"#22c55e",fontSize:"20px"}}),"inactive"===B&&(0,V.jsx)(N.g,{icon:M.s0Q,style:{color:"#ef4444",fontSize:"20px"}})]})}):(0,V.jsxs)(Zi,{children:[(0,V.jsx)(N.g,{icon:M.MjD}),(0,V.jsx)(Ji,{type:"text",placeholder:"Hledat ".concat(e.column.columnDef.header,"..."),value:q[e.column.columnDef.accessorKey||e.column.columnDef.id]||"",onChange:n=>{const t=e.column.columnDef.accessorKey||e.column.columnDef.id,r=(0,w.A)({},q);r[t]=n.target.value,Q(r)}}),q[e.column.columnDef.accessorKey||e.column.columnDef.id]&&(0,V.jsx)(Yi,{onClick:()=>{const n=e.column.columnDef.accessorKey||e.column.columnDef.id,t=(0,w.A)({},q);delete t[n],Q(t)},title:"Vymazat",children:(0,V.jsx)(N.g,{icon:M.GRI})})]})},"filter-".concat(e.id)))})]}),(0,V.jsx)("tbody",{children:vn.getRowModel().rows.map((e,n)=>(0,V.jsxs)(z.Fragment,{children:[(0,V.jsx)(Si,{$isEven:n%2===0,$isActive:e.original.active,$showHighlighting:X,onContextMenu:n=>zn(n,e.original),onDoubleClick:()=>wn(e.original),style:{cursor:"context-menu"},children:e.getVisibleCells().map(e=>(0,V.jsx)(Ei,{style:"expander"===e.column.id?{width:"50px",textAlign:"center",padding:"0.5rem"}:{},children:(0,L.Kv)(e.column.columnDef.cell,e.getContext())},e.id))}),ce[e.id]&&(0,V.jsx)("tr",{children:(0,V.jsx)("td",{colSpan:bn.length,style:{padding:0},children:(0,V.jsx)(Ii,{children:(0,V.jsxs)(Ni,{children:[(0,V.jsxs)(Mi,{children:[(0,V.jsxs)(Pi,{children:[(0,V.jsx)(N.g,{icon:M.Lmx}),"Z\xe1kladn\xed informace"]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"ID:"}),(0,V.jsx)(Di,{children:e.original.id})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"U\u017eivatelsk\xe9 jm\xe9no:"}),(0,V.jsx)(Di,{children:e.original.username})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Cel\xe9 jm\xe9no:"}),(0,V.jsx)(Di,{children:e.original.fullName})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Email:"}),(0,V.jsx)(Di,{children:e.original.email})]})]}),(0,V.jsxs)(Mi,{children:[(0,V.jsxs)(Pi,{children:[(0,V.jsx)(N.g,{icon:M.URI}),"Organiza\u010dn\xed za\u0159azen\xed"]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"\xdasek:"}),(0,V.jsx)(Di,{children:e.original.department})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Lokalita:"}),(0,V.jsx)(Di,{children:e.original.location})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Telefon:"}),(0,V.jsx)(Di,{children:e.original.phone})]})]}),(0,V.jsxs)(Mi,{children:[(0,V.jsxs)(Pi,{children:[(0,V.jsx)(N.g,{icon:M.a$}),"Aktivita"]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Status:"}),(0,V.jsx)(Di,{children:(0,V.jsxs)(Vi,{$active:e.original.active,children:[(0,V.jsx)(N.g,{icon:e.original.active?M.SGM:M.s0Q}),e.original.active?"Aktivn\xed":"Neaktivn\xed"]})})]}),(0,V.jsxs)(Li,{children:[(0,V.jsx)(Ti,{children:"Posledn\xed aktivita:"}),(0,V.jsx)(Di,{children:e.original.dt_activity?(0,D.fn)(e.original.dt_activity):"Nikdy"})]})]}),(e.original.roles&&e.original.roles.length>0||e.original.direct_rights&&e.original.direct_rights.length>0)&&(()=>{const n=e.original.roles&&Array.isArray(e.original.roles)?[...e.original.roles].sort((e,n)=>{const t=(e.nazev_role||e.nazev||"").toLowerCase(),r=(n.nazev_role||n.nazev||"").toLowerCase();return t.localeCompare(r,"cs")}):[],t=new Map;n.forEach((e,n)=>{e.rights&&Array.isArray(e.rights)&&e.rights.forEach(e=>{const r=e.kod_prava||e.nazev||e.name||e.code;r&&(t.has(r)||t.set(r,{right:e,roleIndexes:[]}),t.get(r).roleIndexes.push(n+1))})}),e.original.direct_rights&&Array.isArray(e.original.direct_rights)&&e.original.direct_rights.forEach(e=>{const n=e.kod_prava||e.nazev||e.name||e.code;n&&(t.has(n)||t.set(n,{right:e,roleIndexes:[]}))});const r=Array.from(t.entries()).map(e=>{let[n,t]=e;return{kod:n,right:t.right,roleIndexes:[...new Set(t.roleIndexes)].sort()}}).sort((e,n)=>e.kod.localeCompare(n.kod,"cs"));return(0,V.jsxs)(Mi,{style:{gridColumn:"1 / -1"},children:[(0,V.jsxs)(Pi,{children:[(0,V.jsx)(N.g,{icon:M.V2x}),"Role a pr\xe1va"]}),n.length>0&&(0,V.jsxs)("div",{style:{marginBottom:"1.5rem",padding:"0.75rem",background:"#f0f9ff",borderRadius:"6px",border:"1px solid #bae6fd"},children:[(0,V.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"#0c4a6e",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsx)(N.g,{icon:M.V2x,style:{color:"#0284c7"}}),"Role u\u017eivatele (",n.length,"):"]}),n.map((e,n)=>(0,V.jsxs)("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"flex-start",fontSize:"0.875rem"},children:[(0,V.jsx)("div",{style:{background:"#0284c7",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",flexShrink:0,marginRight:"0.75rem"},children:n+1}),(0,V.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,V.jsx)("div",{style:{fontWeight:600,color:"#0c4a6e",minWidth:"150px",marginRight:"1.5rem"},children:e.nazev_role||e.nazev||e.name||"Bez n\xe1zvu"}),(e.Popis||e.popis)&&(0,V.jsx)("div",{style:{color:"#64748b",fontStyle:"italic",flex:1},children:e.Popis||e.popis})]})]},"role-".concat(n)))]}),r.length>0&&(()=>{const e={ORDER:"Objedn\xe1vky",USER:"U\u017eivatel\xe9",CONTACT:"Kontakty",REPORT:"Reporty",ADMIN:"Administrace",SYSTEM:"Syst\xe9m",EXPORT:"Export",IMPORT:"Import",SETTINGS:"Nastaven\xed",BACKUP:"Z\xe1lohy",LOG:"Logy",NOTIFICATION:"Notifikace","OSTATN\xcd":"Ostatn\xed"},n={};r.forEach(e=>{const t=e.kod,r=t.includes("_")?t.split("_")[0]:"OSTATN\xcd";n[r]||(n[r]=[]),n[r].push(e)});const t=Object.keys(n).sort((e,n)=>"OSTATN\xcd"===e?1:"OSTATN\xcd"===n?-1:e.localeCompare(n));return(0,V.jsxs)("div",{style:{padding:"0.75rem",background:"#f8fafc",borderRadius:"6px",border:"1px solid #cbd5e1"},children:[(0,V.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"#1e293b",marginBottom:"0.75rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsx)(N.g,{icon:M.bMg,style:{color:"#059669"}}),"V\u0161echna pr\xe1va (",r.length,") podle sekc\xed:"]}),(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,V.jsxs)("div",{style:{position:"relative"},children:[(0,V.jsx)(N.g,{icon:M.MjD,style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af",fontSize:"0.75rem"}}),(0,V.jsx)("input",{type:"text",placeholder:"Naj\xedt pr\xe1vo...",value:me||"",onChange:e=>{const r=e.target.value;if(ge(r),r.trim()){const e={};t.forEach(t=>{n[t].some(e=>e.kod.toLowerCase().includes(r.toLowerCase())||e.right.popis&&e.right.popis.toLowerCase().includes(r.toLowerCase()))&&(e[t]=!1)}),he(n=>(0,w.A)((0,w.A)({},n),e))}},style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem 0.25rem 1.75rem",border:"1px solid #d1d5db",borderRadius:"4px",background:"white",width:"140px",transition:"all 0.2s"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.boxShadow="0 0 0 2px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"}})]}),(0,V.jsxs)("button",{onClick:()=>{const e=t.every(e=>ue[e]),n={};t.forEach(t=>{n[t]=!e}),he(n)},style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",fontSize:"0.75rem",fontWeight:500,color:"#6b7280",background:"white",border:"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.background="#f3f4f6",e.target.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.target.style.background="white",e.target.style.borderColor="#d1d5db"},title:t.every(e=>ue[e])?"Rozvinout v\u0161echny sekce":"Sbalit v\u0161echny sekce",children:[(0,V.jsx)(N.g,{icon:t.every(e=>ue[e])?M.QLR:M.EZy,style:{fontSize:"0.7rem"}}),t.every(e=>ue[e])?"V\u0161e":"Sbalit"]})]})]}),t.map(t=>{const r=[...n[t]].sort((e,n)=>e.kod.localeCompare(n.kod)),i=me?r.filter(e=>{const n=me.toLowerCase();return e.kod.toLowerCase().includes(n)||e.right.popis&&e.right.popis.toLowerCase().includes(n)}):r,o=ue[t];return me&&0===i.length?null:(0,V.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"#e2e8f0",borderRadius:"4px",cursor:"pointer",marginBottom:o?"0":"0.5rem",transition:"all 0.2s"},onClick:()=>{he(e=>(0,w.A)((0,w.A)({},e),{},{[t]:!e[t]}))},onMouseEnter:e=>{e.currentTarget.style.background="#cbd5e1"},onMouseLeave:e=>{e.currentTarget.style.background="#e2e8f0"},children:[(0,V.jsx)(N.g,{icon:o?M.XkK:M.Jt$,style:{color:"#64748b",fontSize:"0.75rem",transition:"transform 0.2s"}}),(0,V.jsxs)("span",{style:{fontWeight:600,color:"#475569",fontSize:"0.875rem"},children:[e[t]||t," (",me?i.length:r.length,me&&i.length!==r.length&&(0,V.jsxs)("span",{style:{color:"#64748b",fontWeight:400},children:[" z ",r.length]}),")"]})]}),!o&&(0,V.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",paddingLeft:"1.5rem"},children:i.map((e,n)=>{const r=e.kod,i=e.right.popis||e.right.description||r;return(0,V.jsxs)("div",{title:i,style:{background:"white",padding:"0.5rem 0.75rem",borderRadius:"4px",fontSize:"0.8rem",border:"1px solid #059669",color:"#065f46",fontWeight:500,cursor:"help",transition:"all 0.2s",boxShadow:"0 1px 2px rgba(5, 150, 105, 0.1)",position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:"120px"},onMouseEnter:e=>{e.currentTarget.style.background="#d1fae5",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 2px 4px rgba(5, 150, 105, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="white",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 2px rgba(5, 150, 105, 0.1)"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",marginBottom:i!==r?"2px":"0"},children:[(0,V.jsx)("span",{children:r}),e.roleIndexes.length>0&&(0,V.jsx)("sup",{style:{fontSize:"0.6rem",color:"#0284c7",fontWeight:"bold",marginLeft:"2px"},children:e.roleIndexes.join(",")})]}),i!==r&&(0,V.jsx)("div",{style:{fontSize:"0.65rem",color:"#6b7280",fontWeight:400,lineHeight:1.2,textAlign:"left",maxWidth:"100%",wordBreak:"break-word"},children:i})]},"".concat(t,"-right-").concat(n))})})]},t)})]})})(),0===r.length&&(0,V.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",fontStyle:"italic",padding:"1rem",textAlign:"center"},children:"Tento u\u017eivatel nem\xe1 p\u0159i\u0159azen\xe9 \u017e\xe1dn\xe9 role ani pr\xe1va"})]})})()]})})})})]},e.id))})]}),(0,V.jsxs)(Hi,{children:[(0,V.jsxs)(Ui,{children:["Zobrazeno ",vn.getRowModel().rows.length," z ",fn.length," u\u017eivatel\u016f",fn.length!==d.length&&(0,V.jsxs)("span",{children:[" (filtrov\xe1no z ",d.length,")"]})]}),(0,V.jsxs)(Fi,{children:[(0,V.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",marginRight:"1rem"},children:"Zobrazit:"}),(0,V.jsxs)(Bi,{value:re,onChange:e=>{const n=parseInt(e.target.value);ie(n),v("users_pageSize",n),vn.setPageSize(n),ae(0),v("users_pageIndex",0),vn.setPageIndex(0)},children:[(0,V.jsx)("option",{value:10,children:"10"}),(0,V.jsx)("option",{value:25,children:"25"}),(0,V.jsx)("option",{value:50,children:"50"}),(0,V.jsx)("option",{value:100,children:"100"}),(0,V.jsx)("option",{value:250,children:"250"})]}),(0,V.jsx)(Wi,{onClick:()=>{ae(0),v("users_pageIndex",0),vn.setPageIndex(0)},disabled:!vn.getCanPreviousPage(),children:"\xab\xab"}),(0,V.jsx)(Wi,{onClick:()=>{const e=Math.max(0,oe-1);ae(e),v("users_pageIndex",e),vn.setPageIndex(e)},disabled:!vn.getCanPreviousPage(),children:"\u2039"}),(0,V.jsxs)("span",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 1rem"},children:["Str\xe1nka ",vn.getState().pagination.pageIndex+1," z ",vn.getPageCount()]}),(0,V.jsx)(Wi,{onClick:()=>{const e=vn.getPageCount()-1,n=Math.min(e,oe+1);ae(n),v("users_pageIndex",n),vn.setPageIndex(n)},disabled:!vn.getCanNextPage(),children:"\u203a"}),(0,V.jsx)(Wi,{onClick:()=>{const e=vn.getPageCount()-1;ae(e),v("users_pageIndex",e),vn.setPageIndex(e)},disabled:!vn.getCanNextPage(),children:"\xbb\xbb"})]})]})]})}),(0,_.createPortal)((0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(wi,{onClick:dn,onMouseEnter:()=>qe(!0),onMouseLeave:()=>qe(!1),$visible:Ve,$tableHovered:Je,$arrowHovered:Ge,"aria-label":"Posunout vlevo",children:(0,V.jsx)(N.g,{icon:M.Wzs})}),(0,V.jsx)(Ai,{onClick:pn,onMouseEnter:()=>qe(!0),onMouseLeave:()=>qe(!1),$visible:Ue,$tableHovered:Je,$arrowHovered:Ge,"aria-label":"Posunout vpravo",children:(0,V.jsx)(N.g,{icon:M.XkK})})]}),document.body),(0,V.jsx)(R.A,{isOpen:Ae,title:"delete"===$e?i&&i("USER_DELETE")?"Smaz\xe1n\xed u\u017eivatele":"Deaktivace u\u017eivatele":"toggle"===$e?null!==Ce&&void 0!==Ce&&Ce.active?"Deaktivace u\u017eivatele":"Aktivace u\u017eivatele":"Potvrzen\xed akce",icon:(()=>{const e=i&&i("USER_DELETE");switch($e){case"delete":return e?M.yLS:M.zpE;case"toggle":return null!==Ce&&void 0!==Ce&&Ce.active?M.c7y:M.pCJ;default:return M.wRm}})(),variant:(()=>{const e=i&&i("USER_DELETE");switch($e){case"delete":return e?"danger":"warning";case"toggle":return null!==Ce&&void 0!==Ce&&Ce.active?"warning":"primary";default:return"primary"}})(),onConfirm:async()=>{if(Ce)try{switch(o(),a(30),$e){case"delete":{const e=i&&i("USER_DELETE"),r=Ce.fullName||Ce.username;e?(await(0,$.hG)({token:n,username:t,id:Ce.id}),a(100),s(),c&&c("\u2713 U\u017eivatel ".concat(r," byl trvale smaz\xe1n z datab\xe1ze"),{type:"success"})):(await(0,$.Wi)({token:n,username:t,id:Ce.id}),a(100),s(),c&&c("\u2713 U\u017eivatel ".concat(r," byl deaktivov\xe1n"),{type:"success"})),p([]),h(!0),Xe(e=>e+1),"function"===typeof mn&&setTimeout(()=>mn(!0),500);break}case"toggle":{const e=Ce.active?0:1,r=Ce.fullName||Ce.username;await(0,$.iK)({token:n,username:t,id:Ce.id,aktivni:e}),a(100),s(),c&&c("\u2713 U\u017eivatel ".concat(r,1===e?" byl aktivov\xe1n":" byl deaktivov\xe1n"),{type:"success"}),p([]),h(!0),Xe(e=>e+1),"function"===typeof mn&&setTimeout(()=>mn(!0),500);break}default:s()}ze(!1),Ee(null),Ie(null)}catch(m){s();const n=m.message||"Chyba p\u0159i prov\xe1d\u011bn\xed operace";c&&c("\u2717 ".concat(n),{type:"error"}),ze(!1),Ee(null),Ie(null)}},onClose:()=>{ze(!1),Ee(null),Ie(null)},children:(()=>{if(!Ce)return"";const e="".concat(Ce.name," ").concat(Ce.surname," (").concat(Ce.username,")"),n=i&&i("USER_DELETE");switch($e){case"delete":return n?"Opravdu chcete trvale smazat u\u017eivatele?\n\n".concat(e,"\n\nTato akce je nevratn\xe1 a v\u0161echna data u\u017eivatele budou trvale odstran\u011bna z datab\xe1ze."):"Opravdu chcete deaktivovat u\u017eivatele?\n\n".concat(e,"\n\nNem\xe1te opr\xe1vn\u011bn\xed USER_DELETE, proto bude u\u017eivatel pouze deaktivov\xe1n (soft delete). Jeho data z\u016fstanou zachov\xe1na, ale nebude se moci p\u0159ihl\xe1sit do syst\xe9mu.");case"toggle":return Ce.active?"Opravdu chcete deaktivovat u\u017eivatele?\n\n".concat(e,"\n\nU\u017eivatel se nebude moci p\u0159ihl\xe1sit do syst\xe9mu, ale jeho data z\u016fstanou zachov\xe1na."):"Opravdu chcete aktivovat u\u017eivatele?\n\n".concat(e,"\n\nU\u017eivatel z\xedsk\xe1 znovu p\u0159\xedstup do syst\xe9mu s p\u016fvodn\xedmi pr\xe1vy.");default:return""}})()}),(0,V.jsx)(de,{isOpen:_e,onClose:()=>{Se(!1),Ee(null)},onConfirm:async e=>{if(Ce)try{o(),a(30);await(0,$.iK)({token:n,username:t,id:Ce.id,password:e});if(a(70),await un(),a(100),s(),c){const e=Ce.fullName||Ce.username;c("\u2713 Heslo u\u017eivatele ".concat(e," bylo \xfasp\u011b\u0161n\u011b zm\u011bn\u011bno"),{type:"success"})}Se(!1),Ee(null)}catch(m){s();const n=m.message||"Chyba p\u0159i zm\u011bn\u011b hesla";c&&c("\u2717 ".concat(n),{type:"error"})}},userData:Ce}),(0,V.jsx)(bt,{isOpen:xe.isOpen,onClose:()=>{fe({isOpen:!1,mode:"create",userData:null})},mode:xe.mode,userData:xe.userData,onSuccess:()=>{nn(!0),Xe(e=>e+1),"function"===typeof mn&&setTimeout(()=>{mn(!0)},500)},addToast:c}),Re&&(0,V.jsx)(St,{x:Re.x,y:Re.y,user:Re.user,selectedData:Re.selectedData,onClose:()=>Oe(null),onEdit:_n,onDelete:Sn,onToggleActive:Cn,canEdit:!0,canDelete:i&&i("USER_DELETE")})]})]}),i("HELPER_VIEW")&&(0,V.jsx)(Zr.A,{pageContext:"users"})]})}},14459:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},28006:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},35087:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},35327:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},36210:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},39292:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},40614:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},42489:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},76245:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},77737:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},77819:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},82054:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},88693:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},91286:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},91867:(e,n,t)=>{t.d(n,{Ay:()=>k,xp:()=>j});var r,i,o,a,s,l,c=t(57528),d=(t(65043),t(45903)),p=t(82054),u=t(76245),h=t(70579);const m=d.A.div(r||(r=(0,c.A)(["\n  margin-top: 0.75rem;\n"]))),g=d.A.div(i||(i=(0,c.A)(["\n  width: 100%;\n  height: 6px;\n  background: #e5e7eb;\n  border-radius: 3px;\n  overflow: hidden;\n  margin-bottom: 0.5rem;\n"]))),x=d.A.div(o||(o=(0,c.A)(["\n  height: 100%;\n  background: ",";\n  width: ",";\n  transition: all 0.3s ease;\n"])),e=>{switch(e.strength){case"weak":return"#ef4444";case"medium":return"#f59e0b";case"strong":return"#10b981";default:return"#e5e7eb"}},e=>{switch(e.strength){case"weak":return"33%";case"medium":return"66%";case"strong":return"100%";default:return"0%"}}),f=d.A.div(a||(a=(0,c.A)(["\n  font-size: 0.75rem;\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n"])),e=>{switch(e.strength){case"weak":return"#ef4444";case"medium":return"#f59e0b";case"strong":return"#10b981";default:return"#6b7280"}}),b=d.A.ul(s||(s=(0,c.A)(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n"]))),v=d.A.li(l||(l=(0,c.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8125rem;\n  color: ",";\n  transition: color 0.2s ease;\n"])),e=>e.met?"#10b981":"#6b7280"),y=e=>[{text:"Alespo\u0148 8 znak\u016f",met:e.length>=8},{text:"Obsahuje mal\xe9 p\xedsmeno",met:/[a-z]/.test(e)},{text:"Obsahuje velk\xe9 p\xedsmeno",met:/[A-Z]/.test(e)},{text:"Obsahuje \u010d\xedslo",met:/[0-9]/.test(e)},{text:"Obsahuje speci\xe1ln\xed znak",met:/[^A-Za-z0-9]/.test(e)}],j=e=>{if(!e||e.length<8)return!1;return y(e).filter(e=>e.met).length>=4},k=e=>{let{password:n,showRequirements:t=!0}=e;if(!n)return null;const r=(e=>{if(!e)return null;let n=0;return e.length>=8&&n++,e.length>=12&&n++,/[a-z]/.test(e)&&n++,/[A-Z]/.test(e)&&n++,/[0-9]/.test(e)&&n++,/[^A-Za-z0-9]/.test(e)&&n++,n<=2?"weak":n<=4?"medium":"strong"})(n),i=y(n),o=j(n);return(0,h.jsxs)(m,{children:[(0,h.jsx)(g,{children:(0,h.jsx)(x,{strength:r})}),(0,h.jsx)(f,{strength:r,children:{weak:"S\xedla hesla: Slab\xe9",medium:"S\xedla hesla: St\u0159edn\xed",strong:"S\xedla hesla: Siln\xe9"}[r]}),t&&!o&&(0,h.jsx)(b,{children:i.map((e,n)=>(0,h.jsxs)(v,{met:e.met,children:[e.met?(0,h.jsx)(p.A,{size:14}):(0,h.jsx)(u.A,{size:14}),e.text]},n))})]})}},94651:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},95264:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(77784).A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]])}}]);
//# sourceMappingURL=7516.84a8263c.chunk.js.map