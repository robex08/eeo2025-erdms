"use strict";(self.webpackChunkr_app_zzs_eeo=self.webpackChunkr_app_zzs_eeo||[]).push([[2733],{92733:(n,e,r)=>{r.r(e),r.d(e,{default:()=>rn});var i,a,t,o,s,l,c,d,h,m,p,x,b,u,g,v,y,j,f,A,k,_,w=r(89379),z=r(57528),$=r(65043),C=r(45903),S=r(83910),N=r(97929),E=r(27837),O=r(88720),R=r(70579);const D=C.A.div(i||(i=(0,z.A)(["\n  min-height: calc(100vh - var(--app-fixed-offset, 140px));\n  background: #f5f7fa;\n  padding: 2rem 2rem 4rem 2rem;\n"]))),U=C.A.div(a||(a=(0,z.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  padding-bottom: 4rem;\n"]))),Z=C.A.div(t||(t=(0,z.A)(["\n  background: linear-gradient(135deg, "," 0%, "," 100%);\n  color: white;\n  padding: 2rem 2.5rem;\n  border-radius: 1rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n"])),n=>{let{theme:e}=n;return e.colors.primary},n=>{let{theme:e}=n;return e.colors.primaryAccent}),P=C.A.h1(o||(o=(0,z.A)(["\n  font-size: 2rem;\n  font-weight: 700;\n  margin: 0 0 0.5rem 0;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n"]))),V=C.A.p(s||(s=(0,z.A)(["\n  font-size: 1rem;\n  opacity: 0.9;\n  margin: 0;\n"]))),I=C.A.div(l||(l=(0,z.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n"]))),M=C.A.div(c||(c=(0,z.A)(["\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n  border: 2px solid ",";\n  transition: all 0.2s ease;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  }\n"])),n=>n.$warning?"#fbbf24":"transparent"),F=C.A.div(d||(d=(0,z.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px solid ",";\n"])),n=>{let{theme:e}=n;return e.colors.gray200}),B=C.A.div(h||(h=(0,z.A)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, "," 0%, "," 100%);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n"])),n=>{let{theme:e}=n;return e.colors.primary},n=>{let{theme:e}=n;return e.colors.primaryAccent}),G=C.A.h2(m||(m=(0,z.A)(["\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: ",";\n  margin: 0;\n"])),n=>{let{theme:e}=n;return e.colors.primary}),H=C.A.div(p||(p=(0,z.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid ",";\n  \n  &:last-child {\n    border-bottom: none;\n  }\n"])),n=>{let{theme:e}=n;return e.colors.gray200}),T=C.A.div(x||(x=(0,z.A)(["\n  flex: 1;\n"]))),W=C.A.div(b||(b=(0,z.A)(["\n  font-weight: 600;\n  color: ",";\n  margin-bottom: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"])),n=>{let{theme:e}=n;return e.colors.gray700}),J=C.A.div(u||(u=(0,z.A)(["\n  font-size: 0.875rem;\n  color: ",";\n  line-height: 1.4;\n"])),n=>{let{theme:e}=n;return e.colors.gray500}),L=C.A.button(g||(g=(0,z.A)(["\n  width: 64px;\n  height: 32px;\n  border-radius: 16px;\n  border: none;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.3s ease;\n  background: ",";\n  \n  &:hover {\n    opacity: 0.9;\n    transform: scale(1.05);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),n=>n.$active?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"#cbd5e1"),X=C.A.div(v||(v=(0,z.A)(["\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: white;\n  position: absolute;\n  top: 4px;\n  left: ",";\n  transition: left 0.3s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n"])),n=>n.$active?"36px":"4px"),Y=C.A.textarea(y||(y=(0,z.A)(["\n  width: 100%;\n  padding: 0.75rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-family: inherit;\n  color: ",";\n  background: white;\n  resize: vertical;\n  min-height: 80px;\n  transition: all 0.2s ease;\n  margin-top: 0.5rem;\n  \n  &:hover {\n    border-color: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: ",";\n  }\n"])),n=>{let{theme:e}=n;return e.colors.gray300},n=>{let{theme:e}=n;return e.colors.gray700},n=>{let{theme:e}=n;return e.colors.primaryAccent},n=>{let{theme:e}=n;return e.colors.primaryAccent},n=>{let{theme:e}=n;return e.colors.gray100}),q=C.A.select(j||(j=(0,z.A)(["\n  padding: 0.625rem 1rem;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  color: ",";\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 200px;\n  \n  &:hover {\n    border-color: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    background: ",";\n  }\n"])),n=>{let{theme:e}=n;return e.colors.gray300},n=>{let{theme:e}=n;return e.colors.gray700},n=>{let{theme:e}=n;return e.colors.primaryAccent},n=>{let{theme:e}=n;return e.colors.primaryAccent},n=>{let{theme:e}=n;return e.colors.gray100}),K=C.A.div(f||(f=(0,z.A)(["\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-end;\n  margin-top: 2rem;\n  margin-bottom: 3rem;\n"]))),Q=C.A.button(A||(A=(0,z.A)(["\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  border: none;\n  font-weight: 600;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n  \n  ","\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none !important;\n  }\n"])),n=>n.$primary?"\n    background: linear-gradient(135deg, ".concat(n.theme.colors.primary," 0%, ").concat(n.theme.colors.primaryAccent," 100%);\n    color: white;\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);\n    }\n  "):"\n    background: ".concat(n.theme.colors.gray200,";\n    color: ").concat(n.theme.colors.gray700,";\n    &:hover {\n      background: ").concat(n.theme.colors.gray300,";\n    }\n  ")),nn=C.A.div(k||(k=(0,z.A)(["\n  background: ",";\n  border-left: 4px solid ",";\n  color: ",";\n  padding: 1rem 1.25rem;\n  border-radius: 8px;\n  margin: 1rem 0;\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n"])),n=>"danger"===n.$type?"#fee2e2":"#fef3c7",n=>"danger"===n.$type?"#dc2626":"#f59e0b",n=>"danger"===n.$type?"#7f1d1d":"#78350f"),en=C.A.span(_||(_=(0,z.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  ","\n"])),n=>n.$active?"\n    background: #d1fae5;\n    color: #065f46;\n  ":"\n    background: #fee2e2;\n    color: #991b1b;\n  "),rn=()=>{const{showToast:n}=(0,$.useContext)(O.$o),{userDetail:e,token:i,username:a}=(0,$.useContext)(E.cy),[t,o]=(0,$.useState)({notifications_enabled:!0,notifications_bell_enabled:!0,notifications_email_enabled:!0,hierarchy_enabled:!1,hierarchy_profile_id:null,maintenance_mode:!1,maintenance_message:"Syst\xe9m je moment\xe1ln\u011b v \xfadr\u017eb\u011b. Omlouv\xe1me se za komplikace."}),[s,l]=(0,$.useState)(!0),[c,d]=(0,$.useState)(!1),[h,m]=(0,$.useState)(!1),[p,x]=(0,$.useState)({}),[b,u]=(0,$.useState)([]),g=(0,$.useMemo)(()=>{var n;return null===e||void 0===e||null===(n=e.roles)||void 0===n?void 0:n.some(n=>"SUPERADMIN"===n.kod_role)},[e]);(0,$.useEffect)(()=>{v(),y()},[]),(0,$.useEffect)(()=>{const n=JSON.stringify(t)!==JSON.stringify(p);m(n)},[t,p]);const v=async()=>{l(!0);try{const{getGlobalSettings:n}=await r.e(8319).then(r.bind(r,58319)),e=await n(i,a);e.maintenance_message||(e.maintenance_message="Syst\xe9m je moment\xe1ln\u011b v \xfadr\u017eb\u011b. Omlouv\xe1me se za komplikace."),o(e),x(e)}catch(e){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed nastaven\xed:",e),n("Chyba p\u0159i na\u010d\xedt\xe1n\xed glob\xe1ln\xedho nastaven\xed",{type:"error"})}finally{l(!1)}},y=async()=>{try{const{getHierarchyProfiles:n}=await r.e(6102).then(r.bind(r,96102)),e=(await n(i,a)).filter(n=>!0===n.isActive);u(e)}catch(n){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed profil\u016f hierarchie:",n)}},j=n=>{o(e=>(0,w.A)((0,w.A)({},e),{},{[n]:!e[n]}))};return s?(0,R.jsx)(D,{children:(0,R.jsx)(U,{children:(0,R.jsx)(Z,{children:(0,R.jsxs)(P,{children:[(0,R.jsx)(S.g,{icon:N.dB}),"Na\u010d\xedt\xe1n\xed..."]})})})}):(0,R.jsx)(D,{children:(0,R.jsxs)(U,{children:[(0,R.jsxs)(Z,{children:[(0,R.jsxs)(P,{children:[(0,R.jsx)(S.g,{icon:N.dB}),"Glob\xe1ln\xed nastaven\xed aplikace"]}),(0,R.jsx)(V,{children:"Spr\xe1va celoplo\u0161n\xfdch nastaven\xed syst\xe9mu EEO - notifikace, hierarchie workflow, \xfadr\u017eba syst\xe9mu"})]}),(0,R.jsxs)(I,{children:[(0,R.jsxs)(M,{children:[(0,R.jsxs)(F,{children:[(0,R.jsx)(B,{children:(0,R.jsx)(S.g,{icon:N.z$e})}),(0,R.jsxs)("div",{children:[(0,R.jsx)(G,{children:"Notifikace"}),(0,R.jsx)(en,{$active:t.notifications_enabled,children:t.notifications_enabled?"Aktivn\xed":"Vypnuto"})]})]}),(0,R.jsxs)(H,{children:[(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.npb}),"Povolit notifikace"]}),(0,R.jsx)(J,{children:"Hlavn\xed vyp\xedna\u010d pro cel\xfd notifika\u010dn\xed syst\xe9m. M\xe1 vy\u0161\u0161\xed prioritu ne\u017e nastaven\xed hierarchie a u\u017eivatel\u016f."})]}),(0,R.jsx)(L,{$active:t.notifications_enabled,onClick:()=>j("notifications_enabled"),children:(0,R.jsx)(X,{$active:t.notifications_enabled})})]}),(0,R.jsxs)(H,{children:[(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.z$e}),"Zvone\u010dek (in-app notifikace)"]}),(0,R.jsx)(J,{children:"Zobrazov\xe1n\xed notifikac\xed ve zvoni\u010dku v horn\xed li\u0161t\u011b aplikace."})]}),(0,R.jsx)(L,{$active:t.notifications_bell_enabled,onClick:()=>j("notifications_bell_enabled"),disabled:!t.notifications_enabled,children:(0,R.jsx)(X,{$active:t.notifications_bell_enabled})})]}),(0,R.jsxs)(H,{children:[(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.y_8}),"E-mailov\xe9 notifikace"]}),(0,R.jsx)(J,{children:"Zas\xedl\xe1n\xed notifikac\xed na e-mailov\xe9 adresy u\u017eivatel\u016f."})]}),(0,R.jsx)(L,{$active:t.notifications_email_enabled,onClick:()=>j("notifications_email_enabled"),disabled:!t.notifications_enabled,children:(0,R.jsx)(X,{$active:t.notifications_email_enabled})})]}),!t.notifications_enabled&&(0,R.jsxs)(nn,{$type:"warning",children:[(0,R.jsx)(S.g,{icon:N.zpE}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{children:"Notifikace jsou glob\xe1ln\u011b vypnuty!"}),(0,R.jsx)("br",{}),"U\u017eivatel\xe9 nebudou dost\xe1vat \u017e\xe1dn\xe9 upozorn\u011bn\xed ani e-maily."]})]})]}),(0,R.jsxs)(M,{children:[(0,R.jsxs)(F,{children:[(0,R.jsx)(B,{children:(0,R.jsx)(S.g,{icon:N.FFg})}),(0,R.jsxs)("div",{children:[(0,R.jsx)(G,{children:"Hierarchie workflow"}),(0,R.jsx)(en,{$active:t.hierarchy_enabled,children:t.hierarchy_enabled?"Aktivn\xed":"Vypnuto"})]})]}),(0,R.jsxs)(H,{children:[(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.npb}),"Povolit hierarchii"]}),(0,R.jsx)(J,{children:"Zapnut\xed/vypnut\xed cel\xe9ho syst\xe9mu hierarchie workflow. Neovliv\u0148uje st\xe1vaj\xedc\xed p\u0159\xedstup na z\xe1klad\u011b rol\xed a pr\xe1v."})]}),(0,R.jsx)(L,{$active:t.hierarchy_enabled,onClick:()=>j("hierarchy_enabled"),children:(0,R.jsx)(X,{$active:t.hierarchy_enabled})})]}),t.hierarchy_enabled&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(H,{style:{flexDirection:"column",alignItems:"stretch"},children:(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.FFg}),"Aktivn\xed profil hierarchie"]}),(0,R.jsx)(J,{children:"Vyberte profil organiza\u010dn\xedho \u0159\xe1du, kter\xfd bude aktivn\xed pro cel\xfd syst\xe9m. Zm\u011bna profilu ovlivn\xed viditelnost dat pro v\u0161echny u\u017eivatele."}),(0,R.jsxs)(q,{value:t.hierarchy_profile_id||"",onChange:n=>{const e=n.target.value?parseInt(n.target.value):null;o(n=>(0,w.A)((0,w.A)({},n),{},{hierarchy_profile_id:e})),m(!0)},disabled:!t.hierarchy_enabled,style:{marginTop:"0.75rem"},children:[(0,R.jsx)("option",{value:"",children:"-- Vyberte profil --"}),b.map(n=>(0,R.jsxs)("option",{value:n.id,children:[n.name," ",n.isActive?"(aktivn\xed)":""," - ",n.relationshipsCount," vztah\u016f"]},n.id))]})]})}),(0,R.jsx)(H,{style:{flexDirection:"column",alignItems:"stretch"},children:(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.Xbc}),"Logika vyhodnocen\xed"]}),(0,R.jsxs)(J,{children:[(0,R.jsx)("strong",{children:"OR (NEBO):"})," U\u017eivatel vid\xed data, pokud m\xe1 opr\xe1vn\u011bn\xed alespo\u0148 v jedn\xe9 \xfarovni hierarchie (liber\xe1ln\u011bj\u0161\xed).",(0,R.jsx)("br",{}),(0,R.jsx)("strong",{children:"AND (A Z\xc1ROVE\u0147):"})," U\u017eivatel vid\xed data pouze pokud spl\u0148uje v\u0161echny po\u017eadovan\xe9 \xfarovn\u011b hierarchie sou\u010dasn\u011b (restriktivn\u011bj\u0161\xed)."]}),(0,R.jsxs)(q,{value:t.hierarchy_logic||"OR",onChange:n=>o(e=>(0,w.A)((0,w.A)({},e),{},{hierarchy_logic:n.target.value})),disabled:!t.hierarchy_enabled,style:{marginTop:"0.75rem"},children:[(0,R.jsx)("option",{value:"OR",children:"OR (NEBO) - liber\xe1ln\xed"}),(0,R.jsx)("option",{value:"AND",children:"AND (A Z\xc1ROVE\u0147) - restriktivn\xed"})]})]})})]}),!t.hierarchy_enabled&&(0,R.jsxs)(nn,{$type:"info",children:[(0,R.jsx)(S.g,{icon:N.iW_}),(0,R.jsx)("div",{children:"Hierarchie je vypnuta. Syst\xe9m pou\u017e\xedv\xe1 pouze standardn\xed p\u0159\xedstup na z\xe1klad\u011b rol\xed a pr\xe1v."})]})]}),(0,R.jsxs)(M,{$warning:t.maintenance_mode,children:[(0,R.jsxs)(F,{children:[(0,R.jsx)(B,{children:(0,R.jsx)(S.g,{icon:N.nsx})}),(0,R.jsxs)("div",{children:[(0,R.jsx)(G,{children:"\xdadr\u017eba syst\xe9mu"}),(0,R.jsx)(en,{$active:!t.maintenance_mode,children:t.maintenance_mode?"Re\u017eim \xfadr\u017eby":"Norm\xe1ln\xed provoz"})]})]}),(0,R.jsxs)(H,{children:[(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.nsx}),"Re\u017eim \xfadr\u017eby"]}),(0,R.jsx)(J,{children:"Aktivuje \xfadr\u017ebov\xfd re\u017eim - p\u0159\xedstup pouze pro SUPERADMIN."})]}),(0,R.jsx)(L,{$active:t.maintenance_mode,onClick:()=>j("maintenance_mode"),disabled:!g,children:(0,R.jsx)(X,{$active:t.maintenance_mode})})]}),t.maintenance_mode&&(0,R.jsx)(H,{style:{flexDirection:"column",alignItems:"stretch"},children:(0,R.jsxs)(T,{children:[(0,R.jsxs)(W,{children:[(0,R.jsx)(S.g,{icon:N.iW_}),"Zpr\xe1va pro u\u017eivatele"]}),(0,R.jsx)(J,{children:"Vlastn\xed text, kter\xfd uvid\xed u\u017eivatel\xe9 na \xfadr\u017ebov\xe9 str\xe1nce."}),(0,R.jsx)(Y,{value:t.maintenance_message,onChange:n=>o(e=>(0,w.A)((0,w.A)({},e),{},{maintenance_message:n.target.value})),placeholder:"Zadejte zpr\xe1vu o \xfadr\u017eb\u011b...",disabled:!g})]})}),t.maintenance_mode&&(0,R.jsxs)(nn,{$type:"danger",children:[(0,R.jsx)(S.g,{icon:N.zpE}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{children:"VAROV\xc1N\xcd: Re\u017eim \xfadr\u017eby je aktivn\xed!"}),(0,R.jsx)("br",{}),"Pouze u\u017eivatel\xe9 s rol\xed SUPERADMIN mohou p\u0159istupovat do syst\xe9mu."]})]}),!g&&(0,R.jsxs)(nn,{$type:"warning",children:[(0,R.jsx)(S.g,{icon:N.zpE}),(0,R.jsx)("div",{children:"Pouze SUPERADMIN m\u016f\u017ee aktivovat re\u017eim \xfadr\u017eby."})]})]})]}),(0,R.jsxs)(K,{children:[(0,R.jsxs)(Q,{onClick:()=>{o((0,w.A)({},p)),n("Zm\u011bny byly zru\u0161eny",{type:"info"})},disabled:!h||c,children:[(0,R.jsx)(S.g,{icon:N.U23}),"Zru\u0161it zm\u011bny"]}),(0,R.jsxs)(Q,{$primary:!0,onClick:async()=>{if(t.hierarchy_enabled&&!t.hierarchy_profile_id)return console.warn("\u26a0\ufe0f Validation failed: hierarchy enabled but no profile"),void n("P\u0159i zapnut\xe9 hierarchii mus\xedte vybrat aktivn\xed profil",{type:"error"});d(!0);try{const{saveGlobalSettings:e}=await r.e(8319).then(r.bind(r,58319));await e(t,i,a),x((0,w.A)({},t)),m(!1),n("Glob\xe1ln\xed nastaven\xed bylo \xfasp\u011b\u0161n\u011b ulo\u017eeno",{type:"success"})}catch(e){console.error("\u274c Chyba p\u0159i ukl\xe1d\xe1n\xed nastaven\xed:",e),n("Chyba p\u0159i ukl\xe1d\xe1n\xed glob\xe1ln\xedho nastaven\xed",{type:"error"})}finally{d(!1)}},disabled:!h||c,children:[(0,R.jsx)(S.g,{icon:N.hSh}),c?"Ukl\xe1d\xe1m...":"Ulo\u017eit nastaven\xed"]})]}),h&&(0,R.jsxs)(nn,{$type:"warning",children:[(0,R.jsx)(S.g,{icon:N.iW_}),(0,R.jsx)("div",{children:'M\xe1te neulo\u017een\xe9 zm\u011bny. Nezapome\u0148te kliknout na "Ulo\u017eit nastaven\xed".'})]})]})})}}}]);
//# sourceMappingURL=2733.1f7fea1d.chunk.js.map