{"version":3,"file":"static/js/3160.288f125a.chunk.js","mappings":"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","sources":["pages/NotificationsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBell,\n  faCheck,\n  faCheckDouble,\n  faTimes,\n  faTrash,\n  faFilter,\n  faSearch,\n  faExclamationCircle,\n  faClock,\n  faInfoCircle,\n  faEdit,\n  faEye,\n  faEyeSlash,\n  faUndo,\n  faChevronDown,\n  faChevronUp,\n  faChevronRight,\n  faSyncAlt,\n  faLayerGroup,\n  faList,\n  faExpandAlt,\n  faCompressAlt,\n  faExclamationTriangle,\n  faBolt,\n  faExclamation\n} from '@fortawesome/free-solid-svg-icons';\nimport { useBackgroundTasks } from '../context/BackgroundTasksContext';\nimport { SmartTooltip } from '../styles/SmartTooltip';\nimport {\n  getNotificationsList,\n  markNotificationAsRead,\n  markAllNotificationsAsRead,\n  dismissNotification,\n  restoreNotification,\n  deleteNotification,\n  deleteAllNotifications,\n  NOTIFICATION_CONFIG\n} from '../services/notificationsUnified';\nimport { useNavigate } from 'react-router-dom';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport { isValidConcept, hasDraftChanges } from '../utils/draftUtils.js';\nimport draftManager from '../services/DraftManager';\nimport { AuthContext } from '../context/AuthContext';\nimport { getNotificationIcon, getNotificationEmoji } from '../utils/iconMapping'; // üéØ Unified icon mapping\nimport { getOrderV2 } from '../services/apiOrderV2'; // ‚úÖ Pro kontrolu zamƒçen√≠ objedn√°vky\nimport { safeToast } from '../utils/globalToast'; // ‚úÖ Pro toast notifikace\n\n// =============================================================================\n// ANIMATIONS\n// =============================================================================\n\nconst fadeIn = keyframes`\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\nconst slideIn = keyframes`\n  from {\n    opacity: 0;\n    transform: translateX(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n`;\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled.div`\n  padding: 1rem;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  max-width: none;\n  margin: 0 auto;\n`;\n\nconst TitlePanel = styled.div`\n  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);\n  padding: 1rem;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n`;\n\nconst TitleLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n`;\n\nconst TitleRight = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n`;\n\nconst RefreshButton = styled.button`\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  width: 42px;\n  height: 42px;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.4);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n\nconst PageDivider = styled.div`\n  border-bottom: 3px solid #e5e7eb;\n  margin-bottom: 2rem;\n`;\n\nconst PageTitle = styled.h1`\n  margin: 0;\n  font-size: calc(1.5rem + 3px);\n  font-weight: 700;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n`;\n\nconst PageHeader = styled.div`\n  margin-bottom: 32px;\n`;\n\nconst PageSubtitle = styled.p`\n  font-size: 15px;\n  color: #6b7280;\n  margin: 0;\n`;\n\nconst ToolbarContainer = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n\nconst SearchBox = styled.div`\n  width: 100%;\n  position: relative;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 10px 40px 10px 40px;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.15s ease;\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n`;\n\nconst SearchIcon = styled.div`\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #9ca3af;\n  pointer-events: none;\n`;\n\nconst ClearSearchButton = styled.button`\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  z-index: 1;\n  width: 20px;\n  height: 20px;\n\n  &:hover {\n    color: #6b7280;\n  }\n\n  > svg {\n    width: 14px !important;\n    height: 14px !important;\n  }\n`;\n\nconst FilterGroup = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  align-items: center;\n  width: 100%;\n`;\n\nconst ActionButtonsGroup = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  width: 100%;\n`;\n\nconst HeaderActionButton = styled.button`\n  padding: 0.75rem 1rem;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  background: rgba(255, 255, 255, 0.15);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  white-space: nowrap;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.8);\n    background: rgba(255, 255, 255, 0.25);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);\n  }\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.25);\n    border-color: rgba(255, 255, 255, 0.5);\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\nconst FilterButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 2px solid ${props => props.$active ? '#3b82f6' : '#e2e8f0'};\n  background: ${props => props.$active ? '#eff6ff' : 'white'};\n  color: ${props => props.$active ? '#1d4ed8' : '#64748b'};\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  &:hover {\n    border-color: #3b82f6;\n    color: #1d4ed8;\n  }\n`;\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.625rem 1rem;\n  border: 2px solid ${props => {\n    if (props.$variant === 'danger') return '#ef4444';\n    if (props.$variant === 'success') return '#10b981';\n    if (props.$variant === 'warning') return '#f59e0b';\n    return '#6b7280';\n  }};\n  background: white;\n  color: ${props => {\n    if (props.$variant === 'danger') return '#991b1b';\n    if (props.$variant === 'success') return '#065f46';\n    if (props.$variant === 'warning') return '#92400e';\n    return '#6b7280';\n  }};\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n\n  &:hover {\n    background: ${props => {\n      if (props.$variant === 'danger') return '#fee2e2';\n      if (props.$variant === 'success') return '#d1fae5';\n      if (props.$variant === 'warning') return '#fef3c7';\n      return '#f8fafc';\n    }};\n    border-color: ${props => {\n      if (props.$variant === 'danger') return '#ef4444';\n      if (props.$variant === 'success') return '#10b981';\n      if (props.$variant === 'warning') return '#f59e0b';\n      return '#cbd5e1';\n    }};\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\nconst StatsBar = styled.div`\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n`;\n\nconst CollapseLine = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 1.5rem 0 1rem 0;\n  color: #94a3b8;\n  font-weight: 500;\n  position: relative;\n`;\n\nconst DashboardLabel = styled.span`\n  font-size: 14px;\n  color: #94a3b8;\n  font-weight: 500;\n  padding-right: 1rem;\n  background: white;\n  position: relative;\n  z-index: 1;\n`;\n\nconst DividerLine = styled.hr`\n  flex: 1;\n  border: none;\n  border-top: 1px solid #e5e7eb;\n  margin: 0;\n`;\n\nconst CollapseButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  color: #94a3b8;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s ease;\n  position: relative;\n  z-index: 2;\n  padding: 0.25rem 0.5rem;\n  margin-left: 0.5rem;\n\n  &:hover {\n    color: #3b82f6;\n  }\n`;\n\nconst StatCard = styled.div`\n  background: ${props => props.$isActive ?\n    `linear-gradient(145deg, ${props.$color || '#3b82f6'}20, ${props.$color || '#3b82f6'}10)` :\n    'linear-gradient(145deg, #ffffff, #f9fafb)'};\n  border-radius: 12px;\n  padding: 16px;\n  border-left: ${props => props.$isActive ? '6px' : '4px'} solid ${props => props.$color || '#3b82f6'};\n  box-shadow: ${props => props.$isActive ?\n    `0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 2px ${props.$color || '#3b82f6'}40` :\n    '0 1px 3px rgba(0, 0, 0, 0.05)'};\n  flex: 1;\n  min-width: 140px;\n  max-width: 200px;\n  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n  transition: all 0.25s ease;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n\n  &:hover {\n    transform: ${props => props.$clickable ? 'translateY(-2px)' : 'translateY(-1px)'};\n    box-shadow: ${props => props.$clickable ?\n      '0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.06)' :\n      '0 2px 4px rgba(0, 0, 0, 0.08)'};\n    ${props => props.$clickable && `\n      background: linear-gradient(145deg, ${props.$color || '#3b82f6'}25, ${props.$color || '#3b82f6'}15);\n    `}\n  }\n`;\n\nconst StatValue = styled.div`\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1e293b;\n  line-height: 1;\n`;\n\nconst StatIcon = styled.div`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  font-size: 1.75rem;\n  opacity: 0.7;\n`;\n\nconst StatLabel = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n  font-weight: 500;\n  line-height: 1.3;\n  margin-top: auto;\n`;\n\nconst NotificationsList = styled.div`\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n`;\n\nconst NotificationItem = styled.div`\n  padding: 14px 18px;\n  border-bottom: 1px solid #f3f4f6;\n  display: flex;\n  gap: 14px;\n  align-items: center;\n  transition: all 0.15s ease;\n  cursor: pointer;\n  animation: ${slideIn} 0.3s ease-out;\n  animation-delay: ${props => props.$index * 0.03}s;\n  animation-fill-mode: backwards;\n\n  /* Unread styling */\n  background: ${props => props.$isUnread ? 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)' : 'transparent'};\n  border-left: ${props => props.$isUnread ? '4px solid #3b82f6' : '4px solid transparent'};\n\n  /* Priority coloring */\n  ${props => props.$priority === 'high' && `\n    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n    border-left-color: #ef4444;\n  `}\n\n  ${props => props.$priority === 'urgent' && `\n    background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);\n    border-left-color: #dc2626;\n  `}\n\n  &:hover {\n    background: ${props => props.$isUnread ? '#dbeafe' : '#f9fafb'};\n    ${props => props.$priority === 'high' && 'background: #fee2e2;'}\n    ${props => props.$priority === 'urgent' && 'background: #fecaca;'}\n  }\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst NotificationIcon = styled.div`\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  flex-shrink: 0;\n  border-radius: 50%;\n  background: ${props => {\n    const priority = (props.$priority || 'INFO').toUpperCase();\n    if (priority === 'EXCEPTIONAL' || priority === 'URGENT') return '#fef2f2';\n    if (priority === 'APPROVAL' || priority === 'HIGH') return '#fffbeb';\n    return '#eff6ff';\n  }};\n  color: ${props => {\n    const priority = (props.$priority || 'INFO').toUpperCase();\n    if (priority === 'EXCEPTIONAL' || priority === 'URGENT') return '#dc2626';\n    if (priority === 'APPROVAL' || priority === 'HIGH') return '#f59e0b';\n    return '#3b82f6';\n  }};\n`;\n\nconst NotificationContent = styled.div`\n  flex: 1;\n  min-width: 0;\n`;\n\nconst NotificationHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: start;\n  margin-bottom: 10px;\n`;\n\nconst NotificationTitle = styled.div`\n  font-weight: ${props => props.$isUnread ? 700 : 600};\n  color: ${props => props.$isUnread ? '#111827' : '#374151'};\n  font-size: 15px;\n  line-height: 1.5;\n`;\n\nconst NotificationMessage = styled.div`\n  font-size: 14px;\n  color: #6b7280;\n  line-height: 1.6;\n  margin-bottom: 12px;\n`;\n\nconst NotificationMeta = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  font-size: 13px;\n  color: #9ca3af;\n  flex-wrap: wrap;\n  margin-top: 8px;\n`;\n\nconst MetaItem = styled.span`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n`;\n\nconst TypeBadge = styled.span`\n  background: ${props => {\n    if (props.$type === 'order') return '#dbeafe';\n    if (props.$type === 'TODO_ALARM') return '#fef3c7';\n    if (props.$type === 'system') return '#e5e7eb';\n    return '#f3f4f6';\n  }};\n  color: ${props => {\n    if (props.$type === 'order') return '#1e40af';\n    if (props.$type === 'TODO_ALARM') return '#92400e';\n    if (props.$type === 'system') return '#374151';\n    return '#6b7280';\n  }};\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 600;\n`;\n\nconst NotificationActions = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-shrink: 0;\n`;\n\nconst IconButton = styled.button`\n  background: transparent;\n  border: 1px solid transparent;\n  color: #6b7280;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  font-size: 14px;\n\n  &:hover {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n    color: #111827;\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n`;\n\nconst EmptyState = styled.div`\n  padding: 80px 20px;\n  text-align: center;\n  color: #9ca3af;\n`;\n\nconst EmptyIcon = styled.div`\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.5;\n`;\n\nconst EmptyText = styled.div`\n  font-size: 18px;\n  font-weight: 600;\n  color: #6b7280;\n  margin-bottom: 8px;\n`;\n\nconst EmptySubtext = styled.div`\n  font-size: 14px;\n  color: #9ca3af;\n`;\n\nconst LoadingState = styled.div`\n  padding: 60px 20px;\n  text-align: center;\n  color: #9ca3af;\n  font-size: 15px;\n`;\n\n// =============================================================================\n// PAGINATION STYLED COMPONENTS\n// =============================================================================\n\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8fafc;\n  border-top: 1px solid #e5e7eb;\n  margin-top: auto;\n`;\n\nconst PaginationInfo = styled.div`\n  font-size: 0.875rem;\n  color: #64748b;\n`;\n\nconst PaginationControls = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n`;\n\nconst PageButton = styled.button`\n  padding: 0.5rem 1rem;\n  border: 1px solid #e5e7eb;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #3b82f6;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &.active {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n  }\n`;\n\nconst PageSizeSelect = styled.select`\n  padding: 0.5rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  font-size: 0.875rem;\n  cursor: pointer;\n`;\n\n// =============================================================================\n// HELPER FUNCTIONS\n// =============================================================================\n\n/**\n * Vr√°t√≠ barevnou kombinaci (background, color) podle typu notifikace nebo labelu akce\n */\nconst getActionColor = (notificationType, actionLabel) => {\n  // Podle labelu akce (priorita 1)\n  if (actionLabel) {\n    const label = actionLabel.toLowerCase();\n    if (label.includes('schv√°lil') || label.includes('approved')) {\n      return { background: '#d1fae5', color: '#065f46' }; // zelen√°\n    }\n    if (label.includes('zam√≠tl') || label.includes('rejected') || label.includes('odm√≠tl')) {\n      return { background: '#fee2e2', color: '#991b1b' }; // ƒçerven√°\n    }\n    if (label.includes('vytvo≈ôil') || label.includes('created')) {\n      return { background: '#dbeafe', color: '#1e40af' }; // modr√°\n    }\n    if (label.includes('odeslal') || label.includes('sent')) {\n      return { background: '#e0e7ff', color: '#4338ca' }; // indigo\n    }\n    if (label.includes('upravil') || label.includes('edited')) {\n      return { background: '#fef3c7', color: '#92400e' }; // ≈ælut√°\n    }\n    if (label.includes('zru≈°il') || label.includes('cancelled')) {\n      return { background: '#f3f4f6', color: '#374151' }; // ≈°ed√°\n    }\n  }\n\n  // Podle typu notifikace (fallback)\n  if (notificationType) {\n    if (notificationType.includes('schvalena') || notificationType.includes('approved')) {\n      return { background: '#d1fae5', color: '#065f46' };\n    }\n    if (notificationType.includes('zamitnuta') || notificationType.includes('rejected')) {\n      return { background: '#fee2e2', color: '#991b1b' };\n    }\n    if (notificationType.includes('nova') || notificationType.includes('created')) {\n      return { background: '#dbeafe', color: '#1e40af' };\n    }\n    if (notificationType.includes('ke_schvaleni')) {\n      return { background: '#fef3c7', color: '#92400e' };\n    }\n    if (notificationType.includes('odeslana') || notificationType.includes('sent')) {\n      return { background: '#e0e7ff', color: '#4338ca' };\n    }\n  }\n\n  // Default fialov√°\n  return { background: '#f3e8ff', color: '#6b21a8' };\n};\n\n// =============================================================================\n// COMPONENT\n// =============================================================================\n\nexport const NotificationsPage = () => {\n  const bgTasks = useBackgroundTasks();\n  const navigate = useNavigate();\n  const { userDetail } = React.useContext(AuthContext);\n\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  // üóÑÔ∏è Search query s localStorage\n  const [searchQuery, setSearchQuery] = useState(() => {\n    const saved = localStorage.getItem('notifications_searchQuery');\n    return saved || '';\n  });\n\n  // üóÑÔ∏è Checkboxy pro filtry s localStorage\n  const [showUnread, setShowUnread] = useState(() => {\n    const saved = localStorage.getItem('notifications_showUnread');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n  const [showRead, setShowRead] = useState(() => {\n    const saved = localStorage.getItem('notifications_showRead');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n  const [showUrgent, setShowUrgent] = useState(() => {\n    const saved = localStorage.getItem('notifications_showUrgent');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n  const [showHigh, setShowHigh] = useState(() => {\n    const saved = localStorage.getItem('notifications_showHigh');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n  const [showNormal, setShowNormal] = useState(() => {\n    const saved = localStorage.getItem('notifications_showNormal');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n\n  // üóÑÔ∏è Dashboard stat filter s localStorage\n  const [activeStatFilter, setActiveStatFilter] = useState(() => {\n    const saved = localStorage.getItem('notifications_activeStatFilter');\n    return saved || null;\n  });\n\n  const [error, setError] = useState(null);\n  const [confirmDialog, setConfirmDialog] = useState({ isOpen: false });\n\n  // üóÑÔ∏è Re≈æim vl√°ken s localStorage - seskupov√°n√≠ notifikac√≠ podle objedn√°vek (v√Ωchoz√≠: zapnuto)\n  const [threadMode, setThreadMode] = useState(() => {\n    const saved = localStorage.getItem('notifications_threadMode');\n    return saved !== null ? JSON.parse(saved) : true;\n  });\n  const [expandedThreads, setExpandedThreads] = useState(new Set());\n\n  // üóÑÔ∏è Detailn√≠ re≈æim - zobrazen√≠ detail≈Ø notifikac√≠ (v√Ωchoz√≠: zapnuto, ulo≈æeno v LS)\n  const [detailMode, setDetailMode] = useState(() => {\n    const saved = localStorage.getItem('notifications_detailMode');\n    return saved !== null ? JSON.parse(saved) : true; // v√Ωchoz√≠: true\n  });\n\n  // üóÑÔ∏è Collapse stav dashboardu (v√Ωchoz√≠: rozbalen√Ω)\n  const [isDashboardCollapsed, setIsDashboardCollapsed] = useState(() => {\n    const saved = localStorage.getItem('notifications_dashboardCollapsed');\n    return saved !== null ? JSON.parse(saved) : false;\n  });\n\n  // üîí Stavy pro dialog zamƒçen√© objedn√°vky\n  const [showLockedOrderDialog, setShowLockedOrderDialog] = useState(false);\n  const [lockedOrderInfo, setLockedOrderInfo] = useState(null);\n  const [orderToEdit, setOrderToEdit] = useState(null);\n\n  // üìù Stavy pro draft warning dialog\n  const [showEditConfirmModal, setShowEditConfirmModal] = useState(false);\n  const [currentDraftData, setCurrentDraftData] = useState(null);\n  const [targetOrderId, setTargetOrderId] = useState(null);\n\n  // ‚úÖ Paginace\n  const [currentPage, setCurrentPage] = useState(0);\n  const [pageSize, setPageSize] = useState(25);\n\n  // Naƒçten√≠ notifikac√≠ z datab√°ze\n  useEffect(() => {\n    loadNotifications();\n  }, []);\n\n  // üóÑÔ∏è Ulo≈æen√≠ v≈°ech filtr≈Ø do localStorage\n  useEffect(() => {\n    localStorage.setItem('notifications_searchQuery', searchQuery);\n  }, [searchQuery]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_showUnread', JSON.stringify(showUnread));\n  }, [showUnread]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_showRead', JSON.stringify(showRead));\n  }, [showRead]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_showUrgent', JSON.stringify(showUrgent));\n  }, [showUrgent]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_showHigh', JSON.stringify(showHigh));\n  }, [showHigh]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_showNormal', JSON.stringify(showNormal));\n  }, [showNormal]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_activeStatFilter', activeStatFilter || '');\n  }, [activeStatFilter]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_threadMode', JSON.stringify(threadMode));\n  }, [threadMode]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_detailMode', JSON.stringify(detailMode));\n  }, [detailMode]);\n\n  useEffect(() => {\n    localStorage.setItem('notifications_dashboardCollapsed', JSON.stringify(isDashboardCollapsed));\n  }, [isDashboardCollapsed]);\n\n  // Auto-refresh p≈ôi nov√Ωch notifikac√≠ch z backgroundu\n  useEffect(() => {\n    if (bgTasks?.registerNewNotificationsCallback) {\n      // Registruj callback pro nov√© notifikace\n      const handleNewNotifications = (newNotifications, unreadCount) => {\n        // Auto-refresh str√°nky kdy≈æ p≈ôijdou nov√© notifikace nebo se zmƒõn√≠ stav\n        loadNotifications();\n      };\n\n      bgTasks.registerNewNotificationsCallback(handleNewNotifications);\n\n      // Cleanup - odregistruj callback p≈ôi unmount\n      return () => {\n        bgTasks.registerNewNotificationsCallback(null);\n      };\n    }\n  }, [bgTasks]);\n\n  // P≈ôeklad kategori√≠ do ƒçe≈°tiny\n  const getCategoryLabel = (category) => {\n    const labels = {\n      'orders': 'Objedn√°vky',\n      'todo': 'TODO √∫koly',\n      'system': 'Syst√©m',\n      'mentions': 'Zm√≠nky',\n      'reminders': 'P≈ôipom√≠nky'\n    };\n    return labels[category] || category;\n  };\n\n      const loadNotifications = async (showSpinner = false) => {\n    if (showSpinner) {\n      setIsRefreshing(true);\n    } else {\n      setLoading(true);\n    }\n    setError(null);\n    try {\n      // Naƒçten√≠ notifikac√≠ z backendu - 100 posledn√≠ch notifikac√≠\n      // ‚úÖ include_dismissed: true - pro str√°nku chceme i skryt√© notifikace\n      const result = await getNotificationsList({\n        limit: 100,\n        offset: 0,\n        unread_only: false,\n        include_dismissed: true\n      });\n\n      // Backend vrac√≠ data v result.data\n      const notificationsData = result.data || [];\n\n      // Oboha≈• notifikace o config (ikony, barvy)\n      const enrichedNotifications = notificationsData.map(notification => {\n        const config = NOTIFICATION_CONFIG[notification.typ] || {};\n        return {\n          ...notification,\n          icon: config.icon || 'üîî',\n          color: config.color || '#3b82f6',\n          category: config.category || 'system',\n          priority: notification.priorita || config.priority || 'normal'\n        };\n      });\n\n      setNotifications(enrichedNotifications);\n\n    } catch (error) {\n      setError('Nepoda≈ôilo se naƒç√≠st notifikace. Zkontroluj konzoli pro detaily.');\n\n      // V p≈ô√≠padƒõ chyby zobraz pr√°zdn√Ω seznam\n      setNotifications([]);\n    } finally {\n      setLoading(false);\n      setIsRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    loadNotifications(true);\n  };\n\n  // Handler pro kliknut√≠ na statistickou dla≈ædici (filtr)\n  const handleStatCardClick = (filterValue) => {\n    if (filterValue === 'total') {\n      // Celkem - zru≈° V≈†ECHNY filtry\n      setActiveStatFilter(null);\n      setShowUnread(false);\n      setShowRead(false);\n      setShowUrgent(false);\n      setShowHigh(false);\n      setShowNormal(false);\n      setSearchQuery(''); // Zru≈° i vyhled√°v√°n√≠\n      return;\n    }\n\n    if (activeStatFilter === filterValue) {\n      // Zru≈°it filtr - kliknut√≠ podruh√©\n      setActiveStatFilter(null);\n      setShowUnread(false);\n      setShowRead(false);\n      setShowUrgent(false);\n      setShowHigh(false);\n      setShowNormal(false);\n    } else {\n      // Nastavit filtr\n      setActiveStatFilter(filterValue);\n\n      // Vypnout ostatn√≠ filtry\n      setShowUnread(false);\n      setShowRead(false);\n      setShowUrgent(false);\n      setShowHigh(false);\n      setShowNormal(false);\n\n      // Zapnout p≈ô√≠slu≈°n√Ω filtr podle typu\n      if (filterValue === 'unread') {\n        setShowUnread(true);\n      } else if (filterValue === 'urgent') {\n        setShowUrgent(true);\n      } else if (filterValue === 'high') {\n        setShowHigh(true);\n      }\n      // Pro stavy objedn√°vek se filtr ulo≈æ√≠ do activeStatFilter a pou≈æije ve filteredNotifications\n    }\n  };\n\n  // Filtered notifications\n  const filteredNotifications = notifications.filter(notification => {\n    // Search filter\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      const matchesSearch =\n        notification.nadpis?.toLowerCase().includes(query) ||\n        notification.zprava?.toLowerCase().includes(query);\n      if (!matchesSearch) return false;\n    }\n\n    // Filtr podle typu notifikace (z dashboard dla≈ædic)\n    if (activeStatFilter && !['total', 'unread', 'urgent', 'high'].includes(activeStatFilter)) {\n      // Mapov√°n√≠ filterValue na notification type\n      const typeMapping = {\n        'nova': 'order_status_nova',\n        'keSchvaleni': 'order_status_ke_schvaleni',\n        'schvalena': 'order_status_schvalena',\n        'zamitnuta': 'order_status_zamitnuta',\n        'cekaSe': 'order_status_ceka_se',\n        'odeslana': 'order_status_odeslana',\n        'potvrzena': 'order_status_potvrzena',\n        'cekaKontrola': 'order_status_kontrola_ceka',\n        'vecnaSpravnost': 'order_status_kontrola_potvrzena',\n        'registrZverejnena': 'order_status_registr_zverejnena',\n        'dokoncena': 'order_status_dokoncena',\n        'zrusena': 'order_status_zrusena',\n      };\n\n      const notificationType = typeMapping[activeStatFilter];\n      if (notificationType && notification.typ !== notificationType) {\n        return false;\n      }\n    }\n\n    // ƒåten√≠/Nep≈ôeƒçteno - pokud je alespo≈à jeden za≈°krtnut√Ω, filtruj podle toho\n    const hasReadFilter = showUnread || showRead;\n    if (hasReadFilter) {\n      const isUnread = !notification.precteno || notification.precteno === 0;\n      const matchesReadFilter =\n        (showUnread && isUnread) ||\n        (showRead && !isUnread);\n      if (!matchesReadFilter) return false;\n    }\n\n    // Priorita - pokud je alespo≈à jedna za≈°krtnut√°, filtruj podle toho (OR logika)\n    const hasPriorityFilter = showUrgent || showHigh || showNormal;\n    if (hasPriorityFilter) {\n      const priority = notification.priorita || 'normal';\n      const matchesPriorityFilter =\n        (showUrgent && priority === 'urgent') ||\n        (showHigh && priority === 'high') ||\n        (showNormal && priority === 'normal');\n      if (!matchesPriorityFilter) return false;\n    }\n\n    return true;\n  });\n\n  // ‚úÖ Seskupen√≠ notifikac√≠ do vl√°ken podle order_id\n  const groupNotificationsIntoThreads = (notificationsList) => {\n    if (!threadMode) {\n      // Re≈æim bez vl√°ken - vr√°tit notifikace jako jsou\n      return notificationsList.map(n => ({ isThread: false, notification: n }));\n    }\n\n    const threads = new Map();\n    const nonOrderNotifications = [];\n\n    notificationsList.forEach((notification, idx) => {\n      // ‚úÖ Backend u≈æ vrac√≠ parsovan√Ω objekt 'data'\n      let orderId = null;\n      try {\n        const data = notification.data || {};\n        orderId = data?.order_id;\n\n        // ‚úÖ Normalizuj orderId na string pro konzistentn√≠ porovn√°v√°n√≠\n        if (orderId !== null && orderId !== undefined) {\n          orderId = String(orderId);\n        }\n      } catch (e) {\n      }\n\n      // üéØ Pokud je to notifikace objedn√°vky NEBO TODO alarm s order_id, p≈ôidej do vl√°kna\n      const isOrderNotification = notification.typ?.includes('order');\n      const isTodoAlarm = notification.typ?.includes('todo_alarm');\n\n      if ((isOrderNotification || isTodoAlarm) && orderId) {\n        if (!threads.has(orderId)) {\n          threads.set(orderId, []);\n        }\n        threads.get(orderId).push(notification);\n      } else {\n        // Ostatn√≠ notifikace (bez order_id) zobraz norm√°lnƒõ\n        nonOrderNotifications.push(notification);\n      }\n    });\n\n    // Vytvo≈ô v√Ωsledn√Ω seznam: vl√°kna + jednotliv√© notifikace\n    const result = [];\n\n    // Se≈ôaƒè vl√°kna podle nejnovƒõj≈°√≠ notifikace v ka≈æd√©m vl√°knƒõ\n    const sortedThreads = Array.from(threads.entries())\n      .map(([orderId, threadNotifications]) => {\n        // Se≈ôaƒè notifikace ve vl√°knƒõ od nejnovƒõj≈°√≠ k nejstar≈°√≠\n        const sorted = [...threadNotifications].sort((a, b) => {\n          const dateA = new Date(a.dt_created || a.created_at || 0);\n          const dateB = new Date(b.dt_created || b.created_at || 0);\n          return dateB - dateA; // Sestupnƒõ (nejnovƒõj≈°√≠ prvn√≠)\n        });\n        return { orderId, notifications: sorted, newestDate: sorted[0]?.dt_created || sorted[0]?.created_at };\n      })\n      .sort((a, b) => {\n        const dateA = new Date(a.newestDate || 0);\n        const dateB = new Date(b.newestDate || 0);\n        return dateB - dateA; // Vl√°kna se≈ôazen√° podle nejnovƒõj≈°√≠ notifikace\n      });\n\n    // P≈ôidej vl√°kna do pole s jejich datem pro ≈ôazen√≠\n    const threadsWithDates = sortedThreads.map(({ orderId, notifications: threadNotifications }) => ({\n      isThread: true,\n      orderId,\n      notifications: threadNotifications,\n      mainNotification: threadNotifications[0], // Nejnovƒõj≈°√≠ jako hlavn√≠\n      olderNotifications: threadNotifications.slice(1), // Star≈°√≠ pod n√≠\n      sortDate: new Date(threadNotifications[0]?.dt_created || threadNotifications[0]?.created_at || 0)\n    }));\n\n    // P≈ôidej non-order notifikace s jejich datem\n    const nonOrderWithDates = nonOrderNotifications.map(n => ({\n      isThread: false,\n      notification: n,\n      sortDate: new Date(n.dt_created || n.created_at || 0)\n    }));\n\n    // Slouƒç obƒõ pole a se≈ôaƒè podle data (nejnovƒõj≈°√≠ prvn√≠)\n    const allItems = [...threadsWithDates, ...nonOrderWithDates].sort((a, b) => {\n      return b.sortDate - a.sortDate;\n    });\n\n    // Odstra≈à sortDate z v√Ωsledku (u≈æ nepot≈ôebujeme)\n    return allItems.map(item => {\n      const { sortDate, ...rest } = item;\n      return rest;\n    });\n  };\n\n  const threadedNotifications = groupNotificationsIntoThreads(filteredNotifications);\n\n  // ‚úÖ Funkce pro rozbalen√≠/sbalen√≠ v≈°ech vl√°ken\n  const handleExpandAll = () => {\n    const allThreadIds = threadedNotifications\n      .filter(item => item.isThread && item.olderNotifications.length > 0)\n      .map(item => item.orderId);\n    setExpandedThreads(new Set(allThreadIds));\n  };\n\n  const handleCollapseAll = () => {\n    setExpandedThreads(new Set());\n  };\n\n  // Statistics\n  // Statistiky - pouze celkov√© a podle typ≈Ø objedn√°vek\n  const stats = {\n    total: notifications.length,\n\n    // Statistiky podle stav≈Ø objedn√°vek\n    nova: notifications.filter(n => n.type === 'order_status_nova').length,\n    keSchvaleni: notifications.filter(n => n.type === 'order_status_ke_schvaleni').length,\n    schvalena: notifications.filter(n => n.type === 'order_status_schvalena').length,\n    zamitnuta: notifications.filter(n => n.type === 'order_status_zamitnuta').length,\n    cekaSe: notifications.filter(n => n.type === 'order_status_ceka_se').length,\n    odeslana: notifications.filter(n => n.type === 'order_status_odeslana').length,\n    potvrzena: notifications.filter(n => n.type === 'order_status_potvrzena').length,\n    cekaKontrola: notifications.filter(n => n.type === 'order_status_kontrola_ceka').length,\n    vecnaSpravnost: notifications.filter(n => n.type === 'order_status_kontrola_potvrzena').length,\n    registrZverejnena: notifications.filter(n => n.type === 'order_status_registr_zverejnena').length,\n    dokoncena: notifications.filter(n => n.type === 'order_status_dokoncena').length,\n    zrusena: notifications.filter(n => n.type === 'order_status_zrusena').length,\n  };\n\n  // ‚úÖ Paginace - v√Ωpoƒçet\n  const totalPages = Math.ceil(threadedNotifications.length / pageSize);\n  const startIndex = currentPage * pageSize;\n  const endIndex = startIndex + pageSize;\n  const paginatedNotifications = threadedNotifications.slice(startIndex, endIndex);\n\n  // ‚úÖ Paginace - navigaƒçn√≠ funkce\n  const goToFirstPage = () => {\n    setCurrentPage(0);\n  };\n\n  const goToPreviousPage = () => {\n    setCurrentPage(prev => Math.max(0, prev - 1));\n  };\n\n  const goToNextPage = () => {\n    setCurrentPage(prev => Math.min(totalPages - 1, prev + 1));\n  };\n\n  const goToLastPage = () => {\n    setCurrentPage(totalPages - 1);\n  };\n\n  const canGoPrevious = currentPage > 0;\n  const canGoNext = currentPage < totalPages - 1;\n\n  // ‚úÖ Reset str√°nky na 0 p≈ôi zmƒõnƒõ filtr≈Ø\n  useEffect(() => {\n    setCurrentPage(0);\n  }, [searchQuery, showUnread, showRead, showUrgent, showHigh, showNormal, threadMode]);\n\n  // üîí Handlery pro locked order dialog\n  const handleLockedOrderCancel = () => {\n    setShowLockedOrderDialog(false);\n    setLockedOrderInfo(null);\n    setOrderToEdit(null);\n  };\n\n  const handleLockedOrderForceUnlock = () => {\n    if (orderToEdit?.objednavka_id) {\n      // Zav≈ôi dialog a p≈ôejdi na editaci s force parametrem\n      setShowLockedOrderDialog(false);\n      navigate(`/order-form-25?edit=${orderToEdit.objednavka_id}&force=1`);\n    }\n  };\n\n  // üìù Handlery pro draft warning dialog\n  const handleEditCancel = () => {\n    setShowEditConfirmModal(false);\n    setCurrentDraftData(null);\n    setTargetOrderId(null);\n  };\n\n  const handleEditConfirm = async () => {\n    setShowEditConfirmModal(false);\n    \n    // Sma≈æ draft\n    const user_id = userDetail?.uzivatel_id || userDetail?.user_id;\n    if (user_id) {\n      draftManager.setCurrentUser(user_id);\n      await draftManager.deleteAllDraftKeys();\n    }\n\n    // Naviguj na c√≠lovou objedn√°vku\n    if (targetOrderId) {\n      navigate(`/order-form-25?edit=${targetOrderId}`);\n    }\n\n    // Vyƒçisti state\n    setCurrentDraftData(null);\n    setTargetOrderId(null);\n  };\n\n  const handleNotificationClick = async (notification) => {\n    // Oznaƒçit jako p≈ôeƒçtenou pokud nen√≠\n    const isUnread = !notification.precteno || notification.precteno === 0;\n    if (isUnread) {\n      await handleMarkAsRead(notification.id);\n    }\n\n    // Navigace podle typu notifikace\n    try {\n      // ‚úÖ Backend u≈æ vrac√≠ parsovan√Ω objekt 'data', nemus√≠me parsovat 'data_json'\n      const data = notification.data || {};\n\n      // ‚úÖ V≈ΩDY EDIT M√ìD - v≈°echny notifikace otev√≠raj√≠ objedn√°vku k editaci!\n      const mode = 'edit';\n\n      // üéØ OPRAVA: ID objedn√°vky m≈Ø≈æe b√Ωt v data.order_id NEBO v notification.objekt_id (po Czechification)\n      const orderId = data.order_id || notification.objekt_id;\n\n      // Notifikace objedn√°vek - navigace na detail\n      if (notification.typ && notification.typ.includes('order') && orderId) {\n        const targetOrderId = parseInt(orderId);\n\n        // üîí KONTROLA ZAMƒåEN√ç - pokud jdeme do edit m√≥du, zkontroluj zda nen√≠ zamƒçen√° jin√Ωm u≈æivatelem\n        if (mode === 'edit') {\n          const token = userDetail?.token;\n          const username = userDetail?.username;\n\n          if (token && username) {\n            try {\n              const dbOrder = await getOrderV2(targetOrderId, token, username, true);\n\n              if (!dbOrder) {\n                safeToast('error', 'Nepoda≈ôilo se naƒç√≠st objedn√°vku z datab√°ze');\n                return;\n              }\n\n              // Kontrola zamƒçen√≠ - pokud je locked: true, je zamƒçen√° JIN√ùM u≈æivatelem\n              // ‚ö†Ô∏è Blokuj pouze pokud locked=true A NEN√ç m≈Øj z√°mek A NEN√ç expired (>15 min)\n              if (dbOrder.lock_info?.locked === true && !dbOrder.lock_info?.is_owned_by_me && !dbOrder.lock_info?.is_expired) {\n                const lockInfo = dbOrder.lock_info;\n                const lockedByUserName = lockInfo.locked_by_user_fullname || `u≈æivatel #${lockInfo.locked_by_user_id}`;\n\n                // Zjisti, zda m√° u≈æivatel pr√°vo na force unlock\n                const canForceUnlock = userDetail?.roles?.some(role =>\n                  role.kod_role === 'SUPERADMIN' || role.kod_role === 'ADMINISTRATOR'\n                );\n\n                setLockedOrderInfo({\n                  lockedByUserName,\n                  lockedByUserEmail: lockInfo.locked_by_user_email || null,\n                  lockedByUserTelefon: lockInfo.locked_by_user_telefon || null,\n                  lockedAt: lockInfo.locked_at || null,\n                  lockAgeMinutes: lockInfo.lock_age_minutes || null,\n                  canForceUnlock,\n                  orderId: targetOrderId,\n                  userRoleName: userDetail?.roles?.find(r => r.kod_role === 'SUPERADMIN' || r.kod_role === 'ADMINISTRATOR')?.nazev_role || 'administr√°tor'\n                });\n                setOrderToEdit({ objednavka_id: targetOrderId });\n                setShowLockedOrderDialog(true);\n                return; // ZASTAVIT - ƒçek√°me na rozhodnut√≠ u≈æivatele\n              }\n            } catch (error) {\n              console.error('Chyba p≈ôi kontrole zamƒçen√≠:', error);\n              safeToast('error', 'Chyba p≈ôi kontrole dostupnosti objedn√°vky');\n              return;\n            }\n          }\n        }\n\n        // üéØ P≈òESNƒö STEJN√ù K√ìD JAKO V Orders25List.js - handleEdit()\n        // üîß OPRAVA: Backend pou≈æ√≠v√° uzivatel_id, ne user_id!\n        const user_id = userDetail?.uzivatel_id || userDetail?.user_id;\n        if (user_id) {\n          draftManager.setCurrentUser(user_id);\n          const hasDraft = await draftManager.hasDraft();\n\n          let shouldShowConfirmDialog = false;\n          let draftDataToStore = null;\n          let isDraftForThisOrder = false;\n\n          if (hasDraft) {\n            try {\n              const draftData = await draftManager.loadDraft();\n\n              // üéØ KONTROLA OWNERSHIP: Pat≈ô√≠ draft k T√âTO objedn√°vce?\n              const draftOrderId = draftData.savedOrderId || draftData.formData?.id;\n              const currentOrderId = targetOrderId;\n\n              console.log('üîç NotificationsPage - DEBUG POROVN√ÅN√ç ID:', {\n                draftOrderId,\n                currentOrderId,\n                'draftData.savedOrderId': draftData.savedOrderId,\n                'draftData.formData?.id': draftData.formData?.id,\n                targetOrderId,\n                'String(draftOrderId)': String(draftOrderId),\n                'String(currentOrderId)': String(currentOrderId),\n                'jsou stejn√©?': String(draftOrderId) === String(currentOrderId),\n                'cel√Ω draftData': draftData\n              });\n\n              // ‚úÖ Pokud draft pat≈ô√≠ k T√âTO objedn√°vce, NEPTAT SE!\n              if (draftOrderId && currentOrderId && String(draftOrderId) === String(currentOrderId)) {\n                console.log('‚úÖ Draft pat≈ô√≠ k T√âTO objedn√°vce - naviguju bez ptan√≠');\n                shouldShowConfirmDialog = false;\n                isDraftForThisOrder = true;\n              } else {\n                // ‚ùå Draft pat≈ô√≠ k JIN√â objedn√°vce - zeptej se\n                console.log('‚ùå Draft pat≈ô√≠ k JIN√â objedn√°vce - kontroluji zmƒõny');\n                const hasNewConcept = isValidConcept(draftData);\n                const hasDbChanges = hasDraftChanges(draftData);\n                console.log('üìä Zmƒõny v draftu:', { hasNewConcept, hasDbChanges });\n                shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n                if (shouldShowConfirmDialog) {\n                  console.log('‚ö†Ô∏è ZOBRAZUJI CONFIRM DIALOG');\n                  draftDataToStore = draftData;\n                } else {\n                  console.log('‚úÖ ≈Ω√°dn√© zmƒõny - naviguju bez ptan√≠');\n                }\n              }\n            } catch (error) {\n              console.error('‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ draftu:', error);\n              shouldShowConfirmDialog = false;\n            }\n          }\n\n          // üéØ OPTIMALIZACE: Pokud draft pat≈ô√≠ k T√âTO objedn√°vce, rovnou naviguj\n          if (isDraftForThisOrder) {\n            navigate(`/order-form-25?edit=${targetOrderId}`);\n            return;\n          }\n\n          // üéØ Pokud existuje draft pro JINOU objedn√°vku, zobraz confirm dialog\n          if (shouldShowConfirmDialog && draftDataToStore) {\n            setCurrentDraftData(draftDataToStore);\n            setTargetOrderId(targetOrderId);\n            setShowEditConfirmModal(true);\n            return; // ƒåek√°me na rozhodnut√≠ u≈æivatele\n          }\n        }\n\n        // ‚úÖ V≈ΩDY EDIT M√ìD - pou≈æij orderId promƒõnnou (ne data.order_id)\n        navigate(`/order-form-25?edit=${orderId}`);\n      }\n      // TODO alarmy - navigace na objedn√°vku (alarm_todo tak√© obsahuje 'order' a spadne do vƒõtve v√Ω≈°e)\n      else if (notification.typ && notification.typ.includes('alarm_todo') && data.order_id) {\n        // ‚ö†Ô∏è Fallback pro alarm_todo bez 'order' v typu - STEJN√ù K√ìD JAKO V√ù≈†E\n        const targetOrderId = parseInt(data.order_id);\n        const user_id = userDetail?.user_id;\n\n        if (user_id) {\n          draftManager.setCurrentUser(user_id);\n          const hasDraft = await draftManager.hasDraft();\n\n          let shouldShowConfirmDialog = false;\n          let draftDataToStore = null;\n          let isDraftForThisOrder = false;\n\n          if (hasDraft) {\n            try {\n              const draftData = await draftManager.loadDraft();\n              const draftOrderId = draftData.savedOrderId || draftData.formData?.id;\n              const currentOrderId = targetOrderId;\n\n              if (draftOrderId && currentOrderId && String(draftOrderId) === String(currentOrderId)) {\n                shouldShowConfirmDialog = false;\n                isDraftForThisOrder = true;\n              } else {\n                const hasNewConcept = isValidConcept(draftData);\n                const hasDbChanges = hasDraftChanges(draftData);\n                shouldShowConfirmDialog = hasNewConcept || hasDbChanges;\n\n                if (shouldShowConfirmDialog) {\n                  draftDataToStore = draftData;\n                }\n              }\n            } catch (error) {\n              shouldShowConfirmDialog = false;\n            }\n          }\n\n          if (isDraftForThisOrder) {\n            navigate(`/order-form-25?edit=${targetOrderId}`);\n            return;\n          }\n\n          if (shouldShowConfirmDialog && draftDataToStore) {\n            setCurrentDraftData(draftDataToStore);\n            setTargetOrderId(targetOrderId);\n            setShowEditConfirmModal(true);\n            return; // ƒåek√°me na rozhodnut√≠ u≈æivatele\n          }\n        }\n\n        navigate(`/order-form-25?edit=${data.order_id}`);\n      }\n\n    } catch (error) {\n    }\n  };\n\n  const handleMarkAsRead = async (notificationId, e) => {\n    e?.stopPropagation();\n\n    try {\n      // Zavolej backend API\n      await markNotificationAsRead(notificationId);\n\n      // Aktualizuj lok√°ln√≠ stav\n      setNotifications(prev =>\n        prev.map(n => n.id === notificationId ? { ...n, is_read: 1 } : n)\n      );\n\n      // Aktualizuj badge v menu\n      if (bgTasks?.handleUnreadCountChange) {\n        const currentCount = bgTasks.unreadNotificationsCount || 0;\n        if (currentCount > 0) {\n          bgTasks.handleUnreadCountChange(currentCount - 1);\n        }\n      }\n    } catch (error) {\n      alert('Nepoda≈ôilo se oznaƒçit notifikaci jako p≈ôeƒçtenou.');\n    }\n  };\n\n  const handleMarkAllRead = async () => {\n    try {\n      // Zavolej backend API\n      await markAllNotificationsAsRead();\n\n      // Aktualizuj v≈°echny jako p≈ôeƒçten√©\n      setNotifications(prev =>\n        prev.map(n => ({ ...n, is_read: 1 }))\n      );\n\n      // Aktualizuj badge na 0\n      if (bgTasks?.handleUnreadCountChange) {\n        bgTasks.handleUnreadCountChange(0);\n      }\n    } catch (error) {\n      alert('Nepoda≈ôilo se oznaƒçit v≈°echny notifikace jako p≈ôeƒçten√©.');\n    }\n  };\n\n  const handleDismiss = async (notificationId, e) => {\n    e?.stopPropagation();\n\n    try {\n      // Zavolej backend API\n      await dismissNotification(notificationId);\n\n      // ‚úÖ Na str√°nce spr√°vy: NEODSTRA≈áUJ notifikaci, pouze ji oznaƒç jako skrytou\n      // U≈æivatel ji uvid√≠ se statusem \"Skryt√° v dropdownu\"\n      setNotifications(prev => {\n        const updated = prev.map(n => n.id === notificationId ? { ...n, is_dismissed: 1 } : n);\n        return updated;\n      });\n\n      // Aktualizuj badge pokud byla notifikace nep≈ôeƒçten√°\n      const notification = notifications.find(n => n.id === notificationId);\n      if (notification && (!notification.precteno || notification.precteno === 0)) {\n        if (bgTasks?.handleUnreadCountChange) {\n          const currentCount = bgTasks.unreadNotificationsCount || 0;\n          if (currentCount > 0) {\n            bgTasks.handleUnreadCountChange(currentCount - 1);\n          }\n        }\n      }\n    } catch (error) {\n      alert('Nepoda≈ôilo se smazat notifikaci.');\n    }\n  };\n\n  // ‚úÖ RESTORE - Obnovit skrytou notifikaci (znovu zobrazit v dropdownu)\n  const handleRestore = async (notificationId, e) => {\n    e?.stopPropagation();\n\n    try {\n      // Zavolej backend API\n      await restoreNotification(notificationId);\n\n      // Aktualizuj lok√°ln√≠ stav - oznaƒç jako ne-skrytou\n      setNotifications(prev =>\n        prev.map(n => n.id === notificationId ? { ...n, is_dismissed: 0 } : n)\n      );\n    } catch (error) {\n      alert('Nepoda≈ôilo se obnovit notifikaci.');\n    }\n  };\n\n  const handleDismissAll = async () => {\n    try {\n      // Smazat v≈°echny notifikace paralelnƒõ\n      const dismissPromises = notifications.map(n => dismissNotification(n.id));\n      await Promise.all(dismissPromises);\n\n      // ‚úÖ Na str√°nce spr√°vy: NEODSTRA≈áUJ notifikace, pouze je oznaƒç jako skryt√©\n      setNotifications(prev =>\n        prev.map(n => ({ ...n, is_dismissed: 1 }))\n      );\n\n      // Aktualizuj badge na 0\n      if (bgTasks?.handleUnreadCountChange) {\n        bgTasks.handleUnreadCountChange(0);\n      }\n    } catch (error) {\n      alert('Nepoda≈ôilo se smazat v≈°echny notifikace. Nƒõkter√© mohly b√Ωt smaz√°ny.');\n      // Znovu naƒçti pro sync se skuteƒçn√Ωm stavem\n      loadNotifications();\n    }\n  };\n  // ‚úÖ DELETE - Smazat jednotlivou notifikaci z DB\n  const handleDelete = (notificationId) => {\n    setConfirmDialog({\n      isOpen: true,\n      title: 'Smazat notifikaci',\n      message: 'Opravdu chcete trvale smazat tuto notifikaci z datab√°ze?\\n\\nTato akce je NEVRATN√Å!',\n      icon: faTrash,\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmDialog({ isOpen: false });\n        try {\n          await deleteNotification(notificationId);\n\n          // Odstra≈à z lok√°ln√≠ho stavu\n          setNotifications(prev => prev.filter(n => n.id !== notificationId));\n\n          // Aktualizuj badge pokud byla nep≈ôeƒçten√°\n          const notification = notifications.find(n => n.id === notificationId);\n          if (notification && (!notification.precteno || notification.precteno === 0)) {\n            if (bgTasks?.handleUnreadCountChange) {\n              const currentCount = bgTasks.unreadNotificationsCount || 0;\n              if (currentCount > 0) {\n                bgTasks.handleUnreadCountChange(currentCount - 1);\n              }\n            }\n          }\n        } catch (error) {\n          setConfirmDialog({\n            isOpen: true,\n            title: 'Chyba',\n            message: 'Nepoda≈ôilo se smazat notifikaci.\\n\\nZkuste to pros√≠m znovu.',\n            icon: faExclamationCircle,\n            variant: 'danger',\n            onConfirm: () => setConfirmDialog({ isOpen: false }),\n            onCancel: () => setConfirmDialog({ isOpen: false })\n          });\n        }\n      },\n      onCancel: () => setConfirmDialog({ isOpen: false })\n    });\n  };\n  // ‚úÖ DELETE ALL - Smazat v≈°echny nebo filtrovan√© notifikace z DB\n  const handleDeleteAll = () => {\n    // Pokud je aktivn√≠ filtr, sma≈æ pouze zobrazen√© notifikace\n    const hasActiveFilter = searchQuery || showUnread || showRead || showUrgent || showHigh || showNormal;\n    const notificationsToDelete = hasActiveFilter ? filteredNotifications : notifications;\n    const count = notificationsToDelete.length;\n    const actionText = hasActiveFilter ? 'zobrazen√©' : 'V≈†ECHNY';\n\n    setConfirmDialog({\n      isOpen: true,\n      title: hasActiveFilter ? 'Smazat zobrazen√© notifikace' : 'Smazat v≈°echny notifikace',\n      message: `Opravdu chcete trvale smazat ${actionText} notifikace (${count} ks) z datab√°ze?\\n\\nTato akce je NEVRATN√Å a nelze ji vr√°tit zpƒõt!`,\n      icon: faExclamationTriangle,\n      variant: 'danger',\n      onConfirm: async () => {\n        setConfirmDialog({ isOpen: false });\n        try {\n          let result;\n\n          if (hasActiveFilter) {\n            // Sma≈æ pouze filtrovan√© notifikace (jedna po druh√©)\n            const deletePromises = notificationsToDelete.map(n => deleteNotification(n.id));\n            await Promise.all(deletePromises);\n            result = { deleted_count: notificationsToDelete.length };\n\n            // Odstra≈à smazan√© notifikace z lok√°ln√≠ho stavu\n            const deletedIds = new Set(notificationsToDelete.map(n => n.id));\n            setNotifications(prev => prev.filter(n => !deletedIds.has(n.id)));\n\n            // Aktualizuj badge - odeƒçti smazan√© nep≈ôeƒçten√©\n            const deletedUnreadCount = notificationsToDelete.filter(n => !n.precteno || n.precteno === 0).length;\n            if (deletedUnreadCount > 0 && bgTasks?.handleUnreadCountChange) {\n              const currentCount = bgTasks.unreadNotificationsCount || 0;\n              bgTasks.handleUnreadCountChange(Math.max(0, currentCount - deletedUnreadCount));\n            }\n          } else {\n            // Sma≈æ v≈°echny notifikace\n            result = await deleteAllNotifications();\n\n            // Vyƒçisti lok√°ln√≠ stav\n            setNotifications([]);\n\n            // Aktualizuj badge na 0\n            if (bgTasks?.handleUnreadCountChange) {\n              bgTasks.handleUnreadCountChange(0);\n            }\n          }\n\n        } catch (error) {\n          setConfirmDialog({\n            isOpen: true,\n            title: 'Chyba',\n            message: 'Nepoda≈ôilo se smazat notifikace.\\n\\nZkuste to pros√≠m znovu.',\n            icon: faExclamationCircle,\n            variant: 'danger',\n            onConfirm: () => setConfirmDialog({ isOpen: false }),\n            onCancel: () => setConfirmDialog({ isOpen: false })\n          });\n        }\n      },\n      onCancel: () => setConfirmDialog({ isOpen: false })\n    });\n  };\n\n  const getTimeAgo = (dateString) => {\n    if (!dateString) return '';\n\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now - date;\n    const diffMins = Math.floor(diffMs / 60000);\n\n    if (diffMins < 1) return 'Pr√°vƒõ teƒè';\n    if (diffMins < 60) return `P≈ôed ${diffMins} min`;\n\n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours < 24) return `P≈ôed ${diffHours} h`;\n\n    const diffDays = Math.floor(diffHours / 24);\n    if (diffDays < 7) return `P≈ôed ${diffDays} d`;\n\n    return date.toLocaleDateString('cs-CZ', {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric'\n    });\n  };\n\n  // üéØ getPriorityIcon je nyn√≠ importov√°n z utils/iconMapping.js\n  // Odstranƒõna lok√°ln√≠ implementace pro zaji≈°tƒõn√≠ konzistence ikon\n\n  // üéØ Helper pro ikonu podle priority (m√≠sto emoji)\n  const getPriorityIconComponent = (priority) => {\n    const normalizedPriority = (priority || 'INFO').toUpperCase();\n    \n    switch (normalizedPriority) {\n      case 'EXCEPTIONAL':\n      case 'URGENT':\n        return <FontAwesomeIcon icon={faBolt} />;\n      case 'APPROVAL':\n      case 'HIGH':\n        return <FontAwesomeIcon icon={faExclamation} />;\n      case 'INFO':\n      case 'NORMAL':\n      default:\n        return <FontAwesomeIcon icon={faInfoCircle} />;\n    }\n  };\n\n  return (\n    <PageContainer>\n      <ContentWrapper>\n        <TitlePanel>\n          <TitleLeft>\n            <SmartTooltip text=\"Obnovit data z datab√°ze (force reload)\" icon=\"warning\" preferredPosition=\"bottom\">\n              <RefreshButton\n                onClick={handleRefresh}\n              >\n                <FontAwesomeIcon icon={faSyncAlt} />\n              </RefreshButton>\n            </SmartTooltip>\n            {/* ‚úÖ P≈ôep√≠naƒç re≈æimu vl√°ken */}\n            <SmartTooltip\n              text={threadMode ? \"Zobrazit v≈°echny notifikace samostatnƒõ\" : \"Seskupit notifikace objedn√°vek do vl√°ken\"}\n              icon=\"info\"\n              preferredPosition=\"bottom\"\n            >\n              <RefreshButton\n                onClick={() => setThreadMode(!threadMode)}\n                style={{\n                background: threadMode ? 'rgba(34, 197, 94, 0.25)' : 'rgba(255, 255, 255, 0.15)',\n                borderColor: threadMode ? 'rgba(34, 197, 94, 0.5)' : 'rgba(255, 255, 255, 0.3)'\n              }}\n            >\n              <FontAwesomeIcon icon={threadMode ? faLayerGroup : faList} />\n            </RefreshButton>\n            </SmartTooltip>\n            {stats.unread > 0 && (\n              <HeaderActionButton\n                onClick={handleMarkAllRead}\n                title=\"Oznaƒçit v≈°echny notifikace jako p≈ôeƒçten√©\"\n              >\n                <FontAwesomeIcon icon={faCheckDouble} />\n                Oznaƒçit v≈°e jako p≈ôeƒçten√©\n              </HeaderActionButton>\n            )}\n            {notifications.length > 0 && (\n              <HeaderActionButton\n                onClick={handleDismissAll}\n                title=\"Skr√Ωt v≈°echny notifikace ze zvoneƒçku\"\n              >\n                <FontAwesomeIcon icon={faEyeSlash} />\n                Skr√Ωt v≈°e ze zvoneƒçku\n              </HeaderActionButton>\n            )}\n            {notifications.length > 0 && (() => {\n              const hasActiveFilter = searchQuery || showUnread || showRead || showUrgent || showHigh || showNormal;\n              const count = hasActiveFilter ? filteredNotifications.length : notifications.length;\n              const buttonText = hasActiveFilter ? `Smazat zobrazen√© (${count})` : 'Smazat v≈°e trvale';\n\n              return (\n                <HeaderActionButton\n                  onClick={handleDeleteAll}\n                  title={hasActiveFilter ? `Sma≈æe ${count} zobrazen√Ωch notifikac√≠` : `Sma≈æe v≈°echny notifikace (${count} ks)`}\n                >\n                  <FontAwesomeIcon icon={faTrash} />\n                  {buttonText}\n                </HeaderActionButton>\n              );\n            })()}\n            <HeaderActionButton\n              onClick={() => setDetailMode(!detailMode)}\n              title={detailMode ? \"Skr√Ωt detaily (p≈ôedmƒõt, cena, tagy)\" : \"Zobrazit detaily (p≈ôedmƒõt, cena, tagy)\"}\n              style={{ marginRight: 'auto' }}\n            >\n              <FontAwesomeIcon icon={detailMode ? faEye : faEyeSlash} />\n              Detailn√≠ re≈æim\n            </HeaderActionButton>\n          </TitleLeft>\n          <PageTitle>\n            Spr√°va a p≈ôehled notifikac√≠\n            <FontAwesomeIcon icon={faBell} />\n          </PageTitle>\n        </TitlePanel>\n\n        <PageDivider />\n\n        {/* üéØ Dashboard statistiky - s collapse */}\n        <CollapseLine>\n          <DashboardLabel>Dashboard - p≈ôehled notifikac√≠</DashboardLabel>\n          <DividerLine />\n          <CollapseButton onClick={() => setIsDashboardCollapsed(!isDashboardCollapsed)}>\n            <FontAwesomeIcon icon={isDashboardCollapsed ? faChevronDown : faChevronUp} />\n          </CollapseButton>\n        </CollapseLine>\n\n        {!isDashboardCollapsed && (\n        <StatsBar>\n          <StatCard\n            $color=\"#3b82f6\"\n            $clickable={true}\n            $isActive={!searchQuery && !activeStatFilter}\n            onClick={() => handleStatCardClick('total')}\n            title=\"Kliknut√≠m zru≈°√≠te v≈°echny filtry\"\n          >\n            <StatValue>{stats.total}</StatValue>\n            <StatIcon>üìä</StatIcon>\n            <StatLabel>Celkem notifikac√≠</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#64748b\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'nova'}\n            onClick={() => handleStatCardClick('nova')}\n            title=\"Filtrovat: Objedn√°vka vytvo≈ôena\"\n          >\n            <StatValue>{stats.nova}</StatValue>\n            <StatIcon>üìù</StatIcon>\n            <StatLabel>Nov√°</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#3b82f6\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'keSchvaleni'}\n            onClick={() => handleStatCardClick('keSchvaleni')}\n            title=\"Filtrovat: Objedn√°vka ke schv√°len√≠\"\n          >\n            <StatValue>{stats.keSchvaleni}</StatValue>\n            <StatIcon>üìã</StatIcon>\n            <StatLabel>Ke schv√°len√≠</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#16a34a\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'schvalena'}\n            onClick={() => handleStatCardClick('schvalena')}\n            title=\"Filtrovat: Objedn√°vka schv√°lena\"\n          >\n            <StatValue>{stats.schvalena}</StatValue>\n            <StatIcon>üëç</StatIcon>\n            <StatLabel>Schv√°len√°</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#dc2626\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'zamitnuta'}\n            onClick={() => handleStatCardClick('zamitnuta')}\n            title=\"Filtrovat: Objedn√°vka zam√≠tnuta\"\n          >\n            <StatValue>{stats.zamitnuta}</StatValue>\n            <StatIcon>‚ùå</StatIcon>\n            <StatLabel>Zam√≠tnut√°</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#f59e0b\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'cekaSe'}\n            onClick={() => handleStatCardClick('cekaSe')}\n            title=\"Filtrovat: Objedn√°vka ƒçek√°\"\n          >\n            <StatValue>{stats.cekaSe}</StatValue>\n            <StatIcon>‚è∏Ô∏è</StatIcon>\n            <StatLabel>ƒåek√° se</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#3b82f6\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'odeslana'}\n            onClick={() => handleStatCardClick('odeslana')}\n            title=\"Filtrovat: Objedn√°vka odesl√°na dodavateli\"\n          >\n            <StatValue>{stats.odeslana}</StatValue>\n            <StatIcon>üì§</StatIcon>\n            <StatLabel>Odesl√°na dodavateli</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#8b5cf6\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'potvrzena'}\n            onClick={() => handleStatCardClick('potvrzena')}\n            title=\"Filtrovat: Objedn√°vka potvrzena dodavatelem\"\n          >\n            <StatValue>{stats.potvrzena}</StatValue>\n            <StatIcon>‚úîÔ∏è</StatIcon>\n            <StatLabel>Potvrzena dodavatelem</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#f59e0b\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'cekaKontrola'}\n            onClick={() => handleStatCardClick('cekaKontrola')}\n            title=\"Filtrovat: ƒåek√° na kontrolu\"\n          >\n            <StatValue>{stats.cekaKontrola}</StatValue>\n            <StatIcon>üîç</StatIcon>\n            <StatLabel>ƒåek√° na kontrolu</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#10b981\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'vecnaSpravnost'}\n            onClick={() => handleStatCardClick('vecnaSpravnost')}\n            title=\"Filtrovat: Vƒõcn√° spr√°vnost potvrzena\"\n          >\n            <StatValue>{stats.vecnaSpravnost}</StatValue>\n            <StatIcon>‚úÖ</StatIcon>\n            <StatLabel>Vƒõcn√° spr√°vnost</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#10b981\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'registrZverejnena'}\n            onClick={() => handleStatCardClick('registrZverejnena')}\n            title=\"Filtrovat: Zve≈ôejnƒõna v registru smluv\"\n          >\n            <StatValue>{stats.registrZverejnena}</StatValue>\n            <StatIcon>üì¢</StatIcon>\n            <StatLabel>Zve≈ôejnƒõna v registru</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#059669\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'dokoncena'}\n            onClick={() => handleStatCardClick('dokoncena')}\n            title=\"Filtrovat: Objedn√°vka dokonƒçena\"\n          >\n            <StatValue>{stats.dokoncena}</StatValue>\n            <StatIcon>üéØ</StatIcon>\n            <StatLabel>Dokonƒçen√°</StatLabel>\n          </StatCard>\n\n          <StatCard\n            $color=\"#6b7280\"\n            $clickable={true}\n            $isActive={activeStatFilter === 'zrusena'}\n            onClick={() => handleStatCardClick('zrusena')}\n            title=\"Filtrovat: Objedn√°vka zru≈°ena\"\n          >\n            <StatValue>{stats.zrusena}</StatValue>\n            <StatIcon>üö´</StatIcon>\n            <StatLabel>Zru≈°en√°</StatLabel>\n          </StatCard>\n        </StatsBar>\n        )}\n\n        <ToolbarContainer>\n          <SearchBox>\n            <SearchIcon>\n              <FontAwesomeIcon icon={faSearch} />\n            </SearchIcon>\n            <SearchInput\n              type=\"text\"\n              placeholder=\"Hledat v notifikac√≠ch...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n            {searchQuery && (\n              <ClearSearchButton onClick={() => setSearchQuery('')} title=\"Vymazat\">\n                <FontAwesomeIcon icon={faTimes} />\n              </ClearSearchButton>\n            )}\n          </SearchBox>\n\n          <FilterGroup>\n            <FilterButton\n              $active={!showUnread && !showRead}\n              onClick={() => {\n                setShowUnread(false);\n                setShowRead(false);\n              }}\n            >\n              V≈°echny\n            </FilterButton>\n            <FilterButton\n              $active={showUnread}\n              onClick={() => {\n                setShowUnread(!showUnread);\n                if (!showUnread) setShowRead(false);\n              }}\n            >\n              <FontAwesomeIcon icon={faBell} />\n              Nep≈ôeƒçten√©\n            </FilterButton>\n            <FilterButton\n              $active={showRead}\n              onClick={() => {\n                setShowRead(!showRead);\n                if (!showRead) setShowUnread(false);\n              }}\n            >\n              <FontAwesomeIcon icon={faCheckDouble} />\n              P≈ôeƒçten√©\n            </FilterButton>\n            <FilterButton\n              $active={showUrgent}\n              onClick={() => setShowUrgent(!showUrgent)}\n            >\n              <FontAwesomeIcon icon={faExclamationCircle} />\n              Urgentn√≠\n            </FilterButton>\n            <FilterButton\n              $active={showHigh}\n              onClick={() => setShowHigh(!showHigh)}\n            >\n              <FontAwesomeIcon icon={faClock} />\n              Vysok√°\n            </FilterButton>\n            <FilterButton\n              $active={showNormal}\n              onClick={() => setShowNormal(!showNormal)}\n            >\n              <FontAwesomeIcon icon={faInfoCircle} />\n              Norm√°ln√≠\n            </FilterButton>\n\n            {/* ‚úÖ Glob√°ln√≠ tlaƒç√≠tka pro rozbalen√≠/sbalen√≠ vl√°ken - pouze v thread m√≥du */}\n            {threadMode && threadedNotifications.some(item => item.isThread && item.olderNotifications.length > 0) && (\n              <>\n                <div style={{ marginLeft: 'auto', display: 'flex', gap: '8px' }}>\n                  <FilterButton\n                    onClick={handleExpandAll}\n                    title=\"Rozbalit v≈°echna vl√°kna\"\n                    style={{ borderColor: '#10b981', color: '#10b981' }}\n                  >\n                    <FontAwesomeIcon icon={faExpandAlt} />\n                    Rozbalit v≈°e\n                  </FilterButton>\n                  <FilterButton\n                    onClick={handleCollapseAll}\n                    title=\"Sbalit v≈°echna vl√°kna\"\n                    style={{ borderColor: '#6366f1', color: '#6366f1' }}\n                  >\n                    <FontAwesomeIcon icon={faCompressAlt} />\n                    Sbalit v≈°e\n                  </FilterButton>\n                </div>\n              </>\n            )}\n          </FilterGroup>\n        </ToolbarContainer>\n\n        <NotificationsList>\n          {error ? (\n            <EmptyState>\n              <EmptyIcon>‚ùå</EmptyIcon>\n              <EmptyText>Chyba p≈ôi naƒç√≠t√°n√≠</EmptyText>\n              <EmptySubtext>{error}</EmptySubtext>\n              <ActionButton\n                style={{ marginTop: '16px' }}\n                onClick={loadNotifications}\n              >\n                Zkusit znovu\n              </ActionButton>\n            </EmptyState>\n          ) : loading ? (\n            <LoadingState>\n              <div style={{ fontSize: '32px', marginBottom: '16px' }}>‚è≥</div>\n              Naƒç√≠t√°n√≠ notifikac√≠...\n            </LoadingState>\n          ) : filteredNotifications.length === 0 ? (\n            <EmptyState>\n              <EmptyIcon>üîî</EmptyIcon>\n              <EmptyText>\n                {searchQuery || showUnread || showRead || showUrgent || showHigh || showNormal\n                  ? '≈Ω√°dn√© notifikace neodpov√≠daj√≠ filtr≈Øm'\n                  : '≈Ω√°dn√© notifikace'\n                }\n              </EmptyText>\n              <EmptySubtext>\n                {searchQuery || showUnread || showRead || showUrgent || showHigh || showNormal\n                  ? 'Zkuste zmƒõnit filtry nebo vyhled√°v√°n√≠'\n                  : 'Budete informov√°ni o nov√Ωch ud√°lostech'\n                }\n              </EmptySubtext>\n            </EmptyState>\n          ) : (\n            paginatedNotifications.map((item, index) => {\n              // ‚úÖ RE≈ΩIM VL√ÅKEN - Pokud je to vl√°kno objedn√°vky\n              if (item.isThread) {\n                const { orderId, mainNotification, olderNotifications } = item;\n                const isExpanded = expandedThreads.has(orderId);\n                const threadCount = olderNotifications.length;\n\n                // ‚úÖ Unik√°tn√≠ kl√≠ƒç pro vl√°kno kombinuj√≠c√≠ thread-orderId-mainNotificationId\n                const threadKey = `thread-${orderId}-${mainNotification.id}`;\n\n                const isUnread = !mainNotification.precteno || mainNotification.precteno === 0 || mainNotification.precteno === false;\n                const isDismissed = mainNotification.skryto === 1 || mainNotification.skryto === true;\n                const priority = mainNotification.priorita || 'normal';\n\n                // ‚úÖ Backend u≈æ vrac√≠ parsovan√Ω objekt 'data', nemus√≠me parsovat\n                const notificationData = mainNotification.data || {};\n                mainNotification.data = notificationData;\n\n                return (\n                  <React.Fragment key={threadKey}>\n                    {/* Hlavn√≠ (nejnovƒõj≈°√≠) notifikace vl√°kna */}\n                    <NotificationItem\n                      $index={index}\n                      $isUnread={isUnread}\n                      $priority={priority}\n                      onClick={() => handleNotificationClick(mainNotification)}\n                      style={{\n                        borderLeft: threadCount > 0 ? '4px solid #3b82f6' : undefined\n                      }}\n                    >\n                      <NotificationIcon $priority={priority}>\n                        {getPriorityIconComponent(priority)}\n                      </NotificationIcon>\n                      <NotificationContent>\n                        <NotificationHeader>\n                          <NotificationTitle $isUnread={isUnread}>\n                            {(() => {\n                              if (mainNotification.typ?.includes('order') && mainNotification.data?.order_id && mainNotification.nadpis) {\n                                const evCisloMatch = mainNotification.nadpis.match(/(O-[^\\s:]+)/);\n                                if (evCisloMatch) {\n                                  const evCislo = evCisloMatch[1];\n                                  const textBefore = mainNotification.nadpis.substring(0, evCisloMatch.index);\n                                  const textAfter = mainNotification.nadpis.substring(evCisloMatch.index + evCislo.length);\n\n                                  return (\n                                    <>\n                                      {textBefore}\n                                      <a\n                                        href={`/order-form-25?edit=${mainNotification.data.order_id}&archivovano=1`}\n                                        onClick={async (e) => {\n                                          e.preventDefault();\n                                          e.stopPropagation();\n                                          // ‚úÖ OPRAVENO: Pou≈æij handleNotificationClick pro kontrolu draftu\n                                          await handleNotificationClick(mainNotification);\n                                        }}\n                                        style={{\n                                          color: '#3b82f6',\n                                          textDecoration: 'none',\n                                          fontWeight: '700'\n                                        }}\n                                        title=\"Editovat objedn√°vku\"\n                                      >\n                                        {evCislo}\n                                        <sup style={{ fontSize: '0.6em', fontWeight: '400', marginLeft: '0.2em', color: '#64748b' }}>\n                                          #{mainNotification.data.order_id}\n                                        </sup>\n                                      </a>\n                                      {textAfter}\n                                      {!detailMode && (\n                                        <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.9em', marginLeft: '0.5em' }}>\n                                          | <FontAwesomeIcon icon={faClock} style={{ fontSize: '11px', marginRight: '4px' }} />\n                                          {getTimeAgo(mainNotification.dt_created || mainNotification.created_at)}\n                                          {mainNotification.data?.placeholders?.action_performed_by && ` | ${mainNotification.data.placeholders.action_performed_by}`}\n                                          {mainNotification.from_user_name && ` | Od: ${mainNotification.from_user_name}`}\n                                        </span>\n                                      )}\n                                    </>\n                                  );\n                                }\n                              }\n                              return (\n                                <>\n                                  {mainNotification.nadpis}\n                                  {!detailMode && (\n                                    <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.9em', marginLeft: '0.5em' }}>\n                                      | <FontAwesomeIcon icon={faClock} style={{ fontSize: '11px', marginRight: '4px' }} />\n                                      {getTimeAgo(mainNotification.dt_created || mainNotification.created_at)}\n                                      {mainNotification.data?.placeholders?.action_performed_by && ` | ${mainNotification.data.placeholders.action_performed_by}`}\n                                      {mainNotification.from_user_name && ` | Od: ${mainNotification.from_user_name}`}\n                                    </span>\n                                  )}\n                                </>\n                              );\n                            })()}\n                            {threadCount > 0 && (\n                              <span\n                                style={{\n                                  background: '#dbeafe',\n                                  color: '#1e40af',\n                                  fontSize: '0.85em',\n                                  marginLeft: '0.75em',\n                                  cursor: 'pointer',\n                                  fontWeight: '600',\n                                  whiteSpace: 'nowrap',\n                                  padding: '3px 8px',\n                                  borderRadius: '6px'\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setExpandedThreads(prev => {\n                                    const newSet = new Set(prev);\n                                    if (newSet.has(orderId)) {\n                                      newSet.delete(orderId);\n                                    } else {\n                                      newSet.add(orderId);\n                                    }\n                                    return newSet;\n                                  });\n                                }}\n                                title={isExpanded ? \"Skr√Ωt star≈°√≠ notifikace\" : \"Zobrazit star≈°√≠ notifikace\"}\n                              >\n                                <FontAwesomeIcon icon={isExpanded ? faChevronDown : faLayerGroup} style={{ marginRight: '4px' }} />\n                                {threadCount} {threadCount === 1 ? 'star≈°√≠' : threadCount < 5 ? 'star≈°√≠' : 'star≈°√≠ch'}\n                              </span>\n                            )}\n                          </NotificationTitle>\n                        </NotificationHeader>\n                        {mainNotification.typ?.includes('order') && mainNotification.data?.placeholders ? (\n                          <NotificationMessage>\n                            <strong>P≈ôedmƒõt:</strong> {mainNotification.data.placeholders.order_subject || mainNotification.data.placeholders.predmet || 'N/A'} | <strong>Cena:</strong> {mainNotification.data.placeholders.max_price_with_dph || mainNotification.data.placeholders.amount || 'N/A'} | <strong>Objednatel:</strong> {mainNotification.data.placeholders.creator_name || mainNotification.data.placeholders.objednatel_name || 'N/A'} | <strong>Garant:</strong> {mainNotification.data.placeholders.garant_name || 'N/A'} | <strong>P≈ô√≠kazce:</strong> {mainNotification.data.placeholders.prikazce_name || mainNotification.data.placeholders.schvalovatel_name || 'N/A'}\n                          </NotificationMessage>\n                        ) : mainNotification.zprava || mainNotification.message ? (\n                          <NotificationMessage>\n                            {mainNotification.zprava || mainNotification.message}\n                          </NotificationMessage>\n                        ) : null}\n\n                        {detailMode && mainNotification.data?.placeholders?.note && (\n                          <div style={{\n                            fontSize: '0.85rem',\n                            color: '#475569',\n                            fontStyle: 'italic',\n                            marginTop: '0.5rem',\n                            padding: '0.625rem 0.75rem',\n                            background: '#f8fafc',\n                            borderLeft: '3px solid #cbd5e1',\n                            borderRadius: '4px'\n                          }}>\n                            <strong style={{ fontStyle: 'normal', color: '#64748b' }}>üìù Pozn√°mka:</strong>{' '}\n                            {mainNotification.data.placeholders.note}\n                          </div>\n                        )}\n\n                        <NotificationMeta>\n                          {mainNotification.category && (\n                            <TypeBadge $type={mainNotification.category}>\n                              {getCategoryLabel(mainNotification.category)}\n                            </TypeBadge>\n                          )}\n                          {mainNotification.data?.placeholders?.action_date && (\n                            <TypeBadge style={{ background: '#dbeafe', color: '#1e40af' }}>\n                              üìÖ {mainNotification.data.placeholders.action_date}\n                            </TypeBadge>\n                          )}\n                          {mainNotification.data?.placeholders?.action_performed_by && (\n                            <TypeBadge style={{ background: '#f3e8ff', color: '#6b21a8', fontWeight: 600 }}>\n                              üë§ {mainNotification.data.placeholders.action_performed_by}\n                            </TypeBadge>\n                          )}\n                        </NotificationMeta>\n                      </NotificationContent>\n                      <NotificationActions>\n                        {/* ‚úÖ Ikona rozbalen√≠/sbalen√≠ vl√°kna */}\n                        {olderNotifications.length > 0 && (\n                          <IconButton\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              const newExpanded = new Set(expandedThreads);\n                              if (isExpanded) {\n                                newExpanded.delete(orderId);\n                              } else {\n                                newExpanded.add(orderId);\n                              }\n                              setExpandedThreads(newExpanded);\n                            }}\n                            title={isExpanded ? \"Sbalit vl√°kno\" : \"Rozbalit vl√°kno\"}\n                            style={{\n                              color: isExpanded ? '#6366f1' : '#10b981'\n                            }}\n                          >\n                            <FontAwesomeIcon icon={isExpanded ? faChevronDown : faChevronRight} />\n                          </IconButton>\n                        )}\n\n                        {isUnread && (\n                          <IconButton\n                            onClick={(e) => handleMarkAsRead(mainNotification.id, e)}\n                            title=\"Oznaƒçit jako p≈ôeƒçten√©\"\n                          >\n                            <FontAwesomeIcon icon={faCheck} />\n                          </IconButton>\n                        )}\n                        {isDismissed ? (\n                          <IconButton\n                            onClick={(e) => handleRestore(mainNotification.id, e)}\n                            title=\"Zobrazit zpƒõt ve zvoneƒçku\"\n                            style={{ color: '#16a34a' }}\n                          >\n                            <FontAwesomeIcon icon={faUndo} />\n                          </IconButton>\n                        ) : (\n                          <IconButton\n                            onClick={(e) => handleDismiss(mainNotification.id, e)}\n                            title=\"Skr√Ωt ze zvoneƒçku (z≈Østane zde v historii)\"\n                          >\n                            <FontAwesomeIcon icon={faEyeSlash} />\n                          </IconButton>\n                        )}\n                        <IconButton\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDelete(mainNotification.id);\n                          }}\n                          title=\"Smazat trvale z datab√°ze\"\n                          style={{ color: '#dc2626' }}\n                        >\n                          <FontAwesomeIcon icon={faTrash} />\n                        </IconButton>\n                      </NotificationActions>\n                    </NotificationItem>\n\n                    {/* ‚úÖ Star≈°√≠ notifikace ve vl√°knƒõ (rozbaliteln√©) */}\n                    {isExpanded && olderNotifications.map((olderNotif, olderIndex) => {\n                      const olderIsUnread = !olderNotif.precteno || olderNotif.precteno === 0;\n                      const olderIsDismissed = olderNotif.skryto === 1;\n                      const olderPriority = olderNotif.priority || 'normal';\n\n                      // ‚úÖ Backend u≈æ vrac√≠ parsovan√Ω objekt 'data'\n                      const olderData = olderNotif.data || {};\n                      olderNotif.data = olderData;\n\n                      return (\n                        <NotificationItem\n                          key={`${threadKey}-older-${olderNotif.id}`}\n                          $index={index + olderIndex + 1}\n                          $isUnread={olderIsUnread}\n                          $priority={olderPriority}\n                          onClick={() => handleNotificationClick(olderNotif)}\n                          style={{\n                            marginLeft: '3rem',\n                            borderLeft: '3px solid #cbd5e1',\n                            background: '#f9fafb',\n                            opacity: 0.85,\n                            padding: '10px 14px'\n                          }}\n                        >\n                          <NotificationContent style={{ marginLeft: '0' }}>\n                            <NotificationHeader style={{ marginBottom: '6px' }}>\n                              <NotificationTitle $isUnread={olderIsUnread} style={{ fontSize: '13.5px', lineHeight: '1.4' }}>\n                                {(() => {\n                                  // Parsing ev. ƒç√≠sla zaƒç√≠naj√≠c√≠ho na \"O-\" a vytvo≈ôen√≠ odkazu\n                                  if (olderNotif.type?.includes('order') && olderNotif.data?.order_id && olderNotif.title) {\n                                    const evCisloMatch = olderNotif.title.match(/(O-[^\\s:]+)/);\n                                    if (evCisloMatch) {\n                                      const evCislo = evCisloMatch[1];\n                                      const textBefore = olderNotif.title.substring(0, evCisloMatch.index);\n                                      const textAfter = olderNotif.title.substring(evCisloMatch.index + evCislo.length);\n\n                                      return (\n                                        <>\n                                          {textBefore}\n                                          <a\n                                            href={`/order-form-25?edit=${olderNotif.data.order_id}&archivovano=1`}\n                                            onClick={async (e) => {\n                                              e.preventDefault();\n                                              e.stopPropagation();\n                                              // ‚úÖ OPRAVENO: Pou≈æij handleNotificationClick pro kontrolu draftu\n                                              await handleNotificationClick(olderNotif);\n                                            }}\n                                            style={{\n                                              color: '#3b82f6',\n                                              textDecoration: 'none',\n                                              fontWeight: '700'\n                                            }}\n                                            title=\"Editovat objedn√°vku\"\n                                          >\n                                            {evCislo}\n                                            <sup style={{ fontSize: '0.6em', fontWeight: '400', marginLeft: '0.2em', color: '#64748b' }}>\n                                              #{olderNotif.data.order_id}\n                                            </sup>\n                                          </a>\n                                          {textAfter}\n                                          {!detailMode && (\n                                            <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.85em', marginLeft: '0.5em' }}>\n                                              | <FontAwesomeIcon icon={faClock} style={{ fontSize: '10px', marginRight: '4px' }} />\n                                              {getTimeAgo(olderNotif.dt_created || olderNotif.created_at)}\n                                              {olderNotif.data?.placeholders?.action_performed_by && ` | ${olderNotif.data.placeholders.action_performed_by}`}\n                                              {olderNotif.from_user_name && ` | Od: ${olderNotif.from_user_name}`}\n                                            </span>\n                                          )}\n                                        </>\n                                      );\n                                    }\n                                  }\n                                  return (\n                                    <>\n                                      {olderNotif.title}\n                                      {!detailMode && (\n                                        <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.85em', marginLeft: '0.5em' }}>\n                                          | <FontAwesomeIcon icon={faClock} style={{ fontSize: '10px', marginRight: '4px' }} />\n                                          {getTimeAgo(olderNotif.dt_created || olderNotif.created_at)}\n                                          {olderNotif.data?.placeholders?.action_performed_by && ` | ${olderNotif.data.placeholders.action_performed_by}`}\n                                          {olderNotif.from_user_name && ` | Od: ${olderNotif.from_user_name}`}\n                                        </span>\n                                      )}\n                                    </>\n                                  );\n                                })()}\n                              </NotificationTitle>\n                            </NotificationHeader>\n                            {olderNotif.typ?.includes('order') && olderNotif.data ? (\n                              <NotificationMessage style={{ fontSize: '13px', lineHeight: '1.5', marginBottom: '6px' }}>\n                                <strong>P≈ôedmƒõt:</strong> {olderNotif.data.order_subject || 'N/A'} | <strong>Cena:</strong> {olderNotif.data.max_price_with_dph || olderNotif.data.max_price || 'N/A'} Kƒç | <strong>Objednatel:</strong> {olderNotif.data.creator_name || 'N/A'} | <strong>Garant:</strong> {olderNotif.data.garant_name || 'N/A'} | <strong>P≈ô√≠kazce:</strong> {olderNotif.data.prikazce_name || 'N/A'}\n                              </NotificationMessage>\n                            ) : olderNotif.zprava || olderNotif.message ? (\n                              <NotificationMessage style={{ fontSize: '13px', lineHeight: '1.5', marginBottom: '6px' }}>\n                                {olderNotif.zprava || olderNotif.message}\n                              </NotificationMessage>\n                            ) : null}\n\n                            {detailMode && olderNotif.data?.placeholders?.note && (\n                              <div style={{\n                                fontSize: '0.8rem',\n                                color: '#475569',\n                                fontStyle: 'italic',\n                                marginTop: '0.5rem',\n                                padding: '0.5rem 0.625rem',\n                                background: '#f8fafc',\n                                borderLeft: '2px solid #cbd5e1',\n                                borderRadius: '3px',\n                                lineHeight: '1.4'\n                              }}>\n                                <strong style={{ fontStyle: 'normal', color: '#64748b' }}>üìù Pozn√°mka:</strong>{' '}\n                                {olderNotif.data.placeholders.note}\n                              </div>\n                            )}\n\n                            <NotificationMeta style={{ gap: '10px', marginTop: '6px' }}>\n                              {olderNotif.category && (\n                                <TypeBadge $type={olderNotif.category} style={{ fontSize: '10px', padding: '2px 6px' }}>\n                                  {getCategoryLabel(olderNotif.category)}\n                                </TypeBadge>\n                              )}\n                              {olderNotif.data?.placeholders?.action_date && (\n                                <TypeBadge style={{ background: '#dbeafe', color: '#1e40af', fontSize: '10px', padding: '2px 6px' }}>\n                                  üìÖ {olderNotif.data.placeholders.action_date}\n                                </TypeBadge>\n                              )}\n                              {olderNotif.data?.placeholders?.action_performed_by && (\n                                <TypeBadge style={{ background: '#f3e8ff', color: '#6b21a8', fontSize: '10px', padding: '2px 6px', fontWeight: 600 }}>\n                                  üë§ {olderNotif.data.placeholders.action_performed_by}\n                                </TypeBadge>\n                              )}\n                              {olderIsDismissed && (\n                                <TypeBadge style={{ background: '#fee2e2', color: '#991b1b', fontWeight: 700, fontSize: '10px', padding: '2px 6px' }}>\n                                  ÔøΩ Nezobrazuje se ve zvoneƒçku\n                                </TypeBadge>\n                              )}\n                            </NotificationMeta>\n                          </NotificationContent>\n                          <NotificationActions>\n                            {olderIsUnread && (\n                              <IconButton\n                                onClick={(e) => handleMarkAsRead(olderNotif.id, e)}\n                                title=\"Oznaƒçit jako p≈ôeƒçten√©\"\n                                style={{ width: '28px', height: '28px' }}\n                              >\n                                <FontAwesomeIcon icon={faCheck} />\n                              </IconButton>\n                            )}\n                            {olderIsDismissed ? (\n                              <IconButton\n                                onClick={(e) => handleRestore(olderNotif.id, e)}\n                                title=\"Zobrazit zpƒõt ve zvoneƒçku\"\n                                style={{ color: '#16a34a', width: '28px', height: '28px' }}\n                              >\n                                <FontAwesomeIcon icon={faUndo} />\n                              </IconButton>\n                            ) : (\n                              <IconButton\n                                onClick={(e) => handleDismiss(olderNotif.id, e)}\n                                title=\"Skr√Ωt ze zvoneƒçku (z≈Østane zde v historii)\"\n                                style={{ width: '28px', height: '28px' }}\n                              >\n                                <FontAwesomeIcon icon={faEyeSlash} />\n                              </IconButton>\n                            )}\n                            <IconButton\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleDelete(olderNotif.id);\n                              }}\n                              title=\"Smazat trvale z datab√°ze\"\n                              style={{ color: '#dc2626', width: '28px', height: '28px' }}\n                            >\n                              <FontAwesomeIcon icon={faTrash} />\n                            </IconButton>\n                          </NotificationActions>\n                        </NotificationItem>\n                      );\n                    })}\n                  </React.Fragment>\n                );\n              }\n\n              // ‚úÖ NORM√ÅLN√ç RE≈ΩIM - Jednotliv√° notifikace (non-order nebo re≈æim bez vl√°ken)\n              const notification = item.notification || item;\n              const isUnread = !notification.precteno || notification.precteno === 0 || notification.precteno === false;\n              const isDismissed = notification.skryto === 1 || notification.skryto === true;\n              const priority = notification.priorita || 'normal';\n\n              // ‚úÖ Backend u≈æ vrac√≠ parsovan√Ω objekt 'data'\n              const notificationData = notification.data || {};\n              notification.data = notificationData;\n\n              // ‚úÖ Unik√°tn√≠ kl√≠ƒç pro jednotliv√© notifikace - pou≈æijeme ID notifikace\n              const notificationKey = `notification-${notification.id}`;\n\n              return (\n                <NotificationItem\n                  key={notificationKey}\n                  $index={index}\n                  $isUnread={isUnread}\n                  $priority={priority}\n                  onClick={() => handleNotificationClick(notification)}\n                >\n                  {detailMode && (\n                    <NotificationIcon $priority={priority}>\n                      {getPriorityIconComponent(priority)}\n                    </NotificationIcon>\n                  )}\n                  <NotificationContent style={!detailMode ? { marginLeft: '0' } : undefined}>\n                    <NotificationHeader>\n                      <NotificationTitle $isUnread={isUnread}>\n                        {(() => {\n                          // Parsing ev. ƒç√≠sla zaƒç√≠naj√≠c√≠ho na \"O-\" a vytvo≈ôen√≠ odkazu\n                          if (notification.typ?.includes('order') && notification.data?.order_id && notification.nadpis) {\n                            const evCisloMatch = notification.nadpis.match(/(O-[^\\s:]+)/);\n                            if (evCisloMatch) {\n                              const evCislo = evCisloMatch[1];\n                              const textBefore = notification.nadpis.substring(0, evCisloMatch.index);\n                              const textAfter = notification.nadpis.substring(evCisloMatch.index + evCislo.length);\n\n                              return (\n                                <>\n                                  {textBefore}\n                                  <a\n                                    href={`/order-form-25?edit=${notification.data.order_id}&archivovano=1`}\n                                    onClick={async (e) => {\n                                      e.preventDefault();\n                                      e.stopPropagation();\n                                      // ‚úÖ OPRAVENO: Pou≈æij handleNotificationClick pro kontrolu draftu\n                                      await handleNotificationClick(notification);\n                                    }}\n                                    style={{\n                                      color: '#3b82f6',\n                                      textDecoration: 'none',\n                                      fontWeight: '700'\n                                    }}\n                                    title=\"Editovat objedn√°vku\"\n                                  >\n                                    {evCislo}\n                                    <sup style={{ fontSize: '0.6em', fontWeight: '400', marginLeft: '0.2em', color: '#64748b' }}>\n                                      #{notification.data.order_id}\n                                    </sup>\n                                  </a>\n                                  {textAfter}\n                                  {!detailMode && (\n                                    <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.9em', marginLeft: '0.5em' }}>\n                                      | <FontAwesomeIcon icon={faClock} style={{ fontSize: '11px', marginRight: '4px' }} />\n                                      {getTimeAgo(notification.dt_created || notification.created_at)}\n                                      {notification.data?.placeholders?.action_performed_by && ` | ${notification.data.placeholders.action_performed_by}`}\n                                      {notification.from_user_name && ` | Od: ${notification.from_user_name}`}\n                                    </span>\n                                  )}\n                                </>\n                              );\n                            }\n                          }\n                          return (\n                            <>\n                              {notification.nadpis}\n                              {!detailMode && (\n                                <span style={{ color: '#94a3b8', fontWeight: '400', fontSize: '0.9em', marginLeft: '0.5em' }}>\n                                  | <FontAwesomeIcon icon={faClock} style={{ fontSize: '11px', marginRight: '4px' }} />\n                                  {getTimeAgo(notification.dt_created || notification.created_at)}\n                                  {notification.data?.placeholders?.action_performed_by && ` | ${notification.data.placeholders.action_performed_by}`}\n                                  {notification.from_user_name && ` | Od: ${notification.from_user_name}`}\n                                </span>\n                              )}\n                            </>\n                          );\n                        })()}\n                      </NotificationTitle>\n                    </NotificationHeader>\n                    {detailMode && notification.typ?.includes('order') && notification.data ? (\n                      <NotificationMessage>\n                        <strong>P≈ôedmƒõt:</strong> {notification.data.order_subject || 'N/A'} | <strong>Cena:</strong> {notification.data.max_price ? `${notification.data.max_price} Kƒç` : 'N/A'} | <strong>Objednatel:</strong> {notification.data.creator_name || 'N/A'} | <strong>Garant:</strong> {notification.data.garant_name || 'N/A'} | <strong>P≈ô√≠kazce:</strong> {notification.data.prikazce_name || 'N/A'}\n                      </NotificationMessage>\n                    ) : detailMode && notification.zprava ? (\n                      <NotificationMessage>\n                        {notification.zprava}\n                      </NotificationMessage>\n                    ) : null}\n\n                    {/* Pozn√°mka */}\n                    {detailMode && notification.data?.placeholders?.note && (\n                      <div style={{\n                        fontSize: '0.85rem',\n                        color: '#475569',\n                        fontStyle: 'italic',\n                        marginTop: '0.5rem',\n                        padding: '0.625rem 0.75rem',\n                        background: '#f8fafc',\n                        borderLeft: '3px solid #cbd5e1',\n                        borderRadius: '4px'\n                      }}>\n                        <strong style={{ fontStyle: 'normal', color: '#64748b' }}>üìù Pozn√°mka:</strong>{' '}\n                        {notification.data.placeholders.note}\n                      </div>\n                    )}\n\n                    <NotificationMeta>\n                      {detailMode && (\n                        <MetaItem>\n                          <FontAwesomeIcon icon={faClock} style={{ fontSize: '12px' }} />\n                          {getTimeAgo(notification.dt_created || notification.created_at)}\n                        </MetaItem>\n                      )}\n                      {detailMode && notification.kategorie && (\n                        <TypeBadge $type={notification.kategorie}>\n                          {getCategoryLabel(notification.kategorie)}\n                        </TypeBadge>\n                      )}\n                      {/* Datum akce jako badge */}\n                      {detailMode && notification.data?.placeholders?.action_date && (\n                        <TypeBadge style={{ background: '#dbeafe', color: '#1e40af' }}>\n                          üìÖ {notification.data.placeholders.action_date}\n                        </TypeBadge>\n                      )}\n                      {/* Osoba jako badge */}\n                      {detailMode && notification.data?.placeholders?.action_performed_by && (\n                        <TypeBadge style={{ background: '#f3e8ff', color: '#6b21a8', fontWeight: 600 }}>\n                          üë§ {notification.data.placeholders.action_performed_by}\n                        </TypeBadge>\n                      )}\n                    </NotificationMeta>\n                  </NotificationContent>\n                  <NotificationActions>\n                    {isUnread && (\n                      <IconButton\n                        onClick={(e) => handleMarkAsRead(notification.id, e)}\n                        title=\"Oznaƒçit jako p≈ôeƒçten√©\"\n                      >\n                        <FontAwesomeIcon icon={faCheck} />\n                      </IconButton>\n                    )}\n                    {/* ‚úÖ Pokud je dismissed, nab√≠dnout OBNOVEN√ç m√≠sto skryt√≠ */}\n                    {isDismissed ? (\n                      <IconButton\n                        onClick={(e) => handleRestore(notification.id, e)}\n                        title=\"Zobrazit zpƒõt ve zvoneƒçku\"\n                        style={{ color: '#16a34a' }}\n                      >\n                        <FontAwesomeIcon icon={faUndo} />\n                      </IconButton>\n                    ) : (\n                      <IconButton\n                        onClick={(e) => handleDismiss(notification.id, e)}\n                        title=\"Skr√Ωt ze zvoneƒçku (z≈Østane zde v historii)\"\n                      >\n                        <FontAwesomeIcon icon={faEyeSlash} />\n                      </IconButton>\n                    )}\n                    {/* ‚úÖ Tlaƒç√≠tko pro trval√© smaz√°n√≠ z datab√°ze */}\n                    <IconButton\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDelete(notification.id);\n                      }}\n                      title=\"Smazat trvale z datab√°ze\"\n                      style={{ color: '#dc2626' }}\n                    >\n                      <FontAwesomeIcon icon={faTrash} />\n                    </IconButton>\n                  </NotificationActions>\n                </NotificationItem>\n              );\n            })\n          )}\n        </NotificationsList>\n\n        {/* ‚úÖ Pagination */}\n        {!loading && !error && filteredNotifications.length > 0 && (\n          <PaginationContainer>\n            <PaginationInfo>\n              Zobrazeno {paginatedNotifications.length} z {threadedNotifications.length} notifikac√≠\n              {threadedNotifications.length !== notifications.length && (\n                <span> (filtrov√°no z {notifications.length})</span>\n              )}\n            </PaginationInfo>\n\n            <PaginationControls>\n              <span style={{ fontSize: '0.875rem', color: '#64748b', marginRight: '1rem' }}>\n                Zobrazit:\n              </span>\n              <PageSizeSelect\n                value={pageSize}\n                onChange={(e) => {\n                  const newSize = parseInt(e.target.value);\n                  setPageSize(newSize);\n                  setCurrentPage(0); // Reset na prvn√≠ str√°nku\n                }}\n              >\n                <option value={10}>10</option>\n                <option value={25}>25</option>\n                <option value={50}>50</option>\n                <option value={100}>100</option>\n                <option value={250}>250</option>\n              </PageSizeSelect>\n\n              <PageButton\n                onClick={goToFirstPage}\n                disabled={!canGoPrevious}\n              >\n                ¬´¬´\n              </PageButton>\n              <PageButton\n                onClick={goToPreviousPage}\n                disabled={!canGoPrevious}\n              >\n                ‚Äπ\n              </PageButton>\n\n              <span style={{ fontSize: '0.875rem', color: '#64748b', margin: '0 1rem' }}>\n                Str√°nka {currentPage + 1} z {totalPages || 1}\n              </span>\n\n              <PageButton\n                onClick={goToNextPage}\n                disabled={!canGoNext}\n              >\n                ‚Ä∫\n              </PageButton>\n              <PageButton\n                onClick={goToLastPage}\n                disabled={!canGoNext}\n              >\n                ¬ª¬ª\n              </PageButton>\n            </PaginationControls>\n          </PaginationContainer>\n        )}\n      </ContentWrapper>\n\n      {/* üîí Modal pro zamƒçenou objedn√°vku */}\n      {lockedOrderInfo && (\n        <ConfirmDialog\n          isOpen={showLockedOrderDialog}\n          onClose={handleLockedOrderCancel}\n          onConfirm={lockedOrderInfo.canForceUnlock ? handleLockedOrderForceUnlock : handleLockedOrderCancel}\n          title={lockedOrderInfo.canForceUnlock ? 'Objedn√°vka je zamƒçen√°' : 'Objedn√°vka nen√≠ dostupn√°'}\n          icon=\"üîí\"\n          variant=\"warning\"\n          confirmText={lockedOrderInfo.canForceUnlock ? 'Odemknout a p≈ôevz√≠t' : 'Zav≈ô√≠t'}\n          cancelText=\"Zru≈°it\"\n          showCancel={lockedOrderInfo.canForceUnlock}\n        >\n          {lockedOrderInfo.canForceUnlock ? (\n            <div style={{ padding: '1rem 0' }}>\n              <p style={{ color: '#dc2626', fontWeight: '600', marginBottom: '1rem' }}>\n                ‚ö†Ô∏è Objedn√°vka je aktu√°lnƒõ editov√°na u≈æivatelem:\n              </p>\n              <div style={{ padding: '1rem', background: '#f8fafc', borderLeft: '4px solid #3b82f6', borderRadius: '4px', marginBottom: '1rem' }}>\n                <strong style={{ fontSize: '1.1rem' }}>{lockedOrderInfo.lockedByUserName}</strong>\n              </div>\n              {(lockedOrderInfo.lockedByUserEmail || lockedOrderInfo.lockedByUserTelefon) && (\n                <div style={{ padding: '1rem', background: '#f0f9ff', border: '1px solid #bfdbfe', borderRadius: '8px', marginBottom: '1rem' }}>\n                  <p style={{ margin: '0 0 0.5rem 0', fontWeight: '600', color: '#1e40af' }}>Kontaktn√≠ √∫daje:</p>\n                  {lockedOrderInfo.lockedByUserEmail && (\n                    <div style={{ padding: '0.5rem 0', color: '#1e40af' }}>üìß {lockedOrderInfo.lockedByUserEmail}</div>\n                  )}\n                  {lockedOrderInfo.lockedByUserTelefon && (\n                    <div style={{ padding: '0.5rem 0', color: '#1e40af' }}>üìû {lockedOrderInfo.lockedByUserTelefon}</div>\n                  )}\n                </div>\n              )}\n              <p style={{ color: '#64748b', lineHeight: '1.6', marginBottom: '1rem' }}>\n                Jako <strong>{lockedOrderInfo.userRoleName}</strong> m√°te pr√°vo objedn√°vku odemknout a p≈ôevz√≠t ji na sebe.\n                Tato akce upozorn√≠ p≈Øvodn√≠ho u≈æivatele, ≈æe mu byla objedn√°vka odebr√°na.\n              </p>\n              <p style={{ color: '#dc2626', fontWeight: '600' }}>\n                Opravdu chcete p≈ôevz√≠t editaci t√©to objedn√°vky?\n              </p>\n            </div>\n          ) : (\n            <div style={{ padding: '1rem 0' }}>\n              <p style={{ color: '#dc2626', fontWeight: '600', marginBottom: '1rem' }}>\n                ‚ùå Objedn√°vka je aktu√°lnƒõ editov√°na jin√Ωm u≈æivatelem:\n              </p>\n              <div style={{ padding: '1rem', background: '#f8fafc', borderLeft: '4px solid #dc2626', borderRadius: '4px', marginBottom: '1rem' }}>\n                <strong style={{ fontSize: '1.1rem' }}>{lockedOrderInfo.lockedByUserName}</strong>\n              </div>\n              {(lockedOrderInfo.lockedByUserEmail || lockedOrderInfo.lockedByUserTelefon) && (\n                <div style={{ padding: '1rem', background: '#fef2f2', border: '1px solid #fecaca', borderRadius: '8px', marginBottom: '1rem' }}>\n                  <p style={{ margin: '0 0 0.5rem 0', fontWeight: '600', color: '#991b1b' }}>Kontaktujte u≈æivatele:</p>\n                  {lockedOrderInfo.lockedByUserEmail && (\n                    <div style={{ padding: '0.5rem 0', color: '#991b1b' }}>üìß {lockedOrderInfo.lockedByUserEmail}</div>\n                  )}\n                  {lockedOrderInfo.lockedByUserTelefon && (\n                    <div style={{ padding: '0.5rem 0', color: '#991b1b' }}>üìû {lockedOrderInfo.lockedByUserTelefon}</div>\n                  )}\n                </div>\n              )}\n              <p style={{ color: '#64748b', lineHeight: '1.6' }}>\n                Pokud je to nezbytn√©, kontaktujte administr√°tora, kter√Ω m√° pr√°vo objedn√°vku odemknout.\n              </p>\n            </div>\n          )}\n        </ConfirmDialog>\n      )}\n\n      {/* ‚úÖ Confirm Dialog */}\n      <ConfirmDialog\n        isOpen={confirmDialog.isOpen}\n        title={confirmDialog.title}\n        icon={confirmDialog.icon}\n        variant={confirmDialog.variant}\n        onConfirm={confirmDialog.onConfirm}\n        onClose={confirmDialog.onCancel}\n      >\n        {confirmDialog.message}\n      </ConfirmDialog>\n\n      {/* üìù Draft Warning Dialog - STEJN√ù JAKO V Orders25List */}\n      <ConfirmDialog\n        isOpen={showEditConfirmModal}\n        onClose={handleEditCancel}\n        onConfirm={handleEditConfirm}\n        title=\"Potvrzen√≠ editace objedn√°vky\"\n        icon={faExclamationTriangle}\n        variant=\"warning\"\n        confirmText=\"Ano, pokraƒçovat\"\n        cancelText=\"Ne, zru≈°it\"\n      >\n        <p>\n          Chyst√°te se editovat objedn√°vku z notifikace.\n        </p>\n\n        {/* Zobraz varov√°n√≠ o rozepracovan√© objedn√°vce, pokud existuje */}\n        {(() => {\n          if (!currentDraftData) return null;\n\n          try {\n            const formData = currentDraftData.formData || currentDraftData;\n            const draftTitle = formData.ev_cislo || formData.cislo_objednavky || formData.predmet || '‚òÖ KONCEPT ‚òÖ';\n            const isNewConcept = isValidConcept(currentDraftData);\n\n            return (\n              <p style={{ background: '#fef3c7', padding: '0.75rem', borderRadius: '6px', border: '1px solid #f59e0b', margin: '0.5rem 0' }}>\n                <strong>Pozor:</strong> M√°te rozepracovanou {isNewConcept ? 'novou objedn√°vku' : 'editaci objedn√°vky'}{' '}\n                <strong>{draftTitle}</strong>\n                . P≈ôepnut√≠m na jinou objedn√°vku p≈ôijdete o neulo≈æen√© zmƒõny!\n              </p>\n            );\n          } catch (error) {\n            return null;\n          }\n        })()}\n\n        <p>\n          <strong>Varov√°n√≠:</strong> T√≠mto budou zru≈°eny v≈°echny p≈ô√≠padn√© neulo≈æen√© zmƒõny v jin√Ωch objedn√°vk√°ch a m≈Ø≈æe doj√≠t ke ztr√°tƒõ dat.\n        </p>\n        <p>\n          Chcete pokraƒçovat v editaci?\n        </p>\n      </ConfirmDialog>\n    </PageContainer>\n  );\n};\n\nexport default NotificationsPage;\n"],"names":["keyframes","_templateObject","_taggedTemplateLiteral","slideIn","_templateObject2","PageContainer","styled","div","_templateObject3","ContentWrapper","_templateObject4","TitlePanel","_templateObject5","TitleLeft","_templateObject6","RefreshButton","_templateObject7","button","_templateObject8","PageDivider","_templateObject9","PageTitle","h1","_templateObject0","ToolbarContainer","_templateObject1","p","_templateObject10","_templateObject11","SearchBox","_templateObject12","SearchInput","input","_templateObject13","SearchIcon","_templateObject14","ClearSearchButton","_templateObject15","FilterGroup","_templateObject16","HeaderActionButton","_templateObject17","_templateObject18","FilterButton","_templateObject19","props","$active","ActionButton","_templateObject20","$variant","StatsBar","_templateObject21","CollapseLine","_templateObject22","DashboardLabel","span","_templateObject23","DividerLine","hr","_templateObject24","CollapseButton","_templateObject25","StatCard","_templateObject26","$isActive","concat","$color","$clickable","StatValue","_templateObject27","StatIcon","_templateObject28","StatLabel","_templateObject29","NotificationsList","_templateObject30","NotificationItem","_templateObject31","$index","$isUnread","$priority","NotificationIcon","_templateObject32","priority","toUpperCase","NotificationContent","_templateObject33","NotificationHeader","_templateObject34","NotificationTitle","_templateObject35","NotificationMessage","_templateObject36","NotificationMeta","_templateObject37","MetaItem","_templateObject38","TypeBadge","_templateObject39","$type","NotificationActions","_templateObject40","IconButton","_templateObject41","EmptyState","_templateObject42","EmptyIcon","_templateObject43","EmptyText","_templateObject44","EmptySubtext","_templateObject45","LoadingState","_templateObject46","PaginationContainer","_templateObject47","PaginationInfo","_templateObject48","PaginationControls","_templateObject49","PageButton","_templateObject50","PageSizeSelect","select","_templateObject51","NotificationsPage","bgTasks","useBackgroundTasks","navigate","useNavigate","userDetail","React","AuthContext","notifications","setNotifications","useState","loading","setLoading","isRefreshing","setIsRefreshing","searchQuery","setSearchQuery","localStorage","getItem","showUnread","setShowUnread","saved","JSON","parse","showRead","setShowRead","showUrgent","setShowUrgent","showHigh","setShowHigh","showNormal","setShowNormal","activeStatFilter","setActiveStatFilter","error","setError","confirmDialog","setConfirmDialog","isOpen","threadMode","setThreadMode","expandedThreads","setExpandedThreads","Set","detailMode","setDetailMode","isDashboardCollapsed","setIsDashboardCollapsed","showLockedOrderDialog","setShowLockedOrderDialog","lockedOrderInfo","setLockedOrderInfo","orderToEdit","setOrderToEdit","showEditConfirmModal","setShowEditConfirmModal","currentDraftData","setCurrentDraftData","targetOrderId","setTargetOrderId","currentPage","setCurrentPage","pageSize","setPageSize","useEffect","loadNotifications","setItem","stringify","registerNewNotificationsCallback","handleNewNotifications","newNotifications","unreadCount","getCategoryLabel","category","async","arguments","length","undefined","result","getNotificationsList","limit","offset","unread_only","include_dismissed","enrichedNotifications","data","map","notification","config","NOTIFICATION_CONFIG","typ","_objectSpread","icon","color","priorita","handleStatCardClick","filterValue","filteredNotifications","filter","_notification$nadpis","_notification$zprava","query","toLowerCase","nadpis","includes","zprava","notificationType","isUnread","precteno","threadedNotifications","notificationsList","n","isThread","threads","Map","nonOrderNotifications","forEach","idx","_notification$typ","_notification$typ2","orderId","order_id","String","e","isOrderNotification","isTodoAlarm","has","set","get","push","Array","from","entries","_ref","_sorted$","_sorted$2","threadNotifications","sorted","sort","a","b","dateA","Date","dt_created","created_at","newestDate","_ref2","_threadNotifications$","_threadNotifications$2","mainNotification","olderNotifications","slice","sortDate","item","_objectWithoutProperties","_excluded","groupNotificationsIntoThreads","stats","total","nova","type","keSchvaleni","schvalena","zamitnuta","cekaSe","odeslana","potvrzena","cekaKontrola","vecnaSpravnost","registrZverejnena","dokoncena","zrusena","totalPages","Math","ceil","startIndex","endIndex","paginatedNotifications","canGoPrevious","canGoNext","handleLockedOrderCancel","handleNotificationClick","handleMarkAsRead","id","mode","objekt_id","parseInt","token","username","_dbOrder$lock_info","_dbOrder$lock_info2","_dbOrder$lock_info3","dbOrder","getOrderV2","safeToast","lock_info","locked","is_owned_by_me","is_expired","_userDetail$roles","_userDetail$roles2","_userDetail$roles2$fi","lockInfo","lockedByUserName","locked_by_user_fullname","locked_by_user_id","canForceUnlock","roles","some","role","kod_role","lockedByUserEmail","locked_by_user_email","lockedByUserTelefon","locked_by_user_telefon","lockedAt","locked_at","lockAgeMinutes","lock_age_minutes","userRoleName","find","r","nazev_role","objednavka_id","console","user_id","uzivatel_id","draftManager","setCurrentUser","hasDraft","shouldShowConfirmDialog","draftDataToStore","isDraftForThisOrder","_draftData$formData","_draftData$formData2","draftData","loadDraft","draftOrderId","savedOrderId","formData","currentOrderId","log","hasNewConcept","isValidConcept","hasDbChanges","hasDraftChanges","_draftData$formData3","notificationId","stopPropagation","markNotificationAsRead","prev","is_read","handleUnreadCountChange","currentCount","unreadNotificationsCount","alert","handleDismiss","dismissNotification","is_dismissed","handleRestore","restoreNotification","handleDelete","title","message","faTrash","variant","onConfirm","deleteNotification","faExclamationCircle","onCancel","handleDeleteAll","hasActiveFilter","notificationsToDelete","count","faExclamationTriangle","deletePromises","Promise","all","deleted_count","deletedIds","deletedUnreadCount","max","deleteAllNotifications","getTimeAgo","dateString","date","diffMs","diffMins","floor","diffHours","diffDays","toLocaleDateString","day","month","year","getPriorityIconComponent","_jsx","FontAwesomeIcon","faBolt","faExclamation","faInfoCircle","_jsxs","children","SmartTooltip","text","preferredPosition","onClick","handleRefresh","faSyncAlt","style","background","borderColor","faLayerGroup","faList","unread","markAllNotificationsAsRead","faCheckDouble","dismissPromises","faEyeSlash","buttonText","marginRight","faEye","faBell","faChevronDown","faChevronUp","faSearch","placeholder","value","onChange","target","faTimes","faClock","_Fragment","marginLeft","display","gap","handleExpandAll","allThreadIds","faExpandAlt","handleCollapseAll","faCompressAlt","marginTop","fontSize","marginBottom","index","_notification$typ4","_notification$data4","_notification$data4$p","_notification$data5","_notification$data5$p","_notification$data6","_notification$data6$p","_mainNotification$typ2","_mainNotification$dat6","_mainNotification$dat7","_mainNotification$dat8","_mainNotification$dat9","_mainNotification$dat0","_mainNotification$dat1","_mainNotification$dat10","isExpanded","threadCount","threadKey","isDismissed","skryto","notificationData","borderLeft","_mainNotification$typ","_mainNotification$dat","_mainNotification$dat4","_mainNotification$dat5","evCisloMatch","match","_mainNotification$dat2","_mainNotification$dat3","evCislo","textBefore","substring","textAfter","href","preventDefault","textDecoration","fontWeight","placeholders","action_performed_by","from_user_name","cursor","whiteSpace","padding","borderRadius","newSet","delete","add","order_subject","predmet","max_price_with_dph","amount","creator_name","objednatel_name","garant_name","prikazce_name","schvalovatel_name","note","fontStyle","action_date","newExpanded","faChevronRight","faCheck","faUndo","olderNotif","olderIndex","_olderNotif$typ","_olderNotif$data4","_olderNotif$data4$pla","_olderNotif$data5","_olderNotif$data5$pla","_olderNotif$data6","_olderNotif$data6$pla","olderIsUnread","olderIsDismissed","olderPriority","olderData","opacity","lineHeight","_olderNotif$type","_olderNotif$data","_olderNotif$data3","_olderNotif$data3$pla","_olderNotif$data2","_olderNotif$data2$pla","max_price","width","height","notificationKey","_notification$typ3","_notification$data","_notification$data3","_notification$data3$p","_notification$data2","_notification$data2$p","kategorie","newSize","goToFirstPage","disabled","goToPreviousPage","margin","goToNextPage","min","goToLastPage","ConfirmDialog","onClose","handleLockedOrderForceUnlock","confirmText","cancelText","showCancel","border","handleEditCancel","deleteAllDraftKeys","draftTitle","ev_cislo","cislo_objednavky","isNewConcept"],"sourceRoot":""}